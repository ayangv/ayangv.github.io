[{"title":"Mac ä¸Šæ­å»º Flink 1.6.0 ç¯å¢ƒå¹¶æ„å»ºè¿è¡Œç®€å•ç¨‹åºå…¥é—¨","date":"2018-09-17T16:00:00.000Z","path":"2018/09/18/flink-install/","text":"å‡†å¤‡å·¥ä½œ1ã€å®‰è£…æŸ¥çœ‹ Java çš„ç‰ˆæœ¬å·ï¼Œæ¨èä½¿ç”¨ Java 8ã€‚ å®‰è£… Flink2ã€åœ¨ Mac OS X ä¸Šå®‰è£… Flink æ˜¯éå¸¸æ–¹ä¾¿çš„ã€‚æ¨èé€šè¿‡ homebrew æ¥å®‰è£…ã€‚ 1brew install apache-flink 3ã€æ£€æŸ¥å®‰è£…ï¼š 1flink --version ç»“æœï¼š 1Version: 1.6.0, Commit ID: ff472b4 4ã€å¯åŠ¨ flink 1234567891011121314è¿›å…¥å®‰è£…ç›®å½•ï¼šcd /usr/local/Cellar/apache-flink/1.6.0/libexec/binæ‰§è¡Œä¸‹é¢å‘½ä»¤./start-cluster.shå¯åŠ¨æ—¥å¿—ï¼šStarting cluster.Starting standalonesession daemon on host zhisheng.Starting taskexecutor daemon on host zhisheng. æ¥ç€å°±å¯ä»¥è¿›å…¥ web é¡µé¢(http://localhost:8081/) æŸ¥çœ‹ demo1ã€æ–°å»ºä¸€ä¸ª maven é¡¹ç›® åˆ›å»ºä¸€ä¸ª SocketTextStreamWordCount æ–‡ä»¶ï¼ŒåŠ å…¥ä»¥ä¸‹ä»£ç ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253package com.zhisheng.flink;import org.apache.flink.api.common.functions.FlatMapFunction;import org.apache.flink.api.java.tuple.Tuple2;import org.apache.flink.streaming.api.datastream.DataStreamSource;import org.apache.flink.streaming.api.datastream.SingleOutputStreamOperator;import org.apache.flink.streaming.api.environment.StreamExecutionEnvironment;import org.apache.flink.util.Collector;/** * Created by zhisheng_tian on 2018/9/18 */public class SocketTextStreamWordCount &#123; public static void main(String[] args) throws Exception &#123; //å‚æ•°æ£€æŸ¥ if (args.length != 2) &#123; System.err.println(\"USAGE:\\nSocketTextStreamWordCount &lt;hostname&gt; &lt;port&gt;\"); return; &#125; String hostname = args[0]; Integer port = Integer.parseInt(args[1]); // set up the streaming execution environment final StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment(); //è·å–æ•°æ® DataStreamSource&lt;String&gt; stream = env.socketTextStream(hostname, port); //è®¡æ•° SingleOutputStreamOperator&lt;Tuple2&lt;String, Integer&gt;&gt; sum = stream.flatMap(new LineSplitter()) .keyBy(0) .sum(1); sum.print(); env.execute(\"Java WordCount from SocketTextStream Example\"); &#125; public static final class LineSplitter implements FlatMapFunction&lt;String, Tuple2&lt;String, Integer&gt;&gt; &#123; @Override public void flatMap(String s, Collector&lt;Tuple2&lt;String, Integer&gt;&gt; collector) &#123; String[] tokens = s.toLowerCase().split(\"\\\\W+\"); for (String token: tokens) &#123; if (token.length() &gt; 0) &#123; collector.collect(new Tuple2&lt;String, Integer&gt;(token, 1)); &#125; &#125; &#125; &#125;&#125; æ¥ç€è¿›å…¥å·¥ç¨‹ç›®å½•ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ‰“åŒ…ã€‚ 1mvn clean package -Dmaven.test.skip=true ç„¶åæˆ‘ä»¬å¼€å¯ç›‘å¬ 9000 ç«¯å£: 1nc -l 9000 æœ€åè¿›å…¥ flink å®‰è£…ç›®å½• bin ä¸‹æ‰§è¡Œä»¥ä¸‹å‘½ä»¤è·‘ç¨‹åºï¼š 1flink run -c com.zhisheng.flink.SocketTextStreamWordCount /Users/zhisheng/IdeaProjects/flink/word-count/target/original-word-count-1.0-SNAPSHOT.jar 127.0.0.1 9000 æ³¨æ„æ¢æˆä½ è‡ªå·±é¡¹ç›®çš„è·¯å¾„ã€‚ æ‰§è¡Œå®Œä¸Šè¿°å‘½ä»¤åï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ webUI ä¸­çœ‹åˆ°æ­£åœ¨è¿è¡Œçš„ç¨‹åºï¼š æˆ‘ä»¬å¯ä»¥åœ¨ nc ç›‘å¬ç«¯å£ä¸­è¾“å…¥ textï¼Œæ¯”å¦‚ï¼š ç„¶åæˆ‘ä»¬é€šè¿‡ tail å‘½ä»¤çœ‹ä¸€ä¸‹è¾“å‡ºçš„ log æ–‡ä»¶ï¼Œæ¥è§‚å¯Ÿç»Ÿè®¡ç»“æœã€‚è¿›å…¥ç›®å½• apache-flink/1.6.0/libexec/logï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤: 1tail -f flink-zhisheng-taskexecutor-0-zhisheng.out æ³¨æ„ï¼šåˆ‡æ¢æˆä½ è‡ªå·±çš„è·¯å¾„å’ŒæŸ¥çœ‹è‡ªå·±çš„ç›®å½•ã€‚ æ€»ç»“æœ¬æ–‡æè¿°äº†å¦‚ä½•åœ¨ Mac ç”µè„‘ä¸Šå®‰è£… Flinkï¼ŒåŠè¿è¡Œå®ƒã€‚æ¥ç€é€šè¿‡ä¸€ä¸ªç®€å•çš„ Flink ç¨‹åºæ¥ä»‹ç»å¦‚ä½•æ„å»ºåŠè¿è¡ŒFlink ç¨‹åºã€‚ å…³æ³¨æˆ‘ è½¬è½½è¯·æ³¨æ˜åœ°å€ï¼šhttp://www.54tianzhisheng.cn/2018/09/18/flink-install","tags":[{"name":"Flink","slug":"Flink","permalink":"http://yoursite.com/tags/Flink/"},{"name":"å¤§æ•°æ®","slug":"å¤§æ•°æ®","permalink":"http://yoursite.com/tags/å¤§æ•°æ®/"}]},{"title":"Go å¹¶å‘â€”â€”å®ç°åç¨‹åŒæ­¥çš„å‡ ç§æ–¹å¼","date":"2018-08-29T16:00:00.000Z","path":"2018/08/30/go-sync/","text":"å‰è¨€Java ä¸­æœ‰ä¸€ç³»åˆ—çš„çº¿ç¨‹åŒæ­¥çš„æ–¹æ³•ï¼Œgo é‡Œé¢æœ‰ goroutineï¼ˆåç¨‹ï¼‰ï¼Œå…ˆçœ‹ä¸‹ä¸‹é¢çš„ä»£ç æ‰§è¡Œçš„ç»“æœæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ 123456789101112131415package mainimport ( \"fmt\")func main() &#123; go func() &#123; fmt.Println(\"Goroutine 1\") &#125;() go func() &#123; fmt.Println(\"Goroutine 2\") &#125;()&#125; æ‰§è¡Œä»¥ä¸Šä»£ç å¾ˆå¯èƒ½çœ‹ä¸åˆ°è¾“å‡ºã€‚ å› ä¸ºæœ‰å¯èƒ½è¿™ä¸¤ä¸ªåç¨‹è¿˜æ²¡å¾—åˆ°æ‰§è¡Œï¼Œä¸»åç¨‹å°±å·²ç»ç»“æŸäº†ï¼Œè€Œä¸»åç¨‹ç»“æŸæ—¶ä¼šç»“æŸæ‰€æœ‰å…¶ä»–åç¨‹ï¼Œæ‰€ä»¥å¯¼è‡´ä»£ç è¿è¡Œçš„ç»“æœä»€ä¹ˆéƒ½æ²¡æœ‰ã€‚ ä¼°è®¡ä¸å°‘æ–°æ¥è§¦ go çš„ç«¥é‹éƒ½ä¼šå¯¹æ­¤éƒé—·ğŸ˜’ï¼Œå¯èƒ½ä¼šé—®é‚£ä¹ˆè¯¥å¦‚ä½•ç­‰å¾…ä¸»åç¨‹ä¸­åˆ›å»ºçš„åç¨‹æ‰§è¡Œå®Œæ¯•ä¹‹åå†ç»“æŸä¸»åç¨‹å‘¢ï¼Ÿ ä¸‹é¢è¯´å‡ ç§å¯ä»¥è§£å†³çš„æ–¹æ³•ï¼š Sleep ä¸€æ®µæ—¶é—´åœ¨ main æ–¹æ³•é€€å‡ºä¹‹å‰ sleep ä¸€æ®µæ—¶é—´å°±å¯èƒ½ä¼šå‡ºç°ç»“æœäº†ï¼Œå¦‚ä¸‹ä»£ç ï¼š 123456789101112131415161718package mainimport ( \"fmt\" \"time\")func main() &#123; go func() &#123; fmt.Println(\"Goroutine 1\") &#125;() go func() &#123; fmt.Println(\"Goroutine 2\") &#125;() time.Sleep(time.Second * 1) // ç¡çœ 1ç§’ï¼Œç­‰å¾…ä¸Šé¢ä¸¤ä¸ªåç¨‹ç»“æŸ&#125; è¿™ä¸¤ä¸ªç®€å•çš„åç¨‹æ‰§è¡Œæ¶ˆè€—çš„æ—¶é—´å¾ˆçŸ­çš„ï¼Œæ‰€ä»¥ä½ ä¼šå‘ç°ç°åœ¨å°±æœ‰ç»“æœå‡ºç°äº†ã€‚ 12Goroutine 1Goroutine 2 ä¸ºä»€ä¹ˆä¸Šé¢æˆ‘è¦è¯´ â€œå¯èƒ½ä¼šå‡ºç°â€ ï¼Ÿ å› ä¸º sleep è¿™ä¸ªæ—¶é—´ç›®å‰æ˜¯è®¾ç½®çš„ 1sï¼Œå¦‚æœæˆ‘è¿™ä¸¤ä¸ªåç¨‹é‡Œé¢æ‰§è¡Œäº†å¾ˆå¤æ‚çš„é€»è¾‘æ“ä½œï¼ˆæ—¶é—´å¤§äº 1sï¼‰ï¼Œé‚£ä¹ˆå°±ä¼šå‘ç°ä¾æ—§ä¹Ÿæ˜¯æ— ç»“æœæ‰“å°å‡ºæ¥çš„ã€‚ é‚£ä¹ˆå°±å¯ä»¥å‘ç°è¿™ç§æ–¹å¼å¾—åˆ°é—®é¢˜æ‰€åœ¨äº†ï¼šæˆ‘ä»¬æ— æ³•ç¡®å®šéœ€è¦ç¡çœ å¤šä¹… ä¸Šé¢é‚£ç§æ–¹å¼æœ‰é—®é¢˜ï¼Œgo é‡Œé¢å…¶å®ä¹Ÿå¯ä»¥ç”¨ç®¡é“æ¥å®ç°åŒæ­¥çš„ã€‚ ç®¡é“å®ç°åŒæ­¥é‚£ä¹ˆç”¨ç®¡é“æ€ä¹ˆå®ç°åŒæ­¥å‘¢ï¼Ÿshow codeï¼š 123456789101112131415161718192021222324252627282930package mainimport ( \"fmt\")func main() &#123; ch := make(chan struct&#123;&#125;) count := 2 // count è¡¨ç¤ºæ´»åŠ¨çš„åç¨‹ä¸ªæ•° go func() &#123; fmt.Println(\"Goroutine 1\") ch &lt;- struct&#123;&#125;&#123;&#125; // åç¨‹ç»“æŸï¼Œå‘å‡ºä¿¡å· &#125;() go func() &#123; fmt.Println(\"Goroutine 2\") ch &lt;- struct&#123;&#125;&#123;&#125; // åç¨‹ç»“æŸï¼Œå‘å‡ºä¿¡å· &#125;() for range ch &#123; // æ¯æ¬¡ä»chä¸­æ¥æ”¶æ•°æ®ï¼Œè¡¨æ˜ä¸€ä¸ªæ´»åŠ¨çš„åç¨‹ç»“æŸ count-- // å½“æ‰€æœ‰æ´»åŠ¨çš„åç¨‹éƒ½ç»“æŸæ—¶ï¼Œå…³é—­ç®¡é“ if count == 0 &#123; close(ch) &#125; &#125;&#125; è¿™ç§æ–¹å¼æ˜¯ä¸€ç§æ¯”è¾ƒå®Œç¾çš„è§£å†³æ–¹æ¡ˆï¼Œ goroutine / channel å®ƒä»¬ä¹Ÿæ˜¯åœ¨ go é‡Œé¢ç»å¸¸æ­é…åœ¨ä¸€èµ·çš„ä¸€å¯¹ã€‚ sync.WaitGroupå…¶å® go é‡Œé¢ä¹Ÿæä¾›äº†æ›´ç®€å•çš„æ–¹å¼ â€”â€” ä½¿ç”¨ sync.WaitGroupã€‚ WaitGroup é¡¾åæ€ä¹‰ï¼Œå°±æ˜¯ç”¨æ¥ç­‰å¾…ä¸€ç»„æ“ä½œå®Œæˆçš„ã€‚WaitGroup å†…éƒ¨å®ç°äº†ä¸€ä¸ªè®¡æ•°å™¨ï¼Œç”¨æ¥è®°å½•æœªå®Œæˆçš„æ“ä½œä¸ªæ•°ï¼Œå®ƒæä¾›äº†ä¸‰ä¸ªæ–¹æ³•ï¼š Add() ç”¨æ¥æ·»åŠ è®¡æ•° Done() ç”¨æ¥åœ¨æ“ä½œç»“æŸæ—¶è°ƒç”¨ï¼Œä½¿è®¡æ•°å‡ä¸€ Wait() ç”¨æ¥ç­‰å¾…æ‰€æœ‰çš„æ“ä½œç»“æŸï¼Œå³è®¡æ•°å˜ä¸º 0ï¼Œè¯¥å‡½æ•°ä¼šåœ¨è®¡æ•°ä¸ä¸º 0 æ—¶ç­‰å¾…ï¼Œåœ¨è®¡æ•°ä¸º 0 æ—¶ç«‹å³è¿”å› ç»§ç»­ show codeï¼š 123456789101112131415161718192021222324package mainimport ( \"fmt\" \"sync\")func main() &#123; var wg sync.WaitGroup wg.Add(2) // å› ä¸ºæœ‰ä¸¤ä¸ªåŠ¨ä½œï¼Œæ‰€ä»¥å¢åŠ 2ä¸ªè®¡æ•° go func() &#123; fmt.Println(\"Goroutine 1\") wg.Done() // æ“ä½œå®Œæˆï¼Œå‡å°‘ä¸€ä¸ªè®¡æ•° &#125;() go func() &#123; fmt.Println(\"Goroutine 2\") wg.Done() // æ“ä½œå®Œæˆï¼Œå‡å°‘ä¸€ä¸ªè®¡æ•° &#125;() wg.Wait() // ç­‰å¾…ï¼Œç›´åˆ°è®¡æ•°ä¸º0&#125; ä½ ä¼šå‘ç°ä¹Ÿæ˜¯å¯ä»¥çœ‹åˆ°è¿è¡Œç»“æœçš„ï¼Œæ˜¯ä¸æ˜¯å‘ç°è¿™ç§æ–¹å¼æ˜¯å¾ˆç®€å•çš„ã€‚ æ€»ç»“å¤šçœ‹åˆ«äººå†™çš„ä»£ç ï¼›å¤šæƒ³æƒ³ä¸ºå•¥è¦è¿™æ ·å†™ï¼›å¤šæŸ¥è‡ªå·±ä¸ç†è§£çš„åœ°æ–¹ï¼›å¤šå†™ demo æµ‹è¯•ï¼›å¤šå†™æ–‡ç« æ€»ç»“ã€‚ å…³æ³¨æˆ‘ æœ¬æ–‡åœ°å€ä¸ºï¼šhttp://www.54tianzhisheng.cn/2018/08/30/go-sync/ ï¼Œè½¬è½½è¯·æ³¨æ˜åŸæ–‡å‡ºå¤„ï¼","tags":[{"name":"GO","slug":"GO","permalink":"http://yoursite.com/tags/GO/"}]},{"title":"æ•™ä½ å¦‚ä½•åœ¨ IDEA è¿œç¨‹ Debug ElasticSearch","date":"2018-08-13T16:00:00.000Z","path":"2018/08/14/idea-remote-debug-elasticsearch/","text":"å‰æä¹‹å‰åœ¨æºç é˜…è¯»ç¯å¢ƒæ­å»ºæ–‡ç« ä¸­å†™è¿‡æˆ‘é‡åˆ°çš„ä¸€ä¸ªé—®é¢˜è¿Ÿè¿Ÿæ²¡æœ‰è§£å†³ï¼Œä¹Ÿä¸€ç›´å›°æ‰°ç€æˆ‘ã€‚é—®é¢˜å¦‚ä¸‹ï¼Œåœ¨å¯åŠ¨çš„æ—¶å€™è§£å†³æ‰å…¶ä»–å¼‚å¸¸å’ŒæŠ¥é”™åï¼Œæœ€åå‰©ä¸‹è¿™ä¸ªé”™è¯¯ä¸€ç›´è§£å†³ä¸äº†ï¼š 12345678910111213141516171819202122[2018-08-01T09:44:27,370][ERROR][o.e.b.ElasticsearchUncaughtExceptionHandler] [] fatal error in thread [main], exitingjava.lang.NoClassDefFoundError: org/elasticsearch/plugins/ExtendedPluginsClassLoader at org.elasticsearch.plugins.PluginsService.loadBundle(PluginsService.java:632) ~[main/:?] at org.elasticsearch.plugins.PluginsService.loadBundles(PluginsService.java:557) ~[main/:?] at org.elasticsearch.plugins.PluginsService.&lt;init&gt;(PluginsService.java:162) ~[main/:?] at org.elasticsearch.node.Node.&lt;init&gt;(Node.java:311) ~[main/:?] at org.elasticsearch.node.Node.&lt;init&gt;(Node.java:252) ~[main/:?] at org.elasticsearch.bootstrap.Bootstrap$5.&lt;init&gt;(Bootstrap.java:213) ~[main/:?] at org.elasticsearch.bootstrap.Bootstrap.setup(Bootstrap.java:213) ~[main/:?] at org.elasticsearch.bootstrap.Bootstrap.init(Bootstrap.java:326) ~[main/:?] at org.elasticsearch.bootstrap.Elasticsearch.init(Elasticsearch.java:136) ~[main/:?] at org.elasticsearch.bootstrap.Elasticsearch.execute(Elasticsearch.java:127) ~[main/:?] at org.elasticsearch.cli.EnvironmentAwareCommand.execute(EnvironmentAwareCommand.java:86) ~[main/:?] at org.elasticsearch.cli.Command.mainWithoutErrorHandling(Command.java:124) ~[main/:?] at org.elasticsearch.cli.Command.main(Command.java:90) ~[main/:?] at org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:93) ~[main/:?] at org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:86) ~[main/:?]Caused by: java.lang.ClassNotFoundException: org.elasticsearch.plugins.ExtendedPluginsClassLoader at jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:582) ~[?:?] at jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:190) ~[?:?] at java.lang.ClassLoader.loadClass(ClassLoader.java:499) ~[?:?] ... 15 more ç½‘ä¸Šçš„è§£å†³åŠæ³•ä¹Ÿè¯•äº†å¾ˆå¤šéï¼ŒåŒ…æ‹¬è‡ªå·±ä¹Ÿåœ¨ GitHub issue æé—®äº†ï¼Œä¹Ÿæ²¡èƒ½è§£å†³ã€‚ç„¶ååé¢è‡ªå·±åˆ†äº«æ–‡ç« åœ¨æ˜é‡‘ä¹Ÿå‘ç°æœ‰äººå’Œæˆ‘æœ‰åŒæ ·çš„é—®é¢˜ã€‚ ä¸‹é¢è®²è®²å¦ä¸€ç§å¯ä»¥è®©ä½ ç»§ç»­çœ‹æºç çš„æ–¹æ³•ã€‚ è¿œç¨‹ Debugå‰ææ¡ä»¶æ˜¯ä½ ä¹‹å‰å·²ç»æŠŠé¡¹ç›®å¯¼å…¥è¿› IDEA äº†ï¼Œå¦‚æœä½ è¿˜æ²¡äº†è§£ï¼Œè¯·çœ‹ä¹‹å‰çš„æ–‡ç« ï¼Œè¿™é‡Œä¸é‡å¤äº†ã€‚ å¯åŠ¨ä¸€ä¸ªå®ä¾‹åœ¨ä½  git æ‹‰å–ä¸‹çš„ä»£ç ï¼Œåˆ‡æ¢ä½ è¦é˜…è¯»çš„åˆ†æ”¯ä»£ç åï¼Œæ‰§è¡Œä¸‹é¢è¿™æ¡å‘½ä»¤å¯åŠ¨ä¸€ä¸ª debug çš„å®ä¾‹ï¼š 1./gradlew run --debug-jvm å¯åŠ¨ç­‰ä¼šåï¼Œå°±å¯ä»¥çœ‹åˆ°å¯åŠ¨å¥½åçš„ç«¯å£å·ä¸º 8000 äº†ã€‚ é…ç½® IDEAæ–°å»ºä¸€ä¸ªè¿œç¨‹çš„ debugï¼š é…ç½®å¦‚ä¸‹å›¾ï¼š æ¥ä¸‹æ¥ç‚¹å‡» OK å°±å¥½äº†ã€‚ ç„¶åç‚¹å‡»ä¸‹é¢çš„ debug å›¾æ ‡ï¼š å¯åŠ¨åå¦‚ä¸‹ï¼š è¿™æ—¶å°±å¯ä»¥å‘ç°æ˜¯å¯ä»¥æŠŠæ•´ä¸ªæµç¨‹å…¨å¯åŠ¨äº†ï¼Œä¹Ÿä¸ä¼šæŠ¥ä»€ä¹ˆé”™è¯¯ï¼ æµç¨‹å…¨å¯åŠ¨åï¼Œä½ ä¼šå‘ç°ç»ˆç«¯çš„æ—¥å¿—éƒ½æ‰“å°å‡ºæ¥äº†ï¼ˆæ³¨æ„ï¼šè¿™æ—¶ä¸æ˜¯æ‰“å°åœ¨ä½ çš„ IDEA æ§åˆ¶å°ï¼‰ æ€»ç»“é‡åˆ°é—®é¢˜ï¼Œå¤šæ€è€ƒï¼Œå¤šæœç´¢ï¼Œå¤šæƒ³åŠæ³•è§£å†³ï¼è¿™æ ·æ‰èƒ½å¤Ÿä¸æ–­çš„æå‡ä½ è§£å†³é—®é¢˜çš„èƒ½åŠ›ï¼ å…³æ³¨æˆ‘æœ€åè½¬è½½è¯·åŠ¡å¿…æ³¨æ˜æ–‡ç« å‡ºå¤„ä¸ºï¼š http://www.54tianzhisheng.cn/2018/08/14/idea-remote-debug-elasticsearch/ ç›¸å…³æ–‡ç« 1ã€æ¸£æ¸£èœé¸¡ä¸ºä»€ä¹ˆè¦çœ‹ ElasticSearch æºç ï¼Ÿ 2ã€æ¸£æ¸£èœé¸¡çš„ ElasticSearch æºç è§£æ â€”â€” ç¯å¢ƒæ­å»º 3ã€æ¸£æ¸£èœé¸¡çš„ ElasticSearch æºç è§£æ â€”â€” å¯åŠ¨æµç¨‹(ä¸Š) 4ã€æ¸£æ¸£èœé¸¡çš„ ElasticSearch æºç è§£æ â€”â€” å¯åŠ¨æµç¨‹(ä¸‹) 5ã€Elasticsearch ç³»åˆ—æ–‡ç« ï¼ˆä¸€ï¼‰ï¼šElasticsearch é»˜è®¤åˆ†è¯å™¨å’Œä¸­åˆ†åˆ†è¯å™¨ä¹‹é—´çš„æ¯”è¾ƒåŠä½¿ç”¨æ–¹æ³• 6ã€Elasticsearch ç³»åˆ—æ–‡ç« ï¼ˆäºŒï¼‰ï¼šå…¨æ–‡æœç´¢å¼•æ“ Elasticsearch é›†ç¾¤æ­å»ºå…¥é—¨æ•™ç¨‹ 7ã€Elasticsearch ç³»åˆ—æ–‡ç« ï¼ˆä¸‰ï¼‰ï¼šElasticSearch é›†ç¾¤ç›‘æ§ 8ã€Elasticsearch ç³»åˆ—æ–‡ç« ï¼ˆå››ï¼‰ï¼šElasticSearch å•ä¸ªèŠ‚ç‚¹ç›‘æ§ 9ã€Elasticsearch ç³»åˆ—æ–‡ç« ï¼ˆäº”ï¼‰ï¼šELK å®æ—¶æ—¥å¿—åˆ†æå¹³å°ç¯å¢ƒæ­å»º 10ã€æ•™ä½ å¦‚ä½•åœ¨ IDEA è¿œç¨‹ Debug ElasticSearch","tags":[{"name":"ElasticSearch","slug":"ElasticSearch","permalink":"http://yoursite.com/tags/ElasticSearch/"}]},{"title":"æ¸£æ¸£èœé¸¡çš„ ElasticSearch æºç è§£æ â€”â€” å¯åŠ¨æµç¨‹ï¼ˆä¸‹ï¼‰","date":"2018-08-11T16:00:00.000Z","path":"2018/08/12/es-code03/","text":"å…³æ³¨æˆ‘ è½¬è½½è¯·åŠ¡å¿…æ³¨æ˜åŸåˆ›åœ°å€ä¸ºï¼šhttp://www.54tianzhisheng.cn/2018/08/12/es-code03/ å‰æä¸Šç¯‡æ–‡ç« å†™å®Œäº† ES æµç¨‹å¯åŠ¨çš„ä¸€éƒ¨åˆ†ï¼Œmain æ–¹æ³•éƒ½å…¥å£ï¼Œä»¥åŠåˆ›å»º Elasticsearch è¿è¡Œçš„å¿…é¡»ç¯å¢ƒä»¥åŠç›¸å…³é…ç½®ï¼Œæ¥ç€å°±æ˜¯åˆ›å»ºè¯¥ç¯å¢ƒçš„èŠ‚ç‚¹äº†ã€‚ Node çš„åˆ›å»ºçœ‹ä¸‹æ–°å»ºèŠ‚ç‚¹çš„ä»£ç ï¼š(ä»£ç æ¯”è¾ƒå¤šï¼Œè¿™é‡Œæ˜¯æ¯”è¾ƒå…³é”®çš„åœ°æ–¹ï¼Œæˆ‘å°±æŠŠæ³¨é‡Šç›´æ¥å†™åœ¨ä»£ç ä¸Šé¢äº†ï¼Œå®åœ¨ä¸å¥½æ‹†å¼€è¿™æ®µä»£ç ï¼Œ300 å¤šè¡Œä»£ç ) 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278public Node(Environment environment) &#123; this(environment, Collections.emptyList()); //æ‰§è¡Œä¸‹é¢çš„ä»£ç  &#125;protected Node(final Environment environment, Collection&lt;Class&lt;? extends Plugin&gt;&gt; classpathPlugins) &#123; final List&lt;Closeable&gt; resourcesToClose = new ArrayList&lt;&gt;(); // register everything we need to release in the case of an error boolean success = false; &#123;// use temp logger just to say we are starting. we can't use it later on because the node name might not be set Logger logger = Loggers.getLogger(Node.class, NODE_NAME_SETTING.get(environment.settings())); logger.info(\"initializing ...\"); &#125; try &#123; originalSettings = environment.settings(); Settings tmpSettings = Settings.builder().put(environment.settings()) .put(Client.CLIENT_TYPE_SETTING_S.getKey(), CLIENT_TYPE).build();// create the node environment as soon as possible, to recover the node id and enable logging try &#123; nodeEnvironment = new NodeEnvironment(tmpSettings, environment); //1ã€åˆ›å»ºèŠ‚ç‚¹ç¯å¢ƒ,æ¯”å¦‚èŠ‚ç‚¹åç§°,èŠ‚ç‚¹ID,åˆ†ç‰‡ä¿¡æ¯,å­˜å‚¨å…ƒ,ä»¥åŠåˆ†é…å†…å­˜å‡†å¤‡ç»™èŠ‚ç‚¹ä½¿ç”¨ resourcesToClose.add(nodeEnvironment); &#125; catch (IOException ex) &#123; throw new IllegalStateException(\"Failed to create node environment\", ex); &#125; final boolean hadPredefinedNodeName = NODE_NAME_SETTING.exists(tmpSettings); final String nodeId = nodeEnvironment.nodeId(); tmpSettings = addNodeNameIfNeeded(tmpSettings, nodeId); final Logger logger = Loggers.getLogger(Node.class, tmpSettings);// this must be captured after the node name is possibly added to the settings final String nodeName = NODE_NAME_SETTING.get(tmpSettings); if (hadPredefinedNodeName == false) &#123; logger.info(\"node name derived from node ID [&#123;&#125;]; set [&#123;&#125;] to override\", nodeId, NODE_NAME_SETTING.getKey()); &#125; else &#123; logger.info(\"node name [&#123;&#125;], node ID [&#123;&#125;]\", nodeName, nodeId); &#125; //2ã€æ‰“å°å‡ºJVMç›¸å…³ä¿¡æ¯ final JvmInfo jvmInfo = JvmInfo.jvmInfo(); logger.info(\"version[&#123;&#125;], pid[&#123;&#125;], build[&#123;&#125;/&#123;&#125;/&#123;&#125;/&#123;&#125;], OS[&#123;&#125;/&#123;&#125;/&#123;&#125;], JVM[&#123;&#125;/&#123;&#125;/&#123;&#125;/&#123;&#125;]\", Version.displayVersion(Version.CURRENT, Build.CURRENT.isSnapshot()), jvmInfo.pid(), Build.CURRENT.flavor().displayName(), Build.CURRENT.type().displayName(), Build.CURRENT.shortHash(), Build.CURRENT.date(), Constants.OS_NAME, Constants.OS_VERSION, Constants.OS_ARCH,Constants.JVM_VENDOR,Constants.JVM_NAME, Constants.JAVA_VERSION,Constants.JVM_VERSION); logger.info(\"JVM arguments &#123;&#125;\", Arrays.toString(jvmInfo.getInputArguments())); //æ£€æŸ¥å½“å‰ç‰ˆæœ¬æ˜¯ä¸æ˜¯ pre-release ç‰ˆæœ¬ï¼ˆSnapshotï¼‰ï¼Œ warnIfPreRelease(Version.CURRENT, Build.CURRENT.isSnapshot(), logger); ã€‚ã€‚ã€‚ this.pluginsService = new PluginsService(tmpSettings, environment.configFile(), environment.modulesFile(), environment.pluginsFile(), classpathPlugins); //3ã€åˆ©ç”¨PluginsServiceåŠ è½½ç›¸åº”çš„æ¨¡å—å’Œæ’ä»¶ this.settings = pluginsService.updatedSettings(); localNodeFactory = new LocalNodeFactory(settings, nodeEnvironment.nodeId());// create the environment based on the finalized (processed) view of the settings// this is just to makes sure that people get the same settings, no matter where they ask them from this.environment = new Environment(this.settings, environment.configFile()); Environment.assertEquivalent(environment, this.environment); final List&lt;ExecutorBuilder&lt;?&gt;&gt; executorBuilders = pluginsService.getExecutorBuilders(settings); //çº¿ç¨‹æ±  final ThreadPool threadPool = new ThreadPool(settings, executorBuilders.toArray(new ExecutorBuilder[0])); resourcesToClose.add(() -&gt; ThreadPool.terminate(threadPool, 10, TimeUnit.SECONDS)); // adds the context to the DeprecationLogger so that it does not need to be injected everywhere DeprecationLogger.setThreadContext(threadPool.getThreadContext()); resourcesToClose.add(() -&gt; DeprecationLogger.removeThreadContext(threadPool.getThreadContext())); final List&lt;Setting&lt;?&gt;&gt; additionalSettings = new ArrayList&lt;&gt;(pluginsService.getPluginSettings()); //é¢å¤–é…ç½® final List&lt;String&gt; additionalSettingsFilter = new ArrayList&lt;&gt;(pluginsService.getPluginSettingsFilter()); for (final ExecutorBuilder&lt;?&gt; builder : threadPool.builders()) &#123; //4ã€åŠ è½½ä¸€äº›é¢å¤–é…ç½® additionalSettings.addAll(builder.getRegisteredSettings()); &#125; client = new NodeClient(settings, threadPool);//5ã€åˆ›å»ºä¸€ä¸ªèŠ‚ç‚¹å®¢æˆ·ç«¯ //6ã€ç¼“å­˜ä¸€ç³»åˆ—æ¨¡å—,å¦‚NodeModule,ClusterModule,IndicesModule,ActionModule,GatewayModule,SettingsModule,RepositioriesModuleï¼ŒscriptModuleï¼ŒanalysisModule final ResourceWatcherService resourceWatcherService = new ResourceWatcherService(settings, threadPool); final ScriptModule scriptModule = new ScriptModule(settings, pluginsService.filterPlugins(ScriptPlugin.class)); AnalysisModule analysisModule = new AnalysisModule(this.environment, pluginsService.filterPlugins(AnalysisPlugin.class)); // this is as early as we can validate settings at this point. we already pass them to ScriptModule as well as ThreadPool so we might be late here already final SettingsModule settingsModule = new SettingsModule(this.settings, additionalSettings, additionalSettingsFilter);scriptModule.registerClusterSettingsListeners(settingsModule.getClusterSettings()); resourcesToClose.add(resourceWatcherService); final NetworkService networkService = new NetworkService( getCustomNameResolvers(pluginsService.filterPlugins(DiscoveryPlugin.class))); List&lt;ClusterPlugin&gt; clusterPlugins = pluginsService.filterPlugins(ClusterPlugin.class); final ClusterService clusterService = new ClusterService(settings, settingsModule.getClusterSettings(), threadPool, ClusterModule.getClusterStateCustomSuppliers(clusterPlugins)); clusterService.addStateApplier(scriptModule.getScriptService()); resourcesToClose.add(clusterService); final IngestService ingestService = new IngestService(settings, threadPool, this.environment, scriptModule.getScriptService(), analysisModule.getAnalysisRegistry(), pluginsService.filterPlugins(IngestPlugin.class)); final DiskThresholdMonitor listener = new DiskThresholdMonitor(settings, clusterService::state, clusterService.getClusterSettings(), client); final ClusterInfoService clusterInfoService = newClusterInfoService(settings, clusterService, threadPool, client,listener::onNewInfo); final UsageService usageService = new UsageService(settings); ModulesBuilder modules = new ModulesBuilder();// plugin modules must be added here, before others or we can get crazy injection errors... for (Module pluginModule : pluginsService.createGuiceModules()) &#123; modules.add(pluginModule); &#125; final MonitorService monitorService = new MonitorService(settings, nodeEnvironment, threadPool, clusterInfoService); ClusterModule clusterModule = new ClusterModule(settings, clusterService, clusterPlugins, clusterInfoService); modules.add(clusterModule); IndicesModule indicesModule = new IndicesModule(pluginsService.filterPlugins(MapperPlugin.class)); modules.add(indicesModule); SearchModule searchModule = new SearchModule(settings, false, pluginsService.filterPlugins(SearchPlugin.class)); CircuitBreakerService circuitBreakerService = createCircuitBreakerService(settingsModule.getSettings(), settingsModule.getClusterSettings()); resourcesToClose.add(circuitBreakerService); modules.add(new GatewayModule()); PageCacheRecycler pageCacheRecycler = createPageCacheRecycler(settings); BigArrays bigArrays = createBigArrays(pageCacheRecycler, circuitBreakerService); resourcesToClose.add(bigArrays); modules.add(settingsModule); List&lt;NamedWriteableRegistry.Entry&gt; namedWriteables = Stream.of( NetworkModule.getNamedWriteables().stream(), indicesModule.getNamedWriteables().stream(), searchModule.getNamedWriteables().stream(), pluginsService.filterPlugins(Plugin.class).stream() .flatMap(p -&gt; p.getNamedWriteables().stream()), ClusterModule.getNamedWriteables().stream()) .flatMap(Function.identity()).collect(Collectors.toList()); final NamedWriteableRegistry namedWriteableRegistry = new NamedWriteableRegistry(namedWriteables); NamedXContentRegistry xContentRegistry = new NamedXContentRegistry(Stream.of( NetworkModule.getNamedXContents().stream(), searchModule.getNamedXContents().stream(), pluginsService.filterPlugins(Plugin.class).stream() .flatMap(p -&gt; p.getNamedXContent().stream()), ClusterModule.getNamedXWriteables().stream()).flatMap(Function.identity()).collect(toList())); modules.add(new RepositoriesModule(this.environment, pluginsService.filterPlugins(RepositoryPlugin.class), xContentRegistry)); final MetaStateService metaStateService = new MetaStateService(settings, nodeEnvironment, xContentRegistry); final IndicesService indicesService = new IndicesService(settings, pluginsService, nodeEnvironment, xContentRegistry,analysisModule.getAnalysisRegistry(), clusterModule.getIndexNameExpressionResolver(), indicesModule.getMapperRegistry(), namedWriteableRegistry,threadPool, settingsModule.getIndexScopedSettings(), circuitBreakerService, bigArrays, scriptModule.getScriptService(),client, metaStateService); Collection&lt;Object&gt; pluginComponents = pluginsService.filterPlugins(Plugin.class).stream() .flatMap(p -&gt; p.createComponents(client, clusterService, threadPool, resourceWatcherService,scriptModule.getScriptService(), xContentRegistry, environment, nodeEnvironment,namedWriteableRegistry).stream()).collect(Collectors.toList()); ActionModule actionModule = new ActionModule(false, settings, clusterModule.getIndexNameExpressionResolver(), settingsModule.getIndexScopedSettings(), settingsModule.getClusterSettings(), settingsModule.getSettingsFilter(),threadPool, pluginsService.filterPlugins(ActionPlugin.class), client, circuitBreakerService, usageService); modules.add(actionModule); //7ã€è·å–RestController,ç”¨äºå¤„ç†å„ç§Elasticsearchçš„restå‘½ä»¤,å¦‚_cat,_all,_cat/health,_clustersç­‰restå‘½ä»¤(Elasticsearchç§°ä¹‹ä¸ºaction) final RestController restController = actionModule.getRestController(); final NetworkModule networkModule = new NetworkModule(settings, false, pluginsService.filterPlugins(NetworkPlugin.class),threadPool, bigArrays, pageCacheRecycler, circuitBreakerService, namedWriteableRegistry, xContentRegistry,networkService, restController); Collection&lt;UnaryOperator&lt;Map&lt;String, MetaData.Custom&gt;&gt;&gt; customMetaDataUpgraders = pluginsService.filterPlugins(Plugin.class).stream() .map(Plugin::getCustomMetaDataUpgrader) .collect(Collectors.toList()); Collection&lt;UnaryOperator&lt;Map&lt;String, IndexTemplateMetaData&gt;&gt;&gt; indexTemplateMetaDataUpgraders = pluginsService.filterPlugins(Plugin.class).stream() .map(Plugin::getIndexTemplateMetaDataUpgrader) .collect(Collectors.toList()); Collection&lt;UnaryOperator&lt;IndexMetaData&gt;&gt; indexMetaDataUpgraders = pluginsService.filterPlugins(Plugin.class).stream() .map(Plugin::getIndexMetaDataUpgrader).collect(Collectors.toList()); final MetaDataUpgrader metaDataUpgrader = new MetaDataUpgrader(customMetaDataUpgraders, indexTemplateMetaDataUpgraders); final MetaDataIndexUpgradeService metaDataIndexUpgradeService = new MetaDataIndexUpgradeService(settings, xContentRegistry, indicesModule.getMapperRegistry(), settingsModule.getIndexScopedSettings(), indexMetaDataUpgraders); final GatewayMetaState gatewayMetaState = new GatewayMetaState(settings, nodeEnvironment, metaStateService, metaDataIndexUpgradeService, metaDataUpgrader); new TemplateUpgradeService(settings, client, clusterService, threadPool, indexTemplateMetaDataUpgraders); final Transport transport = networkModule.getTransportSupplier().get(); Set&lt;String&gt; taskHeaders = Stream.concat( pluginsService.filterPlugins(ActionPlugin.class).stream().flatMap(p -&gt; p.getTaskHeaders().stream()), Stream.of(\"X-Opaque-Id\") ).collect(Collectors.toSet()); final TransportService transportService = newTransportService(settings, transport, threadPool, networkModule.getTransportInterceptor(), localNodeFactory, settingsModule.getClusterSettings(), taskHeaders); final ResponseCollectorService responseCollectorService = new ResponseCollectorService(this.settings, clusterService); final SearchTransportService searchTransportService = new SearchTransportService(settings, transportService, SearchExecutionStatsCollector.makeWrapper(responseCollectorService)); final Consumer&lt;Binder&gt; httpBind; final HttpServerTransport httpServerTransport; if (networkModule.isHttpEnabled()) &#123; httpServerTransport = networkModule.getHttpServerTransportSupplier().get(); httpBind = b -&gt; &#123;b.bind(HttpServerTransport.class).toInstance(httpServerTransport); &#125;; &#125; else &#123; httpBind = b -&gt; &#123; b.bind(HttpServerTransport.class).toProvider(Providers.of(null)); &#125;; httpServerTransport = null; &#125; final DiscoveryModule discoveryModule = new DiscoveryModule(this.settings, threadPool, transportService, namedWriteableRegistry,networkService, clusterService.getMasterService(), clusterService.getClusterApplierService(),clusterService.getClusterSettings(), pluginsService.filterPlugins(DiscoveryPlugin.class),clusterModule.getAllocationService()); this.nodeService = new NodeService(settings, threadPool, monitorService, discoveryModule.getDiscovery(),transportService, indicesService, pluginsService, circuitBreakerService, scriptModule.getScriptService(),httpServerTransport, ingestService, clusterService, settingsModule.getSettingsFilter(), responseCollectorService,searchTransportService); final SearchService searchService = newSearchService(clusterService, indicesService, threadPool, scriptModule.getScriptService(), bigArrays, searchModule.getFetchPhase(),responseCollectorService); final List&lt;PersistentTasksExecutor&lt;?&gt;&gt; tasksExecutors = pluginsService .filterPlugins(PersistentTaskPlugin.class).stream() .map(p -&gt; p.getPersistentTasksExecutor(clusterService, threadPool, client)) .flatMap(List::stream) .collect(toList()); final PersistentTasksExecutorRegistry registry = new PersistentTasksExecutorRegistry(settings, tasksExecutors); final PersistentTasksClusterService persistentTasksClusterService = new PersistentTasksClusterService(settings, registry, clusterService); final PersistentTasksService persistentTasksService = new PersistentTasksService(settings, clusterService, threadPool, client);//8ã€ç»‘å®šå¤„ç†å„ç§æœåŠ¡çš„å®ä¾‹,è¿™é‡Œæ˜¯æœ€æ ¸å¿ƒçš„åœ°æ–¹,ä¹Ÿæ˜¯Elasticsearchèƒ½å¤„ç†å„ç§æœåŠ¡çš„æ ¸å¿ƒ. modules.add(b -&gt; &#123; b.bind(Node.class).toInstance(this); b.bind(NodeService.class).toInstance(nodeService); b.bind(NamedXContentRegistry.class).toInstance(xContentRegistry); b.bind(PluginsService.class).toInstance(pluginsService); b.bind(Client.class).toInstance(client); b.bind(NodeClient.class).toInstance(client); b.bind(Environment.class).toInstance(this.environment); b.bind(ThreadPool.class).toInstance(threadPool); b.bind(NodeEnvironment.class).toInstance(nodeEnvironment); b.bind(ResourceWatcherService.class).toInstance(resourceWatcherService);b.bind(CircuitBreakerService.class).toInstance(circuitBreakerService); b.bind(BigArrays.class).toInstance(bigArrays); b.bind(ScriptService.class).toInstance(scriptModule.getScriptService()); b.bind(AnalysisRegistry.class).toInstance(analysisModule.getAnalysisRegistry()); b.bind(IngestService.class).toInstance(ingestService); b.bind(UsageService.class).toInstance(usageService); b.bind(NamedWriteableRegistry.class).toInstance(namedWriteableRegistry); b.bind(MetaDataUpgrader.class).toInstance(metaDataUpgrader); b.bind(MetaStateService.class).toInstance(metaStateService); b.bind(IndicesService.class).toInstance(indicesService); b.bind(SearchService.class).toInstance(searchService); b.bind(SearchTransportService.class).toInstance(searchTransportService);b.bind(SearchPhaseController.class).toInstance(new SearchPhaseController(settings, searchService::createReduceContext)); b.bind(Transport.class).toInstance(transport); b.bind(TransportService.class).toInstance(transportService); b.bind(NetworkService.class).toInstance(networkService); b.bind(UpdateHelper.class).toInstance(new UpdateHelper(settings, scriptModule.getScriptService()));b.bind(MetaDataIndexUpgradeService.class).toInstance(metaDataIndexUpgradeService); b.bind(ClusterInfoService.class).toInstance(clusterInfoService); b.bind(GatewayMetaState.class).toInstance(gatewayMetaState); b.bind(Discovery.class).toInstance(discoveryModule.getDiscovery()); &#123; RecoverySettings recoverySettings = new RecoverySettings(settings, settingsModule.getClusterSettings()); processRecoverySettings(settingsModule.getClusterSettings(), recoverySettings); b.bind(PeerRecoverySourceService.class).toInstance(new PeerRecoverySourceService(settings, transportService,indicesService, recoverySettings)); b.bind(PeerRecoveryTargetService.class).toInstance(new PeerRecoveryTargetService(settings, threadPool,transportService, recoverySettings, clusterService)); &#125; httpBind.accept(b); pluginComponents.stream().forEach(p -&gt; b.bind((Class) p.getClass()).toInstance(p));b.bind(PersistentTasksService.class).toInstance(persistentTasksService); b.bind(PersistentTasksClusterService.class).toInstance(persistentTasksClusterService);b.bind(PersistentTasksExecutorRegistry.class).toInstance(registry); &#125;); injector = modules.createInjector(); // TODO hack around circular dependencies problems in AllocationServiceclusterModule.getAllocationService().setGatewayAllocator(injector.getInstance(GatewayAllocator.class)); List&lt;LifecycleComponent&gt; pluginLifecycleComponents = pluginComponents.stream() .filter(p -&gt; p instanceof LifecycleComponent) .map(p -&gt; (LifecycleComponent) p).collect(Collectors.toList()); //9ã€åˆ©ç”¨Guiceå°†å„ç§æ¨¡å—ä»¥åŠæœåŠ¡(xxxService)æ³¨å…¥åˆ°Elasticsearchç¯å¢ƒä¸­pluginLifecycleComponents.addAll(pluginsService.getGuiceServiceClasses().stream() .map(injector::getInstance).collect(Collectors.toList())); resourcesToClose.addAll(pluginLifecycleComponents); this.pluginLifecycleComponents = Collections.unmodifiableList(pluginLifecycleComponents); client.initialize(injector.getInstance(new Key&lt;Map&lt;GenericAction, TransportAction&gt;&gt;() &#123;&#125;), () -&gt; clusterService.localNode().getId(), transportService.getRemoteClusterService()); if (NetworkModule.HTTP_ENABLED.get(settings)) &#123; //å¦‚æœelasticsearch.ymlæ–‡ä»¶ä¸­é…ç½®äº†http.enabledå‚æ•°(é»˜è®¤ä¸ºtrue),åˆ™ä¼šåˆå§‹åŒ–RestHandlers logger.debug(\"initializing HTTP handlers ...\"); actionModule.initRestHandlers(() -&gt; clusterService.state().nodes()); //åˆå§‹åŒ–RestHandlers, è§£æé›†ç¾¤å‘½ä»¤,å¦‚_cat/,_cat/health &#125; //10ã€åˆå§‹åŒ–å·¥ä½œå®Œæˆ logger.info(\"initialized\"); success = true; &#125; catch (IOException ex) &#123; throw new ElasticsearchException(\"failed to bind service\", ex); &#125; finally &#123; if (!success) &#123; IOUtils.closeWhileHandlingException(resourcesToClose); &#125; &#125;&#125; ä¸Šé¢ä»£ç çœŸçš„å¾ˆå¤šï¼Œè¿™é‡Œå†è¯´ä¸‹ä¸Šé¢è¿™ä¹ˆå¤šä»£ç ä¸»è¦å¹²äº†ä»€ä¹ˆå§ï¼šï¼ˆå…·ä½“æ˜¯å“ªè¡Œä»£ç æ‰§è¡Œçš„å¦‚ä¸‹æµç¨‹ï¼Œä¸Šé¢ä»£ç ä¸­ä¹Ÿæ ‡è®°äº†ï¼‰ 1ã€åˆ›å»ºèŠ‚ç‚¹ç¯å¢ƒ,æ¯”å¦‚èŠ‚ç‚¹åç§°,èŠ‚ç‚¹ ID,åˆ†ç‰‡ä¿¡æ¯,å­˜å‚¨å…ƒ,ä»¥åŠåˆ†é…å†…å­˜å‡†å¤‡ç»™èŠ‚ç‚¹ä½¿ç”¨ 2ã€æ‰“å°å‡º JVM ç›¸å…³ä¿¡æ¯ 3ã€åˆ©ç”¨ PluginsService åŠ è½½ç›¸åº”çš„æ¨¡å—å’Œæ’ä»¶ï¼Œå…·ä½“å“ªäº›æ¨¡å—å¯ä»¥å» modules ç›®å½•ä¸‹æŸ¥çœ‹ 4ã€åŠ è½½ä¸€äº›é¢å¤–çš„é…ç½®å‚æ•° 5ã€åˆ›å»ºä¸€ä¸ªèŠ‚ç‚¹å®¢æˆ·ç«¯ 6ã€ç¼“å­˜ä¸€ç³»åˆ—æ¨¡å—,å¦‚NodeModule,ClusterModule,IndicesModule,ActionModule,GatewayModule,SettingsModule,RepositioriesModuleï¼ŒscriptModuleï¼ŒanalysisModule 7ã€è·å– RestControllerï¼Œç”¨äºå¤„ç†å„ç§ Elasticsearch çš„ rest å‘½ä»¤,å¦‚ _cat, _all, _cat/health, _clusters ç­‰ restå‘½ä»¤ 8ã€ç»‘å®šå¤„ç†å„ç§æœåŠ¡çš„å®ä¾‹ 9ã€åˆ©ç”¨ Guice å°†å„ç§æ¨¡å—ä»¥åŠæœåŠ¡(xxxService)æ³¨å…¥åˆ° Elasticsearch ç¯å¢ƒä¸­ 10ã€åˆå§‹åŒ–å·¥ä½œå®Œæˆï¼ˆæ‰“å°æ—¥å¿—ï¼‰ JarHell æŠ¥é”™è§£é‡Šå‰ä¸€ç¯‡é˜…è¯»æºç ç¯å¢ƒæ­å»ºçš„æ–‡ç« å†™è¿‡ç”¨ JDK 1.8 ç¼–è¯‘ ES æºç æ˜¯ä¼šé‡åˆ°å¦‚ä¸‹å¼‚å¸¸ï¼š 1org.elasticsearch.bootstrap.StartupException: java.lang.IllegalStateException: jar hell! è¿™é‡Œè¯´ä¸‹å°±æ˜¯ setup æ–¹æ³•ä¸­çš„å¦‚ä¸‹ä»£ç å¯¼è‡´çš„ 1234567try &#123; // look for jar hell final Logger logger = ESLoggerFactory.getLogger(JarHell.class); JarHell.checkJarHell(logger::debug);&#125; catch (IOException | URISyntaxException e) &#123; throw new BootstrapException(e);&#125; æ‰€ä»¥ä½ å¦‚æœæ˜¯ç”¨ JDK 1.8 ç¼–è¯‘çš„ï¼Œé‚£ä¹ˆå°±éœ€è¦æŠŠæ‰€æœ‰çš„æœ‰è¿™å—çš„ä»£ç ç»™æ³¨é‡Šæ‰å°±å¯ä»¥ç¼–è¯‘æˆåŠŸçš„ã€‚ æˆ‘è‡ªå·±è¯•è¿‡ç”¨ JDK 10 ç¼–è¯‘æ˜¯æ²¡æœ‰å‡ºç°è¿™é‡ŒæŠ¥é”™çš„ã€‚ æ­£å¼å¯åŠ¨ ES èŠ‚ç‚¹å›åˆ°ä¸Šé¢ Bootstrap ä¸­çš„é™æ€ init æ–¹æ³•ä¸­ï¼Œæ¥ä¸‹æ¥å°±æ˜¯æ­£å¼å¯åŠ¨ elasticsearch èŠ‚ç‚¹äº†ï¼š 123456INSTANCE.start(); //è°ƒç”¨ä¸‹é¢çš„ start æ–¹æ³•private void start() throws NodeValidationException &#123; node.start(); //æ­£å¼å¯åŠ¨ Elasticsearch èŠ‚ç‚¹ keepAliveThread.start();&#125; æ¥ä¸‹æ¥çœ‹çœ‹è¿™ä¸ª start æ–¹æ³•é‡Œé¢çš„ node.start() æ–¹æ³•æºç ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120public Node start() throws NodeValidationException &#123; if (!lifecycle.moveToStarted()) &#123; return this; &#125; Logger logger = Loggers.getLogger(Node.class, NODE_NAME_SETTING.get(settings)); logger.info(\"starting ...\"); pluginLifecycleComponents.forEach(LifecycleComponent::start); //1ã€åˆ©ç”¨Guiceè·å–ä¸Šè¿°æ³¨å†Œçš„å„ç§æ¨¡å—ä»¥åŠæœåŠ¡ //Node çš„å¯åŠ¨å…¶å®å°±æ˜¯ node é‡Œæ¯ä¸ªç»„ä»¶çš„å¯åŠ¨ï¼ŒåŒæ ·çš„ï¼Œåˆ†åˆ«è°ƒç”¨ä¸åŒçš„å®ä¾‹çš„ start æ–¹æ³•æ¥å¯åŠ¨è¿™ä¸ªç»„ä»¶, å¦‚ä¸‹ï¼š injector.getInstance(MappingUpdatedAction.class).setClient(client); injector.getInstance(IndicesService.class).start(); injector.getInstance(IndicesClusterStateService.class).start(); injector.getInstance(SnapshotsService.class).start(); injector.getInstance(SnapshotShardsService.class).start(); injector.getInstance(RoutingService.class).start(); injector.getInstance(SearchService.class).start(); nodeService.getMonitorService().start(); final ClusterService clusterService = injector.getInstance(ClusterService.class); final NodeConnectionsService nodeConnectionsService = injector.getInstance(NodeConnectionsService.class); nodeConnectionsService.start(); clusterService.setNodeConnectionsService(nodeConnectionsService); injector.getInstance(ResourceWatcherService.class).start(); injector.getInstance(GatewayService.class).start(); Discovery discovery = injector.getInstance(Discovery.class); clusterService.getMasterService().setClusterStatePublisher(discovery::publish); // Start the transport service now so the publish address will be added to the local disco node in ClusterService TransportService transportService = injector.getInstance(TransportService.class); transportService.getTaskManager().setTaskResultsService(injector.getInstance(TaskResultsService.class)); transportService.start(); assert localNodeFactory.getNode() != null; assert transportService.getLocalNode().equals(localNodeFactory.getNode()) : \"transportService has a different local node than the factory provided\"; final MetaData onDiskMetadata; try &#123; // we load the global state here (the persistent part of the cluster state stored on disk) to // pass it to the bootstrap checks to allow plugins to enforce certain preconditions based on the recovered state. if (DiscoveryNode.isMasterNode(settings) || DiscoveryNode.isDataNode(settings)) &#123;//æ ¹æ®é…ç½®æ–‡ä»¶çœ‹å½“å‰èŠ‚ç‚¹æ˜¯masterè¿˜æ˜¯dataèŠ‚ç‚¹ onDiskMetadata = injector.getInstance(GatewayMetaState.class).loadMetaState(); &#125; else &#123; onDiskMetadata = MetaData.EMPTY_META_DATA; &#125; assert onDiskMetadata != null : \"metadata is null but shouldn't\"; // this is never null &#125; catch (IOException e) &#123; throw new UncheckedIOException(e); &#125; validateNodeBeforeAcceptingRequests(new BootstrapContext(settings, onDiskMetadata), transportService.boundAddress(), pluginsService .filterPlugins(Plugin .class) .stream() .flatMap(p -&gt; p.getBootstrapChecks().stream()).collect(Collectors.toList())); //2ã€å°†å½“å‰èŠ‚ç‚¹åŠ å…¥åˆ°ä¸€ä¸ªé›†ç¾¤ç°‡ä¸­å»,å¹¶å¯åŠ¨å½“å‰èŠ‚ç‚¹ clusterService.addStateApplier(transportService.getTaskManager()); // start after transport service so the local disco is known discovery.start(); // start before cluster service so that it can set initial state on ClusterApplierService clusterService.start(); assert clusterService.localNode().equals(localNodeFactory.getNode()) : \"clusterService has a different local node than the factory provided\"; transportService.acceptIncomingRequests(); discovery.startInitialJoin(); // tribe nodes don't have a master so we shouldn't register an observer s final TimeValue initialStateTimeout = DiscoverySettings.INITIAL_STATE_TIMEOUT_SETTING.get(settings); if (initialStateTimeout.millis() &gt; 0) &#123; final ThreadPool thread = injector.getInstance(ThreadPool.class); ClusterState clusterState = clusterService.state(); ClusterStateObserver observer = new ClusterStateObserver(clusterState, clusterService, null, logger, thread.getThreadContext()); if (clusterState.nodes().getMasterNodeId() == null) &#123; logger.debug(\"waiting to join the cluster. timeout [&#123;&#125;]\", initialStateTimeout); final CountDownLatch latch = new CountDownLatch(1); observer.waitForNextChange(new ClusterStateObserver.Listener() &#123; @Override public void onNewClusterState(ClusterState state) &#123; latch.countDown(); &#125; @Override public void onClusterServiceClose() &#123; latch.countDown(); &#125; @Override public void onTimeout(TimeValue timeout) &#123; logger.warn(\"timed out while waiting for initial discovery state - timeout: &#123;&#125;\", initialStateTimeout); latch.countDown(); &#125; &#125;, state -&gt; state.nodes().getMasterNodeId() != null, initialStateTimeout); try &#123; latch.await(); &#125; catch (InterruptedException e) &#123; throw new ElasticsearchTimeoutException(\"Interrupted while waiting for initial discovery state\"); &#125; &#125; &#125; if (NetworkModule.HTTP_ENABLED.get(settings)) &#123; injector.getInstance(HttpServerTransport.class).start(); &#125; if (WRITE_PORTS_FILE_SETTING.get(settings)) &#123; if (NetworkModule.HTTP_ENABLED.get(settings)) &#123; HttpServerTransport http = injector.getInstance(HttpServerTransport.class); writePortsFile(\"http\", http.boundAddress()); &#125; TransportService transport = injector.getInstance(TransportService.class); writePortsFile(\"transport\", transport.boundAddress()); &#125; logger.info(\"started\"); pluginsService.filterPlugins(ClusterPlugin.class).forEach(ClusterPlugin::onNodeStarted); return this;&#125; ä¸Šé¢ä»£ç ä¸»è¦æ˜¯ï¼š 1ã€åˆ©ç”¨ Guice è·å–ä¸Šè¿°æ³¨å†Œçš„å„ç§æ¨¡å—ä»¥åŠæœåŠ¡ï¼Œç„¶åå¯åŠ¨ node é‡Œæ¯ä¸ªç»„ä»¶ï¼ˆåˆ†åˆ«è°ƒç”¨ä¸åŒçš„å®ä¾‹çš„ start æ–¹æ³•æ¥å¯åŠ¨ï¼‰ 2ã€æ‰“å°æ—¥å¿—ï¼ˆå¯åŠ¨èŠ‚ç‚¹å®Œæˆï¼‰ æ€»ç»“è¿™ç¯‡æ–‡ç« ä¸»è¦æŠŠå¤§æ¦‚å¯åŠ¨æµç¨‹ä¸²é€šäº†ï¼Œè®²äº†ä¸‹ node èŠ‚ç‚¹çš„åˆ›å»ºå’Œæ­£å¼å¯åŠ¨ ES èŠ‚ç‚¹äº†ã€‚å› ä¸ºç¯‡å¹…è¾ƒå¤šæ‰€ä»¥æ‹†å¼€æˆä¸¤ç¯‡ï¼Œå…ˆä¸æ‰£ç»†èŠ‚äº†ï¼Œåé¢æµç¨‹å¯åŠ¨æ–‡ç« å†™å®Œåæˆ‘ä»¬å†å•ä¸€çš„æ‰£ç»†èŠ‚ã€‚ ç›¸å…³æ–‡ç« 1ã€æ¸£æ¸£èœé¸¡ä¸ºä»€ä¹ˆè¦çœ‹ ElasticSearch æºç ï¼Ÿ 2ã€æ¸£æ¸£èœé¸¡çš„ ElasticSearch æºç è§£æ â€”â€” ç¯å¢ƒæ­å»º 3ã€æ¸£æ¸£èœé¸¡çš„ ElasticSearch æºç è§£æ â€”â€” å¯åŠ¨æµç¨‹(ä¸Š) 4ã€æ¸£æ¸£èœé¸¡çš„ ElasticSearch æºç è§£æ â€”â€” å¯åŠ¨æµç¨‹(ä¸‹) 5ã€Elasticsearch ç³»åˆ—æ–‡ç« ï¼ˆä¸€ï¼‰ï¼šElasticsearch é»˜è®¤åˆ†è¯å™¨å’Œä¸­åˆ†åˆ†è¯å™¨ä¹‹é—´çš„æ¯”è¾ƒåŠä½¿ç”¨æ–¹æ³• 6ã€Elasticsearch ç³»åˆ—æ–‡ç« ï¼ˆäºŒï¼‰ï¼šå…¨æ–‡æœç´¢å¼•æ“ Elasticsearch é›†ç¾¤æ­å»ºå…¥é—¨æ•™ç¨‹ 7ã€Elasticsearch ç³»åˆ—æ–‡ç« ï¼ˆä¸‰ï¼‰ï¼šElasticSearch é›†ç¾¤ç›‘æ§ 8ã€Elasticsearch ç³»åˆ—æ–‡ç« ï¼ˆå››ï¼‰ï¼šElasticSearch å•ä¸ªèŠ‚ç‚¹ç›‘æ§ 9ã€Elasticsearch ç³»åˆ—æ–‡ç« ï¼ˆäº”ï¼‰ï¼šELK å®æ—¶æ—¥å¿—åˆ†æå¹³å°ç¯å¢ƒæ­å»º 10ã€æ•™ä½ å¦‚ä½•åœ¨ IDEA è¿œç¨‹ Debug ElasticSearch","tags":[{"name":"ElasticSearch","slug":"ElasticSearch","permalink":"http://yoursite.com/tags/ElasticSearch/"}]},{"title":"æ¸£æ¸£èœé¸¡çš„ ElasticSearch æºç è§£æ â€”â€” å¯åŠ¨æµç¨‹ï¼ˆä¸Šï¼‰","date":"2018-08-10T16:00:00.000Z","path":"2018/08/11/es-code02/","text":"å…³æ³¨æˆ‘ è½¬è½½è¯·åŠ¡å¿…æ³¨æ˜åŸåˆ›åœ°å€ä¸ºï¼šhttp://www.54tianzhisheng.cn/2018/08/11/es-code02/ å‰æä¸Šç¯‡æ–‡ç« å†™äº† ElasticSearch æºç è§£æ â€”â€” ç¯å¢ƒæ­å»º ï¼Œå…¶ä¸­é‡Œé¢è¯´äº†å¯åŠ¨ æ‰“å¼€ server æ¨¡å—ä¸‹çš„ Elasticsearch ç±»ï¼šorg.elasticsearch.bootstrap.Elasticsearchï¼Œè¿è¡Œé‡Œé¢çš„ main å‡½æ•°å°±å¯ä»¥å¯åŠ¨ ElasticSearch äº†ï¼Œè¿™ç¯‡æ–‡ç« è®²è®²å¯åŠ¨æµç¨‹ï¼Œå› ä¸ºç¯‡å¹…ä¼šå¾ˆå¤šï¼Œæ‰€ä»¥åˆ†äº†ä¸¤ç¯‡æ¥å†™ã€‚ å¯åŠ¨æµç¨‹main æ–¹æ³•å…¥å£å¯ä»¥çœ‹åˆ°å…¥å£å…¶å®æ˜¯ä¸€ä¸ª main æ–¹æ³•ï¼Œæ–¹æ³•é‡Œé¢å…ˆæ˜¯æ£€æŸ¥æƒé™ï¼Œç„¶åæ˜¯ä¸€ä¸ªé”™è¯¯æ—¥å¿—ç›‘å¬å™¨ï¼ˆç¡®ä¿åœ¨æ—¥å¿—é…ç½®ä¹‹å‰çŠ¶æ€æ—¥å¿—æ²¡æœ‰å‡ºç° errorï¼‰ï¼Œç„¶åæ˜¯ Elasticsearch å¯¹è±¡çš„åˆ›å»ºï¼Œç„¶åè°ƒç”¨äº†é™æ€æ–¹æ³• main æ–¹æ³•ï¼ˆ18 è¡Œï¼‰ï¼Œå¹¶æŠŠåˆ›å»ºçš„å¯¹è±¡å’Œå‚æ•°ä»¥åŠ Terminal é»˜è®¤å€¼ä¼ è¿›å»ã€‚é™æ€çš„ main æ–¹æ³•é‡Œé¢è°ƒç”¨ elasticsearch.main æ–¹æ³•ã€‚ 1234567891011121314151617181920public static void main(final String[] args) throws Exception &#123; //1ã€å…¥å£ // we want the JVM to think there is a security manager installed so that if internal policy decisions that would be based on the // presence of a security manager or lack thereof act as if there is a security manager present (e.g., DNS cache policy) System.setSecurityManager(new SecurityManager() &#123; @Override public void checkPermission(Permission perm) &#123; // grant all permissions so that we can later set the security manager to the one that we want &#125; &#125;); LogConfigurator.registerErrorListener(); // final Elasticsearch elasticsearch = new Elasticsearch(); int status = main(args, elasticsearch, Terminal.DEFAULT); //2ã€è°ƒç”¨Elasticsearch.mainæ–¹æ³• if (status != ExitCodes.OK) &#123; exit(status); &#125;&#125;static int main(final String[] args, final Elasticsearch elasticsearch, final Terminal terminal) throws Exception &#123; return elasticsearch.main(args, terminal); //3ã€command main&#125; å› ä¸º Elasticsearch ç±»æ˜¯ç»§æ‰¿äº† EnvironmentAwareCommand ç±»ï¼ŒEnvironmentAwareCommand ç±»ç»§æ‰¿äº† Command ç±»ï¼Œä½†æ˜¯ Elasticsearch ç±»å¹¶æ²¡æœ‰é‡å†™ main æ–¹æ³•ï¼Œæ‰€ä»¥ä¸Šé¢è°ƒç”¨çš„ elasticsearch.main å…¶å®æ˜¯è°ƒç”¨äº† Command çš„ main æ–¹æ³•ï¼Œä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839/** Parses options for this command from args and executes it. */public final int main(String[] args, Terminal terminal) throws Exception &#123; if (addShutdownHook()) &#123; //åˆ©ç”¨Runtime.getRuntime().addShutdownHookæ–¹æ³•åŠ å…¥ä¸€ä¸ªHookï¼Œåœ¨ç¨‹åºé€€å‡ºæ—¶è§¦å‘è¯¥Hook shutdownHookThread = new Thread(() -&gt; &#123; try &#123; this.close(); &#125; catch (final IOException e) &#123; try ( StringWriter sw = new StringWriter(); PrintWriter pw = new PrintWriter(sw)) &#123; e.printStackTrace(pw); terminal.println(sw.toString()); &#125; catch (final IOException impossible) &#123; // StringWriter#close declares a checked IOException from the Closeable interface but the Javadocs for StringWriter // say that an exception here is impossible throw new AssertionError(impossible); &#125; &#125; &#125;); Runtime.getRuntime().addShutdownHook(shutdownHookThread); &#125; beforeMain.run(); try &#123; mainWithoutErrorHandling(args, terminal);//4ã€mainWithoutErrorHandling &#125; catch (OptionException e) &#123; printHelp(terminal); terminal.println(Terminal.Verbosity.SILENT, \"ERROR: \" + e.getMessage()); return ExitCodes.USAGE; &#125; catch (UserException e) &#123; if (e.exitCode == ExitCodes.USAGE) &#123; printHelp(terminal); &#125; terminal.println(Terminal.Verbosity.SILENT, \"ERROR: \" + e.getMessage()); return e.exitCode; &#125; return ExitCodes.OK;&#125; ä¸Šé¢ä»£ç ä¸€å¼€å§‹åˆ©ç”¨ä¸€ä¸ªå‹¾å­å‡½æ•°ï¼Œåœ¨ç¨‹åºé€€å‡ºæ—¶è§¦å‘è¯¥ Hookï¼Œè¯¥æ–¹æ³•ä¸»è¦ä»£ç æ˜¯ mainWithoutErrorHandling() æ–¹æ³•ï¼Œç„¶åä¸‹é¢çš„æ˜¯ catch ä½æ–¹æ³•æŠ›å‡ºçš„å¼‚å¸¸ï¼Œæ–¹æ³•ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516/*** Executes the command, but all errors are thrown. */void mainWithoutErrorHandling(String[] args, Terminal terminal) throws Exception &#123; final OptionSet options = parser.parse(args); if (options.has(helpOption)) &#123; printHelp(terminal); return; &#125; if (options.has(silentOption)) &#123; terminal.setVerbosity(Terminal.Verbosity.SILENT); &#125; else if (options.has(verboseOption)) &#123; terminal.setVerbosity(Terminal.Verbosity.VERBOSE); &#125; else &#123; terminal.setVerbosity(Terminal.Verbosity.NORMAL); &#125; execute(terminal, options);//5ã€æ‰§è¡Œ EnvironmentAwareCommand ä¸­çš„ execute()ï¼Œï¼ˆé‡å†™äº†commandé‡Œé¢æŠ½è±¡çš„executeæ–¹æ³•ï¼‰&#125; ä¸Šé¢çš„ä»£ç ä» 3 ï½ 14 è¡Œæ˜¯è§£æä¼ è¿›æ¥çš„å‚æ•°å¹¶é…ç½® terminalï¼Œé‡è¦çš„ execute() æ–¹æ³•ï¼Œæ‰§è¡Œçš„æ˜¯ EnvironmentAwareCommand ä¸­çš„ execute() ï¼ˆé‡å†™äº† Command ç±»é‡Œé¢çš„æŠ½è±¡ execute æ–¹æ³•ï¼‰ï¼Œä»ä¸Šé¢é‚£ä¸ªç»§æ‰¿å›¾å¯ä»¥çœ‹åˆ° EnvironmentAwareCommand ç»§æ‰¿äº† Commandï¼Œé‡å†™çš„ execute æ–¹æ³•ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223@Overrideprotected void execute(Terminal terminal, OptionSet options) throws Exception &#123; final Map&lt;String, String&gt; settings = new HashMap&lt;&gt;(); for (final KeyValuePair kvp : settingOption.values(options)) &#123; if (kvp.value.isEmpty()) &#123; throw new UserException(ExitCodes.USAGE, \"setting [\" + kvp.key + \"] must not be empty\"); &#125; if (settings.containsKey(kvp.key)) &#123; final String message = String.format( Locale.ROOT, \"setting [%s] already set, saw [%s] and [%s]\", kvp.key, settings.get(kvp.key), kvp.value); throw new UserException(ExitCodes.USAGE, message); &#125; settings.put(kvp.key, kvp.value); &#125; //6ã€æ ¹æ®æˆ‘ä»¬ideé…ç½®çš„ vm options è¿›è¡Œè®¾ç½®path.dataã€path.homeã€path.logs putSystemPropertyIfSettingIsMissing(settings, \"path.data\", \"es.path.data\"); putSystemPropertyIfSettingIsMissing(settings, \"path.home\", \"es.path.home\"); putSystemPropertyIfSettingIsMissing(settings, \"path.logs\", \"es.path.logs\"); execute(terminal, options, createEnv(terminal, settings));//7ã€å…ˆè°ƒç”¨ createEnv åˆ›å»ºç¯å¢ƒ //9ã€æ‰§è¡Œelasticsearchçš„executeæ–¹æ³•ï¼Œelasticsearchä¸­é‡å†™äº†EnvironmentAwareCommandä¸­çš„æŠ½è±¡executeæ–¹æ³•&#125; æ–¹æ³•å‰é¢æ˜¯æ ¹æ®ä¼ å‚å»åˆ¤æ–­é…ç½®çš„ï¼Œå¦‚æœé…ç½®ä¸ºç©ºï¼Œå°±ä¼šç›´æ¥è·³åˆ°æ‰§è¡Œ putSystemPropertyIfSettingIsMissing æ–¹æ³•ï¼Œè¿™é‡Œä¼šé…ç½®ä¸‰ä¸ªå±æ€§ï¼špath.dataã€path.homeã€path.logs è®¾ç½® es çš„ dataã€homeã€logs ç›®å½•ï¼Œå®ƒè¿™é‡Œæ˜¯æ ¹æ®æˆ‘ä»¬ ide é…ç½®çš„ vm options è¿›è¡Œè®¾ç½®çš„ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬ä¸Šç¯‡æ–‡ç« è¯´çš„é…ç½®ä¿¡æ¯ï¼Œå¦‚æœä¸é…ç½®çš„è¯å°±ä¼šç›´æ¥æŠ¥é”™ã€‚ä¸‹é¢çœ‹çœ‹ putSystemPropertyIfSettingIsMissing æ–¹æ³•ä»£ç é‡Œé¢æ€ä¹ˆåšåˆ°çš„ï¼š 12345678910111213141516/** Ensure the given setting exists, reading it from system properties if not already set. */private static void putSystemPropertyIfSettingIsMissing(final Map&lt;String, String&gt; settings, final String setting, final String key) &#123; final String value = System.getProperty(key);//è·å–keyï¼ˆes.path.dataï¼‰æ‰¾ç³»ç»Ÿè®¾ç½® if (value != null) &#123; if (settings.containsKey(setting)) &#123; final String message = String.format( Locale.ROOT, \"duplicate setting [%s] found via command-line [%s] and system property [%s]\", setting, settings.get(setting), value); throw new IllegalArgumentException(message); &#125; else &#123; settings.put(setting, value); &#125; &#125;&#125; æ‰§è¡Œè¿™ä¸‰ä¸ªæ–¹æ³•åï¼š è·³å‡ºæ­¤æ–¹æ³•ï¼Œç»§ç»­çœ‹ä¼šå‘ç° execute æ–¹æ³•è°ƒç”¨äº†æ–¹æ³•ï¼Œ 1execute(terminal, options, createEnv(terminal, settings)); è¿™é‡Œæˆ‘ä»¬å…ˆçœ‹çœ‹ createEnv(terminal, settings) æ–¹æ³•ï¼š 1234567protected Environment createEnv(final Terminal terminal, final Map&lt;String, String&gt; settings) throws UserException &#123; final String esPathConf = System.getProperty(\"es.path.conf\");//8ã€è¯»å–æˆ‘ä»¬ vm options ä¸­é…ç½®çš„ es.path.conf if (esPathConf == null) &#123; throw new UserException(ExitCodes.CONFIG, \"the system property [es.path.conf] must be set\"); &#125; return InternalSettingsPreparer.prepareEnvironment(Settings.EMPTY, terminal, settings, getConfigPath(esPathConf)); //8ã€å‡†å¤‡ç¯å¢ƒ prepareEnvironment&#125; è¯»å–æˆ‘ä»¬ ide vm options ä¸­é…ç½®çš„ es.path.confï¼ŒåŒä¸Šç¯‡æ–‡ç« ä¹Ÿè®²äº†è¿™ä¸ªä¸€å®šè¦é…ç½®çš„ï¼Œå› ä¸º es å¯åŠ¨çš„æ—¶å€™ä¼šåŠ è½½æˆ‘ä»¬çš„é…ç½®å’Œä¸€äº›æ’ä»¶ã€‚è¿™é‡Œç»§ç»­çœ‹ä¸‹ä¸Šé¢ä»£ç ç¬¬ 6 è¡Œçš„ prepareEnvironment æ–¹æ³•ï¼š 1234567891011121314151617181920212223242526272829303132333435public static Environment prepareEnvironment(Settings input, Terminal terminal, Map&lt;String, String&gt; properties, Path configPath) &#123; // just create enough settings to build the environment, to get the config dir Settings.Builder output = Settings.builder(); initializeSettings(output, input, properties); Environment environment = new Environment(output.build(), configPath); //æŸ¥çœ‹ es.path.conf ç›®å½•ä¸‹çš„é…ç½®æ–‡ä»¶æ˜¯ä¸æ˜¯ yml æ ¼å¼çš„ï¼Œå¦‚æœä¸æ˜¯åˆ™æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ if (Files.exists(environment.configFile().resolve(\"elasticsearch.yaml\"))) &#123; throw new SettingsException(\"elasticsearch.yaml was deprecated in 5.5.0 and must be renamed to elasticsearch.yml\"); &#125; if (Files.exists(environment.configFile().resolve(\"elasticsearch.json\"))) &#123; throw new SettingsException(\"elasticsearch.json was deprecated in 5.5.0 and must be converted to elasticsearch.yml\"); &#125; output = Settings.builder(); // start with a fresh output Path path = environment.configFile().resolve(\"elasticsearch.yml\"); if (Files.exists(path)) &#123; try &#123; output.loadFromPath(path); //åŠ è½½æ–‡ä»¶å¹¶è¯»å–é…ç½®æ–‡ä»¶å†…å®¹ &#125; catch (IOException e) &#123; throw new SettingsException(\"Failed to load settings from \" + path.toString(), e); &#125; &#125; // re-initialize settings now that the config file has been loaded initializeSettings(output, input, properties); //å†ä¸€æ¬¡åˆå§‹åŒ–è®¾ç½® finalizeSettings(output, terminal); environment = new Environment(output.build(), configPath); // we put back the path.logs so we can use it in the logging configuration file output.put(Environment.PATH_LOGS_SETTING.getKey(), environment.logsFile().toAbsolutePath().normalize().toString()); return new Environment(output.build(), configPath);&#125; å‡†å¤‡çš„ç¯å¢ƒå¦‚ä¸Šå›¾ï¼Œé€šè¿‡æ„å»ºçš„ç¯å¢ƒæŸ¥çœ‹é…ç½®æ–‡ä»¶ elasticsearch.yml æ˜¯ä¸æ˜¯ä»¥ yml ç»“å°¾ï¼Œå¦‚æœæ˜¯ yaml æˆ–è€… json ç»“å°¾çš„åˆ™æŠ›å‡ºå¼‚å¸¸ï¼ˆåœ¨ 5.5.0 ç‰ˆæœ¬å…¶ä»–ä¸¤ç§æ ¼å¼è¿‡æœŸäº†ï¼Œåªèƒ½ä½¿ç”¨ yml æ ¼å¼ï¼‰ï¼Œç„¶ååŠ è½½è¯¥é…ç½®æ–‡ä»¶å¹¶è¯»å–é‡Œé¢çš„å†…å®¹ï¼ˆKVç»“æ„ï¼‰ã€‚ è·³å‡º createEnv æ–¹æ³•ï¼Œæˆ‘ä»¬ç»§ç»­çœ‹ execute æ–¹æ³•å§ã€‚ EnvironmentAwareCommand ç±»çš„ execute æ–¹æ³•ä»£ç å¦‚ä¸‹ï¼š 1protected abstract void execute(Terminal terminal, OptionSet options, Environment env) throws Exception; è¿™æ˜¯ä¸ªæŠ½è±¡æ–¹æ³•ï¼Œé‚£ä¹ˆå®ƒçš„å®ç°æ–¹æ³•åœ¨ Elasticsearch ç±»ä¸­ï¼Œä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435@Overrideprotected void execute(Terminal terminal, OptionSet options, Environment env) throws UserException &#123; if (options.nonOptionArguments().isEmpty() == false) &#123; throw new UserException(ExitCodes.USAGE, \"Positional arguments not allowed, found \" + options.nonOptionArguments()); &#125; if (options.has(versionOption)) &#123; final String versionOutput = String.format( Locale.ROOT, \"Version: %s, Build: %s/%s/%s/%s, JVM: %s\", Version.displayVersion(Version.CURRENT, Build.CURRENT.isSnapshot()), Build.CURRENT.flavor().displayName(), Build.CURRENT.type().displayName(), Build.CURRENT.shortHash(), Build.CURRENT.date(), JvmInfo.jvmInfo().version()); terminal.println(versionOutput); return; &#125; final boolean daemonize = options.has(daemonizeOption); final Path pidFile = pidfileOption.value(options); final boolean quiet = options.has(quietOption); // a misconfigured java.io.tmpdir can cause hard-to-diagnose problems later, so reject it immediately try &#123; env.validateTmpFile(); &#125; catch (IOException e) &#123; throw new UserException(ExitCodes.CONFIG, e.getMessage()); &#125; try &#123; init(daemonize, pidFile, quiet, env); //10ã€åˆå§‹åŒ– &#125; catch (NodeValidationException e) &#123; throw new UserException(ExitCodes.CONFIG, e.getMessage()); &#125;&#125; ä¸Šé¢ä»£ç é‡Œä¸»è¦è¿˜æ˜¯çœ‹çœ‹ init(daemonize, pidFile, quiet, env); åˆå§‹åŒ–æ–¹æ³•å§ã€‚ 12345678910void init(final boolean daemonize, final Path pidFile, final boolean quiet, Environment initialEnv) throws NodeValidationException, UserException &#123; try &#123; Bootstrap.init(!daemonize, pidFile, quiet, initialEnv); //11ã€æ‰§è¡Œ Bootstrap ä¸­çš„ init æ–¹æ³• &#125; catch (BootstrapException | RuntimeException e) &#123; // format exceptions to the console in a special way // to avoid 2MB stacktraces from guice, etc. throw new StartupException(e); &#125;&#125; init æ–¹æ³•Bootstrap ä¸­çš„é™æ€ init æ–¹æ³•å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101static void init( final boolean foreground, final Path pidFile, final boolean quiet, final Environment initialEnv) throws BootstrapException, NodeValidationException, UserException &#123; // force the class initializer for BootstrapInfo to run before // the security manager is installed BootstrapInfo.init(); INSTANCE = new Bootstrap(); //12ã€åˆ›å»ºä¸€ä¸ª Bootstrap å®ä¾‹ final SecureSettings keystore = loadSecureSettings(initialEnv);//å¦‚æœæ³¨å†Œäº†å®‰å…¨æ¨¡å—åˆ™å°†ç›¸å…³é…ç½®åŠ è½½è¿›æ¥ final Environment environment = createEnvironment(foreground, pidFile, keystore, initialEnv.settings(), initialEnv.configFile()); //å¹²ä¹‹å‰å¹²è¿‡çš„äº‹æƒ… try &#123; LogConfigurator.configure(environment); //13ã€log é…ç½®ç¯å¢ƒ &#125; catch (IOException e) &#123; throw new BootstrapException(e); &#125; if (environment.pidFile() != null) &#123; try &#123; PidFile.create(environment.pidFile(), true); &#125; catch (IOException e) &#123; throw new BootstrapException(e); &#125; &#125; final boolean closeStandardStreams = (foreground == false) || quiet; try &#123; if (closeStandardStreams) &#123; final Logger rootLogger = ESLoggerFactory.getRootLogger(); final Appender maybeConsoleAppender = Loggers.findAppender(rootLogger, ConsoleAppender.class); if (maybeConsoleAppender != null) &#123; Loggers.removeAppender(rootLogger, maybeConsoleAppender); &#125; closeSystOut(); &#125; // fail if somebody replaced the lucene jars checkLucene(); //14ã€æ£€æŸ¥Luceneç‰ˆæœ¬// install the default uncaught exception handler; must be done before security is initialized as we do not want to grant the runtime permission setDefaultUncaughtExceptionHandler Thread.setDefaultUncaughtExceptionHandler( new ElasticsearchUncaughtExceptionHandler(() -&gt; Node.NODE_NAME_SETTING.get(environment.settings()))); INSTANCE.setup(true, environment); //15ã€è°ƒç”¨ setup æ–¹æ³• try &#123; // any secure settings must be read during node construction IOUtils.close(keystore); &#125; catch (IOException e) &#123; throw new BootstrapException(e); &#125; INSTANCE.start(); //26ã€è°ƒç”¨ start æ–¹æ³• if (closeStandardStreams) &#123; closeSysError(); &#125; &#125; catch (NodeValidationException | RuntimeException e) &#123; // disable console logging, so user does not see the exception twice (jvm will show it already) final Logger rootLogger = ESLoggerFactory.getRootLogger(); final Appender maybeConsoleAppender = Loggers.findAppender(rootLogger, ConsoleAppender.class); if (foreground &amp;&amp; maybeConsoleAppender != null) &#123; Loggers.removeAppender(rootLogger, maybeConsoleAppender); &#125; Logger logger = Loggers.getLogger(Bootstrap.class); if (INSTANCE.node != null) &#123; logger = Loggers.getLogger(Bootstrap.class, Node.NODE_NAME_SETTING.get(INSTANCE.node.settings())); &#125; // HACK, it sucks to do this, but we will run users out of disk space otherwise if (e instanceof CreationException) &#123; // guice: log the shortened exc to the log file ByteArrayOutputStream os = new ByteArrayOutputStream(); PrintStream ps = null; try &#123; ps = new PrintStream(os, false, \"UTF-8\"); &#125; catch (UnsupportedEncodingException uee) &#123; assert false; e.addSuppressed(uee); &#125; new StartupException(e).printStackTrace(ps); ps.flush(); try &#123; logger.error(\"Guice Exception: &#123;&#125;\", os.toString(\"UTF-8\")); &#125; catch (UnsupportedEncodingException uee) &#123; assert false; e.addSuppressed(uee); &#125; &#125; else if (e instanceof NodeValidationException) &#123; logger.error(\"node validation exception\\n&#123;&#125;\", e.getMessage()); &#125; else &#123; // full exception logger.error(\"Exception\", e); &#125; // re-enable it if appropriate, so they can see any logging during the shutdown process if (foreground &amp;&amp; maybeConsoleAppender != null) &#123; Loggers.addAppender(rootLogger, maybeConsoleAppender); &#125; throw e; &#125;&#125; è¯¥æ–¹æ³•ä¸»è¦æœ‰ï¼š 1ã€åˆ›å»º Bootstrap å®ä¾‹ 2ã€å¦‚æœæ³¨å†Œäº†å®‰å…¨æ¨¡å—åˆ™å°†ç›¸å…³é…ç½®åŠ è½½è¿›æ¥ 3ã€åˆ›å»º Elasticsearch è¿è¡Œçš„å¿…é¡»ç¯å¢ƒä»¥åŠç›¸å…³é…ç½®, å¦‚å°† configã€scriptsã€pluginsã€modulesã€logsã€libã€bin ç­‰é…ç½®ç›®å½•åŠ è½½åˆ°è¿è¡Œç¯å¢ƒä¸­ 4ã€log é…ç½®ç¯å¢ƒï¼Œåˆ›å»ºæ—¥å¿—ä¸Šä¸‹æ–‡ 5ã€æ£€æŸ¥æ˜¯å¦å­˜åœ¨ PID æ–‡ä»¶ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œåˆ›å»º PID æ–‡ä»¶ 6ã€æ£€æŸ¥ Lucene ç‰ˆæœ¬ 7ã€è°ƒç”¨ setup æ–¹æ³•ï¼ˆç”¨å½“å‰ç¯å¢ƒæ¥åˆ›å»ºä¸€ä¸ªèŠ‚ç‚¹ï¼‰ setup æ–¹æ³•12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152private void setup(boolean addShutdownHook, Environment environment) throws BootstrapException &#123; Settings settings = environment.settings();//æ ¹æ®ç¯å¢ƒå¾—åˆ°é…ç½® try &#123; spawner.spawnNativeControllers(environment); &#125; catch (IOException e) &#123; throw new BootstrapException(e); &#125; initializeNatives( environment.tmpFile(), BootstrapSettings.MEMORY_LOCK_SETTING.get(settings), BootstrapSettings.SYSTEM_CALL_FILTER_SETTING.get(settings), BootstrapSettings.CTRLHANDLER_SETTING.get(settings)); // initialize probes before the security manager is installed initializeProbes(); if (addShutdownHook) &#123; Runtime.getRuntime().addShutdownHook(new Thread() &#123; @Override public void run() &#123; try &#123; IOUtils.close(node, spawner); LoggerContext context = (LoggerContext) LogManager.getContext(false); Configurator.shutdown(context); &#125; catch (IOException ex) &#123; throw new ElasticsearchException(\"failed to stop node\", ex); &#125; &#125; &#125;); &#125; try &#123; // look for jar hell final Logger logger = ESLoggerFactory.getLogger(JarHell.class); JarHell.checkJarHell(logger::debug); &#125; catch (IOException | URISyntaxException e) &#123; throw new BootstrapException(e); &#125; // Log ifconfig output before SecurityManager is installed IfConfig.logIfNecessary(); // install SM after natives, shutdown hooks, etc. try &#123; Security.configure(environment, BootstrapSettings.SECURITY_FILTER_BAD_DEFAULTS_SETTING.get(settings)); &#125; catch (IOException | NoSuchAlgorithmException e) &#123; throw new BootstrapException(e); &#125; node = new Node(environment) &#123; //16ã€æ–°å»ºèŠ‚ç‚¹ @Override protected void validateNodeBeforeAcceptingRequests( final BootstrapContext context, final BoundTransportAddress boundTransportAddress, List&lt;BootstrapCheck&gt; checks) throws NodeValidationException &#123; BootstrapChecks.check(context, boundTransportAddress, checks); &#125; &#125;;&#125; ä¸Šé¢ä»£ç æœ€åå°±æ˜¯ Node èŠ‚ç‚¹çš„åˆ›å»ºï¼Œè¿™ç¯‡æ–‡ç« å°±ä¸è®² Node çš„åˆ›å»ºäº†ï¼Œä¸‹ç¯‡æ–‡ç« ä¼šå¥½å¥½è®²ä¸€ä¸‹ Node èŠ‚ç‚¹çš„åˆ›å»ºå’Œæ­£å¼å¯åŠ¨ ES èŠ‚ç‚¹çš„ã€‚ æ€»ç»“è¿™ç¯‡æ–‡ç« ä¸»è¦å…ˆæŠŠå¤§æ¦‚å¯åŠ¨æµç¨‹ä¸²é€šï¼Œå› ä¸ºç¯‡å¹…è¾ƒå¤šæ‰€ä»¥æ‹†å¼€æˆä¸¤ç¯‡ï¼Œå…ˆä¸æ‰£ç»†èŠ‚äº†ï¼Œåé¢æµç¨‹å¯åŠ¨æ–‡ç« å†™å®Œåæˆ‘ä»¬å†å•ä¸€çš„æ‰£ç»†èŠ‚ã€‚ ç›¸å…³æ–‡ç« 1ã€æ¸£æ¸£èœé¸¡ä¸ºä»€ä¹ˆè¦çœ‹ ElasticSearch æºç ï¼Ÿ 2ã€æ¸£æ¸£èœé¸¡çš„ ElasticSearch æºç è§£æ â€”â€” ç¯å¢ƒæ­å»º 3ã€æ¸£æ¸£èœé¸¡çš„ ElasticSearch æºç è§£æ â€”â€” å¯åŠ¨æµç¨‹(ä¸Š) 4ã€æ¸£æ¸£èœé¸¡çš„ ElasticSearch æºç è§£æ â€”â€” å¯åŠ¨æµç¨‹(ä¸‹) 5ã€Elasticsearch ç³»åˆ—æ–‡ç« ï¼ˆä¸€ï¼‰ï¼šElasticsearch é»˜è®¤åˆ†è¯å™¨å’Œä¸­åˆ†åˆ†è¯å™¨ä¹‹é—´çš„æ¯”è¾ƒåŠä½¿ç”¨æ–¹æ³• 6ã€Elasticsearch ç³»åˆ—æ–‡ç« ï¼ˆäºŒï¼‰ï¼šå…¨æ–‡æœç´¢å¼•æ“ Elasticsearch é›†ç¾¤æ­å»ºå…¥é—¨æ•™ç¨‹ 7ã€Elasticsearch ç³»åˆ—æ–‡ç« ï¼ˆä¸‰ï¼‰ï¼šElasticSearch é›†ç¾¤ç›‘æ§ 8ã€Elasticsearch ç³»åˆ—æ–‡ç« ï¼ˆå››ï¼‰ï¼šElasticSearch å•ä¸ªèŠ‚ç‚¹ç›‘æ§ 9ã€Elasticsearch ç³»åˆ—æ–‡ç« ï¼ˆäº”ï¼‰ï¼šELK å®æ—¶æ—¥å¿—åˆ†æå¹³å°ç¯å¢ƒæ­å»º 10ã€æ•™ä½ å¦‚ä½•åœ¨ IDEA è¿œç¨‹ Debug ElasticSearch","tags":[{"name":"ElasticSearch","slug":"ElasticSearch","permalink":"http://yoursite.com/tags/ElasticSearch/"}]},{"title":"æ¸£æ¸£èœé¸¡çš„ ElasticSearch æºç è§£æ â€”â€” ç¯å¢ƒæ­å»º","date":"2018-08-04T16:00:00.000Z","path":"2018/08/05/es-code01/","text":"å…³æ³¨æˆ‘ è½¬è½½è¯·åŠ¡å¿…æ³¨æ˜åŸåˆ›åœ°å€ä¸ºï¼šhttp://www.54tianzhisheng.cn/2018/08/05/es-code01/ è½¯ä»¶ç¯å¢ƒ1ã€Intellij Idea:2018.2ç‰ˆæœ¬ 2ã€Elasticsearch æºç ç‰ˆæœ¬: 6.3.2 3ã€JDK:10.0.2 4ã€Gradle : å»ºè®® 4.5 åŠä»¥ä¸Šç‰ˆæœ¬ 5ã€Macbook Pro 2017 å®‰è£… ElasticSearch å» https://www.elastic.co/downloads/past-releases è¿™é‡Œæ‰¾åˆ° ElasticSearch 6.3.2 ç‰ˆæœ¬ï¼Œä¸‹è½½åç„¶åè§£å‹å°±å¥½äº†ã€‚ï¼ˆæ³¨æ„ï¼šè¿™ä¸ªç‰ˆæœ¬éœ€è¦å’Œä¸‹é¢çš„æºç ç‰ˆæœ¬ä¸€è‡´ï¼‰ ä¸‹è½½æºç ä» https://github.com/elastic/elasticsearch ä¸Šä¸‹è½½ç›¸åº”ç‰ˆæœ¬çš„æºä»£ç ï¼Œè¿™é‡Œå»ºè®®ç”¨ git clone ï¼Œè¿™æ ·çš„è¯åé¢ä½ å¯ä»¥éšæ„åˆ‡æ¢åˆ° ElasticSearch çš„å…¶ä»–ç‰ˆæœ¬å»ã€‚ 1git clone git@github.com:elastic/elasticsearch.git æˆ‘ä»¬çœ‹ä¸‹æœ‰å“ªäº›ç‰ˆæœ¬çš„ï¼š 1git tag æ‰¾åˆ°äº†ç›®å‰æºç ç‰ˆæœ¬æœ€æ–°çš„ç‰ˆæœ¬çš„ç¨³å®šç‰ˆä¸ºï¼šv6.3.2 åˆ‡æ¢åˆ°è¯¥ç‰ˆæœ¬ï¼š 1git checkout v6.3.2 äºæ˜¯å°±å¯ä»¥åˆ‡æ¢åˆ°è¯¥ç¨³å®šç‰ˆæœ¬äº†ã€‚æ¥ä¸‹æ¥ä¸è¦ç›´æ¥å¯¼å…¥åˆ° IDEA/Eclipse ä¸­ã€‚ ç¼–è¯‘GitHub è¿™é‡Œå·²ç»æœ‰æè¿°å¦‚ä½•å¯¼å…¥ IDEA/Eclipse ä¸­ï¼š 1234567891011121314151617181920JDK 10 is required to build Elasticsearch. You must have a JDK 10 installation with the environment variable JAVA_HOME referencing the path to Java home for your JDK 10 installation. By default, tests use the same runtime as JAVA_HOME. However, since Elasticsearch, supports JDK 8 the build supports compiling with JDK 10 and testing on a JDK 8 runtime; to do this, set RUNTIME_JAVA_HOME pointing to the Java home of a JDK 8 installation. Note that this mechanism can be used to test against other JDKs as well, this is not only limited to JDK 8.Note: It is also required to have JAVA7_HOME, JAVA8_HOME and JAVA10_HOME available so that the tests can pass.Warning: do not use sdkman for Java installations which do not have proper jrunscript for jdk distributions.Elasticsearch uses the Gradle wrapper for its build. You can execute Gradle using the wrapper via the gradlew script in the root of the repository.Configuring IDEs And Running TestsEclipse users can automatically configure their IDE: ./gradlew eclipse then File: Import: Existing Projects into Workspace. Select the option Search for nested projects. Additionally you will want to ensure that Eclipse is using 2048m of heap by modifying eclipse.ini accordingly to avoid GC overhead errors.IntelliJ users can automatically configure their IDE: ./gradlew idea then File-&gt;New Project From Existing Sources. Point to the root of the source directory, select Import project from external model-&gt;Gradle, enable Use auto-import. In order to run tests directly from IDEA 2017.2 and above, it is required to disable the IDEA run launcher in order to avoid idea_rt.jar causing &quot;jar hell&quot;. This can be achieved by adding the -Didea.no.launcher=true JVM option. Alternatively, idea.no.launcher=true can be set in the idea.properties file which can be accessed under Help &gt; Edit Custom Properties (this will require a restart of IDEA). For IDEA 2017.3 and above, in addition to the JVM option, you will need to go to Run-&gt;Edit Configurations-&gt;...-&gt;Defaults-&gt;JUnit and verify that the Shorten command line setting is set to user-local default: none. You may also need to remove ant-javafx.jar from your classpath if that is reported as a source of jar hell.To run an instance of elasticsearch from the source code run ./gradlew runThe Elasticsearch codebase makes heavy use of Java asserts and the test runner requires that assertions be enabled within the JVM. This can be accomplished by passing the flag -ea to the JVM on startup.For IntelliJ, go to Run-&gt;Edit Configurations...-&gt;Defaults-&gt;JUnit-&gt;VM options and input -ea.For Eclipse, go to Preferences-&gt;Java-&gt;Installed JREs and add -ea to VM Arguments. ä¸Šé¢è¯´äº†ä¸‹å¦‚ä½•ç¼–è¯‘ Elasticsearch å’Œå¦‚ä½•åœ¨ ide ä¸­é…ç½®å¥½ç¯å¢ƒã€‚ä¸‹é¢è¯´ä¸‹æ­¥éª¤å§ï¼šï¼ˆè¿™é‡Œæˆ‘åªæ˜¯æ¼”ç¤ºåœ¨ IDEA ä¸­å¦‚ä½•å¯¼å…¥ï¼‰ 1ã€åœ¨æˆ‘ä»¬ä¸‹è½½çš„ Elasticsearch æ ¹ç›®å½•ä¸‹æ‰§è¡Œå‘½ä»¤ï¼š(æ‰§è¡Œå·²ç»å†™å¥½çš„è„šæœ¬ gradlew) 1./gradlew idea è¯·æ³¨æ„ç‰ˆæœ¬å’Œæˆ‘çš„ä¸€è‡´ï¼Œæ—©çš„ç‰ˆæœ¬å¯èƒ½æ²¡æœ‰è¯¥æ‰§è¡Œè„šæœ¬ï¼Œéœ€è¦æ‰§è¡Œ gradle idea å‘½ä»¤ æœ€åç»“æœå¦‚ä¸‹ï¼š 2ã€å¯¼å…¥ IDEA idea ä¸­ File -&gt; New Project From Existing Sources é€‰æ‹©ä½ ä¸‹è½½çš„ Elasticsearch æ ¹ç›®å½•ï¼Œç„¶åç‚¹ open ï¼Œä¹‹å Import project from external model -&gt; Gradle , é€‰ä¸­ Use auto-import, ç„¶åå°±å¯ä»¥äº†ã€‚ å¯¼å…¥è¿›å»åï¼Œgradle åˆä¼šç¼–è¯‘ä¸€éï¼Œéœ€è¦ç­‰ä¸€ä¼šï¼Œå¥½äº†ä¹‹åå¦‚ä¸‹ï¼š è¿è¡Œæ‰“å¼€ server æ¨¡å—ä¸‹çš„ Elasticsearch ç±»ï¼šorg.elasticsearch.bootstrap.Elasticsearchï¼Œè¿è¡Œé‡Œé¢çš„ main å‡½æ•°ã€‚ 1ã€æŠ¥é”™å¦‚ä¸‹ï¼š 1ERROR: the system property [es.path.conf] must be set æˆ‘ä»¬åœ¨è¿è¡Œçš„é…ç½® vm options å¦‚ä¸‹ï¼šï¼ˆåé¢å¯åŠ¨æµç¨‹ä¼šå†™ä¸ºä»€ä¹ˆä¼šæŠ¥è¿™ä¸ªé”™è¯¯ï¼‰ 1-Des.path.conf=&quot;/usr/local/elasticsearch-6.3.2/config&quot; 2ã€å†æ¬¡è¿è¡Œï¼ŒæŠ¥é”™å¦‚ä¸‹ï¼š 12345678910Exception in thread &quot;main&quot; java.lang.IllegalStateException: path.home is not configured at org.elasticsearch.env.Environment.&lt;init&gt;(Environment.java:103) at org.elasticsearch.env.Environment.&lt;init&gt;(Environment.java:94) at org.elasticsearch.node.InternalSettingsPreparer.prepareEnvironment(InternalSettingsPreparer.java:86) at org.elasticsearch.cli.EnvironmentAwareCommand.createEnv(EnvironmentAwareCommand.java:95) at org.elasticsearch.cli.EnvironmentAwareCommand.execute(EnvironmentAwareCommand.java:86) at org.elasticsearch.cli.Command.mainWithoutErrorHandling(Command.java:124) at org.elasticsearch.cli.Command.main(Command.java:90) at org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:93) at org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:86) æˆ‘ä»¬åœ¨è¿è¡Œçš„é…ç½® vm options å¦‚ä¸‹ï¼šï¼ˆåé¢å¯åŠ¨æµç¨‹ä¼šå†™ä¸ºä»€ä¹ˆä¼šæŠ¥è¿™ä¸ªé”™è¯¯ï¼‰ 1-Des.path.home=&quot;/usr/local/elasticsearch-6.3.2&quot; 3ã€å†æ¬¡è¿è¡Œï¼ŒæŠ¥é”™å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252018-08-01 09:38:03,974 main ERROR Could not register mbeans java.security.AccessControlException: access denied (&quot;javax.management.MBeanTrustPermission&quot; &quot;register&quot;) at java.base/java.security.AccessControlContext.checkPermission(AccessControlContext.java:472) at java.base/java.lang.SecurityManager.checkPermission(SecurityManager.java:371) at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.checkMBeanTrustPermission(DefaultMBeanServerInterceptor.java:1805) at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:318) at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:522) at org.apache.logging.log4j.core.jmx.Server.register(Server.java:389) at org.apache.logging.log4j.core.jmx.Server.reregisterMBeansAfterReconfigure(Server.java:167) at org.apache.logging.log4j.core.jmx.Server.reregisterMBeansAfterReconfigure(Server.java:140) at org.apache.logging.log4j.core.LoggerContext.setConfiguration(LoggerContext.java:556) at org.apache.logging.log4j.core.LoggerContext.start(LoggerContext.java:261) at org.apache.logging.log4j.core.impl.Log4jContextFactory.getContext(Log4jContextFactory.java:206) at org.apache.logging.log4j.core.config.Configurator.initialize(Configurator.java:220) at org.apache.logging.log4j.core.config.Configurator.initialize(Configurator.java:197) at org.elasticsearch.common.logging.LogConfigurator.configureStatusLogger(LogConfigurator.java:171) at org.elasticsearch.common.logging.LogConfigurator.configure(LogConfigurator.java:140) at org.elasticsearch.common.logging.LogConfigurator.configure(LogConfigurator.java:119) at org.elasticsearch.bootstrap.Bootstrap.init(Bootstrap.java:294) at org.elasticsearch.bootstrap.Elasticsearch.init(Elasticsearch.java:136) at org.elasticsearch.bootstrap.Elasticsearch.execute(Elasticsearch.java:127) at org.elasticsearch.cli.EnvironmentAwareCommand.execute(EnvironmentAwareCommand.java:86) at org.elasticsearch.cli.Command.mainWithoutErrorHandling(Command.java:124) at org.elasticsearch.cli.Command.main(Command.java:90) at org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:93) at org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:86) æˆ‘ä»¬åœ¨è¿è¡Œçš„é…ç½® vm options å¦‚ä¸‹ï¼š 1-Dlog4j2.disable.jmx=true 4ã€å¦‚æœä½ ç”¨çš„æ˜¯ JDK 1.8 ç¼–è¯‘çš„åº”è¯¥è¿˜ä¼šæŠ¥è¿™ä¸ªé”™è¯¯ 123456789101112131415161718192021222324[2018-08-01T11:02:24,663][WARN ][o.e.b.ElasticsearchUncaughtExceptionHandler] [] uncaught exception in thread [main]org.elasticsearch.bootstrap.StartupException: java.lang.IllegalStateException: jar hell!class: jdk.packager.services.UserJvmOptionsServicejar1: /Library/Java/JavaVirtualMachines/jdk1.8.0_152.jdk/Contents/Home/lib/ant-javafx.jarjar2: /Library/Java/JavaVirtualMachines/jdk1.8.0_152.jdk/Contents/Home/lib/packager.jar at org.elasticsearch.bootstrap.Elasticsearch.init(Elasticsearch.java:140) ~[main/:?] at org.elasticsearch.bootstrap.Elasticsearch.execute(Elasticsearch.java:127) ~[main/:?] at org.elasticsearch.cli.EnvironmentAwareCommand.execute(EnvironmentAwareCommand.java:86) ~[main/:?] at org.elasticsearch.cli.Command.mainWithoutErrorHandling(Command.java:124) ~[main/:?] at org.elasticsearch.cli.Command.main(Command.java:90) ~[main/:?] at org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:93) ~[main/:?] at org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:86) ~[main/:?]Caused by: java.lang.IllegalStateException: jar hell!class: jdk.packager.services.UserJvmOptionsServicejar1: /Library/Java/JavaVirtualMachines/jdk1.8.0_152.jdk/Contents/Home/lib/ant-javafx.jarjar2: /Library/Java/JavaVirtualMachines/jdk1.8.0_152.jdk/Contents/Home/lib/packager.jar at org.elasticsearch.bootstrap.JarHell.checkClass(JarHell.java:273) ~[main/:?] at org.elasticsearch.bootstrap.JarHell.checkJarHell(JarHell.java:190) ~[main/:?] at org.elasticsearch.bootstrap.JarHell.checkJarHell(JarHell.java:86) ~[main/:?] at org.elasticsearch.bootstrap.Bootstrap.setup(Bootstrap.java:198) ~[main/:?] at org.elasticsearch.bootstrap.Bootstrap.init(Bootstrap.java:326) ~[main/:?] at org.elasticsearch.bootstrap.Elasticsearch.init(Elasticsearch.java:136) ~[main/:?] ... 6 more2018-08-01 11:02:24,713 Thread-2 ERROR No log4j2 configuration file found. Using default configuration: logging only errors to the console. Set system property &apos;log4j2.debug&apos; to show Log4j2 internal initialization logging. æœ‰ä¸¤ä¸ªè§£å†³æ–¹æ³•å°±æ˜¯ï¼Œ ï¼ˆ1ï¼‰ã€æŠŠæºç ä¸­æœ‰å…³ä½¿ç”¨äº† JarHell.checkJarHell ä»£ç çš„åœ°æ–¹å…¨éƒ¨æ³¨é‡Šæ‰å°±å¥½äº† ï¼ˆ2ï¼‰ã€æ¢æˆ JDK 10 ç¼–è¯‘ ä¸¤ç§æ–¹æ³•æˆ‘éƒ½è¯•äº†æ˜¯å¯è¡Œçš„ï¼Œå»ºè®®ç›´æ¥æ¢ç¬¬äºŒç§æ–¹æ¡ˆå§ï¼ 5ã€ç„¶åå†å¯åŠ¨çš„è¯ï¼Œåº”è¯¥æ²¡é—®é¢˜äº†,å‡ºç°ä¸‹é¢æ—¥å¿—ï¼šï¼ˆç½‘ä¸Šå¾ˆå¤šäººåœ¨è¿™æ­¥å°±å¥½äº†ï¼‰ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556[elasticsearch] Java HotSpot(TM) 64-Bit Server VM warning: Option UseConcMarkSweepGC was deprecated in version 9.0 and will likely be removed in a future release.[elasticsearch] [2018-08-04T16:42:26,073][INFO ][o.e.n.Node ] [node-0] initializing ...[elasticsearch] [2018-08-04T16:42:26,185][INFO ][o.e.e.NodeEnvironment ] [node-0] using [1] data paths, mounts [[/ (/dev/disk1s1)]], net usable_space [109.3gb], net total_space [233.4gb], types [apfs][elasticsearch] [2018-08-04T16:42:26,187][INFO ][o.e.e.NodeEnvironment ] [node-0] heap size [494.9mb], compressed ordinary object pointers [true][elasticsearch] [2018-08-04T16:42:26,190][INFO ][o.e.n.Node ] [node-0] node name [node-0], node ID [o9SuMXP-R7uvJLtE3h37Rw][elasticsearch] [2018-08-04T16:42:26,191][INFO ][o.e.n.Node ] [node-0] version[6.3.2-SNAPSHOT], pid[61499], build[default/zip/053779d/2018-08-04T08:39:59.714654Z], OS[Mac OS X/10.13.5/x86_64], JVM[&quot;Oracle Corporation&quot;/Java HotSpot(TM) 64-Bit Server VM/10.0.2/10.0.2+13][elasticsearch] [2018-08-04T16:42:26,191][INFO ][o.e.n.Node ] [node-0] JVM arguments [-Xms1g, -Xmx1g, -XX:+UseConcMarkSweepGC, -XX:CMSInitiatingOccupancyFraction=75, -XX:+UseCMSInitiatingOccupancyOnly, -XX:+AlwaysPreTouch, -Xss1m, -Djava.awt.headless=true, -Dfile.encoding=UTF-8, -Djna.nosys=true, -XX:-OmitStackTraceInFastThrow, -Dio.netty.noUnsafe=true, -Dio.netty.noKeySetOptimization=true, -Dio.netty.recycler.maxCapacityPerThread=0, -Dlog4j.shutdownHookEnabled=false, -Dlog4j2.disable.jmx=true, -Djava.io.tmpdir=/var/folders/mb/3vpbvkkx13l2jmpt2kmmt0fr0000gn/T/elasticsearch.URRKTybG, -XX:+HeapDumpOnOutOfMemoryError, -XX:HeapDumpPath=data, -XX:ErrorFile=logs/hs_err_pid%p.log, -Xlog:gc*,gc+age=trace,safepoint:file=logs/gc.log:utctime,pid,tags:filecount=32,filesize=64m, -Djava.locale.providers=COMPAT, -XX:UseAVX=2, -ea, -esa, -Xms512m, -Xmx512m, -Des.path.home=/Users/zhisheng/IdeaProjects/github/elasticsearch/distribution/build/cluster/run node0/elasticsearch-6.3.2-SNAPSHOT, -Des.path.conf=/Users/zhisheng/IdeaProjects/github/elasticsearch/distribution/build/cluster/run node0/elasticsearch-6.3.2-SNAPSHOT/config, -Des.distribution.flavor=default, -Des.distribution.type=zip][elasticsearch] [2018-08-04T16:42:26,191][WARN ][o.e.n.Node ] [node-0] version [6.3.2-SNAPSHOT] is a pre-release version of Elasticsearch and is not suitable for production[elasticsearch] [2018-08-04T16:42:28,808][INFO ][o.e.p.PluginsService ] [node-0] loaded module [aggs-matrix-stats][elasticsearch] [2018-08-04T16:42:28,809][INFO ][o.e.p.PluginsService ] [node-0] loaded module [analysis-common][elasticsearch] [2018-08-04T16:42:28,809][INFO ][o.e.p.PluginsService ] [node-0] loaded module [ingest-common][elasticsearch] [2018-08-04T16:42:28,809][INFO ][o.e.p.PluginsService ] [node-0] loaded module [lang-expression][elasticsearch] [2018-08-04T16:42:28,809][INFO ][o.e.p.PluginsService ] [node-0] loaded module [lang-mustache][elasticsearch] [2018-08-04T16:42:28,809][INFO ][o.e.p.PluginsService ] [node-0] loaded module [lang-painless][elasticsearch] [2018-08-04T16:42:28,809][INFO ][o.e.p.PluginsService ] [node-0] loaded module [mapper-extras][elasticsearch] [2018-08-04T16:42:28,809][INFO ][o.e.p.PluginsService ] [node-0] loaded module [parent-join][elasticsearch] [2018-08-04T16:42:28,809][INFO ][o.e.p.PluginsService ] [node-0] loaded module [percolator][elasticsearch] [2018-08-04T16:42:28,809][INFO ][o.e.p.PluginsService ] [node-0] loaded module [rank-eval][elasticsearch] [2018-08-04T16:42:28,809][INFO ][o.e.p.PluginsService ] [node-0] loaded module [reindex][elasticsearch] [2018-08-04T16:42:28,810][INFO ][o.e.p.PluginsService ] [node-0] loaded module [repository-url][elasticsearch] [2018-08-04T16:42:28,810][INFO ][o.e.p.PluginsService ] [node-0] loaded module [transport-netty4][elasticsearch] [2018-08-04T16:42:28,810][INFO ][o.e.p.PluginsService ] [node-0] loaded module [tribe][elasticsearch] [2018-08-04T16:42:28,810][INFO ][o.e.p.PluginsService ] [node-0] loaded module [x-pack-core][elasticsearch] [2018-08-04T16:42:28,810][INFO ][o.e.p.PluginsService ] [node-0] loaded module [x-pack-deprecation][elasticsearch] [2018-08-04T16:42:28,810][INFO ][o.e.p.PluginsService ] [node-0] loaded module [x-pack-graph][elasticsearch] [2018-08-04T16:42:28,810][INFO ][o.e.p.PluginsService ] [node-0] loaded module [x-pack-logstash][elasticsearch] [2018-08-04T16:42:28,810][INFO ][o.e.p.PluginsService ] [node-0] loaded module [x-pack-ml][elasticsearch] [2018-08-04T16:42:28,810][INFO ][o.e.p.PluginsService ] [node-0] loaded module [x-pack-monitoring][elasticsearch] [2018-08-04T16:42:28,810][INFO ][o.e.p.PluginsService ] [node-0] loaded module [x-pack-rollup][elasticsearch] [2018-08-04T16:42:28,810][INFO ][o.e.p.PluginsService ] [node-0] loaded module [x-pack-security][elasticsearch] [2018-08-04T16:42:28,811][INFO ][o.e.p.PluginsService ] [node-0] loaded module [x-pack-sql][elasticsearch] [2018-08-04T16:42:28,811][INFO ][o.e.p.PluginsService ] [node-0] loaded module [x-pack-upgrade][elasticsearch] [2018-08-04T16:42:28,811][INFO ][o.e.p.PluginsService ] [node-0] loaded module [x-pack-watcher][elasticsearch] [2018-08-04T16:42:28,811][INFO ][o.e.p.PluginsService ] [node-0] no plugins loaded[elasticsearch] [2018-08-04T16:42:32,722][INFO ][o.e.x.s.a.s.FileRolesStore] [node-0] parsed [0] roles from file [/Users/zhisheng/IdeaProjects/github/elasticsearch/distribution/build/cluster/run node0/elasticsearch-6.3.2-SNAPSHOT/config/roles.yml][elasticsearch] [2018-08-04T16:42:33,358][INFO ][o.e.x.m.j.p.l.CppLogMessageHandler] [controller/61517] [Main.cc@109] controller (64 bit): Version 6.3.2-SNAPSHOT (Build 903094f295d249) Copyright (c) 2018 Elasticsearch BV[elasticsearch] [2018-08-04T16:42:33,783][DEBUG][o.e.a.ActionModule ] Using REST wrapper from plugin org.elasticsearch.xpack.security.Security[elasticsearch] [2018-08-04T16:42:34,110][INFO ][o.e.d.DiscoveryModule ] [node-0] using discovery type [zen][elasticsearch] [2018-08-04T16:42:34,971][INFO ][o.e.n.Node ] [node-0] initialized[elasticsearch] [2018-08-04T16:42:34,971][INFO ][o.e.n.Node ] [node-0] starting ...[elasticsearch] [2018-08-04T16:42:35,217][INFO ][o.e.t.TransportService ] [node-0] publish_address &#123;127.0.0.1:9300&#125;, bound_addresses &#123;[::1]:9300&#125;, &#123;127.0.0.1:9300&#125;[elasticsearch] [2018-08-04T16:42:38,291][INFO ][o.e.c.s.MasterService ] [node-0] zen-disco-elected-as-master ([0] nodes joined)[, ], reason: new_master &#123;node-0&#125;&#123;o9SuMXP-R7uvJLtE3h37Rw&#125;&#123;xjoT1zvpRsm1ZDGLCab1sA&#125;&#123;127.0.0.1&#125;&#123;127.0.0.1:9300&#125;&#123;ml.machine_memory=17179869184, xpack.installed=true, testattr=test, ml.max_open_jobs=20, ml.enabled=true&#125;[elasticsearch] [2018-08-04T16:42:38,295][INFO ][o.e.c.s.ClusterApplierService] [node-0] new_master &#123;node-0&#125;&#123;o9SuMXP-R7uvJLtE3h37Rw&#125;&#123;xjoT1zvpRsm1ZDGLCab1sA&#125;&#123;127.0.0.1&#125;&#123;127.0.0.1:9300&#125;&#123;ml.machine_memory=17179869184, xpack.installed=true, testattr=test, ml.max_open_jobs=20, ml.enabled=true&#125;, reason: apply cluster state (from master [master &#123;node-0&#125;&#123;o9SuMXP-R7uvJLtE3h37Rw&#125;&#123;xjoT1zvpRsm1ZDGLCab1sA&#125;&#123;127.0.0.1&#125;&#123;127.0.0.1:9300&#125;&#123;ml.machine_memory=17179869184, xpack.installed=true, testattr=test, ml.max_open_jobs=20, ml.enabled=true&#125; committed version [1] source [zen-disco-elected-as-master ([0] nodes joined)[, ]]])[elasticsearch] [2018-08-04T16:42:38,317][INFO ][o.e.x.s.t.n.SecurityNetty4HttpServerTransport] [node-0] publish_address &#123;127.0.0.1:9200&#125;, bound_addresses &#123;[::1]:9200&#125;, &#123;127.0.0.1:9200&#125;[elasticsearch] [2018-08-04T16:42:38,319][INFO ][o.e.n.Node ] [node-0] started[elasticsearch] [2018-08-04T16:42:38,358][WARN ][o.e.x.s.a.s.m.NativeRoleMappingStore] [node-0] Failed to clear cache for realms [[]][elasticsearch] [2018-08-04T16:42:38,413][INFO ][o.e.g.GatewayService ] [node-0] recovered [0] indices into cluster_state[elasticsearch] [2018-08-04T16:42:38,597][INFO ][o.e.c.m.MetaDataIndexTemplateService] [node-0] adding template [.watch-history-7] for index patterns [.watcher-history-7*][elasticsearch] [2018-08-04T16:42:38,660][INFO ][o.e.c.m.MetaDataIndexTemplateService] [node-0] adding template [.watches] for index patterns [.watches*][elasticsearch] [2018-08-04T16:42:38,707][INFO ][o.e.c.m.MetaDataIndexTemplateService] [node-0] adding template [.triggered_watches] for index patterns [.triggered_watches*][elasticsearch] [2018-08-04T16:42:38,771][INFO ][o.e.c.m.MetaDataIndexTemplateService] [node-0] adding template [.monitoring-logstash] for index patterns [.monitoring-logstash-6-*][elasticsearch] [2018-08-04T16:42:38,836][INFO ][o.e.c.m.MetaDataIndexTemplateService] [node-0] adding template [.monitoring-es] for index patterns [.monitoring-es-6-*][elasticsearch] [2018-08-04T16:42:38,878][INFO ][o.e.c.m.MetaDataIndexTemplateService] [node-0] adding template [.monitoring-alerts] for index patterns [.monitoring-alerts-6][elasticsearch] [2018-08-04T16:42:38,926][INFO ][o.e.c.m.MetaDataIndexTemplateService] [node-0] adding template [.monitoring-beats] for index patterns [.monitoring-beats-6-*][elasticsearch] [2018-08-04T16:42:38,970][INFO ][o.e.c.m.MetaDataIndexTemplateService] [node-0] adding template [.monitoring-kibana] for index patterns [.monitoring-kibana-6-*][elasticsearch] [2018-08-04T16:42:39,055][INFO ][o.e.l.LicenseService ] [node-0] license [79704513-d3c4-4535-8276-beeb146765de] mode [basic] - valid 6ã€ä½†æ˜¯æˆ‘å‡ºç°äº†ä¸‹é¢è¿™ä¸ªé—®é¢˜ï¼Œä¸€ç›´å›°æ‰°ç€æˆ‘å‘¢ï¼Œæˆ‘æ˜¯ç›´æ¥è·³è¿‡å»çš„ã€‚ 12345678910111213141516171819202122[2018-08-01T09:44:27,370][ERROR][o.e.b.ElasticsearchUncaughtExceptionHandler] [] fatal error in thread [main], exitingjava.lang.NoClassDefFoundError: org/elasticsearch/plugins/ExtendedPluginsClassLoader at org.elasticsearch.plugins.PluginsService.loadBundle(PluginsService.java:632) ~[main/:?] at org.elasticsearch.plugins.PluginsService.loadBundles(PluginsService.java:557) ~[main/:?] at org.elasticsearch.plugins.PluginsService.&lt;init&gt;(PluginsService.java:162) ~[main/:?] at org.elasticsearch.node.Node.&lt;init&gt;(Node.java:311) ~[main/:?] at org.elasticsearch.node.Node.&lt;init&gt;(Node.java:252) ~[main/:?] at org.elasticsearch.bootstrap.Bootstrap$5.&lt;init&gt;(Bootstrap.java:213) ~[main/:?] at org.elasticsearch.bootstrap.Bootstrap.setup(Bootstrap.java:213) ~[main/:?] at org.elasticsearch.bootstrap.Bootstrap.init(Bootstrap.java:326) ~[main/:?] at org.elasticsearch.bootstrap.Elasticsearch.init(Elasticsearch.java:136) ~[main/:?] at org.elasticsearch.bootstrap.Elasticsearch.execute(Elasticsearch.java:127) ~[main/:?] at org.elasticsearch.cli.EnvironmentAwareCommand.execute(EnvironmentAwareCommand.java:86) ~[main/:?] at org.elasticsearch.cli.Command.mainWithoutErrorHandling(Command.java:124) ~[main/:?] at org.elasticsearch.cli.Command.main(Command.java:90) ~[main/:?] at org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:93) ~[main/:?] at org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:86) ~[main/:?]Caused by: java.lang.ClassNotFoundException: org.elasticsearch.plugins.ExtendedPluginsClassLoader at jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:582) ~[?:?] at jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:190) ~[?:?] at java.lang.ClassLoader.loadClass(ClassLoader.java:499) ~[?:?] ... 15 more é‡åˆ°çš„è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘åœ¨ GitHub æ±‚åŠ©ä¿¡æ¯å¦‚ä¸‹ï¼š https://github.com/elastic/elasticsearch/issues/30774 ä½†æ˜¯å¹¶æ²¡æœ‰è§£å†³æˆ‘çš„é—®é¢˜ï¼Œè¿™é‡Œæš‚æ—¶å…ˆè®°å½•ä¸‹æ¥ï¼æˆ‘è‡ªå·±ä¹Ÿè·Ÿäº†ä¸‹æºç ï¼Œå®šä½åˆ°é”™è¯¯ä¿¡æ¯æ˜¯æ€ä¹ˆäº§ç”Ÿçš„ï¼Œä½†æ˜¯æ²¡æœ‰è§£å†³æ–¹æ¡ˆï¼ åé¢å†™äº†ç¯‡æ–‡ç« ï¼šæ•™ä½ å¦‚ä½•åœ¨ IDEA è¿œç¨‹ Debug ElasticSearch æˆ–è®¸å¯ä»¥å¸®ä½ è§£å†³ä¸Šé¢é—®é¢˜å¸¦ç»™ä½ çš„å›°æ‰°ï¼ æ›´æ–°åé¢æœ‰ä¸€ä¸ªè¯»è€…æé†’äº†æˆ‘ä¸€ä¸‹ï¼Œä»–è‡ªå·±ä¹Ÿé‡åˆ°è¿™ä¸ªé—®é¢˜ï¼Œç„¶åä»–çš„è§£å†³æ–¹æ¡ˆæŒºå¥½çš„ï¼Œå®Œç¾è§£å†³æˆ‘çš„é—®é¢˜ã€‚è¿™é‡Œåšä¸ªè®°å½•ï¼š è§£å†³æ–¹æ³•ï¼š æ‰“å¼€ IDEA Edit Configurations ï¼Œç»™ Include dependencies with Provided scope æ‰“ä¸Šå‹¾å³å¯è§£å†³ï¼Œå¾ˆç®€å•å§ï¼ï¼ ç»§ç»­RUNï¼Œåˆæ¥ä¸€ä¸ª EXceptinï¼š 1234567891011121314151617[2018-08-23T01:13:38,551][WARN ][o.e.b.ElasticsearchUncaughtExceptionHandler] [] uncaught exception in thread [main]org.elasticsearch.bootstrap.StartupException: java.security.AccessControlException: access denied (&quot;java.lang.RuntimePermission&quot; &quot;createClassLoader&quot;) at org.elasticsearch.bootstrap.Elasticsearch.init(Elasticsearch.java:140) ~[main/:?] at org.elasticsearch.bootstrap.Elasticsearch.execute(Elasticsearch.java:127) ~[main/:?] at org.elasticsearch.cli.EnvironmentAwareCommand.execute(EnvironmentAwareCommand.java:86) ~[main/:?] at org.elasticsearch.cli.Command.mainWithoutErrorHandling(Command.java:124) ~[main/:?] at org.elasticsearch.cli.Command.main(Command.java:90) ~[main/:?] at org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:93) ~[main/:?] at org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:86) ~[main/:?]Caused by: java.security.AccessControlException: access denied (&quot;java.lang.RuntimePermission&quot; &quot;createClassLoader&quot;) at java.security.AccessControlContext.checkPermission(AccessControlContext.java:472) ~[?:?] at java.security.AccessController.checkPermission(AccessController.java:895) ~[?:?] at java.lang.SecurityManager.checkPermission(SecurityManager.java:335) ~[?:?] at java.lang.SecurityManager.checkCreateClassLoader(SecurityManager.java:397) ~[?:?]...Exception: java.security.AccessControlException thrown from the UncaughtExceptionHandler in thread &quot;Thread-2&quot; ç¬¬ä¸€ç§ï¼š åœ¨ config ç›®å½•ä¸‹æ–°å»º java.policy æ–‡ä»¶ï¼Œå¡«å…¥ä¸‹é¢å†…å®¹: 123grant &#123; permission java.lang.RuntimePermission &quot;createClassLoader&quot;;&#125;; ç„¶ååœ¨ VM options åŠ å…¥ java.security.policy çš„è®¾ç½®ï¼ŒæŒ‡å‘è¯¥æ–‡ä»¶å³å¯ 1-Djava.security.policy=/usr/local/elasticsearch-6.3.2/config/java.policy ç¬¬äºŒç§ï¼š å°±æ˜¯åœ¨ %JAVA_HOME%/conf/security ç›®å½•ä¸‹ï¼ˆJDK10æ˜¯è¿™ä¸ªè·¯å¾„ï¼Œä¹‹å‰çš„ç‰ˆæœ¬ä¸ç¡®å®šï¼‰ï¼Œæˆ‘çš„ç›®å½•æ˜¯ /Library/Java/JavaVirtualMachines/jdk-10.0.2.jdk/Contents/Home/conf/securityï¼Œæ‰“å¼€ java.policy æ–‡ä»¶ï¼Œåœ¨ grant ä¸­åŠ å…¥ä¸‹é¢è¿™å¥ï¼Œèµ‹äºˆæƒé™ã€‚ 12//for es 6.3.2permission java.lang.RuntimePermission &quot;createClassLoader&quot;; å† RUNï¼Œè¿™æ¬¡å¯ç»ˆäºè¿è¡Œèµ·æ¥äº†ï¼ï¼ï¼ å†æ¬¡æ„Ÿè°¢ä¸‹è¯»è€…ï¼Œä»–çš„æ–‡ç« åœ°å€æ˜¯ï¼šhttp://laijianfeng.org/2018/08/%E6%95%99%E4%BD%A0%E7%BC%96%E8%AF%91%E8%B0%83%E8%AF%95Elasticsearch-6-3-2%E6%BA%90%E7%A0%81/ æ€»ç»“æŠ˜è…¾çš„è·¯ä¸Šå°‘ä¸äº†å„ç§é”™è¯¯çƒ¦æ‰°ä½ ï¼Œå­¦ä¼šè§£å†³é—®é¢˜ï¼ ç›¸å…³æ–‡ç« 1ã€æ¸£æ¸£èœé¸¡ä¸ºä»€ä¹ˆè¦çœ‹ ElasticSearch æºç ï¼Ÿ 2ã€æ¸£æ¸£èœé¸¡çš„ ElasticSearch æºç è§£æ â€”â€” ç¯å¢ƒæ­å»º 3ã€æ¸£æ¸£èœé¸¡çš„ ElasticSearch æºç è§£æ â€”â€” å¯åŠ¨æµç¨‹(ä¸Š) 4ã€æ¸£æ¸£èœé¸¡çš„ ElasticSearch æºç è§£æ â€”â€” å¯åŠ¨æµç¨‹(ä¸‹) 5ã€Elasticsearch ç³»åˆ—æ–‡ç« ï¼ˆä¸€ï¼‰ï¼šElasticsearch é»˜è®¤åˆ†è¯å™¨å’Œä¸­åˆ†åˆ†è¯å™¨ä¹‹é—´çš„æ¯”è¾ƒåŠä½¿ç”¨æ–¹æ³• 6ã€Elasticsearch ç³»åˆ—æ–‡ç« ï¼ˆäºŒï¼‰ï¼šå…¨æ–‡æœç´¢å¼•æ“ Elasticsearch é›†ç¾¤æ­å»ºå…¥é—¨æ•™ç¨‹ 7ã€Elasticsearch ç³»åˆ—æ–‡ç« ï¼ˆä¸‰ï¼‰ï¼šElasticSearch é›†ç¾¤ç›‘æ§ 8ã€Elasticsearch ç³»åˆ—æ–‡ç« ï¼ˆå››ï¼‰ï¼šElasticSearch å•ä¸ªèŠ‚ç‚¹ç›‘æ§ 9ã€Elasticsearch ç³»åˆ—æ–‡ç« ï¼ˆäº”ï¼‰ï¼šELK å®æ—¶æ—¥å¿—åˆ†æå¹³å°ç¯å¢ƒæ­å»º 10ã€æ•™ä½ å¦‚ä½•åœ¨ IDEA è¿œç¨‹ Debug ElasticSearch","tags":[{"name":"ElasticSearch","slug":"ElasticSearch","permalink":"http://yoursite.com/tags/ElasticSearch/"}]},{"title":"æ¸£æ¸£èœé¸¡ä¸ºä»€ä¹ˆè¦çœ‹ ElasticSearch æºç ï¼Ÿ","date":"2018-08-03T16:00:00.000Z","path":"2018/08/04/why-see-es-code/","text":"å‰æäººå·¥æ™ºèƒ½ã€å¤§æ•°æ®å¿«é€Ÿå‘å±•çš„ä»Šå¤©ï¼Œå¯¹äº TB ç”šè‡³ PB çº§å¤§æ•°æ®çš„å¿«é€Ÿæ£€ç´¢å·²ç„¶æˆä¸ºåˆšéœ€ï¼Œå¤§å‹ä¼ä¸šæ—©å·²æ·¹æ²¡åœ¨ç³»ç»Ÿç”Ÿæˆçš„æµ©ç€šæ•°æ®æµå½“ä¸­ã€‚å¤§æ•°æ®æŠ€æœ¯ä¸šå·²é›†ä¸­åœ¨å¦‚ä½•å­˜å‚¨å’Œå¤„ç†è¿™äº›æµ·é‡çš„æ•°æ®ä¸Šã€‚Elasticsearch ä½œä¸ºå¼€æºé¢†åŸŸçš„åèµ·ä¹‹ç§€ï¼Œä»2010å¹´è‡³ä»Šå¾—åˆ°é£è·ƒå¼çš„å‘å±•ã€‚ Elasticsearch ä»¥å…¶å¼€æºã€åˆ†å¸ƒå¼ã€RESTFul API ä¸‰å¤§ä¼˜åŠ¿ï¼Œå·²ç»æˆä¸ºå½“ä¸‹é£å£ä¸­â€œä¼šé£çš„çŒªâ€ã€‚ åœ¨æˆ‘çš„ç”µè„‘æœ¬åœ°å†™äº†å‡ ç¯‡ ElasticSearch çš„æºç è§£æäº†ï¼Œå›è¿‡å¤´æ¥æƒ³æƒ³åº”è¯¥ä¹Ÿå†™ä¸€ç¯‡ä¸ºä½•æˆ‘ä¼šå»çœ‹å®ƒçš„æºç ï¼Ÿ ä¸ºä»€ä¹ˆå‘¢ï¼Ÿä¸‹é¢æˆ‘è®²è®²è‡ªå·±ä»æ¥è§¦æœç´¢åˆ°ç°åœ¨çœ‹æºç çš„è¿‡ç¨‹ï¼ å…³æ³¨æˆ‘ è½¬è½½è¯·åŠ¡å¿…æ³¨æ˜åŸåˆ›åœ°å€ä¸ºï¼šhttp://www.54tianzhisheng.cn/2018/08/24/why-see-es-code/ ç¬¬ä¸€æ¬¡æ¥è§¦æœç´¢æœç´¢ï¼Œæˆ‘ä»¬é¦–å…ˆæƒ³åˆ°çš„æ˜¯æœç´¢å¼•æ“ï¼šGoogleã€ç™¾åº¦ï¼Œè¿™ä¸ªå°±ç®—æ˜¯æ¥è§¦çš„æœ€æ—©çš„äº†ã€‚ æˆ‘è‡ªå·±é¡¹ç›®é‡Œé¢æ¥è§¦æœç´¢æ˜¯å¤§äºŒæš‘å‡é‚£æ—¶ç»ƒä¹ çš„ä¸€ä¸ªé¡¹ç›®ï¼Œé‡Œé¢ç”¨äº† Solrï¼Œç„¶åå½“æ—¶è‡ªå·±ä¹Ÿç¨å¾®äº†è§£äº†ä¸‹ï¼Œå¹¶ç”¨åœ¨äº†é¡¹ç›®é‡Œé¢ã€‚ ç¬¬äºŒæ¬¡æ¥è§¦æœç´¢ä»ç¬¬ä¸€æ¬¡é¡¹ç›®é‡Œé¢ç”¨åˆ°äº†æœç´¢ï¼Œåé¢è‡ªå·±å¯¹è¿™æ–¹é¢å°±æ¯”è¾ƒæ„Ÿå…´è¶£ã€‚å†ä¸€æ¬¡æ¥è§¦æœç´¢æ˜¯å®ä¹ çš„æ—¶å€™è¿›å…¬å¸ã€‚ç¬¬ä¸€ä»¶äº‹æƒ…å°±æ˜¯è¢«è€å¤§å«çš„å»å­¦ä¹ æ­å»º Elasticsearch é›†ç¾¤ï¼Œäºæ˜¯ä¹ï¼Œç”µè„‘å°±è£…äº†ä¸‰ä¸ªè™šæ‹Ÿæœºï¼ŒElasticsearch å°±ä¸€ä¸ªä¸ªçš„è£…äº†èµ·æ¥äº†ã€‚ä¹Ÿè®°å½•äº†åšå®¢ä¸‹æ¥ï¼šElasticsearch ç³»åˆ—æ–‡ç« ï¼ˆäºŒï¼‰ï¼šå…¨æ–‡æœç´¢å¼•æ“ Elasticsearch é›†ç¾¤æ­å»ºå…¥é—¨æ•™ç¨‹ï¼Œå½“æ—¶æ­å»ºçš„æ—¶å€™ ES çš„ç‰ˆæœ¬æ‰åˆšä» 2.x å‡çº§åˆ° 5.x å‘¢ï¼Œæˆªæ­¢æœ¬æ–‡æ—¶é—´ 2018.08.04ï¼Œç°åœ¨ ES ç‰ˆæœ¬å·²ç»æ˜¯åˆ° 7.0 äº†ï¼Œè¿™ç‰ˆæœ¬å‡çº§æ˜¯çœŸçš„çš„å¿«ï¼Œè¿™ä¹Ÿè¯´æ˜äº† ES çš„æ´»è·ƒåº¦å¾ˆé«˜ï¼ŒèƒŒåçš„å¼€å‘å·¥ç¨‹å¸ˆç»´æŠ¤ä¹Ÿå¿«ï¼Œä¾§é¢çªå‡ºè¦å»çœ‹å®ƒæºç çš„é‡è¦æ€§ã€‚ å½“æ—¶è‡ªå·±åœ¨æœ¬åœ°æµ‹è¯•æ­å»ºé›†ç¾¤åï¼Œç»™åˆ†é…äº†å¦å¤–ä¸€ä¸ªä»»åŠ¡å°±æ˜¯å»äº†è§£ ES ä¸­çš„è‡ªå¸¦åˆ†è¯ã€è‹±æ–‡åˆ†è¯ã€ä¸­æ–‡åˆ†è¯çš„ç›¸åŒä¸å·®å¼‚ã€ä»¥åŠè‡ªå·±å»ºç«‹åˆ†è¯éœ€è¦æ³¨æ„çš„ç‚¹ã€‚äºæ˜¯ä¹ï¼šå½“æ—¶åœ¨å…¬å¸ wiki è´¡çŒ®äº†è¿™ç¯‡æ–‡ç« ï¼šElasticsearch ç³»åˆ—æ–‡ç« ï¼ˆä¸€ï¼‰ï¼šElasticsearch é»˜è®¤åˆ†è¯å™¨å’Œä¸­åˆ†åˆ†è¯å™¨ä¹‹é—´çš„æ¯”è¾ƒåŠä½¿ç”¨æ–¹æ³•ã€‚è¿™ç¯‡æ–‡ç« å‡ ä¹å·²ç»æŠŠå¸‚é¢ä¸Šæ‰€æœ‰çš„åˆ†è¯éƒ½å†™è¿›å»äº†ï¼ŒåŒ…æ‹¬ä»–ä»¬çš„ç›¸åŒç‚¹ã€ä¸åŒç‚¹ã€å¦‚ä½•ä½¿ç”¨ã€å¦‚ä½•è‡ªå®šä¹‰åˆ†è¯å™¨ã€‚ ç„¶åè¿˜æœ‰å°±æ˜¯æˆ‘åŒç»„çš„ä¸€ä¸ªåŒå­¦ï¼Œå¥¹çš„ä»»åŠ¡å°±æ˜¯ 2.x å‡çº§åˆ° 5.x ä¸­ mapping çš„å¤§æ”¹å˜æœ‰å“ªäº›ï¼Ÿåé¢æˆ‘ä¹Ÿçœ‹äº†å¥¹æ€»ç»“çš„æ–‡æ¡£ï¼Œå¾ˆè¯¦ç»†ï¼ åœ¨è¿™æ¬¡æ¥è§¦äº† ES åï¼Œå› ä¸ºæˆ‘è‡ªå·±æœ¬åœ°å·²ç»æœ‰ç¯å¢ƒäº†ï¼Œæ‰€ä»¥è‡ªå·±æµ‹è¯•äº†ä¸€äº›åŠŸèƒ½ï¼Œç»™ ES å®‰è£…æ’ä»¶ï¼ˆIKã€x-packã€æ”¯æŒ sql çš„ã€ï¼‰ï¼Œåé¢è‡ªå·±ä¹Ÿå»æµ‹è¯• ES çš„ç´¢å¼•ã€æ–‡æ¡£ã€REST APIã€‚ ç¬¬ä¸‰æ¬¡æ¥è§¦æœç´¢ç”±äºæ˜¯è‡ªå·±å¯¹å…¶æ„Ÿå…´è¶£ï¼Œæ‰€ä»¥åé¢å°±å»æ‰¾äº†äº›ç›¸å…³çš„è§†é¢‘ï¼Œæ¯”å¦‚ï¼šä¸­åçŸ³è¡«çš„ã€ŠElasticsearch é¡¶å°–é«˜æ‰‹ç³»åˆ—-é«˜æ‰‹è¿›é˜¶ç¯‡ã€‹å‡ ä¸ªç³»åˆ—è§†é¢‘æ•™ç¨‹ä¸ªäººæ„Ÿè§‰è¿˜æ˜¯ä¸é”™çš„ï¼Œçœ‹å®Œè¿™å‡ ä¸ªç³»åˆ—ä¼°è®¡å…¥é—¨è‚¯å®šæ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚ç‰ˆæƒåŸå› ï¼Œä¸æä¾›ä¸‹è½½é“¾æ¥ã€‚ å¦å¤–å°±æ˜¯ã€ŠElasticsearch æƒå¨æŒ‡å—ã€‹ç¿»è¯‘çš„ç‰ˆæœ¬ï¼Œç¿»è¯‘è¿˜æ²¡æœ‰å…¨ï¼Œå¯ä»¥å»çœ‹çœ‹ï¼Œè®²å¾—å¾ˆè¯¦ç»†çš„ï¼Œå¸‚é¢ä¸Šåº”è¯¥è¿˜æ²¡æœ‰å“ªæœ¬ä¹¦è®²çš„æœ‰è¿™ä¹ˆæ¸…æ¥šï¼Œå¦‚æœè‹±æ–‡ä¸é”™çš„å¯ä»¥ç›´æ¥å•ƒè‹±æ–‡å§ã€‚ è¿˜æœ‰å°±æ˜¯å®˜ç½‘çš„æ–‡æ¡£äº†ï¼Œéå¸¸éå¸¸è¯¦ç»†ï¼Œè¿˜æœ‰ demoï¼Œ2.x ç‰ˆæœ¬çš„æ˜¯æœ‰ä¸­æ–‡çš„å®˜æ–¹æ–‡æ¡£ï¼Œå¯ä»¥å‡‘åˆç€çœ‹ã€‚ å­¦ä¹ æ–°ä¸œè¥¿ï¼Œè¦å­¦ä¼šå…ˆçœ‹å®˜æ–¹æ–‡æ¡£ï¼Œä½•å†µ Elasticsearch çš„å®˜æ–¹æ–‡æ¡£è¿™ä¹ˆè¯¦ç»†å‘¢ï¼ ç¬¬å››æ¬¡æ¥è§¦æœç´¢åé¢å®ä¹ çš„æ—¶å€™ï¼Œåˆåˆ†é…äº†å…¬å¸ä¸­é—´ä»¶ç›‘æ§çš„ä¸¤ä¸ªæ¨¡å—ï¼šElasticsearch å’Œ HBase ç»„ä»¶çš„ç›‘æ§ã€‚äºæ˜¯ä¹ï¼Œå†æ¬¡æœ‰æœºä¼šæ¥è§¦ Elasticsearch äº†ï¼Œè¿™æ¬¡ä¸»è¦è¿˜æ˜¯åˆ©ç”¨ Elasticsearch è‡ªå¸¦çš„ REST API ï¼š_cluster/health ã€_cluster/statsã€_nodesã€_nodes/stats å»è·å–åˆ°é›†ç¾¤çš„å¥åº·ä¿¡æ¯ã€èŠ‚ç‚¹ä¿¡æ¯ï¼ˆå†…å­˜ã€CPUã€ç½‘ç»œã€JVMç­‰ä¿¡æ¯ï¼‰ã€‚ä¸ºäº†åšè¿™ä¸ªé¡¹ç›®è‡ªå·±å½“æ—¶ä¹Ÿå»æ‰¾äº†ç½‘ä¸Šå¾ˆå¤šç±»ä¼¼çš„æ–‡ç« å‚è€ƒå¸¸ç”¨çš„ç›‘æ§æŒ‡æ ‡å’Œä»–ä»¬æ˜¯æ€ä¹ˆåšç›‘æ§çš„ã€‚æˆ‘å½“æ—¶çš„ä»»åŠ¡ä¸»è¦è¿˜æ˜¯é‡‡é›†ä¿¡æ¯ï¼Œç„¶åå­˜åˆ°å…¬å¸å¤§é¡¹ç›®çš„ influxdb ä¸­ï¼Œæœ€åç”¨ grafana å±•ç¤ºå‡ºæ¥ï¼Œåé¢æˆ‘ç»„çš„è¿ç»´å¤§ä½¬ç»™æˆ‘çœ‹äº†ç›‘æ§å¤§ç›˜ï¼Œç•Œé¢æŒºé…·ç‚«çš„ï¼Œå“ˆå“ˆå“ˆï¼Œç‰›é€¼ï¼ å½“æ—¶å†™çš„ä¸¤ç¯‡åšå®¢ï¼š 1ã€Elasticsearch ç³»åˆ—æ–‡ç« ï¼ˆä¸‰ï¼‰ï¼šElasticSearch é›†ç¾¤ç›‘æ§ 2ã€Elasticsearch ç³»åˆ—æ–‡ç« ï¼ˆå››ï¼‰ï¼šElasticSearch å•ä¸ªèŠ‚ç‚¹ç›‘æ§ å–ä¹‹ç½‘ç»œï¼Œè¿˜ä¹‹ç½‘ç»œï¼Œå¸Œæœ›ç»™åé¢åšç±»ä¼¼ä»»åŠ¡çš„å°ä¼™ä¼´ç»™ç‚¹å‚è€ƒæ„è§ï¼ å†å°±æ˜¯è‡ªå·±æ­å»º ELKï¼ˆElasticSearch, Logstash, Kibanaï¼‰æ—¥å¿—åˆ†æå¹³å°ï¼Œç„¶åç©äº†ä¸‹ï¼ æ­å»ºç¯å¢ƒåšå®¢ï¼šElasticsearch ç³»åˆ—æ–‡ç« ï¼ˆäº”ï¼‰ï¼šELK å®æ—¶æ—¥å¿—åˆ†æå¹³å°ç¯å¢ƒæ­å»º ç¬¬äº”æ¬¡æ¥è§¦æœç´¢åé¢å°±æ²¡æ€ä¹ˆæ¥è§¦ ElasticSearch äº†ï¼Œä¸€ç›´å¿™ç€å…¶ä»–çš„ä¸œè¥¿ã€‚ å®ä¹ è¾èŒåï¼Œæ¯•ä¸šå‡ºæ¥æ‰¾å·¥ä½œçš„é‚£æ®µæ—¥å­ï¼Œè‡ªå·±åˆèŠ±äº†ä¸€æ˜ŸæœŸç¨å¾®è¿‡äº†ä¸€é ã€ŠElasticsearch æƒå¨æŒ‡å—ã€‹ è¿™æœ¬ä¹¦ï¼Œè¯è¯´è¿˜å¸®æˆ‘é¢è¯•æŒºè¿‡ä¸å°‘å…³å‘¢ï¼Œå“ˆå“ˆå“ˆï¼å› ä¸ºæˆ‘é¡¹ç›®é‡Œå†™äº† Elasticsearch çš„ç›‘æ§ï¼Œå¦‚æœä½ å¯¹ Elasticsearch å…¶ä»–çš„ä¸ç†Ÿæ‚‰ï¼Œé¢è¯•å®˜ç¨å¾®é—®äº›å…¶ä»–å…³äºè¿™æ–¹é¢çš„ï¼Œé‚£å°±ä¸çŸ¥é“å°±æœ‰ç‚¹å°´å°¬ğŸ˜…äº†ï¼Œæ‰€ä»¥è¿˜æ˜¯å‡†å¤‡äº†ä¸‹ã€‚çœ‹å®Œä¹‹ååº”ä»˜é¢è¯•æ²¡å¤šå¤§çš„é—®é¢˜ã€‚ ç¬¬å…­æ¬¡æ¥è§¦çœ‹èµ·æ¥æˆ‘æ¥è§¦äº† Elasticsearch å¾ˆä¹…äº†ï¼Œå…¶å®çœŸæ­£é¡¹ç›®é‡Œé¢æ˜¯æ²¡æœ‰ç”¨åˆ° Elasticsearch åšè¿‡é¡¹ç›®çš„ï¼Œæ²¡æœ‰ç”¨åˆ° Elasticsearch çš„æœç´¢åšä»€ä¹ˆé¡¹ç›®ï¼Œäºæ˜¯è‡ªå·±å½“æ—¶æ‰¾å·¥ä½œå…¶å®ä¹Ÿæ‰“ç®—æ‰¾åˆ°å·¥ä½œåçœ‹èƒ½ä¸èƒ½è‡ªå·±åšä¸ªé¡¹ç›®æˆ–è€…å…¬å¸é¡¹ç›®é‡Œé¢ç”¨ç”¨ Elasticsearch å‘¢ï¼Ÿ ç»“æœåœ¨æ–°å…¬å¸æ–°é¡¹ç›®é‡Œï¼Œå¾ˆå¿«å°±ç”¨åˆ°äº†ã€‚åªä¸è¿‡è¿™æ¬¡ä¸æ˜¯ Java é¡¹ç›®é‡Œé¢ç”¨äº†ï¼Œè€Œæ˜¯å’Œ GoLang æ•´åˆã€‚ä¸è¿‡ API éƒ½å·®ä¸å¤šï¼Œå¤šç†Ÿæ‚‰å‡ æ¬¡å°±å¾ˆå¿«ä¸Šæ‰‹äº†ï¼Œå…³é”®è¿˜æ˜¯è¦æ‡‚ Elasticsearch å¦‚ä½•æ„é€  DSL æŸ¥è¯¢è¯­å¥ï¼Œè¿™æ ·å†è½¬æ¢æˆ GO é‡Œé¢çš„ API å°±å¿«äº†ã€‚ è¿˜æœ‰å°±æ˜¯å…¬å¸é‡Œåˆšå¥½æœ‰ä¸ªä¸­ç§‘é™¢ç ”ç©¶ç”Ÿå¤§ä½¬ï¼Œä»–å°±å†™è¿‡ Elasticsearch è¿™å—çš„ä¹¦ç±ã€Šä» lucene åˆ° Elasticsearch å…¨æ–‡æ£€ç´¢å®æˆ˜ã€‹ï¼Œå¦å¤–ä»–çš„ CSDN åšå®¢ä¹Ÿå¾ˆç«ï¼Œé˜…è¯»é‡å¾ˆé«˜ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥ä¹°æœ¬ä¹¦æ”¯æŒä¸‹ã€‚ ä¸­é€”è‡ªå·±é‡åˆ° Elasticsearch å®åœ¨ä¸ä¼šçš„é—®é¢˜ä¹Ÿä¼šä¸»åŠ¨å»æ‰¾å¤§ä½¬å’¨è¯¢ï¼Œç„¶åå¤§ä½¬è€å¿ƒæ•™æ•™æˆ‘è¿™ä¸ªæ¸£æ¸£èœé¸¡ï¼Œåœ¨æ–‡ç« è¿™é‡Œæ„Ÿè°¢ä¸‹å¤§ä½¬è¿™æ®µæ—¶é—´çš„å…³ç…§ã€‚ èŒç”Ÿé˜…è¯»æºç çš„æƒ³æ³•æ—¢ç„¶æ¥è§¦äº†è¿™ä¹ˆä¹…çš„ Elasticsearch ï¼Œé¡¹ç›®é‡Œç”¨è¿‡ï¼Œä¹¦ç±ä¹Ÿçœ‹è¿‡ï¼Œè™½ç„¶è¿˜ä¸æ˜¯å¾ˆç†Ÿï¼Œä½†æ˜¯å¦‚æœçœ‹çœ‹å®ƒçš„æºç æ˜¯ä¸æ˜¯ä¼šè®©æˆ‘å¯¹å®ƒçš„å°è±¡æ›´æ·±å‘¢ï¼Ÿ è¯´å¹²å°±å¹²ï¼Œæ™šä¸Šå›å®¶å°±ä» GitHub clone äº†æºç åœ¨æœ¬åœ°ï¼Œé‚£æ—¶åˆšå¥½å›å®¶ï¼Œå°±åœ¨ç«è½¦ä¸Šç›´æ¥ç”¨ VS code çœ‹äº†ä¼šæºç ï¼Œä¹Ÿæ²¡æœ‰åœ¨ ide é‡Œ debug èµ·æ¥ã€‚ å†™è¿™ç¯‡æ–‡ç« çš„æ—¶å€™å·²ç»æŠŠ Elasticsearch çš„æ•´ä¸ªå¯åŠ¨æµç¨‹ï¼ˆåŠ è½½è¯»å–é…ç½®ã€åŠ è½½æ’ä»¶ç­‰ï¼‰ã€å¦‚ä½•æ”¯æŒ REST API çœ‹äº†ä¸‹ï¼Œåé¢ä¼šåœ¨ä¸‹ç­åå›å®¶ç»§ç»­é˜…è¯»æºç ï¼Œç»§ç»­åˆ†äº«æˆ‘çš„æºç è§£æçš„ã€‚ æœ‰æƒ³æ³•å°±å»å¹²ï¼Œä¸å°è¯•ä¸‹ï¼Œæ€ä¹ˆçŸ¥é“é€‚ä¸é€‚åˆä½ ï¼Ÿ æ€»ç»“å…¶å®é˜…è¯»æºç çš„ä¸»è¦åŸå› è¿˜æ˜¯è‡ªå·±æ„Ÿå…´è¶£ï¼›å¦å¤–å°±æ˜¯è¿™ä¸œè¥¿ç°åœ¨é¡¹ç›®é‡Œç¡®å®ä¹Ÿç”¨åˆ°äº†ï¼Œå¦‚æœæˆ‘å¯¹æºç ç†Ÿæ‚‰çš„è¯å¯èƒ½ä¼šå¯¹æˆ‘çš„ç†è§£ä¼šæ›´åŠ é€å½»ç‚¹ï¼›è¿˜æœ‰å°±æ˜¯ Elasticsearch ç¡®å®ç«ï¼Œå…¬å¸å‡ ä¹éƒ½ç”¨çš„ï¼Œæ‰€ä»¥å­¦ä¹ ä¸‹è¿˜æ˜¯æœ‰å¿…è¦çš„ã€‚","tags":[{"name":"ElasticSearch","slug":"ElasticSearch","permalink":"http://yoursite.com/tags/ElasticSearch/"}]},{"title":"æ¸£æ¸£èœé¸¡çš„èš‚èšé‡‘æœé¢è¯•ç»å†(äºŒ)","date":"2018-07-30T16:00:00.000Z","path":"2018/07/31/alipay02/","text":"èš‚èšé‡‘æœç”µè¯äºŒé¢ï¼ˆ85 åˆ†é’Ÿï¼‰1ã€è‡ªæˆ‘ä»‹ç»ã€å·¥ä½œç»å†ã€æŠ€æœ¯æ ˆ 2ã€é¡¹ç›®ä¸­ä½ å­¦åˆ°äº†ä»€ä¹ˆæŠ€æœ¯ï¼Ÿï¼ˆæŠŠä¸‰é¡¹ç›®å…·ä½“æè¿°äº†å¾ˆä¹…ï¼‰ 3ã€å¾®æœåŠ¡åˆ’åˆ†çš„ç²’åº¦ 4ã€å¾®æœåŠ¡çš„é«˜å¯ç”¨æ€ä¹ˆä¿è¯çš„ï¼Ÿ 5ã€å¸¸ç”¨çš„è´Ÿè½½å‡è¡¡ï¼Œè¯¥æ€ä¹ˆç”¨ï¼Œä½ èƒ½è¯´ä¸‹å—ï¼Ÿ 6ã€ç½‘å…³èƒ½å¤Ÿä¸ºåç«¯æœåŠ¡å¸¦æ¥å“ªäº›å¥½å¤„ï¼Ÿ 7ã€Spring Bean çš„ç”Ÿå‘½å‘¨æœŸ 8ã€xml ä¸­é…ç½®çš„ initã€destroy æ–¹æ³•æ€ä¹ˆå¯ä»¥åšåˆ°è°ƒç”¨å…·ä½“çš„æ–¹æ³•ï¼Ÿ 9ã€åå°„çš„æœºåˆ¶ 10ã€Object ç±»ä¸­çš„æ–¹æ³• 11ã€hashcode å’Œ equals æ–¹æ³•å¸¸ç”¨åœ°æ–¹ 12ã€å¯¹è±¡æ¯”è¾ƒæ˜¯å¦ç›¸åŒ 13ã€hashmap put æ–¹æ³•å­˜æ”¾çš„æ—¶å€™æ€ä¹ˆåˆ¤æ–­æ˜¯å¦æ˜¯é‡å¤çš„ 14ã€Object toString æ–¹æ³•å¸¸ç”¨çš„åœ°æ–¹ï¼Œä¸ºä»€ä¹ˆè¦é‡å†™è¯¥æ–¹æ³• 15ã€Set å’Œ List åŒºåˆ«ï¼Ÿ 16ã€ArrayList å’Œ LinkedList åŒºåˆ« 17ã€å¦‚æœå­˜å–ç›¸åŒçš„æ•°æ®ï¼ŒArrayList å’Œ LinkedList è°å ç”¨ç©ºé—´æ›´å¤§ï¼Ÿ 18ã€Set å­˜çš„é¡ºåºæ˜¯æœ‰åºçš„å—ï¼Ÿ 19ã€å¸¸è§ Set çš„å®ç°æœ‰å“ªäº›ï¼Ÿ 20ã€TreeSet å¯¹å­˜å…¥å¯¹æ•°æ®æœ‰ä»€ä¹ˆè¦æ±‚å‘¢ï¼Ÿ 21ã€HashSet çš„åº•å±‚å®ç°å‘¢ 22ã€TreeSet åº•å±‚æºç æœ‰çœ‹è¿‡å—ï¼Ÿ 23ã€HashSet æ˜¯ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Ÿä¸ºä»€ä¹ˆä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Ÿ 24ã€Java ä¸­æœ‰å“ªäº›çº¿ç¨‹å®‰å…¨çš„ Mapï¼Ÿ 25ã€Concurrenthashmap æ˜¯æ€ä¹ˆåšåˆ°çº¿ç¨‹å®‰å…¨çš„ï¼Ÿ 26ã€HashTable ä½ äº†è§£è¿‡å—ï¼Ÿ 27ã€å¦‚ä½•ä¿è¯çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Ÿ 28ã€synchronizedã€lock 29ã€volatile çš„åŸå­æ€§é—®é¢˜ï¼Ÿä¸ºä»€ä¹ˆ i++ è¿™ç§ä¸æ”¯æŒåŸå­æ€§ï¼Ÿä»è®¡ç®—æœºåŸç†çš„è®¾è®¡æ¥è®²ä¸‹ä¸èƒ½ä¿è¯åŸå­æ€§çš„åŸå›  30ã€happens before åŸç† 31ã€cas æ“ä½œ 32ã€lock å’Œ synchronized çš„åŒºåˆ«ï¼Ÿ 33ã€å…¬å¹³é”å’Œéå…¬å¹³é” 34ã€Java è¯»å†™é” 35ã€è¯»å†™é”è®¾è®¡ä¸»è¦è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿ 36ã€ä½ é¡¹ç›®é™¤äº†å†™ Java ä»£ç ï¼Œè¿˜æœ‰å‰ç«¯ä»£ç ï¼Œé‚£ä½ çŸ¥é“å‰ç«¯æœ‰å“ªäº›æ¡†æ¶å—ï¼Ÿ 37ã€MySQL åˆ†é¡µæŸ¥è¯¢è¯­å¥ 38ã€MySQL äº‹åŠ¡ç‰¹æ€§å’Œéš”ç¦»çº§åˆ« 39ã€ä¸å¯é‡å¤è¯»ä¼šå‡ºç°åœ¨ä»€ä¹ˆåœºæ™¯ï¼Ÿ 40ã€sql having çš„ä½¿ç”¨åœºæ™¯ 41ã€å‰ç«¯æµè§ˆå™¨åœ°å€çš„ä¸€ä¸ª http è¯·æ±‚åˆ°åç«¯æ•´ä¸ªæµç¨‹æ˜¯æ€ä¹ˆæ ·ï¼Ÿèƒ½å¤Ÿè¯´ä¸‹å—ï¼Ÿ 42ã€http é»˜è®¤ç«¯å£ï¼Œhttps é»˜è®¤ç«¯å£ 43ã€DNS ä½ çŸ¥é“æ˜¯å¹²å˜›çš„å—ï¼Ÿ 44ã€ä½ ä»¬å¼€å‘ç”¨çš„ ide æ˜¯å•¥ï¼Ÿä½ èƒ½è¯´ä¸‹ idea çš„å¸¸ç”¨å‡ ä¸ªå¿«æ·é”®å§ï¼Ÿ 45ã€ä»£ç ç‰ˆæœ¬ç®¡ç†ä½ ä»¬ç”¨çš„æ˜¯å•¥ï¼Ÿ 46ã€git rebase å’Œ merge æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ 47ã€ä½ ä»¬å…¬å¸åŠ ç­å¤šå—ï¼Ÿ 48ã€åé¢ä¸€èµ·èŠ high äº†ï¼Œä¹‹é—´æ‰¯äº†äº›è›‹ï¼Œå“ˆå“ˆå“ˆ ç›¸å…³æ–‡ç« ï¼š1ã€ç§‹æ‹›ç¬¬ä¸€ç«™ â€”â€” äºšä¿¡ç§‘æŠ€ 2ã€ç§‹æ‹›ç¬¬äºŒç«™ â€”â€” å†…æ¨çˆ±å¥‡è‰º 3ã€ç§‹æ‹›ç¬¬ä¸‰ç«™ â€”â€” å†…æ¨é˜¿é‡Œï¼ˆä¸€é¢ï¼‰ 4ã€é‚£äº›å¹´æˆ‘çœ‹è¿‡çš„ä¹¦ â€”â€” è‡´æ•¬æˆ‘çš„å¤§å­¦ç”Ÿæ´» â€”â€” Say Good Bye ï¼ 5ã€é¢è¯•è¿‡é˜¿é‡Œç­‰äº’è”ç½‘å¤§å…¬å¸ï¼Œæˆ‘çŸ¥é“äº†è¿™äº›å¥—è·¯ 6ã€æ¸£æ¸£èœé¸¡çš„æœ‰èµé¢è¯•ç»å†ï¼ˆä¸€ï¼‰ 7ã€æ¸£æ¸£èœé¸¡çš„èš‚èšé‡‘æœé¢è¯•ç»å†ï¼ˆä¸€ï¼‰ æœ€åæœ¬åœ°åœ°å€ï¼šhttp://www.54tianzhisheng.cn/2018/07/31/alipay02 ï¼Œè½¬è½½è¯·æˆæƒï¼Œå¦åˆ™ç¦æ­¢è½¬è½½ï¼ æœ¬æ–‡é¦–å‘åœ¨æˆ‘çš„çŸ¥è¯†æ˜Ÿçƒï¼Œæœ€è¿‘è‡ªå·±ä¸€ç›´åœ¨å†™å‰æ®µæ—¶é—´çš„æ‰€æœ‰é¢è¯•æƒ…å†µï¼Œå·²ç»åˆ†äº«åœ¨æˆ‘çš„çŸ¥è¯†æ˜Ÿçƒï¼Œå¦‚æœæ„Ÿå…´è¶£ï¼Œå¯ä»¥åŠ å…¥æˆ‘çš„çŸ¥è¯†æ˜Ÿçƒï¼","tags":[{"name":"é¢ç»","slug":"é¢ç»","permalink":"http://yoursite.com/tags/é¢ç»/"}]},{"title":"æ¸£æ¸£èœé¸¡çš„èš‚èšé‡‘æœé¢è¯•ç»å†(ä¸€)","date":"2018-07-29T16:00:00.000Z","path":"2018/07/30/alipay01/","text":"èš‚èšé‡‘æœç”µè¯ä¸€é¢1ã€è‡ªæˆ‘ä»‹ç»ã€è‡ªå·±åšçš„é¡¹ç›®å’ŒæŠ€æœ¯é¢†åŸŸ 2ã€é¡¹ç›®ä¸­çš„ç›‘æ§ï¼šé‚£ä¸ªç›‘æ§æŒ‡æ ‡å¸¸è§çš„å“ªäº›ï¼Ÿ 3ã€å¾®æœåŠ¡æ¶‰åŠåˆ°çš„æŠ€æœ¯ä»¥åŠéœ€è¦æ³¨æ„çš„é—®é¢˜æœ‰å“ªäº›ï¼Ÿ 4ã€æ³¨å†Œä¸­å¿ƒä½ äº†è§£äº†å“ªäº›ï¼Ÿ 5ã€consul çš„å¯é æ€§ä½ äº†è§£å—ï¼Ÿ 6ã€consul çš„æœºåˆ¶ä½ æœ‰æ²¡æœ‰å…·ä½“æ·±å…¥è¿‡ï¼Ÿæœ‰æ²¡æœ‰å’Œå…¶ä»–çš„æ³¨å†Œä¸­å¿ƒå¯¹æ¯”è¿‡ï¼Ÿ 7ã€é¡¹ç›®ç”¨ Spring æ¯”è¾ƒå¤šï¼Œæœ‰æ²¡æœ‰äº†è§£ Spring çš„åŸç†ï¼ŸAOP å’Œ IOC çš„åŸç† 8ã€Spring Booté™¤äº†è‡ªåŠ¨é…ç½®ï¼Œç›¸æ¯”ä¼ ç»Ÿçš„ Spring æœ‰ä»€ä¹ˆå…¶ä»–çš„åŒºåˆ«ï¼Ÿ 9ã€Spring Cloud æœ‰äº†è§£å¤šå°‘ï¼Ÿ 10ã€Spring Bean çš„ç”Ÿå‘½å‘¨æœŸ 11ã€HashMap å’Œ hashTable åŒºåˆ«ï¼Ÿ 12ã€Object çš„ hashcode æ–¹æ³•é‡å†™äº†ï¼Œequals æ–¹æ³•è¦ä¸è¦æ”¹ï¼Ÿ 13ã€Hashmap çº¿ç¨‹ä¸å®‰å…¨çš„å‡ºç°åœºæ™¯ 14ã€çº¿ä¸ŠæœåŠ¡ CPU å¾ˆé«˜è¯¥æ€ä¹ˆåšï¼Ÿæœ‰å“ªäº›æªæ–½å¯ä»¥æ‰¾åˆ°é—®é¢˜ 15ã€JDK ä¸­æœ‰å“ªå‡ ä¸ªçº¿ç¨‹æ± ï¼Ÿé¡ºå¸¦æŠŠçº¿ç¨‹æ± è®²äº†ä¸ªé 16ã€SQL ä¼˜åŒ–çš„å¸¸è§æ–¹æ³•æœ‰å“ªäº› 17ã€SQL ç´¢å¼•çš„é¡ºåºï¼Œå­—æ®µçš„é¡ºåº 18ã€æŸ¥çœ‹ SQL æ˜¯ä¸æ˜¯ä½¿ç”¨äº†ç´¢å¼•ï¼Ÿï¼ˆæœ‰ä»€ä¹ˆå·¥å…·ï¼‰ 19ã€TCP å’Œ UDP çš„åŒºåˆ«ï¼ŸTCP æ•°æ®ä¼ è¾“è¿‡ç¨‹ä¸­æ€ä¹ˆåšåˆ°å¯é çš„ï¼Ÿ 20ã€è¯´ä¸‹ä½ çŸ¥é“çš„æ’åºç®—æ³•å§ 21ã€æŸ¥æ‰¾ä¸€ä¸ªæ•°ç»„çš„ä¸­ä½æ•°ï¼Ÿ 22ã€ä½ æœ‰ä»€ä¹ˆé—®é¢˜æƒ³é—®æˆ‘çš„å—ï¼Ÿ ç›¸å…³æ–‡ç« ï¼š1ã€ç§‹æ‹›ç¬¬ä¸€ç«™ â€”â€” äºšä¿¡ç§‘æŠ€ 2ã€ç§‹æ‹›ç¬¬äºŒç«™ â€”â€” å†…æ¨çˆ±å¥‡è‰º 3ã€ç§‹æ‹›ç¬¬ä¸‰ç«™ â€”â€” å†…æ¨é˜¿é‡Œï¼ˆä¸€é¢ï¼‰ 4ã€é‚£äº›å¹´æˆ‘çœ‹è¿‡çš„ä¹¦ â€”â€” è‡´æ•¬æˆ‘çš„å¤§å­¦ç”Ÿæ´» â€”â€” Say Good Bye ï¼ 5ã€é¢è¯•è¿‡é˜¿é‡Œç­‰äº’è”ç½‘å¤§å…¬å¸ï¼Œæˆ‘çŸ¥é“äº†è¿™äº›å¥—è·¯ 6ã€æ¸£æ¸£èœé¸¡çš„æœ‰èµé¢è¯•ç»å†ï¼ˆä¸€ï¼‰ æœ€åæœ¬åœ°åœ°å€ï¼šhttp://www.54tianzhisheng.cn/2018/07/30/alipay01 ï¼Œè½¬è½½è¯·æˆæƒï¼Œå¦åˆ™ç¦æ­¢è½¬è½½ï¼ æœ¬æ–‡é¦–å‘åœ¨æˆ‘çš„çŸ¥è¯†æ˜Ÿçƒï¼Œæœ€è¿‘è‡ªå·±ä¸€ç›´åœ¨å†™å‰æ®µæ—¶é—´çš„æ‰€æœ‰é¢è¯•æƒ…å†µï¼Œå·²ç»åˆ†äº«åœ¨æˆ‘çš„çŸ¥è¯†æ˜Ÿçƒï¼Œå¦‚æœæ„Ÿå…´è¶£ï¼Œå¯ä»¥åŠ å…¥æˆ‘çš„çŸ¥è¯†æ˜Ÿçƒï¼","tags":[{"name":"é¢ç»","slug":"é¢ç»","permalink":"http://yoursite.com/tags/é¢ç»/"}]},{"title":"æ¸£æ¸£èœé¸¡çš„æœ‰èµé¢è¯•ç»å†ï¼ˆä¸€ï¼‰","date":"2018-07-11T16:00:00.000Z","path":"2018/07/12/youzan/","text":"å‡ºå»é¢è¯•çš„è¯è¿˜æ˜¯å¾—å¥½å¥½å‡†å¤‡ï¼Œä¸ç„¶ä¼šè¢«è™çš„æœ‰ç‚¹æƒ¨ï¼ æœ‰èµï¼ˆæ¡†æ¶ç»„ï¼‰å››æœˆä»½é¢è¯•æœ‰èµçš„æ—¶å€™ï¼Œè‡ªå·±è¿˜åœ¨å®ä¹ ï¼Œæ‰€ä»¥ä¹Ÿæ²¡æœ‰å¤ä¹ ï¼Œæ˜¯åœ¨ Boss ç›´è˜ä¸ŠæŠ•çš„ï¼Œå½“æ—¶çœ‹åˆ°äº†æœ‰èµçš„ 2018 å±Šæ˜¥æ‹›ï¼Œå°±æŠ•äº†ä¸‹ï¼Œç„¶åä¸çŸ¥é“æ€ä¹ˆå°±è¢«æ¨åˆ°äº†æ¡†æ¶ç»„ï¼Œç»“æœåé¢å°±æ„Ÿè§‰è‡ªå·±è¢«è™çš„å¯æƒ¨äº†ã€‚ å…³æ³¨æˆ‘ è½¬è½½è¯·åŠ¡å¿…æ³¨æ˜åŸåˆ›åœ°å€ä¸ºï¼šhttp://www.54tianzhisheng.cn/2018/07/12/youzan/ ç”µè¯ä¸€é¢å¥½åƒæ˜¯æ¸…æ˜èŠ‚è¿˜æ˜¯äº”ä¸€åŠ³åŠ¨èŠ‚æ¥ç€ï¼Œæˆ‘è¿˜åœ¨ç¡è§‰ï¼Œå°±æ¥åˆ°ä¸€é¢é¢è¯•å®˜çš„ç”µè¯ï¼Œè¯´ç°åœ¨æœ‰æ—¶é—´å—ï¼Œèƒ½å¤Ÿæ¥å—ä¸‹ç”µè¯é¢è¯•å—ï¼Ÿæˆ‘å‹’ä¸ªå»ï¼Œä»Šå¤©è¿‡èŠ‚ã€æˆ‘è¢«ç”µè¯åµé†’çš„ï¼Œç°åœ¨äººéƒ½æ²¡æ¸…é†’ã€è¿™é¢è¯•é‚£è‚¯å®šå¾—ä¸€é¢å°±æŒ‚äº†ï¼Œæ‰€ä»¥å°±è€å®å¾—è¯´ç°åœ¨è¿˜æ˜¯ä¸æ–¹ä¾¿å‘¢ï¼Œçº¦äº†å‘¨ä¸€ä¸Šåˆ 10 ç‚¹é¢è¯•ã€‚ å‘¨ä¸€ 10 ç‚¹é¢è¯•å®˜å‡†æ—¶æ‰“ç”µè¯è¿‡æ¥äº†ï¼ ä»¥ä¸‹æ˜¯é¢è¯•çš„é—®é¢˜ï¼š 1ã€è‡ªæˆ‘ä»‹ç» 2ã€Map çš„åº•å±‚ç»“æ„ï¼Ÿï¼ˆHashMapï¼‰ 3ã€çº¿ç¨‹å®‰å…¨çš„ Map ï¼ˆconcurrentHashMapï¼‰ç®€å•çš„è¯´äº†ä¸‹è¿™ä¸¤ 1ã€‚7 å’Œ 1.8 çš„åŒºåˆ«ï¼Œæœ¬æƒ³é—®ä¸‹è¦ä¸è¦æ·±å…¥çš„è®²ä¸‹ï¼ˆæºç çº§åˆ«ï¼‰ï¼Œç»“æœé¢è¯•å®˜è¯´ä¸ç”¨äº†ã€‚ 4ã€é¡¹ç›® MySQL çš„æ•°æ®é‡å’Œå¹¶å‘é‡æœ‰å¤šå¤§ï¼Ÿ 5ã€ä½ å¯¹æ•°æ®åº“äº†è§£å¤šå°‘ï¼Ÿ 6ã€ä½ è¯´ä¸‹æ•°æ®åº“çš„ç´¢å¼•å®ç°å’Œéä¸»é”®çš„äºŒçº§ç´¢å¼• 7ã€é¡¹ç›®ç”¨çš„æ˜¯ SpringBoot ï¼Œä½ èƒ½è¯´ä¸‹ Spring Boot ä¸ Spring çš„åŒºåˆ«å—ï¼Ÿ 8ã€SpringBoot çš„è‡ªåŠ¨é…ç½®æ˜¯æ€ä¹ˆåšçš„ï¼Ÿ 9ã€MyBatis å®šä¹‰çš„æ¥å£ï¼Œæ€ä¹ˆæ‰¾åˆ°å®ç°çš„ï¼Ÿ 10ã€Java å†…å­˜ç»“æ„ 11ã€å¯¹è±¡æ˜¯å¦å¯ GCï¼Ÿ 12ã€Minor GC å’Œ Full GC 13ã€åƒåœ¾å›æ”¶ç®—æ³• 14ã€åƒåœ¾å›æ”¶å™¨ G1 15ã€é¡¹ç›®é‡Œç”¨è¿‡ ElasticSearch å’Œ Hbaseï¼Œæœ‰æ·±å…¥äº†è§£ä»–ä»¬çš„è°ƒä¼˜æŠ€å·§å—ï¼Ÿ 16ã€Spring RestTemplate çš„å…·ä½“å®ç° 17ã€æè¿°ä¸‹ç½‘é¡µä¸€ä¸ª Http è¯·æ±‚ï¼Œåˆ°åç«¯çš„æ•´ä¸ªè¯·æ±‚è¿‡ç¨‹ 18ã€å¤šçº¿ç¨‹çš„å¸¸ç”¨æ–¹æ³•å’Œæ¥å£ç±»åŠçº¿ç¨‹æ± çš„æœºåˆ¶ 19ã€æ€»ç»“æˆ‘çš„ Java åŸºç¡€è¿˜æ˜¯ä¸é”™ï¼Œä½†æ˜¯ä¸€äº›ä¸»æµçš„æ¡†æ¶æºç è¿˜æ˜¯å¤„åœ¨ä½¿ç”¨çš„çŠ¶æ€ï¼Œéœ€è¦ç»§ç»­å»çœ‹æºç  20ã€æ­»é” 21ã€è‡ªå·±ç ”ç©¶æ¯”è¾ƒæ–°çš„æŠ€æœ¯ï¼Œè¯´ä¸‹æˆæœï¼ 22ã€ä½ æœ‰ä»€ä¹ˆæƒ³é—®çš„ï¼Ÿæˆ‘å°±é—®äº†ä¸‹å…¬å¸é‚£è¾¹çš„æƒ…å†µï¼Œè¿™ä¸ªè‡ªç”±å‘æŒ¥ï¼ æœ€åæˆ‘çŸ¥é“æœ‰äºŒé¢çš„é¢è¯•æœºä¼šäº†ã€‚ 10 æ¥åˆ†é’Ÿä¸åˆ°ï¼Œå°±å†æ¬¡æ‰“ç”µè¯è¿‡æ¥çº¦äº†æ˜æ—©ä¸Šåˆ 10 ç‚¹çš„è§†é¢‘é¢è¯•ã€‚ è§†é¢‘äºŒé¢äºŒé¢é¢è¯•å®˜å…ˆæ‰“ç”µè¯è¿‡æ¥ï¼Œç„¶ååŠ äº†ä¸ªå¾®ä¿¡ï¼Œå¼€å§‹å¾®ä¿¡è§†é¢‘é¢è¯• è¿™ä¸ªé¢è¯•æˆ‘ä¹Ÿä¸å¤ªè®°å¾—å…·ä½“é¢è¯•é¢˜ç›®äº†ï¼Œä¸‹é¢å†™çš„æ˜¯å¤§æ¦‚æ–¹å‘çš„ï¼š 1ã€HashMapï¼Œæºç çº§åˆ«çš„é—®äº†ï¼ŒåŒ…æ‹¬ä¸ºä»€ä¹ˆçº¿ç¨‹ä¸å®‰å…¨ 2ã€æ­»é” 3ã€Synchronized å’Œ ReentrantLock é”æœºåˆ¶ï¼Œæ€ä¹ˆåˆ¤æ–­é‡å…¥é”çš„ï¼Œä¼šä¸ä¼šæ˜¯æ­»é”ï¼Ÿ 4ã€è¿›ç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ«ï¼Ÿ 5ã€è¿›ç¨‹ä¹‹é—´å¦‚ä½•ä¿è¯åŒæ­¥ï¼Ÿ 6ã€åˆ†å¸ƒå¼é” 7ã€å¯¹è±¡ GC 8ã€åƒåœ¾å›æ”¶ç®—æ³• 9ã€JVM å‚æ•° 10ã€OOM å‡ºç°çš„æœ‰å“ªäº›åœºæ™¯ï¼Ÿä¸ºä»€ä¹ˆä¼šå‘ç”Ÿï¼Ÿ 11ã€JVM å†…å­˜ç»“æ„è¯´ä¸‹å§ 12ã€å †å’Œæ ˆçš„å…±äº«é—®é¢˜ï¼Ÿ 13ã€æœ‰æ¯”è¾ƒè¿‡ Http å’Œ RPC å—ï¼Ÿ 14ã€HttpClient ä½ è¯´è¯´é‡Œé¢çš„å…·ä½“å®ç°å§ï¼Ÿï¼ˆæ¶‰åŠäº†å“ªäº›ä¸œè¥¿ï¼‰ 15ã€é‚£è¦ä½ è®¾è®¡ä¸€ä¸ªé«˜æ€§èƒ½çš„ Http ï¼Œä½ ä¼šæ€ä¹ˆè®¾è®¡ï¼Ÿ äºŒé¢å¾®ä¿¡è§†é¢‘é¢è¯•åªè®°å¾—è¿™ä¹ˆå¤šäº†ã€‚ æœ¬æ–‡é¦–å‘åœ¨æˆ‘çš„çŸ¥è¯†æ˜Ÿçƒï¼Œæœ€è¿‘è‡ªå·±ä¸€ç›´åœ¨å†™å‰æ®µæ—¶é—´çš„æ‰€æœ‰é¢è¯•æƒ…å†µï¼Œåé¢ä¼šä¸€ç¯‡ä¸€ç¯‡åˆ†äº«åœ¨æˆ‘çš„çŸ¥è¯†æ˜Ÿçƒçš„ï¼Œå¦‚æœæ„Ÿå…´è¶£ï¼Œå¯ä»¥åŠ å…¥æˆ‘çš„çŸ¥è¯†æ˜Ÿçƒï¼ çŸ¥è¯†æ˜Ÿçƒæ›´å¤šé¢ç»æ–‡ç« ï¼š 1ã€èš‚èšé‡‘æœç”µè¯ä¸€é¢ 2ã€èš‚èšé‡‘æœç”µè¯äºŒé¢â€”â€”åé¢èŠçš„æœ‰ç‚¹high 3ã€club factory é¢ç»åˆ†äº« 4ã€ä½œä¸ºé¢è¯•å®˜å¾—åˆ°çš„ç»éªŒ 5ã€å²ä¸Šæœ€å¼ºæœ€å…¨é¢ç»åˆé›† 6ã€å…¬å¸éœ€è¦ä»€ä¹ˆæ ·çš„äºº 7ã€å¦‚ä½•ä»‹ç»é¡¹ç›®","tags":[{"name":"é¢ç»","slug":"é¢ç»","permalink":"http://yoursite.com/tags/é¢ç»/"}]},{"title":"20 ä¸ªæ¡ˆä¾‹æ•™ä½ åœ¨ Java 8 ä¸­å¦‚ä½•å¤„ç†æ—¥æœŸå’Œæ—¶é—´?","date":"2018-06-19T16:00:00.000Z","path":"2018/06/20/java-8-date/","text":"å‰è¨€å‰é¢ä¸€ç¯‡æ–‡ç« å†™äº†ã€ŠSimpleDateFormat å¦‚ä½•å®‰å…¨çš„ä½¿ç”¨ï¼Ÿã€‹, é‡Œé¢ä»‹ç»äº† SimpleDateFormat å¦‚ä½•å¤„ç†æ—¥æœŸï¼æ—¶é—´ï¼Œä»¥åŠå¦‚ä½•ä¿è¯çº¿ç¨‹å®‰å…¨ï¼ŒåŠå…¶ä»‹ç»äº†åœ¨ Java 8 ä¸­çš„å¤„ç†æ—¶é—´ï¼æ—¥æœŸé»˜è®¤å°±çº¿ç¨‹å®‰å…¨çš„ DateTimeFormatter ç±»ã€‚é‚£ä¹ˆ Java 8 ä¸­è¯¥æ€ä¹ˆæ ·å¤„ç†ç”Ÿæ´»ä¸­å¸¸è§çš„ä¸€äº›æ—¥æœŸï¼æ—¶é—´å‘¢ï¼Ÿæ¯”å¦‚ï¼šè®¡ç®—ä¸€å‘¨åçš„æ—¥æœŸï¼›è®¡ç®—ä¸€å¹´å‰æˆ–ä¸€å¹´åçš„æ—¥æœŸï¼›æ£€æŸ¥é—°å¹´ç­‰ã€‚ æ¥ä¸‹æ¥åˆ›å»ºäº† 20 ä¸ªåŸºäºä»»åŠ¡çš„å®ä¾‹æ¥å­¦ä¹  Java 8 çš„æ–°ç‰¹æ€§ã€‚ä»æœ€ç®€å•åˆ›å»ºå½“å¤©çš„æ—¥æœŸå¼€å§‹ï¼Œç„¶ååˆ›å»ºæ—¶é—´åŠæ—¶åŒºï¼Œæ¥ç€æ¨¡æ‹Ÿä¸€ä¸ªæ—¥æœŸæé†’åº”ç”¨ä¸­çš„ä»»åŠ¡â€”â€”è®¡ç®—é‡è¦æ—¥æœŸçš„åˆ°æœŸå¤©æ•°ï¼Œä¾‹å¦‚ç”Ÿæ—¥ã€çºªå¿µæ—¥ã€è´¦å•æ—¥ã€ä¿è´¹åˆ°æœŸæ—¥ã€ä¿¡ç”¨å¡è¿‡æœŸæ—¥ç­‰ã€‚ å…³æ³¨æˆ‘ è½¬è½½è¯·åŠ¡å¿…æ³¨æ˜åŸåˆ›åœ°å€ä¸ºï¼šhttp://www.54tianzhisheng.cn/2018/06/20/java-8-date/ ç¤ºä¾‹ 1ã€åœ¨ Java 8 ä¸­è·å–ä»Šå¤©çš„æ—¥æœŸJava 8 ä¸­çš„ LocalDate ç”¨äºè¡¨ç¤ºå½“å¤©æ—¥æœŸã€‚å’Œ java.util.Date ä¸åŒï¼Œå®ƒåªæœ‰æ—¥æœŸï¼Œä¸åŒ…å«æ—¶é—´ã€‚å½“ä½ ä»…éœ€è¦è¡¨ç¤ºæ—¥æœŸæ—¶å°±ç”¨è¿™ä¸ªç±»ã€‚ 12LocalDate now = LocalDate.now();System.out.println(now); ç»“æœæ˜¯ï¼š 12018-06-20 ä¸Šé¢çš„ä»£ç åˆ›å»ºäº†å½“å¤©çš„æ—¥æœŸï¼Œä¸å«æ—¶é—´ä¿¡æ¯ã€‚æ‰“å°å‡ºçš„æ—¥æœŸæ ¼å¼éå¸¸å‹å¥½ï¼Œä¸åƒè€çš„ Date ç±»æ‰“å°å‡ºä¸€å †æ²¡æœ‰æ ¼å¼åŒ–çš„ä¿¡æ¯ã€‚ ç¤ºä¾‹ 2ã€åœ¨ Java 8 ä¸­è·å–å¹´ã€æœˆã€æ—¥ä¿¡æ¯LocalDate ç±»æä¾›äº†è·å–å¹´ã€æœˆã€æ—¥çš„å¿«æ·æ–¹æ³•ï¼Œå…¶å®ä¾‹è¿˜åŒ…å«å¾ˆå¤šå…¶å®ƒçš„æ—¥æœŸå±æ€§ã€‚é€šè¿‡è°ƒç”¨è¿™äº›æ–¹æ³•å°±å¯ä»¥å¾ˆæ–¹ä¾¿çš„å¾—åˆ°éœ€è¦çš„æ—¥æœŸä¿¡æ¯ï¼Œä¸ç”¨åƒä»¥å‰ä¸€æ ·éœ€è¦ä¾èµ– java.util.Calendar ç±»äº† 12345LocalDate now = LocalDate.now();int year = now.getYear();int monthValue = now.getMonthValue();int dayOfMonth = now.getDayOfMonth();System.out.printf(\"year = %d, month = %d, day = %d\", year, monthValue, dayOfMonth); ç»“æœæ˜¯ï¼š 1year = 2018, month = 6, day = 20 ç¤ºä¾‹ 3ã€åœ¨ Java 8 ä¸­å¤„ç†ç‰¹å®šæ—¥æœŸåœ¨ç¬¬ä¸€ä¸ªä¾‹å­é‡Œï¼Œæˆ‘ä»¬é€šè¿‡é™æ€å·¥å‚æ–¹æ³• now() éå¸¸å®¹æ˜“åœ°åˆ›å»ºäº†å½“å¤©æ—¥æœŸï¼Œä½ è¿˜å¯ä»¥è°ƒç”¨å¦ä¸€ä¸ªæœ‰ç”¨çš„å·¥å‚æ–¹æ³•LocalDate.of() åˆ›å»ºä»»æ„æ—¥æœŸï¼Œ è¯¥æ–¹æ³•éœ€è¦ä¼ å…¥å¹´ã€æœˆã€æ—¥åšå‚æ•°ï¼Œè¿”å›å¯¹åº”çš„ LocalDate å®ä¾‹ã€‚è¿™ä¸ªæ–¹æ³•çš„å¥½å¤„æ˜¯æ²¡å†çŠ¯è€ API çš„è®¾è®¡é”™è¯¯ï¼Œæ¯”å¦‚å¹´åº¦èµ·å§‹äº 1900ï¼Œæœˆä»½æ˜¯ä» 0 å¼€å§‹ç­‰ç­‰ã€‚æ—¥æœŸæ‰€è§å³æ‰€å¾—ï¼Œå°±åƒä¸‹é¢è¿™ä¸ªä¾‹å­è¡¨ç¤ºäº† 6 æœˆ 20 æ—¥ï¼Œæ²¡æœ‰ä»»ä½•éšè—æœºå…³ã€‚ 12LocalDate date = LocalDate.of(2018, 06, 20);System.out.println(date); å¯ä»¥çœ‹åˆ°åˆ›å»ºçš„æ—¥æœŸå®Œå…¨ç¬¦åˆé¢„æœŸï¼Œä¸å†™å…¥çš„ 2018 å¹´ 6 æœˆ 20 æ—¥å®Œå…¨ä¸€è‡´ã€‚ ç¤ºä¾‹ 4ã€åœ¨ Java 8 ä¸­åˆ¤æ–­ä¸¤ä¸ªæ—¥æœŸæ˜¯å¦ç›¸ç­‰ç°å®ç”Ÿæ´»ä¸­æœ‰ä¸€ç±»æ—¶é—´å¤„ç†å°±æ˜¯åˆ¤æ–­ä¸¤ä¸ªæ—¥æœŸæ˜¯å¦ç›¸ç­‰ã€‚ä½ å¸¸å¸¸ä¼šæ£€æŸ¥ä»Šå¤©æ˜¯ä¸æ˜¯ä¸ªç‰¹æ®Šçš„æ—¥å­ï¼Œæ¯”å¦‚ç”Ÿæ—¥ã€çºªå¿µæ—¥æˆ–éäº¤æ˜“æ—¥ã€‚è¿™æ—¶å°±éœ€è¦æŠŠæŒ‡å®šçš„æ—¥æœŸä¸æŸä¸ªç‰¹å®šæ—¥æœŸåšæ¯”è¾ƒï¼Œä¾‹å¦‚åˆ¤æ–­è¿™ä¸€å¤©æ˜¯å¦æ˜¯å‡æœŸã€‚ä¸‹é¢è¿™ä¸ªä¾‹å­ä¼šå¸®åŠ©ä½ ç”¨ Java 8 çš„æ–¹å¼å»è§£å†³ï¼Œä½ è‚¯å®šå·²ç»æƒ³åˆ°äº†ï¼ŒLocalDate é‡è½½äº† equal æ–¹æ³•ï¼Œè¯·çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š 12345LocalDate now = LocalDate.now();LocalDate date = LocalDate.of(2018, 06, 20);if (date.equals(now)) &#123; System.out.println(\"åŒä¸€å¤©\");&#125; è¿™ä¸ªä¾‹å­ä¸­æˆ‘ä»¬æ¯”è¾ƒçš„ä¸¤ä¸ªæ—¥æœŸç›¸åŒã€‚æ³¨æ„ï¼Œå¦‚æœæ¯”è¾ƒçš„æ—¥æœŸæ˜¯å­—ç¬¦å‹çš„ï¼Œéœ€è¦å…ˆè§£ææˆæ—¥æœŸå¯¹è±¡å†ä½œåˆ¤æ–­ã€‚ ç¤ºä¾‹ 5ã€åœ¨ Java 8 ä¸­æ£€æŸ¥åƒç”Ÿæ—¥è¿™ç§å‘¨æœŸæ€§äº‹ä»¶Java ä¸­å¦ä¸€ä¸ªæ—¥æœŸæ—¶é—´çš„å¤„ç†å°±æ˜¯æ£€æŸ¥ç±»ä¼¼æ¯æœˆè´¦å•ã€ç»“å©šçºªå¿µæ—¥ã€EMIæ—¥æˆ–ä¿é™©ç¼´è´¹æ—¥è¿™äº›å‘¨æœŸæ€§äº‹ä»¶ã€‚å¦‚æœä½ åœ¨ç”µå­å•†åŠ¡ç½‘ç«™å·¥ä½œï¼Œé‚£ä¹ˆä¸€å®šä¼šæœ‰ä¸€ä¸ªæ¨¡å—ç”¨æ¥åœ¨åœ£è¯èŠ‚ã€æ„Ÿæ©èŠ‚è¿™ç§èŠ‚æ—¥æ—¶å‘å®¢æˆ·å‘é€é—®å€™é‚®ä»¶ã€‚Java ä¸­å¦‚ä½•æ£€æŸ¥è¿™äº›èŠ‚æ—¥æˆ–å…¶å®ƒå‘¨æœŸæ€§äº‹ä»¶å‘¢ï¼Ÿç­”æ¡ˆå°±æ˜¯ MonthDay ç±»ã€‚è¿™ä¸ªç±»ç»„åˆäº†æœˆä»½å’Œæ—¥ï¼Œå»æ‰äº†å¹´ï¼Œè¿™æ„å‘³ç€ä½ å¯ä»¥ç”¨å®ƒåˆ¤æ–­æ¯å¹´éƒ½ä¼šå‘ç”Ÿäº‹ä»¶ã€‚å’Œè¿™ä¸ªç±»ç›¸ä¼¼çš„è¿˜æœ‰ä¸€ä¸ª YearMonth ç±»ã€‚è¿™äº›ç±»ä¹Ÿéƒ½æ˜¯ä¸å¯å˜å¹¶ä¸”çº¿ç¨‹å®‰å…¨çš„å€¼ç±»å‹ã€‚ä¸‹é¢æˆ‘ä»¬é€šè¿‡ MonthDay æ¥æ£€æŸ¥å‘¨æœŸæ€§äº‹ä»¶ï¼š 123456789LocalDate now = LocalDate.now();LocalDate dateOfBirth = LocalDate.of(2018, 06, 20);MonthDay birthday = MonthDay.of(dateOfBirth.getMonth(), dateOfBirth.getDayOfMonth());MonthDay currentMonthDay = MonthDay.from(now);if (currentMonthDay.equals(birthday)) &#123; System.out.println(\"Happy Birthday\");&#125; else &#123; System.out.println(\"Sorry, today is not your birthday\");&#125; ç»“æœï¼šï¼ˆæ³¨æ„ï¼šè·å–å½“å‰æ—¶é—´å¯èƒ½ä¸ä½ çœ‹çš„æ—¶å€™ä¸å¯¹ï¼Œæ‰€ä»¥è¿™ä¸ªç»“æœå¯èƒ½å’Œä½ çœ‹çš„æ—¶å€™è¿è¡Œç»“æœä¸ä¸€æ ·ï¼‰ 1Happy Birthday åªè¦å½“å¤©çš„æ—¥æœŸå’Œç”Ÿæ—¥åŒ¹é…ï¼Œæ— è®ºæ˜¯å“ªä¸€å¹´éƒ½ä¼šæ‰“å°å‡ºç¥è´ºä¿¡æ¯ã€‚ä½ å¯ä»¥æŠŠç¨‹åºæ•´åˆè¿›ç³»ç»Ÿæ—¶é’Ÿï¼Œçœ‹çœ‹ç”Ÿæ—¥æ—¶æ˜¯å¦ä¼šå—åˆ°æé†’ï¼Œæˆ–è€…å†™ä¸€ä¸ªå•å…ƒæµ‹è¯•æ¥æ£€æµ‹ä»£ç æ˜¯å¦è¿è¡Œæ­£ç¡®ã€‚ ç¤ºä¾‹ 6ã€åœ¨ Java 8 ä¸­è·å–å½“å‰æ—¶é—´ä¸ Java 8 è·å–æ—¥æœŸçš„ä¾‹å­å¾ˆåƒï¼Œè·å–æ—¶é—´ä½¿ç”¨çš„æ˜¯ LocalTime ç±»ï¼Œä¸€ä¸ªåªæœ‰æ—¶é—´æ²¡æœ‰æ—¥æœŸçš„ LocalDate è¿‘äº²ã€‚å¯ä»¥è°ƒç”¨é™æ€å·¥å‚æ–¹æ³• now() æ¥è·å–å½“å‰æ—¶é—´ã€‚é»˜è®¤çš„æ ¼å¼æ˜¯ hh:mm:ss:nnnã€‚ 12LocalTime localTime = LocalTime.now();System.out.println(localTime); ç»“æœï¼š 113:35:56.155 å¯ä»¥çœ‹åˆ°å½“å‰æ—¶é—´å°±åªåŒ…å«æ—¶é—´ä¿¡æ¯ï¼Œæ²¡æœ‰æ—¥æœŸã€‚ ç¤ºä¾‹ 7ã€å¦‚ä½•åœ¨ç°æœ‰çš„æ—¶é—´ä¸Šå¢åŠ å°æ—¶é€šè¿‡å¢åŠ å°æ—¶ã€åˆ†ã€ç§’æ¥è®¡ç®—å°†æ¥çš„æ—¶é—´å¾ˆå¸¸è§ã€‚Java 8 é™¤äº†ä¸å˜ç±»å‹å’Œçº¿ç¨‹å®‰å…¨çš„å¥½å¤„ä¹‹å¤–ï¼Œè¿˜æä¾›äº†æ›´å¥½çš„plusHours() æ–¹æ³•æ›¿æ¢ add()ï¼Œå¹¶ä¸”æ˜¯å…¼å®¹çš„ã€‚æ³¨æ„ï¼Œè¿™äº›æ–¹æ³•è¿”å›ä¸€ä¸ªå…¨æ–°çš„ LocalTime å®ä¾‹ï¼Œç”±äºå…¶ä¸å¯å˜æ€§ï¼Œè¿”å›åä¸€å®šè¦ç”¨å˜é‡èµ‹å€¼ã€‚ 1234LocalTime localTime = LocalTime.now();System.out.println(localTime);LocalTime localTime1 = localTime.plusHours(2);//å¢åŠ 2å°æ—¶System.out.println(localTime1); ç»“æœï¼š 1213:41:20.72115:41:20.721 å¯ä»¥çœ‹åˆ°ï¼Œæ–°çš„æ—¶é—´åœ¨å½“å‰æ—¶é—´ 13:41:20.721 çš„åŸºç¡€ä¸Šå¢åŠ äº† 2 ä¸ªå°æ—¶ã€‚ ç¤ºä¾‹ 8ã€å¦‚ä½•è®¡ç®—ä¸€å‘¨åçš„æ—¥æœŸå’Œä¸Šä¸ªä¾‹å­è®¡ç®—ä¸¤å°æ—¶ä»¥åçš„æ—¶é—´ç±»ä¼¼ï¼Œè¿™ä¸ªä¾‹å­ä¼šè®¡ç®—ä¸€å‘¨åçš„æ—¥æœŸã€‚LocalDate æ—¥æœŸä¸åŒ…å«æ—¶é—´ä¿¡æ¯ï¼Œå®ƒçš„ plus()æ–¹æ³•ç”¨æ¥å¢åŠ å¤©ã€å‘¨ã€æœˆï¼ŒChronoUnit ç±»å£°æ˜äº†è¿™äº›æ—¶é—´å•ä½ã€‚ç”±äº LocalDate ä¹Ÿæ˜¯ä¸å˜ç±»å‹ï¼Œè¿”å›åä¸€å®šè¦ç”¨å˜é‡èµ‹å€¼ã€‚ 1234LocalDate now = LocalDate.now();LocalDate plusDate = now.plus(1, ChronoUnit.WEEKS);System.out.println(now);System.out.println(plusDate); ç»“æœï¼š 122018-06-202018-06-27 å¯ä»¥çœ‹åˆ°æ–°æ—¥æœŸç¦»å½“å¤©æ—¥æœŸæ˜¯ 7 å¤©ï¼Œä¹Ÿå°±æ˜¯ä¸€å‘¨ã€‚ä½ å¯ä»¥ç”¨åŒæ ·çš„æ–¹æ³•å¢åŠ  1 ä¸ªæœˆã€1 å¹´ã€1 å°æ—¶ã€1 åˆ†é’Ÿç”šè‡³ä¸€ä¸ªä¸–çºªï¼Œæ›´å¤šé€‰é¡¹å¯ä»¥æŸ¥çœ‹ Java 8 API ä¸­çš„ ChronoUnit ç±»ã€‚ ç¤ºä¾‹ 9ã€è®¡ç®—ä¸€å¹´å‰æˆ–ä¸€å¹´åçš„æ—¥æœŸç»§ç»­ä¸Šé¢çš„ä¾‹å­ï¼Œä¸Šä¸ªä¾‹å­ä¸­æˆ‘ä»¬é€šè¿‡ LocalDate çš„ plus() æ–¹æ³•å¢åŠ å¤©æ•°ã€å‘¨æ•°æˆ–æœˆæ•°ï¼Œè¿™ä¸ªä¾‹å­æˆ‘ä»¬åˆ©ç”¨ minus() æ–¹æ³•è®¡ç®—ä¸€å¹´å‰çš„æ—¥æœŸã€‚ 12345LocalDate now = LocalDate.now();LocalDate minusDate = now.minus(1, ChronoUnit.YEARS);LocalDate plusDate1 = now.plus(1, ChronoUnit.YEARS);System.out.println(minusDate);System.out.println(plusDate1); ç»“æœï¼š 122017-06-202019-06-20 ç¤ºä¾‹ 10ã€ä½¿ç”¨ Java 8 çš„ Clock æ—¶é’Ÿç±»Java 8 å¢åŠ äº†ä¸€ä¸ª Clock æ—¶é’Ÿç±»ç”¨äºè·å–å½“æ—¶çš„æ—¶é—´æˆ³ï¼Œæˆ–å½“å‰æ—¶åŒºä¸‹çš„æ—¥æœŸæ—¶é—´ä¿¡æ¯ã€‚ä»¥å‰ç”¨åˆ°System.currentTimeInMillis() å’Œ TimeZone.getDefault() çš„åœ°æ–¹éƒ½å¯ç”¨ Clock æ›¿æ¢ã€‚ 1234Clock clock = Clock.systemUTC();Clock clock1 = Clock.systemDefaultZone();System.out.println(clock);System.out.println(clock1); ç»“æœï¼š 12SystemClock[Z]SystemClock[Asia/Shanghai] ç¤ºä¾‹ 11ã€å¦‚ä½•ç”¨ Java åˆ¤æ–­æ—¥æœŸæ˜¯æ—©äºè¿˜æ˜¯æ™šäºå¦ä¸€ä¸ªæ—¥æœŸå¦ä¸€ä¸ªå·¥ä½œä¸­å¸¸è§çš„æ“ä½œå°±æ˜¯å¦‚ä½•åˆ¤æ–­ç»™å®šçš„ä¸€ä¸ªæ—¥æœŸæ˜¯å¤§äºæŸå¤©è¿˜æ˜¯å°äºæŸå¤©ï¼Ÿåœ¨ Java 8 ä¸­ï¼ŒLocalDate ç±»æœ‰ä¸¤ç±»æ–¹æ³• isBefore() å’Œ isAfter() ç”¨äºæ¯”è¾ƒæ—¥æœŸã€‚è°ƒç”¨ isBefore() æ–¹æ³•æ—¶ï¼Œå¦‚æœç»™å®šæ—¥æœŸå°äºå½“å‰æ—¥æœŸåˆ™è¿”å› trueã€‚ 12345678LocalDate tomorrow = LocalDate.of(2018,6,20);if(tomorrow.isAfter(now))&#123; System.out.println(\"Tomorrow comes after today\");&#125;LocalDate yesterday = now.minus(1, ChronoUnit.DAYS);if(yesterday.isBefore(now))&#123; System.out.println(\"Yesterday is day before today\");&#125; åœ¨ Java 8 ä¸­æ¯”è¾ƒæ—¥æœŸéå¸¸æ–¹ä¾¿ï¼Œä¸éœ€è¦ä½¿ç”¨é¢å¤–çš„ Calendar ç±»æ¥åšè¿™äº›åŸºç¡€å·¥ä½œäº†ã€‚ ç¤ºä¾‹ 12ã€åœ¨ Java 8 ä¸­å¤„ç†æ—¶åŒºJava 8 ä¸ä»…åˆ†ç¦»äº†æ—¥æœŸå’Œæ—¶é—´ï¼Œä¹ŸæŠŠæ—¶åŒºåˆ†ç¦»å‡ºæ¥äº†ã€‚ç°åœ¨æœ‰ä¸€ç³»åˆ—å•ç‹¬çš„ç±»å¦‚ ZoneId æ¥å¤„ç†ç‰¹å®šæ—¶åŒºï¼ŒZoneDateTime ç±»æ¥è¡¨ç¤ºæŸæ—¶åŒºä¸‹çš„æ—¶é—´ã€‚è¿™åœ¨ Java 8 ä»¥å‰éƒ½æ˜¯ GregorianCalendar ç±»æ¥åšçš„ã€‚ 1234ZoneId america = ZoneId.of(\"America/New_York\");LocalDateTime localtDateAndTime = LocalDateTime.now();ZonedDateTime dateAndTimeInNewYork = ZonedDateTime.of(localtDateAndTime, america );System.out.println(dateAndTimeInNewYork); ç¤ºä¾‹ 13ã€å¦‚ä½•è¡¨ç¤ºä¿¡ç”¨å¡åˆ°æœŸè¿™ç±»å›ºå®šæ—¥æœŸï¼Œç­”æ¡ˆå°±åœ¨ YearMonthä¸ MonthDay æ£€æŸ¥é‡å¤äº‹ä»¶çš„ä¾‹å­ç›¸ä¼¼ï¼ŒYearMonth æ˜¯å¦ä¸€ä¸ªç»„åˆç±»ï¼Œç”¨äºè¡¨ç¤ºä¿¡ç”¨å¡åˆ°æœŸæ—¥ã€FD åˆ°æœŸæ—¥ã€æœŸè´§æœŸæƒåˆ°æœŸæ—¥ç­‰ã€‚è¿˜å¯ä»¥ç”¨è¿™ä¸ªç±»å¾—åˆ° å½“æœˆå…±æœ‰å¤šå°‘å¤©ï¼ŒYearMonth å®ä¾‹çš„ lengthOfMonth() æ–¹æ³•å¯ä»¥è¿”å›å½“æœˆçš„å¤©æ•°ï¼Œåœ¨åˆ¤æ–­ 2 æœˆæœ‰ 28 å¤©è¿˜æ˜¯ 29 å¤©æ—¶éå¸¸æœ‰ç”¨ã€‚ 1234YearMonth currentYearMonth = YearMonth.now();System.out.printf(\"Days in month year %s: %d%n\", currentYearMonth, currentYearMonth.lengthOfMonth());YearMonth creditCardExpiry = YearMonth.of(2018, Month.FEBRUARY);System.out.printf(\"Your credit card expires on %s %n\", creditCardExpiry); ç»“æœï¼š 12Days in month year 2018-06: 30Your credit card expires on 2018-02 ç¤ºä¾‹ 14ã€å¦‚ä½•åœ¨ Java 8 ä¸­æ£€æŸ¥é—°å¹´LocalDate ç±»æœ‰ä¸€ä¸ªå¾ˆå®ç”¨çš„æ–¹æ³• isLeapYear() åˆ¤æ–­è¯¥å®ä¾‹æ˜¯å¦æ˜¯ä¸€ä¸ªé—°å¹´ã€‚ ç¤ºä¾‹ 15ã€è®¡ç®—ä¸¤ä¸ªæ—¥æœŸä¹‹é—´çš„å¤©æ•°å’Œæœˆæ•°æœ‰ä¸€ä¸ªå¸¸è§æ—¥æœŸæ“ä½œæ˜¯è®¡ç®—ä¸¤ä¸ªæ—¥æœŸä¹‹é—´çš„å¤©æ•°ã€å‘¨æ•°æˆ–æœˆæ•°ã€‚åœ¨ Java 8 ä¸­å¯ä»¥ç”¨ java.time.Period ç±»æ¥åšè®¡ç®—ã€‚ä¸‹é¢è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬è®¡ç®—äº†å½“å¤©å’Œå°†æ¥æŸä¸€å¤©ä¹‹é—´çš„æœˆæ•°ã€‚ 123LocalDate date = LocalDate.of(2019, Month.MARCH, 20);Period period = Period.between(now, date);System.out.println(&quot;ç¦»ä¸‹ä¸ªæ—¶é—´è¿˜æœ‰&quot; + period.getMonths() + &quot; ä¸ªæœˆ&quot;); ç¤ºä¾‹ 16ã€åŒ…å«æ—¶å·®ä¿¡æ¯çš„æ—¥æœŸå’Œæ—¶é—´åœ¨ Java 8 ä¸­ï¼ŒZoneOffset ç±»ç”¨æ¥è¡¨ç¤ºæ—¶åŒºï¼Œä¸¾ä¾‹æ¥è¯´å°åº¦ä¸ GMT æˆ– UTC æ ‡å‡†æ—¶åŒºç›¸å·® +05:30ï¼Œå¯ä»¥é€šè¿‡ZoneOffset.of() é™æ€æ–¹æ³•æ¥è·å–å¯¹åº”çš„æ—¶åŒºã€‚ä¸€æ—¦å¾—åˆ°äº†æ—¶å·®å°±å¯ä»¥é€šè¿‡ä¼ å…¥ LocalDateTime å’Œ ZoneOffset æ¥åˆ›å»ºä¸€ä¸ª OffSetDateTime å¯¹è±¡ã€‚ 1234LocalDateTime datetime = LocalDateTime.of(2014, Month.JANUARY, 14,19,30);ZoneOffset offset = ZoneOffset.of(\"+05:30\");OffsetDateTime date = OffsetDateTime.of(datetime, offset); System.out.println(\"Date and Time with timezone offset in Java : \" + date); ç¤ºä¾‹ 17ã€åœ¨ Java 8 ä¸­è·å–å½“å‰çš„æ—¶é—´æˆ³å¦‚æœä½ è¿˜è®°å¾— Java 8 ä»¥å‰æ˜¯å¦‚ä½•è·å¾—å½“å‰æ—¶é—´æˆ³ï¼Œé‚£ä¹ˆç°åœ¨ä½ ç»ˆäºè§£è„±äº†ã€‚Instant ç±»æœ‰ä¸€ä¸ªé™æ€å·¥å‚æ–¹æ³• now() ä¼šè¿”å›å½“å‰çš„æ—¶é—´æˆ³ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 12Instant timestamp = Instant.now();System.out.println(timestamp); ç»“æœï¼š 12018-06-20T06:35:24.881Z æ—¶é—´æˆ³ä¿¡æ¯é‡ŒåŒæ—¶åŒ…å«äº†æ—¥æœŸå’Œæ—¶é—´ï¼Œè¿™å’Œ java.util.Date å¾ˆåƒã€‚å®é™…ä¸Š Instant ç±»ç¡®å®ç­‰åŒäº Java 8 ä¹‹å‰çš„ Dateç±»ï¼Œä½ å¯ä»¥ä½¿ç”¨ Date ç±»å’Œ Instant ç±»å„è‡ªçš„è½¬æ¢æ–¹æ³•äº’ç›¸è½¬æ¢ï¼Œä¾‹å¦‚ï¼šDate.from(Instant) å°† Instant è½¬æ¢æˆjava.util.Dateï¼ŒDate.toInstant() åˆ™æ˜¯å°† Date ç±»è½¬æ¢æˆ Instant ç±»ã€‚ ç¤ºä¾‹ 18ã€åœ¨ Java 8 ä¸­å¦‚ä½•ä½¿ç”¨é¢„å®šä¹‰çš„æ ¼å¼åŒ–å·¥å…·å»è§£ææˆ–æ ¼å¼åŒ–æ—¥æœŸåœ¨ Java 8 ä»¥å‰çš„ä¸–ç•Œé‡Œï¼Œæ—¥æœŸå’Œæ—¶é—´çš„æ ¼å¼åŒ–éå¸¸è¯¡å¼‚ï¼Œå”¯ä¸€çš„å¸®åŠ©ç±» SimpleDateFormat ä¹Ÿæ˜¯éçº¿ç¨‹å®‰å…¨çš„ï¼Œè€Œä¸”ç”¨ä½œå±€éƒ¨å˜é‡è§£æå’Œæ ¼å¼åŒ–æ—¥æœŸæ—¶æ˜¾å¾—å¾ˆç¬¨é‡ã€‚å¹¸å¥½çº¿ç¨‹å±€éƒ¨å˜é‡èƒ½ä½¿å®ƒåœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­å˜å¾—å¯ç”¨ï¼Œä¸è¿‡è¿™éƒ½æ˜¯è¿‡å»æ—¶äº†ã€‚Java 8 å¼•å…¥äº†å…¨æ–°çš„æ—¥æœŸæ—¶é—´æ ¼å¼å·¥å…·ï¼Œçº¿ç¨‹å®‰å…¨è€Œä¸”ä½¿ç”¨æ–¹ä¾¿ã€‚å®ƒè‡ªå¸¦äº†ä¸€äº›å¸¸ç”¨çš„å†…ç½®æ ¼å¼åŒ–å·¥å…·ã€‚ å‚è§æˆ‘ä¸Šä¸€ç¯‡æ–‡ç« ï¼š ã€ŠSimpleDateFormat å¦‚ä½•å®‰å…¨çš„ä½¿ç”¨ï¼Ÿã€‹ ç¤ºä¾‹ 19ã€å¦‚ä½•åœ¨ Java ä¸­ä½¿ç”¨è‡ªå®šä¹‰æ ¼å¼åŒ–å·¥å…·è§£ææ—¥æœŸå°½ç®¡å†…ç½®æ ¼å¼åŒ–å·¥å…·å¾ˆå¥½ç”¨ï¼Œæœ‰æ—¶è¿˜æ˜¯éœ€è¦å®šä¹‰ç‰¹å®šçš„æ—¥æœŸæ ¼å¼ã€‚å¯ä»¥è°ƒç”¨ DateTimeFormatter çš„ ofPattern() é™æ€æ–¹æ³•å¹¶ä¼ å…¥ä»»æ„æ ¼å¼è¿”å›å…¶å®ä¾‹ï¼Œæ ¼å¼ä¸­çš„å­—ç¬¦å’Œä»¥å‰ä»£è¡¨çš„ä¸€æ ·ï¼ŒM ä»£è¡¨æœˆï¼Œm ä»£è¡¨åˆ†ã€‚å¦‚æœæ ¼å¼ä¸è§„èŒƒä¼šæŠ›å‡º DateTimeParseException å¼‚å¸¸ï¼Œä¸è¿‡å¦‚æœåªæ˜¯æŠŠ M å†™æˆ m è¿™ç§é€»è¾‘é”™è¯¯æ˜¯ä¸ä¼šæŠ›å¼‚å¸¸çš„ã€‚ å‚è§æˆ‘ä¸Šä¸€ç¯‡æ–‡ç« ï¼š ã€ŠSimpleDateFormat å¦‚ä½•å®‰å…¨çš„ä½¿ç”¨ï¼Ÿã€‹ ç¤ºä¾‹ 20ã€åœ¨ Java 8 ä¸­å¦‚ä½•æŠŠæ—¥æœŸè½¬æ¢æˆå­—ç¬¦ä¸²ä¸Šä¸¤ä¸ªä¸»è¦æ˜¯ä»å­—ç¬¦ä¸²è§£ææ—¥æœŸã€‚ç°åœ¨æˆ‘ä»¬åè¿‡æ¥ï¼ŒæŠŠ LocalDateTime æ—¥æœŸå®ä¾‹è½¬æ¢æˆç‰¹å®šæ ¼å¼çš„å­—ç¬¦ä¸²ã€‚è¿™æ˜¯è¿„ä»Šä¸ºæ­¢ Java æ—¥æœŸè½¬å­—ç¬¦ä¸²æœ€ä¸ºç®€å•çš„æ–¹å¼äº†ã€‚ä¸‹é¢çš„ä¾‹å­å°†è¿”å›ä¸€ä¸ªä»£è¡¨æ—¥æœŸçš„æ ¼å¼åŒ–å­—ç¬¦ä¸²ã€‚å’Œå‰é¢ç±»ä¼¼ï¼Œè¿˜æ˜¯éœ€è¦åˆ›å»º DateTimeFormatter å®ä¾‹å¹¶ä¼ å…¥æ ¼å¼ï¼Œä½†è¿™å›è°ƒç”¨çš„æ˜¯ format() æ–¹æ³•ï¼Œè€Œé parse() æ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•ä¼šæŠŠä¼ å…¥çš„æ—¥æœŸè½¬åŒ–æˆæŒ‡å®šæ ¼å¼çš„å­—ç¬¦ä¸²ã€‚ 123456789LocalDateTime arrivalDate = LocalDateTime.now();try &#123; DateTimeFormatter format = DateTimeFormatter.ofPattern(\"MMMdd yyyy hh:mm a\"); String landing = arrivalDate.format(format); System.out.printf(\"Arriving at : %s %n\", landing);&#125;catch (DateTimeException ex) &#123; System.out.printf(\"%s can't be formatted!%n\", arrivalDate); ex.printStackTrace();&#125; Java 8 æ—¥æœŸæ—¶é—´ API çš„é‡ç‚¹é€šè¿‡è¿™äº›ä¾‹å­ï¼Œä½ è‚¯å®šå·²ç»æŒæ¡äº† Java 8 æ—¥æœŸæ—¶é—´ API çš„æ–°çŸ¥è¯†ç‚¹ã€‚ç°åœ¨æ¥å›é¡¾ä¸€ä¸‹è¿™ä¸ªä¼˜é›… API çš„ä½¿ç”¨è¦ç‚¹ï¼š 1ï¼‰æä¾›äº† javax.time.ZoneId è·å–æ—¶åŒºã€‚ 2ï¼‰æä¾›äº† LocalDate å’Œ LocalTime ç±»ã€‚ 3ï¼‰Java 8 çš„æ‰€æœ‰æ—¥æœŸå’Œæ—¶é—´ API éƒ½æ˜¯ä¸å¯å˜ç±»å¹¶ä¸”çº¿ç¨‹å®‰å…¨ï¼Œè€Œç°æœ‰çš„ Date å’Œ Calendar API ä¸­çš„ java.util.Date å’ŒSimpleDateFormat æ˜¯éçº¿ç¨‹å®‰å…¨çš„ã€‚ 4ï¼‰ä¸»åŒ…æ˜¯ java.time, åŒ…å«äº†è¡¨ç¤ºæ—¥æœŸã€æ—¶é—´ã€æ—¶é—´é—´éš”çš„ä¸€äº›ç±»ã€‚é‡Œé¢æœ‰ä¸¤ä¸ªå­åŒ… java.time.format ç”¨äºæ ¼å¼åŒ–ï¼Œ java.time.temporal ç”¨äºæ›´åº•å±‚çš„æ“ä½œã€‚ 5ï¼‰æ—¶åŒºä»£è¡¨äº†åœ°çƒä¸ŠæŸä¸ªåŒºåŸŸå†…æ™®éä½¿ç”¨çš„æ ‡å‡†æ—¶é—´ã€‚æ¯ä¸ªæ—¶åŒºéƒ½æœ‰ä¸€ä¸ªä»£å·ï¼Œæ ¼å¼é€šå¸¸ç”±åŒºåŸŸ/åŸå¸‚æ„æˆï¼ˆAsia/Tokyoï¼‰ï¼Œåœ¨åŠ ä¸Šä¸æ ¼æ—å¨æ²»æˆ– UTC çš„æ—¶å·®ã€‚ä¾‹å¦‚ï¼šä¸œäº¬çš„æ—¶å·®æ˜¯ +09:00ã€‚ 6ï¼‰OffsetDateTime ç±»å®é™…ä¸Šç»„åˆäº† LocalDateTime ç±»å’Œ ZoneOffset ç±»ã€‚ç”¨æ¥è¡¨ç¤ºåŒ…å«å’Œæ ¼æ—å¨æ²»æˆ– UTC æ—¶å·®çš„å®Œæ•´æ—¥æœŸï¼ˆå¹´ã€æœˆã€æ—¥ï¼‰å’Œæ—¶é—´ï¼ˆæ—¶ã€åˆ†ã€ç§’ã€çº³ç§’ï¼‰ä¿¡æ¯ã€‚ 7ï¼‰DateTimeFormatter ç±»ç”¨æ¥æ ¼å¼åŒ–å’Œè§£ææ—¶é—´ã€‚ä¸ SimpleDateFormat ä¸åŒï¼Œè¿™ä¸ªç±»ä¸å¯å˜å¹¶ä¸”çº¿ç¨‹å®‰å…¨ï¼Œéœ€è¦æ—¶å¯ä»¥ç»™é™æ€å¸¸é‡èµ‹å€¼ã€‚ DateTimeFormatter ç±»æä¾›äº†å¤§é‡çš„å†…ç½®æ ¼å¼åŒ–å·¥å…·ï¼ŒåŒæ—¶ä¹Ÿå…è®¸ä½ è‡ªå®šä¹‰ã€‚åœ¨è½¬æ¢æ–¹é¢ä¹Ÿæä¾›äº† parse() å°†å­—ç¬¦ä¸²è§£ææˆæ—¥æœŸï¼Œå¦‚æœè§£æå‡ºé”™ä¼šæŠ›å‡º DateTimeParseExceptionã€‚DateTimeFormatter ç±»åŒæ—¶è¿˜æœ‰format() ç”¨æ¥æ ¼å¼åŒ–æ—¥æœŸï¼Œå¦‚æœå‡ºé”™ä¼šæŠ›å‡º DateTimeExceptionå¼‚å¸¸ã€‚ 8ï¼‰å†è¡¥å……ä¸€ç‚¹ï¼Œæ—¥æœŸæ ¼å¼â€œMMM d yyyyâ€å’Œâ€œMMM dd yyyyâ€æœ‰ä¸€äº›å¾®å¦™çš„ä¸åŒï¼Œç¬¬ä¸€ä¸ªæ ¼å¼å¯ä»¥è§£æâ€œJan 2 2014â€å’Œâ€œJan 14 2014â€ï¼Œè€Œç¬¬äºŒä¸ªåœ¨è§£æâ€œJan 2 2014â€å°±ä¼šæŠ›å¼‚å¸¸ï¼Œå› ä¸ºç¬¬äºŒä¸ªæ ¼å¼é‡Œè¦æ±‚æ—¥å¿…é¡»æ˜¯ä¸¤ä½çš„ã€‚å¦‚æœæƒ³ä¿®æ­£ï¼Œä½ å¿…é¡»åœ¨æ—¥æœŸåªæœ‰ä¸ªä½æ•°æ—¶åœ¨å‰é¢è¡¥é›¶ï¼Œå°±æ˜¯è¯´â€œJan 2 2014â€åº”è¯¥å†™æˆ â€œJan 02 2014â€ã€‚ ç›¸å…³æ–‡ç« SimpleDateFormat å¦‚ä½•å®‰å…¨çš„ä½¿ç”¨ï¼Ÿ","tags":[{"name":"Java","slug":"Java","permalink":"http://yoursite.com/tags/Java/"}]},{"title":"SimpleDateFormat å¦‚ä½•å®‰å…¨çš„ä½¿ç”¨ï¼Ÿ","date":"2018-06-18T16:00:00.000Z","path":"2018/06/19/SimpleDateFormat/","text":"å‰è¨€ä¸ºä»€ä¹ˆä¼šå†™è¿™ç¯‡æ–‡ç« ï¼Ÿå› ä¸ºè¿™äº›å¤©åœ¨çœ‹ã€Šé˜¿é‡Œå·´å·´å¼€å‘æ‰‹å†Œè¯¦å°½ç‰ˆã€‹ï¼Œæ²¡çœ‹è¿‡çš„å¯ä»¥å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼šzhishengï¼Œå›å¤å…³é”®å­—ï¼šé˜¿é‡Œå·´å·´å¼€å‘æ‰‹å†Œè¯¦å°½ç‰ˆ å°±å¯ä»¥è·å¾—ã€‚ å…³æ³¨æˆ‘ è½¬è½½è¯·åŠ¡å¿…æ³¨æ˜åŸåˆ›åœ°å€ä¸ºï¼šhttp://www.54tianzhisheng.cn/2018/06/19/SimpleDateFormat/ åœ¨çœ‹çš„è¿‡ç¨‹ä¸­æœ‰è¿™ä¹ˆä¸€æ¡ï¼š ã€å¼ºåˆ¶ã€‘SimpleDateFormat æ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ç±»ï¼Œä¸€èˆ¬ä¸è¦å®šä¹‰ä¸º static å˜é‡ï¼Œå¦‚æœå®šä¹‰ä¸º staticï¼Œå¿…é¡»åŠ é”ï¼Œæˆ–è€…ä½¿ç”¨ DateUtils å·¥å…·ç±»ã€‚ çœ‹åˆ°è¿™æ¡æˆ‘ç«‹é©¬å°±æƒ³èµ·äº†æˆ‘å®ä¹ çš„æ—¶å€™æœ‰ä¸ªé¡¹ç›®é‡Œé¢å°±çŠ¯äº†è¿™ä¸ªé”™è¯¯ï¼Œè®°å¾—å½“æ—¶æ˜¯è¿™æ ·å†™çš„ï¼š 1private static final SimpleDateFormat df = new SimpleDateFormat(\"yyyyMMddHHmmss\"); æ‰€ä»¥æ‰è®¤çœŸçš„å»ç ”ç©¶ä¸‹è¿™ä¸ª SimpleDateFormatï¼Œæ‰€ä»¥æ‰æœ‰äº†è¿™ç¯‡æ–‡ç« ã€‚ å®ƒæ˜¯è°ï¼Ÿæƒ³å¿…å¤§å®¶å¯¹ SimpleDateFormat å¹¶ä¸é™Œç”Ÿã€‚SimpleDateFormat æ˜¯ Java ä¸­ä¸€ä¸ªéå¸¸å¸¸ç”¨çš„ç±»ï¼Œä»–æ˜¯ä»¥åŒºåŸŸæ•æ„Ÿçš„æ–¹å¼æ ¼å¼åŒ–å’Œè§£ææ—¥æœŸçš„å…·ä½“ç±»ã€‚ å®ƒå…è®¸æ ¼å¼åŒ– (date -&gt; text)ã€è¯­æ³•åˆ†æ (text -&gt; date)å’Œæ ‡å‡†åŒ–ã€‚ SimpleDateFormat å…è®¸ä»¥ä»»ä½•ç”¨æˆ·æŒ‡å®šçš„æ—¥æœŸ-æ—¶é—´æ ¼å¼æ–¹å¼å¯åŠ¨ã€‚ ä½†æ˜¯ï¼Œå»ºè®®ä½¿ç”¨ DateFormat ä¸­çš„ getTimeInstanceã€ getDateInstance æˆ– getDateTimeInstance æ–¹æ³•æ¥åˆ›å»ºä¸€ä¸ªæ—¥æœŸ-æ—¶é—´æ ¼å¼ã€‚ è¿™å‡ ä¸ªæ–¹æ³•ä¼šè¿”å›ä¸€ä¸ªé»˜è®¤çš„æ—¥æœŸï¼æ—¶é—´æ ¼å¼ã€‚ ä½ å¯ä»¥æ ¹æ®éœ€è¦ç”¨ applyPattern æ–¹æ³•ä¿®æ”¹æ ¼å¼æ–¹å¼ã€‚ æ—¥æœŸæ—¶é—´æ ¼å¼æ—¥æœŸå’Œæ—¶é—´æ ¼å¼ç”± æ—¥æœŸå’Œæ—¶é—´æ¨¡å¼å­—ç¬¦ä¸² æŒ‡å®šã€‚åœ¨ æ—¥æœŸå’Œæ—¶é—´æ¨¡å¼å­—ç¬¦ä¸² ä¸­ï¼ŒæœªåŠ å¼•å·çš„å­—æ¯ â€˜Aâ€™ åˆ° â€˜Zâ€™ å’Œ â€˜aâ€™ åˆ° â€˜zâ€™ è¢«è§£é‡Šä¸ºæ¨¡å¼å­—æ¯ï¼Œç”¨æ¥è¡¨ç¤ºæ—¥æœŸæˆ–æ—¶é—´å­—ç¬¦ä¸²å…ƒç´ ã€‚æ–‡æœ¬å¯ä»¥ä½¿ç”¨å•å¼•å· (â€˜) å¼•èµ·æ¥ï¼Œä»¥å…è¿›è¡Œè§£é‡Šã€‚æ‰€æœ‰å…¶ä»–å­—ç¬¦å‡ä¸è§£é‡Šï¼Œåªæ˜¯åœ¨æ ¼å¼åŒ–æ—¶å°†å®ƒä»¬ç®€å•å¤åˆ¶åˆ°è¾“å‡ºå­—ç¬¦ä¸²ã€‚ ç®€å•çš„è®²ï¼šè¿™äº› A â€”â€”Zï¼Œa â€”â€” z è¿™äº›å­—æ¯(ä¸è¢«å•å¼•å·åŒ…å›´çš„)ä¼šè¢«ç‰¹æ®Šå¤„ç†æ›¿æ¢ä¸ºå¯¹åº”çš„æ—¥æœŸæ—¶é—´ï¼Œå…¶ä»–çš„å­—ç¬¦ä¸²è¿˜æ˜¯åŸæ ·è¾“å‡ºã€‚ æ—¥æœŸå’Œæ—¶é—´æ¨¡å¼(æ³¨æ„å¤§å°å†™ï¼Œä»£è¡¨çš„å«ä¹‰æ˜¯ä¸åŒçš„)å¦‚ä¸‹ï¼š æ€ä¹ˆä½¿ç”¨ï¼Ÿæ—¥æœŸï¼æ—¶é—´æ ¼å¼æ¨¡ç‰ˆæ ·ä¾‹ï¼šï¼ˆç»™çš„æ—¶é—´æ˜¯ï¼š2001-07-04 12:08:56 U.S. Pacific Time time zoneï¼‰ ä½¿ç”¨æ–¹æ³•ï¼š 1234567891011121314151617181920212223import java.text.SimpleDateFormat;import java.util.Date;/** * Created by zhisheng_tian on 2018/6/19 */public class FormatDateTime &#123; public static void main(String[] args) &#123; SimpleDateFormat myFmt = new SimpleDateFormat(\"yyyyå¹´MMæœˆddæ—¥ HHæ—¶mmåˆ†ssç§’\"); SimpleDateFormat myFmt1 = new SimpleDateFormat(\"yy/MM/dd HH:mm\"); SimpleDateFormat myFmt2 = new SimpleDateFormat(\"yyyy-MM-dd HH:mm:ss\");//ç­‰ä»·äºnow.toLocaleString() SimpleDateFormat myFmt3 = new SimpleDateFormat(\"yyyyå¹´MMæœˆddæ—¥ HHæ—¶mmåˆ†ssç§’ E \"); SimpleDateFormat myFmt4 = new SimpleDateFormat(\"ä¸€å¹´ä¸­çš„ç¬¬ D å¤© ä¸€å¹´ä¸­ç¬¬wä¸ªæ˜ŸæœŸ ä¸€æœˆä¸­ç¬¬Wä¸ªæ˜ŸæœŸ åœ¨ä¸€å¤©ä¸­kæ—¶ zæ—¶åŒº\"); Date now = new Date(); System.out.println(myFmt.format(now)); System.out.println(myFmt1.format(now)); System.out.println(myFmt2.format(now)); System.out.println(myFmt3.format(now)); System.out.println(myFmt4.format(now)); System.out.println(now.toGMTString()); System.out.println(now.toLocaleString()); System.out.println(now.toString()); &#125;&#125; ç»“æœæ˜¯ï¼š 123456782018å¹´06æœˆ19æ—¥ 23æ—¶10åˆ†05ç§’18/06/19 23:102018-06-19 23:10:052018å¹´06æœˆ19æ—¥ 23æ—¶10åˆ†05ç§’ æ˜ŸæœŸäºŒä¸€å¹´ä¸­çš„ç¬¬ 170 å¤© ä¸€å¹´ä¸­ç¬¬25ä¸ªæ˜ŸæœŸ ä¸€æœˆä¸­ç¬¬4ä¸ªæ˜ŸæœŸ åœ¨ä¸€å¤©ä¸­23æ—¶ CSTæ—¶åŒº19 Jun 2018 15:10:05 GMT2018-6-19 23:10:05Tue Jun 19 23:10:05 CST 2018 ä½¿ç”¨æ–¹æ³•å¾ˆç®€å•ï¼Œå°±æ˜¯å…ˆè‡ªå·±å®šä¹‰å¥½æ—¶é—´ï¼æ—¥æœŸæ¨¡ç‰ˆï¼Œç„¶åè°ƒç”¨ format æ–¹æ³•ï¼ˆä¼ å…¥ä¸€ä¸ªæ—¶é—´ Date å‚æ•°ï¼‰ã€‚ ä¸Šé¢çš„æ˜¯æ—¥æœŸè½¬æ¢æˆè‡ªå·±æƒ³è¦çš„å­—ç¬¦ä¸²æ ¼å¼ã€‚ä¸‹é¢åè¿‡æ¥ï¼Œå°†å­—ç¬¦ä¸²ç±»å‹è£…æ¢æˆæ—¥æœŸç±»å‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152import java.text.ParseException;import java.text.SimpleDateFormat;import java.util.Date;/** * Created by zhisheng_tian on 2018/6/19 */public class StringFormatDate &#123; public static void main(String[] args) &#123; String time1 = \"2018å¹´06æœˆ19æ—¥ 23æ—¶10åˆ†05ç§’\"; String time2 = \"18/06/19 23:10\"; String time3 = \"2018-06-19 23:10:05\"; String time4 = \"2018å¹´06æœˆ19æ—¥ 23æ—¶10åˆ†05ç§’ æ˜ŸæœŸäºŒ\"; SimpleDateFormat myFmt = new SimpleDateFormat(\"yyyyå¹´MMæœˆddæ—¥ HHæ—¶mmåˆ†ssç§’\"); SimpleDateFormat myFmt1 = new SimpleDateFormat(\"yy/MM/dd HH:mm\"); SimpleDateFormat myFmt2 = new SimpleDateFormat(\"yyyy-MM-dd HH:mm:ss\");//ç­‰ä»·äºnow.toLocaleString() SimpleDateFormat myFmt3 = new SimpleDateFormat(\"yyyyå¹´MMæœˆddæ—¥ HHæ—¶mmåˆ†ssç§’ E\"); Date date1 = null; try &#123; date1 = myFmt.parse(time1); &#125; catch (ParseException e) &#123; e.printStackTrace(); &#125; System.out.println(date1); Date date2 = null; try &#123; date2 = myFmt1.parse(time2); &#125; catch (ParseException e) &#123; e.printStackTrace(); &#125; System.out.println(date2); Date date3 = null; try &#123; date3 = myFmt2.parse(time3); &#125; catch (ParseException e) &#123; e.printStackTrace(); &#125; System.out.println(date3); Date date4 = null; try &#123; date4 = myFmt3.parse(time4); &#125; catch (ParseException e) &#123; e.printStackTrace(); &#125; System.out.println(date4); &#125;&#125; ç»“æœæ˜¯ï¼š 1234Tue Jun 19 23:10:05 CST 2018Tue Jun 19 23:10:00 CST 2018Tue Jun 19 23:10:05 CST 2018Tue Jun 19 23:10:05 CST 2018 è¿™ä¸ªè½¬æ¢æ–¹æ³•ä¹Ÿå¾ˆç®€å•ã€‚ä½†æ˜¯ä¸è¦é«˜å…´çš„å¤ªæ—©ï¼Œä¸»è§’ä¸åœ¨è¿™ã€‚ çº¿ç¨‹ä¸å®‰å…¨ åœ¨ SimpleDateFormat ç±»çš„ JavaDoc ä¸­ï¼Œæè¿°äº†è¯¥ç±»ä¸èƒ½å¤Ÿä¿è¯çº¿ç¨‹å®‰å…¨ï¼Œå»ºè®®ä¸ºæ¯ä¸ªçº¿ç¨‹åˆ›å»ºå•ç‹¬çš„æ—¥æœŸï¼æ—¶é—´æ ¼å¼å®ä¾‹ï¼Œå¦‚æœå¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®ä¸€ä¸ªæ—¥æœŸï¼æ—¶é—´æ ¼å¼ï¼Œå®ƒå¿…é¡»åœ¨å¤–éƒ¨è¿›è¡ŒåŒæ­¥ã€‚é‚£ä¹ˆåœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹è°ƒç”¨ format() å’Œ parse() æ–¹æ³•åº”è¯¥ä½¿ç”¨åŒæ­¥ä»£ç æ¥é¿å…é—®é¢˜ã€‚ä¸‹é¢æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªå…·ä½“çš„åœºæ™¯æ¥ä¸€æ­¥æ­¥çš„æ·±å…¥å­¦ä¹ å’Œç†è§£SimpleDateFormat ç±»ã€‚ 1ã€æ¯ä¸ªçº¿ç¨‹åˆ›å»ºå•ç‹¬çš„æ—¥æœŸï¼æ—¶é—´æ ¼å¼å®ä¾‹ å¤§é‡çš„åˆ›å»º SimpleDateFormat å®ä¾‹å¯¹è±¡ï¼Œç„¶åå†ä¸¢å¼ƒè¿™ä¸ªå¯¹è±¡ï¼Œå ç”¨å¤§é‡çš„å†…å­˜å’Œ JVM ç©ºé—´ã€‚ 2ã€åˆ›å»ºä¸€ä¸ªé™æ€çš„ SimpleDateFormat å®ä¾‹ï¼Œåœ¨ä½¿ç”¨æ—¶ç›´æ¥ä½¿ç”¨è¿™ä¸ªå®ä¾‹è¿›è¡Œæ“ä½œï¼ˆæˆ‘å½“æ—¶å°±æ˜¯è¿™ä¹ˆå¹²çš„ğŸ˜„ï¼‰ 123private static final SimpleDateFormat df = new SimpleDateFormat(\"yyyy-MM-dd HH:mm:ss\");Date date = new Date();df.format(date); å½“ç„¶ï¼Œè¿™ä¸ªæ–¹æ³•çš„ç¡®å¾ˆä¸é”™ï¼Œåœ¨å¤§éƒ¨åˆ†çš„æ—¶é—´é‡Œé¢éƒ½ä¼šå·¥ä½œå¾—å¾ˆå¥½ï¼Œä½†ä¸€æ—¦åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä¸€å®šè´Ÿè½½æƒ…å†µä¸‹æ—¶ï¼Œè¿™ä¸ªé—®é¢˜å°±å‡ºæ¥äº†ã€‚ä»–ä¼šå‡ºç°å„ç§ä¸åŒçš„æƒ…å†µï¼Œæ¯”å¦‚è½¬åŒ–çš„æ—¶é—´ä¸æ­£ç¡®ï¼Œæ¯”å¦‚æŠ¥é”™ï¼Œæ¯”å¦‚çº¿ç¨‹è¢«æŒ‚æ­»ç­‰ç­‰ã€‚æˆ‘ä»¬çœ‹ä¸‹é¢çš„æµ‹è¯•ç”¨ä¾‹ï¼Œæ‹¿äº‹å®è¯´è¯ï¼š 1234567891011121314151617import java.text.ParseException;import java.text.SimpleDateFormat;import java.util.Date;/** * Created by zhisheng_tian on 2018/6/20 */public class DateUtils &#123; private static final SimpleDateFormat sdf = new SimpleDateFormat(\"yyyy-MM-dd HH:mm:ss\"); public static String formatDate(Date date) throws ParseException &#123; return sdf.format(date); &#125; public static Date parse(String strDate) throws ParseException &#123; return sdf.parse(strDate); &#125;&#125; 12345678910111213141516171819202122232425262728import java.text.ParseException;/** * Created by zhisheng_tian on 2018/6/20 */public class DateUtilsTest &#123; public static class TestSimpleDateFormatThreadSafe extends Thread &#123; @Override public void run() &#123; while (true) &#123; try &#123; this.join(2000); &#125; catch (InterruptedException e1) &#123; e1.printStackTrace(); &#125; try &#123; System.out.println(this.getName() + \":\" + DateUtils.parse(\"2018-06-20 01:18:20\")); &#125; catch (ParseException e) &#123; e.printStackTrace(); &#125; &#125; &#125; &#125; public static void main(String[] args) &#123; for (int i = 0; i &lt; 3; i++) &#123; new TestSimpleDateFormatThreadSafe().start(); &#125; &#125;&#125; è¿è¡Œç»“æœå¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526Exception in thread \"Thread-0\" Exception in thread \"Thread-1\" java.lang.NumberFormatException: For input string: \"\" at java.lang.NumberFormatException.forInputString(NumberFormatException.java:65) at java.lang.Long.parseLong(Long.java:601) at java.lang.Long.parseLong(Long.java:631) at java.text.DigitList.getLong(DigitList.java:195) at java.text.DecimalFormat.parse(DecimalFormat.java:2051) at java.text.SimpleDateFormat.subParse(SimpleDateFormat.java:1869) at java.text.SimpleDateFormat.parse(SimpleDateFormat.java:1514) at java.text.DateFormat.parse(DateFormat.java:364) at com.zhisheng.demo.date.DateUtils.parse(DateUtils.java:19) at com.zhisheng.demo.date.DateUtilsTest$TestSimpleDateFormatThreadSafe.run(DateUtilsTest.java:19)java.lang.NumberFormatException: For input string: \".1818\" at java.lang.NumberFormatException.forInputString(NumberFormatException.java:65) at java.lang.Long.parseLong(Long.java:578) at java.lang.Long.parseLong(Long.java:631) at java.text.DigitList.getLong(DigitList.java:195) at java.text.DecimalFormat.parse(DecimalFormat.java:2051) at java.text.SimpleDateFormat.subParse(SimpleDateFormat.java:2162) at java.text.SimpleDateFormat.parse(SimpleDateFormat.java:1514) at java.text.DateFormat.parse(DateFormat.java:364) at com.zhisheng.demo.date.DateUtils.parse(DateUtils.java:19) at com.zhisheng.demo.date.DateUtilsTest$TestSimpleDateFormatThreadSafe.run(DateUtilsTest.java:19)Thread-2:Sat Jun 20 01:18:20 CST 2201Thread-2:Wed Jun 20 01:18:20 CST 2018Thread-2:Wed Jun 20 01:18:20 CST 2018Thread-2:Wed Jun 20 01:18:20 CST 2018 è¯´æ˜ï¼šThread-1å’ŒThread-0æŠ¥java.lang.NumberFormatException: multiple pointsé”™è¯¯ï¼Œç›´æ¥æŒ‚æ­»ï¼Œæ²¡èµ·æ¥ï¼›Thread-2 è™½ç„¶æ²¡æœ‰æŒ‚æ­»ï¼Œä½†è¾“å‡ºçš„æ—¶é—´æ˜¯æœ‰é”™è¯¯çš„ï¼Œæ¯”å¦‚æˆ‘ä»¬è¾“å…¥çš„æ—¶é—´æ˜¯ï¼š2018-06-20 01:18:20 ï¼Œå½“ä¼šè¾“å‡ºï¼šSat Jun 20 01:18:20 CST 2201 è¿™æ ·çš„çµå¼‚äº‹ä»¶ã€‚ Why?ä¸ºä»€ä¹ˆä¼šå‡ºç°çº¿ç¨‹ä¸å®‰å…¨çš„é—®é¢˜å‘¢ï¼Ÿ ä¸‹é¢æˆ‘ä»¬é€šè¿‡çœ‹ JDK æºç æ¥çœ‹çœ‹ä¸ºä»€ä¹ˆ SimpleDateFormat å’Œ DateFormat ç±»ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„çœŸæ­£åŸå› ï¼š SimpleDateFormat ç»§æ‰¿äº† DateFormatï¼Œåœ¨ DateFormat ä¸­å®šä¹‰äº†ä¸€ä¸ª protected å±æ€§çš„ Calendar ç±»çš„å¯¹è±¡ï¼šcalendarã€‚åªæ˜¯å› ä¸º Calendar ç±»çš„æ¦‚å¿µå¤æ‚ï¼Œç‰µæ‰¯åˆ°æ—¶åŒºä¸æœ¬åœ°åŒ–ç­‰ç­‰ï¼ŒJDK çš„å®ç°ä¸­ä½¿ç”¨äº†æˆå‘˜å˜é‡æ¥ä¼ é€’å‚æ•°ï¼Œè¿™å°±é€ æˆåœ¨å¤šçº¿ç¨‹çš„æ—¶å€™ä¼šå‡ºç°é”™è¯¯ã€‚ åœ¨ SimpleDateFormat ä¸­çš„ format æ–¹æ³•æºç ä¸­ï¼š 123456789101112131415161718192021222324252627282930313233@Overridepublic StringBuffer format(Date date, StringBuffer toAppendTo,FieldPosition pos) &#123; pos.beginIndex = pos.endIndex = 0; return format(date, toAppendTo, pos.getFieldDelegate());&#125;// Called from Format after creating a FieldDelegateprivate StringBuffer format(Date date, StringBuffer toAppendTo,FieldDelegate delegate) &#123; // Convert input date to time field list calendar.setTime(date); boolean useDateFormatSymbols = useDateFormatSymbols(); for (int i = 0; i &lt; compiledPattern.length; ) &#123; int tag = compiledPattern[i] &gt;&gt;&gt; 8; int count = compiledPattern[i++] &amp; 0xff; if (count == 255) &#123; count = compiledPattern[i++] &lt;&lt; 16; count |= compiledPattern[i++]; &#125; switch (tag) &#123; case TAG_QUOTE_ASCII_CHAR: toAppendTo.append((char)count); break; case TAG_QUOTE_CHARS: toAppendTo.append(compiledPattern, i, count); i += count; break; default: subFormat(tag, count, delegate, toAppendTo, useDateFormatSymbols); break; &#125; &#125; return toAppendTo;&#125; calendar.setTime(date) è¿™æ¡è¯­å¥æ”¹å˜äº† calendarï¼Œç¨åï¼Œcalendar è¿˜ä¼šç”¨åˆ°ï¼ˆåœ¨ subFormat æ–¹æ³•é‡Œï¼‰ï¼Œè€Œè¿™å°±æ˜¯å¼•å‘é—®é¢˜çš„æ ¹æºã€‚æƒ³è±¡ä¸€ä¸‹ï¼Œåœ¨ä¸€ä¸ªå¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œæœ‰ä¸¤ä¸ªçº¿ç¨‹æŒæœ‰äº†åŒä¸€ä¸ª SimpleDateFormat çš„å®ä¾‹ï¼Œåˆ†åˆ«è°ƒç”¨format æ–¹æ³•ï¼š 12345çº¿ç¨‹ 1 è°ƒç”¨ format æ–¹æ³•ï¼Œæ”¹å˜äº† calendar è¿™ä¸ªå­—æ®µã€‚çº¿ç¨‹ 1 ä¸­æ–­äº†ã€‚çº¿ç¨‹ 2 å¼€å§‹æ‰§è¡Œï¼Œå®ƒä¹Ÿæ”¹å˜äº† calendarã€‚çº¿ç¨‹ 2 ä¸­æ–­äº†ã€‚çº¿ç¨‹ 1 å›æ¥äº† æ­¤æ—¶ï¼Œcalendar å·²ç„¶ä¸æ˜¯å®ƒæ‰€è®¾çš„å€¼ï¼Œè€Œæ˜¯èµ°ä¸Šäº†çº¿ç¨‹ 2 è®¾è®¡çš„é“è·¯ã€‚å¦‚æœå¤šä¸ªçº¿ç¨‹åŒæ—¶äº‰æŠ¢ calendar å¯¹è±¡ï¼Œåˆ™ä¼šå‡ºç°å„ç§é—®é¢˜ï¼Œæ—¶é—´ä¸å¯¹ï¼Œçº¿ç¨‹æŒ‚æ­»ç­‰ç­‰ã€‚ åˆ†æä¸€ä¸‹ format çš„å®ç°ï¼Œæˆ‘ä»¬ä¸éš¾å‘ç°ï¼Œç”¨åˆ°æˆå‘˜å˜é‡ calendarï¼Œå”¯ä¸€çš„å¥½å¤„ï¼Œå°±æ˜¯åœ¨è°ƒç”¨ subFormat æ—¶ï¼Œå°‘äº†ä¸€ä¸ªå‚æ•°ï¼Œå´å¸¦æ¥äº†è®¸å¤šçš„é—®é¢˜ã€‚å…¶å®ï¼Œåªè¦åœ¨è¿™é‡Œç”¨ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼Œä¸€è·¯ä¼ é€’ä¸‹å»ï¼Œæ‰€æœ‰é—®é¢˜éƒ½å°†è¿åˆƒè€Œè§£ã€‚ è¿™ä¸ªé—®é¢˜èƒŒåéšè—ç€ä¸€ä¸ªæ›´ä¸ºé‡è¦çš„é—®é¢˜â€“æ— çŠ¶æ€ï¼šæ— çŠ¶æ€æ–¹æ³•çš„å¥½å¤„ä¹‹ä¸€ï¼Œå°±æ˜¯å®ƒåœ¨å„ç§ç¯å¢ƒä¸‹ï¼Œéƒ½å¯ä»¥å®‰å…¨çš„è°ƒç”¨ã€‚è¡¡é‡ä¸€ä¸ªæ–¹æ³•æ˜¯å¦æ˜¯æœ‰çŠ¶æ€çš„ï¼Œå°±çœ‹å®ƒæ˜¯å¦æ”¹åŠ¨äº†å…¶å®ƒçš„ä¸œè¥¿ï¼Œæ¯”å¦‚å…¨å±€å˜é‡ï¼Œæ¯”å¦‚å®ä¾‹çš„å­—æ®µã€‚format æ–¹æ³•åœ¨è¿è¡Œè¿‡ç¨‹ä¸­æ”¹åŠ¨äº† SimpleDateFormat çš„ calendar å­—æ®µï¼Œæ‰€ä»¥ï¼Œå®ƒæ˜¯æœ‰çŠ¶æ€çš„ã€‚ è¿™ä¹ŸåŒæ—¶æé†’æˆ‘ä»¬åœ¨å¼€å‘å’Œè®¾è®¡ç³»ç»Ÿçš„æ—¶å€™æ³¨æ„ä¸‹ä¸€ä¸‹ä¸‰ç‚¹: 1.è‡ªå·±å†™å…¬ç”¨ç±»çš„æ—¶å€™ï¼Œè¦å¯¹å¤šçº¿ç¨‹è°ƒç”¨æƒ…å†µä¸‹çš„åæœåœ¨æ³¨é‡Šé‡Œè¿›è¡Œæ˜ç¡®è¯´æ˜ 2.å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œå¯¹æ¯ä¸€ä¸ªå…±äº«çš„å¯å˜å˜é‡éƒ½è¦æ³¨æ„å…¶çº¿ç¨‹å®‰å…¨æ€§ 3.æˆ‘ä»¬çš„ç±»å’Œæ–¹æ³•åœ¨åšè®¾è®¡çš„æ—¶å€™ï¼Œè¦å°½é‡è®¾è®¡æˆæ— çŠ¶æ€çš„ è§£å†³æ–¹æ³•1ã€éœ€è¦çš„æ—¶å€™åˆ›å»ºæ–°å®ä¾‹ è¯´æ˜ï¼šåœ¨éœ€è¦ç”¨åˆ° SimpleDateFormat çš„åœ°æ–¹æ–°å»ºä¸€ä¸ªå®ä¾‹ï¼Œä¸ç®¡ä»€ä¹ˆæ—¶å€™ï¼Œå°†æœ‰çº¿ç¨‹å®‰å…¨é—®é¢˜çš„å¯¹è±¡ç”±å…±äº«å˜ä¸ºå±€éƒ¨ç§æœ‰éƒ½èƒ½é¿å…å¤šçº¿ç¨‹é—®é¢˜ï¼Œä¸è¿‡ä¹ŸåŠ é‡äº†åˆ›å»ºå¯¹è±¡çš„è´Ÿæ‹…ã€‚åœ¨ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œè¿™æ ·å…¶å®å¯¹æ€§èƒ½å½±å“æ¯”ä¸æ˜¯å¾ˆæ˜æ˜¾çš„ã€‚ 2ã€ä½¿ç”¨åŒæ­¥ï¼šåŒæ­¥ SimpleDateFormat å¯¹è±¡ 1234567891011121314151617181920import java.text.ParseException;import java.text.SimpleDateFormat;import java.util.Date;public class DateSyncUtil &#123; private static SimpleDateFormat sdf = new SimpleDateFormat(\"yyyy-MM-dd HH:mm:ss\"); public static String formatDate(Date date) throws ParseException &#123; synchronized(sdf) &#123; return sdf.format(date); &#125; &#125; public static Date parse(String strDate) throws ParseException &#123; synchronized(sdf) &#123; return sdf.parse(strDate); &#125; &#125;&#125; è¯´æ˜ï¼šå½“çº¿ç¨‹è¾ƒå¤šæ—¶ï¼Œå½“ä¸€ä¸ªçº¿ç¨‹è°ƒç”¨è¯¥æ–¹æ³•æ—¶ï¼Œå…¶ä»–æƒ³è¦è°ƒç”¨æ­¤æ–¹æ³•çš„çº¿ç¨‹å°±è¦ block ç­‰å¾…ï¼Œå¤šçº¿ç¨‹å¹¶å‘é‡å¤§çš„æ—¶å€™ä¼šå¯¹æ€§èƒ½æœ‰ä¸€å®šçš„å½±å“ã€‚ 3ã€ä½¿ç”¨ ThreadLocal 12345678910111213141516171819202122import java.text.DateFormat;import java.text.ParseException;import java.text.SimpleDateFormat;import java.util.Date;public class ConcurrentDateUtil &#123; private static ThreadLocal&lt;DateFormat&gt; threadLocal = new ThreadLocal&lt;DateFormat&gt;() &#123; @Override protected DateFormat initialValue() &#123; return new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;); &#125; &#125;; public static Date parse(String dateStr) throws ParseException &#123; return threadLocal.get().parse(dateStr); &#125; public static String format(Date date) &#123; return threadLocal.get().format(date); &#125;&#125; è¯´æ˜ï¼šä½¿ç”¨ ThreadLocal, ä¹Ÿæ˜¯å°†å…±äº«å˜é‡å˜ä¸ºç‹¬äº«ï¼Œçº¿ç¨‹ç‹¬äº«è‚¯å®šèƒ½æ¯”æ–¹æ³•ç‹¬äº«åœ¨å¹¶å‘ç¯å¢ƒä¸­èƒ½å‡å°‘ä¸å°‘åˆ›å»ºå¯¹è±¡çš„å¼€é”€ã€‚å¦‚æœå¯¹æ€§èƒ½è¦æ±‚æ¯”è¾ƒé«˜çš„æƒ…å†µä¸‹ï¼Œä¸€èˆ¬æ¨èä½¿ç”¨è¿™ç§æ–¹æ³•ã€‚ Java 8 ä¸­çš„è§£å†³åŠæ³•Java 8 æä¾›äº†æ–°çš„æ—¥æœŸæ—¶é—´ APIï¼Œå…¶ä¸­åŒ…æ‹¬ç”¨äºæ—¥æœŸæ—¶é—´æ ¼å¼åŒ–çš„ DateTimeFormatterï¼Œå®ƒä¸ SimpleDateFormat æœ€å¤§çš„åŒºåˆ«åœ¨äºï¼šDateTimeFormatter æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œè€Œ SimpleDateFormat å¹¶ä¸æ˜¯çº¿ç¨‹å®‰å…¨ã€‚ DateTimeFormatter å¦‚ä½•ä½¿ç”¨ï¼š è§£ææ—¥æœŸ 123String dateStr= \"2018å¹´06æœˆ20æ—¥\";DateTimeFormatter formatter = DateTimeFormatter.ofPattern(\"yyyyå¹´MMæœˆddæ—¥\"); LocalDate date= LocalDate.parse(dateStr, formatter); æ—¥æœŸè½¬æ¢ä¸ºå­—ç¬¦ä¸² 123LocalDateTime now = LocalDateTime.now(); DateTimeFormatter format = DateTimeFormatter.ofPattern(\"yyyyå¹´MMæœˆddæ—¥ hh:mm a\");String nowStr = now .format(format); ç”± DateTimeFormatter çš„é™æ€æ–¹æ³• ofPattern() æ„å»ºæ—¥æœŸæ ¼å¼ï¼ŒLocalDateTime å’Œ LocalDate ç­‰ä¸€äº›è¡¨ç¤ºæ—¥æœŸæˆ–æ—¶é—´çš„ç±»ä½¿ç”¨ parse å’Œ format æ–¹æ³•æŠŠæ—¥æœŸå’Œå­—ç¬¦ä¸²åšè½¬æ¢ã€‚ ä½¿ç”¨æ–°çš„ APIï¼Œæ•´ä¸ªè½¬æ¢è¿‡ç¨‹éƒ½ä¸éœ€è¦è€ƒè™‘çº¿ç¨‹å®‰å…¨çš„é—®é¢˜ã€‚ æ€»ç»“SimpleDateFormat æ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ç±»ï¼Œå¤šçº¿ç¨‹ç¯å¢ƒä¸‹æ³¨æ„çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œå¦‚æœæ˜¯ Java 8 ï¼Œå»ºè®®ä½¿ç”¨ DateTimeFormatter ä»£æ›¿ SimpleDateFormatã€‚ å‚è€ƒèµ„æ–™http://www.cnblogs.com/peida/archive/2013/05/31/3070790.html ç›¸å…³æ–‡ç« 20 ä¸ªæ¡ˆä¾‹æ•™ä½ åœ¨ Java 8 ä¸­å¦‚ä½•å¤„ç†æ—¥æœŸå’Œæ—¶é—´?","tags":[{"name":"Java","slug":"Java","permalink":"http://yoursite.com/tags/Java/"}]},{"title":"è‹¦é€¼çš„æ¯•ä¸šè®ºæ–‡ç»å†","date":"2018-05-25T16:00:00.000Z","path":"2018/05/26/paper/","text":"èƒŒæ™¯æœ€è¿‘ä¸€ç›´åœ¨å­¦æ ¡å¿™æ¯•ä¸šè®ºæ–‡çš„äº‹ï¼ŒæŠ±æ­‰äº†ï¼Œå¾ˆé•¿ä¸€æ®µæ—¶é—´æ²¡æ›´æ–°æ–‡ç« äº†ï¼Œä»Šå¤©æ˜ŸæœŸå…­ï¼Œæ˜¨å¤©æ˜ŸæœŸäº”ï¼Œå¹¸å¥½æ‰€æœ‰èµ„æ–™éƒ½åœ¨å‘¨æœ«å‰äº¤é½äº†ï¼Œæ˜¨æ™šè¿˜åˆ°å‚åŠ ç­ä¸Šçš„èšä¼šï¼Œä¹Ÿå–äº†ä¸å°‘é…’ï¼Œä½†å¹¸å¥½æ²¡é†‰ï¼Œä¸ç„¶ä»Šå¤©è‚¯å®šä¸ä¼šå†™ä¸‹è¿™ç¯‡æ–‡ç« çš„ã€‚è¿™ç¯‡æ–‡ç« å°±æŠŠä»æ¥è§¦åˆ°æ¯•ä¸šè®ºæ–‡æŒ‡å¯¼è€å¸ˆåˆ°ç°åœ¨çš„è¿™åŠå¹´æ—¶é—´æœ‰å…³æ¯•ä¸šè®ºæ–‡çš„äº‹éƒ½è®²è®²ï¼Œå¸Œæœ›èƒ½å¤Ÿç•™ä¸‹ç‚¹å›å¿†ï¼ æ¯•è®¾å°åˆ†é˜Ÿæˆç«‹å­¦æ ¡ä¼šç»™æ¯ä¸ªæ¯•ä¸šå¯¼å¸ˆå®‰æ’å¸¦å‡ ä¸ªå­¦ç”Ÿï¼ˆ7ï½8 äººå·¦å³ï¼‰ï¼Œä½†æ˜¯åœ¨å­¦æ ¡å‘å‡ºè¡¨æ ¼ä¹‹å‰ï¼Œè°ä¹Ÿä¸çŸ¥é“è‡ªå·±å°†ä¼šç”±å“ªä¸ªå¯¼å¸ˆå¸¦ï¼Œç”šè‡³ä½ ä¼šå‘ç°å°±ç®—å­¦æ ¡å‘å‡ºè¡¨æ ¼åçœ‹åˆ°è‡ªå·±å¯¼å¸ˆåå­—åï¼Œè‡ªå·±éƒ½ä¸çŸ¥é“è¿™å¯¼å¸ˆæ˜¯è°ï¼Ÿæ˜¯ç”·æ˜¯å¥³ï¼Ÿï¼ˆå½“æŸä¸ªå¯¼å¸ˆçš„åå­—æ¯”è¾ƒä¸­æ€§çš„æ—¶å€™ï¼‰åˆ°åº•å¥½ä¸å¥½ç›¸å¤„ï¼Ÿæ€§æ ¼å’‹æ ·ï¼Ÿä»–çš„è”ç³»æ–¹å¼ï¼ˆæ‰‹æœº æˆ–è€… QQï¼‰ï¼ŒWTFï¼Œä¸€ä¸ªéƒ½ä¸çŸ¥é“ï¼Ÿè‹¦é€¼äº†ï¼Œåé¢ä¹Ÿæ˜¯é€šè¿‡é—®è¾…å¯¼å‘˜æ‰çŸ¥é“è¿™äº›æƒ…å†µã€‚åé¢æˆ‘ä»¬å‡ ä¸ªäººä¸­å°±æœ‰ä¸€ä¸ªå¸¦å¤´å»ºäº†ä¸ª QQ ç¾¤ï¼ˆæ¯•è®¾å°åˆ†é˜Ÿï¼‰ï¼Œå¹¶æŠŠæŒ‡å¯¼è€å¸ˆæ‹‰è¿›ç¾¤äº†ã€‚ å°±è¿™æ ·ï¼Œæˆ‘ä»¬ç»ˆäºå¼€å§‹äº†æ¯•è®¾å°åˆ†é˜Ÿä¹‹æ—…ï¼ å®ä¹ æ—¶çš„æ¯•è®¾çŠ¶æ€2017.12æœˆé‚£æ—¶æ˜¯è¿˜åœ¨å…¬å¸å®ä¹ çš„ï¼Œåˆ°äº†æ¯•ä¸šè®¾è®¡é€‰é¢˜çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯¼å¸ˆè¿˜å¥½ï¼Œç»™æˆ‘ä»¬æ¯ä¸ªäººå¾ˆè‡ªç”±çš„é€‰æ‹©ï¼Œä½ å¯ä»¥è‡ªæ‹Ÿé¢˜ç›®ï¼Œä¹Ÿå¯ä»¥ä»å¯¼å¸ˆé‚£é‡ŒæŒ‘é€‰é¢˜ç›®ã€‚ä¸è¿‡æˆ‘çœ‹äº†ä¸‹è€å¸ˆç»™çš„é¢˜ç›®ï¼Œå¤§éƒ½æ˜¯æ·±åº¦å­¦ä¹ ã€æœºå™¨å­¦ä¹ åšçš„ç›¸å…³å›¾åƒè¯†åˆ«ã€æ¨èç³»ç»Ÿã€æœç´¢ç³»ç»Ÿã€äººè„¸è¯†åˆ«ã€ç½‘ç»œæµé‡ç›‘æ§ã€æ–‡æœ¬æƒ…æ„Ÿåˆ†æç­‰é«˜å¤§ä¸Šçš„è¯¾é¢˜ã€‚è‡£å¦¾åšä¸åˆ°ï¼Œæ¯•ç«Ÿè¿™éƒ½æ˜¯ç ”ç©¶ç”Ÿæ‰ä¼šç ”ç©¶ç‚¹æ–¹å‘ï¼Œè€å¸ˆä¼šå‘å‡ºæ¥è¿™äº›é¢˜ç›®å¯èƒ½ä¹Ÿæ˜¯å’Œå¥¹è‡ªå·±åœ¨ç ”ç©¶å­¦ä¹ çš„ç›¸å…³çŸ¥è¯†æœ‰å…³ï¼ˆå› ä¸ºæˆ‘åæ¥ç»™å¯¼å¸ˆæ£€æŸ¥æˆ‘çš„ç³»ç»Ÿçš„æ—¶å€™å°±æ˜¯å¯¼å¸ˆå¸¦çš„ä¸€ä¸ªç ”ç©¶ç”Ÿæ£€æŸ¥çš„ï¼ŒæœŸé—´é‚£ä¸ªå­¦é•¿å’Œæˆ‘è¯´ä»–æœ€è¿‘å°±åœ¨åšæ–‡æœ¬æƒ…æ„Ÿåˆ†æç›¸å…³çš„ä¸€ä¸ªé¡¹ç›®ï¼Œå› ä¸ºçœ‹åˆ°æˆ‘é¡¹ç›®ä¸­çš„ä¸­æ–‡åˆ†è¯å™¨ï¼Œæ‰€ä»¥è¿˜å‘æˆ‘è¯·æ•™äº†ä¸‹ï¼Œæˆ‘äºæ˜¯æŠŠæˆ‘åŸæ¥å†™è¿‡çš„ä¸€ç¯‡ä¸­è‹±æ–‡åˆ†è¯å™¨æ‰¾å‡ºæ¥ç»™ä»–ä¸€ä¸ªä¸ªè§£é‡Šï¼‰ï¼Œæ‰€ä»¥å¯¼å¸ˆå¸Œæœ›åœ¨æˆ‘ä»¬è¿™é‡Œä¹Ÿèƒ½å¤Ÿæœ‰äººå»ç ”ç©¶ä¸‹è¿™æ–¹é¢çš„çŸ¥è¯†ï¼Œæ‹“å±•ä¸‹è§†é‡ã€‚ä½†æ˜¯ç”±äºåœ¨å…¬å¸å®ä¹ ï¼Œå·¥ä½œä¹‹å¤–è…¾å‡ºçš„æ—¶é—´ç¡®å®æœ‰é™ï¼Œæ²¡è¿™ä¹ˆå¤šæ—¶é—´å»å­¦ä¹ è¿™äº›ç‰¹åˆ«æ–°çš„ä¸œè¥¿ï¼Œè€Œä¸”è¿˜è¦åšå‡ºä¸€å®šçš„æˆæœå‡ºæ¥ï¼Œè¿™è¿˜æ˜¯æœ‰ç‚¹æŒ‘æˆ˜æ€§çš„ã€‚å¯¼å¸ˆè¯´ä½ å¯ä»¥è‡ªæ‹Ÿé¢˜ç›®ï¼Œæˆ–è€…æŠŠè‡ªå·±åœ¨å…¬å¸åšçš„é¡¹ç›®ä¼˜åŒ–åæ‹¿æ¥åšæ¯•è®¾é¡¹ç›®ã€‚äºæ˜¯ï¼Œæˆ‘é€‰æ‹©çš„æ˜¯æ‹¿è‡ªå·±ä»¥å‰å†™çš„é¡¹ç›®æ¥å½“æ¯•ä¸šè®ºæ–‡é¡¹ç›®äº†ï¼Œå› ä¸ºæ„Ÿè§‰é¡¹ç›®ä¹Ÿè¿˜è¡Œï¼Œæ‹¿æ¥åšæ¯•è®¾å®Œå…¨å¯ä»¥äº†ï¼Œæ‰€ä»¥åé¢è‡ªå·±ä¹Ÿå°±æ¯”è¾ƒè½»æ¾äº†ã€‚ æ¯•è®¾æµç¨‹æŠŠè‡ªå·±çš„æ¯•è®¾é¢˜ç›®æŠ¥ç»™è€å¸ˆåï¼Œè€å¸ˆä¼šæ ¹æ®ä½ çš„é¢˜ç›®å®¡æ ¸æ˜¯å¦å¯ä»¥æ‹¿æ¥å½“æ¯•è®¾ã€‚ç„¶åå†è¦æ±‚ä½ æŠŠæ¯•ä¸šè®¾è®¡çš„å¼€é¢˜æŠ¥å‘Šä¹¦ï¼ˆè®ºæ–‡é¢˜ç›®ã€ç›®çš„ã€æ„ä¹‰ã€æ€ä¹ˆåšã€åšå‡ºä»€ä¹ˆæ•ˆæœã€ç›®æ ‡ä¹‹ç±»çš„ï¼‰å†™è¯¦ç»†ä¸Šäº¤ä¸Šå»ã€‚è¦ç»è¿‡å¯¼å¸ˆå’Œå­¦æ ¡çš„å®¡æ‰¹åæ‰èƒ½å¤Ÿæ­£å¼å¼€é¢˜ã€‚å¼€é¢˜åç¡®å®šåå‡ ä¹å°±å¯ä»¥å¼€å§‹å†™è‡ªå·±çš„é¡¹ç›®äº†ã€‚æœºæ™ºçš„æˆ‘ï¼Œé‚£æ—¶æ¯”è¾ƒè½»æ¾ï¼Œå“ˆå“ˆå“ˆï¼Œå·¥ä½œä¹‹å¤–éƒ½æ’¸ä»£ç å’Œåšå®¢å‘¢ã€‚å·®ä¸å¤šè¿‡äº†ä¸€ä¸ªæœˆåï¼Œå¯¼å¸ˆå°±å¼€å§‹åœ¨ç¾¤é‡Œé—®æˆ‘ä»¬ç³»ç»Ÿå®Œæˆçš„æ€ä¹ˆæ ·äº†ï¼Ÿç„¶åè¦æˆ‘ä»¬ä¸Šäº¤è®ºæ–‡ä»»åŠ¡ä¹¦ï¼Œå­¦æ ¡çš„è¿™ç§ææ–™æœ‰æ—¶å€™è¦çš„å¾ˆæ€¥ï¼Œä¸å¾—ä¸åæ§½ä¸‹ï¼Œå¾ˆå¤´ç–¼ï¼Œè‡ªå·±æœ‰æ—¶å€™éƒ½ä¸€ä¸‹å­äº¤ä¸äº†ã€‚åˆè¿‡äº†ä¸€æ®µæ—¶é—´å°±éœ€è¦æŠŠè®ºæ–‡åˆç¨¿äº¤ä¸Šå»ï¼ŒçœŸæ˜¯è‹¦é€¼ï¼Œé‚£æ—¶è¿˜ä¸çŸ¥é“è®ºæ–‡çš„æ¨¡ç‰ˆåˆ°åº•æ˜¯å’‹æ ·ï¼Ÿè¯¥æ€ä¹ˆå†™æœ¬ç§‘è®ºæ–‡å‘¢ï¼Ÿæå¾—æˆ‘è‡ªå·±é‚£æ®µæ—¶é—´èŠ±äº†å‘¨æœ«ä¸¤å¤©å’Œä¸€å¤©çš„ä¸Šç­çš„æ—¶é—´æ‰å‹‰å¼ºäº¤äº†ä¸ªä¸€èˆ¬çš„åˆç¨¿ï¼Œåˆç¨¿ä¸­çš„å„ç§å›¾ç”»çš„æˆ‘æ˜¯æƒ³å“­ã€‚çœŸå¤šï¼Œè¿˜éº»çƒ¦ã€‚å¹¸å¥½åœ¨é‚£æ®µæ—¶é—´å…¬å¸çš„ä»»åŠ¡è¿˜ä¸å¿™ï¼Œæ‰€ä»¥åœ¨æœ‰æ—¶é—´åœ¨å®ä¹ ä¸Šç­çš„æ—¶å€™ä¹Ÿç¨å¾®å®Œæˆä¸‹è‡ªå·±çš„åˆç¨¿ã€‚ ä»Šå¹´ 3 ï½ 4 æœˆçš„æ—¶å€™ï¼Œå¯¼å¸ˆä¹Ÿåœ¨ä¸æ–­çš„å«æˆ‘ä»¬æŠŠå­¦æ ¡è¯¥äº¤çš„å®ä¹ æ¯å‘¨æŠ¥å‘Šäº¤ç»™å¥¹ã€‚è¿™ä¸ªå®ä¹ è¿˜æœ‰å®ä¹ ç”³è¯·è¡¨ã€å®ä¹ é‰´å®šè¡¨ææ–™ï¼ˆè¦æ±‚ç›–ç« ï¼‰ï¼Œè¿™ä¸¤ä¸ªèµ„æ–™ä¹Ÿæ˜¯å¾ˆé‡è¦çš„ï¼Œå¦‚æœåé¢æ²¡æœ‰è¿™ä¸ªææ–™éƒ½ä¸èƒ½å‚åŠ ç­”è¾©çš„ã€‚ åœ¨å¿«äº”æœˆçš„æ—¶å€™ï¼Œå¯¼å¸ˆé‚£æ—¶å°±å¤©å¤©æ™šä¸Šæ·±å¤œåœ¨æ¯•è®¾å°åˆ†é˜Ÿç¾¤é‡Œå‚¬åŒå­¦ä»¬ï¼Œä½ ä»¬çš„è®ºæ–‡å’Œç³»ç»Ÿéƒ½å®Œæˆçš„å’‹æ ·äº†ï¼Ÿç„¶ååˆå‚¬äº†è¦äº¤è®ºæ–‡ä¸­æœŸæŠ¥å‘Šï¼ˆè¿™ä¸ªåº”è¯¥ä¹Ÿè›®é‡è¦çš„ï¼Œæˆ‘ä»¬ç­ä¸¤ä¸ªåŒå­¦å¥½åƒå°±å› ä¸ºè¿™ä¸ªå¯¼è‡´æœ‰ä¸ªè®ºæ–‡ä¸­æœŸæŠ¥å‘Šè­¦å‘Šï¼Œå“å¾—ä»–ä»¬åæ¥ç­”è¾©çš„æ—¶å€™éƒ½æ€•è‡ªå·±æŒ‚äº†ï¼‰ã€‚ è¿‡å®ŒåŠ³åŠ¨èŠ‚åï¼Œå†è¿‡äº†å‡ å¤©åï¼Œæˆ‘å°±è¾èŒäº†ã€‚è¾èŒååœ¨è‹å·ç©äº†å‡ å¤©ï¼ŒæœŸé—´ä¹Ÿæ˜¯åœ¨ä¸æ–­çš„ä¿®æ”¹è‡ªå·±çš„è®ºæ–‡å’Œä¼˜åŒ–äº›æ ¼å¼é—®é¢˜ã€‚ åæ¥åˆæµªå›å®¶äº†ï¼Œåœ¨å®¶å‘†äº†å‡ å¤©ï¼Œä¹Ÿæ˜¯æ”¹è®ºæ–‡æ”¹åˆ°æ·±å¤œï¼Œé‚£æ®µæ—¶é—´è‡ªå·±å·²ç»å¼€å§‹åœ¨æŠŠè‡ªå·±çš„è®ºæ–‡åˆç¨¿æ‹¿åˆ°äº›ç¬¬ä¸‰æ–¹å…è´¹çš„æŸ¥é‡å»æŸ¥é‡ç½‘ç«™å»æŸ¥é‡ï¼Œç„¶åæ ¹æ®æŸ¥é‡åçš„ç»“æœï¼Œå°†ä¸€äº›é‡å¤çš„åœ°æ–¹ä¸œæ”¹æ”¹ï¼Œè¥¿å‡‘å‡‘ï¼Œæˆ–è€…ç”¨è‡ªå·±çš„è¯å†™ä¸€éã€‚è¿™æ ·å°±å¯ä»¥å‡å°‘ç‚¹é‡å¤è¯­å¥ã€‚ å†ç„¶åå°±æ˜¯ 18 å·èµ¶å›æ¥å­¦æ ¡äº†ï¼Œ19ï¼Œ20å·åˆšå¥½å‘¨æœ«ï¼Œåˆæ˜¯ä¸çœ ä¹‹å¤œï¼Œé‚£ä¸¤å¤©ä¸æ–­æŸ¥é‡ï¼Œå‘åˆ«äººè¯·æ•™ï¼Œæ€ä¹ˆåŠ å­—æ•°ï¼Œè‡ªå·±ä¸€å¼€å§‹çš„å­—æ•°å¥½åƒè¿˜æ˜¯ä¸å¤Ÿçš„ï¼Œå­¦æ ¡è¦æ±‚çš„å­—æ•°æœ‰ç‚¹é«˜ï¼Œå…¶ä»–å­¦æ ¡éƒ½æ˜¯ 8000 å­—ï¼Œæˆ‘ä»¬å´è¦æ±‚ 1.5 wï¼ŒçœŸæ˜¯èƒ½æ‰¯å•Šï¼Œæ€ä¹ˆå¯ä»¥æ‰¯å‡ºè¿™ä¹ˆå¤šå­—æ¥ã€‚é€šè¿‡æŸäººçš„ç»éªŒä¹‹è°ˆï¼Œæˆ‘æˆåŠŸçš„æ‰¯äº†ä¸å°‘å­—ï¼Œè¿˜ä¸å¸¦é‡å¤çš„ï¼ŒğŸ˜„ã€‚ ç„¶å 21 å·å‘¨ä¸€æ‹¿ç»™è€å¸ˆæ£€æŸ¥çš„æ—¶å€™å°±æ˜¯çœ‹äº†ä¸‹æ ¼å¼ï¼ˆè€å¸ˆä¸åœ¨åŠå…¬å®¤ï¼Œå¥¹å¸¦çš„ç ”ç©¶ç”Ÿç»™æ£€æŸ¥çš„ï¼‰ï¼Œè¯´ä½ å…¨æ–‡é¦–è¡Œå’‹éƒ½æ²¡ç¼©è¿›å‘¢ï¼ˆå†™åšå®¢å†™ä¹ æƒ¯äº†ï¼Œè°è¿˜ç¼©è¿›å•Šï¼‰ï¼Œè¡Œé—´è·æ¯”è¾ƒå¤§ï¼Œå›¾çš„æ ‡å·é”™è¯¯ï¼Œä¸»è¦è¿˜æ˜¯æ£€æŸ¥æ ¼å¼ã€‚å½“æ™šï¼Œåˆå¥½å¥½æ”¹äº†ä¸‹ï¼Œå¹¶å’Œæˆ‘åŒå­¦è®¨è®ºäº†ä¸‹ä»–çš„æŒ‡å¯¼å¯¼å¸ˆçš„è¦æ±‚æœ‰å“ªäº›ï¼Œå¹¶ä¹Ÿåšäº†ç›¸åº”çš„ä¿®æ”¹ã€‚ï¼ˆå› ä¸ºæˆ‘çš„ç­”è¾©å¯¼å¸ˆå°±æœ‰æˆ‘é‚£åŒå­¦çš„æŒ‡å¯¼è€å¸ˆï¼‰è®°å¾—å½“æ™šå¥½åƒæ”¹è®ºæ–‡æ”¹åˆ°ä¸‰ç‚¹ï¼Œå¹¸å¥½æœ‰äººé™ªç€æˆ‘ä¸€è¾¹èŠå¤©ä¸€è¾¹æ”¹ï¼Œä¸ç„¶æ—©å›°äº†ï¼Œç¡äº†ã€‚ 22 å·ä¸€æ—©å°±é†’æ¥äº†ï¼Œç„¶åå°±å»æ‰“å°åº—æ‰“å°è®ºæ–‡ã€‚è¿™é‡Œæƒ³ç»™çš„å¤§å®¶ä¸€ä¸ªå»ºè®®å°±æ˜¯ï¼šå¦‚æœä½ ä¹Ÿè¦æ‰“å°è®ºæ–‡ï¼Œæœ€å¥½æ—©ç‚¹å»ï¼Œå› ä¸ºæ¯•ä¸šå­£ï¼Œå­¦æ ¡æ‰“å°åº—å‡ ä¹éƒ½æ˜¯çˆ†æ»¡ï¼Œæ‰“å°è®ºæ–‡çš„éå¸¸å¤šï¼Œè¿˜æœ‰å­¦å¼Ÿå­¦å¦¹æ‰“å°å„ç§è€ƒè¯•å·å­ã€èµ„æ–™å•¥çš„ï¼Œåæ­£äººå¾ˆå¤šï¼Œä¼°è®¡è¦æ’é˜Ÿã€‚æŒ‡å¯¼è€å¸ˆä¹Ÿä¸æ˜¯ä¸€ç›´åœ¨åŠå…¬å®¤çš„ï¼Œä»–ä»¬ä¹Ÿæ˜¯è¦ä¸Šè¯¾çš„ã€‚æ‰€ä»¥æœ€å¥½åœ¨å¯¼å¸ˆåœ¨åŠå…¬å®¤çš„æ—¶å€™èƒ½èµ¶åˆ°ï¼Œè¿™æ ·å°±ä¸ä¼šé”™è¿‡äº†ã€‚è¿™æ¬¡è€å¸ˆæ£€æŸ¥è®ºæ–‡å°±æ¯”è¾ƒä»”ç»†äº†ï¼Œè®ºæ–‡ä¸€è¡Œè¡Œçš„æ‰¾å†…å®¹ï¼Œçœ‹æ˜¯å¦é€šé¡ºï¼Ÿæ˜¯å¦æœ‰ä¸åˆé€‚çš„åœ°æ–¹ï¼Ÿæ ‡ç‚¹ç¬¦å·æ˜¯ä¸æ˜¯å¤šäº†æˆ–è€…å°‘äº†ï¼Ÿæ ¼å¼æ˜¯ä¸æ˜¯è¿˜æœ‰é—®é¢˜ï¼Ÿæ‰€ä»¥å‘¢ï¼Œè¿™æ¬¡åˆå¾ˆæƒ¨ï¼Œè¦æ”¹çš„åœ°æ–¹å¾ˆå¤šï¼Œè¿˜åŒ…æ‹¬æµç¨‹å›¾å’Œ E-R å›¾è¦æ”¹çš„ã€‚è‹¦é€¼äº†ï¼Œä¸‹åˆå›å»ç§Ÿæˆ¿å®¾é¦†çš„æ—¶å€™å°±å¼€å§‹æ‹¼å‘½çš„æ”¹ã€‚æ”¹çš„å·®ä¸å¤šäº†ï¼Œå› ä¸ºç¬¬äºŒå¤©è¦ç­”è¾©äº†ï¼Œæ‰€ä»¥å°±åœ¨çœ‹çœ‹è‡ªå·±çš„ç³»ç»Ÿæ˜¯å¦èƒ½å¤Ÿè·‘èµ·æ¥ï¼Œæœ‰æ²¡æœ‰ä»€ä¹ˆbugï¼Œç»“æœè¿˜çœŸå‘ç°å‡ ä¸ªå°é”™è¯¯å’Œä¸€ä¸ªå¤§é”™è¯¯ï¼Œå°é”™è¯¯å¾ˆå¿«ä¿®å¤å®Œå–„äº†ï¼Œæœ‰ä¸€ä¸ª Redis å­˜æ•°æ®å†å–å‡ºæ¥çš„æ—¶å€™æ•°æ®å˜åŒ–é—®é¢˜å½“ç„¶debugäº†å¾ˆä¹…æ²¡æ‰¾åˆ°åŸå› ã€‚æ‰¾åˆ°æ·±å¤œä¸€ç‚¹å¤šï¼Œæ²¡è§£å†³ï¼Œæ”¾å¼ƒäº†ï¼Œç¬¬äºŒå¤©ä¸æ¼”ç¤ºè¿™å—ã€‚å½“æ™šæ€•è‡ªå·±æ˜å¤©é¡¹ç›®å¯åŠ¨çš„æ—¶å€™å…¶ä»–ç¯å¢ƒè¦ä¸€ä¸ªä¸ªèµ·ï¼Œéœ€è¦è€—è´¹ä¸å°‘æ—¶é—´ï¼Œäºæ˜¯è‡ªå·±ç®€å•çš„å†™äº†ä¸ªè„šæœ¬ï¼Œä¸€é”®å°†è‡ªå·±é¡¹ç›®çš„ç¯å¢ƒå¯åŠ¨èµ·æ¥ï¼Œè¿™æ ·å°±å¯ä»¥ç›´æ¥è¿è¡Œé¡¹ç›®å±•ç¤ºç»™ç­”è¾©è€å¸ˆï¼ŒèŠ‚çœæ—¶é—´ï¼Œå°¤å…¶æ˜¯å…³é”®åœºåˆï¼Œæ€•æ‰é“¾å­ã€‚ 23 å·æ—©ä¸Šå¾ˆæ—©å°±å»æŠŠè‡ªå·±çš„å®ä¹ ç”³è¯·è¡¨ã€å®ä¹ é‰´å®šè¡¨ã€å®ä¹  20 å‘¨æ—¥å¿—ã€å®ä¹ ç»ˆç»“ã€è®ºæ–‡åˆç¨¿è¿™äº›èµ„æ–™æ‰“å°ï¼Œç„¶åæ‹¿ç»™å¯¼å¸ˆæŸ¥çœ‹å’Œæ‰“åˆ†ã€‚ï¼ˆåˆæ‰¾å‡ºé—®é¢˜æ¥äº†ï¼Œè‹¦é€¼ï¼Œè®°å¾—é‚£ä¸ªæ—©ä¸Šç°åœºåœ¨å¯¼å¸ˆåŠå…¬å®¤ç”¨ç”µè„‘æ”¹å¥½åï¼Œæ£€æŸ¥å®Œæ‰æ‹¿å»æ‰“å°å†æ‹¿å›æ¥ç»™å¯¼å¸ˆæ£€æŸ¥çš„ï¼Œæ¥å›è·‘æ¥è·‘å»çš„çœŸçš„å¾ˆæ€¥ï¼Œå‡ºäº†ä¸å°‘æ±—ï¼‰æ³¨æ„ï¼šè¶Šæ˜¯å…³é”®æ—¶åˆ»ï¼Œåƒä¸‡è¦é¡ºç€å¯¼å¸ˆæ¥ï¼Œä»–è¯´æ”¹å“ªé‡Œå°±æ”¹å“ªé‡Œï¼Œåƒä¸‡åˆ«åˆšï¼Œæˆ‘ä¸€ä¸ªåŒå­¦çš„è®ºæ–‡æ”¹çš„å¯¼å¸ˆéƒ½å‘ç«äº†ï¼Œå·®ç‚¹æ²¡è®©æˆ‘é‚£åŒå­¦å‚åŠ ç­”è¾©ï¼Œç›´æ¥è¿›å…¥äºŒè¾©çš„ã€‚ ç­”è¾©çš„æ—¶å€™å…ˆæ¯ä¸ªäººä»‹ç»ä¸‹è‡ªå·±çš„å®ä¹ ç»å†ï¼Œå¬åˆ°ä¸å°‘ç‰›é€¼çš„åŒå­¦ï¼Œè¿›äº†ä¸å°‘å‰å®³çš„å…¬å¸ï¼Œæœ‰çš„åŒå­¦è¿˜å½“ä¸Šäº†å…¬å¸çš„é¡¹ç›®ç»„ç»„é•¿äº†ï¼ŒçœŸå‰å®³ï¼Œä¸€å¹´çš„å®ä¹ æ—¶é—´å°±æ··çš„è¿™ä¹ˆå¥½äº†ã€‚ç¬é—´å‘ç°å·®è·å¾ˆå¤§ã€‚ ç„¶åå°±æ˜¯æ¯ä¸ªäººçš„ç­”è¾©äº†ï¼Œæˆ‘ç¬¬ä¸‰ä¸ªï¼Œè¿˜å¥½ï¼Œç­”è¾©çš„è¿‡ç¨‹é—®äº†æˆ‘çš„é—®é¢˜å’Œæ¼”ç¤ºç³»ç»Ÿçš„æ—¶å€™éƒ½è¡¨ç°çš„è›®å¥½çš„ã€‚å°±ç°åœºè¿˜é—®äº†æˆ‘æœ‰ä¸ªåŠŸèƒ½çš„ä»£ç æ˜¯å“ªï¼Ÿï¼ˆä¼°è®¡æ˜¯æƒ³çœ‹ä¸‹æ˜¯ä¸æ˜¯è‡ªå·±å†™çš„é¡¹ç›®ï¼‰åé¢ä¹Ÿçœ‹åˆ°æœ‰çš„åŒå­¦é¡¹ç›®ç«Ÿç„¶èµ·ä¸æ¥çš„ï¼Œæˆ–è€…å›ç­”ä¸å‡ºè€å¸ˆçš„é—®é¢˜çš„ã€‚ç­”è¾©è¿‡ç¨‹ä¸­ï¼Œç­”è¾©è€å¸ˆåˆç»™è®ºæ–‡æ‰¾äº†ä¸å°‘é—®é¢˜ï¼Œåˆè¦è‹¦é€¼çš„ä¿®æ”¹äº†ã€‚ å½“å¤©å°±å‡ºäº†å¾…å®šåå•å’Œè¦äºŒè¾©çš„åå•ï¼Œé€Ÿåº¦è¿˜æ˜¯å¾ˆå¿«ã€‚è¿˜å¥½æˆ‘æ²¡æœ‰ï¼Œå¼€æ£®ã€‚æœ¬ä»¥ä¸ºç­”è¾©å¥½äº†ï¼Œå°±å¯ä»¥æ¾ä¸‹ä¸€å£æ°”äº†ï¼Œåé¢æ”¹å¥½äº†è®ºæ–‡åæ‹¿å»ç»™å¯¼å¸ˆæ£€æŸ¥ï¼Œå¥¹éƒ½è¯´ OK äº†ï¼Œç»“æœæˆ‘å°±å»æŠŠè®ºæ–‡æ‹¿å»èƒ¶è£…äº†ï¼Œæ³¨æ„èƒ¶è£…é¡ºåºåˆ«æé”™äº†ã€‚ç¬¬äºŒå¤©æŠŠèƒ¶è£…å¥½çš„è®ºæ–‡å’Œå„ç§èµ„æ–™ä¸€èµ·äº¤ç»™è€å¸ˆçš„æ—¶å€™ï¼Œç»“æœåˆæŒ‘å‡ºä¸€ä¸ªç›®å½•çš„é—®é¢˜ï¼ŒWTFï¼Œæå¾—æˆ‘åé¢æ”¹å¥½åå»æ‰“å°åº—é‡æ–°èƒ¶è£…äº†éï¼ˆå°çš®ä»åŸæ¥çš„ä¸Šé¢æ‰¯ä¸‹æ¥èƒ¶è£…ï¼‰ã€‚æ˜¨å¤©ç­¾å®Œå­—äº†ï¼ŒæŠŠè®ºæ–‡çš„åˆç¨¿ã€ç»ˆç¨¿ã€ç­”è¾©è®°å½•ã€å®ä¹ ææ–™ç­‰ææ–™ä¸€èµ·è£…è¿›æ¡£æ¡ˆè¢‹äº†ï¼Œè¿™æ‰å®‰å¿ƒäº†ã€‚ äºæ˜¯å½“æ™šå°±å»å‚åŠ äº†ç­ä¸Šçš„æ¯•ä¸šèšä¼šã€‚ æ„Ÿå—è¿™æ®µæ—¶é—´çœŸçš„æ˜¯å¾ˆç´¯ï¼Œæ¯å¤©ç†¬å¤œåˆ°å¾ˆæ™šï¼Œç¬¬äºŒå¤©æ—©ä¸Šå¾ˆæ—©å°±è‡ªç„¶é†’äº†ã€‚ç˜¦äº†ä¸å°‘ï¼Œç‰›ä»”è£¤çš„çš®å¸¦æˆ‘æ„Ÿè§‰éƒ½ç¼©äº†ä¸€åœˆï¼Œå³æ‰‹çš„å‡ ä¸ªæ‰‹æŒ‡å¤©å¤©åœ¨ç”µè„‘çš„è§¦æ‘¸æ¿ä¸Šæ»‘æ¥æ»‘å»çš„ï¼Œéƒ½è„±äº†ä¸€å±‚çš®äº†ï¼Œç°åœ¨æ”¾ä¸Šå»éƒ½æœ‰ç‚¹ç—›ï¼Œæ‰“å°è®ºæ–‡å¥½åƒæ‰“å°äº†7ä»½ï¼Œçƒ§é’±å•Šã€‚å‘ç°æˆ‘çš„è®°å¿†è¿˜æ˜¯å¯ä»¥çš„ï¼Œè¿™ä¹ˆå¤šäº‹ç«Ÿç„¶è¿˜èƒ½è®°å¾—ï¼Œæå¾—æ•´ç¯‡æ–‡ç« æœ‰ç‚¹åƒåœ¨è®°æµæ°´è´¦ï¼Œå“ˆå“ˆå“ˆã€‚åæ­£ä¹Ÿæ˜¯è®°å½•ä¸‹è‡ªå·±çš„è®ºæ–‡ç­”è¾©è¿™æ®µæ—¶é—´çš„ç»å†ã€‚è®ºæ–‡çš„æ ¼å¼å¾ˆé‡è¦ï¼Œä¸å†åƒå†™åšå®¢é‚£æ ·éšæ„ï¼Œè®ºæ–‡æ˜¯éœ€è¦ä»¥ä¸€ç§ä¸¥è°¨çš„æ€åº¦å»å¯¹å¾…çš„ã€‚ å†™ç€å†™ç€å¿˜äº†è¯´è®ºæ–‡çš„æŸ¥é‡äº†ã€‚ä¸€èˆ¬ä½ ä¸€å¼€å§‹æœ€å¥½å…ˆç”¨ç¬¬ä¸‰æ–¹çš„å…è´¹æŸ¥é‡ä¸‹ï¼Œç„¶åä¿®æ”¹ã€‚ æˆ‘å½“æ—¶ç”¨çš„æ˜¯ï¼šhttp://xueshu.baidu.com/usercenter/papercheck/ è¿™ä¸ªåœ°æ–¹æœ‰å‡ ä¸ªæ˜¯å¯ä»¥ç¬¬ä¸€æ¬¡å…è´¹æŸ¥é‡çš„ï¼Œå¦‚æœæ¬¡æ•°ç”¨å®Œäº†ï¼Œè®°å¾—æ¢ä¸ªç™¾åº¦è´¦å·å°±åˆæœ‰å¥½äº›æ¬¡æŸ¥é‡çš„æœºä¼šã€‚å¦‚æœä½ å®åœ¨æ˜¯ä¸æ”¾å¿ƒï¼Œå¯ä»¥å»å­¦æ ¡çš„æ‰“å°åº—é—®ä¸‹æ˜¯å¦æœ‰è®ºæ–‡æŸ¥é‡çš„ï¼Œä¹Ÿæ˜¯æŸ¥çš„çŸ¥ç½‘çš„åº“ï¼Œå’Œå­¦æ ¡çŸ¥ç½‘æŸ¥é‡çš„åŒºåˆ«ä¸å¤§ï¼Œæˆ‘æ¯”è¾ƒè‡ªä¿¡ï¼Œæ²¡èŠ±è¿™ä¸ªé’±ï¼Œæ¯•ç«Ÿå¥½è´µï¼ŒğŸ˜¯æˆ‘ç©·ï¼Œå“ˆå“ˆå“ˆã€‚å­¦æ ¡è§„å®šçš„æ˜¯ä¸èƒ½é«˜äº 30% çš„æŸ¥é‡ç‡ï¼Œå»ºè®®è¿˜æ˜¯è‡ªå·±æŠŠæŸ¥é‡é™ä½åˆ° 20% ä»¥ä¸‹ç„¶åå†æäº¤åˆ°å­¦æ ¡çŸ¥ç½‘å»ï¼Œä¸ç„¶è¶…è¿‡çš„è¯æ˜¯éœ€è¦äºŒæ¬¡æŸ¥é‡çš„ã€‚ è¿˜æœ‰ä¸€ä¸ªæ„Ÿå—å°±æ˜¯ï¼šå¤šå’Œä½ çš„å¯¼å¸ˆäº¤æµï¼Œé‡åˆ°ä¸ä¼šæˆ–è€…æ‹¿ä¸å‡†çš„æœ€å¥½åœ¨ç¾¤é‡Œé—®ä»–ï¼Œç„¶åä»–è¯´çš„é”™è¯¯ï¼Œä½ è¦åŠæ—¶æ›´æ”¹å¥½è¿‡æ¥ï¼Œè¯´ä½ é—®é¢˜çš„æ—¶å€™è¦å­¦ä¼šè„¸ä¸ŠæŒ‚ç€ç¬‘å®¹ï¼Œå˜»å˜»å˜»å°±è¿‡å»äº†ï¼Œç„¶åè®°ä½è¯¥é—®é¢˜çš„é”™è¯¯ï¼Œå›å»ç«‹é©¬æ”¹å¥½ï¼ŒåŠæ—¶æ‹¿ææ–™ç»™è€å¸ˆæŸ¥é˜…ä¿®æ”¹å¥½çš„è®ºæ–‡ã€‚","tags":[{"name":"éšç¬”","slug":"éšç¬”","permalink":"http://yoursite.com/tags/éšç¬”/"}]},{"title":"Spring Boot 2.0ç³»åˆ—æ–‡ç« (ä¸ƒ)ï¼šSpringApplication æ·±å…¥æ¢ç´¢","date":"2018-04-29T16:00:00.000Z","path":"2018/04/30/springboot_SpringApplication/","text":"å…³æ³¨æˆ‘ è½¬è½½è¯·åŠ¡å¿…æ³¨æ˜åŸåˆ›åœ°å€ä¸ºï¼šhttp://www.54tianzhisheng.cn/2018/04/30/springboot_SpringApplication/ å‰è¨€åœ¨ Spring Boot é¡¹ç›®çš„å¯åŠ¨ç±»ä¸­å¸¸è§ä»£ç å¦‚ä¸‹ï¼š 123456@SpringBootApplicationpublic class SpringbotApplication &#123; public static void main(String[] args) &#123; SpringApplication.run(SpringbotApplication.class, args); &#125;&#125; å…¶ä¸­ä¹Ÿå°±ä¸¤ä¸ªæ¯”è¾ƒå¼•äººæ³¨æ„çš„åœ°æ–¹ï¼š @SpringBootApplication SpringApplication.run() å¯¹äºç¬¬ä¸€ä¸ªæ³¨è§£ @SpringBootApplicationï¼Œæˆ‘å·²ç»åœ¨åšå®¢ Spring Boot 2.0ç³»åˆ—æ–‡ç« (å…­)ï¼šSpring Boot 2.0ä¸­SpringBootApplicationæ³¨è§£è¯¦è§£ ä¸­è¯¦ç»†çš„è®²è§£äº†ã€‚æ¥ä¸‹æ¥å°±æ˜¯æ·±å…¥æ¢ç©¶ç¬¬äºŒä¸ªäº† SpringApplication.run() ã€‚ æ¢ä¸ªå§¿åŠ¿ä¸Šé¢çš„å§¿åŠ¿å¤ªç®€å•äº†ï¼Œåªä¸€è¡Œä»£ç å°±å®Œäº‹äº†ã€‚ 1SpringApplication.run(SpringbotApplication.class, args); å…¶å®æ˜¯æ”¯æŒåšä¸€äº›ä¸ªæ€§åŒ–çš„è®¾ç½®ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ¢ä¸ªå§¿åŠ¿ç§ç§ï¼š 123456789@SpringBootApplicationpublic class SpringbotApplication &#123; public static void main(String[] args) &#123; SpringApplication app = new SpringApplication(SpringbotApplication.class); // è‡ªå®šä¹‰åº”ç”¨ç¨‹åºçš„é…ç½® //app.setXxx() app.run(args) &#125;&#125; æ²¡é”™ï¼Œå°±æ˜¯é€šè¿‡ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œç„¶åè®¾ç½®ç›¸å…³çš„å±æ€§ï¼Œä»è€Œè¾¾åˆ°å®šåˆ¶åŒ–æœåŠ¡ã€‚æœ‰å“ªäº›å±æ€§å‘¢ï¼Ÿ å±æ€§å¯¹åº”çš„ getï¼set æ–¹æ³• çœ‹åˆ°æ²¡ï¼Œè¿˜å¾ˆå¤šå‘¢ï¼ ä¸¾ä¸ªä¾‹å­ï¼šä½ æƒ³æŠŠ Spring Boot é¡¹ç›®çš„é»˜è®¤ Banner æ¢æˆä½ è‡ªå·±çš„ï¼Œå°±éœ€è¦åœ¨è¿™é‡Œå¦‚ä¸‹ï¼š 123456789101112131415161718public static void main(String[] args) &#123;// SpringApplication.run(Springboot2Application.class, args); SpringApplication application = new SpringApplication(Springboot2Application.class); application.setBanner((environment, sourceClass, out) -&gt; &#123; //è¿™é‡Œæ‰“å°ä¸€ä¸ªlogo System.out.println(\" _ _ _\\n\" + \" | | (_) | |\\n\" + \" ____| |__ _ ___ | |__ ___ _ __ __ _\\n\" + \"|_ /| '_ \\\\ | |/ __|| '_ \\\\ / _ \\\\| '_ \\\\ / _` |\\n\" + \" / / | | | || |\\\\__ \\\\| | | || __/| | | || (_| |\\n\" + \"/___||_| |_||_||___/|_| |_| \\\\___||_| |_| \\\\__, |\\n\" + \" __/ |\\n\" + \" |___/\\n\"); &#125;); application.setBannerMode(Banner.Mode.CONSOLE); //ä½ è¿˜å¯ä»¥å¹²å…¶ä»–çš„å®šåˆ¶åŒ–åˆå§‹è®¾ç½® application.run(args);&#125; ç°åœ¨é‡å¯é¡¹ç›®ï¼Œä½ å°±ä¼šå‘ç°ï¼Œæ§åˆ¶å°çš„ logo å·²ç»æ¢æˆä½ è‡ªå·±çš„äº†ã€‚ å½“ç„¶äº†ï¼Œä½ å¯èƒ½ä¼šè§‰å¾—è¿™æ ·å†™æœ‰ç‚¹å¤æ‚ï¼Œå—¯å—¯ï¼Œç¡®å®ï¼Œè¿™æ ·ç¡¬ç¼–ç åœ¨ä»£ç é‡Œç¡®å®ä¸å¤ªå‹å¥½ã€‚ä½ è¿˜å¯ä»¥åœ¨src/main/resourcesè·¯å¾„ä¸‹æ–°å»ºä¸€ä¸ªbanner.txtæ–‡ä»¶ï¼Œbanner.txtä¸­å¡«å†™å¥½éœ€è¦æ‰“å°çš„å­—ç¬¦ä¸²å†…å®¹å³å¯ã€‚ ä»è¯¥ç±»ä¸­å¯ä»¥çœ‹åˆ°åœ¨ Spring Boot 2 ä¸­å¼•å…¥äº†ä¸ªæ–°çš„ WebApplicationType å’Œ WebEnvironmentã€‚ ç¡®å®ï¼Œè¿™ä¹Ÿæ˜¯ Spring Boot 2 ä¸­æ¯”è¾ƒå¤§çš„ç‰¹æ€§ï¼Œå®ƒæ˜¯æ”¯æŒå“åº”å¼ç¼–ç¨‹çš„ã€‚æˆ‘ä¹‹å‰åœ¨æ–‡ç«  Spring Boot 2.0ç³»åˆ—æ–‡ç« (äºŒ)ï¼šSpring Boot 2.0 æ–°ç‰¹æ€§è¯¦è§£ ä¸­ä¹Ÿä»‹ç»è¿‡ï¼Œä»¥åæœ‰æœºä¼šä¼šä»‹ç»å®ƒçš„ï¼Œè¿™é‡Œæˆ‘å…ˆå–ä¸ªå…³å­ã€‚ SpringApplication åˆå§‹åŒ–SpringApplication.run() çš„å®ç°æ‰æ˜¯æˆ‘ä»¬è¦æ·±å…¥æ¢ç©¶çš„ä¸»è§’ï¼Œè¯¥æ–¹æ³•ä»£ç å¦‚ä¸‹ï¼š 123456789//é™æ€æ–¹æ³•ï¼Œå¯ç”¨äºä½¿ç”¨é»˜è®¤é…ç½®è¿è¡Œ SpringApplicationpublic static ConfigurableApplicationContext run(Class&lt;?&gt; primarySource, String... args) &#123; return run(new Class&lt;?&gt;[] &#123; primarySource &#125;, args);&#125;public static ConfigurableApplicationContext run(Class&lt;?&gt;[] primarySources, String[] args) &#123; return new SpringApplication(primarySources).run(args);&#125; åœ¨è¿™ä¸ªé™æ€æ–¹æ³•ä¸­ï¼Œåˆ›å»º SpringApplication å¯¹è±¡ï¼Œå¹¶è°ƒç”¨è¯¥å¯¹è±¡çš„ run æ–¹æ³•ã€‚ 123456789101112131415public SpringApplication(Class&lt;?&gt;... primarySources) &#123; this(null, primarySources);&#125;//åˆ›å»ºä¸€ä¸ª SpringApplication å®ä¾‹ï¼Œåº”ç”¨ä¸Šä¸‹æ–‡ä¼šæ ¹æ®æŒ‡å®šçš„ä¸»è¦èµ„æºåŠ è½½ beans ï¼Œå®ä¾‹åœ¨è°ƒç”¨ run æ–¹æ³•ä¹‹å‰å¯ä»¥å®šåˆ¶åŒ–@SuppressWarnings(&#123; \"unchecked\", \"rawtypes\" &#125;)public SpringApplication(ResourceLoader resourceLoader, Class&lt;?&gt;... primarySources) &#123; this.resourceLoader = resourceLoader; Assert.notNull(primarySources, \"PrimarySources must not be null\"); this.primarySources = new LinkedHashSet&lt;&gt;(Arrays.asList(primarySources)); this.webApplicationType = deduceWebApplicationType(); setInitializers((Collection) getSpringFactoriesInstances( ApplicationContextInitializer.class)); setListeners((Collection) getSpringFactoriesInstances(ApplicationListener.class)); this.mainApplicationClass = deduceMainApplicationClass();&#125; é¦–å…ˆæ˜¯è¿›å…¥å•ä¸ªå‚æ•°çš„æ„é€ æ–¹æ³•ï¼Œç„¶åè¿›å…¥ä¸¤å‚æ•°çš„æ„é€ æ–¹æ³•ï¼ˆResourceLoader ä¸º nullï¼‰ï¼Œç„¶åè¿›è¡Œåˆå§‹åŒ–ã€‚ 1ã€deduceWebApplicationType() : æ¨æ–­åº”ç”¨çš„ç±»å‹ ï¼Œåˆ›å»ºçš„æ˜¯ä¸€ä¸ª SERVLET åº”ç”¨è¿˜æ˜¯ REACTIVEåº”ç”¨æˆ–è€…æ˜¯ NONE 1234567891011121314151617private static final String REACTIVE_WEB_ENVIRONMENT_CLASS = \"org.springframework.web.reactive.DispatcherHandler\";private static final String MVC_WEB_ENVIRONMENT_CLASS = \"org.springframework.web.servlet.DispatcherServlet\";private static final String[] WEB_ENVIRONMENT_CLASSES = &#123; \"javax.servlet.Servlet\", \"org.springframework.web.context.ConfigurableWebApplicationContext\" &#125;;private WebApplicationType deduceWebApplicationType() &#123; if (ClassUtils.isPresent(REACTIVE_WEB_ENVIRONMENT_CLASS, null) &amp;&amp; !ClassUtils.isPresent(MVC_WEB_ENVIRONMENT_CLASS, null)) &#123; return WebApplicationType.REACTIVE; //è¯¥ç¨‹åºæ˜¯ REACTIVE ç¨‹åº &#125; for (String className : WEB_ENVIRONMENT_CLASSES) &#123; if (!ClassUtils.isPresent(className, null)) &#123; return WebApplicationType.NONE; //è¯¥ç¨‹åºä¸º NONE &#125; &#125; return WebApplicationType.SERVLET; //é»˜è®¤è¿”å›æ˜¯ SERVLET ç¨‹åº&#125; 2ã€setInitializers((Collection) getSpringFactoriesInstances(ApplicationContextInitializer.class))ï¼šåˆå§‹åŒ– classpath ä¸‹çš„æ‰€æœ‰çš„å¯ç”¨çš„ ApplicationContextInitializerã€‚ 1ï¼‰ã€getSpringFactoriesInstances() 123456789101112131415161718192021222324252627282930313233private &lt;T&gt; Collection&lt;T&gt; getSpringFactoriesInstances(Class&lt;T&gt; type) &#123; return getSpringFactoriesInstances(type, new Class&lt;?&gt;[] &#123;&#125;);&#125;//è·å–æ‰€æœ‰çš„ Spring å·¥å‚å®ä¾‹private &lt;T&gt; Collection&lt;T&gt; getSpringFactoriesInstances(Class&lt;T&gt; type,Class&lt;?&gt;[] parameterTypes, Object... args) &#123; ClassLoader classLoader = Thread.currentThread().getContextClassLoader(); // Use names and ensure unique to protect against duplicates Set&lt;String&gt; names = new LinkedHashSet&lt;&gt;(SpringFactoriesLoader.loadFactoryNames(type, classLoader)); //è·å–æ‰€æœ‰ Spring Factories çš„åå­— List&lt;T&gt; instances = createSpringFactoriesInstances(type, parameterTypes, classLoader, args, names); AnnotationAwareOrderComparator.sort(instances); //Spring å·¥å‚å®ä¾‹æ’åº return instances;&#125;//æ ¹æ®è¯»å–åˆ°çš„åå­—åˆ›å»ºå¯¹è±¡ï¼ˆSpring å·¥å‚å®ä¾‹ï¼‰private &lt;T&gt; List&lt;T&gt; createSpringFactoriesInstances(Class&lt;T&gt; type, Class&lt;?&gt;[] parameterTypes, ClassLoader classLoader, Object[] args, Set&lt;String&gt; names) &#123; List&lt;T&gt; instances = new ArrayList&lt;&gt;(names.size()); for (String name : names) &#123; try &#123; Class&lt;?&gt; instanceClass = ClassUtils.forName(name, classLoader); Assert.isAssignable(type, instanceClass); Constructor&lt;?&gt; constructor = instanceClass.getDeclaredConstructor(parameterTypes); T instance = (T) BeanUtils.instantiateClass(constructor, args); instances.add(instance); &#125; catch (Throwable ex) &#123; throw new IllegalArgumentException( \"Cannot instantiate \" + type + \" : \" + name, ex); &#125; &#125; return instances;&#125; ä¸Šé¢çš„ SpringFactoriesLoader.loadFactoryNames() ï¼Œæ˜¯ä» META-INF/spring.factories çš„èµ„æºæ–‡ä»¶ä¸­ï¼Œè¯»å– key ä¸ºorg.springframework.context.ApplicationContextInitializer çš„ valueã€‚ è€Œ spring.factories çš„éƒ¨åˆ†å†…å®¹å¦‚ä¸‹ï¼š å¯ä»¥çœ‹åˆ°ï¼Œæœ€è¿‘çš„å¾—åˆ°çš„ï¼Œæ˜¯ ConfigurationWarningsApplicationContextInitializerï¼ŒContextIdApplicationContextInitializerï¼ŒDelegatingApplicationContextInitializerï¼ŒServerPortInfoApplicationContextInitializer è¿™å››ä¸ªç±»çš„åå­—ã€‚ 2ï¼‰ã€setInitializers()ï¼š 12345public void setInitializers( Collection&lt;? extends ApplicationContextInitializer&lt;?&gt;&gt; initializers) &#123; this.initializers = new ArrayList&lt;&gt;(); this.initializers.addAll(initializers);&#125; æ‰€ä»¥ï¼Œè¿™é‡Œ setInitializers() æ‰€å¾—åˆ°çš„æˆå‘˜å˜é‡ initializers å°±è¢«åˆå§‹åŒ–ä¸ºConfigurationWarningsApplicationContextInitializerï¼ŒContextIdApplicationContextInitializerï¼ŒDelegatingApplicationContextInitializerï¼ŒServerPortInfoApplicationContextInitializer è¿™å››ä¸ªç±»çš„å¯¹è±¡ç»„æˆçš„ listã€‚ 3ã€setListeners((Collection) getSpringFactoriesInstances(ApplicationListener.class))ï¼šåˆå§‹åŒ– classpath ä¸‹çš„æ‰€æœ‰çš„å¯ç”¨çš„ ApplicationListenerã€‚ 1ï¼‰ã€getSpringFactoriesInstances() å’Œä¸Šé¢çš„ç±»ä¼¼ï¼Œä½†æ˜¯å®ƒæ˜¯ä» META-INF/spring.factories çš„èµ„æºæ–‡ä»¶ä¸­ï¼Œè·å–åˆ° key ä¸º org.springframework.context.ApplicationListener çš„ valueã€‚ 2ï¼‰ã€setListeners()ï¼š 1234public void setListeners(Collection&lt;? extends ApplicationListener&lt;?&gt;&gt; listeners) &#123; this.listeners = new ArrayList&lt;&gt;(); this.listeners.addAll(listeners);&#125; æ‰€ä»¥ï¼Œè¿™é‡Œ setListeners() æ‰€å¾—åˆ°çš„æˆå‘˜å˜é‡ listeners å°±è¢«åˆå§‹åŒ–ä¸º ClearCachesApplicationListenerï¼ŒParentContextCloserApplicationListenerï¼ŒFileEncodingApplicationListenerï¼ŒAnsiOutputApplicationListener ï¼ŒConfigFileApplicationListenerï¼ŒDelegatingApplicationListenerï¼ŒClasspathLoggingApplicationListenerï¼ŒLoggingApplicationListenerï¼ŒLiquibaseServiceLocatorApplicationListener è¿™ä¹ä¸ªç±»çš„å¯¹è±¡ç»„æˆçš„ listã€‚ 4ã€deduceMainApplicationClass() ï¼šæ ¹æ®è°ƒç”¨æ ˆï¼Œæ¨æ–­å‡º main æ–¹æ³•çš„ç±»å 1234567891011121314private Class&lt;?&gt; deduceMainApplicationClass() &#123; try &#123; StackTraceElement[] stackTrace = new RuntimeException().getStackTrace(); for (StackTraceElement stackTraceElement : stackTrace) &#123; if (\"main\".equals(stackTraceElement.getMethodName())) &#123; return Class.forName(stackTraceElement.getClassName()); &#125; &#125; &#125; catch (ClassNotFoundException ex) &#123; // Swallow and continue &#125; return null;&#125; run æ–¹æ³•èƒŒåçš„ç§˜å¯†ä¸Šé¢çœ‹å®Œäº†æ„é€ æ–¹æ³•åï¼Œå·²ç»åˆå§‹åŒ–äº†ä¸€ä¸ª SpringApplication å¯¹è±¡ï¼Œæ¥ä¸‹æ¥è°ƒç”¨å…¶ run æ–¹æ³•ï¼Œä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445//è¿è¡Œ Spring åº”ç”¨ç¨‹åºï¼Œåˆ›å»ºå¹¶åˆ·æ–°ä¸€ä¸ªæ–°çš„ ApplicationContextpublic ConfigurableApplicationContext run(String... args) &#123; StopWatch stopWatch = new StopWatch(); stopWatch.start(); ConfigurableApplicationContext context = null; Collection&lt;SpringBootExceptionReporter&gt; exceptionReporters = new ArrayList&lt;&gt;(); configureHeadlessProperty(); SpringApplicationRunListeners listeners = getRunListeners(args); listeners.starting(); try &#123; ApplicationArguments applicationArguments = new DefaultApplicationArguments( args); ConfigurableEnvironment environment = prepareEnvironment(listeners, applicationArguments); configureIgnoreBeanInfo(environment); Banner printedBanner = printBanner(environment); context = createApplicationContext(); exceptionReporters = getSpringFactoriesInstances( SpringBootExceptionReporter.class, new Class[] &#123; ConfigurableApplicationContext.class &#125;, context); prepareContext(context, environment, listeners, applicationArguments, printedBanner); refreshContext(context); afterRefresh(context, applicationArguments); stopWatch.stop(); if (this.logStartupInfo) &#123; new StartupInfoLogger(this.mainApplicationClass) .logStarted(getApplicationLog(), stopWatch); &#125; listeners.started(context); callRunners(context, applicationArguments); &#125; catch (Throwable ex) &#123; handleRunFailure(context, ex, exceptionReporters, listeners); throw new IllegalStateException(ex); &#125; try &#123; listeners.running(context); &#125; catch (Throwable ex) &#123; handleRunFailure(context, ex, exceptionReporters, null); throw new IllegalStateException(ex); &#125; return context; &#125; å¯å˜ä¸ªæ•°å‚æ•° args å³æ˜¯æˆ‘ä»¬æ•´ä¸ªåº”ç”¨ç¨‹åºçš„å…¥å£ main æ–¹æ³•çš„å‚æ•°ã€‚StopWatch æ˜¯æ¥è‡ª org.springframework.util çš„å·¥å…·ç±»ï¼Œå¯ä»¥ç”¨æ¥æ–¹ä¾¿çš„è®°å½•ç¨‹åºçš„è¿è¡Œæ—¶é—´ã€‚ å†æ¥çœ‹çœ‹ 1.5.12 ä¸ 2.0.1 ç‰ˆæœ¬çš„ run æ–¹æ³• æœ‰ä»€ä¹ˆä¸ä¸€æ ·çš„åœ°æ–¹ï¼Ÿ æ¥ä¸‹æ¥å¥½å¥½åˆ†æä¸Šé¢æ–°ç‰ˆæœ¬ï¼ˆ2.0.1ï¼‰çš„ run æ–¹æ³•çš„ä»£ç å¹¶é…åˆæ¯”è¾ƒæ—§ç‰ˆæœ¬ï¼ˆ1.5.12ï¼‰ã€‚ 1ã€configureHeadlessProperty()ï¼šè®¾ç½® headless æ¨¡å¼ 1234567private static final String SYSTEM_PROPERTY_JAVA_AWT_HEADLESS = \"java.awt.headless\";private boolean headless = true;private void configureHeadlessProperty() &#123; System.setProperty(SYSTEM_PROPERTY_JAVA_AWT_HEADLESS, System.getProperty( SYSTEM_PROPERTY_JAVA_AWT_HEADLESS, Boolean.toString(this.headless)));&#125; å®é™…ä¸Šæ˜¯å°±æ˜¯è®¾ç½®ç³»ç»Ÿå±æ€§ java.awt.headlessï¼Œè¯¥å±æ€§ä¼šè¢«è®¾ç½®ä¸º trueã€‚ 2ã€getRunListeners()ï¼šåŠ è½½ SpringApplicationRunListener å¯¹è±¡ 12345678910111213141516171819 //TODO: xxxSpringApplicationRunListeners listeners = getRunListeners(args);//åˆå§‹åŒ–ç›‘å¬å™¨listeners.starting();try &#123; prepareContext(context, environment, listeners, applicationArguments, printedBanner); refreshContext(context); afterRefresh(context, applicationArguments); listeners.started(context); callRunners(context, applicationArguments);&#125;try &#123; listeners.running(context);&#125;private SpringApplicationRunListeners getRunListeners(String[] args) &#123; Class&lt;?&gt;[] types = new Class&lt;?&gt;[] &#123; SpringApplication.class, String[].class &#125;; return new SpringApplicationRunListeners(logger, getSpringFactoriesInstances( SpringApplicationRunListener.class, types, this, args));&#125; ä¸Šé¢çš„ getRunListeners() ä¸­ä¹Ÿåˆ©ç”¨ SpringFactoriesLoader åŠ è½½ META-INF/spring.factories ä¸­ key ä¸º SpringApplicationRunListener çš„å€¼ï¼Œç„¶åå†å°†è·å–åˆ°çš„å€¼ä½œä¸ºå‚æ•°ä¼ é€’åˆ° SpringApplicationRunListeners çš„æ„é€ æ–¹æ³•ä¸­å»åˆ›å»ºå¯¹è±¡ã€‚ 3ã€new DefaultApplicationArguments(args) ï¼šè·å–å¯åŠ¨æ—¶ä¼ å…¥å‚æ•° argsï¼ˆmain æ–¹æ³•ä¼ è¿›æ¥çš„å‚æ•°ï¼‰ å¹¶åˆå§‹åŒ–ä¸º ApplicationArguments å¯¹è±¡ã€‚ 12345public DefaultApplicationArguments(String[] args) &#123; Assert.notNull(args, \"Args must not be null\"); this.source = new Source(args); this.args = args;&#125; 4ã€prepareEnvironment(listeners, applicationArguments)ï¼šæ ¹æ® listeners å’Œ applicationArguments é…ç½®SpringBoot åº”ç”¨çš„ç¯å¢ƒã€‚ 1234567891011121314151617181920212223242526272829303132333435363738private ConfigurableEnvironment prepareEnvironment( SpringApplicationRunListeners listeners, ApplicationArguments applicationArguments) &#123; // Create and configure the environment ConfigurableEnvironment environment = getOrCreateEnvironment(); configureEnvironment(environment, applicationArguments.getSourceArgs()); listeners.environmentPrepared(environment); bindToSpringApplication(environment); if (this.webApplicationType == WebApplicationType.NONE) &#123; environment = new EnvironmentConverter(getClassLoader()) .convertToStandardEnvironmentIfNecessary(environment); &#125; ConfigurationPropertySources.attach(environment); return environment;&#125;//å¦‚æœ environment ä¸ä¸ºç©ºï¼Œç›´æ¥ get åˆ°ï¼Œå¦åˆ™åˆ›å»ºprivate ConfigurableEnvironment getOrCreateEnvironment() &#123; if (this.environment != null) &#123; return this.environment; &#125; if (this.webApplicationType == WebApplicationType.SERVLET) &#123; return new StandardServletEnvironment(); &#125; return new StandardEnvironment();&#125;//é…ç½®ç¯å¢ƒprotected void configureEnvironment(ConfigurableEnvironment environment,String[] args) &#123; configurePropertySources(environment, args);//é…ç½®è¦ä½¿ç”¨çš„PropertySources configureProfiles(environment, args);//é…ç½®è¦ä½¿ç”¨çš„Profiles&#125;//å°†ç¯å¢ƒç»‘å®šåˆ° SpringApplicationprotected void bindToSpringApplication(ConfigurableEnvironment environment) &#123; try &#123; Binder.get(environment).bind(\"spring.main\", Bindable.ofInstance(this)); &#125; catch (Exception ex) &#123; throw new IllegalStateException(\"Cannot bind to SpringApplication\", ex); &#125;&#125; 5ã€configureIgnoreBeanInfo(environment)ï¼šæ ¹æ®ç¯å¢ƒä¿¡æ¯é…ç½®è¦å¿½ç•¥çš„ bean ä¿¡æ¯ 1234567891011public static final String IGNORE_BEANINFO_PROPERTY_NAME = \"spring.beaninfo.ignore\";private void configureIgnoreBeanInfo(ConfigurableEnvironment environment) &#123; if (System.getProperty( CachedIntrospectionResults.IGNORE_BEANINFO_PROPERTY_NAME) == null) &#123; Boolean ignore = environment.getProperty(\"spring.beaninfo.ignore\", Boolean.class, Boolean.TRUE); System.setProperty(CachedIntrospectionResults.IGNORE_BEANINFO_PROPERTY_NAME, ignore.toString()); &#125;&#125; 6ã€printBanner(environment)ï¼šæ‰“å°æ ‡å¿—ï¼Œä¸Šé¢æˆ‘å·²ç»è¯´è¿‡äº†ã€‚ 12345678910111213private Banner printBanner(ConfigurableEnvironment environment) &#123; if (this.bannerMode == Banner.Mode.OFF) &#123; //å¦‚æœè®¾ç½®ä¸º offï¼Œä¸æ‰“å° Banner return null; &#125; ResourceLoader resourceLoader = this.resourceLoader != null ? this.resourceLoader : new DefaultResourceLoader(getClassLoader()); SpringApplicationBannerPrinter bannerPrinter = new SpringApplicationBannerPrinter( resourceLoader, this.banner); if (this.bannerMode == Mode.LOG) &#123; return bannerPrinter.print(environment, this.mainApplicationClass, logger); &#125; return bannerPrinter.print(environment, this.mainApplicationClass, System.out);&#125; 7ã€createApplicationContext()ï¼šæ ¹æ®åº”ç”¨ç±»å‹æ¥ç¡®å®šè¯¥ Spring Boot é¡¹ç›®åº”è¯¥åˆ›å»ºä»€ä¹ˆç±»å‹çš„ ApplicationContext ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œå¦‚æœæ²¡æœ‰æ˜ç¡®è®¾ç½®çš„åº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡æˆ–åº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡ç±»ï¼Œè¯¥æ–¹æ³•ä¼šåœ¨è¿”å›åˆé€‚çš„é»˜è®¤å€¼ã€‚ 1234567891011121314151617181920212223242526public static final String DEFAULT_WEB_CONTEXT_CLASS = \"org.springframework.boot.web.servlet.context.AnnotationConfigServletWebServerApplicationContext\";public static final String DEFAULT_REACTIVE_WEB_CONTEXT_CLASS = \"org.springframework.boot.web.reactive.context.AnnotationConfigReactiveWebServerApplicationContext\";public static final String DEFAULT_CONTEXT_CLASS = \"org.springframework.context.annotation.AnnotationConfigApplicationContext\";protected ConfigurableApplicationContext createApplicationContext() &#123; Class&lt;?&gt; contextClass = this.applicationContextClass; if (contextClass == null) &#123; try &#123; switch (this.webApplicationType) &#123; //æ ¹æ®åº”ç”¨ç¨‹åºçš„ç±»å‹æ¥åˆå§‹åŒ–å®¹å™¨ case SERVLET: //servlet åº”ç”¨ç¨‹åº contextClass = Class.forName(DEFAULT_WEB_CONTEXT_CLASS); break; case REACTIVE: //reactive åº”ç”¨ç¨‹åº contextClass = Class.forName(DEFAULT_REACTIVE_WEB_CONTEXT_CLASS); break; default: //é»˜è®¤ contextClass = Class.forName(DEFAULT_CONTEXT_CLASS); &#125; &#125; catch (ClassNotFoundException ex) &#123; throw new IllegalStateException( \"Unable create a default ApplicationContext,please specify an ApplicationContextClass\",ex); &#125; &#125; //æœ€åé€šè¿‡Springçš„å·¥å…·ç±» BeanUtils åˆå§‹åŒ–å®¹å™¨ç±» bean return (ConfigurableApplicationContext) BeanUtils.instantiateClass(contextClass);&#125; æ¥çœ‹çœ‹åœ¨ 1.5.12 ä¸­æ˜¯æ€ä¹ˆæ ·çš„ï¼Ÿ 8ã€exceptionReporters = getSpringFactoriesInstances( SpringBootExceptionReporter.class, new Class[] { ConfigurableApplicationContext.class }, context) 1234567891011private &lt;T&gt; Collection&lt;T&gt; getSpringFactoriesInstances(Class&lt;T&gt; type, Class&lt;?&gt;[] parameterTypes, Object... args) &#123; ClassLoader classLoader = Thread.currentThread().getContextClassLoader(); // Use names and ensure unique to protect against duplicates Set&lt;String&gt; names = new LinkedHashSet&lt;&gt;( SpringFactoriesLoader.loadFactoryNames(type, classLoader)); List&lt;T&gt; instances = createSpringFactoriesInstances(type, parameterTypes, classLoader, args, names);//æ ¹æ®ç±»å‹ key ä¸º SpringBootExceptionReporter å»åŠ è½½ AnnotationAwareOrderComparator.sort(instances);//å¯¹å®ä¾‹æ’åº return instances;&#125; è¿™é‡Œä¹Ÿæ˜¯é€šè¿‡ SpringFactoriesLoader åŠ è½½ META-INF/spring.factories ä¸­ key ä¸º SpringBootExceptionReporter çš„å…¨ç±»åçš„ value å€¼ã€‚ 9ã€prepareContext(context, environment, listeners, applicationArguments, printedBanner)ï¼šå®Œæˆæ•´ä¸ªå®¹å™¨çš„åˆ›å»ºä¸å¯åŠ¨ä»¥åŠ bean çš„æ³¨å…¥åŠŸèƒ½ã€‚ 12345678910111213141516171819202122232425262728//è£…é… Contextprivate void prepareContext(ConfigurableApplicationContext context, ConfigurableEnvironment environment, SpringApplicationRunListeners listeners, ApplicationArguments applicationArguments, Banner printedBanner) &#123; //å°†ä¹‹å‰å‡†å¤‡å¥½çš„ environment è®¾ç½®ç»™åˆ›å»ºå¥½çš„ ApplicationContext ä½¿ç”¨ context.setEnvironment(environment); //1ã€ postProcessApplicationContext(context); //2ã€ applyInitializers(context); listeners.contextPrepared(context); if (this.logStartupInfo) &#123;//å¯åŠ¨æ—¥å¿— logStartupInfo(context.getParent() == null); logStartupProfileInfo(context); &#125; // Add boot specific singleton beans context.getBeanFactory().registerSingleton(\"springApplicationArguments\", applicationArguments); if (printedBanner != null) &#123; context.getBeanFactory().registerSingleton(\"springBootBanner\", printedBanner); &#125; // Load the sources Set&lt;Object&gt; sources = getAllSources(); Assert.notEmpty(sources, \"Sources must not be empty\"); //3ã€ load(context, sources.toArray(new Object[0])); listeners.contextLoaded(context);&#125; 1ï¼‰ã€postProcessApplicationContext(context) 12345678910111213141516171819public static final String CONFIGURATION_BEAN_NAME_GENERATOR = \"org.springframework.context.annotation.internalConfigurationBeanNameGenerator\";protected void postProcessApplicationContext(ConfigurableApplicationContext context) &#123; if (this.beanNameGenerator != null) &#123; context.getBeanFactory().registerSingleton( AnnotationConfigUtils.CONFIGURATION_BEAN_NAME_GENERATOR, this.beanNameGenerator); &#125; if (this.resourceLoader != null) &#123; if (context instanceof GenericApplicationContext) &#123; ((GenericApplicationContext) context) .setResourceLoader(this.resourceLoader); &#125; if (context instanceof DefaultResourceLoader) &#123; ((DefaultResourceLoader) context) .setClassLoader(this.resourceLoader.getClassLoader()); &#125; &#125;&#125; è¯¥æ–¹æ³•å¯¹ context è¿›è¡Œäº†é¢„è®¾ç½®ï¼Œè®¾ç½®äº† ResourceLoader å’Œ ClassLoaderï¼Œå¹¶å‘ bean å·¥å‚ä¸­æ·»åŠ äº†ä¸€ä¸ªbeanNameGenerator ã€‚ 2ï¼‰ã€applyInitializers(context) 12345678protected void applyInitializers(ConfigurableApplicationContext context) &#123; for (ApplicationContextInitializer initializer : getInitializers()) &#123; Class&lt;?&gt; requiredType = GenericTypeResolver.resolveTypeArgument( initializer.getClass(), ApplicationContextInitializer.class); Assert.isInstanceOf(requiredType, context, \"Unable to call initializer.\"); initializer.initialize(context); &#125;&#125; åœ¨åˆ·æ–°ä¹‹å‰å°†ä»»ä½• ApplicationContextInitializer åº”ç”¨äºä¸Šä¸‹æ–‡ 3)ã€load(context, sources.toArray(new Object[0])) ä¸»è¦æ˜¯åŠ è½½å„ç§ beans åˆ° ApplicationContext å¯¹è±¡ä¸­ã€‚ 1234567891011121314protected void load(ApplicationContext context, Object[] sources) &#123; BeanDefinitionLoader loader = createBeanDefinitionLoader( //2 getBeanDefinitionRegistry(context), sources);// 1 if (this.beanNameGenerator != null) &#123; loader.setBeanNameGenerator(this.beanNameGenerator); &#125; if (this.resourceLoader != null) &#123; loader.setResourceLoader(this.resourceLoader); &#125; if (this.environment != null) &#123; loader.setEnvironment(this.environment); &#125; loader.load();//3&#125; (1)ã€getBeanDefinitionRegistry(context) è·å– bean å®šä¹‰æ³¨å†Œè¡¨ 12345678910private BeanDefinitionRegistry getBeanDefinitionRegistry(ApplicationContext context) &#123; if (context instanceof BeanDefinitionRegistry) &#123; return (BeanDefinitionRegistry) context; &#125; if (context instanceof AbstractApplicationContext) &#123; return (BeanDefinitionRegistry) ((AbstractApplicationContext) context) .getBeanFactory(); &#125; throw new IllegalStateException(\"Could not locate BeanDefinitionRegistry\");&#125; (2)ã€createBeanDefinitionLoader() é€šè¿‡ BeanDefinitionLoader çš„æ„é€ æ–¹æ³•æŠŠå‚æ•°ï¼ˆæ³¨å†Œè¡¨ã€èµ„æºï¼‰ä¼ è¿›å»ï¼Œç„¶ååˆ›å»º BeanDefinitionLoaderã€‚ (3)ã€load() æŠŠèµ„æºå…¨éƒ¨åŠ è½½ã€‚ 10ã€refreshContext(context) 12345678910111213141516private void refreshContext(ConfigurableApplicationContext context) &#123; refresh(context);//1 if (this.registerShutdownHook) &#123; try &#123; context.registerShutdownHook(); &#125; catch (AccessControlException ex) &#123; // Not allowed in some environments. &#125; &#125;&#125;//åˆ·æ–°åº•å±‚çš„ ApplicationContextprotected void refresh(ApplicationContext applicationContext) &#123; Assert.isInstanceOf(AbstractApplicationContext.class, applicationContext); ((AbstractApplicationContext) applicationContext).refresh();&#125; refreshContext(context) æ–¹æ³•åˆè°ƒç”¨äº† refresh(context)ã€‚åœ¨è°ƒç”¨äº† refresh(context) æ–¹æ³•ä¹‹åï¼Œè°ƒç”¨äº† registerShutdownHook æ–¹æ³•ã€‚ç»§ç»­çœ‹å®ƒçš„ refresh æ–¹æ³•ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142public void refresh() throws BeansException, IllegalStateException &#123; synchronized (this.startupShutdownMonitor) &#123; // Prepare this context for refreshing. prepareRefresh(); // Tell the subclass to refresh the internal bean factory. ConfigurableListableBeanFactory beanFactory = obtainFreshBeanFactory(); // Prepare the bean factory for use in this context. prepareBeanFactory(beanFactory); try &#123; // Allows post-processing of the bean factory in context subclasses. postProcessBeanFactory(beanFactory); // Invoke factory processors registered as beans in the context. invokeBeanFactoryPostProcessors(beanFactory); // Register bean processors that intercept bean creation. registerBeanPostProcessors(beanFactory); // Initialize message source for this context. initMessageSource(); // Initialize event multicaster for this context. initApplicationEventMulticaster(); // Initialize other special beans in specific context subclasses. onRefresh(); // Check for listener beans and register them. registerListeners(); // Instantiate all remaining (non-lazy-init) singletons. finishBeanFactoryInitialization(beanFactory); //1 // Last step: publish corresponding event. finishRefresh(); &#125; catch (BeansException ex) &#123; ã€‚ã€‚ã€‚ // Destroy already created singletons to avoid dangling resources. destroyBeans(); // Reset 'active' flag. cancelRefresh(ex); // Propagate exception to caller. throw ex; &#125; finally &#123; // Reset common introspection caches in Spring's core, since we // might not ever need metadata for singleton beans anymore... resetCommonCaches(); &#125; &#125;&#125; åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å°±çœ‹è§é‡ç‚¹äº†ï¼Œä»”ç»†çœ‹ä¸Šçš„æ³¨é‡Šï¼Œæ­£åœ¨åšå„ç§åˆå§‹åŒ–å·¥ä½œï¼Œè€Œä»Šå¤©æˆ‘ä»¬å…³æ³¨çš„é‡ç‚¹å°±æ˜¯æ–¹æ³• finishBeanFactoryInitialization(beanFactory)ã€‚è¯¥æ–¹æ³•è¿›è¡Œäº†éæ‡’åŠ è½½ beans çš„åˆå§‹åŒ–å·¥ä½œã€‚ç°åœ¨æˆ‘ä»¬è¿›å…¥è¯¥æ–¹æ³•å†…éƒ¨ï¼Œä¸€æ¢ç©¶ç«Ÿã€‚ çœ‹ä¸Šå›¾æ–¹æ³•ä¸­çš„æœ€åä¸€æ­¥ï¼Œè°ƒç”¨äº† beanFactory çš„ preInstantiateSingletons() æ–¹æ³•ã€‚æ­¤å¤„çš„ beanFactory æ˜¯å“ªä¸ªç±»çš„å®ä¾‹å¯¹è±¡å‘¢ï¼Ÿ å¯ä»¥çœ‹åˆ° ConfigurableListableBeanFactory æ¥å£çš„å®ç°ç±»åªæœ‰ DefaultListableBeanFactoryï¼Œæˆ‘ä»¬çœ‹ä¸‹å®ç°ç±»ä¸­çš„ preInstantiateSingletons æ–¹æ³•æ˜¯æ€ä¹ˆåšçš„ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647public void preInstantiateSingletons() throws BeansException &#123; // Iterate over a copy to allow for init methods which in turn register new bean definitions. // While this may not be part of the regular factory bootstrap, it does otherwise work fine. List&lt;String&gt; beanNames = new ArrayList&lt;&gt;(this.beanDefinitionNames); // Trigger initialization of all non-lazy singleton beans... for (String beanName : beanNames) &#123; RootBeanDefinition bd = getMergedLocalBeanDefinition(beanName); if (!bd.isAbstract() &amp;&amp; bd.isSingleton() &amp;&amp; !bd.isLazyInit()) &#123; if (isFactoryBean(beanName)) &#123; Object bean = getBean(FACTORY_BEAN_PREFIX + beanName); if (bean instanceof FactoryBean) &#123; final FactoryBean&lt;?&gt; factory = (FactoryBean&lt;?&gt;) bean; boolean isEagerInit; if (System.getSecurityManager() != null &amp;&amp; factory instanceof SmartFactoryBean)&#123; isEagerInit = AccessController.doPrivileged((PrivilegedAction&lt;Boolean&gt;) ((SmartFactoryBean&lt;?&gt;) factory)::isEagerInit, getAccessControlContext()); &#125; else &#123; isEagerInit = (factory instanceof SmartFactoryBean &amp;&amp; ((SmartFactoryBean&lt;?&gt;) factory).isEagerInit()); &#125; if (isEagerInit) &#123; getBean(beanName); &#125; &#125; &#125; else &#123; getBean(beanName); &#125; &#125; &#125; // Trigger post-initialization callback for all applicable beans... for (String beanName : beanNames) &#123; Object singletonInstance = getSingleton(beanName); if (singletonInstance instanceof SmartInitializingSingleton) &#123; final SmartInitializingSingleton smartSingleton = (SmartInitializingSingleton) singletonInstance; if (System.getSecurityManager() != null) &#123; AccessController.doPrivileged((PrivilegedAction&lt;Object&gt;) () -&gt; &#123; smartSingleton.afterSingletonsInstantiated(); return null; &#125;, getAccessControlContext()); &#125; else &#123; smartSingleton.afterSingletonsInstantiated(); &#125; &#125; &#125;&#125; ä»ä¸Šé¢çš„ä»£ç ä¸­å¯ä»¥çœ‹åˆ°å¾ˆå¤šè°ƒç”¨äº† getBean(beanName) æ–¹æ³•ï¼Œè·Ÿè¸ªæ­¤æ–¹æ³•è¿›å»åï¼Œæœ€ç»ˆå‘ç° getBean è°ƒç”¨äº†AbstractBeanFactory ç±»çš„ doGetBean(xxx) æ–¹æ³•ï¼ŒdoGetBean(xxx) æ–¹æ³•ä¸­æœ‰è¿™ä¹ˆä¸€æ®µä»£ç ï¼š ä½†æ˜¯ createBean() æ–¹æ³•å¹¶æ²¡æœ‰å¾—åˆ°å®ç°ï¼Œå®ç°ç±»åœ¨ AbstractAutowireCapableBeanFactory ä¸­ã€‚è¿™æ‰æ˜¯åˆ›å»º bean çš„æ ¸å¿ƒæ–¹æ³•ã€‚ ä¸çŸ¥ä¸è§‰ï¼Œä»£ç çœ‹çš„è¶Šæ¥è¶Šæ·±ï¼Œæ„Ÿè§‰æ€ç»´éƒ½å·®ç‚¹å›ä¸å» run æ–¹æ³•äº†ï¼Œåˆ‡å›å¤§è„‘çš„ä¸Šä¸‹æ–‡çº¿ç¨‹åˆ° run æ–¹æ³•å»ã€‚ 11ã€afterRefresh(context, applicationArguments)ï¼šåœ¨ä¸Šä¸‹æ–‡åˆ·æ–°åè°ƒç”¨è¯¥æ–¹æ³•ï¼Œå…¶å†…éƒ¨æ²¡æœ‰åšä»»ä½•æ“ä½œã€‚ å‘ç°æ²¡åšä»»ä½•æ“ä½œäº†ä¹‹åï¼Œå°±è§‰å¾—æœ‰ç‚¹å¥‡æ€ªï¼Œæ‰€ä»¥æŠŠå½“å‰ç‰ˆæœ¬å’Œ 1.5.12 å¯¹æ¯”äº†ä¸‹ï¼Œå‘ç°ï¼š åœ¨ 1.5.12 ä¸­çš„ afterRefresh() æ–¹æ³•ä¸­è°ƒç”¨äº† callRunners() æ–¹æ³•ï¼Œä½†æ˜¯åœ¨ 2.0.1 ç‰ˆæœ¬ä¸­çš„ run æ–¹æ³•ä¸­è°ƒç”¨äº† callRunners () æ–¹æ³•: è¿™é‡Œä¸å¾—ä¸è¯´ SpringApplicationRunListeners åœ¨ 2.0.1 ä¸­çš„æ”¹å˜ï¼š å¯ä»¥å‘ç°åœ¨ run æ–¹æ³•ä¸­ï¼ŒSpringApplicationRunListeners ç›‘å¬å™¨çš„çŠ¶æ€èŠ±ç”Ÿäº†å˜åŒ–ï¼Œè¿™ä¹Ÿæ˜¯é€šè¿‡å¯¹æ¯”ä¸åŒç‰ˆæœ¬çš„ä»£ç æ‰çŸ¥é“çš„åŒºåˆ«ï¼Œæ‰€ä»¥è¯´æˆ‘ä»¬çœ‹æºç éœ€è¦å¤šå¯¹æ¯”ç€çœ‹ã€‚ soï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹è¿™ä¸ª SpringApplicationRunListener è¿™ä¸ªæ¥å£ï¼š started çŠ¶æ€ï¼šThe context has been refreshed and the application has started but CommandLineRunner and ApplicationRunner have not been called running çŠ¶æ€ï¼šCalled immediately before the run method finishes, when the application context has been refreshed and all CommandLineRunner and ApplicationRunners have been called. ç›¸å…³æ–‡ç« 1ã€Spring Boot 2.0ç³»åˆ—æ–‡ç« (ä¸€)ï¼šSpring Boot 2.0 è¿ç§»æŒ‡å— 2ã€Spring Boot 2.0ç³»åˆ—æ–‡ç« (äºŒ)ï¼šSpring Boot 2.0 æ–°ç‰¹æ€§è¯¦è§£ 3ã€Spring Boot 2.0ç³»åˆ—æ–‡ç« (ä¸‰)ï¼šSpring Boot 2.0 é…ç½®æ”¹å˜ 4ã€Spring Boot 2.0ç³»åˆ—æ–‡ç« (å››)ï¼šSpring Boot 2.0 æºç é˜…è¯»ç¯å¢ƒæ­å»º 5ã€Spring Boot 2.0ç³»åˆ—æ–‡ç« (äº”)ï¼šSpring Boot 2.0 é¡¹ç›®æºç ç»“æ„é¢„è§ˆ 6ã€Spring Boot 2.0ç³»åˆ—æ–‡ç« (å…­)ï¼šSpring boot 2.0 ä¸­ SpringBootApplication æ³¨è§£è¯¦è§£ 7ã€Spring Boot 2.0ç³»åˆ—æ–‡ç« (ä¸ƒ)ï¼šSpringApplication æ·±å…¥æ¢ç´¢ æ€»ç»“æœ¬æ–‡ä»æºç çº§åˆ«åˆ†æäº† Spring Boot åº”ç”¨ç¨‹åºçš„å¯åŠ¨è¿‡ç¨‹ï¼Œç€é‡çœ‹äº† SpringApplication ç±»ä¸­çš„æ„é€ å‡½æ•°çš„åˆå§‹åŒ–å’Œå…¶ run æ–¹æ³•å†…éƒ¨å®ç°ï¼Œå¹¶æŠŠæ¶‰åŠåˆ°çš„æµç¨‹ä»£ç éƒ½è¿‡äº†ä¸€éã€‚ æ„Ÿæ‚Ÿï¼šæœ‰æ—¶å€™è·Ÿä»£ç è·Ÿç€è·Ÿç€ï¼Œå‘ç°è¶Šé™·è¶Šæ·±ï¼Œå¥½éš¾è·³å‡ºæ¥ï¼åé¢è¿˜éœ€å¤šå‘åˆ«äººè¯·æ•™é˜…è¯»æºç çš„æŠ€å·§ï¼ æœ€åè™½ç„¶æºç å¾ˆéš¾ï¼Œä½†éšç€ä¸æ–­çš„æ¢ç´¢ï¼Œæºç åœ¨ä½ é¢å‰å°†ä¼šä¸€è§ˆæ— é—ï¼Œäº«å—è¿™ç§æ¢ç´¢åçš„æˆå°±æ„Ÿï¼åŠ æ²¹ï¼éªšå¹´ï¼ è‡ªå·±æœ¬äººèƒ½åŠ›æœ‰é™ï¼Œæºç çœ‹çš„ä¸å¤šï¼Œä¸Šé¢å¦‚æœ‰ä¸å¯¹çš„è¿˜è¯·ç•™è¨€äº¤æµã€‚","tags":[{"name":"Java","slug":"Java","permalink":"http://yoursite.com/tags/Java/"},{"name":"SpringBoot","slug":"SpringBoot","permalink":"http://yoursite.com/tags/SpringBoot/"}]},{"title":"åˆ†å¸ƒå¼é”çœ‹è¿™ç¯‡å°±å¤Ÿäº†","date":"2018-04-23T16:00:00.000Z","path":"2018/04/24/Distributed_lock/","text":"å…³æ³¨æˆ‘ è½¬è½½è¯·åŠ¡å¿…æ³¨æ˜åŸåˆ›åœ°å€ä¸ºï¼šhttp://www.54tianzhisheng.cn/2018/04/24/Distributed_lock/ ä»€ä¹ˆæ˜¯é”ï¼Ÿ åœ¨å•è¿›ç¨‹çš„ç³»ç»Ÿä¸­ï¼Œå½“å­˜åœ¨å¤šä¸ªçº¿ç¨‹å¯ä»¥åŒæ—¶æ”¹å˜æŸä¸ªå˜é‡ï¼ˆå¯å˜å…±äº«å˜é‡ï¼‰æ—¶ï¼Œå°±éœ€è¦å¯¹å˜é‡æˆ–ä»£ç å—åšåŒæ­¥ï¼Œä½¿å…¶åœ¨ä¿®æ”¹è¿™ç§å˜é‡æ—¶èƒ½å¤Ÿçº¿æ€§æ‰§è¡Œæ¶ˆé™¤å¹¶å‘ä¿®æ”¹å˜é‡ã€‚ è€ŒåŒæ­¥çš„æœ¬è´¨æ˜¯é€šè¿‡é”æ¥å®ç°çš„ã€‚ä¸ºäº†å®ç°å¤šä¸ªçº¿ç¨‹åœ¨ä¸€ä¸ªæ—¶åˆ»åŒä¸€ä¸ªä»£ç å—åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹å¯æ‰§è¡Œï¼Œé‚£ä¹ˆéœ€è¦åœ¨æŸä¸ªåœ°æ–¹åšä¸ªæ ‡è®°ï¼Œè¿™ä¸ªæ ‡è®°å¿…é¡»æ¯ä¸ªçº¿ç¨‹éƒ½èƒ½çœ‹åˆ°ï¼Œå½“æ ‡è®°ä¸å­˜åœ¨æ—¶å¯ä»¥è®¾ç½®è¯¥æ ‡è®°ï¼Œå…¶ä½™åç»­çº¿ç¨‹å‘ç°å·²ç»æœ‰æ ‡è®°äº†åˆ™ç­‰å¾…æ‹¥æœ‰æ ‡è®°çš„çº¿ç¨‹ç»“æŸåŒæ­¥ä»£ç å—å–æ¶ˆæ ‡è®°åå†å»å°è¯•è®¾ç½®æ ‡è®°ã€‚è¿™ä¸ªæ ‡è®°å¯ä»¥ç†è§£ä¸ºé”ã€‚ ä¸åŒåœ°æ–¹å®ç°é”çš„æ–¹å¼ä¹Ÿä¸ä¸€æ ·ï¼Œåªè¦èƒ½æ»¡è¶³æ‰€æœ‰çº¿ç¨‹éƒ½èƒ½çœ‹å¾—åˆ°æ ‡è®°å³å¯ã€‚å¦‚ Java ä¸­ synchronize æ˜¯åœ¨å¯¹è±¡å¤´è®¾ç½®æ ‡è®°ï¼ŒLock æ¥å£çš„å®ç°ç±»åŸºæœ¬ä¸Šéƒ½åªæ˜¯æŸä¸€ä¸ª volitile ä¿®é¥°çš„ int å‹å˜é‡å…¶ä¿è¯æ¯ä¸ªçº¿ç¨‹éƒ½èƒ½æ‹¥æœ‰å¯¹è¯¥ int çš„å¯è§æ€§å’ŒåŸå­ä¿®æ”¹ï¼Œlinux å†…æ ¸ä¸­ä¹Ÿæ˜¯åˆ©ç”¨äº’æ–¥é‡æˆ–ä¿¡å·é‡ç­‰å†…å­˜æ•°æ®åšæ ‡è®°ã€‚ é™¤äº†åˆ©ç”¨å†…å­˜æ•°æ®åšé”å…¶å®ä»»ä½•äº’æ–¥çš„éƒ½èƒ½åšé”ï¼ˆåªè€ƒè™‘äº’æ–¥æƒ…å†µï¼‰ï¼Œå¦‚æµæ°´è¡¨ä¸­æµæ°´å·ä¸æ—¶é—´ç»“åˆåšå¹‚ç­‰æ ¡éªŒå¯ä»¥çœ‹ä½œæ˜¯ä¸€ä¸ªä¸ä¼šé‡Šæ”¾çš„é”ï¼Œæˆ–è€…ä½¿ç”¨æŸä¸ªæ–‡ä»¶æ˜¯å¦å­˜åœ¨ä½œä¸ºé”ç­‰ã€‚åªéœ€è¦æ»¡è¶³åœ¨å¯¹æ ‡è®°è¿›è¡Œä¿®æ”¹èƒ½ä¿è¯åŸå­æ€§å’Œå†…å­˜å¯è§æ€§å³å¯ã€‚ ä»€ä¹ˆæ˜¯åˆ†å¸ƒå¼ï¼Ÿåˆ†å¸ƒå¼çš„ CAP ç†è®ºå‘Šè¯‰æˆ‘ä»¬: ä»»ä½•ä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿéƒ½æ— æ³•åŒæ—¶æ»¡è¶³ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰ã€å¯ç”¨æ€§ï¼ˆAvailabilityï¼‰å’Œåˆ†åŒºå®¹é”™æ€§ï¼ˆPartition toleranceï¼‰ï¼Œæœ€å¤šåªèƒ½åŒæ—¶æ»¡è¶³ä¸¤é¡¹ã€‚ ç›®å‰å¾ˆå¤šå¤§å‹ç½‘ç«™åŠåº”ç”¨éƒ½æ˜¯åˆ†å¸ƒå¼éƒ¨ç½²çš„ï¼Œåˆ†å¸ƒå¼åœºæ™¯ä¸­çš„æ•°æ®ä¸€è‡´æ€§é—®é¢˜ä¸€ç›´æ˜¯ä¸€ä¸ªæ¯”è¾ƒé‡è¦çš„è¯é¢˜ã€‚åŸºäº CAPç†è®ºï¼Œå¾ˆå¤šç³»ç»Ÿåœ¨è®¾è®¡ä¹‹åˆå°±è¦å¯¹è¿™ä¸‰è€…åšå‡ºå–èˆã€‚åœ¨äº’è”ç½‘é¢†åŸŸçš„ç»å¤§å¤šæ•°çš„åœºæ™¯ä¸­ï¼Œéƒ½éœ€è¦ç‰ºç‰²å¼ºä¸€è‡´æ€§æ¥æ¢å–ç³»ç»Ÿçš„é«˜å¯ç”¨æ€§ï¼Œç³»ç»Ÿå¾€å¾€åªéœ€è¦ä¿è¯æœ€ç»ˆä¸€è‡´æ€§ã€‚ åˆ†å¸ƒå¼åœºæ™¯ æ­¤å¤„ä¸»è¦æŒ‡é›†ç¾¤æ¨¡å¼ä¸‹ï¼Œå¤šä¸ªç›¸åŒæœåŠ¡åŒæ—¶å¼€å¯. åœ¨è®¸å¤šçš„åœºæ™¯ä¸­ï¼Œæˆ‘ä»¬ä¸ºäº†ä¿è¯æ•°æ®çš„æœ€ç»ˆä¸€è‡´æ€§ï¼Œéœ€è¦å¾ˆå¤šçš„æŠ€æœ¯æ–¹æ¡ˆæ¥æ”¯æŒï¼Œæ¯”å¦‚åˆ†å¸ƒå¼äº‹åŠ¡ã€åˆ†å¸ƒå¼é”ç­‰ã€‚å¾ˆå¤šæ—¶å€™æˆ‘ä»¬éœ€è¦ä¿è¯ä¸€ä¸ªæ–¹æ³•åœ¨åŒä¸€æ—¶é—´å†…åªèƒ½è¢«åŒä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œã€‚åœ¨å•æœºç¯å¢ƒä¸­ï¼Œé€šè¿‡ Java æä¾›çš„å¹¶å‘ API æˆ‘ä»¬å¯ä»¥è§£å†³ï¼Œä½†æ˜¯åœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸‹ï¼Œå°±æ²¡æœ‰é‚£ä¹ˆç®€å•å•¦ã€‚ åˆ†å¸ƒå¼ä¸å•æœºæƒ…å†µä¸‹æœ€å¤§çš„ä¸åŒåœ¨äºå…¶ä¸æ˜¯å¤šçº¿ç¨‹è€Œæ˜¯å¤šè¿›ç¨‹ã€‚ å¤šçº¿ç¨‹ç”±äºå¯ä»¥å…±äº«å †å†…å­˜ï¼Œå› æ­¤å¯ä»¥ç®€å•çš„é‡‡å–å†…å­˜ä½œä¸ºæ ‡è®°å­˜å‚¨ä½ç½®ã€‚è€Œè¿›ç¨‹ä¹‹é—´ç”šè‡³å¯èƒ½éƒ½ä¸åœ¨åŒä¸€å°ç‰©ç†æœºä¸Šï¼Œå› æ­¤éœ€è¦å°†æ ‡è®°å­˜å‚¨åœ¨ä¸€ä¸ªæ‰€æœ‰è¿›ç¨‹éƒ½èƒ½çœ‹åˆ°çš„åœ°æ–¹ã€‚ ä»€ä¹ˆæ˜¯åˆ†å¸ƒå¼é”ï¼Ÿ å½“åœ¨åˆ†å¸ƒå¼æ¨¡å‹ä¸‹ï¼Œæ•°æ®åªæœ‰ä¸€ä»½ï¼ˆæˆ–æœ‰é™åˆ¶ï¼‰ï¼Œæ­¤æ—¶éœ€è¦åˆ©ç”¨é”çš„æŠ€æœ¯æ§åˆ¶æŸä¸€æ—¶åˆ»ä¿®æ”¹æ•°æ®çš„è¿›ç¨‹æ•°ã€‚ ä¸å•æœºæ¨¡å¼ä¸‹çš„é”ä¸ä»…éœ€è¦ä¿è¯è¿›ç¨‹å¯è§ï¼Œè¿˜éœ€è¦è€ƒè™‘è¿›ç¨‹ä¸é”ä¹‹é—´çš„ç½‘ç»œé—®é¢˜ã€‚ï¼ˆæˆ‘è§‰å¾—åˆ†å¸ƒå¼æƒ…å†µä¸‹ä¹‹æ‰€ä»¥é—®é¢˜å˜å¾—å¤æ‚ï¼Œä¸»è¦å°±æ˜¯éœ€è¦è€ƒè™‘åˆ°ç½‘ç»œçš„å»¶æ—¶å’Œä¸å¯é ã€‚ã€‚ã€‚ä¸€ä¸ªå¤§å‘ï¼‰ åˆ†å¸ƒå¼é”è¿˜æ˜¯å¯ä»¥å°†æ ‡è®°å­˜åœ¨å†…å­˜ï¼Œåªæ˜¯è¯¥å†…å­˜ä¸æ˜¯æŸä¸ªè¿›ç¨‹åˆ†é…çš„å†…å­˜è€Œæ˜¯å…¬å…±å†…å­˜å¦‚ Redisã€Memcacheã€‚è‡³äºåˆ©ç”¨æ•°æ®åº“ã€æ–‡ä»¶ç­‰åšé”ä¸å•æœºçš„å®ç°æ˜¯ä¸€æ ·çš„ï¼Œåªè¦ä¿è¯æ ‡è®°èƒ½äº’æ–¥å°±è¡Œã€‚ æˆ‘ä»¬éœ€è¦æ€æ ·çš„åˆ†å¸ƒå¼é”ï¼Ÿ å¯ä»¥ä¿è¯åœ¨åˆ†å¸ƒå¼éƒ¨ç½²çš„åº”ç”¨é›†ç¾¤ä¸­ï¼ŒåŒä¸€ä¸ªæ–¹æ³•åœ¨åŒä¸€æ—¶é—´åªèƒ½è¢«ä¸€å°æœºå™¨ä¸Šçš„ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œã€‚ è¿™æŠŠé”è¦æ˜¯ä¸€æŠŠå¯é‡å…¥é”ï¼ˆé¿å…æ­»é”ï¼‰ è¿™æŠŠé”æœ€å¥½æ˜¯ä¸€æŠŠé˜»å¡é”ï¼ˆæ ¹æ®ä¸šåŠ¡éœ€æ±‚è€ƒè™‘è¦ä¸è¦è¿™æ¡ï¼‰ è¿™æŠŠé”æœ€å¥½æ˜¯ä¸€æŠŠå…¬å¹³é”ï¼ˆæ ¹æ®ä¸šåŠ¡éœ€æ±‚è€ƒè™‘è¦ä¸è¦è¿™æ¡ï¼‰ æœ‰é«˜å¯ç”¨çš„è·å–é”å’Œé‡Šæ”¾é”åŠŸèƒ½ è·å–é”å’Œé‡Šæ”¾é”çš„æ€§èƒ½è¦å¥½ åŸºäºæ•°æ®åº“åšåˆ†å¸ƒå¼é” åŸºäºä¹è§‚é” åŸºäºè¡¨ä¸»é”®å”¯ä¸€åšåˆ†å¸ƒå¼é”åˆ©ç”¨ä¸»é”®å”¯ä¸€çš„ç‰¹æ€§ï¼Œå¦‚æœæœ‰å¤šä¸ªè¯·æ±‚åŒæ—¶æäº¤åˆ°æ•°æ®åº“çš„è¯ï¼Œæ•°æ®åº“ä¼šä¿è¯åªæœ‰ä¸€ä¸ªæ“ä½œå¯ä»¥æˆåŠŸï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥è®¤ä¸ºæ“ä½œæˆåŠŸçš„é‚£ä¸ªçº¿ç¨‹è·å¾—äº†è¯¥æ–¹æ³•çš„é”ï¼Œå½“æ–¹æ³•æ‰§è¡Œå®Œæ¯•ä¹‹åï¼Œæƒ³è¦é‡Šæ”¾é”çš„è¯ï¼Œåˆ é™¤è¿™æ¡æ•°æ®åº“è®°å½•å³å¯ã€‚ ä¸Šé¢è¿™ç§ç®€å•çš„å®ç°æœ‰ä»¥ä¸‹å‡ ä¸ªé—®é¢˜ï¼š è¿™æŠŠé”å¼ºä¾èµ–æ•°æ®åº“çš„å¯ç”¨æ€§ï¼Œæ•°æ®åº“æ˜¯ä¸€ä¸ªå•ç‚¹ï¼Œä¸€æ—¦æ•°æ®åº“æŒ‚æ‰ï¼Œä¼šå¯¼è‡´ä¸šåŠ¡ç³»ç»Ÿä¸å¯ç”¨ã€‚ è¿™æŠŠé”æ²¡æœ‰å¤±æ•ˆæ—¶é—´ï¼Œä¸€æ—¦è§£é”æ“ä½œå¤±è´¥ï¼Œå°±ä¼šå¯¼è‡´é”è®°å½•ä¸€ç›´åœ¨æ•°æ®åº“ä¸­ï¼Œå…¶ä»–çº¿ç¨‹æ— æ³•å†è·å¾—åˆ°é”ã€‚ è¿™æŠŠé”åªèƒ½æ˜¯éé˜»å¡çš„ï¼Œå› ä¸ºæ•°æ®çš„ insert æ“ä½œï¼Œä¸€æ—¦æ’å…¥å¤±è´¥å°±ä¼šç›´æ¥æŠ¥é”™ã€‚æ²¡æœ‰è·å¾—é”çš„çº¿ç¨‹å¹¶ä¸ä¼šè¿›å…¥æ’é˜Ÿé˜Ÿåˆ—ï¼Œè¦æƒ³å†æ¬¡è·å¾—é”å°±è¦å†æ¬¡è§¦å‘è·å¾—é”æ“ä½œã€‚ è¿™æŠŠé”æ˜¯éé‡å…¥çš„ï¼ŒåŒä¸€ä¸ªçº¿ç¨‹åœ¨æ²¡æœ‰é‡Šæ”¾é”ä¹‹å‰æ— æ³•å†æ¬¡è·å¾—è¯¥é”ã€‚å› ä¸ºæ•°æ®ä¸­æ•°æ®å·²ç»å­˜åœ¨äº†ã€‚ è¿™æŠŠé”æ˜¯éå…¬å¹³é”ï¼Œæ‰€æœ‰ç­‰å¾…é”çš„çº¿ç¨‹å‡­è¿æ°”å»äº‰å¤ºé”ã€‚ åœ¨ MySQL æ•°æ®åº“ä¸­é‡‡ç”¨ä¸»é”®å†²çªé˜²é‡ï¼Œåœ¨å¤§å¹¶å‘æƒ…å†µä¸‹æœ‰å¯èƒ½ä¼šé€ æˆé”è¡¨ç°è±¡ã€‚ å½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æœ‰å…¶ä»–æ–¹å¼è§£å†³ä¸Šé¢çš„é—®é¢˜ã€‚ æ•°æ®åº“æ˜¯å•ç‚¹ï¼Ÿæä¸¤ä¸ªæ•°æ®åº“ï¼Œæ•°æ®ä¹‹å‰åŒå‘åŒæ­¥ï¼Œä¸€æ—¦æŒ‚æ‰å¿«é€Ÿåˆ‡æ¢åˆ°å¤‡åº“ä¸Šã€‚ æ²¡æœ‰å¤±æ•ˆæ—¶é—´ï¼Ÿåªè¦åšä¸€ä¸ªå®šæ—¶ä»»åŠ¡ï¼Œæ¯éš”ä¸€å®šæ—¶é—´æŠŠæ•°æ®åº“ä¸­çš„è¶…æ—¶æ•°æ®æ¸…ç†ä¸€éã€‚ éé˜»å¡çš„ï¼Ÿæä¸€ä¸ª while å¾ªç¯ï¼Œç›´åˆ° insert æˆåŠŸå†è¿”å›æˆåŠŸã€‚ éé‡å…¥çš„ï¼Ÿåœ¨æ•°æ®åº“è¡¨ä¸­åŠ ä¸ªå­—æ®µï¼Œè®°å½•å½“å‰è·å¾—é”çš„æœºå™¨çš„ä¸»æœºä¿¡æ¯å’Œçº¿ç¨‹ä¿¡æ¯ï¼Œé‚£ä¹ˆä¸‹æ¬¡å†è·å–é”çš„æ—¶å€™å…ˆæŸ¥è¯¢æ•°æ®åº“ï¼Œå¦‚æœå½“å‰æœºå™¨çš„ä¸»æœºä¿¡æ¯å’Œçº¿ç¨‹ä¿¡æ¯åœ¨æ•°æ®åº“å¯ä»¥æŸ¥åˆ°çš„è¯ï¼Œç›´æ¥æŠŠé”åˆ†é…ç»™ä»–å°±å¯ä»¥äº†ã€‚ éå…¬å¹³çš„ï¼Ÿå†å»ºä¸€å¼ ä¸­é—´è¡¨ï¼Œå°†ç­‰å¾…é”çš„çº¿ç¨‹å…¨è®°å½•ä¸‹æ¥ï¼Œå¹¶æ ¹æ®åˆ›å»ºæ—¶é—´æ’åºï¼Œåªæœ‰æœ€å…ˆåˆ›å»ºçš„å…è®¸è·å–é”ã€‚ æ¯”è¾ƒå¥½çš„åŠæ³•æ˜¯åœ¨ç¨‹åºä¸­ç”Ÿäº§ä¸»é”®è¿›è¡Œé˜²é‡ã€‚ åŸºäºè¡¨å­—æ®µç‰ˆæœ¬å·åšåˆ†å¸ƒå¼é”è¿™ä¸ªç­–ç•¥æºäº mysql çš„ mvcc æœºåˆ¶ï¼Œä½¿ç”¨è¿™ä¸ªç­–ç•¥å…¶å®æœ¬èº«æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œå”¯ä¸€çš„é—®é¢˜å°±æ˜¯å¯¹æ•°æ®è¡¨ä¾µå…¥è¾ƒå¤§ï¼Œæˆ‘ä»¬è¦ä¸ºæ¯ä¸ªè¡¨è®¾è®¡ä¸€ä¸ªç‰ˆæœ¬å·å­—æ®µï¼Œç„¶åå†™ä¸€æ¡åˆ¤æ–­ sql æ¯æ¬¡è¿›è¡Œåˆ¤æ–­ï¼Œå¢åŠ äº†æ•°æ®åº“æ“ä½œçš„æ¬¡æ•°ï¼Œåœ¨é«˜å¹¶å‘çš„è¦æ±‚ä¸‹ï¼Œå¯¹æ•°æ®åº“è¿æ¥çš„å¼€é”€ä¹Ÿæ˜¯æ— æ³•å¿å—çš„ã€‚ åŸºäºæ‚²è§‚é” åŸºäºæ•°æ®åº“æ’ä»–é”åšåˆ†å¸ƒå¼é”åœ¨æŸ¥è¯¢è¯­å¥åé¢å¢åŠ for updateï¼Œæ•°æ®åº“ä¼šåœ¨æŸ¥è¯¢è¿‡ç¨‹ä¸­ç»™æ•°æ®åº“è¡¨å¢åŠ æ’ä»–é” (æ³¨æ„ï¼š InnoDB å¼•æ“åœ¨åŠ é”çš„æ—¶å€™ï¼Œåªæœ‰é€šè¿‡ç´¢å¼•è¿›è¡Œæ£€ç´¢çš„æ—¶å€™æ‰ä¼šä½¿ç”¨è¡Œçº§é”ï¼Œå¦åˆ™ä¼šä½¿ç”¨è¡¨çº§é”ã€‚è¿™é‡Œæˆ‘ä»¬å¸Œæœ›ä½¿ç”¨è¡Œçº§é”ï¼Œå°±è¦ç»™è¦æ‰§è¡Œçš„æ–¹æ³•å­—æ®µåæ·»åŠ ç´¢å¼•ï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸ªç´¢å¼•ä¸€å®šè¦åˆ›å»ºæˆå”¯ä¸€ç´¢å¼•ï¼Œå¦åˆ™ä¼šå‡ºç°å¤šä¸ªé‡è½½æ–¹æ³•ä¹‹é—´æ— æ³•åŒæ—¶è¢«è®¿é—®çš„é—®é¢˜ã€‚é‡è½½æ–¹æ³•çš„è¯å»ºè®®æŠŠå‚æ•°ç±»å‹ä¹ŸåŠ ä¸Šã€‚)ã€‚å½“æŸæ¡è®°å½•è¢«åŠ ä¸Šæ’ä»–é”ä¹‹åï¼Œå…¶ä»–çº¿ç¨‹æ— æ³•å†åœ¨è¯¥è¡Œè®°å½•ä¸Šå¢åŠ æ’ä»–é”ã€‚ æˆ‘ä»¬å¯ä»¥è®¤ä¸ºè·å¾—æ’ä»–é”çš„çº¿ç¨‹å³å¯è·å¾—åˆ†å¸ƒå¼é”ï¼Œå½“è·å–åˆ°é”ä¹‹åï¼Œå¯ä»¥æ‰§è¡Œæ–¹æ³•çš„ä¸šåŠ¡é€»è¾‘ï¼Œæ‰§è¡Œå®Œæ–¹æ³•ä¹‹åï¼Œé€šè¿‡connection.commit()æ“ä½œæ¥é‡Šæ”¾é”ã€‚ è¿™ç§æ–¹æ³•å¯ä»¥æœ‰æ•ˆçš„è§£å†³ä¸Šé¢æåˆ°çš„æ— æ³•é‡Šæ”¾é”å’Œé˜»å¡é”çš„é—®é¢˜ã€‚ é˜»å¡é”ï¼Ÿ for updateè¯­å¥ä¼šåœ¨æ‰§è¡ŒæˆåŠŸåç«‹å³è¿”å›ï¼Œåœ¨æ‰§è¡Œå¤±è´¥æ—¶ä¸€ç›´å¤„äºé˜»å¡çŠ¶æ€ï¼Œç›´åˆ°æˆåŠŸã€‚ é”å®šä¹‹åæœåŠ¡å®•æœºï¼Œæ— æ³•é‡Šæ”¾ï¼Ÿä½¿ç”¨è¿™ç§æ–¹å¼ï¼ŒæœåŠ¡å®•æœºä¹‹åæ•°æ®åº“ä¼šè‡ªå·±æŠŠé”é‡Šæ”¾æ‰ã€‚ ä½†æ˜¯è¿˜æ˜¯æ— æ³•ç›´æ¥è§£å†³æ•°æ®åº“å•ç‚¹å’Œå¯é‡å…¥é—®é¢˜ã€‚ è¿™é‡Œè¿˜å¯èƒ½å­˜åœ¨å¦å¤–ä¸€ä¸ªé—®é¢˜ï¼Œè™½ç„¶æˆ‘ä»¬å¯¹æ–¹æ³•å­—æ®µåä½¿ç”¨äº†å”¯ä¸€ç´¢å¼•ï¼Œå¹¶ä¸”æ˜¾ç¤ºä½¿ç”¨ for update æ¥ä½¿ç”¨è¡Œçº§é”ã€‚ä½†æ˜¯ï¼ŒMySQL ä¼šå¯¹æŸ¥è¯¢è¿›è¡Œä¼˜åŒ–ï¼Œå³ä¾¿åœ¨æ¡ä»¶ä¸­ä½¿ç”¨äº†ç´¢å¼•å­—æ®µï¼Œä½†æ˜¯å¦ä½¿ç”¨ç´¢å¼•æ¥æ£€ç´¢æ•°æ®æ˜¯ç”± MySQL é€šè¿‡åˆ¤æ–­ä¸åŒæ‰§è¡Œè®¡åˆ’çš„ä»£ä»·æ¥å†³å®šçš„ï¼Œå¦‚æœ MySQL è®¤ä¸ºå…¨è¡¨æ‰«æ•ˆç‡æ›´é«˜ï¼Œæ¯”å¦‚å¯¹ä¸€äº›å¾ˆå°çš„è¡¨ï¼Œå®ƒå°±ä¸ä¼šä½¿ç”¨ç´¢å¼•ï¼Œè¿™ç§æƒ…å†µä¸‹ InnoDB å°†ä½¿ç”¨è¡¨é”ï¼Œè€Œä¸æ˜¯è¡Œé”ã€‚å¦‚æœå‘ç”Ÿè¿™ç§æƒ…å†µå°±æ‚²å‰§äº†ã€‚ã€‚ã€‚ è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯æˆ‘ä»¬è¦ä½¿ç”¨æ’ä»–é”æ¥è¿›è¡Œåˆ†å¸ƒå¼é”çš„ lockï¼Œé‚£ä¹ˆä¸€ä¸ªæ’ä»–é”é•¿æ—¶é—´ä¸æäº¤ï¼Œå°±ä¼šå ç”¨æ•°æ®åº“è¿æ¥ã€‚ä¸€æ—¦ç±»ä¼¼çš„è¿æ¥å˜å¾—å¤šäº†ï¼Œå°±å¯èƒ½æŠŠæ•°æ®åº“è¿æ¥æ± æ’‘çˆ†ã€‚ ä¼˜ç¼ºç‚¹ä¼˜ç‚¹ï¼šç®€å•ï¼Œæ˜“äºç†è§£ ç¼ºç‚¹ï¼šä¼šæœ‰å„ç§å„æ ·çš„é—®é¢˜ï¼ˆæ“ä½œæ•°æ®åº“éœ€è¦ä¸€å®šçš„å¼€é”€ï¼Œä½¿ç”¨æ•°æ®åº“çš„è¡Œçº§é”å¹¶ä¸ä¸€å®šé è°±ï¼Œæ€§èƒ½ä¸é è°±ï¼‰ åŸºäº Redis åšåˆ†å¸ƒå¼é”åŸºäº redis çš„ setnx()ã€expire() æ–¹æ³•åšåˆ†å¸ƒå¼é”setnx()setnx çš„å«ä¹‰å°±æ˜¯ SET if Not Existsï¼Œå…¶ä¸»è¦æœ‰ä¸¤ä¸ªå‚æ•° setnx(key, value)ã€‚è¯¥æ–¹æ³•æ˜¯åŸå­çš„ï¼Œå¦‚æœ key ä¸å­˜åœ¨ï¼Œåˆ™è®¾ç½®å½“å‰ key æˆåŠŸï¼Œè¿”å› 1ï¼›å¦‚æœå½“å‰ key å·²ç»å­˜åœ¨ï¼Œåˆ™è®¾ç½®å½“å‰ key å¤±è´¥ï¼Œè¿”å› 0ã€‚ expire()expire è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œè¦æ³¨æ„çš„æ˜¯ setnx å‘½ä»¤ä¸èƒ½è®¾ç½® key çš„è¶…æ—¶æ—¶é—´ï¼Œåªèƒ½é€šè¿‡ expire() æ¥å¯¹ key è®¾ç½®ã€‚ ä½¿ç”¨æ­¥éª¤1ã€setnx(lockkey, 1) å¦‚æœè¿”å› 0ï¼Œåˆ™è¯´æ˜å ä½å¤±è´¥ï¼›å¦‚æœè¿”å› 1ï¼Œåˆ™è¯´æ˜å ä½æˆåŠŸ 2ã€expire() å‘½ä»¤å¯¹ lockkey è®¾ç½®è¶…æ—¶æ—¶é—´ï¼Œä¸ºçš„æ˜¯é¿å…æ­»é”é—®é¢˜ã€‚ 3ã€æ‰§è¡Œå®Œä¸šåŠ¡ä»£ç åï¼Œå¯ä»¥é€šè¿‡ delete å‘½ä»¤åˆ é™¤ keyã€‚ è¿™ä¸ªæ–¹æ¡ˆå…¶å®æ˜¯å¯ä»¥è§£å†³æ—¥å¸¸å·¥ä½œä¸­çš„éœ€æ±‚çš„ï¼Œä½†ä»æŠ€æœ¯æ–¹æ¡ˆçš„æ¢è®¨ä¸Šæ¥è¯´ï¼Œå¯èƒ½è¿˜æœ‰ä¸€äº›å¯ä»¥å®Œå–„çš„åœ°æ–¹ã€‚æ¯”å¦‚ï¼Œå¦‚æœåœ¨ç¬¬ä¸€æ­¥ setnx æ‰§è¡ŒæˆåŠŸåï¼Œåœ¨ expire() å‘½ä»¤æ‰§è¡ŒæˆåŠŸå‰ï¼Œå‘ç”Ÿäº†å®•æœºçš„ç°è±¡ï¼Œé‚£ä¹ˆå°±ä¾ç„¶ä¼šå‡ºç°æ­»é”çš„é—®é¢˜ï¼Œæ‰€ä»¥å¦‚æœè¦å¯¹å…¶è¿›è¡Œå®Œå–„çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨ redis çš„ setnx()ã€get() å’Œ getset() æ–¹æ³•æ¥å®ç°åˆ†å¸ƒå¼é”ã€‚ åŸºäº redis çš„ setnx()ã€get()ã€getset()æ–¹æ³•åšåˆ†å¸ƒå¼é”è¿™ä¸ªæ–¹æ¡ˆçš„èƒŒæ™¯ä¸»è¦æ˜¯åœ¨ setnx() å’Œ expire() çš„æ–¹æ¡ˆä¸Šé’ˆå¯¹å¯èƒ½å­˜åœ¨çš„æ­»é”é—®é¢˜ï¼Œåšäº†ä¸€äº›ä¼˜åŒ–ã€‚ getset()è¿™ä¸ªå‘½ä»¤ä¸»è¦æœ‰ä¸¤ä¸ªå‚æ•° getset(keyï¼ŒnewValue)ã€‚è¯¥æ–¹æ³•æ˜¯åŸå­çš„ï¼Œå¯¹ key è®¾ç½® newValue è¿™ä¸ªå€¼ï¼Œå¹¶ä¸”è¿”å› key åŸæ¥çš„æ—§å€¼ã€‚å‡è®¾ key åŸæ¥æ˜¯ä¸å­˜åœ¨çš„ï¼Œé‚£ä¹ˆå¤šæ¬¡æ‰§è¡Œè¿™ä¸ªå‘½ä»¤ï¼Œä¼šå‡ºç°ä¸‹è¾¹çš„æ•ˆæœï¼š getset(key, â€œvalue1â€) è¿”å› null æ­¤æ—¶ key çš„å€¼ä¼šè¢«è®¾ç½®ä¸º value1 getset(key, â€œvalue2â€) è¿”å› value1 æ­¤æ—¶ key çš„å€¼ä¼šè¢«è®¾ç½®ä¸º value2 ä¾æ¬¡ç±»æ¨ï¼ ä½¿ç”¨æ­¥éª¤ setnx(lockkey, å½“å‰æ—¶é—´+è¿‡æœŸè¶…æ—¶æ—¶é—´)ï¼Œå¦‚æœè¿”å› 1ï¼Œåˆ™è·å–é”æˆåŠŸï¼›å¦‚æœè¿”å› 0 åˆ™æ²¡æœ‰è·å–åˆ°é”ï¼Œè½¬å‘ 2ã€‚ get(lockkey) è·å–å€¼ oldExpireTime ï¼Œå¹¶å°†è¿™ä¸ª value å€¼ä¸å½“å‰çš„ç³»ç»Ÿæ—¶é—´è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœå°äºå½“å‰ç³»ç»Ÿæ—¶é—´ï¼Œåˆ™è®¤ä¸ºè¿™ä¸ªé”å·²ç»è¶…æ—¶ï¼Œå¯ä»¥å…è®¸åˆ«çš„è¯·æ±‚é‡æ–°è·å–ï¼Œè½¬å‘ 3ã€‚ è®¡ç®— newExpireTime = å½“å‰æ—¶é—´+è¿‡æœŸè¶…æ—¶æ—¶é—´ï¼Œç„¶å getset(lockkey, newExpireTime) ä¼šè¿”å›å½“å‰ lockkey çš„å€¼currentExpireTimeã€‚ åˆ¤æ–­ currentExpireTime ä¸ oldExpireTime æ˜¯å¦ç›¸ç­‰ï¼Œå¦‚æœç›¸ç­‰ï¼Œè¯´æ˜å½“å‰ getset è®¾ç½®æˆåŠŸï¼Œè·å–åˆ°äº†é”ã€‚å¦‚æœä¸ç›¸ç­‰ï¼Œè¯´æ˜è¿™ä¸ªé”åˆè¢«åˆ«çš„è¯·æ±‚è·å–èµ°äº†ï¼Œé‚£ä¹ˆå½“å‰è¯·æ±‚å¯ä»¥ç›´æ¥è¿”å›å¤±è´¥ï¼Œæˆ–è€…ç»§ç»­é‡è¯•ã€‚ åœ¨è·å–åˆ°é”ä¹‹åï¼Œå½“å‰çº¿ç¨‹å¯ä»¥å¼€å§‹è‡ªå·±çš„ä¸šåŠ¡å¤„ç†ï¼Œå½“å¤„ç†å®Œæ¯•åï¼Œæ¯”è¾ƒè‡ªå·±çš„å¤„ç†æ—¶é—´å’Œå¯¹äºé”è®¾ç½®çš„è¶…æ—¶æ—¶é—´ï¼Œå¦‚æœå°äºé”è®¾ç½®çš„è¶…æ—¶æ—¶é—´ï¼Œåˆ™ç›´æ¥æ‰§è¡Œ delete é‡Šæ”¾é”ï¼›å¦‚æœå¤§äºé”è®¾ç½®çš„è¶…æ—¶æ—¶é—´ï¼Œåˆ™ä¸éœ€è¦å†é”è¿›è¡Œå¤„ç†ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576import cn.com.tpig.cache.redis.RedisService;import cn.com.tpig.utils.SpringUtils;//redisåˆ†å¸ƒå¼é”public final class RedisLockUtil &#123; private static final int defaultExpire = 60; private RedisLockUtil() &#123; // &#125; /** * åŠ é” * @param key redis key * @param expire è¿‡æœŸæ—¶é—´ï¼Œå•ä½ç§’ * @return true:åŠ é”æˆåŠŸï¼Œfalseï¼ŒåŠ é”å¤±è´¥ */ public static boolean lock(String key, int expire) &#123; RedisService redisService = SpringUtils.getBean(RedisService.class); long status = redisService.setnx(key, \"1\"); if(status == 1) &#123; redisService.expire(key, expire); return true; &#125; return false; &#125; public static boolean lock(String key) &#123; return lock2(key, defaultExpire); &#125; /** * åŠ é” * @param key redis key * @param expire è¿‡æœŸæ—¶é—´ï¼Œå•ä½ç§’ * @return true:åŠ é”æˆåŠŸï¼Œfalseï¼ŒåŠ é”å¤±è´¥ */ public static boolean lock2(String key, int expire) &#123; RedisService redisService = SpringUtils.getBean(RedisService.class); long value = System.currentTimeMillis() + expire; long status = redisService.setnx(key, String.valueOf(value)); if(status == 1) &#123; return true; &#125; long oldExpireTime = Long.parseLong(redisService.get(key, \"0\")); if(oldExpireTime &lt; System.currentTimeMillis()) &#123; //è¶…æ—¶ long newExpireTime = System.currentTimeMillis() + expire; long currentExpireTime = Long.parseLong(redisService.getSet(key, String.valueOf(newExpireTime))); if(currentExpireTime == oldExpireTime) &#123; return true; &#125; &#125; return false; &#125; public static void unLock1(String key) &#123; RedisService redisService = SpringUtils.getBean(RedisService.class); redisService.del(key); &#125; public static void unLock2(String key) &#123; RedisService redisService = SpringUtils.getBean(RedisService.class); long oldExpireTime = Long.parseLong(redisService.get(key, \"0\")); if(oldExpireTime &gt; System.currentTimeMillis()) &#123; redisService.del(key); &#125; &#125;&#125; 123456789101112131415public void drawRedPacket(long userId) &#123; String key = \"draw.redpacket.userid:\" + userId; boolean lock = RedisLockUtil.lock2(key, 60); if(lock) &#123; try &#123; //é¢†å–æ“ä½œ &#125; finally &#123; //é‡Šæ”¾é” RedisLockUtil.unLock(key); &#125; &#125; else &#123; new RuntimeException(\"é‡å¤é¢†å–å¥–åŠ±\"); &#125;&#125; åŸºäº Redlock åšåˆ†å¸ƒå¼é”Redlock æ˜¯ Redis çš„ä½œè€… antirez ç»™å‡ºçš„é›†ç¾¤æ¨¡å¼çš„ Redis åˆ†å¸ƒå¼é”ï¼Œå®ƒåŸºäº N ä¸ªå®Œå…¨ç‹¬ç«‹çš„ Redis èŠ‚ç‚¹ï¼ˆé€šå¸¸æƒ…å†µä¸‹ N å¯ä»¥è®¾ç½®æˆ 5ï¼‰ã€‚ ç®—æ³•çš„æ­¥éª¤å¦‚ä¸‹ï¼š 1ã€å®¢æˆ·ç«¯è·å–å½“å‰æ—¶é—´ï¼Œä»¥æ¯«ç§’ä¸ºå•ä½ã€‚ 2ã€å®¢æˆ·ç«¯å°è¯•è·å– N ä¸ªèŠ‚ç‚¹çš„é”ï¼Œï¼ˆæ¯ä¸ªèŠ‚ç‚¹è·å–é”çš„æ–¹å¼å’Œå‰é¢è¯´çš„ç¼“å­˜é”ä¸€æ ·ï¼‰ï¼ŒN ä¸ªèŠ‚ç‚¹ä»¥ç›¸åŒçš„ key å’Œ value è·å–é”ã€‚å®¢æˆ·ç«¯éœ€è¦è®¾ç½®æ¥å£è®¿é—®è¶…æ—¶ï¼Œæ¥å£è¶…æ—¶æ—¶é—´éœ€è¦è¿œè¿œå°äºé”è¶…æ—¶æ—¶é—´ï¼Œæ¯”å¦‚é”è‡ªåŠ¨é‡Šæ”¾çš„æ—¶é—´æ˜¯ 10sï¼Œé‚£ä¹ˆæ¥å£è¶…æ—¶å¤§æ¦‚è®¾ç½® 5-50msã€‚è¿™æ ·å¯ä»¥åœ¨æœ‰ redis èŠ‚ç‚¹å®•æœºåï¼Œè®¿é—®è¯¥èŠ‚ç‚¹æ—¶èƒ½å°½å¿«è¶…æ—¶ï¼Œè€Œå‡å°é”çš„æ­£å¸¸ä½¿ç”¨ã€‚ 3ã€å®¢æˆ·ç«¯è®¡ç®—åœ¨è·å¾—é”çš„æ—¶å€™èŠ±è´¹äº†å¤šå°‘æ—¶é—´ï¼Œæ–¹æ³•æ˜¯ç”¨å½“å‰æ—¶é—´å‡å»åœ¨æ­¥éª¤ä¸€è·å–çš„æ—¶é—´ï¼Œåªæœ‰å®¢æˆ·ç«¯è·å¾—äº†è¶…è¿‡ 3 ä¸ªèŠ‚ç‚¹çš„é”ï¼Œè€Œä¸”è·å–é”çš„æ—¶é—´å°äºé”çš„è¶…æ—¶æ—¶é—´ï¼Œå®¢æˆ·ç«¯æ‰è·å¾—äº†åˆ†å¸ƒå¼é”ã€‚ 4ã€å®¢æˆ·ç«¯è·å–çš„é”çš„æ—¶é—´ä¸ºè®¾ç½®çš„é”è¶…æ—¶æ—¶é—´å‡å»æ­¥éª¤ä¸‰è®¡ç®—å‡ºçš„è·å–é”èŠ±è´¹æ—¶é—´ã€‚ 5ã€å¦‚æœå®¢æˆ·ç«¯è·å–é”å¤±è´¥äº†ï¼Œå®¢æˆ·ç«¯ä¼šä¾æ¬¡åˆ é™¤æ‰€æœ‰çš„é”ã€‚ä½¿ç”¨ Redlock ç®—æ³•ï¼Œå¯ä»¥ä¿è¯åœ¨æŒ‚æ‰æœ€å¤š 2 ä¸ªèŠ‚ç‚¹çš„æ—¶å€™ï¼Œåˆ†å¸ƒå¼é”æœåŠ¡ä»ç„¶èƒ½å·¥ä½œï¼Œè¿™ç›¸æ¯”ä¹‹å‰çš„æ•°æ®åº“é”å’Œç¼“å­˜é”å¤§å¤§æé«˜äº†å¯ç”¨æ€§ï¼Œç”±äº redis çš„é«˜æ•ˆæ€§èƒ½ï¼Œåˆ†å¸ƒå¼ç¼“å­˜é”æ€§èƒ½å¹¶ä¸æ¯”æ•°æ®åº“é”å·®ã€‚ ä½†æ˜¯ï¼Œæœ‰ä¸€ä½åˆ†å¸ƒå¼çš„ä¸“å®¶å†™äº†ä¸€ç¯‡æ–‡ç« ã€ŠHow to do distributed lockingã€‹ï¼Œè´¨ç–‘ Redlock çš„æ­£ç¡®æ€§ã€‚ https://mp.weixin.qq.com/s/1bPLk_VZhZ0QYNZS8LkviA https://blog.csdn.net/jek123456/article/details/72954106 ä¼˜ç¼ºç‚¹ä¼˜ç‚¹ï¼š æ€§èƒ½é«˜ ç¼ºç‚¹ï¼š å¤±æ•ˆæ—¶é—´è®¾ç½®å¤šé•¿æ—¶é—´ä¸ºå¥½ï¼Ÿå¦‚ä½•è®¾ç½®çš„å¤±æ•ˆæ—¶é—´å¤ªçŸ­ï¼Œæ–¹æ³•æ²¡ç­‰æ‰§è¡Œå®Œï¼Œé”å°±è‡ªåŠ¨é‡Šæ”¾äº†ï¼Œé‚£ä¹ˆå°±ä¼šäº§ç”Ÿå¹¶å‘é—®é¢˜ã€‚å¦‚æœè®¾ç½®çš„æ—¶é—´å¤ªé•¿ï¼Œå…¶ä»–è·å–é”çš„çº¿ç¨‹å°±å¯èƒ½è¦å¹³ç™½çš„å¤šç­‰ä¸€æ®µæ—¶é—´ã€‚ åŸºäº redisson åšåˆ†å¸ƒå¼é”redisson æ˜¯ redis å®˜æ–¹çš„åˆ†å¸ƒå¼é”ç»„ä»¶ã€‚GitHub åœ°å€ï¼šhttps://github.com/redisson/redisson ä¸Šé¢çš„è¿™ä¸ªé—®é¢˜ â€”â€”&gt; å¤±æ•ˆæ—¶é—´è®¾ç½®å¤šé•¿æ—¶é—´ä¸ºå¥½ï¼Ÿè¿™ä¸ªé—®é¢˜åœ¨ redisson çš„åšæ³•æ˜¯ï¼šæ¯è·å¾—ä¸€ä¸ªé”æ—¶ï¼Œåªè®¾ç½®ä¸€ä¸ªå¾ˆçŸ­çš„è¶…æ—¶æ—¶é—´ï¼ŒåŒæ—¶èµ·ä¸€ä¸ªçº¿ç¨‹åœ¨æ¯æ¬¡å¿«è¦åˆ°è¶…æ—¶æ—¶é—´æ—¶å»åˆ·æ–°é”çš„è¶…æ—¶æ—¶é—´ã€‚åœ¨é‡Šæ”¾é”çš„åŒæ—¶ç»“æŸè¿™ä¸ªçº¿ç¨‹ã€‚ åŸºäº ZooKeeper åšåˆ†å¸ƒå¼é”zookeeper é”ç›¸å…³åŸºç¡€çŸ¥è¯† zk ä¸€èˆ¬ç”±å¤šä¸ªèŠ‚ç‚¹æ„æˆï¼ˆå•æ•°ï¼‰ï¼Œé‡‡ç”¨ zab ä¸€è‡´æ€§åè®®ã€‚å› æ­¤å¯ä»¥å°† zk çœ‹æˆä¸€ä¸ªå•ç‚¹ç»“æ„ï¼Œå¯¹å…¶ä¿®æ”¹æ•°æ®å…¶å†…éƒ¨è‡ªåŠ¨å°†æ‰€æœ‰èŠ‚ç‚¹æ•°æ®è¿›è¡Œä¿®æ”¹è€Œåæ‰æä¾›æŸ¥è¯¢æœåŠ¡ã€‚ zk çš„æ•°æ®ä»¥ç›®å½•æ ‘çš„å½¢å¼ï¼Œæ¯ä¸ªç›®å½•ç§°ä¸º znodeï¼Œ znode ä¸­å¯å­˜å‚¨æ•°æ®ï¼ˆä¸€èˆ¬ä¸è¶…è¿‡ 1Mï¼‰ï¼Œè¿˜å¯ä»¥åœ¨å…¶ä¸­å¢åŠ å­èŠ‚ç‚¹ã€‚ å­èŠ‚ç‚¹æœ‰ä¸‰ç§ç±»å‹ã€‚åºåˆ—åŒ–èŠ‚ç‚¹ï¼Œæ¯åœ¨è¯¥èŠ‚ç‚¹ä¸‹å¢åŠ ä¸€ä¸ªèŠ‚ç‚¹è‡ªåŠ¨ç»™è¯¥èŠ‚ç‚¹çš„åç§°ä¸Šè‡ªå¢ã€‚ä¸´æ—¶èŠ‚ç‚¹ï¼Œä¸€æ—¦åˆ›å»ºè¿™ä¸ª znode çš„å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨å¤±å»è”ç³»ï¼Œè¿™ä¸ª znode ä¹Ÿå°†è‡ªåŠ¨åˆ é™¤ã€‚æœ€åå°±æ˜¯æ™®é€šèŠ‚ç‚¹ã€‚ Watch æœºåˆ¶ï¼Œclient å¯ä»¥ç›‘æ§æ¯ä¸ªèŠ‚ç‚¹çš„å˜åŒ–ï¼Œå½“äº§ç”Ÿå˜åŒ–ä¼šç»™ client äº§ç”Ÿä¸€ä¸ªäº‹ä»¶ã€‚ zk åŸºæœ¬é” åŸç†ï¼šåˆ©ç”¨ä¸´æ—¶èŠ‚ç‚¹ä¸ watch æœºåˆ¶ã€‚æ¯ä¸ªé”å ç”¨ä¸€ä¸ªæ™®é€šèŠ‚ç‚¹ /lockï¼Œå½“éœ€è¦è·å–é”æ—¶åœ¨ /lock ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªä¸´æ—¶èŠ‚ç‚¹ï¼Œåˆ›å»ºæˆåŠŸåˆ™è¡¨ç¤ºè·å–é”æˆåŠŸï¼Œå¤±è´¥åˆ™ watch/lock èŠ‚ç‚¹ï¼Œæœ‰åˆ é™¤æ“ä½œåå†å»äº‰é”ã€‚ä¸´æ—¶èŠ‚ç‚¹å¥½å¤„åœ¨äºå½“è¿›ç¨‹æŒ‚æ‰åèƒ½è‡ªåŠ¨ä¸Šé”çš„èŠ‚ç‚¹è‡ªåŠ¨åˆ é™¤å³å–æ¶ˆé”ã€‚ ç¼ºç‚¹ï¼šæ‰€æœ‰å–é”å¤±è´¥çš„è¿›ç¨‹éƒ½ç›‘å¬çˆ¶èŠ‚ç‚¹ï¼Œå¾ˆå®¹æ˜“å‘ç”Ÿç¾Šç¾¤æ•ˆåº”ï¼Œå³å½“é‡Šæ”¾é”åæ‰€æœ‰ç­‰å¾…è¿›ç¨‹ä¸€èµ·æ¥åˆ›å»ºèŠ‚ç‚¹ï¼Œå¹¶å‘é‡å¾ˆå¤§ã€‚ zk é”ä¼˜åŒ– åŸç†ï¼šä¸Šé”æ”¹ä¸ºåˆ›å»ºä¸´æ—¶æœ‰åºèŠ‚ç‚¹ï¼Œæ¯ä¸ªä¸Šé”çš„èŠ‚ç‚¹å‡èƒ½åˆ›å»ºèŠ‚ç‚¹æˆåŠŸï¼Œåªæ˜¯å…¶åºå·ä¸åŒã€‚åªæœ‰åºå·æœ€å°çš„å¯ä»¥æ‹¥æœ‰é”ï¼Œå¦‚æœè¿™ä¸ªèŠ‚ç‚¹åºå·ä¸æ˜¯æœ€å°çš„åˆ™ watch åºå·æ¯”æœ¬èº«å°çš„å‰ä¸€ä¸ªèŠ‚ç‚¹ (å…¬å¹³é”)ã€‚ æ­¥éª¤ï¼š åœ¨ /lock èŠ‚ç‚¹ä¸‹åˆ›å»ºä¸€ä¸ªæœ‰åºä¸´æ—¶èŠ‚ç‚¹ (EPHEMERAL_SEQUENTIAL)ã€‚ åˆ¤æ–­åˆ›å»ºçš„èŠ‚ç‚¹åºå·æ˜¯å¦æœ€å°ï¼Œå¦‚æœæ˜¯æœ€å°åˆ™è·å–é”æˆåŠŸã€‚ä¸æ˜¯åˆ™å–é”å¤±è´¥ï¼Œç„¶å watch åºå·æ¯”æœ¬èº«å°çš„å‰ä¸€ä¸ªèŠ‚ç‚¹ã€‚ å½“å–é”å¤±è´¥ï¼Œè®¾ç½® watch ååˆ™ç­‰å¾… watch äº‹ä»¶åˆ°æ¥åï¼Œå†æ¬¡åˆ¤æ–­æ˜¯å¦åºå·æœ€å°ã€‚ å–é”æˆåŠŸåˆ™æ‰§è¡Œä»£ç ï¼Œæœ€åé‡Šæ”¾é”ï¼ˆåˆ é™¤è¯¥èŠ‚ç‚¹ï¼‰ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169import java.io.IOException;import java.util.ArrayList;import java.util.Collections;import java.util.List;import java.util.concurrent.CountDownLatch;import java.util.concurrent.TimeUnit;import java.util.concurrent.locks.Condition;import java.util.concurrent.locks.Lock;import org.apache.zookeeper.CreateMode;import org.apache.zookeeper.KeeperException;import org.apache.zookeeper.WatchedEvent;import org.apache.zookeeper.Watcher;import org.apache.zookeeper.ZooDefs;import org.apache.zookeeper.ZooKeeper;import org.apache.zookeeper.data.Stat;public class DistributedLock implements Lock, Watcher&#123; private ZooKeeper zk; private String root = \"/locks\";//æ ¹ private String lockName;//ç«äº‰èµ„æºçš„æ ‡å¿— private String waitNode;//ç­‰å¾…å‰ä¸€ä¸ªé” private String myZnode;//å½“å‰é” private CountDownLatch latch;//è®¡æ•°å™¨ private int sessionTimeout = 30000; private List&lt;Exception&gt; exception = new ArrayList&lt;Exception&gt;(); /** * åˆ›å»ºåˆ†å¸ƒå¼é”,ä½¿ç”¨å‰è¯·ç¡®è®¤configé…ç½®çš„zookeeperæœåŠ¡å¯ç”¨ * @param config 127.0.0.1:2181 * @param lockName ç«äº‰èµ„æºæ ‡å¿—,lockNameä¸­ä¸èƒ½åŒ…å«å•è¯lock */ public DistributedLock(String config, String lockName)&#123; this.lockName = lockName; // åˆ›å»ºä¸€ä¸ªä¸æœåŠ¡å™¨çš„è¿æ¥ try &#123; zk = new ZooKeeper(config, sessionTimeout, this); Stat stat = zk.exists(root, false); if(stat == null)&#123; // åˆ›å»ºæ ¹èŠ‚ç‚¹ zk.create(root, new byte[0], ZooDefs.Ids.OPEN_ACL_UNSAFE,CreateMode.PERSISTENT); &#125; &#125; catch (IOException e) &#123; exception.add(e); &#125; catch (KeeperException e) &#123; exception.add(e); &#125; catch (InterruptedException e) &#123; exception.add(e); &#125; &#125; /** * zookeeperèŠ‚ç‚¹çš„ç›‘è§†å™¨ */ public void process(WatchedEvent event) &#123; if(this.latch != null) &#123; this.latch.countDown(); &#125; &#125; public void lock() &#123; if(exception.size() &gt; 0)&#123; throw new LockException(exception.get(0)); &#125; try &#123; if(this.tryLock())&#123; System.out.println(\"Thread \" + Thread.currentThread().getId() + \" \" +myZnode + \" get lock true\"); return; &#125; else&#123; waitForLock(waitNode, sessionTimeout);//ç­‰å¾…é” &#125; &#125; catch (KeeperException e) &#123; throw new LockException(e); &#125; catch (InterruptedException e) &#123; throw new LockException(e); &#125; &#125; public boolean tryLock() &#123; try &#123; String splitStr = \"_lock_\"; if(lockName.contains(splitStr)) throw new LockException(\"lockName can not contains \\\\u000B\"); //åˆ›å»ºä¸´æ—¶å­èŠ‚ç‚¹ myZnode = zk.create(root + \"/\" + lockName + splitStr, new byte[0], ZooDefs.Ids.OPEN_ACL_UNSAFE,CreateMode.EPHEMERAL_SEQUENTIAL); System.out.println(myZnode + \" is created \"); //å–å‡ºæ‰€æœ‰å­èŠ‚ç‚¹ List&lt;String&gt; subNodes = zk.getChildren(root, false); //å–å‡ºæ‰€æœ‰lockNameçš„é” List&lt;String&gt; lockObjNodes = new ArrayList&lt;String&gt;(); for (String node : subNodes) &#123; String _node = node.split(splitStr)[0]; if(_node.equals(lockName))&#123; lockObjNodes.add(node); &#125; &#125; Collections.sort(lockObjNodes); System.out.println(myZnode + \"==\" + lockObjNodes.get(0)); if(myZnode.equals(root+\"/\"+lockObjNodes.get(0)))&#123; //å¦‚æœæ˜¯æœ€å°çš„èŠ‚ç‚¹,åˆ™è¡¨ç¤ºå–å¾—é” return true; &#125; //å¦‚æœä¸æ˜¯æœ€å°çš„èŠ‚ç‚¹ï¼Œæ‰¾åˆ°æ¯”è‡ªå·±å°1çš„èŠ‚ç‚¹ String subMyZnode = myZnode.substring(myZnode.lastIndexOf(\"/\") + 1); waitNode = lockObjNodes.get(Collections.binarySearch(lockObjNodes, subMyZnode) - 1); &#125; catch (KeeperException e) &#123; throw new LockException(e); &#125; catch (InterruptedException e) &#123; throw new LockException(e); &#125; return false; &#125; public boolean tryLock(long time, TimeUnit unit) &#123; try &#123; if(this.tryLock())&#123; return true; &#125; return waitForLock(waitNode,time); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; return false; &#125; private boolean waitForLock(String lower, long waitTime) throws InterruptedException, KeeperException &#123; Stat stat = zk.exists(root + \"/\" + lower,true); //åˆ¤æ–­æ¯”è‡ªå·±å°ä¸€ä¸ªæ•°çš„èŠ‚ç‚¹æ˜¯å¦å­˜åœ¨,å¦‚æœä¸å­˜åœ¨åˆ™æ— éœ€ç­‰å¾…é”,åŒæ—¶æ³¨å†Œç›‘å¬ if(stat != null)&#123; System.out.println(\"Thread \" + Thread.currentThread().getId() + \" waiting for \" + root + \"/\" + lower); this.latch = new CountDownLatch(1); this.latch.await(waitTime, TimeUnit.MILLISECONDS); this.latch = null; &#125; return true; &#125; public void unlock() &#123; try &#123; System.out.println(\"unlock \" + myZnode); zk.delete(myZnode,-1); myZnode = null; zk.close(); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; catch (KeeperException e) &#123; e.printStackTrace(); &#125; &#125; public void lockInterruptibly() throws InterruptedException &#123; this.lock(); &#125; public Condition newCondition() &#123; return null; &#125; public class LockException extends RuntimeException &#123; private static final long serialVersionUID = 1L; public LockException(String e)&#123; super(e); &#125; public LockException(Exception e)&#123; super(e); &#125; &#125;&#125; ä¼˜ç¼ºç‚¹ä¼˜ç‚¹ï¼š æœ‰æ•ˆçš„è§£å†³å•ç‚¹é—®é¢˜ï¼Œä¸å¯é‡å…¥é—®é¢˜ï¼Œéé˜»å¡é—®é¢˜ä»¥åŠé”æ— æ³•é‡Šæ”¾çš„é—®é¢˜ã€‚å®ç°èµ·æ¥è¾ƒä¸ºç®€å•ã€‚ ç¼ºç‚¹ï¼š æ€§èƒ½ä¸Šå¯èƒ½å¹¶æ²¡æœ‰ç¼“å­˜æœåŠ¡é‚£ä¹ˆé«˜ï¼Œå› ä¸ºæ¯æ¬¡åœ¨åˆ›å»ºé”å’Œé‡Šæ”¾é”çš„è¿‡ç¨‹ä¸­ï¼Œéƒ½è¦åŠ¨æ€åˆ›å»ºã€é”€æ¯ä¸´æ—¶èŠ‚ç‚¹æ¥å®ç°é”åŠŸèƒ½ã€‚ZK ä¸­åˆ›å»ºå’Œåˆ é™¤èŠ‚ç‚¹åªèƒ½é€šè¿‡ Leader æœåŠ¡å™¨æ¥æ‰§è¡Œï¼Œç„¶åå°†æ•°æ®åŒæ­¥åˆ°æ‰€æœ‰çš„ Follower æœºå™¨ä¸Šã€‚è¿˜éœ€è¦å¯¹ ZKçš„åŸç†æœ‰æ‰€äº†è§£ã€‚ åŸºäº Consul åšåˆ†å¸ƒå¼é”DD å†™è¿‡ç±»ä¼¼æ–‡ç« ï¼Œå…¶å®ä¸»è¦åˆ©ç”¨ Consul çš„ Key / Value å­˜å‚¨ API ä¸­çš„ acquire å’Œ release æ“ä½œæ¥å®ç°ã€‚ æ–‡ç« åœ°å€ï¼šhttp://blog.didispace.com/spring-cloud-consul-lock-and-semphore/ ä½¿ç”¨åˆ†å¸ƒå¼é”çš„æ³¨æ„äº‹é¡¹1ã€æ³¨æ„åˆ†å¸ƒå¼é”çš„å¼€é”€ 2ã€æ³¨æ„åŠ é”çš„ç²’åº¦ 3ã€åŠ é”çš„æ–¹å¼ æ€»ç»“æ— è®ºä½ èº«å¤„ä¸€ä¸ªä»€ä¹ˆæ ·çš„å…¬å¸ï¼Œæœ€å¼€å§‹çš„å·¥ä½œå¯èƒ½éƒ½éœ€è¦ä»æœ€ç®€å•çš„åšèµ·ã€‚ä¸è¦æé˜¿é‡Œå’Œè…¾è®¯çš„ä¸šåŠ¡åœºæ™¯ qps å¦‚ä½•å¤§ï¼Œå› ä¸ºåœ¨è¿™æ ·çš„å¤§åœºæ™¯ä¸­ä½ æœªå¿…èƒ½äº²è‡ªå‚ä¸é¡¹ç›®ï¼Œäº²è‡ªå‚ä¸é¡¹ç›®æœªå¿…èƒ½æ˜¯æ ¸å¿ƒçš„è®¾è®¡è€…ï¼Œæ˜¯æ ¸å¿ƒçš„è®¾è®¡è€…æœªå¿…èƒ½ç‹¬è‡ªè®¾è®¡ã€‚å¸Œæœ›å¤§å®¶èƒ½æ ¹æ®è‡ªå·±å…¬å¸ä¸šåŠ¡åœºæ™¯ï¼Œé€‰æ‹©é€‚åˆè‡ªå·±é¡¹ç›®çš„æ–¹æ¡ˆã€‚ å‚è€ƒèµ„æ–™http://www.hollischuang.com/archives/1716 http://www.spring4all.com/question/158 https://www.cnblogs.com/PurpleDream/p/5559352.html http://www.cnblogs.com/PurpleDream/p/5573040.html https://www.cnblogs.com/suolu/p/6588902.html","tags":[{"name":"æ•°æ®åº“","slug":"æ•°æ®åº“","permalink":"http://yoursite.com/tags/æ•°æ®åº“/"},{"name":"åˆ†å¸ƒå¼é”","slug":"åˆ†å¸ƒå¼é”","permalink":"http://yoursite.com/tags/åˆ†å¸ƒå¼é”/"},{"name":"Redis","slug":"Redis","permalink":"http://yoursite.com/tags/Redis/"},{"name":"Zookeeper","slug":"Zookeeper","permalink":"http://yoursite.com/tags/Zookeeper/"}]},{"title":"Spring Boot 2.0ç³»åˆ—æ–‡ç« (å…­)ï¼šSpring Boot 2.0ä¸­SpringBootApplicationæ³¨è§£è¯¦è§£","date":"2018-04-18T16:00:00.000Z","path":"2018/04/19/SpringBootApplication-annotation/","text":"å…³æ³¨æˆ‘ è½¬è½½è¯·åŠ¡å¿…æ³¨æ˜åŸåˆ›åœ°å€ä¸ºï¼šhttp://www.54tianzhisheng.cn/2018/04/19/SpringBootApplication-annotation/ æ¦‚è¿°è®¸å¤š Spring Boot å¼€å‘è€…å–œæ¬¢ä»–ä»¬çš„åº”ç”¨ç¨‹åºä½¿ç”¨è‡ªåŠ¨é…ç½®ã€ç»„ä»¶æ‰«æã€å¹¶èƒ½å¤Ÿåœ¨ä»–ä»¬çš„ â€œApplicationâ€ ç±»ä¸Šå®šä¹‰é¢å¤–çš„é…ç½®ã€‚ å¯ä»¥ä½¿ç”¨ä¸€ä¸ª @SpringBootApplication æ³¨è§£æ¥å¯ç”¨è¿™äº›åŠŸèƒ½ã€‚ 123456789import org.springframework.boot.SpringApplication;import org.springframework.boot.autoconfigure.SpringBootApplication;@SpringBootApplicationpublic class Application &#123; public static void main(String[] args) &#123; SpringApplication.run(Application.class, args); &#125;&#125; @SpringBootApplicationè·Ÿè¿›å» @SpringBootApplication æ³¨è§£å¯ä»¥å‘ç°ä¸‹å›¾ï¼š å…¶ä¸­æ ‡æ³¨çš„ä¸‰ä¸ªæ³¨è§£æ­£èƒ½è§£å†³æˆ‘ä»¬ä¸Šé¢æ‰€è¯´çš„ä¸‰ç§åŠŸèƒ½ï¼Œå®ƒä»¬æ˜¯ï¼š @SpringBootConfiguration @EnableAutoConfiguration @ComponentScan è¯¥æ¥å£é™¤äº†ä¸Šé¢ä¸‰ä¸ªæ³¨è§£å¤–ï¼Œè¿˜æœ‰å››ä¸ªæ–¹æ³•å¦‚ä¸‹ï¼š Class&lt;?&gt;[] exclude() default {}:æ ¹æ® class æ¥æ’é™¤ï¼Œæ’é™¤ç‰¹å®šçš„ç±»åŠ å…¥ spring å®¹å™¨ï¼Œä¼ å…¥å‚æ•° value ç±»å‹æ˜¯ class ç±»å‹ã€‚ String[] excludeName() default {}:æ ¹æ® class name æ¥æ’é™¤ï¼Œæ’é™¤ç‰¹å®šçš„ç±»åŠ å…¥ spring å®¹å™¨ï¼Œä¼ å…¥å‚æ•° value ç±»å‹æ˜¯ class çš„å…¨ç±»åå­—ç¬¦ä¸²æ•°ç»„ã€‚ String[] scanBasePackages() default {}:æŒ‡å®šæ‰«æåŒ…ï¼Œå‚æ•°æ˜¯åŒ…åçš„å­—ç¬¦ä¸²æ•°ç»„ã€‚ Class&lt;?&gt;[] scanBasePackageClasses() default {}:æ‰«æç‰¹å®šçš„åŒ…ï¼Œå‚æ•°ç±»ä¼¼æ˜¯ Class ç±»å‹æ•°ç»„ã€‚ å°±æ‹¿ scanBasePackages æ¥ä¸¾ä¸ªä¾‹å­ï¼š 1@SpringBootApplication(scanBasePackages = &#123;\"com.zhisheng.controller\",\"com.zhisheng.model\"&#125;) å°†ä¸éœ€è¦çš„ bean æ’é™¤åœ¨ spring å®¹å™¨ä¸­ï¼Œå¦‚ä½•æ“ä½œï¼Ÿçœ‹çœ‹å®˜æ–¹çš„ä»£ç æ€ä¹ˆç”¨çš„ï¼š @SpringBootConfiguration @SpringBootConfigurationç»§æ‰¿è‡ª@Configurationï¼ŒäºŒè€…åŠŸèƒ½ä¹Ÿä¸€è‡´ï¼Œæ ‡æ³¨å½“å‰ç±»æ˜¯é…ç½®ç±»ï¼Œå¹¶ä¼šå°†å½“å‰ç±»å†…å£°æ˜çš„ä¸€ä¸ªæˆ–å¤šä¸ªä»¥@Beanæ³¨è§£æ ‡è®°çš„æ–¹æ³•çš„å®ä¾‹çº³å…¥åˆ°srpingå®¹å™¨ä¸­ï¼Œå¹¶ä¸”å®ä¾‹åå°±æ˜¯æ–¹æ³•åã€‚ è™½è¯´ç°åœ¨å·²ç»æ¨èä½¿ç”¨ Spring Boot é‡Œé¢çš„ @SpringBootConfiguration æ³¨è§£ï¼Œä¸ºäº†æ¢ä¸ªç©¶ç«Ÿï¼Œæˆ‘ä»¬è¿˜æ˜¯ç»§ç»­ç ”ç©¶ä¸‹ @Configuration æ³¨è§£ã€‚ @Configuration@Configuration æ ‡æ³¨åœ¨ç±»ä¸Šï¼Œç›¸å½“äºæŠŠè¯¥ç±»ä½œä¸º spring çš„ xml é…ç½®æ–‡ä»¶ä¸­çš„ &lt;beans&gt;ï¼Œä½œç”¨ä¸ºï¼šé…ç½® spring å®¹å™¨(åº”ç”¨ä¸Šä¸‹æ–‡) 123&lt;beans&gt;&lt;/beans&gt; @Bean@Bean æ ‡æ³¨åœ¨æ–¹æ³•ä¸Š(è¿”å›æŸä¸ªå®ä¾‹çš„æ–¹æ³•)ï¼Œç­‰ä»·äº spring çš„ xml é…ç½®æ–‡ä»¶ä¸­çš„&lt;bean&gt;ï¼Œä½œç”¨ä¸ºï¼šæ³¨å†Œ bean å¯¹è±¡ å¯ä»¥çœ‹çœ‹è¿™ç¯‡æ–‡ç« ï¼šhttps://www.ibm.com/developerworks/cn/webservices/ws-springjava/index.html @ComponentScanå¯ä»¥é€šè¿‡è¯¥æ³¨è§£æŒ‡å®šæ‰«ææŸäº›åŒ…ä¸‹åŒ…å«å¦‚ä¸‹æ³¨è§£çš„å‡è‡ªåŠ¨æ³¨å†Œä¸º spring beansï¼š @Componentã€@Serviceã€ @Repositoryã€ @Controllerã€@Entity ç­‰ç­‰ ä¾‹å¦‚ï¼š 1@ComponentScan(basePackages = &#123;\"com.zhisheng.controller\",\"com.zhisheng.model\"&#125;) ä»¥å‰æ˜¯åœ¨ xml é…ç½®æ–‡ä»¶ä¸­è®¾ç½®å¦‚ä¸‹æ ‡ç­¾ï¼š&lt;context:component-scan&gt;ï¼ˆç”¨æ¥æ‰«æåŒ…é…ç½®ï¼‰ é™¤äº†å¯ä»¥ä½¿ç”¨ @ComponentScan æ³¨è§£æ¥åŠ è½½æˆ‘ä»¬çš„ beanï¼Œè¿˜å¯ä»¥åœ¨ Application ç±»ä¸­ä½¿ç”¨ @Import æŒ‡å®šè¯¥ç±»ã€‚ ä¾‹å¦‚ï¼š 1@Import(&#123;ConsulConfig.class, Log4jEndPointConfiguration.class&#125;) //ç›´æ¥ imoport è¦å¼•å…¥çš„ç±» @EnableAutoConfiguration@EnableAutoConfigurationçš„ä½œç”¨å¯åŠ¨è‡ªåŠ¨çš„é…ç½®ï¼Œ@EnableAutoConfigurationæ³¨è§£çš„æ„æ€å°±æ˜¯Springbootæ ¹æ®ä½ æ·»åŠ çš„ jar åŒ…æ¥é…ç½®ä½ é¡¹ç›®çš„é»˜è®¤é…ç½®ï¼Œæ¯”å¦‚æ ¹æ®spring-boot-starter-web ï¼Œæ¥åˆ¤æ–­ä½ çš„é¡¹ç›®æ˜¯å¦éœ€è¦æ·»åŠ äº†webmvcå’Œtomcatï¼Œå°±ä¼šè‡ªåŠ¨çš„å¸®ä½ é…ç½® web é¡¹ç›®ä¸­æ‰€éœ€è¦çš„é»˜è®¤é…ç½®ã€‚ç®€å•ç‚¹è¯´å°±æ˜¯å®ƒä¼šæ ¹æ®å®šä¹‰åœ¨ classpath ä¸‹çš„ç±»ï¼Œè‡ªåŠ¨çš„ç»™ä½ ç”Ÿæˆä¸€äº› Beanï¼Œå¹¶åŠ è½½åˆ° Spring çš„ Context ä¸­ã€‚ å¯ä»¥çœ‹åˆ° import å¼•å…¥äº† AutoConfigurationImportSelector ç±»ã€‚è¯¥ç±»ä½¿ç”¨äº† Spring Core åŒ…çš„ SpringFactoriesLoader ç±»çš„ loadFactoryNamesof() æ–¹æ³•ã€‚ AutoConfigurationImportSelector ç±»å®ç°äº† DeferredImportSelector æ¥å£ï¼Œå¹¶å®ç°äº† selectImports æ–¹æ³•ï¼Œç”¨æ¥å¯¼å‡ºConfiguration ç±»ã€‚ 1List&lt;String&gt; configurations = getCandidateConfigurations(annotationMetadata, attributes); å¯¼å‡ºçš„ç±»æ˜¯é€šè¿‡ SpringFactoriesLoader.loadFactoryNames() è¯»å–äº† ClassPath ä¸‹é¢çš„ META-INF/spring.factories æ–‡ä»¶ã€‚ è¿™ä¸ªæ–‡ä»¶å†…å®¹å¤§è‡´å¦‚ä¸‹ã€‚ åé¢ç»§ç»­ä¼šå†™è‡ªåŠ¨é…ç½®æ–¹é¢çš„åšå®¢ï¼Œè¯·ç»§ç»­å…³æ³¨ï¼ å¦‚æœä½ å‘ç°è‡ªåŠ¨è£…é…çš„ Bean ä¸æ˜¯ä½ æƒ³è¦çš„ï¼Œä½ ä¹Ÿå¯ä»¥ disable å®ƒã€‚æ¯”å¦‚è¯´ï¼Œæˆ‘ä¸æƒ³è¦è‡ªåŠ¨è£…é… Database çš„é‚£äº›Beanï¼š 1@EnableAutoConfiguration(exclude = &#123;DataSourceAutoConfiguration.class&#125;) ç›¸å…³æ–‡ç« 1ã€Spring Boot 2.0ç³»åˆ—æ–‡ç« (ä¸€)ï¼šSpring Boot 2.0 è¿ç§»æŒ‡å— 2ã€Spring Boot 2.0ç³»åˆ—æ–‡ç« (äºŒ)ï¼šSpring Boot 2.0 æ–°ç‰¹æ€§è¯¦è§£ 3ã€Spring Boot 2.0ç³»åˆ—æ–‡ç« (ä¸‰)ï¼šSpring Boot 2.0 é…ç½®æ”¹å˜ 4ã€Spring Boot 2.0ç³»åˆ—æ–‡ç« (å››)ï¼šSpring Boot 2.0 æºç é˜…è¯»ç¯å¢ƒæ­å»º 5ã€Spring Boot 2.0ç³»åˆ—æ–‡ç« (äº”)ï¼šSpring Boot 2.0 é¡¹ç›®æºç ç»“æ„é¢„è§ˆ 6ã€Spring Boot 2.0ç³»åˆ—æ–‡ç« (å…­)ï¼šSpring boot 2.0 ä¸­ SpringBootApplication æ³¨è§£è¯¦è§£ 7ã€Spring Boot 2.0ç³»åˆ—æ–‡ç« (ä¸ƒ)ï¼šSpringApplication æ·±å…¥æ¢ç´¢ æ€»ç»“æœ¬æ–‡ä¸»è¦è®²äº† SpringBootApplication æ³¨è§£ï¼Œç„¶åå±•å¼€å†™äº†å…¶åŒ…å«çš„ä¸‰ä¸ªæ³¨è§£ SpringBootConfigurationã€ComponentScanã€EnableAutoConfiguration æœ€åè™½ç„¶æºç å¾ˆéš¾ï¼Œä½†éšç€ä¸æ–­çš„æ¢ç´¢ï¼Œæºç åœ¨ä½ é¢å‰å°†ä¼šä¸€è§ˆæ— é—ï¼Œäº«å—è¿™ç§æ¢ç´¢åçš„æˆå°±æ„Ÿï¼åŠ æ²¹ï¼éªšå¹´ï¼ è‡ªå·±æœ¬äººèƒ½åŠ›æœ‰é™ï¼Œæºç çœ‹çš„ä¸å¤šï¼Œä¸Šé¢å¦‚æœ‰ä¸å¯¹çš„è¿˜è¯·ç•™è¨€äº¤æµã€‚","tags":[{"name":"Java","slug":"Java","permalink":"http://yoursite.com/tags/Java/"},{"name":"SpringBoot","slug":"SpringBoot","permalink":"http://yoursite.com/tags/SpringBoot/"}]},{"title":"Spring Boot 2.0ç³»åˆ—æ–‡ç« (äº”)ï¼šSpring Boot 2.0 é¡¹ç›®æºç ç»“æ„é¢„è§ˆ","date":"2018-04-17T16:00:00.000Z","path":"2018/04/18/spring_boot2_project/","text":"å…³æ³¨æˆ‘ è½¬è½½è¯·åŠ¡å¿…æ³¨æ˜åŸåˆ›åœ°å€ä¸ºï¼šhttp://www.54tianzhisheng.cn/2018/04/15/springboot2_code/ é¡¹ç›®ç»“æ„ ç»“æ„åˆ†æï¼š Spring-boot-project æ ¸å¿ƒä»£ç ï¼Œä»£ç é‡å¾ˆå¤šï¼ˆ197508 è¡Œï¼‰ Spring-boot-samples ä¸€äº›æ ·ä¾‹ demoï¼Œä»£ç é‡ä¸å¤šï¼ˆ9685 è¡Œï¼‰ï¼Œè›®æœ‰ç”¨çš„ Spring-boot-samples-invoker é‡Œé¢æ— ä»£ç  Spring-boot-tests æµ‹è¯•ä»£ç ï¼ˆ1640 è¡Œï¼‰ spring-boot-projectSpring-boot-project ä¸‹é¢æœ‰å¾ˆå¤šæ¨¡å—ï¼Œå¦‚ä¸‹ï¼š Spirng-boot è¯¥æ¨¡å— 47760 è¡Œä»£ç ï¼ˆå«æµ‹è¯•ä»£ç ï¼‰ï¼ŒSpring boot ä¸»è¦çš„åº“ï¼Œæä¾›äº†æ”¯æŒ Spring Boot å…¶ä»–éƒ¨åˆ†çš„åŠŸèƒ½ï¼Œå…¶ä¸­åŒ…æ‹¬äº†ï¼š åœ¨SpringApplicationç±»ï¼Œæä¾›é™æ€ä¾¿æ·æ–¹æ³•ï¼Œå¯ä»¥å¾ˆå®¹æ˜“å†™ä¸€ä¸ªç‹¬ç«‹çš„ Spring åº”ç”¨ç¨‹åºã€‚å®ƒå”¯ä¸€çš„å·¥ä½œå°±æ˜¯åˆ›é€ å¹¶æ›´æ–°ä¸€ä¸ªåˆé€‚çš„ SpringApplicationContext å¸¦æœ‰å¯é€‰å®¹å™¨çš„åµŒå…¥å¼ Web åº”ç”¨ç¨‹åºï¼ˆTomcatï¼ŒJetty æˆ– Undertowï¼‰ ä¸€æµçš„å¤–éƒ¨é…ç½®æ”¯æŒ ä¾¿æ·ApplicationContextåˆå§‹åŒ–ç¨‹åºï¼ŒåŒ…æ‹¬å¯¹æ•æ„Ÿæ—¥å¿—è®°å½•é»˜è®¤å€¼çš„æ”¯æŒ spring-boot-actuator è¯¥æ¨¡å— 18398 è¡Œä»£ç ï¼ˆå«æµ‹è¯•ä»£ç ï¼‰ï¼Œspring-boot-actuator æ¨¡å—å®ƒå®Œå…¨æ˜¯ä¸€ä¸ªç”¨äºæš´éœ²è‡ªèº«ä¿¡æ¯çš„æ¨¡å—ï¼Œæä¾›äº†ä¸€ä¸ªç›‘æ§å’Œç®¡ç†ç”Ÿäº§ç¯å¢ƒçš„æ¨¡å—ï¼Œå¯ä»¥ä½¿ç”¨ httpã€jmxã€sshã€telnet ç­‰ç®¡ç†å’Œç›‘æ§åº”ç”¨ã€‚å®¡è®¡ï¼ˆAuditingï¼‰ã€ å¥åº·ï¼ˆhealthï¼‰ã€æ•°æ®é‡‡é›†ï¼ˆmetrics gatheringï¼‰ä¼šè‡ªåŠ¨åŠ å…¥åˆ°åº”ç”¨é‡Œé¢ã€‚ spring-boot-actuator-autoconfigure è¯¥æ¨¡å— 16721 è¡Œä»£ç ï¼ˆå«æµ‹è¯•ä»£ç ï¼‰ï¼ŒSpring Boot Actuator æä¾›äº†é¢å¤–çš„è‡ªåŠ¨é…ç½®åŠŸèƒ½ï¼Œå¯ä»¥åœ¨ç”Ÿäº§ç¯å¢ƒä¸­å®ç°å¯å³æ—¶éƒ¨ç½²å’Œæ”¯æŒçš„åŠŸèƒ½ï¼Œä»è€Œè£…é¥°ä½ çš„åº”ç”¨ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨æ­£åœ¨ç¼–å†™ JSON Web æœåŠ¡ï¼Œé‚£ä¹ˆå®ƒå°†æä¾›æœåŠ¡å™¨ï¼Œå®‰å…¨æ€§ï¼Œæ—¥å¿—è®°å½•ï¼Œå¤–éƒ¨é…ç½®ï¼Œç®¡ç†ç«¯ç‚¹ï¼Œå®¡è®¡æŠ½è±¡ç­‰ç­‰åŠŸèƒ½ã€‚å¦‚æœæ‚¨æƒ³å…³é—­å†…ç½®åŠŸèƒ½ï¼Œæˆ–è€…æ‰©å±•æˆ–æ›¿æ¢å®ƒä»¬ï¼Œå®ƒä¹Ÿä¼šå˜å¾—éå¸¸ç®€å•ã€‚ spring-boot-autoconfigure è¯¥æ¨¡å— 51100 è¡Œä»£ç ï¼ˆå«æµ‹è¯•ä»£ç ï¼‰ï¼Œ Spring Boot å¯ä»¥æ ¹æ®ç±»è·¯å¾„çš„å†…å®¹é…ç½®å¤§éƒ¨åˆ†å¸¸ç”¨åº”ç”¨ç¨‹åºã€‚å•ä¸ª@EnableAutoConfigurationæ³¨é‡Šä¼šè§¦å‘ Springä¸Šä¸‹æ–‡çš„è‡ªåŠ¨é…ç½®ã€‚ è‡ªåŠ¨é…ç½®å°è¯•æ¨æ–­ç”¨æˆ·å¯èƒ½éœ€è¦å“ªäº› beanã€‚ä¾‹å¦‚ï¼Œå¦‚æœ HSQLDBåœ¨ç±»è·¯å¾„ä¸­ï¼Œå¹¶ä¸”ç”¨æˆ·å°šæœªé…ç½®ä»»ä½•æ•°æ®åº“è¿æ¥ï¼Œåˆ™ä»–ä»¬å¯èƒ½éœ€è¦å®šä¹‰å†…å­˜æ•°æ®åº“ã€‚å½“ç”¨æˆ·å¼€å§‹å®šä¹‰ä»–ä»¬è‡ªå·±çš„ bean æ—¶ï¼Œè‡ªåŠ¨é…ç½®å°†æ°¸è¿œè¿œç¦»ã€‚ spring-boot-cli è¯¥æ¨¡å— 9346 è¡Œä»£ç ï¼ˆå«æµ‹è¯•ä»£ç ï¼‰ï¼ŒSpring å‘½ä»¤è¡Œåº”ç”¨ç¨‹åºç¼–è¯‘å¹¶è¿è¡Œ Groovy æºä»£ç ï¼Œä½¿å¾—å¯ä»¥ç¼–å†™å°‘é‡ä»£ç å°±èƒ½è¿è¡Œåº”ç”¨ç¨‹åºã€‚Spring CLI ä¹Ÿå¯ä»¥ç›‘è§†æ–‡ä»¶ï¼Œå½“å®ƒä»¬æ”¹å˜æ—¶è‡ªåŠ¨é‡æ–°ç¼–è¯‘å¹¶é‡æ–°å¯åŠ¨ã€‚ spring-boot-dependencies è¯¥æ¨¡å—é‡Œé¢æ²¡æœ‰æºç ï¼Œåªæœ‰æ‰€æœ‰ä¾èµ–å’Œæ’ä»¶çš„ç‰ˆæœ¬å·ä¿¡æ¯ã€‚ spring-boot-devtools è¯¥æ¨¡å— 9418 è¡Œä»£ç ï¼ˆå«æµ‹è¯•ä»£ç ï¼‰ï¼Œspring-boot-devtools æ¨¡å—æ¥ä½¿ Spring Boot åº”ç”¨æ”¯æŒçƒ­éƒ¨ç½²ï¼Œæé«˜å¼€å‘è€…çš„å¼€å‘æ•ˆç‡ï¼Œæ— éœ€æ‰‹åŠ¨é‡å¯ Spring Boot åº”ç”¨ã€‚ spring-boot-docs è¯¥æ¨¡å— 671 è¡Œä»£ç ï¼Œspringboot å‚è€ƒæ–‡ä»¶ã€‚ spring-boot-parent è¯¥æ¨¡å—æ˜¯å…¶ä»–é¡¹ç›®çš„ parentï¼Œè¯¥æ¨¡å—çš„çˆ¶æ¨¡å—æ˜¯ spring-boot-dependenciesã€‚ spring-boot-properties-migrator è¯¥æ¨¡å—æœ‰ 495 è¡Œä»£ç ï¼Œåœ¨ Spring Boot 2.0 ä¸­ï¼Œè®¸å¤šé…ç½®å±æ€§è¢«é‡æ–°å‘½å/åˆ é™¤ï¼Œå¼€å‘äººå‘˜éœ€è¦æ›´æ–°application.properties/ application.ymlç›¸åº”çš„é…ç½®ã€‚ä¸ºäº†å¸®åŠ©ä½ è§£å†³è¿™ä¸€é—®é¢˜ï¼ŒSpring Boot å‘å¸ƒäº†ä¸€ä¸ªæ–°spring-boot-properties-migratoræ¨¡å—ã€‚ä¸€æ—¦ä½œä¸ºè¯¥æ¨¡å—ä½œä¸ºä¾èµ–è¢«æ·»åŠ åˆ°ä½ çš„é¡¹ç›®ä¸­ï¼Œå®ƒä¸ä»…ä¼šåˆ†æåº”ç”¨ç¨‹åºçš„ç¯å¢ƒï¼Œè€Œä¸”è¿˜ä¼šåœ¨å¯åŠ¨æ—¶æ‰“å°è¯Šæ–­ä¿¡æ¯ï¼Œè€Œä¸”è¿˜ä¼šåœ¨è¿è¡Œæ—¶ä¸ºæ‚¨æš‚æ—¶è¿ç§»å±æ€§ã€‚åœ¨æ‚¨çš„åº”ç”¨ç¨‹åºè¿ç§»æœŸé—´ï¼Œè¿™ä¸ªæ¨¡å—æ˜¯å¿…å¤‡çš„ï¼Œå®Œæˆè¿ç§»åï¼Œè¯·ç¡®ä¿ä»é¡¹ç›®çš„ä¾èµ–å…³ç³»ä¸­åˆ é™¤æ­¤æ¨¡å—ã€‚ spring-boot-starters Starter POMs æ˜¯ç”±å¾ˆå¤šæ–¹ä¾¿çš„ä¾èµ–é›†åˆç»„æˆï¼Œå¦‚æœä½ éœ€è¦ä½¿ç”¨æŸç§æŠ€æœ¯ï¼Œé€šè¿‡æ·»åŠ å°‘é‡çš„jarå°±å¯ä»¥æŠŠç›¸å…³çš„ä¾èµ–åŠ å…¥åˆ°é¡¹ç›®ä¸­å»ã€‚ è™½ç„¶ä½ çœ‹å¾—åˆ°æœ‰è¿™ä¹ˆå¤š starterï¼Œä½†æ˜¯å´æ²¡æœ‰ä¸€è¡Œ Java ä»£ç ï¼Œæ„ä¸æ„å¤–ï¼Ÿ è¿™ç¡®å®æ˜¯ Spring Boot è‡ªåŠ¨é…ç½®çš„å…³é”®ä¹‹å¤„ï¼Œåé¢æˆ‘å¯ä»¥è®²è®²ã€‚ spring-boot-testæµ‹è¯•ä»£ç ï¼æœ‰ 10980 è¡Œä»£ç ã€‚ spring-boot-test-autoconfigureè‡ªåŠ¨é…ç½®çš„æµ‹è¯•ä»£ç ï¼Œæœ‰ 6063 è¡Œä»£ç ã€‚ spring-boot-tools spring-boot-antlib Spring Boot AntLib æ¨¡å—ä¸º Apache Ant æä¾›äº†åŸºæœ¬çš„ Spring Boot æ”¯æŒã€‚ æ‚¨å¯ä»¥ä½¿ç”¨è¯¥æ¨¡å—åˆ›å»ºå¯æ‰§è¡Œæ–‡ä»¶å¤¹ã€‚ è¦ä½¿ç”¨è¯¥æ¨¡å—ï¼Œæ‚¨éœ€è¦åœ¨ build.xml ä¸­å£°æ˜ä¸€ä¸ªé¢å¤–çš„ spring-boot å‘½åç©ºé—´ï¼Œå¦‚ä»¥ä¸‹ç¤ºä¾‹æ‰€ç¤ºï¼š 12345&lt;project xmlns:ivy=\"antlib:org.apache.ivy.ant\" xmlns:spring-boot=\"antlib:org.springframework.boot.ant\" name=\"myapp\" default=\"build\"&gt; ...&lt;/project&gt; æ‚¨éœ€è¦è®°ä½ä½¿ç”¨ -lib é€‰é¡¹å¯åŠ¨ Antï¼Œå¦‚ä»¥ä¸‹ç¤ºä¾‹æ‰€ç¤ºï¼š 1ant -lib &lt;folder containing spring-boot-antlib-2.1.0.BUILD-SNAPSHOT.jar&gt; Spring-boot-autoconfigure-processor spring boot è‡ªåŠ¨é…ç½®çš„æ ¸å¿ƒç±» Spring-boot-configuration-metadata Spring boot é…ç½®å…ƒæ•°æ® Spring-boot-configuration-processor spring boot é…ç½®çš„æ ¸å¿ƒ Spring-boot-gradle-plugin Spring Boot Gradle æ’ä»¶åœ¨ Gradle ä¸­æä¾›äº† Spring Boot æ”¯æŒï¼Œå¯ä»¥æ‰“åŒ…æˆå¯æ‰§è¡Œ jar æˆ– war ï¼Œè¿è¡Œ Spring Boot åº”ç”¨ç¨‹åºï¼Œå¹¶ä½¿ç”¨ spring-boot-dependencies æä¾›çš„ä¾èµ–å…³ç³»ç®¡ç†ã€‚ å®ƒéœ€è¦ Gradle 4.0 æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚ Spring-boot-maven-plugin Spring Boot Maven Plugin åœ¨ Maven ä¸­æä¾›äº† Spring Boot æ”¯æŒï¼Œè®©æ‚¨å¯ä»¥æ‰“åŒ…æˆå¯æ‰§è¡Œ jar æˆ– war åº”ç”¨ï¼Œå¹¶â€œå°±åœ°â€è¿è¡Œåº”ç”¨ç¨‹åºã€‚ è¦ä½¿ç”¨å®ƒï¼Œä½ å¿…é¡»ä½¿ç”¨ Maven 3.2ï¼ˆæˆ–æ›´é«˜ç‰ˆæœ¬ï¼‰ã€‚ Spring-boot-loader spring-boot-load æ¨¡å—é€šè¿‡è‡ªå®šä¹‰ jar åŒ…ç»“æ„ï¼Œè‡ªå®šä¹‰ç±»åŠ è½½å™¨ï¼Œä¼˜é›…çš„å®ç°äº†åµŒå¥— jar èµ„æºçš„åŠ è½½ï¼Œé€šè¿‡æ‰“åŒ…æ—¶å€™é‡æ–°è®¾ç½®å¯åŠ¨ç±»å’Œç»„ç»‡ jar ç»“æ„ï¼Œé€šè¿‡è¿è¡Œæ—¶è®¾ç½®è‡ªå®šä¹‰åŠ è½½å™¨æ¥å®ç°åµŒå¥— jar èµ„æºåŠ è½½ã€‚ Spring-boot-loader-tools spring-boot-load æ¨¡å—çš„å·¥å…·æ¨¡å— Spring-boot-test-support æµ‹è¯• spring-boot-samples æ ·ä¾‹ demo æ¯”è¾ƒå¤šï¼Œå¤§å®¶çœ‹æºç çš„æ—¶å€™å¯ä»¥æ‹¿è¿™äº›ç°æˆ demo æµ‹è¯•ã€‚ spring-boot-tests ç›¸å…³æ–‡ç« 1ã€Spring Boot 2.0ç³»åˆ—æ–‡ç« (ä¸€)ï¼šSpring Boot 2.0 è¿ç§»æŒ‡å— 2ã€Spring Boot 2.0ç³»åˆ—æ–‡ç« (äºŒ)ï¼šSpring Boot 2.0 æ–°ç‰¹æ€§è¯¦è§£ 3ã€Spring Boot 2.0ç³»åˆ—æ–‡ç« (ä¸‰)ï¼šSpring Boot 2.0 é…ç½®æ”¹å˜ 4ã€Spring Boot 2.0ç³»åˆ—æ–‡ç« (å››)ï¼šSpring Boot 2.0 æºç é˜…è¯»ç¯å¢ƒæ­å»º 5ã€Spring Boot 2.0ç³»åˆ—æ–‡ç« (äº”)ï¼šSpring Boot 2.0 é¡¹ç›®æºç ç»“æ„é¢„è§ˆ 6ã€Spring Boot 2.0ç³»åˆ—æ–‡ç« (å…­)ï¼šSpring boot 2.0 ä¸­ SpringBootApplication æ³¨è§£è¯¦è§£ 7ã€Spring Boot 2.0ç³»åˆ—æ–‡ç« (ä¸ƒ)ï¼šSpringApplication æ·±å…¥æ¢ç´¢ æ€»ç»“æœ¬æ–‡ä¸»è¦åˆ†æäº†ä¸‹ Spring boot é¡¹ç›®æºç ç»“æ„ã€‚åŒ…å« Spring boot æ ¸å¿ƒæºç ã€æ ·ä¾‹ demoã€æµ‹è¯•ã€‚åˆ†æäº†é¡¹ç›®çš„æ•´ä½“ç»“æ„åï¼Œåé¢æ‰èƒ½å¤Ÿæœ‰çš„æ”¾çŸ¢çš„å»è¯»æºç ã€‚ æœ€åè™½ç„¶æºç å¾ˆéš¾ï¼Œä½†éšç€ä¸æ–­çš„æ¢ç´¢ï¼Œæºç åœ¨ä½ é¢å‰å°†ä¼šä¸€è§ˆæ— é—ï¼Œäº«å—è¿™ç§æ¢ç´¢åçš„æˆå°±æ„Ÿï¼åŠ æ²¹ï¼éªšå¹´ï¼","tags":[{"name":"Java","slug":"Java","permalink":"http://yoursite.com/tags/Java/"},{"name":"SpringBoot","slug":"SpringBoot","permalink":"http://yoursite.com/tags/SpringBoot/"}]},{"title":"Spring Boot 2.0ç³»åˆ—æ–‡ç« (å››)ï¼šSpring Boot 2.0 æºç é˜…è¯»ç¯å¢ƒæ­å»º","date":"2018-04-14T16:00:00.000Z","path":"2018/04/15/springboot2_code/","text":"å‰æå‰å‡ å¤©é¢è¯•çš„æ—¶å€™ï¼Œè¢«é—®è¿‡ Spring Boot çš„è‡ªåŠ¨é…ç½®æºç æ€ä¹ˆå®ç°çš„ï¼Œæ²¡çœ‹è¿‡æºç çš„æˆ‘åªèƒ½æŠ•é™ğŸ‘¦äº†ã€‚ è¿™ä¸ï¼Œèµ¶ç´§æ¥è¡¥è¡¥äº†ï¼Œæ‰€ä»¥æ‰æœ‰äº†è¿™ç¯‡æ–‡ç« çš„å‡ºç°ï¼ŒSpring Boot 2. 0 æºç é˜…è¯»ç¯å¢ƒçš„æ­å»ºä¸­è¿˜é‡åˆ°ç‚¹é—®é¢˜ï¼Œè¢«å‘æ­»äº†ï¼Œè¿˜å¥½è§£å†³äº†ï¼Œæ„Ÿè°¢ç¾¤é‡Œçš„å°ä¼™ä¼´ï¼ å…³æ³¨æˆ‘ è½¬è½½è¯·åŠ¡å¿…æ³¨æ˜åŸåˆ›åœ°å€ä¸ºï¼šhttp://www.54tianzhisheng.cn/2018/04/15/springboot2_code/ é¡¹ç›®ä¸‹è½½ä» https://github.com/spring-projects/spring-boot/releases å¯ä»¥çœ‹åˆ°æ‰€æœ‰ç‰ˆæœ¬çš„ä¸‹è½½åœ°å€ï¼Œæˆ‘è¿™é‡Œé€‰æ‹©çš„æ˜¯ Spring Boot 2 ä¸­æœ€æ–°çš„ v2.0.1.RELEASE ç‰ˆæœ¬ï¼Œä¸‹è½½åï¼Œç„¶åè§£å‹ã€‚è·å–ä»£ç ä¹‹å‰ï¼Œè¯·å…ˆç¡®ä¿ä½ çš„ JDK ç‰ˆæœ¬æ˜¯ 1.8 ä»¥ä¸Šå“¦ã€‚ é¡¹ç›®ç¼–è¯‘è¿›å…¥ spring-boot-2.0.1.RELEASE çš„ç›®å½•ä¸‹ï¼Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ã€‚ è·³è¿‡æµ‹è¯•ç”¨ä¾‹ç¼–è¯‘1sudo mvn clean install -DskipTests -Pfast //è·³è¿‡æµ‹è¯•ç”¨ä¾‹ è·³è¿‡æµ‹è¯•ç”¨ä¾‹å¯ä»¥åŠ å¿«ç¼–è¯‘çš„é€Ÿåº¦ã€‚ å…ˆçœ‹ä¸‹è¿è¡ŒæˆåŠŸçš„æ•ˆæœï¼š åªèŠ±äº† 6 åˆ†å¤šé’Ÿå°±å¥½äº†ã€‚ å…¨é‡ç¼–è¯‘1sudo mvn -f spring-boot-project -Pfull clean install å…¨é‡ç¼–è¯‘ç«Ÿç„¶æŠ¥é”™ï¼Œä¸€æ³¢æœªå¹³ï¼Œä¸€æ³¢åˆèµ·ï¼ çœ‹ç½‘ä¸Šçš„è§£å†³æ–¹æ³•æ˜¯ï¼šåœ¨é¡¹ç›®çš„ pom.xml æ–‡ä»¶ä¸­çš„ &lt;properties&gt; æ·»åŠ  &lt;javadocExecutable&gt; 123&lt;properties&gt; &lt;javadocExecutable&gt;$&#123;java.home&#125;/../bin/javadoc&lt;/javadocExecutable&gt;&lt;/properties&gt; æ­¤æ–¹æ³•è™½ç„¶ç®¡ç”¨ï¼Œä½†æ˜¯åªæ˜¯ä¸´æ—¶çš„ï¼Œéœ€è¦å¯¹æ¯ä¸ªé¡¹ç›®éƒ½è¿›è¡Œæ·»åŠ ã€‚ é—®é¢˜äº§ç”Ÿçš„åŸå› åº”è¯¥æ˜¯ï¼Œmvn æ‹¿åˆ°çš„ JAVA_HOME ä½ç½®åº”è¯¥æ˜¯ ${JAVA_HOME}/jre è€Œä¸æ˜¯ jdk ä½ç½®ã€‚ åé¢åˆçœ‹å®˜æ–¹çš„ README ä¸Šé¢å†™çš„æ‰§è¡Œå‘½ä»¤ï¼š 1sudo mvn clean install æ‰§è¡Œåä¹Ÿæ˜¯æœ‰å„ç§æŠ¥é”™ï¼Œå°è¯•äº†å¾ˆä¹…è§£å†³ï¼Œæœ€åèŠ±äº†å¥½å‡ ä¸ªå°æ—¶æ‰åˆ°ä¸‹é¢è¿™å›¾ï¼š å¤ªæŠ˜è…¾äººäº†ï¼Œå¤ªéº»çƒ¦äº†ï¼ æš‚æ—¶å°±ä¸å…¨é‡ç¼–è¯‘äº†ï¼Œæˆ‘ä»¬å°±ç›´æ¥æŠŠç°åœ¨ è·³è¿‡æµ‹è¯•ç”¨ä¾‹ç¼–è¯‘ åçš„é¡¹ç›®å¯¼å…¥åˆ° IDEA ä¸­å»ã€‚ å¯¼å…¥é¡¹ç›®å·¥ç¨‹ å¯¼å…¥åå°†é‚£äº›æµ‹è¯•çš„ module æ ‡è®°ä¸º maven é¡¹ç›®ï¼Œç„¶ååé¢è‡ªå·±å†æ ¹æ®æµ‹è¯•ç”¨ä¾‹å»è·Ÿæºç å§ã€‚ å¯¼å…¥åé¡¹ç›®æ²¡å‡ºç°æŠ¥é”™ï¼Œç¾æ»‹æ»‹ï¼Œåé¢æºç å¯ä»¥çœ‹èµ·æ¥ã€‚ é‡åˆ°çš„å‘åœ¨è¿™ä¹‹å‰ï¼Œæˆ‘è‡ªå·±åˆ›å»ºé¡¹ç›® Spring Boot 2 é¡¹ç›®éƒ½æ˜¯å¤±è´¥çš„ï¼Œmaven è¿è¡Œé¡¹ç›®ï¼ˆmvn clean installï¼‰æŠ¥é”™å¦‚ä¸‹ï¼š é€šè¿‡ä¸Šå›¾å¯ä»¥å‘ç°æŠ¥é”™çš„ç½ªé­ç¥¸é¦–æ˜¯ç”±äºæ‰¾ä¸åˆ° org.yaml.snakeyaml 1.19 çš„åŒ…ï¼Œè¿™ä¸ªä¾èµ–æ­»æ´»ä¸‹ä¸ä¸‹æ¥ï¼Œè‹¦é€¼äº†ğŸ˜¢ã€‚ ä¸€å¼€å§‹ä»¥ä¸ºæ˜¯å…¬å¸é…çš„ maven setting.xml æ–‡ä»¶æœ‰é—®é¢˜ï¼ˆå…¬å¸ç§æœæœ‰é—®é¢˜ï¼‰ï¼Œå¯¼è‡´æˆ‘è¿™ä¸ª org.yaml.snakeyaml 1.19 çš„åŒ…ä¸€ç›´ä¸‹è½½ä¸æ¥ã€‚åæ¥æˆ‘å«ç¾¤é‡Œçš„å¥½å‹å¸®å¿™æµ‹è¯•ä¸‹èƒ½ä¸èƒ½åˆ›å»º Spring Boot 2 é¡¹ç›®ï¼Œç»“æœä»–ä»¬éƒ½è¡Œçš„ã€‚æˆ‘å°±æ¢æˆäº†ä»–ä»¬é˜¿é‡Œäº‘é•œåƒçš„ setting æ–‡ä»¶ï¼Œç»“æœåœ¨æˆ‘è¿™è¿˜æ˜¯ä¸è¡Œçš„ã€‚çœŸæ˜¯é†‰äº†ï¼Œæˆ‘å¹²è„†ç›´æ¥å«ä»–æŠŠ maven æœ¬åœ°ä»“åº“ä¸­çš„ org.yaml.snakeyaml 1.19 æ•´ä¸ªåŒ…éƒ½å‘ç»™æˆ‘ï¼Œç»“æœå†æ¬¡åˆ›å»º Spring Boot 2 é¡¹ç›®å°±èƒ½æˆåŠŸäº†ã€‚ç¾æ»‹æ»‹ğŸ˜„ï¼ ç„¶åå°±è¹­ç€ç°åœ¨ç¯å¢ƒ OKï¼Œå¼€å§‹æ­å»ºæˆ‘çš„ Spring Boot 2 æºç é˜…è¯»ç¯å¢ƒï¼ ç›¸å…³æ–‡ç« 1ã€Spring Boot 2.0ç³»åˆ—æ–‡ç« (ä¸€)ï¼šSpring Boot 2.0 è¿ç§»æŒ‡å— 2ã€Spring Boot 2.0ç³»åˆ—æ–‡ç« (äºŒ)ï¼šSpring Boot 2.0 æ–°ç‰¹æ€§è¯¦è§£ 3ã€Spring Boot 2.0ç³»åˆ—æ–‡ç« (ä¸‰)ï¼šSpring Boot 2.0 é…ç½®æ”¹å˜ 4ã€Spring Boot 2.0ç³»åˆ—æ–‡ç« (å››)ï¼šSpring Boot 2.0 æºç é˜…è¯»ç¯å¢ƒæ­å»º 5ã€Spring Boot 2.0ç³»åˆ—æ–‡ç« (äº”)ï¼šSpring Boot 2.0 é¡¹ç›®æºç ç»“æ„é¢„è§ˆ 6ã€Spring Boot 2.0ç³»åˆ—æ–‡ç« (å…­)ï¼šSpring boot 2.0 ä¸­ SpringBootApplication æ³¨è§£è¯¦è§£ 7ã€Spring Boot 2.0ç³»åˆ—æ–‡ç« (ä¸ƒ)ï¼šSpringApplication æ·±å…¥æ¢ç´¢ æœ€åæºç ä¸éª—äººï¼Œå¤šçœ‹çœ‹ï¼","tags":[{"name":"Java","slug":"Java","permalink":"http://yoursite.com/tags/Java/"},{"name":"SpringBoot","slug":"SpringBoot","permalink":"http://yoursite.com/tags/SpringBoot/"}]},{"title":"Spring Boot 2.0ç³»åˆ—æ–‡ç« (ä¸‰)ï¼šSpring Boot 2.0 é…ç½®æ”¹å˜","date":"2018-04-12T16:00:00.000Z","path":"2018/04/13/Spring_Boot_2.0_Configuration_Changelog/","text":"å‰æå¥½ä¹…æ²¡æ›´æ–°æ–‡ç« äº†ï¼Œæœ¬æ¥æ‰“ç®—åœ¨æ¯•ä¸šä¹‹å‰ä¸æ›´æ–°äº†ï¼Œè¿™é‡Œï¼Œå¯¹ä¸ä½äº†ï¼Œæˆ‘åˆæ›´æ–°äº†ã€‚ğŸ˜ğŸ˜ ä¹‹å‰ç¿»è¯‘äº†ä¸¤ç¯‡ Spring Boot 2.0 çš„æ–‡ç« ï¼ŒSpring Boot 2.0ç³»åˆ—æ–‡ç« (ä¸€)ï¼šSpring Boot 2.0 è¿ç§»æŒ‡å— å’Œ Spring Boot 2.0ç³»åˆ—æ–‡ç« (äºŒ)ï¼šSpring Boot 2.0 æ–°ç‰¹æ€§è¯¦è§£ ä»Šå¤©å°±ç»§ç»­è¯¦ç»†æ¢ç©¶ Spring Boot 2.0 é‡Œé¢çš„æ”¹å˜ã€‚ å…³æ³¨æˆ‘ è½¬è½½è¯·åŠ¡å¿…æ³¨æ˜åŸåˆ›åœ°å€ä¸ºï¼šhttp://www.54tianzhisheng.cn/2018/04/13/Spring_Boot_2.0_Configuration_Changelog/ é…ç½®æ”¹å˜é…ç½®å±æ€§åœ¨ 1.5.10.RELEASE å’Œ 2.0.0.RELEASE ä¸¤ä¸ªç‰ˆæœ¬ä¹‹é—´çš„æ”¹å˜ï¼š å¯ç”¨é”®ä¸‹é¢çš„è¡¨æ˜¯ 2.0.0.RELEASE ç‰ˆæœ¬ä¸­çš„å¼ƒç”¨é”®ï¼š Key Replacementï¼ˆæ›¿ä»£ï¼‰ åŸå›  spring.datasource.hikari.initialization-fail-fast spring.main.web-environment spring.main.web-application-type æ–°é”®ä¸‹é¢çš„è¡¨æ˜¯ 2.0.0.RELEASE ç‰ˆæœ¬ä¸­æ–°çš„é”®ï¼š Key Default valueï¼ˆé»˜è®¤å€¼ï¼‰ æè¿° logging.file.max-history 0 è¦ä¿å­˜çš„å½’æ¡£æ—¥å¿—æ–‡ä»¶çš„æœ€å¤§å€¼ logging.file.max-size 10MB æ—¥å¿—æ–‡ä»¶æœ€å¤§å®¹é‡ logging.pattern.dateformat yyyy-MM-dd HH:mm:ss.SSS æ—¥å¿—çš„æ—¥æœŸæ ¼å¼ management.endpoint.auditevents.cache.time-to-live 0ms å¯ä»¥ç¼“å­˜å“åº”çš„æœ€é•¿æ—¶é—´ management.endpoint.auditevents.enabled true æ˜¯å¦å¯ç”¨ auditevents ç«¯ç‚¹ management.endpoint.beans.cache.time-to-live 0ms å¯ä»¥ç¼“å­˜å“åº”çš„æœ€é•¿æ—¶é—´ management.endpoint.beans.enabled true æ˜¯å¦å¯ç”¨ bean ç«¯ç‚¹ management.endpoint.conditions.cache.time-to-live 0ms å¯ä»¥ç¼“å­˜å“åº”çš„æœ€é•¿æ—¶é—´ management.endpoint.conditions.enabled true æ˜¯å¦å¯ç”¨ conditions ç«¯ç‚¹ management.endpoint.configprops.cache.time-to-live 0ms å¯ä»¥ç¼“å­˜å“åº”çš„æœ€é•¿æ—¶é—´ management.endpoint.configprops.enabled true æ˜¯å¦å¯ç”¨ configprops ç«¯ç‚¹ management.endpoint.configprops.keys-to-sanitize password,secret,key,token, .credentials.,vcap_services Keys that should be sanitized management.endpoint.env.cache.time-to-live 0ms å¯ä»¥ç¼“å­˜å“åº”çš„æœ€é•¿æ—¶é—´ management.endpoint.env.enabled true æ˜¯å¦å¯ç”¨ env ç«¯ç‚¹ management.endpoint.env.keys-to-sanitize password,secret,key,token, .credentials.,vcap_services Keys that should be sanitized. management.endpoint.flyway.cache.time-to-live 0ms å¯ä»¥ç¼“å­˜å“åº”çš„æœ€é•¿æ—¶é—´ management.endpoint.flyway.enabled true æ˜¯å¦å¯ç”¨ flyway ç«¯ç‚¹ management.endpoint.health.cache.time-to-live 0ms å¯ä»¥ç¼“å­˜å“åº”çš„æœ€é•¿æ—¶é—´ management.endpoint.health.enabled true æ˜¯å¦å¯ç”¨ health ç«¯ç‚¹ management.endpoint.health.roles è§’è‰²ç”¨äºç¡®å®šç”¨æˆ·æ˜¯å¦æœ‰æƒæ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯ management.endpoint.health.show-details never ä½•æ—¶æ˜¾ç¤ºå®Œæ•´çš„å¥åº·è¯¦æƒ… management.endpoint.heapdump.cache.time-to-live 0ms å¯ä»¥ç¼“å­˜å“åº”çš„æœ€é•¿æ—¶é—´ management.endpoint.heapdump.enabled true æ˜¯å¦å¯ç”¨ heapdump ç«¯ç‚¹ management.endpoint.httptrace.cache.time-to-live 0ms å¯ä»¥ç¼“å­˜å“åº”çš„æœ€é•¿æ—¶é—´ management.endpoint.httptrace.enabled true æ˜¯å¦å¯ç”¨ httptrace ç«¯ç‚¹ management.endpoint.info.cache.time-to-live 0ms å¯ä»¥ç¼“å­˜å“åº”çš„æœ€é•¿æ—¶é—´ management.endpoint.info.enabled true æ˜¯å¦å¯ç”¨ info ç«¯ç‚¹ management.endpoint.jolokia.config Jolokia è®¾ç½® management.endpoint.jolokia.enabled true æ˜¯å¦å¯ç”¨ jolokia ç«¯ç‚¹ management.endpoint.liquibase.cache.time-to-live 0ms å¯ä»¥ç¼“å­˜å“åº”çš„æœ€é•¿æ—¶é—´ management.endpoint.liquibase.enabled true æ˜¯å¦å¯ç”¨ liquibase ç«¯ç‚¹ management.endpoint.logfile.cache.time-to-live 0ms å¯ä»¥ç¼“å­˜å“åº”çš„æœ€é•¿æ—¶é—´ management.endpoint.logfile.enabled true æ˜¯å¦å¯ç”¨ logfile ç«¯ç‚¹ management.endpoint.logfile.external-file è¦è®¿é—®çš„å¤–éƒ¨æ—¥å¿—æ–‡ä»¶ management.endpoint.loggers.cache.time-to-live 0ms å¯ä»¥ç¼“å­˜å“åº”çš„æœ€é•¿æ—¶é—´ management.endpoint.loggers.enabled true æ˜¯å¦å¯ç”¨ loggers ç«¯ç‚¹ management.endpoint.mappings.cache.time-to-live 0ms å¯ä»¥ç¼“å­˜å“åº”çš„æœ€é•¿æ—¶é—´ management.endpoint.mappings.enabled true æ˜¯å¦å¯ç”¨ mappings ç«¯ç‚¹ management.endpoint.metrics.cache.time-to-live 0ms å¯ä»¥ç¼“å­˜å“åº”çš„æœ€é•¿æ—¶é—´ management.endpoint.metrics.enabled true æ˜¯å¦å¯ç”¨ metrics ç«¯ç‚¹ management.endpoint.prometheus.cache.time-to-live 0ms å¯ä»¥ç¼“å­˜å“åº”çš„æœ€é•¿æ—¶é—´ management.endpoint.prometheus.enabled true æ˜¯å¦å¯ç”¨ prometheus ç«¯ç‚¹ management.endpoint.scheduledtasks.cache.time-to-live 0ms å¯ä»¥ç¼“å­˜å“åº”çš„æœ€é•¿æ—¶é—´ management.endpoint.scheduledtasks.enabled true æ˜¯å¦å¯ç”¨ scheduledtasks ç«¯ç‚¹ management.endpoint.sessions.enabled true æ˜¯å¦å¯ç”¨ sessions ç«¯ç‚¹ management.endpoint.shutdown.enabled false æ˜¯å¦å¯ç”¨ shutdown ç«¯ç‚¹ management.endpoint.threaddump.cache.time-to-live 0ms å¯ä»¥ç¼“å­˜å“åº”çš„æœ€é•¿æ—¶é—´ management.endpoint.threaddump.enabled true æ˜¯å¦å¯ç”¨ threaddump ç«¯ç‚¹ management.endpoints.enabled-by-default æ˜¯å¦å¯ç”¨æˆ–è€…å…³é—­æ‰€æœ‰çš„ç«¯ç‚¹ management.endpoints.jmx.domain org.springframework.boot ç«¯ç‚¹ JMX åŸŸå management.endpoints.jmx.exposure.exclude åº”æ’é™¤çš„ç«¯ç‚¹ ID management.endpoints.jmx.exposure.include * åº”åŒ…å«çš„ç«¯ç‚¹ ID æˆ–å…¨éƒ¨ * management.endpoints.jmx.static-names è¿½åŠ åˆ°æ‰€æœ‰è¡¨ç¤ºç«¯ç‚¹çš„ MBean çš„ObjectName çš„é™æ€å±æ€§. management.endpoints.jmx.unique-names false æ˜¯å¦ç¡®ä¿ ObjectNames åœ¨å‘ç”Ÿå†²çªæ—¶è¢«ä¿®æ”¹ management.endpoints.web.base-path /actuator Web ç«¯ç‚¹çš„åŸºæœ¬è·¯å¾„ management.endpoints.web.cors.allow-credentials æ˜¯å¦æ”¯æŒå‡­è¯ management.endpoints.web.cors.allowed-headers Comma-separated list of headers to allow in a request. â€˜*â€™ allows all headers. management.endpoints.web.cors.allowed-methods Comma-separated list of methods to allow. â€˜*â€™ allows all methods. management.endpoints.web.cors.allowed-origins Comma-separated list of origins to allow. â€˜*â€™ allows all origins. management.endpoints.web.cors.exposed-headers Comma-separated list of headers to include in a response. management.endpoints.web.cors.max-age 1800s How long the response from a pre-flight request can be cached by clients. management.endpoints.web.exposure.exclude Endpoint IDs that should be excluded. management.endpoints.web.exposure.include health,info Endpoint IDs that should be included or â€˜*â€™ for all. management.endpoints.web.path-mapping Mapping between endpoint IDs and the path that should expose them. management.health.influxdb.enabled true Whether to enable InfluxDB health check. management.health.neo4j.enabled true Whether to enable Neo4j health check. management.health.status.http-mapping Mapping of health statuses to HTTP status codes. management.metrics.binders.files.enabled true Whether to enable files metrics. management.metrics.binders.integration.enabled true Whether to enable Spring Integration metrics. management.metrics.binders.jvm.enabled true Whether to enable JVM metrics. management.metrics.binders.logback.enabled true Whether to enable Logback metrics. management.metrics.binders.processor.enabled true Whether to enable processor metrics. management.metrics.binders.uptime.enabled true Whether to enable uptime metrics. management.metrics.distribution.percentiles Specific computed non-aggregable percentiles to ship to the backend for meter IDs starting-with the specified name. management.metrics.distribution.percentiles-histogram Whether meter IDs starting-with the specified name should be publish percentile histograms. management.metrics.distribution.sla Specific SLA boundaries for meter IDs starting-with the specified name. management.metrics.enable Whether meter IDs starting-with the specified name should be enabled. management.metrics.export.atlas.batch-size 10000 Number of measurements per request to use for this backend. management.metrics.export.atlas.config-refresh-frequency 10s Frequency for refreshing config settings from the LWC service. management.metrics.export.atlas.config-time-to-live 150s Time to live for subscriptions from the LWC service. management.metrics.export.atlas.config-uri http://localhost:7101/ lwc/api/v1/expressions/local-dev URI for the Atlas LWC endpoint to retrieve current subscriptions. management.metrics.export.atlas.connect-timeout 1s Connection timeout for requests to this backend. management.metrics.export.atlas.enabled true Whether exporting of metrics to this backend is enabled. management.metrics.export.atlas.eval-uri http://localhost:7101/ lwc/api/v1/evaluate URI for the Atlas LWC endpoint to evaluate the data for a subscription. management.metrics.export.atlas.lwc-enabled false Whether to enable streaming to Atlas LWC. management.metrics.export.atlas.meter-time-to-live 15m Time to live for meters that do not have any activity. management.metrics.export.atlas.num-threads 2 Number of threads to use with the metrics publishing scheduler. management.metrics.export.atlas.read-timeout 10s Read timeout for requests to this backend. management.metrics.export.atlas.step 1m Step size (i.e. reporting frequency) to use. management.metrics.export.atlas.uri http://localhost:7101/ api/v1/publish URI of the Atlas server. management.metrics.export.datadog.api-key Datadog API key. management.metrics.export.datadog.application-key Datadog application key. management.metrics.export.datadog.batch-size 10000 Number of measurements per request to use for this backend. management.metrics.export.datadog.connect-timeout 1s Connection timeout for requests to this backend. management.metrics.export.datadog.descriptions true Whether to publish descriptions metadata to Datadog. management.metrics.export.datadog.enabled true Whether exporting of metrics to this backend is enabled. management.metrics.export.datadog.host-tag instance Tag that will be mapped to â€œhostâ€ when shipping metrics to Datadog. management.metrics.export.datadog.num-threads 2 Number of threads to use with the metrics publishing scheduler. management.metrics.export.datadog.read-timeout 10s Read timeout for requests to this backend. management.metrics.export.datadog.step 1m Step size (i.e. reporting frequency) to use. management.metrics.export.datadog.uri https://app.datadoghq.com URI to ship metrics to. management.metrics.export.ganglia.addressing-mode multicast UDP addressing mode, either unicast or multicast. management.metrics.export.ganglia.duration-units milliseconds Base time unit used to report durations. management.metrics.export.ganglia.enabled true Whether exporting of metrics to Ganglia is enabled. management.metrics.export.ganglia.host localhost Host of the Ganglia server to receive exported metrics. management.metrics.export.ganglia.port 8649 Port of the Ganglia server to receive exported metrics. management.metrics.export.ganglia.protocol-version 3.1 Ganglia protocol version. management.metrics.export.ganglia.rate-units seconds Base time unit used to report rates. management.metrics.export.ganglia.step 1m Step size (i.e. reporting frequency) to use. management.metrics.export.ganglia.time-to-live 1 Time to live for metrics on Ganglia. management.metrics.export.graphite.duration-units milliseconds Base time unit used to report durations. management.metrics.export.graphite.enabled true Whether exporting of metrics to Graphite is enabled. management.metrics.export.graphite.host localhost Host of the Graphite server to receive exported metrics. management.metrics.export.graphite.port 2004 Port of the Graphite server to receive exported metrics. management.metrics.export.graphite.protocol pickled Protocol to use while shipping data to Graphite. management.metrics.export.graphite.rate-units seconds Base time unit used to report rates. management.metrics.export.graphite.step 1m Step size (i.e. reporting frequency) to use. management.metrics.export.graphite.tags-as-prefix `` For the default naming convention, turn the specified tag keys into part of the metric prefix. management.metrics.export.influx.auto-create-db true Whether to create the Influx database if it does not exist before attempting to publish metrics to it. management.metrics.export.influx.batch-size 10000 Number of measurements per request to use for this backend. management.metrics.export.influx.compressed true Whether to enable GZIP compression of metrics batches published to Influx. management.metrics.export.influx.connect-timeout 1s Connection timeout for requests to this backend. management.metrics.export.influx.consistency one Write consistency for each point. management.metrics.export.influx.db mydb Tag that will be mapped to â€œhostâ€ when shipping metrics to Influx. management.metrics.export.influx.enabled true Whether exporting of metrics to this backend is enabled. management.metrics.export.influx.num-threads 2 Number of threads to use with the metrics publishing scheduler. management.metrics.export.influx.password Login password of the Influx server. management.metrics.export.influx.read-timeout 10s Read timeout for requests to this backend. management.metrics.export.influx.retention-policy Retention policy to use (Influx writes to the DEFAULT retention policy if one is not specified). management.metrics.export.influx.step 1m Step size (i.e. reporting frequency) to use. management.metrics.export.influx.uri http://localhost:8086 URI of the Influx server. management.metrics.export.influx.user-name Login user of the Influx server. management.metrics.export.jmx.enabled true Whether exporting of metrics to JMX is enabled. management.metrics.export.jmx.step 1m Step size (i.e. reporting frequency) to use. management.metrics.export.newrelic.account-id New Relic account ID. management.metrics.export.newrelic.api-key New Relic API key. management.metrics.export.newrelic.batch-size 10000 Number of measurements per request to use for this backend. management.metrics.export.newrelic.connect-timeout 1s Connection timeout for requests to this backend. management.metrics.export.newrelic.enabled true Whether exporting of metrics to this backend is enabled. management.metrics.export.newrelic.num-threads 2 Number of threads to use with the metrics publishing scheduler. management.metrics.export.newrelic.read-timeout 10s Read timeout for requests to this backend. management.metrics.export.newrelic.step 1m Step size (i.e. reporting frequency) to use. management.metrics.export.newrelic.uri https://insights-collector .newrelic.com URI to ship metrics to. management.metrics.export.prometheus.descriptions true Whether to enable publishing descriptions as part of the scrape payload to Prometheus. management.metrics.export.prometheus.enabled true Whether exporting of metrics to Prometheus is enabled. management.metrics.export.prometheus.step 1m Step size (i.e. reporting frequency) to use. management.metrics.export.signalfx.access-token SignalFX access token. management.metrics.export.signalfx.batch-size 10000 Number of measurements per request to use for this backend. management.metrics.export.signalfx.connect-timeout 1s Connection timeout for requests to this backend. management.metrics.export.signalfx.enabled true Whether exporting of metrics to this backend is enabled. management.metrics.export.signalfx.num-threads 2 Number of threads to use with the metrics publishing scheduler. management.metrics.export.signalfx.read-timeout 10s Read timeout for requests to this backend. management.metrics.export.signalfx.source Uniquely identifies the app instance that is publishing metrics to SignalFx. management.metrics.export.signalfx.step 10s Step size (i.e. reporting frequency) to use. management.metrics.export.signalfx.uri https://ingest.signalfx.com URI to ship metrics to. management.metrics.export.simple.enabled true Whether, in the absence of any other exporter, exporting of metrics to an in-memory backend is enabled. management.metrics.export.simple.mode cumulative Counting mode. management.metrics.export.simple.step 1m Step size (i.e. reporting frequency) to use. management.metrics.export.statsd.enabled true Whether exporting of metrics to StatsD is enabled. management.metrics.export.statsd.flavor datadog StatsD line protocol to use. management.metrics.export.statsd.host localhost Host of the StatsD server to receive exported metrics. management.metrics.export.statsd.max-packet-length 1400 Total length of a single payload should be kept within your networkâ€™s MTU. management.metrics.export.statsd.polling-frequency 10s How often gauges will be polled. management.metrics.export.statsd.port 8125 Port of the StatsD server to receive exported metrics. management.metrics.export.statsd.publish-unchanged-meters true Whether to send unchanged meters to the StatsD server. management.metrics.export.statsd.queue-size 2147483647 Maximum size of the queue of items waiting to be sent to the StatsD server. management.metrics.export.wavefront.api-token API token used when publishing metrics directly to the Wavefront API host. management.metrics.export.wavefront.batch-size 10000 Number of measurements per request to use for this backend. management.metrics.export.wavefront.connect-timeout 1s Connection timeout for requests to this backend. management.metrics.export.wavefront.enabled true Whether exporting of metrics to this backend is enabled. management.metrics.export.wavefront.global-prefix Global prefix to separate metrics originating from this appâ€™s white box instrumentation from those originating from other Wavefront integrations when viewed in the Wavefront UI. management.metrics.export.wavefront.num-threads 2 Number of threads to use with the metrics publishing scheduler. management.metrics.export.wavefront.read-timeout 10s Read timeout for requests to this backend. management.metrics.export.wavefront.source Unique identifier for the app instance that is the source of metrics being published to Wavefront. management.metrics.export.wavefront.step 10s Step size (i.e. reporting frequency) to use. management.metrics.export.wavefront.uri https://longboard.wavefront.com URI to ship metrics to. management.metrics.use-global-registry true Whether auto-configured MeterRegistry implementations should be bound to the global static registry on Metrics. management.metrics.web.client.max-uri-tags 100 Maximum number of unique URI tag values allowed. management.metrics.web.client.requests-metric-name http.client.requests Name of the metric for sent requests. management.metrics.web.server.auto-time-requests true Whether requests handled by Spring MVC or WebFlux should be automatically timed. management.metrics.web.server.requests-metric-name http.server.requests Name of the metric for received requests. management.server.add-application-context-header false Add the â€œX-Application-Contextâ€ HTTP header in each response. management.server.address Network address to which the management endpoints should bind. management.server.port Management endpoint HTTP port (uses the same port as the application by default). management.server.servlet.context-path Management endpoint context-path (for instance,/management). management.server.ssl.ciphers management.server.ssl.client-auth management.server.ssl.enabled management.server.ssl.enabled-protocols management.server.ssl.key-alias management.server.ssl.key-password management.server.ssl.key-store management.server.ssl.key-store-password management.server.ssl.key-store-provider management.server.ssl.key-store-type management.server.ssl.protocol management.server.ssl.trust-store management.server.ssl.trust-store-password management.server.ssl.trust-store-provider management.server.ssl.trust-store-type management.trace.http.enabled true Whether to enable HTTP request-response tracing. management.trace.http.include request-headers,response-headers, cookies,errors Items to be included in the trace. server.error.include-exception false Include the â€œexceptionâ€ attribute. server.http2.enabled server.jetty.accesslog.append false Append to log. server.jetty.accesslog.date-format dd/MMM/yyyy:HH:mm:ss Z Timestamp format of the request log. server.jetty.accesslog.enabled false Enable access log. server.jetty.accesslog.extended-format false Enable extended NCSA format. server.jetty.accesslog.file-date-format Date format to place in log file name. server.jetty.accesslog.filename Log filename. server.jetty.accesslog.locale Locale of the request log. server.jetty.accesslog.log-cookies false Enable logging of the request cookies. server.jetty.accesslog.log-latency false Enable logging of request processing time. server.jetty.accesslog.log-server false Enable logging of the request hostname. server.jetty.accesslog.retention-period 31 Number of days before rotated log files are deleted. server.jetty.accesslog.time-zone GMT Timezone of the request log. server.servlet.application-display-name application Display name of the application. server.servlet.context-parameters Servlet context init parameters. server.servlet.context-path Context path of the application. server.servlet.jsp.class-name server.servlet.jsp.init-parameters server.servlet.jsp.registered server.servlet.path / Path of the main dispatcher servlet. server.servlet.session.cookie.comment server.servlet.session.cookie.domain server.servlet.session.cookie.http-only server.servlet.session.cookie.max-age server.servlet.session.cookie.name server.servlet.session.cookie.path server.servlet.session.cookie.secure server.servlet.session.persistent server.servlet.session.store-dir server.servlet.session.timeout server.servlet.session.tracking-modes server.tomcat.max-http-header-size 0 Maximum size, in bytes, of the HTTP message header. server.tomcat.resource.cache-ttl Time-to-live of the static resource cache. server.tomcat.use-relative-redirects Whether HTTP 1.1 and later location headers generated by a call to sendRedirect will use relative or absolute redirects. server.undertow.eager-filter-init true Whether servlet filters should be initialized on startup. spring.banner.charset UTF-8 Banner file encoding. spring.banner.image.height Height of the banner image in chars (default based on image height). spring.banner.image.invert false Whether images should be inverted for dark terminal themes. spring.banner.image.location classpath:banner.gif Banner image file location (jpg or png can also be used). spring.banner.image.margin 2 Left hand image margin in chars. spring.banner.image.width 76 Width of the banner image in chars. spring.banner.location classpath:banner.txt Banner text resource location. spring.batch.initialize-schema embedded Database schema initialization mode. spring.cache.redis.cache-null-values true Allow caching null values. spring.cache.redis.key-prefix Key prefix. spring.cache.redis.time-to-live Entry expiration. spring.cache.redis.use-key-prefix true Whether to use the key prefix when writing to Redis. spring.config.additional-location Config file locations used in addition to the defaults. spring.data.cassandra.connect-timeout Socket option: connection time out. spring.data.cassandra.pool.heartbeat-interval 30s Heartbeat interval after which a message is sent on an idle connection to make sure itâ€™s still alive. spring.data.cassandra.pool.idle-timeout 120s Idle timeout before an idle connection is removed. spring.data.cassandra.pool.max-queue-size 256 Maximum number of requests that get queued if no connection is available. spring.data.cassandra.pool.pool-timeout 5000ms Pool timeout when trying to acquire a connection from a hostâ€™s pool. spring.data.cassandra.read-timeout Socket option: read time out. spring.data.cassandra.repositories.type auto Type of Cassandra repositories to enable. spring.data.couchbase.repositories.type auto Type of Couchbase repositories to enable. spring.data.mongodb.repositories.type auto Type of Mongo repositories to enable. spring.data.neo4j.auto-index none Auto index mode. spring.data.web.pageable.default-page-size 20 Default page size. spring.data.web.pageable.max-page-size 2000 Maximum page size to be accepted. spring.data.web.pageable.one-indexed-parameters false Whether to expose and assume 1-based page number indexes. spring.data.web.pageable.page-parameter page Page index parameter name. spring.data.web.pageable.prefix `` General prefix to be prepended to the page number and page size parameters. spring.data.web.pageable.qualifier-delimiter _ Delimiter to be used between the qualifier and the actual page number and size properties. spring.data.web.pageable.size-parameter size Page size parameter name. spring.data.web.sort.sort-parameter sort Sort parameter name. spring.datasource.hikari.initialization-fail-timeout spring.datasource.hikari.metrics-tracker-factory spring.datasource.hikari.scheduled-executor spring.datasource.hikari.scheduled-executor-service spring.datasource.hikari.schema spring.datasource.initialization-mode embedded Initialize the datasource with available DDL and DML scripts. spring.devtools.restart.log-condition-evaluation-delta true Whether to log the condition evaluation delta upon restart. spring.flyway.baseline-description spring.flyway.baseline-on-migrate spring.flyway.baseline-version spring.flyway.check-location true Whether to check that migration scripts location exists. spring.flyway.clean-disabled spring.flyway.clean-on-validation-error spring.flyway.dry-run-output spring.flyway.enabled true æ˜¯å¦å¯ç”¨ flyway. spring.flyway.encoding spring.flyway.error-handlers spring.flyway.group spring.flyway.ignore-future-migrations spring.flyway.ignore-missing-migrations spring.flyway.init-sqls SQL statements to execute to initialize a connection immediately after obtaining it. spring.flyway.installed-by spring.flyway.locations spring.flyway.mixed spring.flyway.out-of-order spring.flyway.password å¦‚æœæ‚¨æƒ³è®© Flyway åˆ›å»ºè‡ªå·±çš„DataSourceï¼Œå¯ä»¥ä½¿ç”¨ JDBC å¯†ç  spring.flyway.placeholder-prefix spring.flyway.placeholder-replacement spring.flyway.placeholder-suffix spring.flyway.placeholders spring.flyway.repeatable-sql-migration-prefix spring.flyway.schemas spring.flyway.skip-default-callbacks spring.flyway.skip-default-resolvers spring.flyway.sql-migration-prefix spring.flyway.sql-migration-separator spring.flyway.sql-migration-suffix spring.flyway.sql-migration-suffixes spring.flyway.table spring.flyway.target spring.flyway.undo-sql-migration-prefix spring.flyway.url è¦è¿ç§»çš„æ•°æ®åº“çš„ JDBC URL spring.flyway.user ç™»å½•è¦è¿ç§»æ•°æ®åº“çš„ç”¨æˆ·å spring.flyway.validate-on-migrate spring.gson.date-format åºåˆ—åŒ– Date å¯¹è±¡æ—¶ä½¿ç”¨çš„æ ¼å¼ spring.gson.disable-html-escaping Whether to disable the escaping of HTML characters such as â€˜&lt;â€™, â€˜&gt;â€™, etc. spring.gson.disable-inner-class-serialization Whether to exclude inner classes during serialization. spring.gson.enable-complex-map-key-serialization Whether to enable serialization of complex map keys (i.e. non-primitives). spring.gson.exclude-fields-without-expose-annotation Whether to exclude all fields from consideration for serialization or deserialization that do not have the â€œExposeâ€ annotation. spring.gson.field-naming-policy Naming policy that should be applied to an objectâ€™s field during serialization and deserialization. spring.gson.generate-non-executable-json Whether to generate non executable JSON by prefixing the output with some special text. spring.gson.lenient Whether to be lenient about parsing JSON that doesnâ€™t conform to RFC 4627. spring.gson.long-serialization-policy Serialization policy for Long and long types. spring.gson.pretty-printing Whether to output serialized JSON that fits in a page for pretty printing. spring.gson.serialize-nulls Whether to serialize null fields. spring.influx.password Influx ç™»å½•ç”¨æˆ·åå¯†ç  spring.influx.url InfluxDB æ•°æ®åº“ URL spring.influx.user Influx ç™»å½•ç”¨æˆ·å spring.integration.jdbc.initialize-schema embedded Database schema initialization mode. spring.integration.jdbc.schema classpath:org/springframework/ integration/jdbc/schema-@@platform@@.sql Path to the SQL file to use to initialize the database schema. spring.jdbc.template.fetch-size -1 Number of rows that should be fetched from the database when more rows are needed. spring.jdbc.template.max-rows -1 Maximum number of rows. spring.jdbc.template.query-timeout Query timeout. spring.jpa.mapping-resources Mapping resources (equivalent to â€œmapping-fileâ€ entries in persistence.xml). spring.jta.atomikos.datasource.concurrent-connection-validation spring.jta.atomikos.properties.allow-sub-transactions true Specify whether sub-transactions are allowed. spring.jta.atomikos.properties.default-max-wait-time-on-shutdown How long should normal shutdown (no-force) wait for transactions to complete. spring.jta.atomikos.properties.recovery.delay 10000ms Delay between two recovery scans. spring.jta.atomikos.properties.recovery.forget-orphaned-log-entries-delay 86400000ms Delay after which recovery can cleanup pending (â€˜orphanedâ€™) log entries. spring.jta.atomikos.properties.recovery.max-retries 5 Number of retry attempts to commit the transaction before throwing an exception. spring.jta.atomikos.properties.recovery.retry-interval 10000ms Delay between retry attempts. spring.kafka.admin.client-id ID to pass to the server when making requests. spring.kafka.admin.fail-fast false Whether to fail fast if the broker is not available on startup. spring.kafka.admin.properties Additional admin-specific properties used to configure the client. spring.kafka.admin.ssl.key-password Password of the private key in the key store file. spring.kafka.admin.ssl.keystore-location Location of the key store file. spring.kafka.admin.ssl.keystore-password Store password for the key store file. spring.kafka.admin.ssl.truststore-location Location of the trust store file. spring.kafka.admin.ssl.truststore-password Store password for the trust store file. spring.kafka.consumer.properties Additional consumer-specific properties used to configure the client. spring.kafka.consumer.ssl.key-password Password of the private key in the key store file. spring.kafka.consumer.ssl.keystore-location Location of the key store file. spring.kafka.consumer.ssl.keystore-password Store password for the key store file. spring.kafka.consumer.ssl.truststore-location Location of the trust store file. spring.kafka.consumer.ssl.truststore-password Store password for the trust store file. spring.kafka.jaas.control-flag required Control flag for login configuration. spring.kafka.jaas.enabled false Whether to enable JAAS configuration. spring.kafka.jaas.login-module com.sun.security.auth .module.Krb5LoginModule Login module. spring.kafka.jaas.options Additional JAAS options. spring.kafka.listener.client-id Prefix for the listenerâ€™s consumer client.id property. spring.kafka.listener.idle-event-interval Time between publishing idle consumer events (no data received). spring.kafka.listener.log-container-config Whether to log the container configuration during initialization (INFO level). spring.kafka.listener.monitor-interval Time between checks for non-responsive consumers. spring.kafka.listener.no-poll-threshold Multiplier applied to â€œpollTimeoutâ€ to determine if a consumer is non-responsive. spring.kafka.listener.type single Listener type. spring.kafka.producer.properties Additional producer-specific properties used to configure the client. spring.kafka.producer.ssl.key-password Password of the private key in the key store file. spring.kafka.producer.ssl.keystore-location Location of the key store file. spring.kafka.producer.ssl.keystore-password Store password for the key store file. spring.kafka.producer.ssl.truststore-location Location of the trust store file. spring.kafka.producer.ssl.truststore-password Store password for the trust store file. spring.kafka.producer.transaction-id-prefix When non empty, enables transaction support for producer. spring.ldap.anonymous-read-only false Whether read-only operations should use an anonymous environment. spring.liquibase.change-log classpath:/db/changelog/ db.changelog-master.yaml Change log configuration path. spring.liquibase.check-change-log-location true Whether to check that the change log location exists. spring.liquibase.contexts Comma-separated list of runtime contexts to use. spring.liquibase.default-schema Default database schema. spring.liquibase.drop-first false Whether to first drop the database schema. spring.liquibase.enabled true Whether to enable Liquibase support. spring.liquibase.labels Comma-separated list of runtime labels to use. spring.liquibase.parameters Change log parameters. spring.liquibase.password Login password of the database to migrate. spring.liquibase.rollback-file File to which rollback SQL is written when an update is performed. spring.liquibase.url JDBC URL of the database to migrate. spring.liquibase.user Login user of the database to migrate. spring.main.web-application-type Flag to explicitly request a specific type of web application. spring.messages.cache-duration Loaded resource bundle files cache duration. spring.messages.use-code-as-default-message false Whether to use the message code as the default message instead of throwing a â€œNoSuchMessageExceptionâ€. spring.mvc.contentnegotiation.favor-parameter false Whether a request parameter (â€œformatâ€ by default) should be used to determine the requested media type. spring.mvc.contentnegotiation.favor-path-extension false Whether the path extension in the URL path should be used to determine the requested media type. spring.mvc.contentnegotiation.media-types Map file extensions to media types for content negotiation. spring.mvc.contentnegotiation.parameter-name Query parameter name to use when â€œfavor-parameterâ€ is enabled. spring.mvc.pathmatch.use-registered-suffix-pattern false Whether suffix pattern matching should work only against extensions registered with â€œspring.mvc.contentnegotiation.media-types.*â€. spring.mvc.pathmatch.use-suffix-pattern false Whether to use suffix pattern match (â€œ.*â€) when matching patterns to requests. spring.quartz.jdbc.initialize-schema embedded Database schema initialization mode. spring.quartz.jdbc.schema classpath:org/quartz/impl/ jdbcjobstore/ tables_@@platform@@.sql Path to the SQL file to use to initialize the database schema. spring.quartz.job-store-type memory Quartz job store type. spring.quartz.properties Additional Quartz Scheduler properties. spring.rabbitmq.listener.direct.acknowledge-mode Acknowledge mode of container. spring.rabbitmq.listener.direct.auto-startup true Whether to start the container automatically on startup. spring.rabbitmq.listener.direct.consumers-per-queue Number of consumers per queue. spring.rabbitmq.listener.direct.default-requeue-rejected Whether rejected deliveries are re-queued by default. spring.rabbitmq.listener.direct.idle-event-interval How often idle container events should be published. spring.rabbitmq.listener.direct.prefetch Number of messages to be handled in a single request. spring.rabbitmq.listener.direct.retry.enabled false Whether publishing retries are enabled. spring.rabbitmq.listener.direct.retry.initial-interval 1000ms Duration between the first and second attempt to deliver a message. spring.rabbitmq.listener.direct.retry.max-attempts 3 Maximum number of attempts to deliver a message. spring.rabbitmq.listener.direct.retry.max-interval 10000ms Maximum duration between attempts. spring.rabbitmq.listener.direct.retry.multiplier 1 Multiplier to apply to the previous retry interval. spring.rabbitmq.listener.direct.retry.stateless true Whether retries are stateless or stateful. spring.rabbitmq.listener.type simple Listener container type. spring.rabbitmq.ssl.key-store-type PKCS12 Key store type. spring.rabbitmq.ssl.trust-store-type JKS Trust store type. spring.rabbitmq.template.exchange `` Name of the default exchange to use for send operations. spring.rabbitmq.template.routing-key `` Value of a default routing key to use for send operations. spring.reactor.stacktrace-mode.enabled false Whether Reactor should collect stacktrace information at runtime. spring.redis.jedis.pool.max-active 8 Maximum number of connections that can be allocated by the pool at a given time. spring.redis.jedis.pool.max-idle 8 Maximum number of â€œidleâ€ connections in the pool. spring.redis.jedis.pool.max-wait -1ms Maximum amount of time a connection allocation should block before throwing an exception when the pool is exhausted. spring.redis.jedis.pool.min-idle 0 Target for the minimum number of idle connections to maintain in the pool. spring.redis.lettuce.pool.max-active 8 Maximum number of connections that can be allocated by the pool at a given time. spring.redis.lettuce.pool.max-idle 8 Maximum number of â€œidleâ€ connections in the pool. spring.redis.lettuce.pool.max-wait -1ms Maximum amount of time a connection allocation should block before throwing an exception when the pool is exhausted. spring.redis.lettuce.pool.min-idle 0 Target for the minimum number of idle connections to maintain in the pool. spring.redis.lettuce.shutdown-timeout 100ms Shutdown timeout. spring.resources.cache.cachecontrol.cache-private Indicate that the response message is intended for a single user and must not be stored by a shared cache. spring.resources.cache.cachecontrol.cache-public Indicate that any cache may store the response. spring.resources.cache.cachecontrol.max-age Maximum time the response should be cached, in seconds if no duration suffix is not specified. spring.resources.cache.cachecontrol.must-revalidate Indicate that once it has become stale, a cache must not use the response without re-validating it with the server. spring.resources.cache.cachecontrol.no-cache Indicate that the cached response can be reused only if re-validated with the server. spring.resources.cache.cachecontrol.no-store Indicate to not cache the response in any case. spring.resources.cache.cachecontrol.no-transform Indicate intermediaries (caches and others) that they should not transform the response content. spring.resources.cache.cachecontrol.proxy-revalidate Same meaning as the â€œmust-revalidateâ€ directive, except that it does not apply to private caches. spring.resources.cache.cachecontrol.s-max-age Maximum time the response should be cached by shared caches, in seconds if no duration suffix is not specified. spring.resources.cache.cachecontrol.stale-if-error Maximum time the response may be used when errors are encountered, in seconds if no duration suffix is not specified. spring.resources.cache.cachecontrol.stale-while-revalidate Maximum time the response can be served after it becomes stale, in seconds if no duration suffix is not specified. spring.resources.cache.period Cache period for the resources served by the resource handler. spring.security.filter.dispatcher-types async,error,request Security filter chain dispatcher types. spring.security.filter.order -100 Security filter chain order. spring.security.oauth2.client.provider OAuth provider details. spring.security.oauth2.client.registration OAuth client registrations. spring.security.user.name user Default user name. spring.security.user.password Password for the default user name. spring.security.user.roles Granted roles for the default user name. spring.servlet.multipart.enabled true Whether to enable support of multipart uploads. spring.servlet.multipart.file-size-threshold 0 Threshold after which files are written to disk. spring.servlet.multipart.location Intermediate location of uploaded files. spring.servlet.multipart.max-file-size 1MB Max file size. spring.servlet.multipart.max-request-size 10MB Max request size. spring.servlet.multipart.resolve-lazily false Whether to resolve the multipart request lazily at the time of file or parameter access. spring.session.jdbc.cleanup-cron 0 * * * * * Cron expression for expired session cleanup job. spring.session.jdbc.initialize-schema embedded Database schema initialization mode. spring.session.mongodb.collection-name sessions Collection name used to store sessions. spring.session.redis.cleanup-cron 0 * * * * * Cron expression for expired session cleanup job. spring.session.servlet.filter-dispatcher-types async,error,request Session repository filter dispatcher types. spring.session.servlet.filter-order Session repository filter order. spring.thymeleaf.enable-spring-el-compiler false Enable the SpringEL compiler in SpringEL expressions. spring.thymeleaf.reactive.chunked-mode-view-names Comma-separated list of view names (patterns allowed) that should be the only ones executed in CHUNKED mode when a max chunk size is set. spring.thymeleaf.reactive.full-mode-view-names Comma-separated list of view names (patterns allowed) that should be executed in FULL mode even if a max chunk size is set. spring.thymeleaf.reactive.max-chunk-size 0 Maximum size of data buffers used for writing to the response, in bytes. spring.thymeleaf.reactive.media-types Media types supported by the view technology. spring.thymeleaf.servlet.content-type text/html Content-Type value written to HTTP responses. spring.webflux.date-format Date format to use. spring.webflux.static-path-pattern /** Path pattern used for static resources. spring.webservices.wsdl-locations Comma-separated list of locations of WSDLs and accompanying XSDs to be exposed as beans. Key Replacementï¼ˆæ›¿ä»£ï¼‰ åŸå›  banner.charset spring.banner.charset banner.image.height spring.banner.image.height banner.image.invert spring.banner.image.invert banner.image.location spring.banner.image.location banner.image.margin spring.banner.image.margin banner.image.width spring.banner.image.width banner.location spring.banner.location endpoints.actuator.enabled actuator ç«¯ç‚¹ä¸å†å¯ç”¨ endpoints.actuator.path actuator ç«¯ç‚¹ä¸å†å¯ç”¨ endpoints.actuator.sensitive actuator ç«¯ç‚¹ä¸å†å¯ç”¨ endpoints.auditevents.enabled management.endpoint. auditevents.enabled endpoints.auditevents.path management.endpoints.web.path-mapping.auditevents endpoints.auditevents.sensitive ç»ˆç«¯æ•æ„Ÿæ ‡å¿—ä¸å†å¯å®šåˆ¶ï¼Œå› ä¸ºSpring Boot ä¸å†æä¾›å¯è‡ªå®šä¹‰çš„å®‰å…¨è‡ªåŠ¨é…ç½® endpoints.autoconfig.enabled management.endpoint. conditions.enabled endpoints.autoconfig.id ç«¯ç‚¹æ ‡è¯†ç¬¦ä¸å†å¯å®šåˆ¶ endpoints.autoconfig.path management.endpoints.web.path-mapping.conditions endpoints.autoconfig.sensitive ç»ˆç«¯æ•æ„Ÿæ ‡å¿—ä¸å†å¯å®šåˆ¶ï¼Œå› ä¸ºSpring Boot ä¸å†æä¾›å¯è‡ªå®šä¹‰çš„å®‰å…¨è‡ªåŠ¨é…ç½® endpoints.beans.enabled management.endpoint.beans.enabled endpoints.beans.id ç«¯ç‚¹æ ‡è¯†ç¬¦ä¸å†å¯å®šåˆ¶ endpoints.beans.path management.endpoints.web.path-mapping.beans endpoints.beans.sensitive ç»ˆç«¯æ•æ„Ÿæ ‡å¿—ä¸å†å¯å®šåˆ¶ï¼Œå› ä¸ºSpring Boot ä¸å†æä¾›å¯è‡ªå®šä¹‰çš„å®‰å…¨è‡ªåŠ¨é…ç½® endpoints.configprops.enabled management.endpoint. configprops.enabled endpoints.configprops.id ç«¯ç‚¹æ ‡è¯†ç¬¦ä¸å†å¯å®šåˆ¶ endpoints.configprops.keys-to-sanitize management.endpoint. configprops.keys-to-sanitize endpoints.configprops.path management.endpoints.web.path-mapping.configprops endpoints.configprops.sensitive ç»ˆç«¯æ•æ„Ÿæ ‡å¿—ä¸å†å¯å®šåˆ¶ï¼Œå› ä¸ºSpring Boot ä¸å†æä¾›å¯è‡ªå®šä¹‰çš„å®‰å…¨è‡ªåŠ¨é…ç½® endpoints.cors.allow-credentials management.endpoints. web.cors.allow-credentials endpoints.cors.allowed-headers management.endpoints. web.cors.allowed-headers endpoints.cors.allowed-methods management.endpoints. web.cors.allowed-methods endpoints.cors.allowed-origins management.endpoints. web.cors.allowed-origins endpoints.cors.exposed-headers management.endpoints. web.cors.exposed-headers endpoints.cors.max-age management.endpoints. web.cors.max-age endpoints.docs.curies.enabled docs ç«¯ç‚¹ä¸å†å¯ç”¨ endpoints.docs.enabled docs ç«¯ç‚¹ä¸å†å¯ç”¨ endpoints.docs.path docs ç«¯ç‚¹ä¸å†å¯ç”¨ endpoints.docs.sensitive docs ç«¯ç‚¹ä¸å†å¯ç”¨ endpoints.dump.enabled management.endpoint. threaddump.enabled endpoints.dump.id ç«¯ç‚¹æ ‡è¯†ç¬¦ä¸å†å¯å®šåˆ¶ endpoints.dump.path management.endpoints.web.path-mapping.dump endpoints.dump.sensitive ç»ˆç«¯æ•æ„Ÿæ ‡å¿—ä¸å†å¯å®šåˆ¶ï¼Œå› ä¸ºSpring Boot ä¸å†æä¾›å¯è‡ªå®šä¹‰çš„å®‰å…¨è‡ªåŠ¨é…ç½® endpoints.enabled management.endpoints. enabled-by-default endpoints.env.enabled management.endpoint.env.enabled endpoints.env.id ç«¯ç‚¹æ ‡è¯†ç¬¦ä¸å†å¯å®šåˆ¶ endpoints.env.keys-to-sanitize management.endpoint. env.keys-to-sanitize endpoints.env.path management.endpoints. web.path-mapping.env endpoints.env.sensitive ç»ˆç«¯æ•æ„Ÿæ ‡å¿—ä¸å†å¯å®šåˆ¶ï¼Œå› ä¸ºSpring Boot ä¸å†æä¾›å¯è‡ªå®šä¹‰çš„å®‰å…¨è‡ªåŠ¨é…ç½® endpoints.flyway.enabled management.endpoint.flyway.enabled endpoints.flyway.id ç«¯ç‚¹æ ‡è¯†ç¬¦ä¸å†å¯å®šåˆ¶ endpoints.flyway.sensitive ç»ˆç«¯æ•æ„Ÿæ ‡å¿—ä¸å†å¯å®šåˆ¶ï¼Œå› ä¸ºSpring Boot ä¸å†æä¾›å¯è‡ªå®šä¹‰çš„å®‰å…¨è‡ªåŠ¨é…ç½® endpoints.health.enabled management.endpoint.health.enabled endpoints.health.id ç«¯ç‚¹æ ‡è¯†ç¬¦ä¸å†å¯å®šåˆ¶ endpoints.health.mapping management.health.status.http-mapping endpoints.health.path management.endpoints.web.path-mapping.health endpoints.health.sensitive ç»ˆç«¯æ•æ„Ÿæ ‡å¿—ä¸å†å¯å®šåˆ¶ï¼Œå› ä¸ºSpring Boot ä¸å†æä¾›å¯è‡ªå®šä¹‰çš„å®‰å…¨è‡ªåŠ¨é…ç½® endpoints.health.time-to-live management.endpoint. health.cache.time-to-live endpoints.heapdump.enabled management.endpoint.heapdump.enabled endpoints.heapdump.path management.endpoints.web.path-mapping.heapdump endpoints.heapdump.sensitive ç»ˆç«¯æ•æ„Ÿæ ‡å¿—ä¸å†å¯å®šåˆ¶ï¼Œå› ä¸ºSpring Boot ä¸å†æä¾›å¯è‡ªå®šä¹‰çš„å®‰å…¨è‡ªåŠ¨é…ç½® endpoints.hypermedia.enabled Actuator ä¸­çš„ Hypermedia ä¸å†å¯ç”¨ endpoints.info.enabled management.endpoint.info.enabled endpoints.info.id ç«¯ç‚¹æ ‡è¯†ç¬¦ä¸å†å¯å®šåˆ¶ endpoints.info.path management.endpoints.web.path-mapping.info endpoints.info.sensitive ç»ˆç«¯æ•æ„Ÿæ ‡å¿—ä¸å†å¯å®šåˆ¶ï¼Œå› ä¸ºSpring Boot ä¸å†æä¾›å¯è‡ªå®šä¹‰çš„å®‰å…¨è‡ªåŠ¨é…ç½® endpoints.jmx.domain management.endpoints.jmx.domain endpoints.jmx.enabled management.endpoints. jmx.exposure.exclude endpoints.jmx.static-names management.endpoints. jmx.static-names endpoints.jmx.unique-names management.endpoints. jmx.unique-names endpoints.jolokia.enabled management.endpoint. jolokia.enabled endpoints.jolokia.path management.endpoints.web.path-mapping.jolokia endpoints.jolokia.sensitive ç»ˆç«¯æ•æ„Ÿæ ‡å¿—ä¸å†å¯å®šåˆ¶ï¼Œå› ä¸ºSpring Boot ä¸å†æä¾›å¯è‡ªå®šä¹‰çš„å®‰å…¨è‡ªåŠ¨é…ç½® endpoints.liquibase.enabled management.endpoint. liquibase.enabled endpoints.liquibase.id ç«¯ç‚¹æ ‡è¯†ç¬¦ä¸å†å¯å®šåˆ¶ endpoints.liquibase.sensitive ç»ˆç«¯æ•æ„Ÿæ ‡å¿—ä¸å†å¯å®šåˆ¶ï¼Œå› ä¸ºSpring Boot ä¸å†æä¾›å¯è‡ªå®šä¹‰çš„å®‰å…¨è‡ªåŠ¨é…ç½® endpoints.logfile.enabled management.endpoint. logfile.enabled endpoints.logfile.external-file management.endpoint. logfile.external-file endpoints.logfile.path management.endpoints.web.path-mapping.logfile endpoints.logfile.sensitive ç»ˆç«¯æ•æ„Ÿæ ‡å¿—ä¸å†å¯å®šåˆ¶ï¼Œå› ä¸ºSpring Boot ä¸å†æä¾›å¯è‡ªå®šä¹‰çš„å®‰å…¨è‡ªåŠ¨é…ç½® endpoints.loggers.enabled management.endpoint. loggers.enabled endpoints.loggers.id ç«¯ç‚¹æ ‡è¯†ç¬¦ä¸å†å¯å®šåˆ¶ endpoints.loggers.path management.endpoints.web.path-mapping.loggers endpoints.loggers.sensitive ç»ˆç«¯æ•æ„Ÿæ ‡å¿—ä¸å†å¯å®šåˆ¶ï¼Œå› ä¸ºSpring Boot ä¸å†æä¾›å¯è‡ªå®šä¹‰çš„å®‰å…¨è‡ªåŠ¨é…ç½® endpoints.mappings.enabled management.endpoint. mappings.enabled endpoints.mappings.id ç«¯ç‚¹æ ‡è¯†ç¬¦ä¸å†å¯å®šåˆ¶ endpoints.mappings.path management.endpoints.web.path-mapping.mappings endpoints.mappings.sensitive ç»ˆç«¯æ•æ„Ÿæ ‡å¿—ä¸å†å¯å®šåˆ¶ï¼Œå› ä¸ºSpring Boot ä¸å†æä¾›å¯è‡ªå®šä¹‰çš„å®‰å…¨è‡ªåŠ¨é…ç½® endpoints.metrics.enabled management.endpoint.metrics.enabled endpoints.metrics.filter.counter-submissions Metrics support ç°åœ¨ä½¿ç”¨åƒåˆ†å°º endpoints.metrics.filter.enabled Metrics support ç°åœ¨ä½¿ç”¨åƒåˆ†å°º endpoints.metrics.filter.gauge-submissions Metrics support ç°åœ¨ä½¿ç”¨åƒåˆ†å°º endpoints.metrics.id ç«¯ç‚¹æ ‡è¯†ç¬¦ä¸å†å¯å®šåˆ¶ endpoints.metrics.path management.endpoints.web.path-mapping.metrics endpoints.metrics.sensitive ç»ˆç«¯æ•æ„Ÿæ ‡å¿—ä¸å†å¯å®šåˆ¶ï¼Œå› ä¸ºSpring Boot ä¸å†æä¾›å¯è‡ªå®šä¹‰çš„å®‰å…¨è‡ªåŠ¨é…ç½® endpoints.sensitive ç»ˆç«¯æ•æ„Ÿæ ‡å¿—ä¸å†å¯å®šåˆ¶ï¼Œå› ä¸ºSpring Boot ä¸å†æä¾›å¯è‡ªå®šä¹‰çš„å®‰å…¨è‡ªåŠ¨é…ç½® endpoints.shutdown.enabled management.endpoint. shutdown.enabled endpoints.shutdown.id ç«¯ç‚¹æ ‡è¯†ç¬¦ä¸å†å¯å®šåˆ¶ endpoints.shutdown.path management.endpoints.web.path-mapping.shutdown endpoints.shutdown.sensitive ç»ˆç«¯æ•æ„Ÿæ ‡å¿—ä¸å†å¯å®šåˆ¶ï¼Œå› ä¸ºSpring Boot ä¸å†æä¾›å¯è‡ªå®šä¹‰çš„å®‰å…¨è‡ªåŠ¨é…ç½® endpoints.trace.enabled management.endpoint. httptrace.enabled endpoints.trace.filter.enabled management.trace.http.enabled endpoints.trace.id ç«¯ç‚¹æ ‡è¯†ç¬¦ä¸å†å¯å®šåˆ¶ endpoints.trace.path management.endpoints.web.path-mapping.httptrace endpoints.trace.sensitive ç»ˆç«¯æ•æ„Ÿæ ‡å¿—ä¸å†å¯å®šåˆ¶ï¼Œå› ä¸ºSpring Boot ä¸å†æä¾›å¯è‡ªå®šä¹‰çš„å®‰å…¨è‡ªåŠ¨é…ç½® error.path Path of the error controller. flyway.baseline-description spring.flyway.baseline-description flyway.baseline-on-migrate spring.flyway.baseline-on-migrate flyway.baseline-version spring.flyway.baseline-version flyway.check-location spring.flyway.check-location flyway.clean-on-validation-error spring.flyway. clean-on-validation-error flyway.enabled spring.flyway.enabled flyway.encoding spring.flyway.encoding flyway.ignore-failed-future-migration flyway.init-sqls spring.flyway.init-sqls flyway.locations spring.flyway.locations flyway.out-of-order spring.flyway.out-of-order flyway.password spring.flyway.password flyway.placeholder-prefix spring.flyway.placeholder-prefix flyway.placeholder-replacement spring.flyway.placeholder-replacement flyway.placeholder-suffix spring.flyway.placeholder-suffix flyway.placeholders spring.flyway.placeholders flyway.schemas spring.flyway.schemas flyway.sql-migration-prefix spring.flyway.sql-migration-prefix flyway.sql-migration-separator spring.flyway.sql-migration-separator flyway.sql-migration-suffix spring.flyway.sql-migration-suffixes flyway.table spring.flyway.table flyway.target spring.flyway.target flyway.url spring.flyway.url flyway.user spring.flyway.user flyway.validate-on-migrate spring.flyway.validate-on-migrate jolokia.config management.endpoint.jolokia.config liquibase.change-log spring.liquibase.change-log liquibase.check-change-log-location spring.liquibase.check-change-log-location liquibase.contexts spring.liquibase.contexts liquibase.default-schema spring.liquibase.default-schema liquibase.drop-first spring.liquibase.drop-first liquibase.enabled spring.liquibase.enabled liquibase.labels spring.liquibase.labels liquibase.parameters spring.liquibase.parameters liquibase.password spring.liquibase.password liquibase.rollback-file spring.liquibase.rollback-file liquibase.url spring.liquibase.url liquibase.user spring.liquibase.user management.add-application-context-header management.server.add-application-context-header management.address management.server.address management.context-path management.server. servlet.context-path management.port management.server.port management.security.enabled ç°åœ¨æä¾›å…¨å±€ security è‡ªåŠ¨é…ç½®ã€‚ management.security.roles security è‡ªåŠ¨é…ç½®ä¸å†å¯å®šåˆ¶ management.security.sessions security è‡ªåŠ¨é…ç½®ä¸å†å¯å®šåˆ¶ management.shell.auth.jaas.domain CRaSH æ”¯æŒä¸å†å¯ç”¨ management.shell.auth.key.path CRaSH æ”¯æŒä¸å†å¯ç”¨ management.shell.auth.simple.user.name CRaSH æ”¯æŒä¸å†å¯ç”¨ management.shell.auth.simple.user.password CRaSH æ”¯æŒä¸å†å¯ç”¨ management.shell.auth.spring.roles CRaSH æ”¯æŒä¸å†å¯ç”¨ management.shell.auth.type CRaSH æ”¯æŒä¸å†å¯ç”¨ management.shell.ssh.auth-timeout CRaSH æ”¯æŒä¸å†å¯ç”¨ management.shell.ssh.enabled CRaSH æ”¯æŒä¸å†å¯ç”¨ management.shell.ssh.idle-timeout CRaSH æ”¯æŒä¸å†å¯ç”¨ management.shell.ssh.key-path CRaSH æ”¯æŒä¸å†å¯ç”¨ management.shell.ssh.port CRaSH æ”¯æŒä¸å†å¯ç”¨ management.shell.telnet.enabled CRaSH æ”¯æŒä¸å†å¯ç”¨ management.shell.telnet.port CRaSH æ”¯æŒä¸å†å¯ç”¨ management.ssl.ciphers management.server.ssl.ciphers management.ssl.client-auth management.server.ssl.client-auth management.ssl.enabled management.server.ssl.enabled management.ssl.enabled-protocols management.server.ssl.enabled-protocols management.ssl.key-alias management.server.ssl.key-alias management.ssl.key-password management.server.ssl.key-password management.ssl.key-store management.server.ssl.key-store management.ssl.key-store-password management.server.ssl.key-store-password management.ssl.key-store-provider management.server.ssl.key-store-provider management.ssl.key-store-type management.server.ssl.key-store-type management.ssl.protocol management.server.ssl.protocol management.ssl.trust-store management.server.ssl.trust-store management.ssl.trust-store-password management.server.ssl.trust-store-password management.ssl.trust-store-provider management.server.ssl.trust-store-provider management.ssl.trust-store-type management.server.ssl.trust-store-type management.trace.include management.trace.http.include security.basic.authorize-mode security è‡ªåŠ¨é…ç½®ä¸å†å¯å®šåˆ¶ security.basic.enabled security è‡ªåŠ¨é…ç½®ä¸å†å¯å®šåˆ¶ security.basic.path security è‡ªåŠ¨é…ç½®ä¸å†å¯å®šåˆ¶ security.basic.realm security è‡ªåŠ¨é…ç½®ä¸å†å¯å®šåˆ¶ security.enable-csrf security è‡ªåŠ¨é…ç½®ä¸å†å¯å®šåˆ¶ security.filter-dispatcher-types spring.security. filter.dispatcher-types security.filter-order spring.security.filter.order security.headers.cache security è‡ªåŠ¨é…ç½®ä¸å†å¯å®šåˆ¶ security.headers.content-security-policy security è‡ªåŠ¨é…ç½®ä¸å†å¯å®šåˆ¶ security.headers.content-security-policy-mode security è‡ªåŠ¨é…ç½®ä¸å†å¯å®šåˆ¶ security.headers.content-type security è‡ªåŠ¨é…ç½®ä¸å†å¯å®šåˆ¶ security.headers.frame security è‡ªåŠ¨é…ç½®ä¸å†å¯å®šåˆ¶ security.headers.hsts security è‡ªåŠ¨é…ç½®ä¸å†å¯å®šåˆ¶ security.headers.xss security è‡ªåŠ¨é…ç½®ä¸å†å¯å®šåˆ¶ security.ignored security è‡ªåŠ¨é…ç½®ä¸å†å¯å®šåˆ¶ security.oauth2. authorization.check-token-access Spring Security è®¿é—®è§„åˆ™ç”¨äºæ£€æŸ¥ä»¤ç‰Œç«¯ç‚¹ï¼ˆä¾‹å¦‚ï¼ŒSpELè¡¨è¾¾å¼ï¼Œå¦‚â€œisAuthenticatedï¼ˆï¼‰â€ï¼‰ security.oauth2.authorization.realm å®¢æˆ·ç«¯èº«ä»½éªŒè¯çš„é¢†åŸŸåç§° security.oauth2.authorization.token-key-access Spring Securityè®¿é—®è§„åˆ™ç”¨äºæ£€æŸ¥ä»¤ç‰Œç«¯ç‚¹ï¼ˆä¾‹å¦‚ï¼ŒSpELè¡¨è¾¾å¼ï¼Œå¦‚â€œisAuthenticatedï¼ˆï¼‰â€ï¼‰ security.oauth2.client.access-token-uri security.oauth2.client.access-token-validity-seconds security.oauth2.client.additional-information security.oauth2.client.authentication-scheme security.oauth2.client.authorities security.oauth2.client.authorized-grant-types security.oauth2.client.auto-approve-scopes security.oauth2.client.client-authentication-scheme security.oauth2.client.client-id security.oauth2.client.client-secret security.oauth2.client.grant-type security.oauth2.client.id security.oauth2.client.pre- established-redirect-uri security.oauth2.client.refresh-token-validity-seconds security.oauth2.client.registered-redirect-uri security.oauth2.client.resource-ids security.oauth2.client.scope security.oauth2.client.token-name security.oauth2.client.use-current-uri security.oauth2.client.user-authorization-uri security.oauth2.resource.filter-order 0 ç”¨äºéªŒè¯ä»¤ç‰Œçš„è¿‡æ»¤å™¨é“¾çš„é¡ºåºã€‚ security.oauth2.resource.id èµ„æºçš„æ ‡è¯†ç¬¦ security.oauth2.resource.jwk.key-set-uri è·å–éªŒè¯å¯†é’¥ä»¥éªŒè¯ JWT ä»¤ç‰Œçš„ URI security.oauth2.resource.jwt.key-uri JWT ä»¤ç‰Œçš„ URI security.oauth2.resource.jwt.key-value JWT ä»¤ç‰Œçš„éªŒè¯å¯†é’¥ security.oauth2.resource.prefer-token-info true ä½¿ç”¨ä»¤ç‰Œä¿¡æ¯ï¼Œå¯ä»¥è®¾ç½®ä¸º falseä»¥ä½¿ç”¨ç”¨æˆ·ä¿¡æ¯ security.oauth2.resource.service-id resource security.oauth2.resource.token-info-uri token decoding ç«¯ç‚¹çš„ URI security.oauth2.resource.token-type ä½¿ç”¨ userInfoUri æ—¶è¦å‘é€çš„ä»¤ç‰Œç±»å‹ã€‚ security.oauth2.resource.user-info-uri ç”¨æˆ·ç«¯ç‚¹çš„ URI security.oauth2.sso.filter-order å¦‚æœä¸æä¾›æ˜¾å¼çš„WebSecurityConfigurerAdapterï¼Œåˆ™åº”ç”¨è¿‡æ»¤å™¨é¡ºåºï¼ˆåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥æ”¹ä¸ºæä¾›é¡ºåºï¼‰ã€‚ security.oauth2.sso.login-path /login ç™»å½•é¡µé¢çš„è·¯å¾„ï¼Œå³è§¦å‘é‡å®šå‘åˆ° OAuth2 æˆæƒæœåŠ¡å™¨çš„é¡µé¢ã€‚ security.require-ssl security è‡ªåŠ¨é…ç½®å·²ä¸å†å¯å®šåˆ¶ security.sessions security è‡ªåŠ¨é…ç½®å·²ä¸å†å¯å®šåˆ¶ security.user.name spring.security.user.name security.user.password spring.security.user.password security.user.role spring.security.user.roles server.context-parameters server.servlet.context-parameters server.context-path server.servlet.context-path server.display-name server.servlet. application-display-name server.jsp-servlet.class-name server.servlet.jsp.class-name server.jsp-servlet.init-parameters server.servlet.jsp.init-parameters server.jsp-servlet.registered server.servlet.jsp.registered server.servlet-path server.servlet.path server.session.cookie.comment server.servlet.session.cookie.comment server.session.cookie.domain server.servlet.session.cookie.domain server.session.cookie.http-only server.servlet. session.cookie.http-only server.session.cookie.max-age server.servlet.session.cookie.max-age server.session.cookie.name server.servlet.session.cookie.name server.session.cookie.path server.servlet.session.cookie.path server.session.cookie.secure server.servlet.session.cookie.secure server.session.persistent server.servlet.session.persistent server.session.store-dir server.servlet.session.store-dir server.session.timeout server.servlet.session.timeout server.session.tracking-modes server.servlet.session.tracking-modes spring.activemq.pool.configuration.block-if-session-pool-is-full spring.activemq.pool.configuration.block-if-session-pool-is-full-timeout spring.activemq.pool.configuration.connection-factory spring.activemq.pool.configuration.create-connection-on-startup spring.activemq.pool.configuration.expiry-timeout spring.activemq.pool.configuration.idle-timeout spring.activemq.pool.configuration.max-connections spring.activemq.pool.configuration.maximum-active-session-per-connection spring.activemq.pool.configuration.properties spring.activemq.pool.configuration.reconnect-on-exception spring.activemq.pool.configuration.time-between-expiration-check-millis spring.activemq.pool.configuration.use-anonymous-producers spring.application.index åº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡ ID é»˜è®¤æƒ…å†µä¸‹æ˜¯å”¯ä¸€çš„ spring.batch.initializer.enabled spring.batch.initialize-schema spring.cache.guava.spec ç”¨äºåˆ›å»ºç¼“å­˜çš„è§„èŒƒ spring.cache.hazelcast.config ç”¨äºåˆå§‹åŒ– Hazelcast çš„é…ç½®æ–‡ä»¶çš„ä½ç½® spring.data.cassandra.connect-timeout-millis spring.data. cassandra.connect-timeout spring.data.cassandra.read-timeout-millis spring.data.cassandra.read-timeout spring.data.cassandra.repositories.enabled spring.data.cassandra. repositories.type spring.data.couchbase.repositories.enabled spring.data.couchbase. repositories.type spring.data.mongodb.repositories.enabled spring.data.mongodb. repositories.type spring.data.neo4j.compiler ä» Neo4j 3 å¼€å§‹ä¸å†æ”¯æŒ spring.datasource.dbcp.access-to-underlying-connection-allowed spring.datasource.dbcp.connection-init-sqls spring.datasource.dbcp.default-auto-commit spring.datasource.dbcp.default-catalog spring.datasource.dbcp.default-read-only spring.datasource.dbcp.default-transaction-isolation spring.datasource.dbcp.driver-class-name spring.datasource.dbcp.initial-size spring.datasource.dbcp.log-abandoned spring.datasource.dbcp.login-timeout spring.datasource.dbcp.max-active spring.datasource.dbcp.max-idle spring.datasource.dbcp.max-open-prepared-statements spring.datasource.dbcp.max-wait spring.datasource.dbcp.min-evictable-idle-time-millis spring.datasource.dbcp.min-idle spring.datasource.dbcp.num-tests-per-eviction-run spring.datasource.dbcp.password spring.datasource.dbcp.pool-prepared-statements spring.datasource.dbcp.remove-abandoned spring.datasource.dbcp.remove-abandoned-timeout spring.datasource.dbcp.test-on-borrow spring.datasource.dbcp.test-on-return spring.datasource.dbcp.test-while-idle spring.datasource.dbcp.time-between-eviction-runs-millis spring.datasource.dbcp.url spring.datasource.dbcp.username spring.datasource.dbcp.validation-query spring.datasource.dbcp.validation-query-timeout spring.datasource.hikari.connection-customizer-class-name spring.datasource.initialize spring.datasource. initialization-mode spring.devtools.remote.debug.enabled è¿œç¨‹ debug å·²ä¸å†æ”¯æŒ spring.devtools.remote.debug.local-port è¿œç¨‹ debug å·²ä¸å†æ”¯æŒ spring.http.multipart.enabled spring.servlet.multipart.enabled spring.http.multipart.file-size-threshold spring.servlet.multipart.file-size-threshold spring.http.multipart.location spring.servlet.multipart.location spring.http.multipart.max-file-size spring.servlet.multipart.max-file-size spring.http.multipart.max-request-size spring.servlet. multipart.max-request-size spring.http.multipart.resolve-lazily spring.servlet.multipart.resolve-lazily spring.jpa.hibernate.naming.strategy Hibernate 4 çš„è‡ªåŠ¨é…ç½®å·²ä¸å†æä¾› spring.jta.atomikos.properties.console-log-level warn spring.messages.cache-seconds spring.messages.cache-duration spring.metrics.export.aggregate.key-pattern Metrics support ç°åœ¨ä½¿ç”¨åƒåˆ†å°º spring.metrics.export.aggregate.prefix Metrics support ç°åœ¨ä½¿ç”¨åƒåˆ†å°º spring.metrics.export.delay-millis Metrics support ç°åœ¨ä½¿ç”¨åƒåˆ†å°º spring.metrics.export.enabled Metrics support ç°åœ¨ä½¿ç”¨åƒåˆ†å°º spring.metrics.export.excludes Metrics support ç°åœ¨ä½¿ç”¨åƒåˆ†å°º spring.metrics.export.includes Metrics support ç°åœ¨ä½¿ç”¨åƒåˆ†å°º spring.metrics.export.redis.key Metrics support ç°åœ¨ä½¿ç”¨åƒåˆ†å°º spring.metrics.export.redis.prefix Metrics support ç°åœ¨ä½¿ç”¨åƒåˆ†å°º spring.metrics.export.send-latest Metrics support ç°åœ¨ä½¿ç”¨åƒåˆ†å°º spring.metrics.export.statsd.host management.metrics. export.statsd.host spring.metrics.export.statsd.port management.metrics. export.statsd.port spring.metrics.export.statsd.prefix Metrics support ç°åœ¨ä½¿ç”¨åƒåˆ†å°º spring.metrics.export.triggers Metrics support ç°åœ¨ä½¿ç”¨åƒåˆ†å°º spring.mobile.devicedelegatingviewresolver.enable-fallback false å¯ç”¨å¯¹å›é€€è§£å†³æ–¹æ¡ˆçš„æ”¯æŒ spring.mobile.devicedelegatingviewresolver.enabled false å¯ç”¨ device è§†å›¾è§£æå™¨ spring.mobile.devicedelegatingviewresolver.mobile-prefix mobile/ ç”¨äºæŸ¥çœ‹ç§»åŠ¨è®¾å¤‡åç§°çš„å‰ç¼€ spring.mobile.devicedelegatingviewresolver.mobile-suffix `` é™„åŠ åç¼€ä»¥æŸ¥çœ‹ç§»åŠ¨è®¾å¤‡çš„åç§° spring.mobile.devicedelegatingviewresolver.normal-prefix `` ç”¨äºæŸ¥çœ‹æ™®é€šè®¾å¤‡åç§°çš„å‰ç¼€. spring.mobile.devicedelegatingviewresolver.normal-suffix `` é™„åŠ åç¼€ä»¥æŸ¥çœ‹æ™®é€šè®¾å¤‡çš„åç§° spring.mobile.devicedelegatingviewresolver.tablet-prefix tablet/ å‰ç¼€é¢„è®¾ä¸ºæŸ¥çœ‹å¹³æ¿ç”µè„‘è®¾å¤‡çš„åç§° spring.mobile.devicedelegatingviewresolver.tablet-suffix `` é™„åŠ åç¼€ä»¥æŸ¥çœ‹å¹³æ¿ç”µè„‘è®¾å¤‡çš„åç§° spring.mobile.sitepreference.enabled true å¯ç”¨ SitePreferenceHandler. spring.mvc.media-types spring.mvc. contentnegotiation.media-types spring.rabbitmq.listener.acknowledge-mode spring.rabbitmq.listener.auto-startup spring.rabbitmq.listener.concurrency spring.rabbitmq.listener.default-requeue-rejected spring.rabbitmq.listener.idle-event-interval spring.rabbitmq.listener.max-concurrency spring.rabbitmq.listener.prefetch spring.rabbitmq.listener.retry.enabled false æ˜¯å¦å¯ç”¨å‘å¸ƒé‡è¯• spring.rabbitmq.listener.retry.initial-interval 1000 ç¬¬ä¸€æ¬¡å’Œç¬¬äºŒæ¬¡å°è¯•å‘å¸ƒæˆ–ä¼ é€’è®¯æ¯çš„æ—¶é—´é—´éš” spring.rabbitmq.listener.retry.max-attempts 3 å°è¯•å‘å¸ƒæˆ–ä¼ é€’é‚®ä»¶çš„æœ€å¤§æ¬¡æ•° spring.rabbitmq.listener.retry.max-interval 10000 å°è¯•ä¹‹é—´çš„æœ€å¤§é—´éš” spring.rabbitmq.listener.retry.multiplier 1 äºå…ˆå‰é‡è¯•é—´éš”çš„å€æ•° spring.rabbitmq.listener.retry.stateless true æ— è®ºé‡è¯•æ˜¯æ— çŠ¶æ€è¿˜æ˜¯æœ‰çŠ¶æ€ spring.rabbitmq.listener.transaction-size spring.redis.pool.max-active spring.redis.jedis.pool.max-idle spring.redis.pool.max-idle spring.redis.jedis.pool.max-idle spring.redis.pool.max-wait spring.redis.jedis.pool.max-wait spring.redis.pool.min-idle spring.redis.jedis.pool.min-idle spring.resources.cache-period spring.resources.cache.period spring.sendgrid.password ä¸å†æ”¯æŒä½¿ç”¨ç”¨æˆ·åå’Œå¯†ç  ( ä½¿ç”¨ spring.sendgrid.api-key ä»£æ›¿ ) spring.sendgrid.username ä¸å†æ”¯æŒä½¿ç”¨ç”¨æˆ·åå’Œå¯†ç  ( ä½¿ç”¨ spring.sendgrid.api-key ä»£æ›¿ ) spring.session.jdbc.initializer.enabled spring.session. jdbc.initialize-schema spring.session.mongo.collection-name spring.session.mongodb.collection-name spring.social.auto-connection-views false ä¸ºæ”¯æŒçš„ç”Ÿäº§è€…å¯ç”¨è¿æ¥çŠ¶æ€è§†å›¾ spring.social.facebook.app-id Application id. spring.social.facebook.app-secret Application secret. spring.social.linkedin.app-id Application id. spring.social.linkedin.app-secret Application secret. spring.social.twitter.app-id Application id. spring.social.twitter.app-secret Application secret. spring.thymeleaf.content-type spring.thymeleaf. servlet.content-type ç›¸å…³æ–‡ç« ç›¸å…³æ–‡ç« 1ã€Spring Boot 2.0ç³»åˆ—æ–‡ç« (ä¸€)ï¼šSpring Boot 2.0 è¿ç§»æŒ‡å— 2ã€Spring Boot 2.0ç³»åˆ—æ–‡ç« (äºŒ)ï¼šSpring Boot 2.0 æ–°ç‰¹æ€§è¯¦è§£ 3ã€Spring Boot 2.0ç³»åˆ—æ–‡ç« (ä¸‰)ï¼šSpring Boot 2.0 é…ç½®æ”¹å˜ 4ã€Spring Boot 2.0ç³»åˆ—æ–‡ç« (å››)ï¼šSpring Boot 2.0 æºç é˜…è¯»ç¯å¢ƒæ­å»º 5ã€Spring Boot 2.0ç³»åˆ—æ–‡ç« (äº”)ï¼šSpring Boot 2.0 é¡¹ç›®æºç ç»“æ„é¢„è§ˆ 6ã€Spring Boot 2.0ç³»åˆ—æ–‡ç« (å…­)ï¼šSpring boot 2.0 ä¸­ SpringBootApplication æ³¨è§£è¯¦è§£ æœ€åè‹±æ–‡å‚è€ƒï¼šhttps://github.com/spring-projects/spring-boot/wiki/Spring-Boot-2.0-Configuration-Changelog","tags":[{"name":"Java","slug":"Java","permalink":"http://yoursite.com/tags/Java/"},{"name":"SpringBoot","slug":"SpringBoot","permalink":"http://yoursite.com/tags/SpringBoot/"}]},{"title":"å†™è¿™ä¹ˆå¤šç³»åˆ—åšå®¢ï¼Œæ€ªä¸å¾—æ‰¾ä¸åˆ°å¥³æœ‹å‹","date":"2018-03-26T16:00:00.000Z","path":"2018/03/27/blogs/","text":"å‰æå¥½å‡ å‘¨æ²¡æ›´æ–°åšå®¢äº†ï¼Œå¯¹ä¸æ–­æ”¯æŒæˆ‘åšå®¢çš„ç«¥é‹ä»¬è¯´å£°ï¼šâ€œæŠ±æ­‰äº†ï¼â€ã€‚è‡ªå·±è¿™æ®µæ—¶é—´ç¡®å®æ¯”è¾ƒå¿™ï¼Œè€Œä¸”è¿˜åœ¨æŠ½ç©ºå®Œæˆå­¦æ ¡çš„æ¯•ä¸šè®¾è®¡ã€‚ä»Šå¤©æ™šä¸ŠæŠ½ç©ºæŠŠå¤§å­¦æœŸé—´å†™è¿‡çš„åšå®¢å¼„ä¸€ä¸ªç³»åˆ—æ–‡ç« åˆé›†ï¼Œç®—æ˜¯å¯¹å¤§å­¦è¿™å››å¹´çš„ä¸€ä¸ªæ€»ç»“ï¼Œè¯æ˜è‡ªå·±æ²¡ç™½è¿‡ã€‚ ç†Ÿæ‚‰æˆ‘çš„äººéƒ½çŸ¥é“æˆ‘å†™åšå®¢çš„æ—¶é—´æ¯”è¾ƒæ—©ï¼Œè€Œä¸”åšæŒçš„æ—¶é—´ä¹Ÿæ¯”è¾ƒä¹…ï¼Œä¸€ç›´åˆ°ç°åœ¨ä¹Ÿæ˜¯ä¸€ç›´ä¿æŒç€æ›´æ–°çŠ¶æ€ã€‚æœ€æ—©æœ€æ—©å¼€å§‹å†™åšå®¢æ˜¯åœ¨ CSDN ä¸Šå†™çš„ï¼Œç„¶ååœ¨ç®€ä¹¦ä¹Ÿå†™è¿‡ä¸€æ®µæ—¶é—´ï¼Œåæ¥æ”¾å¼ƒäº†ç®€ä¹¦è½¬æˆ˜äº†æ˜é‡‘ï¼Œä»¥ä¸‹å›¾ç‰‡æ˜¯è‡ªå·±åœ¨æ˜é‡‘è¿™ä¸€å¹´çš„æˆæœï¼Œå¿« 1.5 ä¸‡å…³æ³¨äº†ï¼Œå“ˆå“ˆå“ˆã€‚ å»å¹´è¿‡å¹´å‰è¿˜æ”¶åˆ°æ˜é‡‘é€æ¥çš„ä¸“å±ç¤¼ç‰©ï¼ŒçœŸæ˜¯æ¿€åŠ¨ï¼Œæ„Ÿè°¢æ˜é‡‘ï¼Œå¸Œæœ›è¶ŠåŠè¶Šå¥½ï¼ ç»†æ•°æ–‡ç« åï¼Œå‘ç°è‡ªå·±åœ¨å®ä¹ çš„è¿™æ®µæ—¶é—´å†™çš„åšå®¢ä¹ŸæŒºå¤šçš„ï¼Œè€Œä¸”è´¨é‡è¿˜æ¯”è¾ƒé«˜ï¼Œç»å¸¸ä¸Šå¼€å‘è€…å¤´æ¡ã€æ˜é‡‘ç­‰å¹³å°çš„é¦–é¡µæ¨èã€‚åœ¨æ­¤ï¼Œæ„Ÿè°¢å®ä¹ æœŸé—´ç»„å†…å¤§ä½¬ä»¬çš„å„ç§å¸®åŠ©ï¼ è¿™é‡Œå†æ¬¡è¯´ä¸‹å†™åšå®¢çš„å¥½å¤„ï¼š å¾ˆå¥½çš„ç”¨æ¥æ€»ç»“è‡ªå·±æ‰€å­¦çš„çŸ¥è¯† é‡åˆ°é‚£ä¹ˆä¸€ç¾¤ä¹Ÿå†™åšå®¢çš„å¤§ä½¬ï¼Œæœ‰å…±åŒè¯é¢˜èŠäº† é¢è¯•åŠ åˆ†ï¼ˆåœ¨ç®€å†ä¸Šæ”¾ä¸Šè‡ªå·±çš„ä¸ªäººç½‘ç«™é“¾æ¥ï¼Œé¢è¯•å®˜å°±å¯ä»¥æ›´å¥½çš„äº†è§£ä½ ï¼ŒçŸ¥é“ä½ æ‰€å­¦çŸ¥è¯†çš„æ·±åº¦å’Œå¹¿åº¦ï¼‰ ä¸è¦å°çœ‹ä½ çš„æ¯ä¸€ç¯‡ä¸èµ·çœ¼åšå®¢ï¼Œç”¨ä¸€ä¸ªèš‚èšé‡‘æœå¤§ä½¬è·Ÿæˆ‘è¯´çš„è¯å«åšï¼šåšç§¯è–„å‘ï¼ ä¸å¤šè¯´äº†ï¼Œå¦‚æœæƒ³å’Œæˆ‘äº¤æµçš„å¯ä»¥åŠ æˆ‘ qq ç¾¤ï¼š528776268 å’Œæˆ‘çš„å¾®ä¿¡ï¼šzhisheng_tian å…³æ³¨æˆ‘ è½¬è½½è¯·åŠ¡å¿…æ³¨æ˜åŸåˆ›åœ°å€ä¸ºï¼šhttp://www.54tianzhisheng.cn/2018/03/27/blogs/ ç³»åˆ—æ–‡ç« åˆé›†Spring Boot ç³»åˆ—æ–‡ç« 1ã€Spring Bootç³»åˆ—æ–‡ç« ï¼ˆä¸€ï¼‰ï¼šSpringBoot Kafka æ•´åˆä½¿ç”¨ 2ã€Spring Bootç³»åˆ—æ–‡ç« ï¼ˆäºŒï¼‰ï¼šSpringBoot Admin ä½¿ç”¨æŒ‡å— 3ã€Spring Bootç³»åˆ—æ–‡ç« ï¼ˆä¸‰ï¼‰ï¼šSpringBoot RabbitMQ æ•´åˆä½¿ç”¨ 4ã€Spring Bootç³»åˆ—æ–‡ç« ï¼ˆå››ï¼‰ï¼šSpringBoot ActiveMQ æ•´åˆä½¿ç”¨ 5ã€Spring Bootç³»åˆ—æ–‡ç« ï¼ˆäº”ï¼‰ï¼šSpringBoot RabbitMQ æ•´åˆè¿›é˜¶ç‰ˆ 6ã€Spring Bootç³»åˆ—æ–‡ç« ï¼ˆå…­ï¼‰ï¼šSpringBoot RocketMQ æ•´åˆä½¿ç”¨å’Œç›‘æ§ 7ã€æ›´å¤šè¯·æœŸå¾… Spring Boot 2.0 ç³»åˆ—æ–‡ç« 1ã€Spring Boot 2.0ç³»åˆ—æ–‡ç« (ä¸€)ï¼šSpring Boot 2.0 è¿ç§»æŒ‡å— 2ã€Spring Boot 2.0ç³»åˆ—æ–‡ç« (äºŒ)ï¼šSpring Boot 2.0 æ–°ç‰¹æ€§è¯¦è§£ 3ã€åé¢ç»å¯¹æœ‰æ›´å¤šæ–‡ç« å‡ºç°çš„ Docker ç³»åˆ—æ–‡ç« 1ã€Dockerç³»åˆ—æ–‡ç« ï¼ˆä¸€ï¼‰ï¼šåŸºäº Harbor æ­å»º Docker ç§æœ‰é•œåƒä»“åº“ 2ã€Dockerç³»åˆ—æ–‡ç« ï¼ˆäºŒï¼‰ï¼šMac å®‰è£… Docker åŠå¸¸ç”¨å‘½ä»¤ 3ã€åŒæ ·ï¼Œåé¢ä¹Ÿä¼šæŒç»­æ›´æ–° ElasticSearch ç³»åˆ—æ–‡ç« 1ã€Elasticsearch ç³»åˆ—æ–‡ç« ï¼ˆä¸€ï¼‰ï¼šElasticsearch é»˜è®¤åˆ†è¯å™¨å’Œä¸­åˆ†åˆ†è¯å™¨ä¹‹é—´çš„æ¯”è¾ƒåŠä½¿ç”¨æ–¹æ³• 2ã€ Elasticsearch ç³»åˆ—æ–‡ç« ï¼ˆäºŒï¼‰ï¼šå…¨æ–‡æœç´¢å¼•æ“ Elasticsearch é›†ç¾¤æ­å»ºå…¥é—¨æ•™ç¨‹ 3ã€Elasticsearch ç³»åˆ—æ–‡ç« ï¼ˆä¸‰ï¼‰ï¼šElasticSearch é›†ç¾¤ç›‘æ§ 4ã€Elasticsearch ç³»åˆ—æ–‡ç« ï¼ˆå››ï¼‰ï¼šElasticSearch å•ä¸ªèŠ‚ç‚¹ç›‘æ§ 5ã€Elasticsearch ç³»åˆ—æ–‡ç« ï¼ˆäº”ï¼‰ï¼šELK å®æ—¶æ—¥å¿—åˆ†æå¹³å°ç¯å¢ƒæ­å»º 6ã€ä¹Ÿæœ‰æ›´å¤šæ·±å…¥çš„æ–‡ç«  æ­å»ºåšå®¢ç³»åˆ—æ–‡ç« 1ã€åˆ©ç”¨Github Page æ­å»ºä¸ªäººåšå®¢ç½‘ç«™ 2ã€Github pages + Hexo åšå®¢ yilia ä¸»é¢˜ä½¿ç”¨ç•…è¨€è¯„è®ºç³»ç»Ÿ 3ã€Hexo + yilia æ­å»ºåšå®¢å¯èƒ½ä¼šé‡åˆ°çš„æ‰€æœ‰ç–‘é—® 4ã€Hexo + yilia ä¸»é¢˜å®ç°æ–‡ç« ç›®å½• 5ã€è¿™ä¸ªç³»åˆ—çœ‹æƒ…å†µï¼Œå¯èƒ½è¿˜ä¼šæœ‰ Java ç³»åˆ—æ–‡ç« 1ã€å…³äºString s = new String(â€œxyzâ€); åˆ›å»ºå‡ ä¸ªå¯¹è±¡çš„é—®é¢˜ 2ã€ã€ŠJava å¤šçº¿ç¨‹ç¼–ç¨‹æ ¸å¿ƒæŠ€æœ¯ã€‹å­¦ä¹ ç¬”è®°åŠæ€»ç»“ 3ã€ä»å¯¹è±¡æ·±å…¥åˆ†æ Java ä¸­å®ä¾‹å˜é‡å’Œç±»å˜é‡çš„åŒºåˆ« 4ã€æ·±åº¦æ¢ç©¶Java ä¸­ finally è¯­å¥å— 5ã€è§£å†³jdk1.8ä¸­å‘é€é‚®ä»¶å¤±è´¥ï¼ˆhandshake_failureï¼‰é—®é¢˜ 6ã€æ·±å…¥åˆ†æ Java Web ä¸­çš„ä¸­æ–‡ç¼–ç é—®é¢˜ 7ã€å¥‡æ€ªçš„Javaé¢˜ï¼šä¸ºä»€ä¹ˆ128 == 128è¿”å›ä¸ºFalseï¼Œè€Œ127 == 127ä¼šè¿”å›ä¸ºTrue? 8ã€Javaè¯»å–æ–‡ä»¶ 9ã€HashMapã€Hashtableã€HashSet å’Œ ConcurrentHashMap çš„æ¯”è¾ƒ 10ã€Javaè¿æ¥Oracleæ•°æ®åº“çš„ä¸‰ç§è¿æ¥æ–¹å¼ 11ã€Java NIO ç³»åˆ—æ•™ç¨‹ 12ã€ã€Šç–¯ç‹‚ Java çªç ´ç¨‹åºå‘˜åŸºæœ¬åŠŸçš„ 16 è¯¾ã€‹è¯»ä¹¦ç¬”è®° 13ã€è¯¦ç»†æ·±å…¥åˆ†æ Java ClassLoader å·¥ä½œæœºåˆ¶ 14ã€è¯¦è§£ Filter è¿‡æ»¤å™¨ 15ã€Java IOæµå­¦ä¹ è¶…è¯¦ç»†æ€»ç»“ï¼ˆå›¾æ–‡å¹¶èŒ‚ï¼‰ 16ã€é€šè¿‡æºç è¯¦è§£ Servlet 17ã€Java æ€§èƒ½è°ƒä¼˜éœ€è¦æ ¼å¤–æ³¨æ„çš„ç»†èŠ‚ 18ã€Java çº¿ç¨‹æ± è‰ºæœ¯æ¢ç´¢ 19ã€JVMæ€§èƒ½è°ƒä¼˜ç›‘æ§å·¥å…·jpsã€jstackã€jmapã€jhatã€jstatç­‰ä½¿ç”¨è¯¦è§£ 20ã€è¿™ä¸ªå¿…é¡»çš„æŒç»­æ›´æ–°ä¸‹å» Maven ç³»åˆ—æ–‡ç« 1ã€Centos7 æ­å»ºæœ€æ–° Nexus3 Maven ç§æœ 2ã€Maven ä¸­ dependencies ä¸ dependencyManagement çš„åŒºåˆ« Kafka ç³»åˆ—æ–‡ç« 1ã€Kafka å®‰è£…åŠå¿«é€Ÿå…¥é—¨ 2ã€Spring Bootç³»åˆ—æ–‡ç« ï¼ˆä¸€ï¼‰ï¼šSpringBoot Kafka æ•´åˆä½¿ç”¨ Mybatis ç³»åˆ—æ–‡ç« 1ã€é€šè¿‡é¡¹ç›®é€æ­¥æ·±å…¥äº†è§£Mybatis&lt;ä¸€&gt; 2ã€é€šè¿‡é¡¹ç›®é€æ­¥æ·±å…¥äº†è§£Mybatis&lt;äºŒ&gt; 3ã€é€šè¿‡é¡¹ç›®é€æ­¥æ·±å…¥äº†è§£Mybatis&lt;ä¸‰&gt; 4ã€é€šè¿‡é¡¹ç›®é€æ­¥æ·±å…¥äº†è§£Mybatisï¼ˆå››)/) 5ã€MyBatisçš„foreachè¯­å¥è¯¦è§£ 6ã€æœŸå¾…å®ƒçš„æºç è§£ææ–‡ç« å—ï¼Ÿ Nginx ç³»åˆ—æ–‡ç« 1ã€Ubuntu16.10 å®‰è£… Nginx 2ã€Nginx åŸºæœ¬çŸ¥è¯†å¿«é€Ÿå…¥é—¨ Python çˆ¬è™«ç³»åˆ—æ–‡ç« 1ã€Pythonçˆ¬è™«å®æˆ˜ä¹‹çˆ¬å–ç™¾åº¦è´´å§å¸–å­ 2ã€Pyspideræ¡†æ¶ â€”â€” Pythonçˆ¬è™«å®æˆ˜ä¹‹çˆ¬å– V2EX ç½‘ç«™å¸–å­ 3ã€Pythonçˆ¬è™«å®æˆ˜ä¹‹çˆ¬å–ç³—äº‹ç™¾ç§‘æ®µå­ 4ã€è¿™ä¸ªä¼°è®¡å¾—ç­‰æœ‰æœºä¼šå†æ¬¡å­¦ Python æ—¶å†å†™ RocketMQ ç³»åˆ—æ–‡ç« 1ã€RocketMQç³»åˆ—æ–‡ç« ï¼ˆä¸€ï¼‰ï¼šRocketMQ åˆæ¢ 2ã€RocketMQç³»åˆ—æ–‡ç« ï¼ˆäºŒï¼‰ï¼šRocketMQ å®‰è£…åŠå¿«é€Ÿå…¥é—¨ 3ã€RocketMQç³»åˆ—æ–‡ç« ï¼ˆä¸‰ï¼‰ï¼šRocketMQ ç®€å•çš„æ¶ˆæ¯ç¤ºä¾‹ 4ã€Spring Bootç³»åˆ—æ–‡ç« ï¼ˆå…­ï¼‰ï¼šSpringBoot RocketMQ æ•´åˆä½¿ç”¨å’Œç›‘æ§ Spring MVC ç³»åˆ—æ–‡ç« 1ã€Spring MVCç³»åˆ—æ–‡ç« ï¼ˆä¸€ï¼‰ï¼šSpring MVC + Hibernate JPA + Bootstrap æ­å»ºçš„åšå®¢ç³»ç»Ÿ Demo 2ã€Spring MVCç³»åˆ—æ–‡ç« ï¼ˆäºŒï¼‰ï¼šSpring MVC+Hibernate JPAæ­å»ºçš„åšå®¢ç³»ç»Ÿé¡¹ç›®ä¸­æ‰€é‡åˆ°çš„å‘ 3ã€Spring MVCç³»åˆ—æ–‡ç« ï¼ˆä¸‰ï¼‰ï¼šçœ‹é€ Spring MVC æºä»£ç åˆ†æä¸å®è·µ â€”â€” ç½‘ç«™åŸºç¡€çŸ¥è¯† 4ã€Spring MVCç³»åˆ—æ–‡ç« ï¼ˆå››ï¼‰ï¼šçœ‹é€ Spring MVC æºä»£ç åˆ†æä¸å®è·µ â€”â€” ä¿¯è§† Spring MVC 5ã€Spring MVCç³»åˆ—æ–‡ç« ï¼ˆäº”ï¼‰ï¼šçœ‹é€ Spring MVC æºä»£ç åˆ†æä¸å®è·µ â€”â€” Spring MVC ç»„ä»¶åˆ†æ 6ã€é€šè¿‡é¡¹ç›®é€æ­¥æ·±å…¥äº†è§£Spring MVCï¼ˆä¸€ï¼‰ Netty ç³»åˆ—æ–‡ç« 1ã€Nettyç³»åˆ—æ–‡ç« ï¼ˆä¸€ï¼‰ï¼šNetty æºç é˜…è¯»ä¹‹åˆå§‹ç¯å¢ƒæ­å»º 2ã€è¿™ä¸ªç³»åˆ—è¿Ÿæ—©ä¼šæ›´æ–°çš„ã€‚ å‰ç«¯ç³»åˆ—æ–‡ç« 1ã€Bootstrapå…¥é—¨éœ€æŒæ¡çš„çŸ¥è¯†ç‚¹ï¼ˆä¸€ï¼‰ 2ã€Bootstrapå…¥é—¨éœ€æŒæ¡çš„çŸ¥è¯†ç‚¹ï¼ˆäºŒï¼‰ 3ã€ä½¿ç”¨ CodeMirror æ‰“é€ å±äºè‡ªå·±çš„åœ¨çº¿ä»£ç ç¼–è¾‘å™¨ 4ã€AJAX å­¦ä¹  5ã€å‰ç«¯æ¸£æ¸£è¿™ä¸ªä¹Ÿè¦æ…¢æ…¢å­¦ä¹ è¿™å— é¢è¯•ç»éªŒç³»åˆ—1ã€ç§‹æ‹›ç¬¬ä¸€ç«™ â€”â€” äºšä¿¡ç§‘æŠ€ 2ã€ç§‹æ‹›ç¬¬äºŒç«™ â€”â€” å†…æ¨çˆ±å¥‡è‰ºï¼ˆä¸€é¢äºŒé¢ï¼‰ 3ã€ç§‹æ‹›ç¬¬ä¸‰ç«™ â€”â€” å†…æ¨é˜¿é‡Œï¼ˆä¸€é¢ï¼‰ 4ã€ é¢è¯•è¿‡é˜¿é‡Œç­‰äº’è”ç½‘å¤§å…¬å¸ï¼Œæˆ‘çŸ¥é“äº†è¿™äº›å¥—è·¯ 5ã€é‚£äº›å¹´æˆ‘çœ‹è¿‡çš„ä¹¦ â€”â€” è‡´æ•¬æˆ‘çš„å¤§å­¦ç”Ÿæ´» â€”â€” Say Good Bye ï¼ å…¶ä»–è¿˜æœ‰ä¸€äº›å…¶ä»–æ–¹é¢çš„æŠ€æœ¯æ–‡ç« ï¼Œç®—ä¸æ˜¯ç³»åˆ—æ–‡ç« ï¼Œæ¯”è¾ƒé›¶æ•£ï¼Œè¿˜æœ‰å°±æ˜¯ä¸€äº›éšç¬”æ–‡ç« ï¼Œå°±ä¸æŠŠå®ƒä»¬æ”¾åœ¨åˆé›†é‡Œäº†ã€‚ æ€»ç»“ç”¨è‡ªå·±çš„ä¸€å¥è¯ï¼šå‘è¦ä¸€ä¸ªä¸ªå¡«ï¼Œè·¯è¦ä¸€æ­¥æ­¥èµ°ï¼å‰äººæ ½æ ‘ï¼Œåäººä¹˜å‡‰ï¼Œå­¦ä¼šæ„Ÿæ©ï¼ å»ºäº†ä¸ªä¸é”™çš„å¾®ä¿¡ç¾¤ï¼Œå¦‚æœæœ‰æ„Ÿå…´è¶£çš„å¯ä»¥åŠ æˆ‘å¾®ä¿¡ï¼Œå¯¹æˆ‘å›å¤ åŠ ç¾¤ ï¼Œç„¶åä¼šæ‹‰ä½ è¿›ç¾¤äº¤æµã€‚","tags":[{"name":"åšå®¢åˆé›†","slug":"åšå®¢åˆé›†","permalink":"http://yoursite.com/tags/åšå®¢åˆé›†/"}]},{"title":"Spring Boot 2.0ç³»åˆ—æ–‡ç« (ä¸€)ï¼šSpring Boot 2.0 è¿ç§»æŒ‡å—","date":"2018-03-05T16:00:00.000Z","path":"2018/03/06/SpringBoot2-Migration-Guide/","text":"å‰æå¸Œæœ›æœ¬æ–‡æ¡£å°†å¸®åŠ©æ‚¨æŠŠåº”ç”¨ç¨‹åºè¿ç§»åˆ° Spring Boot 2.0ã€‚ å…³æ³¨æˆ‘ è½¬è½½è¯·åŠ¡å¿…æ³¨æ˜åŸåˆ›åœ°å€ä¸ºï¼šhttp://www.54tianzhisheng.cn/2018/03/06/SpringBoot2-Migration-Guide/ åœ¨ä½ å¼€å§‹ä¹‹å‰é¦–å…ˆï¼ŒSpring Boot 2.0 éœ€è¦ Java 8 æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚ä¸å†æ”¯æŒ Java 6 å’Œ 7 äº†ã€‚ åœ¨ Spring Boot 2.0 ä¸­ï¼Œè®¸å¤šé…ç½®å±æ€§è¢«é‡æ–°å‘½å/åˆ é™¤ï¼Œå¼€å‘äººå‘˜éœ€è¦æ›´æ–°application.properties/ application.ymlç›¸åº”çš„é…ç½®ã€‚ä¸ºäº†å¸®åŠ©ä½ è§£å†³è¿™ä¸€é—®é¢˜ï¼ŒSpring Boot å‘å¸ƒäº†ä¸€ä¸ªæ–°spring-boot-properties-migratoræ¨¡å—ã€‚ä¸€æ—¦ä½œä¸ºè¯¥æ¨¡å—ä½œä¸ºä¾èµ–è¢«æ·»åŠ åˆ°ä½ çš„é¡¹ç›®ä¸­ï¼Œå®ƒä¸ä»…ä¼šåˆ†æåº”ç”¨ç¨‹åºçš„ç¯å¢ƒï¼Œè€Œä¸”è¿˜ä¼šåœ¨å¯åŠ¨æ—¶æ‰“å°è¯Šæ–­ä¿¡æ¯ï¼Œè€Œä¸”è¿˜ä¼šåœ¨è¿è¡Œæ—¶ä¸ºæ‚¨æš‚æ—¶è¿ç§»å±æ€§ã€‚åœ¨æ‚¨çš„åº”ç”¨ç¨‹åºè¿ç§»æœŸé—´ï¼Œè¿™ä¸ªæ¨¡å—æ˜¯å¿…å¤‡çš„ï¼š 1234&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-properties-migrator&lt;/artifactId&gt;&lt;/dependency&gt; æ³¨æ„ï¼šå®Œæˆè¿ç§»åï¼Œè¯·ç¡®ä¿ä»é¡¹ç›®çš„ä¾èµ–å…³ç³»ä¸­åˆ é™¤æ­¤æ¨¡å—ã€‚ æ„å»ºæ‚¨çš„ Spring Boot åº”ç”¨ç¨‹åºSpring Boot Maven æ’ä»¶ä¸ºäº†ä¿æŒäº†ä¸€è‡´æ€§ï¼Œå¹¶ä¸”é¿å…ä¸å…¶ä»–æ’ä»¶å‘ç”Ÿå†²çªï¼Œç°åœ¨æš´éœ²çš„æ’ä»¶é…ç½®å±æ€§éƒ½ä»¥ä¸€ä¸ªspring-bootå‰ç¼€å¼€å§‹ã€‚ ä¾‹å¦‚ï¼Œä»¥ä¸‹å‘½ä»¤prodä½¿ç”¨å‘½ä»¤è¡Œå¯ç”¨é…ç½®æ–‡ä»¶ 1mvn spring-boot:run -Dspring-boot.run.profiles=prod Surefire é»˜è®¤å€¼ä»¥å‰çš„ include/exclude æ¨¡å¼å·²ä¸æœ€æ–°çš„ Surefire é»˜è®¤è®¾ç½®ä¿æŒä¸€è‡´ã€‚å¦‚æœä¾èµ–äºæ­¤æ’ä»¶ï¼Œéœ€è¦ç›¸åº”åœ°æ›´æ–°æ’ä»¶é…ç½®ã€‚ä¹‹å‰å¯¹åº”çš„é…ç½®å¦‚ä¸‹ï¼š 12345678910111213&lt;plugin&gt; &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt; &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt; &lt;configuration&gt; &lt;includes&gt; &lt;include&gt;**/*Tests.java&lt;/include&gt; &lt;include&gt;**/*Test.java&lt;/include&gt; &lt;/includes&gt; &lt;excludes&gt; &lt;exclude&gt;**/Abstract*.java&lt;/exclude&gt; &lt;/excludes&gt; &lt;/configuration&gt;&lt;/plugin&gt; PS: å¦‚æœæ‚¨ä½¿ç”¨ JUnit 5ï¼Œåˆ™åº”å°† Surefire é™çº§åˆ° 2.19.1ã€‚è¯¥**/*Tests.javaç‰ˆæœ¬ä¸åŒ…å«æ­¤æ¨¡å¼ï¼Œå› æ­¤å¦‚æœæ‚¨ä¾èµ–è¯¥æ¨¡å¼ï¼Œè¯·ç¡®ä¿å°†å…¶æ·»åŠ åˆ°æ‚¨çš„é…ç½®ä¸­ã€‚ Spring Boot Gradle æ’ä»¶Spring Boot çš„ Gradle æ’ä»¶åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šå·²è¢«é‡å†™ï¼Œæœ‰äº†é‡å¤§çš„æ”¹è¿›ã€‚æ‚¨å¯ä»¥åœ¨å…¶å‚è€ƒæ–‡çŒ®å’ŒAPIæ–‡æ¡£ä¸­é˜…è¯»å…³äºæ’ä»¶åŠŸèƒ½çš„æ›´å¤šä¿¡æ¯ã€‚ ä¾èµ–ç®¡ç†Spring Boot çš„ Gradle æ’ä»¶ä¸å†è‡ªåŠ¨åº”ç”¨ä¾èµ–ç®¡ç†æ’ä»¶ã€‚ç›¸åï¼ŒSpring Boot çš„æ’ä»¶ç°åœ¨å¯ä»¥é€šè¿‡å¯¼å…¥æ­£ç¡®ç‰ˆæœ¬çš„spring-boot-dependencies BOM æ¥åº”ç”¨ä¾èµ–ç®¡ç†æ’ä»¶ã€‚å½“ä¾èµ–ç®¡ç†è¢«é…ç½®çš„æ—¶å€™ï¼Œè¿™ä¸€ç‚¹ä¼šè®©ä½ æœ‰æ›´å¤šçš„æ§åˆ¶æƒã€‚ å¯¹äºå¤§å¤šæ•°åº”ç”¨ç¨‹åºï¼Œä½¿ç”¨åº”ç”¨ä¾èµ–ç®¡ç†æ’ä»¶å°±è¶³å¤Ÿäº†ï¼š 12apply plugin: &apos;org.springframework.boot&apos;apply plugin: &apos;io.spring.dependency-management&apos; // &lt;-- add this to your build.gradle æ³¨æ„ï¼šä¾èµ–ç®¡ç†æ’ä»¶ä»ç„¶æ˜¯ spring-boot-gradle-plugin çš„ä¼ é€’ä¾èµ–é¡¹ï¼Œæ‰€ä»¥ä¸éœ€è¦åœ¨ buildscript é…ç½®ä¸­å°†å…¶åˆ—ä¸ºç±»è·¯å¾„ä¾èµ–é¡¹ã€‚ å»ºç«‹å¯æ‰§è¡Œçš„ Jars å’Œ Wars bootRepackage ä»»åŠ¡å·²ç»è¢«æ›¿æ¢æˆ bootJar å’Œ bootWar ä»»åŠ¡ï¼Œåˆ†åˆ«ç”¨äºæ„å»ºå¯æ‰§è¡Œçš„ jar åŒ…å’Œ waråŒ…ã€‚ é…ç½®æ›´æ–°BootRunï¼ŒBootJarå’ŒBootWarä»»åŠ¡ç°åœ¨éƒ½ä½¿ç”¨mainClassNameçš„å±æ€§æ¥é…ç½®ä¸»ç±»çš„åç§°ã€‚è¿™ä½¿å¾—ä¸‰ä¸ªç‰¹å®šäºå¼•å¯¼çš„ä»»åŠ¡ç›¸äº’ä¸€è‡´ï¼Œå¹¶å°†å…¶ä¸ Gradle è‡ªå·±çš„åº”ç”¨ç¨‹åºæ’ä»¶è¿›è¡Œå¯¹é½ã€‚ Spring Boot ç‰¹æ€§é»˜è®¤åŠ¨æ€ä»£ç†ç­–ç•¥Spring Boot é»˜è®¤ä½¿ç”¨ CGLIB åšåŠ¨æ€ä»£ç†ä»£ç†(åŸºäºç±»çš„åŠ¨æ€ä»£ç†)ï¼ŒåŒ…æ‹¬å¯¹ AOP çš„æ”¯æŒã€‚å¦‚æœä½ éœ€è¦åŸºäºæ¥å£çš„åŠ¨æ€ä»£ç†ï¼Œä½ éœ€è¦å°†spring.aop.proxy-target-class è®¾ç½®ä¸ºfalseã€‚ SpringApplicationWeb ç¯å¢ƒSpring Boot åº”ç”¨ç¨‹åºç°åœ¨å¯ä»¥åœ¨æ›´å¤šæ¨¡å¼ä¸‹è¿è¡Œï¼Œå› æ­¤spring.main.web-environmentç°åœ¨ä¸æ¨èä½¿ç”¨ï¼Œspring.main.web-application-typeå±æ€§å¯ä»¥æä¾›æ›´å¤šçš„æ”¯æŒã€‚ å¦‚æœæ‚¨æƒ³ç¡®ä¿åº”ç”¨ç¨‹åºä¸å¯åŠ¨ Web æœåŠ¡å™¨ï¼Œåˆ™å¿…é¡»å°†è¯¥å±æ€§æ›´æ”¹ä¸ºï¼š 1spring.main.web-application-type=none æ³¨æ„ï¼šå¯ä»¥é€šè¿‡ SpringApplication çš„ setWebApplicationType æ–¹æ³•å®ç°ã€‚ Spring Boot åº”ç”¨ç¨‹åºäº‹ä»¶æ›´æ”¹æˆ‘ä»¬å·²ç»æ·»åŠ äº†ä¸€ä¸ªæ–°äº‹ä»¶ApplicationStartedEventã€‚ ApplicationStartedEventåœ¨ä¸Šä¸‹æ–‡åˆ·æ–°ä¹‹åä½†åœ¨ä»»ä½•åº”ç”¨ç¨‹åºå’Œå‘½ä»¤è¡Œå‚æ•°è¢«è°ƒç”¨ä¹‹å‰å‘é€ã€‚ ApplicationReadyEventåœ¨ä»»ä½•åº”ç”¨ç¨‹åºå’Œå‘½ä»¤è¡Œå‚æ•°è¢«è°ƒç”¨åå‘é€ã€‚å®ƒè¡¨ç¤ºåº”ç”¨ç¨‹åºå·²å‡†å¤‡å¥½ä¸ºè¯·æ±‚æä¾›æœåŠ¡ã€‚ è¯·å‚é˜…æ›´æ–°çš„å‚è€ƒæ–‡æ¡£ã€‚ Banneråœ¨æˆ‘ä»¬é™åˆ¶ Spring Boot ä½¿ç”¨çš„æ ¹åç§°ç©ºé—´çš„æ•°é‡çš„è¿‡ç¨‹ä¸­ï¼Œä¸æ ‡å¿—ç›¸å…³çš„å±æ€§å·²è¢«é‡å®šä½åˆ°spring.bannerã€‚ å¤–éƒ¨åŒ–é…ç½®è½»æ¾çš„ç»‘å®šæœ‰å…³å®½æ¾ç»‘å®šçš„è§„åˆ™å·²ç»æ”¶ç´§ã€‚æˆ‘ä»¬å‡è®¾ä¸€ä¸ªç°æœ‰çš„acme.my-project.my-nameå±æ€§ï¼š æ‰€æœ‰å‰ç¼€å¿…é¡»æ˜¯ kebabæ ¼å¼ï¼ˆå°å†™ï¼Œè¿å­—ç¬¦åˆ†éš”ï¼‰acme.myProjectæˆ–acme.my_projectæ— æ•ˆ - æ‚¨å¿…é¡»acme.my-projectåœ¨æ­¤å¤„ä½¿ç”¨ã€‚ å±æ€§åç§°å¯ä»¥ä½¿ç”¨ kebab-caseï¼ˆmy-nameï¼‰ï¼Œcamel-caseï¼ˆmyNameï¼‰æˆ– snake-caseï¼ˆmy_nameï¼‰ã€‚ ç¯å¢ƒå±æ€§ï¼ˆæ¥è‡ªæ“ä½œç³»ç»Ÿç¯å¢ƒå˜é‡ï¼‰å¿…é¡»ä½¿ç”¨é€šå¸¸çš„å¤§å†™ä¸‹åˆ’çº¿æ ¼å¼ï¼Œä¸‹åˆ’çº¿åªèƒ½ç”¨äºåˆ†éš”é”®çš„å„ä¸ªéƒ¨åˆ†ACME_MYPROJECT_MYNAMEã€‚ è¿™ç§æ–°çš„æ”¾æ¾ç»‘å®šå…·æœ‰ä»¥ä¸‹å‡ ä¸ªä¼˜ç‚¹ï¼š æ— éœ€æ‹…å¿ƒå¯†é’¥çš„ç»“æ„@ConditionalOnPropertyï¼šåªè¦å¯†é’¥æ˜¯ä»¥è§„èŒƒæ ¼å¼å®šä¹‰çš„ï¼Œæ”¯æŒçš„æ¾æ•£å˜ä½“å°±å¯ä»¥é€æ˜åœ°å·¥ä½œã€‚å¦‚æœæ‚¨æ­£åœ¨ä½¿ç”¨è¯¥prefixå±æ€§ï¼Œåˆ™ç°åœ¨åªéœ€ä½¿ç”¨nameæˆ–valueå±æ€§å³å¯æ”¾ç½®å®Œæ•´å¯†é’¥ã€‚ RelaxedPropertyResolverä¸å†å¯ä»¥Environmentè‡ªåŠ¨å¤„ç†ï¼šenv.getProperty(&quot;com.foo.my-bar&quot;)å°†æ‰¾åˆ°ä¸€ä¸ªcom.foo.myBarå±æ€§ã€‚ è¯¥org.springframework.boot.bindè½¯ä»¶åŒ…ä¸å†å¯ç”¨ï¼Œå¹¶è¢«æ–°çš„å®½æ¾ç»‘å®šè§„åˆ™æ‰€å–ä»£ã€‚ç‰¹åˆ«æ˜¯ï¼ŒRelaxedDataBinderæœ‹å‹å·²è¢«æ–°çš„BinderAPI å–ä»£ã€‚ä»¥ä¸‹æ ·å“MyPropertiesä»app.acmeå‰ç¼€ä¸­è¿›è¡Œç»‘å®šã€‚ 123MyProperties target = Binder.get(environment) .bind(\"app.acme\", MyProperties.class) .orElse(null); ç”±äºç°åœ¨å†…ç½®äº†è½»æ¾ç»‘å®šï¼Œå› æ­¤åªè¦ä½¿ç”¨å…¶ä¸­ä¸€ç§æ”¯æŒçš„æ ¼å¼ï¼Œå°±å¯ä»¥è¯·æ±‚ä»»ä½•å±æ€§è€Œä¸å¿…å…³å¿ƒæ¡ˆä¾‹ï¼š 123FlagType flagType = Binder.get(environment) .bind(\"acme.app.my-flag\", FlagType.class) .orElse(FlagType.DEFAULT); @ConfigurationProperties éªŒè¯å¦‚æœæ‚¨æƒ³æ‰“å¼€éªŒè¯ï¼Œç°åœ¨å¿…é¡»ä¸ºæ‚¨çš„@ConfigurationPropertieså¯¹è±¡æ·»åŠ æ³¨é‡Š@Validatedã€‚ é…ç½®ä½ç½®spring.config.locationé…ç½®çš„æ–¹å¼å·²è¢«ä¿®å¤; å®ƒæå‰å°†ä¸€ä¸ªä½ç½®æ·»åŠ åˆ°é»˜è®¤ä½ç½®åˆ—è¡¨ä¸­ï¼Œç°åœ¨å®ƒå°†æ›¿æ¢é»˜è®¤ä½ç½®ã€‚å¦‚æœä½ æ˜¯æŒ‰ç…§ä»¥å‰çš„æ–¹å¼è¿›è¡Œå¤„ç†ï¼Œç°åœ¨åº”è¯¥ä½¿ç”¨å®ƒspring.config.additional-locationè¿›è¡Œæ›¿æ¢ã€‚ å¼€å‘ Web åº”ç”¨ç¨‹åºåµŒå…¥å¼å®¹å™¨åŒ…è£…ç»“æ„ä¸ºäº†æ”¯æŒå“åº”å¼ç”¨ä¾‹ï¼ŒåµŒå…¥å¼å®¹å™¨åŒ…ç»“æ„å·²ç»è¢«å¤§å¹…åº¦çš„é‡æ„ã€‚ EmbeddedServletContainerå·²è¢«é‡æ–°å‘½åä¸ºï¼ŒWebServerå¹¶ä¸”è¯¥org.springframework.boot.context.embeddedåŒ…å·²è¢«é‡æ–°å®šä½åˆ°org.springframework.boot.web.embeddedã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨ä½¿ç”¨TomcatEmbeddedServletContainerFactoryå›è°ƒæ¥å£å®šåˆ¶åµŒå…¥å¼ Tomcat å®¹å™¨ï¼Œåˆ™åº”è¯¥ä½¿ç”¨TomcatServletWebServerFactoryã€‚ ç‰¹å®šäº Servlet çš„æœåŠ¡å™¨å±æ€§è®¸å¤šserver.* å±æ€§ ( Servlet ç‰¹æœ‰çš„) å·²ç»è½¬ç§»åˆ°server.servletï¼š æ—§çš„å±æ€§ æ–°çš„å±æ€§ server.context-parameters.* server.servlet.context-parameters.* server.context-path server.servlet.context-path server.jsp.class-name server.servlet.jsp.class-name server.jsp.init-parameters.* server.servlet.jsp.init-parameters.* server.jsp.registered server.servlet.jsp.registered server.servlet-path server.servlet.path Web Starter ä½œä¸ºä¼ é€’ä¾èµ–ä»¥å‰æœ‰å‡ ä¸ª Spring Boot starter æ˜¯ä¾èµ–äº Spring MVC è€Œä¼ é€’çš„spring-boot-starter-webã€‚åœ¨ Spring WebFlux æ–°çš„æ”¯æŒä¸‹ï¼Œspring-boot-starter-mustacheï¼Œspring-boot-starter-freemarkerå¹¶spring-boot-starter-thymeleafä¸å†ä¾èµ–å®ƒã€‚å¼€å‘è€…æœ‰è´£ä»»é€‰æ‹©å’Œæ·»åŠ spring-boot-starter-webæˆ–spring-boot-starter-webfluxã€‚ æ¨¡æ¿å¼•æ“Mustache æ¨¡æ¿æ›¾ç»çš„æ–‡ä»¶æ‰©å±•åæ˜¯.htmlï¼Œç°åœ¨çš„æ‰©å±•åä¸º .mustache ï¼Œä¸å®˜æ–¹è§„èŒƒå’Œå¤§å¤šæ•° IDE æ’ä»¶ä¸€è‡´ã€‚æ‚¨å¯ä»¥é€šè¿‡æ›´æ”¹spring.mustache.suffixé…ç½®é”®æ¥è¦†ç›–æ­¤æ–°çš„é»˜è®¤å€¼ã€‚ Jackson / JSON æ”¯æŒåœ¨ 2.0 ä¸­ï¼Œæˆ‘ä»¬æ”¹å˜äº† Jackson é…ç½®çš„é»˜è®¤å€¼ï¼Œå°† ISO-8601 å­—ç¬¦ä¸² å†™ä¸º JSR-310 æ—¥æœŸ ã€‚å¦‚æœä½ æƒ³å›åˆ°ä»¥å‰çš„è¡Œä¸ºï¼Œä½ å¯ä»¥æ·»åŠ spring.jackson.serialization.write-dates-as-timestamps=trueåˆ°ä½ çš„é…ç½®ã€‚ æ–°çš„spring-boot-starter-json starter æ”¶é›†äº†å¿…è¦çš„ä½å»è¯»å†™ JSONã€‚å®ƒä¸ä»…æä¾›äº†jackson-databindï¼Œè€Œä¸”æä¾›äº†å’Œ Java8 ä¸€èµ·è¿ä½œçš„æ—¶å€™ç›¸å½“æœ‰ç”¨çš„ç»„ä»¶ï¼šjackson-datatype-jdk8, jackson-datatype-jsr310 å’Œ jackson-module-parameter-namesã€‚å¦‚æœä½ æ›¾ç»æ‰‹åŠ¨åœ°ä¾èµ–è¿™äº›ç»„ä»¶ï¼Œç°åœ¨å¯ä»¥ä¾èµ–è¿™ä¸ªæ–°çš„ starter å–ä»£ã€‚ Spring MVC è·¯å¾„åŒ¹é…é»˜è®¤è¡Œä¸ºæ›´æ”¹æˆ‘ä»¬å·²å†³å®šåœ¨ Spring MVC åº”ç”¨ç¨‹åºä¸­æ›´æ”¹åç¼€è·¯å¾„åŒ¹é…çš„é»˜è®¤å€¼ï¼ˆè¯·å‚é˜…ï¼ƒ11105ï¼‰ã€‚æŒ‰ç…§ Spring Framework ä¸­è®°å½•çš„æœ€ä½³å®è·µï¼Œæ­¤åŠŸèƒ½ä¸å†é»˜è®¤å¯ç”¨ã€‚ å¦‚æœæ‚¨çš„åº”ç”¨ç¨‹åºå¸Œæœ›å°†è¯·æ±‚&quot;GET /projects/spring-boot.json&quot;æ˜ å°„åˆ°@GetMapping(&quot;/projects/spring-boot&quot;)æ˜ å°„ï¼Œåˆ™æ­¤æ›´æ”¹ä¼šå½±å“æ‚¨ã€‚ æœ‰å…³æ­¤æ›´å¤šä¿¡æ¯ä»¥åŠå¦‚ä½•å‡è½»æ­¤æ›´æ”¹ï¼Œè¯·æŸ¥é˜…Spring Bootä¸­æœ‰å…³è·¯å¾„åŒ¹é…å’Œå†…å®¹åå•†çš„å‚è€ƒæ–‡æ¡£ã€‚ Servlet è¿‡æ»¤å™¨Servlet è¿‡æ»¤å™¨çš„é»˜è®¤è°ƒåº¦ç¨‹åºç±»å‹ç°åœ¨æ˜¯DipatcherType.REQUEST; è¿™ä½¿ Spring Boot çš„é»˜è®¤å€¼ä¸ Servlet è§„èŒƒçš„é»˜è®¤å€¼ä¸€è‡´ã€‚å¦‚æœæ‚¨å¸Œæœ›å°†è¿‡æ»¤å™¨æ˜ å°„åˆ°å…¶ä»–è°ƒåº¦ç¨‹åºç±»å‹ï¼Œè¯·ä½¿ç”¨FilterRegistrationBeanæ³¨å†Œæ‚¨çš„è¿‡æ»¤å™¨ã€‚ æ³¨æ„ï¼šSpring Security å’Œ Spring Session è¿‡æ»¤å™¨é…ç½® ASYNC, ERRORä»¥åŠ REQUEST è°ƒåº¦ç±»å‹ã€‚ RestTemplateBuilderè¯¥requestFactory(ClientHttpRequestFactory)æ–¹æ³•å·²è¢«æ–°requestFactory(Supplier&lt;ClientHttpRequestFactory&gt; requestFactorySupplier)æ–¹æ³•æ‰€å–ä»£ã€‚Supplierå…è®¸æ„å»ºå™¨ç”Ÿæˆçš„æ¯ä¸ªæ¨¡æ¿ä½¿ç”¨å®ƒè‡ªå·±çš„è¯·æ±‚å·¥å‚ï¼Œä»è€Œé¿å…å…±äº«å·¥å‚å¯èƒ½å¯¼è‡´çš„å‰¯ä½œç”¨ã€‚è§ï¼ƒ11255ã€‚ WebJars å®šä½å™¨Spring Boot 1.x ä½¿ç”¨å¹¶æä¾›ä¾èµ–å…³ç³»ç®¡ç†org.webjars:webjars-locatorã€‚webjars-locatoræ˜¯ä¸€ä¸ªâ€œå‘½åä¸ä½³çš„åº“â€¦â€¦åŒ…è£…webjars-locator-coreé¡¹ç›®â€ã€‚org.webjars:webjars-locatoråº”è¯¥æ›´æ–°ä¾èµ–é¡¹æ¥org.webjars:webjars-locator-coreä»£æ›¿ä½¿ç”¨ã€‚ SecuritySpring Boot 2 æå¤§åœ°ç®€åŒ–äº†é»˜è®¤çš„å®‰å…¨é…ç½®ï¼Œå¹¶ä½¿æ·»åŠ å®šåˆ¶å®‰å…¨å˜å¾—ç®€å•ã€‚Spring Boot ç°åœ¨å…·æœ‰ä¸€ç§è¡Œä¸ºï¼Œåªè¦æ‚¨æ·»åŠ è‡ªå·±çš„ WebSecurityConfigurerAdapter å°±ä¼šé€€å‡ºï¼Œè€Œä¸æ˜¯è¿›è¡Œå¤šç§ä¸å®‰å…¨æ€§ç›¸å…³çš„è‡ªåŠ¨é…ç½®ã€‚ å¦‚æœæ‚¨ä½¿ç”¨ä»¥ä¸‹ä»»ä½•å±æ€§ï¼Œåˆ™ä¼šå—åˆ°å½±å“ï¼š 123456789101112131415security.basic.authorize-modesecurity.basic.enabledsecurity.basic.pathsecurity.basic.realmsecurity.enable-csrfsecurity.headers.cachesecurity.headers.content-security-policysecurity.headers.content-security-policy-modesecurity.headers.content-typesecurity.headers.framesecurity.headers.hstssecurity.headers.xsssecurity.ignoredsecurity.require-sslsecurity.sessions é»˜è®¤å®‰å…¨å®‰å…¨è‡ªåŠ¨é…ç½®ä¸å†å…¬å¼€é€‰é¡¹ï¼Œå¹¶å°½å¯èƒ½ä½¿ç”¨ Spring Security é»˜è®¤å€¼ã€‚ä¸€ä¸ªæ˜æ˜¾çš„å‰¯ä½œç”¨æ˜¯ä½¿ç”¨ Spring Security çš„å†…å®¹åå•†è¿›è¡Œæˆæƒï¼ˆè¡¨å•ç™»å½•ï¼‰ã€‚ é»˜è®¤ç”¨æˆ·é»˜è®¤æƒ…å†µä¸‹ï¼ŒSpring Boot ä½¿ç”¨ç”Ÿæˆçš„å¯†ç é…ç½®å•ä¸ªç”¨æˆ·ã€‚ç”¨æˆ·å¯ä»¥ä½¿ç”¨ spring.security.user.* å±æ€§è¿›è¡Œé…ç½®ã€‚è¦è¿›ä¸€æ­¥å®šåˆ¶ç”¨æˆ·æˆ–æ·»åŠ å…¶ä»–ç”¨æˆ·ï¼Œæ‚¨å°†ä¸å¾—ä¸å…¬å¼€ä¸€ä¸ªUserDetailsServicebeanã€‚ AuthenticationManager Beanå¦‚æœæ‚¨æƒ³å°† Spring Security AuthenticationManagerä½œä¸º bean å…¬å¼€ï¼Œè¯·è¦†ç›–authenticationManagerBeanæ‚¨çš„æ–¹æ³•WebSecurityConfigurerAdapterå¹¶ä¸ºå…¶æ·»åŠ æ³¨é‡Š@Beanã€‚ OAuth2ä»åŠŸèƒ½çš„ Spring Security OAuth é¡¹ç›® è¿ç§»åˆ°æ ¸å¿ƒ Spring Securityã€‚ä¸å†ä¸ºä¾èµ–å…³ç³»æä¾›ä¾èµ–ç®¡ç†ï¼ŒSpring Boot 2 é€šè¿‡ Spring Security 5 æä¾› OAuth 2.0 å®¢æˆ·ç«¯æ”¯æŒã€‚ å¦‚æœæ‚¨ä¾èµ–å°šæœªè¿ç§»çš„ Spring Security OAuth åŠŸèƒ½ï¼Œåˆ™éœ€è¦åœ¨å…¶ä»– jar ä¸Šæ·»åŠ ä¾èµ–é¡¹ï¼Œè¯·æŸ¥çœ‹æ–‡æ¡£ä»¥è·å–æ›´å¤šè¯¦ç»†ä¿¡æ¯ã€‚æˆ‘ä»¬è¿˜ç»§ç»­æ”¯æŒ Spring Boot 1.5ï¼Œä»¥ä¾¿æ—§ç‰ˆåº”ç”¨ç¨‹åºå¯ä»¥ç»§ç»­ä½¿ç”¨å®ƒï¼Œç›´åˆ°æä¾›å‡çº§è·¯å¾„ã€‚ æ‰§è¡Œå™¨å®‰å…¨æ‰§è¡Œå™¨ä¸å†æœ‰å•ç‹¬çš„å®‰å…¨è‡ªåŠ¨é…ç½®ï¼ˆmanagement.security.*å±æ€§æ¶ˆå¤±ï¼‰ã€‚sensitiveæ¯ä¸ªç«¯ç‚¹çš„æ ‡å¿—ä¹Ÿæ²¡æœ‰åœ¨å®‰å…¨é…ç½®ä¸­å˜å¾—æ›´åŠ æ˜ç¡®ã€‚å¦‚æœæ‚¨ä¾èµ–äºæ­¤è¡Œä¸ºï¼Œåˆ™éœ€è¦åˆ›å»ºæˆ–è°ƒæ•´æ‚¨çš„å®‰å…¨é…ç½®ï¼Œä»¥ä¿æŠ¤æ‚¨é€‰æ‹©è§’è‰²çš„ç«¯ç‚¹ã€‚ ä¾‹å¦‚ï¼Œå‡è®¾ä»¥ä¸‹é…ç½®ï¼š 123endpoints.flyway.sensitive=falseendpoints.info.sensitive=truemanagement.security.roles=MY_ADMIN 12345http .authorizeRequests() .requestMatchers(EndpointRequest.to(\"health\", \"flyway\")).permitAll() .requestMatchers(EndpointRequest.toAnyEndpoint()).hasRole(\"MY_ADMIN\") ... éœ€è¦æ³¨æ„çš„æ˜¯åœ¨2.xï¼Œhealthå’Œinfoåœ¨é»˜è®¤æƒ…å†µä¸‹å¯ç”¨ï¼ˆä¸healthé»˜è®¤æƒ…å†µä¸‹ä¸æ˜¾ç¤ºå…¶ç»†èŠ‚ï¼‰ã€‚ä¸ºäº†ä¸è¿™äº›æ–°çš„é»˜è®¤å€¼ä¸€è‡´ï¼Œhealthå·²è¢«æ·»åŠ åˆ°ç¬¬ä¸€ä¸ªåŒ¹é…å™¨ã€‚ ä½¿ç”¨ SQL æ•°æ®åº“é…ç½®æ•°æ®æºé»˜è®¤è¿æ¥æ± å·²ä» Tomcat åˆ‡æ¢åˆ° HikariCPã€‚å¦‚æœæ‚¨è¿‡å»spring.datasource.typeåœ¨åŸºäº Tomcat çš„åº”ç”¨ç¨‹åºä¸­å¼ºåˆ¶ä½¿ç”¨ Hikariï¼Œç°åœ¨å¯ä»¥åˆ é™¤é‡å†™ã€‚ ç‰¹åˆ«æ˜¯ï¼Œå¦‚æœä½ æœ‰è¿™æ ·çš„è®¾ç½®ï¼š 123456789101112131415&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt; &lt;exclusions&gt; &lt;exclusion&gt; &lt;groupId&gt;org.apache.tomcat&lt;/groupId&gt; &lt;artifactId&gt;tomcat-jdbc&lt;/artifactId&gt; &lt;/exclusion&gt; &lt;/exclusions&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;com.zaxxer&lt;/groupId&gt; &lt;artifactId&gt;HikariCP&lt;/artifactId&gt;&lt;/dependency&gt; ç°åœ¨å¯ä»¥è¿™æ ·ä¿®æ”¹ï¼š 1234&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;&lt;/dependency&gt; WARN æ¶ˆæ¯éšå«çš„â€™æ‰“å¼€åœ¨è§†å›¾â€™ä»ç°åœ¨èµ·ï¼Œæœªæ˜ç¡®å¯ç”¨çš„åº”ç”¨ç¨‹åºspring.jpa.open-in-viewå°†åœ¨å¯åŠ¨è¿‡ç¨‹ä¸­æ”¶åˆ°è­¦å‘Šæ¶ˆæ¯ã€‚è™½ç„¶è¿™ç§è¡Œä¸ºæ˜¯ä¸€ç§å‹å¥½çš„é»˜è®¤è¡Œä¸ºï¼Œä½†å¦‚æœæ‚¨æ²¡æœ‰å®Œå…¨æ„è¯†åˆ°ä¸ºæ‚¨åšäº†ä»€ä¹ˆï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´é—®é¢˜ã€‚æ­¤æ¶ˆæ¯å¯ç¡®ä¿æ‚¨äº†è§£å¯åœ¨æŸ¥çœ‹å‘ˆç°æœŸé—´æ‰§è¡Œæ•°æ®åº“æŸ¥è¯¢ã€‚å¦‚æœä½ æ²¡æœ‰é—®é¢˜ï¼Œä½ å¯ä»¥æ˜ç¡®åœ°é…ç½®è¿™ä¸ªå±æ€§æ¥æ¶ˆé™¤è­¦å‘Šä¿¡æ¯ã€‚ JPA å’Œ Spring Dataåœ¨ Spring Boot 1.x ä¸­ï¼Œä¸€äº›ç”¨æˆ·æ­£åœ¨æ‰©å±•HibernateJpaAutoConfigurationä»¥å°†é«˜çº§è‡ªå®šä¹‰åº”ç”¨äºè‡ªåŠ¨é…ç½®EntityManagerFactoryã€‚ä¸ºäº†é˜²æ­¢å‘ç”Ÿè¿™ç§é”™è¯¯çš„ç”¨ä¾‹ï¼ŒSpring Boot 2 ä¸­ä¸å†å¯èƒ½æ‰©å±•å®ƒã€‚ ä¸ºäº†æ”¯æŒè¿™äº›ç”¨ä¾‹ï¼Œç°åœ¨å¯ä»¥å®šä¹‰ä¸€ä¸ªHibernatePropertiesCustomizerbeanï¼Œå®ƒå¯ä»¥å®Œå…¨æ§åˆ¶ Hibernate å±æ€§ï¼ŒåŒ…æ‹¬æ³¨å†Œåœ¨ä¸Šä¸‹æ–‡ä¸­å£°æ˜ä¸º bean çš„ Hibernate æ‹¦æˆªå™¨çš„èƒ½åŠ›ã€‚ FlywayFlyway é…ç½®é”®è¢«ç§»åŠ¨åˆ°springå‘½åç©ºé—´ï¼ˆå³spring.flywayï¼‰ å‡çº§åˆ° Spring Boot 2 å°†ä¼šå°† Flyway å‡çº§3.xåˆ°5.xã€‚ä¸ºç¡®ä¿æ¨¡å¼å‡çº§é¡ºåˆ©è¿›è¡Œï¼Œè¯·æŒ‰ç…§ä»¥ä¸‹è¯´æ˜æ“ä½œï¼š é¦–å…ˆå°†æ‚¨çš„1.5.xSpring Boot åº”ç”¨ç¨‹åºå‡çº§åˆ° Flyway 4ï¼Œè¯·å‚é˜…Mavenå’ŒGradleçš„è¯´æ˜ã€‚ ä¸€æ—¦æ‚¨çš„æ¶æ„å‡çº§åˆ°äº† Flyway 4ï¼Œå‡çº§åˆ° Spring Boot 2 å¹¶å†æ¬¡è¿è¡Œè¿ç§»ä»¥å°†æ‚¨çš„åº”ç”¨ç¨‹åºç§»æ¤åˆ° Flyway 5ã€‚ LiquibaseLiquibase é…ç½®é”®è¢«ç§»åŠ¨åˆ°springå‘½åç©ºé—´ï¼ˆå³spring.liquibaseï¼‰ æ•°æ®åº“åˆå§‹åŒ–åŸºæœ¬DataSourceåˆå§‹åŒ–ç°åœ¨ä»…é’ˆå¯¹åµŒå…¥å¼æ•°æ®æºå¯ç”¨ï¼Œå¹¶å°†åœ¨æ‚¨ä½¿ç”¨ç”Ÿäº§æ•°æ®åº“æ—¶ç«‹å³å…³é—­ã€‚æ–°çš„spring.datasource.initialization-modeï¼ˆæ›¿æ¢spring.datasource.initializeï¼‰æä¾›æ›´å¤šçš„æ§åˆ¶ã€‚ æ›´æ–°é»˜è®¤çš„â€™åˆ›å»º - åˆ é™¤â€™å¤„ç†spring.jpa.hibernate.ddl-auto å±æ€§é»˜è®¤ä¸ºåªæœ‰åœ¨æ²¡æœ‰ä½¿ç”¨ Liquibase æˆ– Flyway ç­‰æ¨¡å¼ç®¡ç†å™¨æ—¶æ‰ä½¿ç”¨åµŒå…¥å¼æ•°æ®åº“è¿›è¡Œåˆ›å»ºã€‚ä¸€æ—¦æ£€æµ‹åˆ°æ¨¡å¼ç®¡ç†å™¨ï¼Œé»˜è®¤æ›´æ”¹ä¸º noneã€‚ æ•´åˆ NoSQLRedisç°åœ¨ä½¿ç”¨çš„æ˜¯ Lettuce è€Œä¸æ˜¯ Jedis ä½œä¸º Redis é©±åŠ¨ç¨‹åºspring-boot-starter-redisã€‚å¦‚æœæ‚¨ä½¿ç”¨æ›´é«˜çº§åˆ«çš„Spring Data æ„é€ ï¼Œåˆ™åº”è¯¥å‘ç°å˜åŒ–æ˜¯é€æ˜çš„ã€‚æˆ‘ä»¬ä»ç„¶æ”¯æŒ Jedisï¼Œå¦‚æœæ‚¨æ„¿æ„ï¼Œé€šè¿‡æ’é™¤ io.lettuceï¼šlettuce-coreå¹¶æ·»åŠ  redis.clientsï¼šjedisï¼Œåˆ™å¯ä»¥è‡ªç”±åˆ‡æ¢ä¾èµ–é¡¹ã€‚ ElasticsearchElasticsearch å·²ç»å‡çº§åˆ° 6.0+ã€‚ä¸ Elastic å®£å¸ƒåµŒå…¥å¼ Elasticsearch ä¸å†å—æ”¯æŒä¸€è‡´ï¼Œè‡ªåŠ¨é…ç½®NodeClientå·²è¢«åˆ é™¤ã€‚TransportClientå¯ä»¥é€šè¿‡ä½¿ç”¨spring.data.elasticsearch.cluster-nodesæä¾›è¦è¿æ¥çš„ä¸€ä¸ªæˆ–å¤šä¸ªèŠ‚ç‚¹çš„åœ°å€æ¥è‡ªåŠ¨é…ç½®ã€‚ é«˜é€Ÿç¼“å­˜ç”¨äºç¼“å­˜çš„ä¸“ç”¨ Hazelcast è‡ªåŠ¨é…ç½®ã€‚ æ— æ³•è‡ªåŠ¨é…ç½®å¸¸è§„HazelcastInstanceå’Œä¸“ç”¨HazelcastInstanceç¼“å­˜ã€‚å› æ­¤ï¼Œè¯¥spring.cache.hazelcast.configå±æ€§å·²ä¸å†å¯ç”¨ã€‚ æ‰¹é‡åœ¨å¯åŠ¨æ—¶æ‰§è¡Œæ‰¹å¤„ç†ä½œä¸šçš„ CommandLineRunner çš„é¡ºåºä¸º 0ã€‚ æµ‹è¯•Mockito 1.xMockito 1.x ä¸å†æ”¯æŒ@MockBeanå’Œ@SpyBeanã€‚å¦‚æœä½ ä¸ç”¨spring-boot-starter-testæ¥ç®¡ç†ä½ çš„ä¾èµ–å…³ç³»ï¼Œä½ åº”è¯¥å‡çº§åˆ° Mockito 2.x. Spring Boot ActuatorSpring Boot 2 ä¸º Actuator å¸¦æ¥äº†é‡è¦å˜åŒ–ï¼Œæ— è®ºæ˜¯å†…éƒ¨è¿˜æ˜¯é¢å‘ç”¨æˆ·ï¼Œè¯·æŸ¥é˜…å‚è€ƒæŒ‡å—ä¸­çš„æ›´æ–°éƒ¨åˆ†å’Œæ–°çš„Actuator APIæ–‡æ¡£ã€‚ æ‚¨åº”è¯¥æœŸæœ›ç¼–ç¨‹æ¨¡å‹ï¼Œé…ç½®å¯†é’¥å’ŒæŸäº›ç«¯ç‚¹çš„å“åº”æ ¼å¼å‘ç”Ÿå˜åŒ–ã€‚Actuator ç°åœ¨åœ¨ Spring MVCï¼ŒSpring WebFlux å’ŒJersey ä¸Šå¾—åˆ°æœ¬åœ°æ”¯æŒã€‚ æ„å»ºActuator çš„ä»£ç åˆ†ä¸ºä¸¤ä¸ªæ¨¡å—ï¼šç°æœ‰çš„spring-boot-actuatorå’Œæ–°çš„spring-boot-actuator-autoconfigureã€‚å¦‚æœæ‚¨ä½¿ç”¨åŸå§‹æ¨¡å—ï¼ˆspring-boot-actuatorï¼‰å¯¼å…¥ actuatorï¼Œè¯·è€ƒè™‘ä½¿ç”¨spring-boot-starter-actuatorå¯åŠ¨å™¨æ›¿ä»£å®ƒã€‚ Keys çš„é…ç½®ç»“æ„Endpoints åŸºç¡€é…ç½® key å·²ç»ç»Ÿä¸€ï¼š æ—§çš„å±æ€§ æ–°çš„å±æ€§ endpoints.&lt;id&gt;.* management.endpoint.&lt;id&gt;.* endpoints.cors.* management.endpoints.web.cors.* endpoints.jmx.* management.endpoints.jmx.* management.address management.server.address management.context-path management.server.servlet.context-path management.ssl.* management.server.ssl.* management.port management.server.port åŸºæœ¬è·¯å¾„æ‰€æœ‰ endpoints é»˜è®¤æƒ…å†µä¸‹éƒ½å·²ç§»è‡³ /actuatorã€‚ æˆ‘ä»¬ä¿®æ”¹äº† management.server.servlet.context-path çš„å«ä¹‰ï¼šå®ƒç°åœ¨æ˜¯ server.servlet.context-path çš„ç«¯ç‚¹ç®¡ç†çš„ç­‰ä»·æ›¿ä»£ï¼ˆåªæœ‰åœ¨è®¾ç½®äº† management.server.port æ—¶æ‰æœ‰æ•ˆï¼‰ã€‚å¦å¤–ï¼Œæ‚¨è¿˜å¯ä»¥ä½¿ç”¨æ–°çš„å•ç‹¬å±æ€§ management.endpoints.web.base-path ä¸ºç®¡ç†ç«¯ç‚¹è®¾ç½®åŸºæœ¬è·¯å¾„ã€‚ ä¾‹å¦‚ï¼Œå¦‚æœä½ è®¾ç½®management.server.servlet.context-path=/managementå’Œmanagement.endpoints.web.base-path=/applicationï¼Œä½ å°±å¯ä»¥åœ¨ä¸‹é¢çš„è·¯å¾„åˆ°è¾¾ç»ˆç‚¹å¥åº·ï¼š/management/application/healthã€‚ å¦‚æœä½ æƒ³æ¢å¤ 1.x çš„è¡Œä¸ºï¼ˆå³å…·æœ‰/healthä»£æ›¿/actuator/healthï¼‰ï¼Œè®¾ç½®ä»¥ä¸‹å±æ€§ï¼š 1management.endpoints.web.base-path=/ å®¡è®¡äº‹ä»¶ API æ›´æ”¹AuditEventRepository ç°åœ¨æœ‰ä¸€ä¸ªåŒ…å«æ‰€æœ‰å¯é€‰å‚æ•°çš„å•ä¸€æ–¹æ³•ã€‚ Endpointsè¦é€šè¿‡ HTTP ä½¿æ‰§è¡Œå™¨ç«¯ç‚¹å¯ç”¨ï¼Œå®ƒéœ€è¦åŒæ—¶å¯ç”¨å’Œå…¬å¼€ã€‚é»˜è®¤ï¼š æ— è®ºæ‚¨çš„åº”ç”¨ç¨‹åºä¸­æ˜¯å¦å­˜åœ¨å’Œé…ç½® Spring Securityï¼Œåªæœ‰ç«¯ç‚¹/healthå’Œ/infoç«¯ç‚¹éƒ½æ˜¯æš´éœ²çš„ã€‚ æ‰€æœ‰ç«¯ç‚¹ï¼Œä½†/shutdownå·²å¯ç”¨ã€‚ æ‚¨å¯ä»¥æŒ‰å¦‚ä¸‹æ–¹å¼å…¬å¼€æ‰€æœ‰ç«¯ç‚¹ï¼š 1management.endpoints.web.exposure.include=* æ‚¨å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼æ˜¾å¼å¯ç”¨/shutdownç«¯ç‚¹ï¼š 1management.endpoint.shutdown.enabled=true è¦å…¬å¼€æ‰€æœ‰ï¼ˆå·²å¯ç”¨ï¼‰ç½‘ç»œç«¯ç‚¹é™¤envç«¯ç‚¹ä¹‹å¤–ï¼š 12management.endpoints.web.exposure.include=*management.endpoints.web.exposure.exclude=env Endpoint changes 1.x ç«¯ç‚¹ 2.0 ç«¯ç‚¹ï¼ˆæ”¹å˜ï¼‰ /actuator ä¸å†å¯ç”¨ã€‚ ä½†æ˜¯ï¼Œåœ¨ management.endpoints.web.base-path çš„æ ¹ç›®å½•ä¸­æœ‰ä¸€ä¸ªæ˜ å°„ï¼Œå®ƒæä¾›äº†åˆ°æ‰€æœ‰æš´éœ²ç«¯ç‚¹çš„é“¾æ¥ã€‚ /auditevents è¯¥afterå‚æ•°ä¸å†éœ€è¦ /autoconfig é‡å‘½åä¸º /conditions /docs ä¸å†å¯ç”¨ /health ç°åœ¨æœ‰ä¸€ä¸ª management.endpoint.health.show-details é€‰é¡¹ never, always, when-authenticatedï¼Œè€Œä¸æ˜¯ä¾é  sensitive æ ‡å¿—æ¥ç¡®å®š health ç«¯ç‚¹æ˜¯å¦å¿…é¡»æ˜¾ç¤ºå…¨éƒ¨ç»†èŠ‚ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œ/actuator/healthå…¬å¼€å¹¶ä¸”ä¸æ˜¾ç¤ºç»†èŠ‚ã€‚ /trace é‡å‘½åä¸º /httptrace ç«¯ç‚¹å±æ€§å·²æ›´æ”¹å¦‚ä¸‹ï¼š endpoints.&lt;id&gt;.enabled å·²ç»è½¬ç§»åˆ°äº† management.endpoint.&lt;id&gt;.enabled endpoints.&lt;id&gt;.id æ²¡æœ‰æ›¿æ¢ï¼ˆç«¯ç‚¹çš„ ID ä¸å†å¯é…ç½®ï¼‰ endpoints.&lt;id&gt;.sensitiveæ²¡æœ‰æ›¿ä»£å“ï¼ˆè¯·å‚è§æ‰§è¡Œå™¨å®‰å…¨ï¼‰ endpoints.&lt;id&gt;.path å·²ç»è½¬ç§»åˆ°äº† management.endpoints.web.path-mapping.&lt;id&gt; ç«¯ç‚¹æ ¼å¼/actuator/mappings ç«¯ç‚¹å¤§æ”¹å˜JSON æ ¼å¼å·²ç»æ›´æ”¹ä¸ºç°åœ¨æ­£ç¡®åœ°åŒ…å«æœ‰å…³ä¸Šä¸‹æ–‡å±‚æ¬¡ç»“æ„ï¼Œå¤šä¸ªDispatcherServletsï¼Œéƒ¨ç½²çš„ Servlet å’Œ Servlet è¿‡æ»¤å™¨çš„ä¿¡æ¯ã€‚è¯¦æƒ…è¯·å‚é˜…ï¼ƒ9979ã€‚ Actuator API æ–‡æ¡£çš„ç›¸å…³éƒ¨åˆ†æä¾›äº†ä¸€ä¸ªç¤ºä¾‹æ–‡æ¡£ã€‚ /actuator/httptrace ç«¯ç‚¹å¤§æ”¹å˜å“åº”çš„ç»“æ„å·²ç»è¿‡æ”¹è¿›ï¼Œä»¥åæ˜ ç«¯ç‚¹å…³æ³¨è·Ÿè¸ª HTTP è¯·æ±‚ - å“åº”äº¤æ¢çš„æƒ…å†µã€‚ è¿ç§»è‡ªå®šä¹‰ç«¯ç‚¹å¦‚æœæ‚¨æœ‰è‡ªå®šä¹‰æ‰§è¡Œå™¨ç«¯ç‚¹ï¼Œè¯·æŸ¥çœ‹ä¸“ç”¨åšå®¢æ–‡ç« ã€‚è¯¥å›¢é˜Ÿè¿˜æ’°å†™äº†ä¸€ä¸ª wiki é¡µé¢ï¼Œä»‹ç»å¦‚ä½•å°†ç°æœ‰çš„æ‰§è¡Œå™¨ç«¯ç‚¹è¿ç§»åˆ°æ–°çš„åŸºç¡€æ¶æ„ã€‚ MetricsSpring Boot è‡ªå·±çš„æŒ‡æ ‡å·²è¢«æ”¯æŒå–ä»£ï¼ŒåŒ…æ‹¬è‡ªåŠ¨é…ç½®ï¼Œç”¨äº icrometer å’Œ dimensional æŒ‡æ ‡ã€‚ è®¾ç½® icrometerå¦‚æœæ‚¨çš„ Spring Boot 2.0 åº”ç”¨ç¨‹åºå·²ä¾èµ–äº Actuatorï¼Œåˆ™ icrometer å·²åœ¨æ­¤å¤„å¹¶è‡ªåŠ¨é…ç½®ã€‚å¦‚æœæ‚¨å¸Œæœ›å°†åº¦é‡æ ‡å‡†å¯¼å‡ºåˆ° Prometheusï¼ŒAtlas æˆ– Datadog ç­‰å¤–éƒ¨æ³¨å†Œè¡¨ï¼ŒMicrometer å°†ä¸ºè®¸å¤šæ³¨å†Œè¡¨æä¾›ä¾èµ–å…³ç³»; æ‚¨å¯ä»¥ä½¿ç”¨spring.metrics.*å±æ€§é…ç½®æ‚¨çš„åº”ç”¨ç¨‹åºä»¥å¯¼å‡ºåˆ°ç‰¹å®šçš„æ³¨å†Œè¡¨ã€‚ è¿ç§»å®šåˆ¶è®¡æ•°å™¨/é‡è¡¨æ‚¨å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼åˆ›å»ºå„ç§æŒ‡æ ‡ï¼Œè€Œä¸æ˜¯åœ¨åº”ç”¨ç¨‹åºä»£ç ä¸­æ³¨å…¥CounterServiceæˆ–GaugeServiceçš„å®ä¾‹ï¼š æ³¨å…¥MeterRegistryå’Œè°ƒç”¨æ–¹æ³•ã€‚ ç›´æ¥è°ƒç”¨é™æ€æ–¹æ³•Counter featureCounter = Metrics.counter(&quot;feature&quot;);ã€‚ å¼€å‘è€…å·¥å…·çƒ­æ‹”æ’ç”±äº Spring Loaded é¡¹ç›®è¢«æç½®ï¼Œå®ƒåœ¨ Spring Boot çš„æ”¯æŒå·²è¢«åˆ é™¤ã€‚æˆ‘ä»¬å»ºè®®ä½¿ç”¨ Devtoolsã€‚ Devtools è¿œç¨‹è°ƒè¯•éš§é“å·²ç»ä» Devtools ä¸­åˆ é™¤äº†å¯¹é€šè¿‡ HTTP è¿›è¡Œéš§é“è¿œç¨‹è°ƒè¯•çš„æ”¯æŒã€‚ å·²åˆ é™¤çš„åŠŸèƒ½ä»¥ä¸‹åŠŸèƒ½ä¸å†å¯ç”¨ï¼š CRaSH æ”¯æŒ Spring Mobile çš„è‡ªåŠ¨é…ç½®å’Œä¾èµ–å…³ç³»ç®¡ç†ã€‚ Spring Social çš„è‡ªåŠ¨é…ç½®å’Œä¾èµ–å…³ç³»ç®¡ç†ã€‚ ä¾èµ–å…³ç³»ç®¡ç†commons-digesterã€‚ ä¾èµ–ç‰ˆæœ¬ä»¥ä¸‹åº“çš„æœ€ä½æ”¯æŒç‰ˆæœ¬å·²æ›´æ”¹ï¼š Elasticsearch 5.6 Gradle 4 Hibernate 5.2 Jetty 9.4 Spring Framework 5 Spring Security 5 Tomcat 8.5 å‚è€ƒèµ„æ–™https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-2.0-Migration-Guide ç›¸å…³æ–‡ç« 1ã€Spring Boot 2.0ç³»åˆ—æ–‡ç« (ä¸€)ï¼šSpring Boot 2.0 è¿ç§»æŒ‡å— 2ã€Spring Boot 2.0ç³»åˆ—æ–‡ç« (äºŒ)ï¼šSpring Boot 2.0 æ–°ç‰¹æ€§è¯¦è§£ 3ã€Spring Boot 2.0ç³»åˆ—æ–‡ç« (ä¸‰)ï¼šSpring Boot 2.0 é…ç½®æ”¹å˜ 4ã€Spring Boot 2.0ç³»åˆ—æ–‡ç« (å››)ï¼šSpring Boot 2.0 æºç é˜…è¯»ç¯å¢ƒæ­å»º 5ã€Spring Boot 2.0ç³»åˆ—æ–‡ç« (äº”)ï¼šSpring Boot 2.0 é¡¹ç›®æºç ç»“æ„é¢„è§ˆ 6ã€Spring Boot 2.0ç³»åˆ—æ–‡ç« (å…­)ï¼šSpring boot 2.0 ä¸­ SpringBootApplication æ³¨è§£è¯¦è§£ 7ã€Spring Boot 2.0ç³»åˆ—æ–‡ç« (ä¸ƒ)ï¼šSpringApplication æ·±å…¥æ¢ç´¢","tags":[{"name":"Java","slug":"Java","permalink":"http://yoursite.com/tags/Java/"},{"name":"SpringBoot","slug":"SpringBoot","permalink":"http://yoursite.com/tags/SpringBoot/"}]},{"title":"Spring Boot 2.0ç³»åˆ—æ–‡ç« (äºŒ)ï¼šSpring Boot 2.0 æ–°ç‰¹æ€§è¯¦è§£","date":"2018-03-05T16:00:00.000Z","path":"2018/03/06/SpringBoot2-new-features/","text":"èƒŒæ™¯åœ¨ 3 æœˆ 1 å·ï¼ŒSpring Boot2.0.0.RELEASEæ­£å¼å‘å¸ƒï¼Œè¿™æ˜¯ Spring Boot1.0 å‘å¸ƒ 4 å¹´ä¹‹åç¬¬ä¸€æ¬¡é‡å¤§ä¿®è®¢ï¼Œå› æ­¤æœ‰å¤šçš„æ–°åŠŸèƒ½å’Œç‰¹æ€§å€¼å¾—å¤§å®¶æœŸå¾…ï¼ä¸‹é¢å¸¦å¤§å®¶äº†è§£ä¸‹ Spring Boot 2.0 ä¸­çš„æ–°ç‰¹æ€§ã€‚ å…³æ³¨æˆ‘ è½¬è½½è¯·åŠ¡å¿…æ³¨æ˜åŸåˆ›åœ°å€ä¸ºï¼šhttp://www.54tianzhisheng.cn/2018/03/06/SpringBoot2-new-features/ ä» Spring Boot 1.5 å‡çº§ç”±äº Spring Boot 2.0 çš„æ”¹å˜å¹…åº¦æœ‰ç‚¹å¤§ï¼Œæ‰€ä»¥å‡çº§ç°æœ‰çš„ç¨‹åºå¯èƒ½ä¼šæ¯”å¹³å¸¸æ›´å¤§ä¸€äº›ã€‚ å¦‚æœä½ è¿˜åœ¨è€ƒè™‘æ˜¯å¦è¦å‡çº§ï¼Œè¿™é‡Œæ¨è DD çš„åšå®¢æ–‡ç« ï¼šSpring Boot 2.0 æ­£å¼å‘å¸ƒï¼Œå‡è¿˜æ˜¯ä¸å‡å‘¢ï¼Ÿ å¦‚æœè¦å‡çº§å¯ä»¥å‚è€ƒæˆ‘çš„å¦å¤–ä¸€ç¯‡æ–‡ç« ï¼šSpring Boot 2.0 è¿ç§»æŒ‡å— å¦‚æœæ‚¨ç›®å‰æ­£åœ¨è¿è¡Œè¾ƒæ—©ç‰ˆæœ¬çš„ Spring Bootï¼Œæˆ‘ä»¬å¼ºçƒˆå»ºè®®æ‚¨åœ¨è¿ç§»åˆ° Spring Boot 2.0 ä¹‹å‰å…ˆå‡çº§åˆ° Spring Boot 1.5ã€‚ æ–°çš„å’Œå€¼å¾—æ³¨æ„çš„ç‰¹æ€§å°æŠ€å·§ï¼šæ£€æŸ¥ é…ç½®æ›´æ”¹æ—¥å¿— æ¥è·å–é…ç½®æ›´æ”¹çš„å®Œæ•´æè¿°ã€‚ èµ·ç  JDK 8 å’Œæ”¯æŒ JDK 9Spring Boot 2.0 è¦æ±‚ Java 8 ä½œä¸ºæœ€ä½ç‰ˆæœ¬ã€‚è®¸å¤šç°æœ‰çš„ API å·²æ›´æ–°ï¼Œä»¥åˆ©ç”¨ Java 8 çš„ç‰¹æ€§ï¼Œä¾‹å¦‚ï¼šæ¥å£ä¸Šçš„é»˜è®¤æ–¹æ³•ï¼Œå‡½æ•°å›è°ƒä»¥åŠæ–°çš„ APIï¼Œå¦‚javax.timeã€‚å¦‚æœæ‚¨å½“å‰æ­£åœ¨ä½¿ç”¨ Java 7 æˆ–æ›´æ—©ç‰ˆæœ¬ï¼Œåˆ™åœ¨å¼€å‘ Spring Boot 2.0 åº”ç”¨ç¨‹åºä¹‹å‰ï¼Œæ‚¨éœ€è¦å‡çº§æ‚¨çš„ JDKã€‚ Spring Boot 2.0 é€šè¿‡äº†åœ¨ JDK 9 ä¸‹çš„æµ‹è¯•ï¼Œå¯ä»¥åœ¨ JDK 9 ä¸‹æ­£å¸¸è¿è¡Œï¼Œã€‚æˆ‘ä»¬æ‰€æœ‰çš„ jar åŒ…éƒ½åœ¨æ¨¡å—ç³»ç»Ÿå…¼å®¹æ€§çš„æ¸…å•ä¸­é™„å¸¦äº†è‡ªåŠ¨æ¨¡å—åç§°æ¡ç›®ã€‚ ç¬¬ä¸‰æ–¹åº“çš„å‡çº§Spring Boot 2.0 å»ºç«‹åœ¨ Spring Framework 5 ä¹‹ä¸Šï¼Œå¹¶ä¸”éœ€è¦ Spring Framework 5 ã€‚ä½ å¯ä»¥é€šè¿‡ Whatâ€™s New in Spring Framework 5.x äº†è§£ Spring 5 çš„æ–°ç‰¹æ€§ã€‚å¹¶åœ¨ç»§ç»­ä¹‹å‰æŸ¥çœ‹å…¶å‡çº§æŒ‡å— Upgrading to Spring Framework 5.x ã€‚ æˆ‘ä»¬å·²å°½å¯èƒ½å‡çº§åˆ°å…¶ä»–ç¬¬ä¸‰æ–¹åº“çš„æœ€æ–°ç¨³å®šç‰ˆæœ¬ã€‚ æœ¬ç‰ˆæœ¬ä¸­ä¸€äº›æ˜¾ç€çš„ä¾èµ–æ€§å‡çº§åŒ…æ‹¬ï¼š Tomcat 8.5 Flyway 5 Hibernate 5.2 Thymeleaf 3 Reactive SpringSpring äº§å“ç»„åˆä¸­çš„è®¸å¤šé¡¹ç›®ç°åœ¨éƒ½ä¸ºå¼€å‘ååº”å¼åº”ç”¨ç¨‹åºæä¾›ä¸€æµçš„æ”¯æŒã€‚ååº”æ€§åº”ç”¨ç¨‹åºæ˜¯å®Œå…¨å¼‚æ­¥å’Œéé˜»å¡çš„ã€‚å®ƒä»¬æ—¨åœ¨ç”¨äºäº‹ä»¶å¾ªç¯æ‰§è¡Œæ¨¡å‹ï¼ˆè€Œä¸æ˜¯æ›´ä¼ ç»Ÿçš„æ¯ä¸ªè¯·æ±‚çº¿ç¨‹æ‰§è¡Œæ¨¡å‹ï¼‰ã€‚Spring æ¡†æ¶å‚è€ƒæ–‡æ¡£ä¸­çš„â€œWeb ååº”å †æ ˆâ€éƒ¨åˆ†ä¸ºè¿™ä¸ªä¸»é¢˜æä¾›äº†ä¸€ä¸ªå¾ˆå¥½çš„å…¥é—¨ã€‚ Spring Boot 2.0 é€šè¿‡è‡ªåŠ¨é…ç½®å’Œå¯åŠ¨å™¨ POM å®Œå…¨æ”¯æŒååº”å¼åº”ç”¨ã€‚Spring Boot çš„å†…éƒ¨æœ¬èº«ä¹Ÿåœ¨å¿…è¦æ—¶è¿›è¡Œäº†æ›´æ–°ï¼Œä»¥æä¾›ååº”æ€§çš„ååº”ï¼ˆæœ€æ˜æ˜¾çš„æ˜¯æˆ‘ä»¬çš„åµŒå…¥å¼æœåŠ¡å™¨æ”¯æŒï¼‰ã€‚ Spring WebFluxï¼†WebFlux.fnSpring WebFlux æ˜¯ Spring MVC çš„å®Œå…¨éé˜»å¡ååº”å¼æ›¿ä»£æ–¹æ¡ˆã€‚Spring Boot ä¸ºåŸºäºæ³¨é‡Šçš„ Spring WebFlux åº”ç”¨ç¨‹åºä»¥åŠ WebFlux.fn æä¾›äº†è‡ªåŠ¨é…ç½®ï¼ŒWebFlux.fn æä¾›äº†æ›´å®ç”¨çš„æ ·å¼ APIã€‚ è¦å¼€å§‹ï¼Œè¯·æ·»åŠ  spring-boot-starter-webflux åˆ° POMï¼Œå®ƒå°†æä¾›ç”±åµŒå…¥å¼ Netty æœåŠ¡å™¨æ”¯æŒçš„ Spring WebFluxã€‚ Reactive Spring Dataåœ¨åº•å±‚æŠ€æœ¯æ”¯æŒçš„æƒ…å†µä¸‹ï¼ŒSpring Data è¿˜ä¸ºååº”å¼åº”ç”¨ç¨‹åºæä¾›æ”¯æŒã€‚ç›®å‰ Cassandraï¼ŒMongoDBï¼ŒCouchbase å’Œ Redis éƒ½æœ‰ååº”å¼ API æ”¯æŒã€‚ Spring Boot åŒ…å«é’ˆå¯¹è¿™äº›æŠ€æœ¯çš„ç‰¹æ®Š starter-POMsï¼Œå¯ä¸ºæ‚¨æä¾›å¯åŠ¨æ‰€éœ€çš„ä¸€åˆ‡ã€‚ä¾‹å¦‚ï¼Œspring-boot-starter-data-mongodb-reactiveåŒ…æ‹¬å¯¹ååº”æ€§ mongo é©±åŠ¨ç¨‹åºå’Œé¡¹ç›®ååº”å †çš„ä¾èµ–æ€§ã€‚ Reactive Spring SecuritySpring Boot 2.0 å¯ä»¥å……åˆ†åˆ©ç”¨ Spring Security 5.0 æ¥ä¿æŠ¤æ‚¨çš„ååº”å¼åº”ç”¨ç¨‹åºã€‚å½“ Spring Security ä½äºç±»è·¯å¾„ä¸­æ—¶ï¼Œä¼šä¸º WebFlux åº”ç”¨ç¨‹åºæä¾›è‡ªåŠ¨é…ç½®ã€‚ ä½¿ç”¨ WebFlux çš„ Spring Security è®¿é—®è§„åˆ™å¯ä»¥é€šè¿‡SecurityWebFilterChainã€‚å¦‚æœä½ ä¹‹å‰æ•´åˆè¿‡ Spring MVC å’Œ Spring Securityï¼Œåº”è¯¥ä¼šæ„Ÿåˆ°éå¸¸ç†Ÿæ‚‰ã€‚æœ‰å…³æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜… Spring Boot å‚è€ƒæ–‡æ¡£å’Œ Spring Security æ–‡æ¡£ã€‚ åµŒå…¥å¼ Netty æœåŠ¡å™¨ç”±äº WebFlux ä¸ä¾èµ–äº Servlet APIï¼Œæˆ‘ä»¬ç°åœ¨å¯ä»¥é¦–æ¬¡ä¸º Netty ä½œä¸ºåµŒå…¥å¼æœåŠ¡å™¨æä¾›æ”¯æŒã€‚è¯¥spring-boot-starter-webflux å¯åŠ¨ POM å°†æ‹‰å– Netty 4.1 å’Œ Ractor Netty ã€‚ æ³¨æ„ï¼šæ‚¨åªèƒ½å°† Netty ç”¨ä½œååº”å¼æœåŠ¡å™¨ã€‚ä¸æä¾›é˜»æ­¢ servlet API æ”¯æŒã€‚ HTTP/2 æ”¯æŒä¸º Tomcatï¼ŒUndertow å’Œ Jetty æä¾› HTTP / 2 æ”¯æŒã€‚æ”¯æŒå–å†³äºæ‰€é€‰çš„ Web æœåŠ¡å™¨å’Œåº”ç”¨ç¨‹åºç¯å¢ƒï¼ˆå› ä¸º JDK 8 ä¸æ”¯æŒè¯¥åè®®ï¼‰ã€‚ å¦‚ä½•é…ç½® HTTPï¼2ï¼Œè¯·å‚è€ƒ å®˜æ–¹æ–‡æ¡£ ã€‚ é…ç½®å±æ€§çš„ç»‘å®šåœ¨ Spring Boot 2.0 ä¸­ï¼Œç”¨äºç»‘å®šEnvironmentå±æ€§çš„æœºåˆ¶@ConfigurationPropertieså·²ç»å®Œå…¨å½»åº•ä¿®æ”¹ã€‚æˆ‘ä»¬å€Ÿæ­¤æœºä¼šæ”¶ç´§äº†æ¾æ•£ç»‘å®šçš„è§„åˆ™ï¼Œå¹¶ä¿®å¤äº† Spring Boot 1.x ä¸­çš„è®¸å¤šä¸ä¸€è‡´ä¹‹å¤„ã€‚ æ–°çš„BinderAPI ä¹Ÿå¯ä»¥@ConfigurationPropertiesç›´æ¥åœ¨ä½ è‡ªå·±çš„ä»£ç ä¹‹å¤–ä½¿ç”¨ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢å°†ç»“åˆåˆ°Listçš„PersonNameå¯¹è±¡ï¼š 123List&lt;PersonName&gt; people = Binder.get(environment) .bind(\"my.property\", Bindable.listOf(PersonName.class)) .orElseThrow(IllegalStateException::new); é…ç½®æºå¯ä»¥åƒè¿™æ ·åœ¨ YAML ä¸­è¡¨ç¤ºï¼š 123456my: property: - first-name: zhisheng last-name: tian - first-name: zhisheng last-name: tian æœ‰å…³æ›´æ–°ç»‘å®šè§„åˆ™çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…æ­¤Wikié¡µé¢ã€‚ é…ç½®èµ·æºYAML æ–‡ä»¶å’Œè¢« Spring Boot åŠ è½½çš„ Properties æ–‡ä»¶ç°åœ¨åŒ…å«Originä¿¡æ¯ï¼Œå¯å¸®åŠ©æ‚¨è·Ÿè¸ªé¡¹ç›®ä»ä½•å¤„åŠ è½½çš„ä¿¡æ¯ã€‚æœ‰äº› Spring Boot ç‰¹æ€§åˆ©ç”¨äº†è¿™ä¸ªä¿¡æ¯å¯ä»¥åœ¨é€‚å½“çš„æ—¶å€™å±•ç¤ºå‡ºæ¥ã€‚ ä¾‹å¦‚ï¼ŒBindExceptionç»‘å®šå¤±è´¥æ—¶æŠ›å‡ºçš„ç±»æ˜¯ä¸€ä¸ªOriginProviderã€‚è¿™æ„å‘³ç€åŸå§‹ä¿¡æ¯å¯ä»¥å¾ˆå¥½åœ°ä»æ•…éšœåˆ†æå™¨ä¸­æ˜¾ç¤ºå‡ºæ¥ã€‚ å¦ä¸€ä¸ªä¾‹å­æ˜¯envæ‰§è¡Œå™¨ç«¯ç‚¹ï¼Œå½“å®ƒæœ‰å¯ç”¨æ—¶åŒ…å«äº†åŸå§‹ä¿¡æ¯ã€‚ä¸‹é¢çš„ä»£ç ç‰‡æ–­æ˜¾ç¤ºè¯¥spring.security.user.nameå±æ€§æ¥è‡ª jar åŒ…ä¸­çš„ application.properties æ–‡ä»¶çš„ç¬¬ 1è¡Œï¼Œç¬¬ 27 åˆ—ã€‚ 123456789&#123; \"name\": \"applicationConfig: [classpath:/application.properties]\", \"properties\": &#123; \"spring.security.user.name\": &#123; \"value\": \"user\", \"origin\": \"class path resource [application.properties]:1:27\" &#125; &#125;&#125; è½¬æ¢å™¨æ”¯æŒBinding åˆ©ç”¨äº†ä¸€ä¸ªæ–°çš„ ApplicationConversionService ç±»ï¼Œå®ƒæä¾›äº†ä¸€äº›å¯¹å±æ€§ç»‘å®šç‰¹åˆ«æœ‰ç”¨çš„é¢å¤–è½¬æ¢å™¨ã€‚æœ€å¼•äººæ³¨ç›®çš„æ˜¯è½¬æ¢å™¨çš„Durationç±»å‹å’Œåˆ†éš”å­—ç¬¦ä¸²ã€‚ è¯¥Durationè½¬æ¢å™¨å…è®¸åœ¨ä»»ä¸€ ISO-8601 æ ¼å¼ä¸­æŒ‡å®šçš„æŒç»­æ—¶é—´ï¼Œæˆ–ä½œä¸ºä¸€ä¸ªç®€å•çš„å­—ç¬¦ä¸²ï¼ˆä¾‹å¦‚10mï¼Œ10 åˆ†é’Ÿï¼‰ã€‚ç°æœ‰çš„å±æ€§å·²æ›´æ”¹ä¸ºå§‹ç»ˆä½¿ç”¨Durationã€‚è¯¥@DurationUnitæ³¨é‡Šé€šè¿‡è®¾ç½®å¦‚æœæ²¡æœ‰æŒ‡å®šæ‰€ä½¿ç”¨çš„å•å…ƒç¡®ä¿å‘åå…¼å®¹æ€§ã€‚ä¾‹å¦‚ï¼ŒSpring Boot 1.5 ä¸­éœ€è¦ç§’æ•°çš„å±æ€§ç°åœ¨å¿…é¡»@DurationUnit(ChronoUnit.SECONDS)ç¡®ä¿ä¸€ä¸ªç®€å•çš„å€¼ï¼Œä¾‹å¦‚10å®é™…ä½¿ç”¨çš„å€¼10sã€‚ åˆ†éš”å­—ç¬¦ä¸²è½¬æ¢å…è®¸æ‚¨å°†ç®€å•ç»‘å®šStringåˆ°Collectionæˆ–Arrayä¸å¿…åˆ†å‰²é€—å·ã€‚ä¾‹å¦‚ï¼ŒLDAP base-dn å±æ€§ç”¨ @Delimiter(Delimiter.NONE)ï¼Œæ‰€ä»¥ LDAP DNï¼ˆé€šå¸¸åŒ…å«é€—å·ï¼‰ä¸ä¼šè¢«é”™è¯¯è§£é‡Šã€‚ Gradle æ’ä»¶Spring Boot çš„ Gradle æ’ä»¶å·²åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šè¿›è¡Œäº†é‡æ–°ç¼–å†™ï¼Œä»¥å®ç°è®¸å¤šé‡å¤§æ”¹è¿›ã€‚æ‚¨å¯ä»¥åœ¨å…¶å‚è€ƒæ–‡çŒ®å’Œ API æ–‡æ¡£ä¸­é˜…è¯»å…³äºæ’ä»¶åŠŸèƒ½çš„æ›´å¤šä¿¡æ¯ã€‚ Spring Boot ç°åœ¨éœ€è¦ Gradle 4.x. å¦‚æœæ‚¨è¦å‡çº§ä½¿ç”¨ Gradle çš„é¡¹ç›®ï¼Œè¯·æŸ¥çœ‹è¿ç§»æŒ‡å—ã€‚ KotlinSpring Boot 2.0 ç°åœ¨åŒ…å«å¯¹ Kotlin 1.2.x çš„æ”¯æŒï¼Œå¹¶æä¾›äº†runApplication ï¼Œä¸€ä¸ªä½¿ç”¨ Kotlin è¿è¡Œ Spring Boot åº”ç”¨ç¨‹åºçš„æ–¹æ³•ã€‚æˆ‘ä»¬è¿˜å…¬å¼€å’Œåˆ©ç”¨äº† Kotlin å¯¹å…¶ä»– Spring é¡¹ç›®ï¼ˆå¦‚Spring Frameworkï¼ŒSpring Data å’Œ Reactorï¼‰å·²æ·»åŠ åˆ°å…¶æœ€è¿‘ç‰ˆæœ¬ä¸­çš„æ”¯æŒã€‚ æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…å‚è€ƒæ–‡æ¡£çš„Kotlinæ”¯æŒéƒ¨åˆ†ã€‚ Actuator æ”¹è¿›åœ¨ Spring Boot 2.0 ä¸­ Actuator endpoints æœ‰å¾ˆå¤§çš„æ”¹è¿›ã€‚æ‰€æœ‰ HTTP Actuator endpoints ç°åœ¨éƒ½åœ¨è¯¥/actuatorè·¯å¾„ä¸‹å…¬å¼€ï¼Œå¹¶ä¸”ç”Ÿæˆçš„ JSON æœ‰æ•ˆè´Ÿè½½å¾—åˆ°äº†æ”¹è¿›ã€‚ æˆ‘ä»¬ç°åœ¨ä¹Ÿä¸ä¼šåœ¨é»˜è®¤æƒ…å†µä¸‹æš´éœ²å¾ˆå¤šç«¯ç‚¹ã€‚å¦‚æœæ‚¨è¦å‡çº§ç°æœ‰çš„ Spring Boot 1.5 åº”ç”¨ç¨‹åºï¼Œè¯·åŠ¡å¿…æŸ¥çœ‹è¿ç§»æŒ‡å—å¹¶ç‰¹åˆ«æ³¨æ„è¯¥management.endpoints.web.exposure.includeå±æ€§ã€‚ Actuator JSONSpring Boot 2.0 æ”¹è¿›äº†ä»è®¸å¤šç«¯ç‚¹è¿”å›çš„ JSON æœ‰æ•ˆè´Ÿè½½ã€‚ ç°åœ¨è®¸å¤šç«¯ç‚¹éƒ½å…·æœ‰æ›´ç²¾ç¡®åœ°åæ˜ åº•å±‚æ•°æ®çš„ JSONã€‚ä¾‹å¦‚ï¼Œ/actuator/conditionsç»ˆç«¯ï¼ˆ/autoconfigåœ¨Spring Boot 1.5ä¸­ï¼‰ç°åœ¨æœ‰ä¸€ä¸ªé¡¶çº§contextså¯†é’¥æ¥å°†ç»“æœåˆ†ç»„ApplicationContextã€‚ ç°åœ¨è¿˜ä½¿ç”¨ Spring REST Docs ç”Ÿæˆäº†å¹¿æ³›çš„ REST API æ–‡æ¡£ï¼Œå¹¶éšæ¯ä¸ªç‰ˆæœ¬å‘å¸ƒã€‚ Jersey and WebFlux æ”¯æŒé™¤äº†æ”¯æŒ Spring MVC å’Œ JMXï¼Œæ‚¨ç°åœ¨å¯ä»¥åœ¨å¼€å‘ Jersey æˆ– WebFlux åº”ç”¨ç¨‹åºæ—¶è®¿é—®æ‰§è¡Œå™¨ç«¯ç‚¹ã€‚Jersey æ”¯æŒé€šè¿‡è‡ªå®šä¹‰ Jersey æä¾›Resourceï¼ŒWebFlux ä½¿ç”¨è‡ªå®šä¹‰HandlerMappingã€‚ Hypermedia linksè¯¥/actuatorç«¯ç‚¹ç°åœ¨æä¾›äº†ä¸€ä¸ª HAL æ ¼å¼çš„å“åº”æä¾›é“¾æ¥åˆ°æ‰€æœ‰æ´»åŠ¨ç«¯ç‚¹ï¼ˆå³ä½¿ä½ æ²¡æœ‰ Spring HATEOAS åœ¨classpathï¼‰ã€‚ Actuator @Endpointsä¸ºäº†æ”¯æŒ Spring MVCï¼ŒJMXï¼ŒWebFlux å’Œ Jerseyï¼Œæˆ‘ä»¬ä¸º Actuator @Endpoints å¼€å‘äº†ä¸€ç§æ–°çš„ç¼–ç¨‹æ¨¡å‹ã€‚è¯¥@Endpointæ³¨è§£å¯ä»¥ä¸@ReadOperationï¼Œ@WriteOperation å’Œ @DeleteOperation ç»„åˆä½¿ç”¨å¼€å‘ endpointsã€‚ æ‚¨è¿˜å¯ä»¥ä½¿ç”¨@EndpointWebExtensionæˆ–@EndpointJmxExtensionç¼–å†™æŠ€æœ¯ç‰¹å®šçš„å¢å¼ºåŠŸèƒ½åˆ° endpointsã€‚è¯¦ç»†ä¿¡æ¯è¯·å‚é˜…æ›´æ–°çš„å‚è€ƒæ–‡æ¡£ã€‚ MicrometerSpring Boot 2.0 ä¸å†æä¾›è‡ªå·±çš„æŒ‡æ ‡ APIã€‚ç›¸åï¼Œæˆ‘ä»¬ä¾é  micrometer.io æ¥æ»¡è¶³æ‰€æœ‰åº”ç”¨ç¨‹åºç›‘è§†éœ€æ±‚ã€‚ Micrometer åŒ…æ‹¬å°ºå¯¸æŒ‡æ ‡çš„æ”¯æŒï¼Œå½“ä¸å°ºå¯¸ç›‘æµ‹ç³»ç»Ÿé…å¯¹æ—¶ï¼Œå°ºå¯¸æŒ‡æ ‡å¯ä»¥æœ‰æ•ˆè®¿é—®ç‰¹å®šçš„æŒ‡å®šåº¦é‡æ ‡å‡†ï¼Œå¹¶ä¸”å¯ä»¥åœ¨å…¶å°ºå¯¸èŒƒå›´å†…å‘ä¸‹é’»å–ã€‚ æŒ‡æ ‡å¯ä»¥è¾“å‡ºåˆ°å„ç§ç³»ç»Ÿå’Œå¼€ç®±å³ç”¨çš„ Spring Boot 2.0ï¼Œä¸º Atlasï¼ŒDatadogï¼ŒGangliaï¼ŒGraphiteï¼ŒInfluxï¼ŒJMXï¼ŒNew Relicï¼ŒPrometheusï¼ŒSignalFxï¼ŒStatsD å’Œ Wavefront æä¾›æ”¯æŒã€‚å¦å¤–è¿˜å¯ä»¥ä½¿ç”¨ç®€å•çš„å†…å­˜ä¸­åº¦é‡æ ‡å‡†ã€‚ é›†æˆéš JVM æŒ‡æ ‡ï¼ˆåŒ…æ‹¬ CPUï¼Œå†…å­˜ï¼Œçº¿ç¨‹å’Œ GCï¼‰ï¼ŒLogbackï¼ŒTomcatï¼ŒSpring MVCï¼†æä¾›RestTemplateã€‚ æœ‰å…³æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…å‚è€ƒæ–‡æ¡£çš„æ›´æ–°â€œæŒ‡æ ‡â€éƒ¨åˆ†ã€‚ æ•°æ®æ”¯æŒé™¤äº†ä¸Šé¢æåˆ°çš„ Reactive Spring Data æ”¯æŒå¤–ï¼Œåœ¨æ•°æ®é¢†åŸŸè¿˜è¿›è¡Œäº†å…¶ä»–ä¸€äº›æ›´æ–°å’Œæ”¹è¿›ã€‚ HikariCPSpring Boot 2.0 ä¸­çš„é»˜è®¤æ•°æ®åº“æ± æŠ€æœ¯å·²ä» Tomcat Pool åˆ‡æ¢åˆ° HikariCPã€‚æˆ‘ä»¬å‘ç° Hakari æä¾›äº†å“è¶Šçš„æ€§èƒ½ï¼Œæˆ‘ä»¬çš„è®¸å¤šç”¨æˆ·æ›´å–œæ¬¢ Tomcat Poolã€‚ åˆå§‹åŒ–æ•°æ®åº“åˆå§‹åŒ–é€»è¾‘åœ¨ Spring Boot 2.0 ä¸­å·²ç»åˆç†åŒ–ã€‚Spring Batchï¼ŒSpring Integrationï¼ŒSpring Session å’Œ Quartzçš„åˆå§‹åŒ–ç°åœ¨ä»…åœ¨ä½¿ç”¨åµŒå…¥å¼æ•°æ®åº“æ—¶æ‰ä¼šé»˜è®¤å‘ç”Ÿã€‚è¯¥enabledå±æ€§å·²è¢«æ›¿æ¢ä¸ºæ›´å…·è¡¨ç°åŠ›æšä¸¾ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ æƒ³ä¸€ç›´æ‰§è¡Œ Spring Batch çš„åˆå§‹åŒ–ï¼Œæ‚¨å¯ä»¥è®¾ç½®spring.batch.initialize-schema=alwaysã€‚ å¦‚æœ Flyway æˆ– Liquibase æ­£åœ¨ç®¡ç†æ‚¨çš„ DataSource çš„æ¨¡å¼ï¼Œå¹¶ä¸”æ‚¨æ­£åœ¨ä½¿ç”¨åµŒå…¥å¼æ•°æ®åº“ï¼ŒSpring Boot ç°åœ¨ä¼šè‡ªåŠ¨å…³é—­ Hibernate çš„è‡ªåŠ¨ DDL åŠŸèƒ½ã€‚ JOOQSpring Boot 2.0 ç°åœ¨åŸºäº DataSource è‡ªåŠ¨æ£€æµ‹ JOOQ æ–¹è¨€ï¼ˆç±»ä¼¼äºä¸º JPA æ–¹è¨€æ‰€åšçš„ï¼‰ã€‚@JooqTestæ˜¯æ–°å¼•å…¥çš„æ³¨è§£ç”¨æ¥ç®€åŒ–é‚£äº›åªæœ‰ JOOQ å¿…é¡»è¢«ä½¿ç”¨çš„æµ‹è¯•ã€‚ JdbcTemplateSpring Boot è‡ªåŠ¨é…ç½®çš„ JdbcTemplate ç°åœ¨å¯ä»¥é€šè¿‡ spring.jdbc.template å±æ€§è¿›è¡Œè‡ªå®šä¹‰ã€‚æ­¤å¤–ï¼ŒNamedParameterJdbcTemplateè‡ªåŠ¨é…ç½®çš„å†…å®¹ä¼šé‡ç”¨JdbcTemplateã€‚ Spring Data Web é…ç½®Spring Boot å…¬å¼€äº†ä¸€ä¸ªæ–°çš„spring.data.webé…ç½®åç§°ç©ºé—´ï¼Œå¯ä»¥è½»æ¾é…ç½®åˆ†é¡µå’Œæ’åºã€‚ InfluxDBSpring Boot ç°åœ¨è‡ªåŠ¨é…ç½®å¼€æºæ—¶é—´åºåˆ—æ•°æ®åº“ InfluxDBã€‚è¦å¯ç”¨ InfluxDB æ”¯æŒï¼Œæ‚¨éœ€è¦è®¾ç½®ä¸€ä¸ªspring.influx.urlå±æ€§ï¼Œå¹¶å°†å…¶åŒ…å«influxdb-javaåœ¨æ‚¨çš„ç±»è·¯å¾„ä¸­ã€‚ Flyway/Liquibase çµæ´»é…ç½®å¦‚æœä»…æä¾›è‡ªå®šä¹‰urlæˆ–userå±æ€§ï¼Œåˆ™ Flyway å’Œ Liquibase çš„è‡ªåŠ¨é…ç½®ç°åœ¨å°†é‡ç”¨æ ‡å‡†æ•°æ®æºå±æ€§ï¼Œè€Œä¸æ˜¯å¿½ç•¥å®ƒä»¬ã€‚è¿™ä½¿æ‚¨å¯ä»¥åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰çš„æ•°æ®æºï¼Œä»…ç”¨äºæ‰€éœ€ä¿¡æ¯çš„è¿ç§»ã€‚ Hibernateç°åœ¨æ”¯æŒè‡ªå®šä¹‰ Hibernate å‘½åç­–ç•¥ã€‚å¯¹äºé«˜çº§åœºæ™¯ï¼Œç°åœ¨å¯ä»¥åœ¨ä¸Šä¸‹æ–‡ä¸­å®šä¹‰ImplicitNamingStrategyæˆ–PhysicalNamingStrategyä½¿ç”¨å¸¸è§„ beanã€‚ ç°åœ¨ä¹Ÿå¯ä»¥é€šè¿‡å…¬å¼€HibernatePropertiesCustomizerbean æ¥æ›´åŠ ç»†è‡´åœ°å®šåˆ¶ Hibernate ä½¿ç”¨çš„å±æ€§ã€‚ MongoDB å®¢æˆ·ç«¯è‡ªå®šä¹‰ç°åœ¨å¯ä»¥é€šè¿‡å®šä¹‰ä¸€ä¸ªç±»å‹çš„ bean æ¥ä¸º Spring Boot è‡ªåŠ¨é…ç½®çš„ Mongo å®¢æˆ·ç«¯åº”ç”¨é«˜çº§å®šåˆ¶MongoClientSettingsBuilderCustomizerã€‚ Redisç°åœ¨å¯ä»¥ä½¿ç”¨spring.cache.redis.*å±æ€§é…ç½® Redis çš„ç¼“å­˜é»˜è®¤å€¼ã€‚ Webé™¤äº†ä¸Šé¢æåˆ°çš„ WebFlux å’Œ WebFlux.fn æ”¯æŒä¹‹å¤–ï¼Œè¿˜åœ¨å¼€å‘ Web åº”ç”¨ç¨‹åºæ—¶è¿›è¡Œäº†ä»¥ä¸‹æ”¹è¿›ã€‚ ä¸Šä¸‹æ–‡è·¯å¾„è®°å½•å½“ä½¿ç”¨åµŒå…¥å¼å®¹å™¨æ—¶ï¼Œå½“æ‚¨çš„åº”ç”¨ç¨‹åºå¯åŠ¨æ—¶ï¼Œä¸Šä¸‹æ–‡è·¯å¾„å°†ä¸ HTTP ç«¯å£ä¸€èµ·è®°å½•ã€‚ä¾‹å¦‚ï¼ŒåµŒå…¥å¼ Tomcat ç°åœ¨çœ‹èµ·æ¥åƒè¿™æ ·ï¼š 1Tomcat åœ¨ç«¯å£ä¸Šå¯åŠ¨ï¼š8080ï¼ˆhttpï¼‰ï¼Œå…¶ä¸Šä¸‹æ–‡è·¯å¾„ä¸º &apos;/foo&apos; Webè¿‡æ»¤å™¨åˆå§‹åŒ–Web è¿‡æ»¤å™¨ç°åœ¨åœ¨æ‰€æœ‰æ”¯æŒçš„å®¹å™¨ä¸Šæ€¥åˆ‡åœ°åˆå§‹åŒ–ã€‚ ThymeleafThymeleaf åˆå§‹åŒ–ç°åœ¨åŒ…æ‹¬thymeleaf-extras-java8timeï¼Œæä¾›javax.timeç±»å‹æ”¯æŒã€‚ JSON æ”¯æŒæ–°çš„spring-boot-starter-jsonèµ·å§‹è€…æ”¶é›†å¿…è¦çš„ä½ä»¥è¯»å–å’Œå†™å…¥ JSONã€‚å®ƒä¸ä»…æä¾›äº†jackson-databindä¸Java8 å·¥ä½œæ—¶ï¼Œä¹Ÿæ˜¯æœ‰ç”¨çš„æ¨¡å—ï¼šjackson-datatype-jdk8ï¼Œjackson-datatype-jsr310å’Œjackson-module-parameter-namesã€‚è¿™ä¸ªæ–°çš„èµ·åŠ¨å™¨ç°åœ¨è¢«ç”¨äºjackson-databindä¹‹å‰å®šä¹‰çš„åœ°æ–¹ã€‚ å¦‚æœæ‚¨æ›´å–œæ¬¢ Jackson ä¹‹å¤–çš„å…¶ä»–äº§å“ï¼Œæˆ‘ä»¬å¯¹ GSON çš„æ”¯æŒåœ¨ Spring Boot 2.0 å·²ç»å¤§å¤§æé«˜ã€‚æˆ‘ä»¬è¿˜å¼•å…¥äº†å¯¹ JSON-B çš„æ”¯æŒï¼ˆåŒ…æ‹¬ JSON-B æµ‹è¯•æ”¯æŒï¼‰ã€‚ Quartzè‡ªåŠ¨é…ç½®æ”¯æŒç›®å‰åŒ…å«äº† Quartz Schedulerã€‚æˆ‘ä»¬è¿˜æ·»åŠ äº†æ–°çš„spring-boot-starter-quartz åˆå§‹åŒ– POMã€‚ æ‚¨å¯ä»¥ä½¿ç”¨å†…å­˜JobStoresä¸­æˆ–å®Œæ•´çš„åŸºäº JDBC çš„å­˜å‚¨ã€‚æ‰€æœ‰JobDetailï¼ŒCalendarå¹¶Triggerä»ä½ çš„ Springåº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡è±†å°†è‡ªåŠ¨æ³¨å†ŒSchedulerã€‚ æœ‰å…³æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·é˜…è¯»å‚è€ƒæ–‡æ¡£çš„æ–°â€œQuartz Schedulerâ€éƒ¨åˆ†ã€‚ æµ‹è¯•å¯¹ Spring Boot 2.0 ä¸­æä¾›çš„æµ‹è¯•æ”¯æŒè¿›è¡Œäº†ä¸€äº›è¡¥å……å’Œè°ƒæ•´ï¼š @WebFluxTestå·²æ·»åŠ æ–°æ³¨é‡Šä»¥æ”¯æŒ WebFlux åº”ç”¨ç¨‹åºçš„â€œåˆ‡ç‰‡â€æµ‹è¯•ã€‚ Converterå’ŒGenericConverterè±†ç±»ç°åœ¨è‡ªåŠ¨æ‰«æ@WebMvcTestå’Œ@WebFluxTestã€‚ @AutoConfigureWebTestClientå·²ç»æ·»åŠ äº†ä¸€ä¸ªæ³¨é‡Šæ¥æä¾›ä¸€ä¸ªWebTestClientbean ä¾›æµ‹è¯•ä½¿ç”¨ã€‚æ³¨é‡Šä¼šè‡ªåŠ¨åº”ç”¨äº@WebFluxTestæµ‹è¯•ã€‚ å¢åŠ äº†ä¸€ä¸ªæ–°çš„ApplicationContextRunneræµ‹è¯•å®ç”¨ç¨‹åºï¼Œå¯ä»¥å¾ˆå®¹æ˜“åœ°æµ‹è¯•æ‚¨çš„è‡ªåŠ¨é…ç½®ã€‚æˆ‘ä»¬å·²å°†å¤§éƒ¨åˆ†å†…éƒ¨æµ‹è¯•å¥—ä»¶ç§»è‡³æ­¤æ–°æ¨¡å‹ã€‚è¯¦ç»†ä¿¡æ¯è¯·å‚é˜…æ›´æ–°çš„æ–‡æ¡£ã€‚ å…¶å®ƒé™¤äº†ä¸Šé¢åˆ—å‡ºçš„å˜åŒ–å¤–ï¼Œè¿˜æœ‰å¾ˆå¤šå°çš„è°ƒæ•´å’Œæ”¹è¿›ï¼ŒåŒ…æ‹¬ï¼š @ConditionalOnBeanç°åœ¨åœ¨ç¡®å®šæ˜¯å¦æ»¡è¶³æ¡ä»¶æ—¶ä½¿ç”¨é€»è¾‘ANDè€Œä¸æ˜¯é€»è¾‘ORã€‚ æ— æ¡ä»¶ç±»ç°åœ¨åŒ…å«åœ¨è‡ªåŠ¨é…ç½®æŠ¥å‘Šä¸­ã€‚ è¯¥springCLI åº”ç”¨ç¨‹åºç°åœ¨åŒ…æ‹¬encodepasswordå¯ç”¨äºåˆ›å»º Spring Security çš„å…¼å®¹æ•£åˆ—å¯†ç å‘½ä»¤ã€‚ è®¡åˆ’ä»»åŠ¡ï¼ˆå³ @EnableSchedulingï¼‰å¯ä»¥ä½¿ç”¨scheduledtasksæ‰§è¡Œå™¨ç«¯ç‚¹è¿›è¡Œå®¡æŸ¥ã€‚ è¯¥loggersé©±åŠ¨å™¨ç»ˆç«¯ç°åœ¨å…è®¸ä½ é‡æ–°è®¾ç½®ä¸€ä¸ªè®°å½•å™¨çº§åˆ«ä¸ºå®ƒçš„é»˜è®¤ã€‚ Spring Session ç”¨æˆ·ç°åœ¨å¯ä»¥é€šè¿‡sessionsæ‰§è¡Œå™¨ç«¯ç‚¹æŸ¥æ‰¾å’Œåˆ é™¤ä¼šè¯ã€‚ ä½¿ç”¨spring-boot-starter-parentç°åœ¨åŸºäº Maven çš„åº”ç”¨ç¨‹åº-parametersé»˜è®¤ä½¿ç”¨æ ‡å¿—ã€‚ æˆ‘ä»¬çš„æ„å»ºç°åœ¨ä½¿ç”¨ concourse çš„ CI å’Œæˆ‘ä»¬çš„é¡¹ç›® POM æ–‡ä»¶å·²è¢«é‡æ„ï¼Œä½¿å®ƒä»¬æ›´ç®€å•çš„ã€‚ åŠ¨ç”» ASCII è‰ºæœ¯æœ€åï¼Œä¸ºäº†å¥½ç©ï¼ŒSpring Boot 2.0 ç°åœ¨æ”¯æŒåŠ¨ç”» GIF æ¨ªå¹…ã€‚ å‚è€ƒèµ„æ–™https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-2.0-Release-Notes ç›¸å…³æ–‡ç« 1ã€Spring Boot 2.0ç³»åˆ—æ–‡ç« (ä¸€)ï¼šSpring Boot 2.0 è¿ç§»æŒ‡å— 2ã€Spring Boot 2.0ç³»åˆ—æ–‡ç« (äºŒ)ï¼šSpring Boot 2.0 æ–°ç‰¹æ€§è¯¦è§£ 3ã€Spring Boot 2.0ç³»åˆ—æ–‡ç« (ä¸‰)ï¼šSpring Boot 2.0 é…ç½®æ”¹å˜ 4ã€Spring Boot 2.0ç³»åˆ—æ–‡ç« (å››)ï¼šSpring Boot 2.0 æºç é˜…è¯»ç¯å¢ƒæ­å»º 5ã€Spring Boot 2.0ç³»åˆ—æ–‡ç« (äº”)ï¼šSpring Boot 2.0 é¡¹ç›®æºç ç»“æ„é¢„è§ˆ 6ã€Spring Boot 2.0ç³»åˆ—æ–‡ç« (å…­)ï¼šSpring boot 2.0 ä¸­ SpringBootApplication æ³¨è§£è¯¦è§£ 7ã€Spring Boot 2.0ç³»åˆ—æ–‡ç« (ä¸ƒ)ï¼šSpringApplication æ·±å…¥æ¢ç´¢","tags":[{"name":"Java","slug":"Java","permalink":"http://yoursite.com/tags/Java/"},{"name":"SpringBoot","slug":"SpringBoot","permalink":"http://yoursite.com/tags/SpringBoot/"}]},{"title":"å°é©¬å“¥ ã€ŠJava å¾®æœåŠ¡å®è·µ - Spring Boot ç³»åˆ—ã€‹å¼ºçƒˆæ¨è","date":"2018-03-03T16:00:00.000Z","path":"2018/03/04/springboot-vedio/","text":"è§†é¢‘å†…å®¹Java å¾®æœåŠ¡å®è·µ - Spring Boot ä¸ºç³»åˆ—è®²åº§ï¼ŒäºŒåèŠ‚ä¸“é¢˜ç›´æ’­ï¼Œæ—¶é•¿é«˜è¾¾50ä¸ªå°æ—¶ï¼ŒåŒ…æ‹¬ç›®å‰æœ€æµè¡ŒæŠ€æœ¯ï¼Œæ·±å…¥æºç åˆ†æï¼Œæˆäººä»¥æ¸”çš„æ–¹å¼ï¼Œå¸®åŠ©åˆå­¦è€…æ·±å…¥æµ…å‡ºåœ°æŒæ¡ï¼Œä¸ºé«˜é˜¶ä»ä¸šäººå‘˜æŠ›ç –å¼•ç‰ã€‚ è®²å¸ˆä»‹ç» å°é©¬å“¥ï¼Œä¸€çº¿äº’è”ç½‘å…¬å¸æŠ€æœ¯ä¸“å®¶ï¼Œåä½™å¹´ Java EE ä»ä¸šç»éªŒï¼Œæ¶æ„å¸ˆã€å¾®æœåŠ¡å¸ƒé“å¸ˆã€‚ç›®å‰ä¸»è¦è´Ÿè´£å¾®æœåŠ¡æŠ€æœ¯å®æ–½ã€æ¶æ„è¡è¿›ã€åŸºç¡€è®¾æ–½æ„å»ºç­‰ã€‚é‡ç‚¹å…³æ³¨äº‘è®¡ç®—ã€å¾®æœåŠ¡ä»¥åŠè½¯ä»¶æ¶æ„ç­‰é¢†åŸŸã€‚é€šè¿‡ SUN Javaï¼ˆSCJPã€SCWCDã€SCBCDï¼‰ä»¥åŠ Oracle OCA ç­‰çš„è®¤è¯ã€‚ è§†é¢‘åˆ—è¡¨1ã€Java å¾®æœåŠ¡å®è·µ - Spring Boot ç³»åˆ—ï¼ˆä¸€ï¼‰åˆä½“éªŒ 2ã€Java å¾®æœåŠ¡å®è·µ - Spring Boot ç³»åˆ—ï¼ˆäºŒï¼‰ Webç¯‡ï¼ˆä¸Šï¼‰ 3ã€Java å¾®æœåŠ¡å®è·µ - Spring Boot ç³»åˆ—ï¼ˆä¸‰ï¼‰Webç¯‡ï¼ˆä¸­ï¼‰ 4ã€ Java å¾®æœåŠ¡å®è·µ - Spring Boot ç³»åˆ—ï¼ˆå››ï¼‰Webç¯‡ï¼ˆä¸‹ï¼‰ 5ã€Java å¾®æœåŠ¡å®è·µ - Spring Boot ç³»åˆ—ï¼ˆäº”ï¼‰åµŒå…¥å¼Webå®¹å™¨ 6ã€Java å¾®æœåŠ¡å®è·µ - Spring Boot ç³»åˆ—ï¼ˆå…­ï¼‰æ•°æ®åº“ JDBC 7ã€ Java å¾®æœåŠ¡å®è·µ - Spring Boot ç³»åˆ—ï¼ˆä¸ƒï¼‰MyBatis 8ã€ Java å¾®æœåŠ¡å®è·µ - Spring Boot ç³»åˆ—ï¼ˆå…«ï¼‰JPA 9ã€ Java å¾®æœåŠ¡å®è·µ - Spring Boot ç³»åˆ—ï¼ˆä¹ï¼‰NoSQL 10ã€ Java å¾®æœåŠ¡å®è·µ - Spring Boot ç³»åˆ—ï¼ˆåï¼‰ç¼“å­˜ 11ã€ Java å¾®æœåŠ¡å®è·µ - Spring Boot ç³»åˆ—ï¼ˆåä¸€ï¼‰æ¶ˆæ¯ 12ã€ Java å¾®æœåŠ¡å®è·µ - Spring Boot ç³»åˆ—ï¼ˆåäºŒï¼‰éªŒè¯ 13ã€Java å¾®æœåŠ¡å®è·µ - Spring Boot ç³»åˆ—ï¼ˆåä¸‰ï¼‰WebSocket 14ã€ Java å¾®æœåŠ¡å®è·µ- Spring Boot ç³»åˆ—ï¼ˆåå››ï¼‰WebService 15ã€ Java å¾®æœåŠ¡å®è·µ - Spring Boot ç³»åˆ—ï¼ˆåäº”ï¼‰å®‰å…¨ 16ã€Java å¾®æœåŠ¡å®è·µ - Spring Boot ç³»åˆ—ï¼ˆåå…­ï¼‰æ—¥å¿— 17ã€Java å¾®æœåŠ¡å®è·µ - Spring Boot ç³»åˆ—ï¼ˆåä¸ƒï¼‰ç›‘ç®¡ 18ã€Java å¾®æœåŠ¡å®è·µ - Spring Boot ç³»åˆ—ï¼ˆåå…«ï¼‰é…ç½® 19ã€ Java å¾®æœåŠ¡å®è·µ - Spring Boot ç³»åˆ—ï¼ˆåä¹ï¼‰æµ‹è¯• 20ã€Java å¾®æœåŠ¡å®è·µ - Spring Boot ç³»åˆ—ï¼ˆäºŒåï¼‰è‡ªå®šä¹‰å¯åŠ¨å™¨ è´­ä¹°é“¾æ¥ä½ å¯ä»¥ä½¿ç”¨ä¸‹é¢é“¾æ¥è´­ä¹°ï¼ˆæœ‰ä¼˜æƒ çš„å“¦ï¼‰ https://segmentfault.com/ls/1650000011063780?r=bPrFW3 æˆ–è€…ä½ ä¹Ÿå¯ä»¥æ‰«æä¸‹é¢çš„äºŒç»´ç è´­ä¹°ï¼ˆåŒæ ·ä¹Ÿæœ‰ä¼˜æƒ çš„å“¦ï¼‰ è¯¾ç¨‹è¯„ä»· 1ã€å°é©¬å“¥è®²çš„å¥½è¯¦ç»†ï¼Œä»¥å‰ä¼¼æ˜¯è€Œéçš„ä¸œä¸œï¼Œç°åœ¨éƒ½æ‡‚äº†2ã€å­¦åˆ°äº†æ€ä¹ˆä½¿ç”¨ï¼Œä¹Ÿå­¦åˆ°äº†æ€ä¹ˆè‡ªå®šä¹‰æ ¡éªŒï¼ŒçŸ¥å…¶ç„¶ä¹ŸçŸ¥å…¶æ‰€ä»¥ç„¶3ã€6666 èµ·é£äº† websocket ä¹‹å‰çœ‹äº†å†™ è¿™æ¬¡æ›´åŠ æ·±å…¥å’Œæ ‡å‡†åŒ– æ„Ÿè°¢å°é©¬å“¥å¸¦æ¥çš„å¹²è´§4ã€æ·±å…¥æµ…å‡ºï¼Œæ€è·¯æ¸…æ™°ã€‚5ã€æ·±å…¥æµ…å‡ºå•Šã€‚éå¸¸å¥½ï¼Œè€Œä¸”å¦‚æœæœ‰é—®é¢˜ï¼Œä¸ç®¡ç®€å•è¿˜æ˜¯éš¾çš„ï¼Œéƒ½ä»ä¸åŒçš„è§’åº¦å’Œå±‚æ¬¡æ¥è§£ç­”äº†ã€‚å­¦åˆ°çš„ä¸œè¥¿éå¸¸å¤šã€‚è°¢è°¢ã€‚ ä»¥ä¸Šè¯„ä»·æ‘˜è‡ª segmentfault ç›¸å…³è¯¾ç¨‹Java å¾®æœåŠ¡å®è·µ - Spring Cloud ç³»åˆ— ä¼˜æƒ åœ°å€ï¼šhttps://segmentfault.com/ls/1650000011386794?r=bPrFW3 å¦å¤–ï¼šè¿˜æœ‰è¿™ä¸ª Java å¾®æœåŠ¡å®è·µ - Spring Boot / Spring Cloudï¼Œç®—æ˜¯ä¸¤ä¸ªçš„åˆé›†äº†ï¼Œåˆä¹°çš„è¯ä¼˜æƒ æ›´å¤§ã€‚ ä¼˜æƒ åœ°å€ï¼šhttps://segmentfault.com/ls/1650000011387052?r=bPrFW3 å…³æ³¨æˆ‘ å»ºäº†ä¸ªä¸é”™çš„å¾®ä¿¡ç¾¤ï¼Œå¦‚æœæœ‰æ„Ÿå…´è¶£çš„å¯ä»¥åŠ æˆ‘å¾®ä¿¡ï¼Œç„¶åæ‹‰ä½ è¿›ç¾¤äº¤æµã€‚","tags":[{"name":"Java","slug":"Java","permalink":"http://yoursite.com/tags/Java/"},{"name":"SpringBoot","slug":"SpringBoot","permalink":"http://yoursite.com/tags/SpringBoot/"},{"name":"å¾®æœåŠ¡","slug":"å¾®æœåŠ¡","permalink":"http://yoursite.com/tags/å¾®æœåŠ¡/"}]},{"title":"å°é©¬å“¥ ã€ŠJava å¾®æœåŠ¡å®è·µ - Spring Cloud ç³»åˆ—ã€‹å¼ºçƒˆæ¨è","date":"2018-03-03T16:00:00.000Z","path":"2018/03/04/springcloud-vedio/","text":"è§†é¢‘å†…å®¹Spring Cloud ç³»åˆ—è¯¾ç¨‹è‡´åŠ›äºä»¥å®æˆ˜çš„æ–¹å¼è¦†ç›–æ‰€æœ‰åŠŸèƒ½ç‰¹æ€§ï¼Œç»“åˆå°é©¬å“¥åä½™å¹´çš„å­¦ä¹ æ–¹æ³•å’Œå·¥ä½œç»éªŒï¼Œä½“ä¼šä½œè€…è®¾è®¡æ„å›¾ã€‚ç»“åˆæºç åŠ æ·±ç†è§£ï¼Œæœ€ç»ˆè¾¾åˆ°å½¢æˆç³»ç»Ÿæ€§çš„çŸ¥è¯†å’ŒæŠ€æœ¯ä½“ç³»çš„ç›®çš„ã€‚ è®²å¸ˆä»‹ç» å°é©¬å“¥ï¼Œä¸€çº¿äº’è”ç½‘å…¬å¸æŠ€æœ¯ä¸“å®¶ï¼Œåä½™å¹´ Java EE ä»ä¸šç»éªŒï¼Œæ¶æ„å¸ˆã€å¾®æœåŠ¡å¸ƒé“å¸ˆã€‚ç›®å‰ä¸»è¦è´Ÿè´£å¾®æœåŠ¡æŠ€æœ¯å®æ–½ã€æ¶æ„è¡è¿›ã€åŸºç¡€è®¾æ–½æ„å»ºç­‰ã€‚é‡ç‚¹å…³æ³¨äº‘è®¡ç®—ã€å¾®æœåŠ¡ä»¥åŠè½¯ä»¶æ¶æ„ç­‰é¢†åŸŸã€‚é€šè¿‡ SUN Javaï¼ˆSCJPã€SCWCDã€SCBCDï¼‰ä»¥åŠ Oracle OCA ç­‰çš„è®¤è¯ã€‚ è§†é¢‘åˆ—è¡¨1ã€Java å¾®æœåŠ¡å®è·µ - Spring Cloud ç³»åˆ—ï¼ˆä¸€ï¼‰äº‘åŸç”Ÿåº”ç”¨ 2ã€Java å¾®æœåŠ¡å®è·µ - Spring Cloud ç³»åˆ—ï¼ˆäºŒï¼‰é…ç½®å®¢æˆ·ç«¯ 3ã€Java å¾®æœåŠ¡å®è·µ - Spring Cloud ç³»åˆ—ï¼ˆä¸‰ï¼‰é…ç½®æœåŠ¡å™¨ 4ã€Java å¾®æœåŠ¡å®è·µ - Spring Cloud ç³»åˆ—ï¼ˆå››ï¼‰æœåŠ¡å‘ç°/æ³¨å†Œ 5ã€Java å¾®æœåŠ¡å®è·µ - Spring Cloud ç³»åˆ—ï¼ˆäº”ï¼‰é«˜å¯ç”¨æœåŠ¡æ²»ç† 6ã€Java å¾®æœåŠ¡å®è·µ - Spring Cloud ç³»åˆ—ï¼ˆå…­ï¼‰è´Ÿè½½å‡è¡¡ 7ã€Java å¾®æœåŠ¡å®è·µ - Spring Cloud ç³»åˆ—ï¼ˆä¸ƒï¼‰Ribbon æºç  8ã€Java å¾®æœåŠ¡å®è·µ - Spring Cloud ç³»åˆ—ï¼ˆå…«ï¼‰æœåŠ¡çŸ­è·¯ 9ã€Java å¾®æœåŠ¡å®è·µ - Spring Cloud ç³»åˆ—ï¼ˆä¹ï¼‰Hystrixæºç  10ã€Java å¾®æœåŠ¡å®è·µ - Spring Cloud ç³»åˆ—ï¼ˆåï¼‰æœåŠ¡è°ƒç”¨ 11ã€Java å¾®æœåŠ¡å®è·µ - Spring Cloud ç³»åˆ—ï¼ˆåä¸€ï¼‰æœåŠ¡ç½‘å…³ 12ã€Java å¾®æœåŠ¡å®è·µ - Spring Cloud ç³»åˆ—ï¼ˆåäºŒï¼‰æ¶ˆæ¯é©±åŠ¨æ•´åˆ 13ã€Java å¾®æœåŠ¡å®è·µ - Spring Cloud ç³»åˆ—ï¼ˆåä¸‰ï¼‰Binderå®ç° 14ã€Java å¾®æœåŠ¡å®è·µ - Spring Cloud ç³»åˆ—ï¼ˆåå››ï¼‰æ¶ˆæ¯æ€»çº¿ 15ã€Java å¾®æœåŠ¡å®è·µ - Spring Cloud ç³»åˆ—ï¼ˆåäº”ï¼‰åˆ†å¸ƒå¼åº”ç”¨è·Ÿè¸ª 16ã€Java å¾®æœåŠ¡å®è·µ - Spring Cloud ç³»åˆ—ï¼ˆåå…­ï¼‰ç³»åˆ—å›é¡¾ è´­ä¹°é“¾æ¥ä½ å¯ä»¥ä½¿ç”¨ä¸‹é¢é“¾æ¥è´­ä¹°ï¼ˆæœ‰ä¼˜æƒ çš„å“¦ï¼‰ https://segmentfault.com/ls/1650000011386794?r=bPrFW3 æˆ–è€…ä½ ä¹Ÿå¯ä»¥æ‰«æä¸‹é¢çš„äºŒç»´ç è´­ä¹°ï¼ˆåŒæ ·ä¹Ÿæœ‰ä¼˜æƒ çš„å“¦ï¼‰ è¯¾ç¨‹è¯„ä»· 1ã€å°é©¬å“¥è®²çš„å¾ˆå¥½ï¼Œå®è·µå’ŒåŸç†ä¸€èµ·ç»“åˆè®²ï¼Œç†è§£çš„å¾ˆæ·±åˆ»ã€‚æœŸå¾…å°é©¬å“¥çš„ä¸‹ä¸€ä¸ªé«˜å¹¶å‘çš„ç³»åˆ—è®²åº§ï¼Œè¿˜æœ‰é‚£æœ¬ä¸‡ä¼—ç©ç›®çš„æ–°ä¹¦2ã€è¿™äº›ç³»åˆ—è¯¾ç¨‹æ€ä¹ˆè¯´å‘¢ï¼Œå°±æˆ‘æ¥è¯´å…¶å®å­¦çš„ä¸æ˜¯çŸ¥è¯†ï¼Œæ˜¯å­¦ä¹ æ–¹æ³•ã€‚å°é©¬å“¥å‰å®³çš„ï¼Œç»™ä¸ªèµã€‚3ã€æ»¡æ»¡çš„èµï¼Œç¤¾ä¼šå¥—è·¯å¤ªå¤šï¼Œé¡»åŠ å¼ºå­¦ä¹ ï¼ŒæœŸå¾…ä¸‹æœŸä¸å°é©¬å“¥ç›¸é€¢4ã€åŸºæœ¬æ˜¯éƒ½æ˜¯å®ˆè€…ç›´æ’­æ—¶é—´ï¼Œè·Ÿç€ Spring Boot ç³»åˆ—å’Œ Spring Cloud ç³»åˆ—çš„è¯¾ç¨‹ï¼Œå°é©¬å“¥è®²å¾—å¾ˆæœ‰å¯å‘æ€§ã€‚è®²ä¸€ç§æŠ€æœ¯çš„ä»å“ªé‡Œæ¥ï¼Œè§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Œä»¥åŠä¼˜ç¼ºç‚¹ã€‚è®²æºç åˆä¸ä»…é™åˆ¶äºæºç ã€‚æ€»çš„æ¥è¯´å€¼å¾—èŠ±æ—¶é—´æ¥å­¦ä¹ å’Œè®¨è®ºçš„ã€‚å€¼å¾—æ¨èï¼Œäº”æ˜Ÿå¥½è¯„ã€‚5ã€å¯ä»¥çš„ï¼Œè§£ç­”é—®é¢˜å¾ˆè€å¿ƒã€‚ä»ä½ è¿™å­¦åˆ°äº†æµè§ˆJSRç­‰ä¹‹ç±»çš„è§„èŒƒï¼Œåœ¨ç”¨ä¸€äº›æ¡†æ¶çš„æ—¶å€™å‘ç°å›½å¤–çš„ï¼Œå¾ˆå¤šéƒ½å®ç°äº†JSRï¼Œæ¯”å¦‚spring batchï¼Œè€Œå›½å†…çš„è¯ï¼Œä¸ªäººè§‰å¾—è¿™æ–¹é¢ç¨å¾®å·®äº†ç‚¹ï¼Œè¿™æ–¹é¢æˆ‘ä»¬è¿˜è¦åŠªåŠ›ï¼ŒåŠ æ²¹ï¼ ä»¥ä¸Šè¯„ä»·æ‘˜è‡ª segmentfault ç›¸å…³è¯¾ç¨‹Java å¾®æœåŠ¡å®è·µ - Spring Boot ç³»åˆ— ä¼˜æƒ åœ°å€ï¼šhttps://segmentfault.com/ls/1650000011063780?r=bPrFW3 å¦å¤–ï¼šè¿˜æœ‰è¿™ä¸ª Java å¾®æœåŠ¡å®è·µ - Spring Boot / Spring Cloudï¼Œç®—æ˜¯ä¸¤ä¸ªçš„åˆé›†äº†ï¼Œåˆä¹°çš„è¯ä¼˜æƒ æ›´å¤§ã€‚ ä¼˜æƒ åœ°å€ï¼šhttps://segmentfault.com/ls/1650000011387052?r=bPrFW3 å…³æ³¨æˆ‘ å»ºäº†ä¸ªä¸é”™çš„å¾®ä¿¡ç¾¤ï¼Œå¦‚æœæœ‰æ„Ÿå…´è¶£çš„å¯ä»¥åŠ æˆ‘å¾®ä¿¡ï¼Œç„¶åæ‹‰ä½ è¿›ç¾¤äº¤æµã€‚","tags":[{"name":"Java","slug":"Java","permalink":"http://yoursite.com/tags/Java/"},{"name":"å¾®æœåŠ¡","slug":"å¾®æœåŠ¡","permalink":"http://yoursite.com/tags/å¾®æœåŠ¡/"},{"name":"SpringCloud","slug":"SpringCloud","permalink":"http://yoursite.com/tags/SpringCloud/"}]},{"title":"ã€Šæ·±å…¥ç†è§£ Java å†…å­˜æ¨¡å‹ã€‹è¯»ä¹¦ç¬”è®°","date":"2018-02-27T16:00:00.000Z","path":"2018/02/28/Java-Memory-Model/","text":"å‰æã€Šæ·±å…¥ç†è§£ Java å†…å­˜æ¨¡å‹ã€‹ç¨‹æ™“æ˜è‘—ï¼Œè¯¥ä¹¦åœ¨ä»¥å‰çœ‹è¿‡ä¸€éï¼Œç°åœ¨å­¦çš„ä¸œè¥¿è¶Šå¤šï¼Œæ„Ÿè§‰é‚£å—è¶Šé‡è¦ï¼Œäºæ˜¯åˆå†ç»†çœ‹ä¸€éï¼Œäºæ˜¯ä¾¿æœ‰äº†ä¸‹é¢çš„è¯»ä¹¦ç¬”è®°æ€»ç»“ã€‚å…¨ä¹¦é¡µæ•°è™½ä¸å¤šï¼Œå†…å®¹è®²å¾—æŒºæ·±çš„ã€‚ç»†çœ‹çš„è¯ï¼Œä¹Ÿæ˜¯æŒºèŠ±æ—¶é—´çš„ï¼Œçœ‹å®Œæ”¶è·ç»å¯¹æŒºå¤§çš„ã€‚ä¹Ÿå»ºè®® Java å¼€å‘è€…éƒ½å»çœ‹çœ‹ã€‚é‡Œé¢ä¸»è¦æœ‰ Java å†…å­˜æ¨¡å‹çš„åŸºç¡€ã€é‡æ’åºã€é¡ºåºä¸€è‡´æ€§ã€Volatile å…³é”®å­—ã€é”ã€finalã€‚æœ¬æ–‡å‚è€ƒä¹¦ä¸­å†…å®¹ã€‚ å…³æ³¨æˆ‘å¦‚æœä½ æƒ³æŸ¥çœ‹è¿™æœ¬ä¹¦å¯ä»¥å…³æ³¨æˆ‘çš„å…¬ä¼—å·: zhisheng ï¼Œç„¶åé‡Œé¢å›å¤å…³é”®å­— JMM å¯ä»¥æŸ¥çœ‹æˆ‘åˆ†äº«çš„ç™¾åº¦äº‘é“¾æ¥ã€‚ è½¬è½½è¯·åŠ¡å¿…æ³¨æ˜åŸåˆ›åœ°å€ä¸ºï¼šhttp://www.54tianzhisheng.cn/2018/02/28/Java-Memory-Model/ åŸºç¡€å¹¶å‘ç¼–ç¨‹çš„æ¨¡å‹åˆ†ç±»åœ¨å¹¶å‘ç¼–ç¨‹éœ€è¦å¤„ç†çš„ä¸¤ä¸ªå…³é”®é—®é¢˜æ˜¯ï¼šçº¿ç¨‹ä¹‹é—´å¦‚ä½•é€šä¿¡ å’Œ çº¿ç¨‹ä¹‹é—´å¦‚ä½•åŒæ­¥ã€‚ é€šä¿¡é€šä¿¡ æ˜¯æŒ‡çº¿ç¨‹ä¹‹é—´ä»¥ä½•ç§æœºåˆ¶æ¥äº¤æ¢ä¿¡æ¯ã€‚åœ¨å‘½ä»¤å¼ç¼–ç¨‹ä¸­ï¼Œçº¿ç¨‹ä¹‹é—´çš„é€šä¿¡æœºåˆ¶æœ‰ä¸¤ç§ï¼šå…±äº«å†…å­˜ å’Œ æ¶ˆæ¯ä¼ é€’ã€‚ åœ¨å…±äº«å†…å­˜çš„å¹¶å‘æ¨¡å‹é‡Œï¼Œçº¿ç¨‹ä¹‹é—´å…±äº«ç¨‹åºçš„å…¬å…±çŠ¶æ€ï¼Œçº¿ç¨‹ä¹‹é—´é€šè¿‡å†™-è¯»å†…å­˜ä¸­çš„å…¬å…±çŠ¶æ€æ¥éšå¼è¿›è¡Œé€šä¿¡ã€‚ åœ¨æ¶ˆæ¯ä¼ é€’çš„å¹¶å‘æ¨¡å‹é‡Œï¼Œçº¿ç¨‹ä¹‹é—´æ²¡æœ‰å…¬å…±çŠ¶æ€ï¼Œçº¿ç¨‹ä¹‹é—´å¿…é¡»é€šè¿‡æ˜ç¡®çš„å‘é€æ¶ˆæ¯æ¥æ˜¾å¼è¿›è¡Œé€šä¿¡ã€‚ åŒæ­¥åŒæ­¥ æ˜¯æŒ‡ç¨‹åºç”¨äºæ§åˆ¶ä¸åŒçº¿ç¨‹ä¹‹é—´æ“ä½œå‘ç”Ÿç›¸å¯¹é¡ºåºçš„æœºåˆ¶ã€‚ åœ¨å…±äº«å†…å­˜çš„å¹¶å‘æ¨¡å‹é‡Œï¼ŒåŒæ­¥æ˜¯æ˜¾å¼è¿›è¡Œçš„ã€‚ç¨‹åºå‘˜å¿…é¡»æ˜¾å¼æŒ‡å®šæŸä¸ªæ–¹æ³•æˆ–æŸæ®µä»£ç éœ€è¦åœ¨çº¿ç¨‹ä¹‹é—´äº’æ–¥æ‰§è¡Œã€‚ åœ¨æ¶ˆæ¯ä¼ é€’çš„å¹¶å‘æ¨¡å‹é‡Œï¼Œç”±äºæ¶ˆæ¯çš„å‘é€å¿…é¡»åœ¨æ¶ˆæ¯çš„æ¥æ”¶ä¹‹å‰ï¼Œå› æ­¤åŒæ­¥æ˜¯éšå¼è¿›è¡Œçš„ã€‚ Java çš„å¹¶å‘é‡‡ç”¨çš„æ˜¯å…±äº«å†…å­˜æ¨¡å‹ï¼ŒJava çº¿ç¨‹ä¹‹é—´çš„é€šä¿¡æ€»æ˜¯éšå¼è¿›è¡Œï¼Œæ•´ä¸ªé€šä¿¡è¿‡ç¨‹å¯¹ç¨‹åºå‘˜å®Œå…¨é€æ˜ã€‚ Java å†…å­˜æ¨¡å‹çš„æŠ½è±¡åœ¨ Java ä¸­ï¼Œæ‰€æœ‰å®ä¾‹åŸŸã€é™æ€åŸŸ å’Œ æ•°ç»„å…ƒç´ å­˜å‚¨åœ¨å †å†…å­˜ä¸­ï¼Œå †å†…å­˜åœ¨çº¿ç¨‹ä¹‹é—´å…±äº«ã€‚å±€éƒ¨å˜é‡ã€æ–¹æ³•å®šä¹‰å‚æ•° å’Œ å¼‚å¸¸å¤„ç†å™¨å‚æ•° ä¸ä¼šåœ¨çº¿ç¨‹ä¹‹é—´å…±äº«ï¼Œå®ƒä»¬ä¸ä¼šæœ‰å†…å­˜å¯è§æ€§é—®é¢˜ï¼Œä¹Ÿä¸å—å†…å­˜æ¨¡å‹çš„å½±å“ã€‚ Java çº¿ç¨‹ä¹‹é—´çš„é€šä¿¡ç”± Java å†…å­˜æ¨¡å‹ï¼ˆJMMï¼‰æ§åˆ¶ã€‚JMM å†³å®šäº†ä¸€ä¸ªçº¿ç¨‹å¯¹å…±äº«å˜é‡çš„å†™å…¥ä½•æ—¶å¯¹å¦ä¸€ä¸ªçº¿ç¨‹å¯è§ã€‚ä»æŠ½è±¡çš„è§’åº¦æ¥çœ‹ï¼ŒJMM å®šä¹‰äº†çº¿ç¨‹ä¸ä¸»å†…å­˜ä¹‹é—´çš„æŠ½è±¡å…³ç³»ï¼šçº¿ç¨‹ä¹‹é—´çš„å…±äº«å˜é‡å­˜å‚¨åœ¨ä¸»å†…å­˜ä¸­ï¼Œæ¯ä¸€ä¸ªçº¿ç¨‹éƒ½æœ‰ä¸€ä¸ªè‡ªå·±ç§æœ‰çš„æœ¬åœ°å†…å­˜ï¼Œæœ¬åœ°å†…å­˜ä¸­å­˜å‚¨äº†è¯¥å˜é‡ä»¥è¯»ï¼å†™å…±äº«å˜é‡çš„å‰¯æœ¬ã€‚æœ¬åœ°å†…å­˜æ˜¯ JMM çš„ä¸€ä¸ªæŠ½è±¡æ¦‚å¿µï¼Œå¹¶ä¸çœŸå®å­˜åœ¨ã€‚ JMM æŠ½è±¡ç¤ºæ„å›¾ï¼š ä»ä¸Šå›¾æ¥çœ‹ï¼Œå¦‚æœçº¿ç¨‹ A å’Œçº¿ç¨‹ B è¦é€šä¿¡çš„è¯ï¼Œè¦å¦‚ä¸‹ä¸¤ä¸ªæ­¥éª¤ï¼š 1ã€çº¿ç¨‹ A éœ€è¦å°†æœ¬åœ°å†…å­˜ A ä¸­çš„å…±äº«å˜é‡å‰¯æœ¬åˆ·æ–°åˆ°ä¸»å†…å­˜å» 2ã€çº¿ç¨‹ B å»ä¸»å†…å­˜è¯»å–çº¿ç¨‹ A ä¹‹å‰å·²æ›´æ–°è¿‡çš„å…±äº«å˜é‡ æ­¥éª¤ç¤ºæ„å›¾ï¼š ä¸¾ä¸ªä¾‹å­ï¼š æœ¬åœ°å†…å­˜ A å’Œ B æœ‰ä¸»å†…å­˜å…±äº«å˜é‡ X çš„å‰¯æœ¬ã€‚å‡è®¾ä¸€å¼€å§‹æ—¶ï¼Œè¿™ä¸‰ä¸ªå†…å­˜ä¸­ X çš„å€¼éƒ½æ˜¯ 0ã€‚çº¿ç¨‹ A æ­£æ‰§è¡Œæ—¶ï¼ŒæŠŠæ›´æ–°åçš„ X å€¼ï¼ˆå‡è®¾ä¸º 1ï¼‰ä¸´æ—¶å­˜æ”¾åœ¨è‡ªå·±çš„æœ¬åœ°å†…å­˜ A ä¸­ã€‚å½“çº¿ç¨‹ A å’Œ B éœ€è¦é€šä¿¡æ—¶ï¼Œçº¿ç¨‹ A é¦–å…ˆä¼šæŠŠè‡ªå·±æœ¬åœ°å†…å­˜ A ä¸­ä¿®æ”¹åçš„ X å€¼åˆ·æ–°åˆ°ä¸»å†…å­˜å»ï¼Œæ­¤æ—¶ä¸»å†…å­˜ä¸­çš„ X å€¼å˜ä¸ºäº† 1ã€‚éšåï¼Œçº¿ç¨‹ B åˆ°ä¸»å†…å­˜ä¸­è¯»å–çº¿ç¨‹ A æ›´æ–°åçš„å…±äº«å˜é‡ X çš„å€¼ï¼Œæ­¤æ—¶çº¿ç¨‹ B çš„æœ¬åœ°å†…å­˜çš„ X å€¼ä¹Ÿå˜æˆäº† 1ã€‚ æ•´ä½“æ¥çœ‹ï¼Œè¿™ä¸¤ä¸ªæ­¥éª¤å®è´¨ä¸Šæ˜¯çº¿ç¨‹ A å†å‘çº¿ç¨‹ B å‘é€æ¶ˆæ¯ï¼Œè€Œè¿™ä¸ªé€šä¿¡è¿‡ç¨‹å¿…é¡»ç»è¿‡ä¸»å†…å­˜ã€‚JMM é€šè¿‡æ§åˆ¶ä¸»å†…å­˜ä¸æ¯ä¸ªçº¿ç¨‹çš„æœ¬åœ°å†…å­˜ä¹‹é—´çš„äº¤äº’ï¼Œæ¥ä¸º Java ç¨‹åºå‘˜æä¾›å†…å­˜å¯è§æ€§ä¿è¯ã€‚ é‡æ’åºåœ¨æ‰§è¡Œç¨‹åºæ—¶ä¸ºäº†æé«˜æ€§èƒ½ï¼Œç¼–è¯‘å™¨å’Œå¤„ç†å™¨å¸¸å¸¸ä¼šå¯¹æŒ‡ä»¤åšé‡æ’åºã€‚é‡æ’åºåˆ†ä¸‰ç±»ï¼š 1ã€ç¼–è¯‘å™¨ä¼˜åŒ–çš„é‡æ’åºã€‚ç¼–è¯‘å™¨åœ¨ä¸æ”¹å˜å•çº¿ç¨‹ç¨‹åºè¯­ä¹‰çš„å‰æä¸‹ï¼Œå¯ä»¥é‡æ–°å®‰æ’è¯­å¥çš„æ‰§è¡Œé¡ºåºã€‚ 2ã€æŒ‡ä»¤çº§å¹¶è¡Œçš„é‡æ’åºã€‚ç°ä»£å¤„ç†å™¨é‡‡ç”¨äº†æŒ‡ä»¤çº§å¹¶è¡ŒæŠ€æœ¯æ¥å°†å¤šæ¡æŒ‡ä»¤é‡å æ‰§è¡Œã€‚å¦‚æœä¸å­˜åœ¨æ•°æ®ä¾èµ–æ€§ï¼Œå¤„ç†å™¨å¯ä»¥æ”¹å˜è¯­å¥å¯¹åº”æœºå™¨æŒ‡ä»¤çš„æ‰§è¡Œé¡ºåºã€‚ 3ã€å†…å­˜ç³»ç»Ÿçš„é‡æ’åºã€‚ç”±äºå¤„ç†å™¨ä½¿ç”¨ç¼“å­˜å’Œè¯»ï¼å†™ç¼“å†²åŒºï¼Œè¿™ä½¿å¾—åŠ è½½å’Œå­˜å‚¨æ“ä½œçœ‹ä¸Šå»å¯èƒ½æ˜¯åœ¨ä¹±åºæ‰§è¡Œã€‚ ä» Java æºä»£ç åˆ°æœ€ç»ˆå®é™…æ‰§è¡Œçš„æŒ‡ä»¤åºåˆ—ï¼Œä¼šåˆ†åˆ«ç»å†ä¸‹é¢ä¸‰ç§é‡æ’åºï¼š ä¸Šé¢çš„è¿™äº›é‡æ’åºéƒ½å¯èƒ½å¯¼è‡´å¤šçº¿ç¨‹ç¨‹åºå‡ºç°å†…å­˜å¯è§æ€§é—®é¢˜ã€‚å¯¹äºç¼–è¯‘å™¨ï¼ŒJMM çš„ç¼–è¯‘å™¨é‡æ’åºè§„åˆ™ä¼šç¦æ­¢ç‰¹å®šç±»å‹çš„ç¼–è¯‘å™¨é‡æ’åºï¼ˆä¸æ˜¯æ‰€æœ‰çš„ç¼–è¯‘å™¨é‡æ’åºéƒ½è¦ç¦æ­¢ï¼‰ã€‚å¯¹äºå¤„ç†å™¨é‡æ’åºï¼ŒJMM çš„å¤„ç†å™¨é‡æ’åºè§„åˆ™ä¼šè¦æ±‚ Java ç¼–è¯‘å™¨åœ¨ç”ŸæˆæŒ‡ä»¤åºåˆ—æ—¶ï¼Œæ’å…¥ç‰¹å®šç±»å‹çš„å†…å­˜å±éšœæŒ‡ä»¤ï¼Œé€šè¿‡å†…å­˜å±éšœæŒ‡ä»¤æ¥ç¦æ­¢ç‰¹å®šç±»å‹çš„å¤„ç†å™¨é‡æ’åºï¼ˆä¸æ˜¯æ‰€æœ‰çš„å¤„ç†å™¨é‡æ’åºéƒ½è¦ç¦æ­¢ï¼‰ã€‚ JMM å±äºè¯­è¨€çº§çš„å†…å­˜æ¨¡å‹ï¼Œå®ƒç¡®ä¿åœ¨ä¸åŒçš„ç¼–è¯‘å™¨å’Œä¸åŒçš„å¤„ç†å™¨å¹³å°ä¹‹ä¸Šï¼Œé€šè¿‡ç¦æ­¢ç‰¹å®šç±»å‹çš„ç¼–è¯‘å™¨é‡æ’åºå’Œå¤„ç†å™¨é‡æ’åºï¼Œä¸ºç¨‹åºå‘˜æä¾›ä¸€è‡´çš„å†…å­˜å¯è§æ€§ä¿è¯ã€‚ å¤„ç†å™¨é‡æ’åºç°ä»£çš„å¤„ç†å™¨ä½¿ç”¨å†™ç¼“å†²åŒºæ¥ä¸´æ—¶ä¿å­˜å‘å†…å­˜å†™å…¥çš„æ•°æ®ã€‚å†™ç¼“å†²åŒºå¯ä»¥ä¿è¯æŒ‡ä»¤æµæ°´çº¿æŒç»­è¿è¡Œï¼Œå®ƒå¯ä»¥é¿å…ç”±äºå¤„ç†å™¨åœé¡¿ä¸‹æ¥ç­‰å¾…å‘å†…å­˜å†™å…¥æ•°æ®è€Œäº§ç”Ÿçš„å»¶è¿Ÿã€‚åŒæ—¶ï¼Œé€šè¿‡ä»¥æ‰¹å¤„ç†çš„æ–¹å¼åˆ·æ–°å†™ç¼“å†²åŒºï¼Œä»¥åŠåˆå¹¶å†™ç¼“å†²åŒºä¸­å¯¹åŒä¸€å†…å­˜åœ°å€çš„å¤šæ¬¡å†™ï¼Œå¯ä»¥å‡å°‘å¯¹å†…å­˜æ€»çº¿çš„å ç”¨ã€‚è™½ç„¶å†™ç¼“å†²åŒºæœ‰è¿™ä¹ˆå¤šå¥½å¤„ï¼Œä½†æ¯ä¸ªå¤„ç†å™¨ä¸Šçš„å†™ç¼“å†²åŒºï¼Œä»…ä»…å¯¹å®ƒæ‰€åœ¨çš„å¤„ç†å™¨å¯è§ã€‚è¿™ä¸ªç‰¹æ€§ä¼šå¯¹å†…å­˜æ“ä½œçš„æ‰§è¡Œé¡ºåºäº§ç”Ÿé‡è¦çš„å½±å“ï¼šå¤„ç†å™¨å¯¹å†…å­˜çš„è¯»/å†™æ“ä½œçš„æ‰§è¡Œé¡ºåºï¼Œä¸ä¸€å®šä¸å†…å­˜å®é™…å‘ç”Ÿçš„è¯»/å†™æ“ä½œé¡ºåºä¸€è‡´ï¼ ä¸¾ä¸ªä¾‹å­ï¼š å‡è®¾å¤„ç†å™¨Aå’Œå¤„ç†å™¨BæŒ‰ç¨‹åºçš„é¡ºåºå¹¶è¡Œæ‰§è¡Œå†…å­˜è®¿é—®ï¼Œæœ€ç»ˆå´å¯èƒ½å¾—åˆ° x = y = 0ã€‚å…·ä½“çš„åŸå› å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å¤„ç†å™¨ A å’Œ B åŒæ—¶æŠŠå…±äº«å˜é‡å†™å…¥åœ¨å†™ç¼“å†²åŒºä¸­ï¼ˆA1ã€B1ï¼‰ï¼Œç„¶åå†ä»å†…å­˜ä¸­è¯»å–å¦ä¸€ä¸ªå…±äº«å˜é‡ï¼ˆA2ã€B2ï¼‰ï¼Œæœ€åæ‰æŠŠè‡ªå·±å†™ç¼“å†²åŒºä¸­ä¿å­˜çš„è„æ•°æ®åˆ·æ–°åˆ°å†…å­˜ä¸­ï¼ˆA3ã€B3ï¼‰ã€‚å½“ä»¥è¿™ç§æ—¶åºæ‰§è¡Œæ—¶ï¼Œç¨‹åºå°±å¯ä»¥å¾—åˆ° x = y = 0 çš„ç»“æœã€‚ ä»å†…å­˜æ“ä½œå®é™…å‘ç”Ÿçš„é¡ºåºæ¥çœ‹ï¼Œç›´åˆ°å¤„ç†å™¨ A æ‰§è¡Œ A3 æ¥åˆ·æ–°è‡ªå·±çš„å†™ç¼“å­˜åŒºï¼Œå†™æ“ä½œ A1 æ‰ç®—çœŸæ­£æ‰§è¡Œäº†ã€‚è™½ç„¶å¤„ç†å™¨ A æ‰§è¡Œå†…å­˜æ“ä½œçš„é¡ºåºä¸ºï¼šA1 -&gt; A2ï¼Œä½†å†…å­˜æ“ä½œå®é™…å‘ç”Ÿçš„é¡ºåºå´æ˜¯ï¼šA2 -&gt; A1ã€‚æ­¤æ—¶ï¼Œå¤„ç†å™¨ A çš„å†…å­˜æ“ä½œé¡ºåºè¢«é‡æ’åºäº†ã€‚ è¿™é‡Œçš„å…³é”®æ˜¯ï¼Œç”±äºå†™ç¼“å†²åŒºä»…å¯¹è‡ªå·±çš„å¤„ç†å™¨å¯è§ï¼Œå®ƒä¼šå¯¼è‡´å¤„ç†å™¨æ‰§è¡Œå†…å­˜æ“ä½œçš„é¡ºåºå¯èƒ½ä¼šä¸å†…å­˜å®é™…çš„æ“ä½œæ‰§è¡Œé¡ºåºä¸ä¸€è‡´ã€‚ç”±äºç°ä»£çš„å¤„ç†å™¨éƒ½ä¼šä½¿ç”¨å†™ç¼“å†²åŒºï¼Œå› æ­¤ç°ä»£çš„å¤„ç†å™¨éƒ½ä¼šå…è®¸å¯¹å†™-è¯»æ“ä½œé‡æ’åºã€‚ å†…å­˜å±éšœæŒ‡ä»¤ä¸ºäº†ä¿è¯å†…å­˜å¯è§æ€§ï¼ŒJava ç¼–è¯‘å™¨åœ¨ç”ŸæˆæŒ‡ä»¤åºåˆ—çš„é€‚å½“ä½ç½®ä¼šæ’å…¥å†…å­˜å±éšœæŒ‡ä»¤æ¥ç¦æ­¢ç‰¹å®šç±»å‹çš„å¤„ç†å™¨é‡æ’åºã€‚JMM æŠŠå†…å­˜å±éšœæŒ‡ä»¤åˆ†ä¸ºä¸‹åˆ—å››ç±»ï¼š å±éšœç±»å‹ æŒ‡ä»¤ç¤ºä¾‹ è¯´æ˜ LoadLoad Barriers Load1; LoadLoad; Load2 ç¡®ä¿ Load1 æ•°æ®çš„è£…è½½ï¼Œä¹‹å‰äº Load2 åŠæ‰€æœ‰åç»­è£…è½½æŒ‡ä»¤çš„è£…è½½ã€‚ StoreStore Barriers Store1; StoreStore; Store2 ç¡®ä¿ Store1 æ•°æ®å¯¹å…¶ä»–å¤„ç†å™¨å¯è§ï¼ˆåˆ·æ–°åˆ°å†…å­˜ï¼‰ï¼Œä¹‹å‰äº Store2 åŠæ‰€æœ‰åç»­å­˜å‚¨æŒ‡ä»¤çš„å­˜å‚¨ã€‚ LoadStore Barriers Load1; LoadStore; Store2 ç¡®ä¿ Load1 æ•°æ®è£…è½½ï¼Œä¹‹å‰äº Store2 åŠæ‰€æœ‰åç»­çš„å­˜å‚¨æŒ‡ä»¤åˆ·æ–°åˆ°å†…å­˜ã€‚ StoreLoad Barriers Store1; StoreLoad; Load2 ç¡®ä¿ Store1 æ•°æ®å¯¹å…¶ä»–å¤„ç†å™¨å˜å¾—å¯è§ï¼ˆæŒ‡åˆ·æ–°åˆ°å†…å­˜ï¼‰ï¼Œä¹‹å‰äº Load2 åŠæ‰€æœ‰åç»­è£…è½½æŒ‡ä»¤çš„è£…è½½ã€‚StoreLoadBarriers ä¼šä½¿è¯¥å±éšœä¹‹å‰çš„æ‰€æœ‰å†…å­˜è®¿é—®æŒ‡ä»¤ï¼ˆå­˜å‚¨å’Œè£…è½½æŒ‡ä»¤ï¼‰å®Œæˆä¹‹åï¼Œæ‰æ‰§è¡Œè¯¥å±éšœä¹‹åçš„å†…å­˜è®¿é—®æŒ‡ä»¤ã€‚ happens-beforeJSR-133 å†…å­˜æ¨¡å‹ä½¿ç”¨ happens-before çš„æ¦‚å¿µæ¥é˜è¿°æ“ä½œä¹‹é—´çš„å†…å­˜å¯è§æ€§ã€‚åœ¨ JMM ä¸­ï¼Œå¦‚æœä¸€ä¸ªæ“ä½œæ‰§è¡Œçš„ç»“æœéœ€è¦å¯¹å¦ä¸€ä¸ªæ“ä½œå¯è§ï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ªæ“ä½œä¹‹é—´å¿…é¡»è¦å­˜åœ¨ happens-before å…³ç³»ã€‚è¿™é‡Œæåˆ°çš„ä¸¤ä¸ªæ“ä½œæ—¢å¯ä»¥æ˜¯åœ¨ä¸€ä¸ªçº¿ç¨‹ä¹‹å†…ï¼Œä¹Ÿå¯ä»¥æ˜¯åœ¨ä¸åŒçº¿ç¨‹ä¹‹é—´ã€‚ ä¸ç¨‹åºå‘˜å¯†åˆ‡ç›¸å…³çš„ happens-before è§„åˆ™å¦‚ä¸‹ï¼š ç¨‹åºé¡ºåºè§„åˆ™ï¼šä¸€ä¸ªçº¿ç¨‹ä¸­çš„æ¯ä¸ªæ“ä½œï¼Œhappens-before äºè¯¥çº¿ç¨‹ä¸­çš„ä»»æ„åç»­æ“ä½œã€‚ ç›‘è§†å™¨é”è§„åˆ™ï¼šå¯¹ä¸€ä¸ªç›‘è§†å™¨çš„è§£é”ï¼Œhappens-before äºéšåå¯¹è¿™ä¸ªç›‘è§†å™¨çš„åŠ é”ã€‚ volatile å˜é‡è§„åˆ™ï¼šå¯¹ä¸€ä¸ª volatile åŸŸçš„å†™ï¼Œhappens-before äºä»»æ„åç»­å¯¹è¿™ä¸ª volatile åŸŸçš„è¯»ã€‚ ä¼ é€’æ€§ï¼šå¦‚æœ A happens-before Bï¼Œä¸” B happens-before Cï¼Œé‚£ä¹ˆ A happens-before Cã€‚ æ³¨æ„ï¼Œä¸¤ä¸ªæ“ä½œä¹‹é—´å…·æœ‰ happens-before å…³ç³»ï¼Œå¹¶ä¸æ„å‘³ç€å‰ä¸€ä¸ªæ“ä½œå¿…é¡»è¦åœ¨åä¸€ä¸ªæ“ä½œä¹‹å‰æ‰§è¡Œï¼happens-before ä»…ä»…è¦æ±‚å‰ä¸€ä¸ªæ“ä½œï¼ˆæ‰§è¡Œçš„ç»“æœï¼‰å¯¹åä¸€ä¸ªæ“ä½œå¯è§ï¼Œä¸”å‰ä¸€ä¸ªæ“ä½œæŒ‰é¡ºåºæ’åœ¨ç¬¬äºŒä¸ªæ“ä½œä¹‹å‰ï¼ˆthe first is visible to and ordered before the secondï¼‰ã€‚ happens-before ä¸ JMM çš„å…³ç³»å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œä¸€ä¸ª happens-before è§„åˆ™å¯¹åº”äºä¸€ä¸ªæˆ–å¤šä¸ªç¼–è¯‘å™¨å’Œå¤„ç†å™¨é‡æ’åºè§„åˆ™ã€‚ æ•°æ®ä¾èµ–æ€§å¦‚æœä¸¤ä¸ªæ“ä½œè®¿é—®åŒä¸€ä¸ªå˜é‡ï¼Œä¸”è¿™ä¸¤ä¸ªæ“ä½œä¸­æœ‰ä¸€ä¸ªä¸ºå†™æ“ä½œï¼Œæ­¤æ—¶è¿™ä¸¤ä¸ªæ“ä½œä¹‹é—´å°±å­˜åœ¨æ•°æ®ä¾èµ–æ€§ã€‚æ•°æ®ä¾èµ–åˆ†ä¸‹åˆ—ä¸‰ç§ç±»å‹ï¼š åç§° ä»£ç ç¤ºä¾‹ è¯´æ˜ å†™åè¯» a = 1; b = a; å†™ä¸€ä¸ªå˜é‡ä¹‹åï¼Œå†è¯»è¿™ä¸ªä½ç½®ã€‚ å†™åå†™ a = 1; a = 2; å†™ä¸€ä¸ªå˜é‡ä¹‹åï¼Œå†å†™è¿™ä¸ªå˜é‡ã€‚ è¯»åå†™ a = b; b = 1; è¯»ä¸€ä¸ªå˜é‡ä¹‹åï¼Œå†å†™è¿™ä¸ªå˜é‡ã€‚ ä¸Šé¢ä¸‰ç§æƒ…å†µï¼Œåªè¦é‡æ’åºä¸¤ä¸ªæ“ä½œçš„æ‰§è¡Œé¡ºåºï¼Œç¨‹åºçš„æ‰§è¡Œç»“æœå°†ä¼šè¢«æ”¹å˜ã€‚ å‰é¢æåˆ°è¿‡ï¼Œç¼–è¯‘å™¨å’Œå¤„ç†å™¨å¯èƒ½ä¼šå¯¹æ“ä½œåšé‡æ’åºã€‚ç¼–è¯‘å™¨å’Œå¤„ç†å™¨åœ¨é‡æ’åºæ—¶ï¼Œä¼šéµå®ˆæ•°æ®ä¾èµ–æ€§ï¼Œç¼–è¯‘å™¨å’Œå¤„ç†å™¨ä¸ä¼šæ”¹å˜å­˜åœ¨æ•°æ®ä¾èµ–å…³ç³»çš„ä¸¤ä¸ªæ“ä½œçš„æ‰§è¡Œé¡ºåºã€‚ æ³¨æ„ï¼Œè¿™é‡Œæ‰€è¯´çš„æ•°æ®ä¾èµ–æ€§ä»…é’ˆå¯¹å•ä¸ªå¤„ç†å™¨ä¸­æ‰§è¡Œçš„æŒ‡ä»¤åºåˆ—å’Œå•ä¸ªçº¿ç¨‹ä¸­æ‰§è¡Œçš„æ“ä½œï¼Œä¸åŒå¤„ç†å™¨ä¹‹é—´å’Œä¸åŒçº¿ç¨‹ä¹‹é—´çš„æ•°æ®ä¾èµ–æ€§ä¸è¢«ç¼–è¯‘å™¨å’Œå¤„ç†å™¨è€ƒè™‘ã€‚ as-if-serial è¯­ä¹‰as-if-serial è¯­ä¹‰çš„æ„æ€æŒ‡ï¼šä¸ç®¡æ€ä¹ˆé‡æ’åºï¼ˆç¼–è¯‘å™¨å’Œå¤„ç†å™¨ä¸ºäº†æé«˜å¹¶è¡Œåº¦ï¼‰ï¼Œï¼ˆå•çº¿ç¨‹ï¼‰ç¨‹åºçš„æ‰§è¡Œç»“æœä¸èƒ½è¢«æ”¹å˜ã€‚ç¼–è¯‘å™¨ï¼Œruntime å’Œå¤„ç†å™¨éƒ½å¿…é¡»éµå®ˆ as-if-serial è¯­ä¹‰ã€‚ ä¸ºäº†éµå®ˆ as-if-serial ç¼–è¯‘å™¨å’Œå¤„ç†å™¨ä¸ä¼šå¯¹å­˜åœ¨æ•°æ®ä¾èµ–å…³ç³»çš„æ“ä½œåšé‡æ’åºï¼Œå› ä¸ºè¿™ç§é‡æ’åºä¼šæ”¹å˜æ‰§è¡Œç»“æœã€‚ä½†æ˜¯å¦‚æœæ“ä½œä¹‹é—´æ²¡æœ‰æ•°æ®ä¾èµ–å…³ç³»ï¼Œè¿™äº›æ“ä½œå°±å¯èƒ½è¢«ç¼–è¯‘å™¨å’Œå¤„ç†å™¨é‡æ’åºã€‚ ä¸¾ä¸ªä¾‹å­ï¼š 123double pi = 3.14; //Adouble r = 1.0; //Bdouble area = pi * r * r; //C ä¸Šé¢ä¸‰ä¸ªæ“ä½œçš„æ•°æ®ä¾èµ–å…³ç³»å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å¦‚ä¸Šå›¾æ‰€ç¤ºï¼ŒA å’Œ C ä¹‹é—´å­˜åœ¨æ•°æ®ä¾èµ–å…³ç³»ï¼ŒåŒæ—¶ B å’Œ C ä¹‹é—´ä¹Ÿå­˜åœ¨æ•°æ®ä¾èµ–å…³ç³»ã€‚å› æ­¤åœ¨æœ€ç»ˆæ‰§è¡Œçš„æŒ‡ä»¤åºåˆ—ä¸­ï¼ŒC ä¸èƒ½è¢«é‡æ’åºåˆ° A å’Œ B çš„å‰é¢ï¼ˆC æ’åˆ° A å’Œ B çš„å‰é¢ï¼Œç¨‹åºçš„ç»“æœå°†ä¼šè¢«æ”¹å˜ï¼‰ã€‚ä½† A å’Œ B ä¹‹é—´æ²¡æœ‰æ•°æ®ä¾èµ–å…³ç³»ï¼Œç¼–è¯‘å™¨å’Œå¤„ç†å™¨å¯ä»¥é‡æ’åº A å’Œ B ä¹‹é—´çš„æ‰§è¡Œé¡ºåºã€‚ä¸‹å›¾æ˜¯è¯¥ç¨‹åºçš„ä¸¤ç§æ‰§è¡Œé¡ºåºï¼š åœ¨è®¡ç®—æœºä¸­ï¼Œè½¯ä»¶æŠ€æœ¯å’Œç¡¬ä»¶æŠ€æœ¯æœ‰ä¸€ä¸ªå…±åŒçš„ç›®æ ‡ï¼šåœ¨ä¸æ”¹å˜ç¨‹åºæ‰§è¡Œç»“æœçš„å‰æä¸‹ï¼Œå°½å¯èƒ½çš„å¼€å‘å¹¶è¡Œåº¦ã€‚ç¼–è¯‘å™¨å’Œå¤„ç†å™¨éµä»è¿™ä¸€ç›®æ ‡ï¼Œä» happens-before çš„å®šä¹‰æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼ŒJMM åŒæ ·éµä»è¿™ä¸€ç›®æ ‡ã€‚ é‡æ’åºå¯¹å¤šçº¿ç¨‹çš„å½±å“ä¸¾ä¾‹ï¼š 123456789101112131415class Demo &#123; int a = 0; boolean flag = false; public void write() &#123; a = 1; //1 flag = true; //2 &#125; public void read() &#123; if(flag) &#123; //3 int i = a * a; //4 &#125; &#125;&#125; ç”±äºæ“ä½œ 1 å’Œ 2 æ²¡æœ‰æ•°æ®ä¾èµ–å…³ç³»ï¼Œç¼–è¯‘å™¨å’Œå¤„ç†å™¨å¯ä»¥å¯¹è¿™ä¸¤ä¸ªæ“ä½œé‡æ’åºï¼›æ“ä½œ 3 å’Œæ“ä½œ 4 æ²¡æœ‰æ•°æ®ä¾èµ–å…³ç³»ï¼Œç¼–è¯‘å™¨å’Œå¤„ç†å™¨ä¹Ÿå¯ä»¥å¯¹è¿™ä¸¤ä¸ªæ“ä½œé‡æ’åºã€‚ 1ã€å½“æ“ä½œ 1 å’Œæ“ä½œ 2 é‡æ’åºæ—¶ï¼Œå¯èƒ½ä¼šäº§ç”Ÿä»€ä¹ˆæ•ˆæœï¼Ÿ å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œæ“ä½œ 1 å’Œæ“ä½œ 2 åšäº†é‡æ’åºã€‚ç¨‹åºæ‰§è¡Œæ—¶ï¼Œçº¿ç¨‹ A é¦–å…ˆå†™æ ‡è®°å˜é‡ flagï¼Œéšåçº¿ç¨‹ B è¯»è¿™ä¸ªå˜é‡ã€‚ç”±äºæ¡ä»¶åˆ¤æ–­ä¸ºçœŸï¼Œçº¿ç¨‹ B å°†è¯»å–å˜é‡ aã€‚æ­¤æ—¶ï¼Œå˜é‡ a è¿˜æ ¹æœ¬æ²¡æœ‰è¢«çº¿ç¨‹ A å†™å…¥ï¼Œåœ¨è¿™é‡Œå¤šçº¿ç¨‹ç¨‹åºçš„è¯­ä¹‰è¢«é‡æ’åºç ´åäº†ï¼ 2ã€å½“æ“ä½œ 3 å’Œæ“ä½œ 4 é‡æ’åºæ—¶ä¼šäº§ç”Ÿä»€ä¹ˆæ•ˆæœï¼ˆå€ŸåŠ©è¿™ä¸ªé‡æ’åºï¼Œå¯ä»¥é¡ºä¾¿è¯´æ˜æ§åˆ¶ä¾èµ–æ€§ï¼‰ã€‚ åœ¨ç¨‹åºä¸­ï¼Œæ“ä½œ 3 å’Œæ“ä½œ 4 å­˜åœ¨æ§åˆ¶ä¾èµ–å…³ç³»ã€‚å½“ä»£ç ä¸­å­˜åœ¨æ§åˆ¶ä¾èµ–æ€§æ—¶ï¼Œä¼šå½±å“æŒ‡ä»¤åºåˆ—æ‰§è¡Œçš„å¹¶è¡Œåº¦ã€‚ä¸ºæ­¤ï¼Œç¼–è¯‘å™¨å’Œå¤„ç†å™¨ä¼šé‡‡ç”¨çŒœæµ‹ï¼ˆSpeculationï¼‰æ‰§è¡Œæ¥å…‹æœæ§åˆ¶ç›¸å…³æ€§å¯¹å¹¶è¡Œåº¦çš„å½±å“ã€‚ä»¥å¤„ç†å™¨çš„çŒœæµ‹æ‰§è¡Œä¸ºä¾‹ï¼Œæ‰§è¡Œçº¿ç¨‹ B çš„å¤„ç†å™¨å¯ä»¥æå‰è¯»å–å¹¶è®¡ç®— a * aï¼Œç„¶åæŠŠè®¡ç®—ç»“æœä¸´æ—¶ä¿å­˜åˆ°ä¸€ä¸ªåä¸ºé‡æ’åºç¼“å†²ï¼ˆreorder buffer ROBï¼‰çš„ç¡¬ä»¶ç¼“å­˜ä¸­ã€‚å½“æ¥ä¸‹æ¥æ“ä½œ 3 çš„æ¡ä»¶åˆ¤æ–­ä¸ºçœŸæ—¶ï¼Œå°±æŠŠè¯¥è®¡ç®—ç»“æœå†™å…¥å˜é‡ i ä¸­ã€‚ ä»å›¾ä¸­æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼ŒçŒœæµ‹æ‰§è¡Œå®è´¨ä¸Šå¯¹æ“ä½œ3å’Œ4åšäº†é‡æ’åºã€‚é‡æ’åºåœ¨è¿™é‡Œç ´åäº†å¤šçº¿ç¨‹ç¨‹åºçš„è¯­ä¹‰ï¼ åœ¨å•çº¿ç¨‹ç¨‹åºä¸­ï¼Œå¯¹å­˜åœ¨æ§åˆ¶ä¾èµ–çš„æ“ä½œé‡æ’åºï¼Œä¸ä¼šæ”¹å˜æ‰§è¡Œç»“æœï¼ˆè¿™ä¹Ÿæ˜¯ as-if-serial è¯­ä¹‰å…è®¸å¯¹å­˜åœ¨æ§åˆ¶ä¾èµ–çš„æ“ä½œåšé‡æ’åºçš„åŸå› ï¼‰ï¼›ä½†åœ¨å¤šçº¿ç¨‹ç¨‹åºä¸­ï¼Œå¯¹å­˜åœ¨æ§åˆ¶ä¾èµ–çš„æ“ä½œé‡æ’åºï¼Œå¯èƒ½ä¼šæ”¹å˜ç¨‹åºçš„æ‰§è¡Œç»“æœã€‚ é¡ºåºä¸€è‡´æ€§é¡ºåºä¸€è‡´æ€§å†…å­˜æ¨¡å‹é¡ºåºä¸€è‡´æ€§å†…å­˜æ¨¡å‹æœ‰ä¸¤å¤§ç‰¹æ€§ï¼š ä¸€ä¸ªçº¿ç¨‹ä¸­çš„æ‰€æœ‰æ“ä½œå¿…é¡»æŒ‰ç…§ç¨‹åºçš„é¡ºåºæ¥æ‰§è¡Œã€‚ ï¼ˆä¸ç®¡ç¨‹åºæ˜¯å¦åŒæ­¥ï¼‰æ‰€æœ‰çº¿ç¨‹éƒ½åªèƒ½çœ‹åˆ°ä¸€ä¸ªå•ä¸€çš„æ“ä½œæ‰§è¡Œé¡ºåºã€‚åœ¨é¡ºåºä¸€è‡´æ€§å†…å­˜æ¨¡å‹ä¸­ï¼Œæ¯ä¸ªæ“ä½œéƒ½å¿…é¡»åŸå­æ‰§è¡Œä¸”ç«‹åˆ»å¯¹æ‰€æœ‰çº¿ç¨‹å¯è§ã€‚ é¡ºåºä¸€è‡´æ€§å†…å­˜æ¨¡å‹ä¸ºç¨‹åºå‘˜æä¾›çš„è§†å›¾å¦‚ä¸‹ï¼š åœ¨æ¦‚å¿µä¸Šï¼Œé¡ºåºä¸€è‡´æ€§æ¨¡å‹æœ‰ä¸€ä¸ªå•ä¸€çš„å…¨å±€å†…å­˜ï¼Œè¿™ä¸ªå†…å­˜é€šè¿‡ä¸€ä¸ªå·¦å³æ‘†åŠ¨çš„å¼€å…³å¯ä»¥è¿æ¥åˆ°ä»»æ„ä¸€ä¸ªçº¿ç¨‹ï¼ŒåŒæ—¶æ¯ä¸€ä¸ªçº¿ç¨‹å¿…é¡»æŒ‰ç…§ç¨‹åºçš„é¡ºåºæ¥æ‰§è¡Œå†…å­˜è¯»/å†™æ“ä½œã€‚ä»ä¸Šé¢çš„ç¤ºæ„å›¾æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œåœ¨ä»»æ„æ—¶é—´ç‚¹æœ€å¤šåªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹å¯ä»¥è¿æ¥åˆ°å†…å­˜ã€‚å½“å¤šä¸ªçº¿ç¨‹å¹¶å‘æ‰§è¡Œæ—¶ï¼Œå›¾ä¸­çš„å¼€å…³è£…ç½®èƒ½æŠŠæ‰€æœ‰çº¿ç¨‹çš„æ‰€æœ‰å†…å­˜è¯»/å†™æ“ä½œä¸²è¡ŒåŒ–ã€‚ ä¸¾ä¸ªä¾‹å­ï¼š å‡è®¾æœ‰ä¸¤ä¸ªçº¿ç¨‹ A å’Œ B å¹¶å‘æ‰§è¡Œã€‚å…¶ä¸­ A çº¿ç¨‹æœ‰ä¸‰ä¸ªæ“ä½œï¼Œå®ƒä»¬åœ¨ç¨‹åºä¸­çš„é¡ºåºæ˜¯ï¼šA1 -&gt; A2 -&gt; A3ã€‚B çº¿ç¨‹ä¹Ÿæœ‰ä¸‰ä¸ªæ“ä½œï¼Œå®ƒä»¬åœ¨ç¨‹åºä¸­çš„é¡ºåºæ˜¯ï¼šB1 -&gt; B2 -&gt; B3ã€‚ å‡è®¾è¿™ä¸¤ä¸ªçº¿ç¨‹ä½¿ç”¨ç›‘è§†å™¨é”æ¥æ­£ç¡®åŒæ­¥ï¼šA çº¿ç¨‹çš„ä¸‰ä¸ªæ“ä½œæ‰§è¡Œåé‡Šæ”¾ç›‘è§†å™¨é”ï¼Œéšå B çº¿ç¨‹è·å–åŒä¸€ä¸ªç›‘è§†å™¨é”ã€‚é‚£ä¹ˆç¨‹åºåœ¨é¡ºåºä¸€è‡´æ€§æ¨¡å‹ä¸­çš„æ‰§è¡Œæ•ˆæœå°†å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ç°åœ¨æˆ‘ä»¬å†å‡è®¾è¿™ä¸¤ä¸ªçº¿ç¨‹æ²¡æœ‰åšåŒæ­¥ï¼Œä¸‹é¢æ˜¯è¿™ä¸ªæœªåŒæ­¥ç¨‹åºåœ¨é¡ºåºä¸€è‡´æ€§æ¨¡å‹ä¸­çš„æ‰§è¡Œç¤ºæ„å›¾ï¼š æœªåŒæ­¥ç¨‹åºåœ¨é¡ºåºä¸€è‡´æ€§æ¨¡å‹ä¸­è™½ç„¶æ•´ä½“æ‰§è¡Œé¡ºåºæ˜¯æ— åºçš„ï¼Œä½†æ‰€æœ‰çº¿ç¨‹éƒ½åªèƒ½çœ‹åˆ°ä¸€ä¸ªä¸€è‡´çš„æ•´ä½“æ‰§è¡Œé¡ºåºã€‚ä»¥ä¸Šå›¾ä¸ºä¾‹ï¼Œçº¿ç¨‹ A å’Œ B çœ‹åˆ°çš„æ‰§è¡Œé¡ºåºéƒ½æ˜¯ï¼šB1 -&gt; A1 -&gt; A2 -&gt; B2 -&gt; A3 -&gt; B3ã€‚ä¹‹æ‰€ä»¥èƒ½å¾—åˆ°è¿™ä¸ªä¿è¯æ˜¯å› ä¸ºé¡ºåºä¸€è‡´æ€§å†…å­˜æ¨¡å‹ä¸­çš„æ¯ä¸ªæ“ä½œå¿…é¡»ç«‹å³å¯¹ä»»æ„çº¿ç¨‹å¯è§ã€‚ ä½†æ˜¯ï¼Œåœ¨ JMM ä¸­å°±æ²¡æœ‰è¿™ä¸ªä¿è¯ã€‚æœªåŒæ­¥ç¨‹åºåœ¨ JMM ä¸­ä¸ä½†æ•´ä½“çš„æ‰§è¡Œé¡ºåºæ˜¯æ— åºçš„ï¼Œè€Œä¸”æ‰€æœ‰çº¿ç¨‹çœ‹åˆ°çš„æ“ä½œæ‰§è¡Œé¡ºåºä¹Ÿå¯èƒ½ä¸ä¸€è‡´ã€‚æ¯”å¦‚ï¼Œåœ¨å½“å‰çº¿ç¨‹æŠŠå†™è¿‡çš„æ•°æ®ç¼“å­˜åœ¨æœ¬åœ°å†…å­˜ä¸­ï¼Œåœ¨è¿˜æ²¡æœ‰åˆ·æ–°åˆ°ä¸»å†…å­˜ä¹‹å‰ï¼Œè¿™ä¸ªå†™æ“ä½œä»…å¯¹å½“å‰çº¿ç¨‹å¯è§ï¼›ä»å…¶ä»–çº¿ç¨‹çš„è§’åº¦æ¥è§‚å¯Ÿï¼Œä¼šè®¤ä¸ºè¿™ä¸ªå†™æ“ä½œæ ¹æœ¬è¿˜æ²¡æœ‰è¢«å½“å‰çº¿ç¨‹æ‰§è¡Œã€‚åªæœ‰å½“å‰çº¿ç¨‹æŠŠæœ¬åœ°å†…å­˜ä¸­å†™è¿‡çš„æ•°æ®åˆ·æ–°åˆ°ä¸»å†…å­˜ä¹‹åï¼Œè¿™ä¸ªå†™æ“ä½œæ‰èƒ½å¯¹å…¶ä»–çº¿ç¨‹å¯è§ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå½“å‰çº¿ç¨‹å’Œå…¶å®ƒçº¿ç¨‹çœ‹åˆ°çš„æ“ä½œæ‰§è¡Œé¡ºåºå°†ä¸ä¸€è‡´ã€‚ åŒæ­¥ç¨‹åºçš„é¡ºåºä¸€è‡´æ€§æ•ˆæœä¸‹é¢æˆ‘ä»¬å¯¹å‰é¢çš„ç¤ºä¾‹ç¨‹åºç”¨é”æ¥åŒæ­¥ï¼Œçœ‹çœ‹æ­£ç¡®åŒæ­¥çš„ç¨‹åºå¦‚ä½•å…·æœ‰é¡ºåºä¸€è‡´æ€§ã€‚ è¯·çœ‹ä¸‹é¢çš„ç¤ºä¾‹ä»£ç ï¼š 123456789101112131415class demo &#123; int a = 0; boolean flag = false; public synchronized void write() &#123; //è·å–é” a = 1; flag = true; &#125; //é‡Šæ”¾é” public synchronized void read() &#123; //è·å–é” if(flag) &#123; int i = a; &#125; &#125; //é‡Šæ”¾é”&#125; ä¸Šé¢ç¤ºä¾‹ä»£ç ä¸­ï¼Œå‡è®¾ A çº¿ç¨‹æ‰§è¡Œ write() æ–¹æ³•åï¼ŒB çº¿ç¨‹æ‰§è¡Œ reade() æ–¹æ³•ã€‚è¿™æ˜¯ä¸€ä¸ªæ­£ç¡®åŒæ­¥çš„å¤šçº¿ç¨‹ç¨‹åºã€‚æ ¹æ®JMMè§„èŒƒï¼Œè¯¥ç¨‹åºçš„æ‰§è¡Œç»“æœå°†ä¸è¯¥ç¨‹åºåœ¨é¡ºåºä¸€è‡´æ€§æ¨¡å‹ä¸­çš„æ‰§è¡Œç»“æœç›¸åŒã€‚ä¸‹é¢æ˜¯è¯¥ç¨‹åºåœ¨ä¸¤ä¸ªå†…å­˜æ¨¡å‹ä¸­çš„æ‰§è¡Œæ—¶åºå¯¹æ¯”å›¾ï¼š åœ¨é¡ºåºä¸€è‡´æ€§æ¨¡å‹ä¸­ï¼Œæ‰€æœ‰æ“ä½œå®Œå…¨æŒ‰ç¨‹åºçš„é¡ºåºæ‰§è¡Œã€‚è€Œåœ¨ JMM ä¸­ï¼Œä¸´ç•ŒåŒºå†…çš„ä»£ç å¯ä»¥é‡æ’åºï¼ˆä½† JMM ä¸å…è®¸ä¸´ç•ŒåŒºå†…çš„ä»£ç â€œé€¸å‡ºâ€åˆ°ä¸´ç•ŒåŒºä¹‹å¤–ï¼Œé‚£æ ·ä¼šç ´åç›‘è§†å™¨çš„è¯­ä¹‰ï¼‰ã€‚JMM ä¼šåœ¨é€€å‡ºä¸´ç•ŒåŒºå’Œè¿›å…¥ä¸´ç•ŒåŒºè¿™ä¸¤ä¸ªå…³é”®æ—¶é—´ç‚¹åšä¸€äº›ç‰¹åˆ«å¤„ç†ï¼Œä½¿å¾—çº¿ç¨‹åœ¨è¿™ä¸¤ä¸ªæ—¶é—´ç‚¹å…·æœ‰ä¸é¡ºåºä¸€è‡´æ€§æ¨¡å‹ç›¸åŒçš„å†…å­˜è§†å›¾ã€‚è™½ç„¶çº¿ç¨‹ A åœ¨ä¸´ç•ŒåŒºå†…åšäº†é‡æ’åºï¼Œä½†ç”±äºç›‘è§†å™¨çš„äº’æ–¥æ‰§è¡Œçš„ç‰¹æ€§ï¼Œè¿™é‡Œçš„çº¿ç¨‹ B æ ¹æœ¬æ— æ³•â€œè§‚å¯Ÿâ€åˆ°çº¿ç¨‹ A åœ¨ä¸´ç•ŒåŒºå†…çš„é‡æ’åºã€‚è¿™ç§é‡æ’åºæ—¢æé«˜äº†æ‰§è¡Œæ•ˆç‡ï¼Œåˆæ²¡æœ‰æ”¹å˜ç¨‹åºçš„æ‰§è¡Œç»“æœã€‚ ä»è¿™é‡Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ° JMM åœ¨å…·ä½“å®ç°ä¸Šçš„åŸºæœ¬æ–¹é’ˆï¼šåœ¨ä¸æ”¹å˜ï¼ˆæ­£ç¡®åŒæ­¥çš„ï¼‰ç¨‹åºæ‰§è¡Œç»“æœçš„å‰æä¸‹ï¼Œå°½å¯èƒ½çš„ä¸ºç¼–è¯‘å™¨å’Œå¤„ç†å™¨çš„ä¼˜åŒ–æ‰“å¼€æ–¹ä¾¿ä¹‹é—¨ã€‚ æœªåŒæ­¥ç¨‹åºçš„æ‰§è¡Œç‰¹æ€§æœªåŒæ­¥ç¨‹åºåœ¨ JMM ä¸­çš„æ‰§è¡Œæ—¶ï¼Œæ•´ä½“ä¸Šæ˜¯æ— åºçš„ï¼Œå…¶æ‰§è¡Œç»“æœæ— æ³•é¢„çŸ¥ã€‚æœªåŒæ­¥ç¨‹åºåœ¨ä¸¤ä¸ªæ¨¡å‹ä¸­çš„æ‰§è¡Œç‰¹æ€§æœ‰ä¸‹é¢å‡ ä¸ªå·®å¼‚ï¼š é¡ºåºä¸€è‡´æ€§æ¨¡å‹ä¿è¯å•çº¿ç¨‹å†…çš„æ“ä½œä¼šæŒ‰ç¨‹åºçš„é¡ºåºæ‰§è¡Œï¼Œè€Œ JMM ä¸ä¿è¯å•çº¿ç¨‹å†…çš„æ“ä½œä¼šæŒ‰ç¨‹åºçš„é¡ºåºæ‰§è¡Œï¼ˆæ¯”å¦‚ä¸Šé¢æ­£ç¡®åŒæ­¥çš„å¤šçº¿ç¨‹ç¨‹åºåœ¨ä¸´ç•ŒåŒºå†…çš„é‡æ’åºï¼‰ã€‚ é¡ºåºä¸€è‡´æ€§æ¨¡å‹ä¿è¯æ‰€æœ‰çº¿ç¨‹åªèƒ½çœ‹åˆ°ä¸€è‡´çš„æ“ä½œæ‰§è¡Œé¡ºåºï¼Œè€Œ JMM ä¸ä¿è¯æ‰€æœ‰çº¿ç¨‹èƒ½çœ‹åˆ°ä¸€è‡´çš„æ“ä½œæ‰§è¡Œé¡ºåºã€‚ JMM ä¸ä¿è¯å¯¹ 64 ä½çš„ long å‹å’Œ double å‹å˜é‡çš„è¯»/å†™æ“ä½œå…·æœ‰åŸå­æ€§ï¼Œè€Œé¡ºåºä¸€è‡´æ€§æ¨¡å‹ä¿è¯å¯¹æ‰€æœ‰çš„å†…å­˜è¯»/å†™æ“ä½œéƒ½å…·æœ‰åŸå­ ã€‚ ç¬¬ä¸‰ä¸ªå·®å¼‚ä¸å¤„ç†å™¨æ€»çº¿çš„å·¥ä½œæœºåˆ¶å¯†åˆ‡ç›¸å…³ã€‚åœ¨è®¡ç®—æœºä¸­ï¼Œæ•°æ®é€šè¿‡æ€»çº¿åœ¨å¤„ç†å™¨å’Œå†…å­˜ä¹‹é—´ä¼ é€’ã€‚æ¯æ¬¡å¤„ç†å™¨å’Œå†…å­˜ä¹‹é—´çš„æ•°æ®ä¼ é€’éƒ½æ˜¯é€šè¿‡æ€»çº¿äº‹åŠ¡æ¥å®Œæˆçš„ã€‚æ€»çº¿äº‹åŠ¡åŒ…æ‹¬è¯»äº‹åŠ¡å’Œå†™äº‹åŠ¡ã€‚è¯»äº‹åŠ¡ä»å†…å­˜ä¼ é€æ•°æ®åˆ°å¤„ç†å™¨ï¼Œå†™äº‹åŠ¡ä»å¤„ç†å™¨ä¼ é€’æ•°æ®åˆ°å†…å­˜ï¼Œæ¯ä¸ªäº‹åŠ¡ä¼šè¯»ï¼å†™å†…å­˜ä¸­ä¸€ä¸ªæˆ–å¤šä¸ªç‰©ç†ä¸Šè¿ç»­çš„å­—ã€‚æ€»çº¿ä¼šåŒæ­¥è¯•å›¾å¹¶å‘ä½¿ç”¨æ€»çº¿çš„äº‹åŠ¡ã€‚åœ¨ä¸€ä¸ªå¤„ç†å™¨æ‰§è¡Œæ€»çº¿äº‹åŠ¡æœŸé—´ï¼Œæ€»çº¿ä¼šç¦æ­¢å…¶å®ƒæ‰€æœ‰çš„å¤„ç†å™¨å’Œ Iï¼O è®¾å¤‡æ‰§è¡Œå†…å­˜çš„è¯»ï¼å†™ã€‚ æ€»çº¿çš„å·¥ä½œæœºåˆ¶ï¼š å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå‡è®¾å¤„ç†å™¨ Aã€Bã€å’Œ C åŒæ—¶å‘æ€»çº¿å‘èµ·æ€»çº¿äº‹åŠ¡ï¼Œè¿™æ—¶æ€»çº¿ä»²è£ä¼šå¯¹ç«äº‰ä½œå‡ºè£å†³ï¼Œå‡è®¾æ€»çº¿åœ¨ä»²è£ååˆ¤å®šå¤„ç†å™¨ A åœ¨ç«äº‰ä¸­è·èƒœï¼ˆæ€»çº¿ä»²è£ä¼šç¡®ä¿æ‰€æœ‰å¤„ç†å™¨éƒ½èƒ½å…¬å¹³çš„è®¿é—®å†…å­˜ï¼‰ã€‚æ­¤æ—¶å¤„ç†å™¨ A ç»§ç»­å®ƒçš„æ€»çº¿äº‹åŠ¡ï¼Œè€Œå…¶å®ƒä¸¤ä¸ªå¤„ç†å™¨åˆ™è¦ç­‰å¾…å¤„ç†å™¨ A çš„æ€»çº¿äº‹åŠ¡å®Œæˆåæ‰èƒ½å¼€å§‹å†æ¬¡æ‰§è¡Œå†…å­˜è®¿é—®ã€‚å‡è®¾åœ¨å¤„ç†å™¨ A æ‰§è¡Œæ€»çº¿äº‹åŠ¡æœŸé—´ï¼ˆä¸ç®¡è¿™ä¸ªæ€»çº¿äº‹åŠ¡æ˜¯è¯»äº‹åŠ¡è¿˜æ˜¯å†™äº‹åŠ¡ï¼‰ï¼Œå¤„ç†å™¨ D å‘æ€»çº¿å‘èµ·äº†æ€»çº¿äº‹åŠ¡ï¼Œæ­¤æ—¶å¤„ç†å™¨ D çš„è¿™ä¸ªè¯·æ±‚ä¼šè¢«æ€»çº¿ç¦æ­¢ã€‚ æ€»çº¿çš„è¿™äº›å·¥ä½œæœºåˆ¶å¯ä»¥æŠŠæ‰€æœ‰å¤„ç†å™¨å¯¹å†…å­˜çš„è®¿é—®ä»¥ä¸²è¡ŒåŒ–çš„æ–¹å¼æ¥æ‰§è¡Œï¼›åœ¨ä»»æ„æ—¶é—´ç‚¹ï¼Œæœ€å¤šåªèƒ½æœ‰ä¸€ä¸ªå¤„ç†å™¨èƒ½è®¿é—®å†…å­˜ã€‚è¿™ä¸ªç‰¹æ€§ç¡®ä¿äº†å•ä¸ªæ€»çº¿äº‹åŠ¡ä¹‹ä¸­çš„å†…å­˜è¯»/å†™æ“ä½œå…·æœ‰åŸå­æ€§ã€‚ åœ¨ä¸€äº› 32 ä½çš„å¤„ç†å™¨ä¸Šï¼Œå¦‚æœè¦æ±‚å¯¹ 64 ä½æ•°æ®çš„å†™æ“ä½œå…·æœ‰åŸå­æ€§ï¼Œä¼šæœ‰æ¯”è¾ƒå¤§çš„å¼€é”€ã€‚ä¸ºäº†ç…§é¡¾è¿™ç§å¤„ç†å™¨ï¼ŒJava è¯­è¨€è§„èŒƒé¼“åŠ±ä½†ä¸å¼ºæ±‚ JVM å¯¹ 64 ä½çš„ long å‹å˜é‡å’Œ double å‹å˜é‡çš„å†™å…·æœ‰åŸå­æ€§ã€‚å½“ JVM åœ¨è¿™ç§å¤„ç†å™¨ä¸Šè¿è¡Œæ—¶ï¼Œä¼šæŠŠä¸€ä¸ª 64 ä½ long/ double å‹å˜é‡çš„å†™æ“ä½œæ‹†åˆ†ä¸ºä¸¤ä¸ª 32 ä½çš„å†™æ“ä½œæ¥æ‰§è¡Œã€‚è¿™ä¸¤ä¸ª 32 ä½çš„å†™æ“ä½œå¯èƒ½ä¼šè¢«åˆ†é…åˆ°ä¸åŒçš„æ€»çº¿äº‹åŠ¡ä¸­æ‰§è¡Œï¼Œæ­¤æ—¶å¯¹è¿™ä¸ª 64 ä½å˜é‡çš„å†™å°†ä¸å…·æœ‰åŸå­æ€§ã€‚ å½“å•ä¸ªå†…å­˜æ“ä½œä¸å…·æœ‰åŸå­æ€§ï¼Œå°†å¯èƒ½ä¼šäº§ç”Ÿæ„æƒ³ä¸åˆ°åæœã€‚è¯·çœ‹ä¸‹é¢ç¤ºæ„å›¾ï¼š å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå‡è®¾å¤„ç†å™¨ A å†™ä¸€ä¸ª long å‹å˜é‡ï¼ŒåŒæ—¶å¤„ç†å™¨ B è¦è¯»è¿™ä¸ª long å‹å˜é‡ã€‚å¤„ç†å™¨ A ä¸­ 64 ä½çš„å†™æ“ä½œè¢«æ‹†åˆ†ä¸ºä¸¤ä¸ª 32 ä½çš„å†™æ“ä½œï¼Œä¸”è¿™ä¸¤ä¸ª 32 ä½çš„å†™æ“ä½œè¢«åˆ†é…åˆ°ä¸åŒçš„å†™äº‹åŠ¡ä¸­æ‰§è¡Œã€‚åŒæ—¶å¤„ç†å™¨ B ä¸­ 64 ä½çš„è¯»æ“ä½œè¢«åˆ†é…åˆ°å•ä¸ªçš„è¯»äº‹åŠ¡ä¸­æ‰§è¡Œã€‚å½“å¤„ç†å™¨ A å’Œ B æŒ‰ä¸Šå›¾çš„æ—¶åºæ¥æ‰§è¡Œæ—¶ï¼Œå¤„ç†å™¨ B å°†çœ‹åˆ°ä»…ä»…è¢«å¤„ç†å™¨ A â€œå†™äº†ä¸€åŠâ€œçš„æ— æ•ˆå€¼ã€‚ æ³¨æ„ï¼Œåœ¨ JSR -133 ä¹‹å‰çš„æ—§å†…å­˜æ¨¡å‹ä¸­ï¼Œä¸€ä¸ª 64 ä½ long/ double å‹å˜é‡çš„è¯»/å†™æ“ä½œå¯ä»¥è¢«æ‹†åˆ†ä¸ºä¸¤ä¸ª 32 ä½çš„è¯»/å†™æ“ä½œæ¥æ‰§è¡Œã€‚ä» JSR -133 å†…å­˜æ¨¡å‹å¼€å§‹ï¼ˆå³ä»JDK5å¼€å§‹ï¼‰ï¼Œä»…ä»…åªå…è®¸æŠŠä¸€ä¸ª 64 ä½ long/ double å‹å˜é‡çš„å†™æ“ä½œæ‹†åˆ†ä¸ºä¸¤ä¸ª 32 ä½çš„å†™æ“ä½œæ¥æ‰§è¡Œï¼Œä»»æ„çš„è¯»æ“ä½œåœ¨JSR -133ä¸­éƒ½å¿…é¡»å…·æœ‰åŸå­æ€§ï¼ˆå³ä»»æ„è¯»æ“ä½œå¿…é¡»è¦åœ¨å•ä¸ªè¯»äº‹åŠ¡ä¸­æ‰§è¡Œï¼‰ã€‚ VolatileVolatile ç‰¹æ€§ä¸¾ä¸ªä¾‹å­ï¼š 123456789101112131415public class VolatileTest &#123; volatile long a = 1L; // ä½¿ç”¨ volatile å£°æ˜ 64 ä½çš„ long å‹ public void set(long l) &#123; a = l; //å•ä¸ª volatile å˜é‡çš„å†™ &#125; public long get() &#123; return a; //å•ä¸ª volatile å˜é‡çš„è¯» &#125; public void getAndIncreament() &#123; a++; // å¤åˆï¼ˆå¤šä¸ªï¼‰ volatile å˜é‡çš„è¯» /å†™ &#125;&#125; å‡è®¾æœ‰å¤šä¸ªçº¿ç¨‹åˆ†åˆ«è°ƒç”¨ä¸Šé¢ç¨‹åºçš„ä¸‰ä¸ªæ–¹æ³•ï¼Œè¿™ä¸ªç¨‹åºåœ¨è¯­ä¹‰ä¸Šå’Œä¸‹é¢ç¨‹åºç­‰ä»·ï¼š 1234567891011121314151617public class VolatileTest &#123; long a = 1L; // 64 ä½çš„ long å‹æ™®é€šå˜é‡ public synchronized void set(long l) &#123; //å¯¹å•ä¸ªæ™®é€šå˜é‡çš„å†™ç”¨åŒä¸€ä¸ªé”åŒæ­¥ a = l; &#125; public synchronized long get() &#123; //å¯¹å•ä¸ªæ™®é€šå˜é‡çš„è¯»ç”¨åŒä¸€ä¸ªé”åŒæ­¥ return a; &#125; public void getAndIncreament() &#123; //æ™®é€šæ–¹æ³•è°ƒç”¨ long temp = get(); //è°ƒç”¨å·²åŒæ­¥çš„è¯»æ–¹æ³• temp += 1L; //æ™®é€šå†™æ“ä½œ set(temp); //è°ƒç”¨å·²åŒæ­¥çš„å†™æ–¹æ³• &#125;&#125; å¦‚ä¸Šé¢ç¤ºä¾‹ç¨‹åºæ‰€ç¤ºï¼Œå¯¹ä¸€ä¸ª volatile å˜é‡çš„å•ä¸ªè¯»/å†™æ“ä½œï¼Œä¸å¯¹ä¸€ä¸ªæ™®é€šå˜é‡çš„è¯»/å†™æ“ä½œä½¿ç”¨åŒä¸€ä¸ªé”æ¥åŒæ­¥ï¼Œå®ƒä»¬ä¹‹é—´çš„æ‰§è¡Œæ•ˆæœç›¸åŒã€‚ é”çš„ happens-before è§„åˆ™ä¿è¯é‡Šæ”¾é”å’Œè·å–é”çš„ä¸¤ä¸ªçº¿ç¨‹ä¹‹é—´çš„å†…å­˜å¯è§æ€§ï¼Œè¿™æ„å‘³ç€å¯¹ä¸€ä¸ª volatile å˜é‡çš„è¯»ï¼Œæ€»æ˜¯èƒ½çœ‹åˆ°ï¼ˆä»»æ„çº¿ç¨‹ï¼‰å¯¹è¿™ä¸ª volatile å˜é‡æœ€åçš„å†™å…¥ã€‚ é”çš„è¯­ä¹‰å†³å®šäº†ä¸´ç•ŒåŒºä»£ç çš„æ‰§è¡Œå…·æœ‰åŸå­æ€§ã€‚è¿™æ„å‘³ç€å³ä½¿æ˜¯ 64 ä½çš„ long å‹å’Œ double å‹å˜é‡ï¼Œåªè¦å®ƒæ˜¯ volatileå˜é‡ï¼Œå¯¹è¯¥å˜é‡çš„è¯»å†™å°±å°†å…·æœ‰åŸå­æ€§ã€‚å¦‚æœæ˜¯å¤šä¸ª volatile æ“ä½œæˆ–ç±»ä¼¼äº volatile++ è¿™ç§å¤åˆæ“ä½œï¼Œè¿™äº›æ“ä½œæ•´ä½“ä¸Šä¸å…·æœ‰åŸå­æ€§ã€‚ ç®€è€Œè¨€ä¹‹ï¼Œvolatile å˜é‡è‡ªèº«å…·æœ‰ä¸‹åˆ—ç‰¹æ€§ï¼š å¯è§æ€§ã€‚å¯¹ä¸€ä¸ª volatile å˜é‡çš„è¯»ï¼Œæ€»æ˜¯èƒ½çœ‹åˆ°ï¼ˆä»»æ„çº¿ç¨‹ï¼‰å¯¹è¿™ä¸ª volatile å˜é‡æœ€åçš„å†™å…¥ã€‚ åŸå­æ€§ï¼šå¯¹ä»»æ„å•ä¸ª volatile å˜é‡çš„è¯»/å†™å…·æœ‰åŸå­æ€§ï¼Œä½†ç±»ä¼¼äº volatile++ è¿™ç§å¤åˆæ“ä½œä¸å…·æœ‰åŸå­æ€§ã€‚ volatile å†™-è¯»çš„å†…å­˜å®šä¹‰ å½“å†™ä¸€ä¸ª volatile å˜é‡æ—¶ï¼ŒJMM ä¼šæŠŠè¯¥çº¿ç¨‹å¯¹åº”çš„æœ¬åœ°å†…å­˜ä¸­çš„å…±äº«å˜é‡å€¼åˆ·æ–°åˆ°ä¸»å†…å­˜ã€‚ å½“è¯»ä¸€ä¸ª volatile å˜é‡æ—¶ï¼ŒJMM ä¼šæŠŠè¯¥çº¿ç¨‹å¯¹åº”çš„æœ¬åœ°å†…å­˜ç½®ä¸ºæ— æ•ˆã€‚çº¿ç¨‹æ¥ä¸‹æ¥å°†ä»ä¸»å†…å­˜ä¸­è¯»å–å…±äº«å˜é‡ã€‚ å‡è®¾ä¸Šé¢çš„ç¨‹åº flag å˜é‡ç”¨ volatile ä¿®é¥° volatile å†…å­˜è¯­ä¹‰çš„å®ç°ä¸‹é¢æ˜¯ JMM é’ˆå¯¹ç¼–è¯‘å™¨åˆ¶å®šçš„ volatile é‡æ’åºè§„åˆ™è¡¨ï¼š ä¸ºäº†å®ç° volatile çš„å†…å­˜è¯­ä¹‰ï¼Œç¼–è¯‘å™¨åœ¨ç”Ÿæˆå­—èŠ‚ç æ—¶ï¼Œä¼šåœ¨æŒ‡ä»¤åºåˆ—ä¸­æ’å…¥å†…å­˜å±éšœæ¥ç¦æ­¢ç‰¹å®šç±»å‹çš„å¤„ç†å™¨é‡æ’åºã€‚ ä¸‹é¢æ˜¯åŸºäºä¿å®ˆç­–ç•¥çš„ JMM å†…å­˜å±éšœæ’å…¥ç­–ç•¥ï¼š åœ¨æ¯ä¸ª volatile å†™æ“ä½œçš„å‰é¢æ’å…¥ä¸€ä¸ª StoreStore å±éšœã€‚ åœ¨æ¯ä¸ª volatile å†™æ“ä½œçš„åé¢æ’å…¥ä¸€ä¸ª StoreLoad å±éšœã€‚ åœ¨æ¯ä¸ª volatile è¯»æ“ä½œçš„åé¢æ’å…¥ä¸€ä¸ª LoadLoad å±éšœã€‚ åœ¨æ¯ä¸ª volatile è¯»æ“ä½œçš„åé¢æ’å…¥ä¸€ä¸ª LoadStore å±éšœã€‚ ä¸‹é¢æ˜¯ä¿å®ˆç­–ç•¥ä¸‹ï¼Œvolatile å†™æ“ä½œ æ’å…¥å†…å­˜å±éšœåç”Ÿæˆçš„æŒ‡ä»¤åºåˆ—ç¤ºæ„å›¾ï¼š ä¸‹é¢æ˜¯åœ¨ä¿å®ˆç­–ç•¥ä¸‹ï¼Œvolatile è¯»æ“ä½œ æ’å…¥å†…å­˜å±éšœåç”Ÿæˆçš„æŒ‡ä»¤åºåˆ—ç¤ºæ„å›¾ï¼š ä¸Šè¿° volatile å†™æ“ä½œå’Œ volatile è¯»æ“ä½œçš„å†…å­˜å±éšœæ’å…¥ç­–ç•¥éå¸¸ä¿å®ˆã€‚åœ¨å®é™…æ‰§è¡Œæ—¶ï¼Œåªè¦ä¸æ”¹å˜ volatile å†™-è¯»çš„å†…å­˜è¯­ä¹‰ï¼Œç¼–è¯‘å™¨å¯ä»¥æ ¹æ®å…·ä½“æƒ…å†µçœç•¥ä¸å¿…è¦çš„å±éšœã€‚ é”é”é‡Šæ”¾å’Œè·å–çš„å†…å­˜è¯­ä¹‰å½“çº¿ç¨‹é‡Šæ”¾é”æ—¶ï¼ŒJMM ä¼šæŠŠè¯¥çº¿ç¨‹å¯¹åº”çš„æœ¬åœ°å†…å­˜ä¸­çš„å…±äº«å˜é‡åˆ·æ–°åˆ°ä¸»å†…å­˜ä¸­ã€‚ å½“çº¿ç¨‹è·å–é”æ—¶ï¼ŒJMM ä¼šæŠŠè¯¥çº¿ç¨‹å¯¹åº”çš„æœ¬åœ°å†…å­˜ç½®ä¸ºæ— æ•ˆã€‚ä»è€Œä½¿å¾—è¢«ç›‘è§†å™¨ä¿æŠ¤çš„ä¸´ç•ŒåŒºä»£ç å¿…é¡»è¦ä»ä¸»å†…å­˜ä¸­å»è¯»å–å…±äº«å˜é‡ã€‚ é”å†…å­˜è¯­ä¹‰çš„å®ç°å€ŸåŠ© ReentrantLock æ¥è®²è§£ï¼ŒPSï¼š åé¢ä¸“é—¨è®²ä¸‹è¿™å—ï¼ˆReentrantLockã€Synchronizedã€å…¬å¹³é”ã€éå…¬å¹³é”ã€AQSç­‰ï¼‰ï¼Œå¯ä»¥çœ‹çœ‹å¤§æ˜å“¥çš„åšå®¢ï¼šhttp://cmsblogs.com/?p=2210 concurrent åŒ…çš„å®ç°å¦‚æœæˆ‘ä»¬ä»”ç»†åˆ†æ concurrent åŒ…çš„æºä»£ç å®ç°ï¼Œä¼šå‘ç°ä¸€ä¸ªé€šç”¨åŒ–çš„å®ç°æ¨¡å¼ï¼š é¦–å…ˆï¼Œå£°æ˜å…±äº«å˜é‡ä¸º volatileï¼› ç„¶åï¼Œä½¿ç”¨ CAS çš„åŸå­æ¡ä»¶æ›´æ–°æ¥å®ç°çº¿ç¨‹ä¹‹é—´çš„åŒæ­¥ï¼› åŒæ—¶ï¼Œé…åˆä»¥ volatile çš„è¯»/å†™å’Œ CAS æ‰€å…·æœ‰çš„ volatile è¯»å’Œå†™çš„å†…å­˜è¯­ä¹‰æ¥å®ç°çº¿ç¨‹ä¹‹é—´çš„é€šä¿¡ã€‚ AQSï¼Œéé˜»å¡æ•°æ®ç»“æ„å’ŒåŸå­å˜é‡ç±»ï¼ˆjava.util.concurrent.atomic åŒ…ä¸­çš„ç±»ï¼‰ï¼Œè¿™äº› concurrent åŒ…ä¸­çš„åŸºç¡€ç±»éƒ½æ˜¯ä½¿ç”¨è¿™ç§æ¨¡å¼æ¥å®ç°çš„ï¼Œè€Œ concurrent åŒ…ä¸­çš„é«˜å±‚ç±»åˆæ˜¯ä¾èµ–äºè¿™äº›åŸºç¡€ç±»æ¥å®ç°çš„ã€‚ä»æ•´ä½“æ¥çœ‹ï¼Œconcurrent åŒ…çš„å®ç°ç¤ºæ„å›¾å¦‚ä¸‹ï¼š finalå¯¹äº final åŸŸï¼Œç¼–è¯‘å™¨å’Œå¤„ç†å™¨è¦éµå®ˆä¸¤ä¸ªé‡æ’åºè§„åˆ™ï¼š åœ¨æ„é€ å‡½æ•°å†…å¯¹ä¸€ä¸ª final åŸŸçš„å†™å…¥ï¼Œä¸éšåæŠŠè¿™ä¸ªè¢«æ„é€ å¯¹è±¡çš„å¼•ç”¨èµ‹å€¼ç»™ä¸€ä¸ªå¼•ç”¨å˜é‡ï¼Œè¿™ä¸¤ä¸ªæ“ä½œä¹‹é—´ä¸èƒ½é‡æ’åºã€‚ åˆæ¬¡è¯»ä¸€ä¸ªåŒ…å« final åŸŸçš„å¯¹è±¡çš„å¼•ç”¨ï¼Œä¸éšååˆæ¬¡è¯»è¿™ä¸ª final åŸŸï¼Œè¿™ä¸¤ä¸ªæ“ä½œä¹‹é—´ä¸èƒ½é‡æ’åºã€‚ å†™ final åŸŸçš„é‡æ’åºè§„åˆ™å†™ final åŸŸçš„é‡æ’åºè§„åˆ™ç¦æ­¢æŠŠ final åŸŸçš„å†™é‡æ’åºåˆ°æ„é€ å‡½æ•°ä¹‹å¤–ã€‚è¿™ä¸ªè§„åˆ™çš„å®ç°åŒ…å«ä¸‹é¢2ä¸ªæ–¹é¢ï¼š JMM ç¦æ­¢ç¼–è¯‘å™¨æŠŠ final åŸŸçš„å†™é‡æ’åºåˆ°æ„é€ å‡½æ•°ä¹‹å¤–ã€‚ ç¼–è¯‘å™¨ä¼šåœ¨ final åŸŸçš„å†™ä¹‹åï¼Œæ„é€ å‡½æ•° return ä¹‹å‰ï¼Œæ’å…¥ä¸€ä¸ª StoreStore å±éšœã€‚è¿™ä¸ªå±éšœç¦æ­¢å¤„ç†å™¨æŠŠ final åŸŸçš„å†™é‡æ’åºåˆ°æ„é€ å‡½æ•°ä¹‹å¤–ã€‚ è¯» final åŸŸçš„é‡æ’åºè§„åˆ™åœ¨ä¸€ä¸ªçº¿ç¨‹ä¸­ï¼Œåˆæ¬¡è¯»å¯¹è±¡å¼•ç”¨ä¸åˆæ¬¡è¯»è¯¥å¯¹è±¡åŒ…å«çš„ final åŸŸï¼ŒJMM ç¦æ­¢å¤„ç†å™¨é‡æ’åºè¿™ä¸¤ä¸ªæ“ä½œï¼ˆæ³¨æ„ï¼Œè¿™ä¸ªè§„åˆ™ä»…ä»…é’ˆå¯¹å¤„ç†å™¨ï¼‰ã€‚ç¼–è¯‘å™¨ä¼šåœ¨è¯» final åŸŸæ“ä½œçš„å‰é¢æ’å…¥ä¸€ä¸ª LoadLoad å±éšœã€‚ final åŸŸæ˜¯å¼•ç”¨ç±»å‹å¯¹äºå¼•ç”¨ç±»å‹ï¼Œå†™ final åŸŸçš„é‡æ’åºè§„åˆ™å¯¹ç¼–è¯‘å™¨å’Œå¤„ç†å™¨å¢åŠ äº†å¦‚ä¸‹çº¦æŸï¼š åœ¨æ„é€ å‡½æ•°å†…å¯¹ä¸€ä¸ª final å¼•ç”¨çš„å¯¹è±¡çš„æˆå‘˜åŸŸçš„å†™å…¥ï¼Œä¸éšååœ¨æ„é€ å‡½æ•°å¤–æŠŠè¿™ä¸ªè¢«æ„é€ å¯¹è±¡çš„å¼•ç”¨èµ‹å€¼ç»™ä¸€ä¸ªå¼•ç”¨å˜é‡ï¼Œè¿™ä¸¤ä¸ªæ“ä½œä¹‹é—´ä¸èƒ½é‡æ’åºã€‚ æ€»ç»“JMMï¼Œå¤„ç†å™¨å†…å­˜æ¨¡å‹ä¸é¡ºåºä¸€è‡´æ€§å†…å­˜æ¨¡å‹ä¹‹é—´çš„å…³ç³»JMM æ˜¯ä¸€ä¸ªè¯­è¨€çº§çš„å†…å­˜æ¨¡å‹ï¼Œå¤„ç†å™¨å†…å­˜æ¨¡å‹æ˜¯ç¡¬ä»¶çº§çš„å†…å­˜æ¨¡å‹ï¼Œé¡ºåºä¸€è‡´æ€§å†…å­˜æ¨¡å‹æ˜¯ä¸€ä¸ªç†è®ºå‚è€ƒæ¨¡å‹ã€‚ä¸‹é¢æ˜¯è¯­è¨€å†…å­˜æ¨¡å‹ï¼Œå¤„ç†å™¨å†…å­˜æ¨¡å‹å’Œé¡ºåºä¸€è‡´æ€§å†…å­˜æ¨¡å‹çš„å¼ºå¼±å¯¹æ¯”ç¤ºæ„å›¾ï¼š JMM çš„è®¾è®¡ç¤ºæ„å›¾ JMM çš„å†…å­˜å¯è§æ€§ä¿è¯Java ç¨‹åºçš„å†…å­˜å¯è§æ€§ä¿è¯æŒ‰ç¨‹åºç±»å‹å¯ä»¥åˆ†ä¸ºä¸‹åˆ—ä¸‰ç±»ï¼š 1.å•çº¿ç¨‹ç¨‹åºã€‚å•çº¿ç¨‹ç¨‹åºä¸ä¼šå‡ºç°å†…å­˜å¯è§æ€§é—®é¢˜ã€‚ç¼–è¯‘å™¨ï¼Œruntime å’Œå¤„ç†å™¨ä¼šå…±åŒç¡®ä¿å•çº¿ç¨‹ç¨‹åºçš„æ‰§è¡Œç»“æœä¸è¯¥ç¨‹åºåœ¨é¡ºåºä¸€è‡´æ€§æ¨¡å‹ä¸­çš„æ‰§è¡Œç»“æœç›¸åŒã€‚ 2.æ­£ç¡®åŒæ­¥çš„å¤šçº¿ç¨‹ç¨‹åºã€‚æ­£ç¡®åŒæ­¥çš„å¤šçº¿ç¨‹ç¨‹åºçš„æ‰§è¡Œå°†å…·æœ‰é¡ºåºä¸€è‡´æ€§ï¼ˆç¨‹åºçš„æ‰§è¡Œç»“æœä¸è¯¥ç¨‹åºåœ¨é¡ºåºä¸€è‡´æ€§å†…å­˜æ¨¡å‹ä¸­çš„æ‰§è¡Œç»“æœç›¸åŒï¼‰ã€‚è¿™æ˜¯ JMM å…³æ³¨çš„é‡ç‚¹ï¼ŒJMMé€šè¿‡é™åˆ¶ç¼–è¯‘å™¨å’Œå¤„ç†å™¨çš„é‡æ’åºæ¥ä¸ºç¨‹åºå‘˜æä¾›å†…å­˜å¯è§æ€§ä¿è¯ã€‚ 3.æœªåŒæ­¥/æœªæ­£ç¡®åŒæ­¥çš„å¤šçº¿ç¨‹ç¨‹åºã€‚JMM ä¸ºå®ƒä»¬æä¾›äº†æœ€å°å®‰å…¨æ€§ä¿éšœï¼šçº¿ç¨‹æ‰§è¡Œæ—¶è¯»å–åˆ°çš„å€¼ï¼Œè¦ä¹ˆæ˜¯ä¹‹å‰æŸä¸ªçº¿ç¨‹å†™å…¥çš„å€¼ï¼Œè¦ä¹ˆæ˜¯é»˜è®¤å€¼ï¼ˆ0ï¼Œnullï¼Œfalseï¼‰ã€‚ ä¸‹å›¾å±•ç¤ºäº†è¿™ä¸‰ç±»ç¨‹åºåœ¨ JMM ä¸­ä¸åœ¨é¡ºåºä¸€è‡´æ€§å†…å­˜æ¨¡å‹ä¸­çš„æ‰§è¡Œç»“æœçš„å¼‚åŒï¼š","tags":[{"name":"Java","slug":"Java","permalink":"http://yoursite.com/tags/Java/"},{"name":"JMM","slug":"JMM","permalink":"http://yoursite.com/tags/JMM/"}]},{"title":"Spring Bootç³»åˆ—æ–‡ç« ï¼ˆå…­ï¼‰ï¼šSpringBoot RocketMQ æ•´åˆä½¿ç”¨å’Œç›‘æ§","date":"2018-02-06T16:00:00.000Z","path":"2018/02/07/SpringBoot-RocketMQ/","text":"å‰æé€šè¿‡å‰é¢ä¸¤ç¯‡æ–‡ç« å¯ä»¥ç®€å•çš„äº†è§£ RocketMQ å’Œ å®‰è£… RocketMQ ï¼Œä»Šå¤©å°±å°† SpringBoot å’Œ RocketMQ æ•´åˆèµ·æ¥ä½¿ç”¨ã€‚ ç›¸å…³æ–‡ç« 1ã€SpringBoot Kafka æ•´åˆä½¿ç”¨ 2ã€SpringBoot RabbitMQ æ•´åˆä½¿ç”¨ 3ã€SpringBoot ActiveMQ æ•´åˆä½¿ç”¨ 4ã€Kafka å®‰è£…åŠå¿«é€Ÿå…¥é—¨ 5ã€SpringBoot RabbitMQ æ•´åˆè¿›é˜¶ç‰ˆ 6ã€RocketMQ åˆæ¢ 7ã€RocketMQ å®‰è£…åŠå¿«é€Ÿå…¥é—¨ å…³æ³¨æˆ‘ è½¬è½½è¯·åŠ¡å¿…æ³¨æ˜åŸåˆ›åœ°å€ä¸ºï¼šhttp://www.54tianzhisheng.cn/2018/02/07/SpringBoot-RocketMQ/ åˆ›å»ºé¡¹ç›®åœ¨ IDEA åˆ›å»ºä¸€ä¸ª SpringBoot é¡¹ç›®ï¼Œé¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š pom æ–‡ä»¶å¼•å…¥ RocketMQ çš„ä¸€äº›ç›¸å…³ä¾èµ–ï¼Œæœ€åçš„ pom æ–‡ä»¶å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;groupId&gt;com.zhisheng&lt;/groupId&gt; &lt;artifactId&gt;rocketmq&lt;/artifactId&gt; &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt; &lt;packaging&gt;jar&lt;/packaging&gt; &lt;name&gt;rocketmq&lt;/name&gt; &lt;description&gt;Demo project for Spring Boot RocketMQ&lt;/description&gt; &lt;parent&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt; &lt;version&gt;1.5.9.RELEASE&lt;/version&gt; &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt; &lt;/parent&gt; &lt;properties&gt; &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt; &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt; &lt;java.version&gt;1.8&lt;/java.version&gt; &lt;/properties&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.apache.rocketmq&lt;/groupId&gt; &lt;artifactId&gt;rocketmq-common&lt;/artifactId&gt; &lt;version&gt;4.2.0&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.apache.rocketmq&lt;/groupId&gt; &lt;artifactId&gt;rocketmq-client&lt;/artifactId&gt; &lt;version&gt;4.2.0&lt;/version&gt; &lt;/dependency&gt; &lt;/dependencies&gt; &lt;build&gt; &lt;plugins&gt; &lt;plugin&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt; &lt;/plugin&gt; &lt;/plugins&gt; &lt;/build&gt;&lt;/project&gt; é…ç½®æ–‡ä»¶application.properties ä¸­å¦‚ä¸‹ï¼š 123456# æ¶ˆè´¹è€…çš„ç»„åapache.rocketmq.consumer.PushConsumer=PushConsumer# ç”Ÿäº§è€…çš„ç»„åapache.rocketmq.producer.producerGroup=Producer# NameServeråœ°å€apache.rocketmq.namesrvAddr=localhost:9876 ç”Ÿäº§è€…1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162package com.zhisheng.rocketmq.client;import org.apache.rocketmq.client.producer.DefaultMQProducer;import org.apache.rocketmq.common.message.Message;import org.apache.rocketmq.remoting.common.RemotingHelper;import org.springframework.beans.factory.annotation.Value;import org.springframework.stereotype.Component;import org.springframework.util.StopWatch;import javax.annotation.PostConstruct;/** * Created by zhisheng_tian on 2018/2/6 */@Componentpublic class RocketMQClient &#123; /** * ç”Ÿäº§è€…çš„ç»„å */ @Value(\"$&#123;apache.rocketmq.producer.producerGroup&#125;\") private String producerGroup; /** * NameServer åœ°å€ */ @Value(\"$&#123;apache.rocketmq.namesrvAddr&#125;\") private String namesrvAddr; @PostConstruct public void defaultMQProducer() &#123; //ç”Ÿäº§è€…çš„ç»„å DefaultMQProducer producer = new DefaultMQProducer(producerGroup); //æŒ‡å®šNameServeråœ°å€ï¼Œå¤šä¸ªåœ°å€ä»¥ ; éš”å¼€ producer.setNamesrvAddr(namesrvAddr); try &#123; /** * Producerå¯¹è±¡åœ¨ä½¿ç”¨ä¹‹å‰å¿…é¡»è¦è°ƒç”¨startåˆå§‹åŒ–ï¼Œåˆå§‹åŒ–ä¸€æ¬¡å³å¯ * æ³¨æ„ï¼šåˆ‡è®°ä¸å¯ä»¥åœ¨æ¯æ¬¡å‘é€æ¶ˆæ¯æ—¶ï¼Œéƒ½è°ƒç”¨startæ–¹æ³• */ producer.start(); //åˆ›å»ºä¸€ä¸ªæ¶ˆæ¯å®ä¾‹ï¼ŒåŒ…å« topicã€tag å’Œ æ¶ˆæ¯ä½“ //å¦‚ä¸‹ï¼štopic ä¸º \"TopicTest\"ï¼Œtag ä¸º \"push\" Message message = new Message(\"TopicTest\", \"push\", \"å‘é€æ¶ˆæ¯----zhisheng-----\".getBytes(RemotingHelper.DEFAULT_CHARSET)); StopWatch stop = new StopWatch(); stop.start(); for (int i = 0; i &lt; 10000; i++) &#123; SendResult result = producer.send(message); System.out.println(\"å‘é€å“åº”ï¼šMsgId:\" + result.getMsgId() + \"ï¼Œå‘é€çŠ¶æ€:\" + result.getSendStatus()); &#125; stop.stop(); System.out.println(\"----------------å‘é€ä¸€ä¸‡æ¡æ¶ˆæ¯è€—æ—¶ï¼š\" + stop.getTotalTimeMillis()); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; finally &#123; producer.shutdown(); &#125; &#125;&#125; æ¶ˆè´¹è€…123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566package com.zhisheng.rocketmq.server;import org.apache.rocketmq.client.consumer.DefaultMQPushConsumer;import org.apache.rocketmq.client.consumer.listener.ConsumeConcurrentlyStatus;import org.apache.rocketmq.client.consumer.listener.MessageListenerConcurrently;import org.apache.rocketmq.common.consumer.ConsumeFromWhere;import org.apache.rocketmq.common.message.MessageExt;import org.apache.rocketmq.remoting.common.RemotingHelper;import org.springframework.beans.factory.annotation.Value;import org.springframework.stereotype.Component;import javax.annotation.PostConstruct;/** * Created by zhisheng_tian on 2018/2/6 */@Componentpublic class RocketMQServer &#123; /** * æ¶ˆè´¹è€…çš„ç»„å */ @Value(\"$&#123;apache.rocketmq.consumer.PushConsumer&#125;\") private String consumerGroup; /** * NameServer åœ°å€ */ @Value(\"$&#123;apache.rocketmq.namesrvAddr&#125;\") private String namesrvAddr; @PostConstruct public void defaultMQPushConsumer() &#123; //æ¶ˆè´¹è€…çš„ç»„å DefaultMQPushConsumer consumer = new DefaultMQPushConsumer(consumerGroup); //æŒ‡å®šNameServeråœ°å€ï¼Œå¤šä¸ªåœ°å€ä»¥ ; éš”å¼€ consumer.setNamesrvAddr(namesrvAddr); try &#123; //è®¢é˜…PushTopicä¸‹Tagä¸ºpushçš„æ¶ˆæ¯ consumer.subscribe(\"TopicTest\", \"push\"); //è®¾ç½®Consumerç¬¬ä¸€æ¬¡å¯åŠ¨æ˜¯ä»é˜Ÿåˆ—å¤´éƒ¨å¼€å§‹æ¶ˆè´¹è¿˜æ˜¯é˜Ÿåˆ—å°¾éƒ¨å¼€å§‹æ¶ˆè´¹ //å¦‚æœéç¬¬ä¸€æ¬¡å¯åŠ¨ï¼Œé‚£ä¹ˆæŒ‰ç…§ä¸Šæ¬¡æ¶ˆè´¹çš„ä½ç½®ç»§ç»­æ¶ˆè´¹ consumer.setConsumeFromWhere(ConsumeFromWhere.CONSUME_FROM_FIRST_OFFSET); consumer.registerMessageListener((MessageListenerConcurrently) (list, context) -&gt; &#123; try &#123; for (MessageExt messageExt : list) &#123; System.out.println(\"messageExt: \" + messageExt);//è¾“å‡ºæ¶ˆæ¯å†…å®¹ String messageBody = new String(messageExt.getBody(), RemotingHelper.DEFAULT_CHARSET); System.out.println(\"æ¶ˆè´¹å“åº”ï¼šmsgId : \" + messageExt.getMsgId() + \", msgBody : \" + messageBody);//è¾“å‡ºæ¶ˆæ¯å†…å®¹ &#125; &#125; catch (Exception e) &#123; e.printStackTrace(); return ConsumeConcurrentlyStatus.RECONSUME_LATER; //ç¨åå†è¯• &#125; return ConsumeConcurrentlyStatus.CONSUME_SUCCESS; //æ¶ˆè´¹æˆåŠŸ &#125;); consumer.start(); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; &#125;&#125; å¯åŠ¨ç±»123456789101112package com.zhisheng.rocketmq;import org.springframework.boot.SpringApplication;import org.springframework.boot.autoconfigure.SpringBootApplication;@SpringBootApplicationpublic class RocketmqApplication &#123; public static void main(String[] args) &#123; SpringApplication.run(RocketmqApplication.class, args); &#125;&#125; RocketMQä»£ç å·²ç»éƒ½å†™å¥½äº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦å°†ä¸ RocketMQ æœ‰å…³çš„å¯åŠ¨èµ·æ¥ã€‚ å¯åŠ¨ Name Serveråœ¨å‰é¢æ–‡ç« ä¸­å·²ç»å†™è¿‡æ€ä¹ˆå¯åŠ¨ï¼Œhttp://www.54tianzhisheng.cn/2018/02/06/RocketMQ-install/#%E5%90%AF%E5%8A%A8-NameServer è¿›å…¥åˆ°ç›®å½• ï¼š 1cd distribution/target/apache-rocketmq å¯åŠ¨ï¼š 123nohup sh bin/mqnamesrv &amp;tail -f ~/logs/rocketmqlogs/namesrv.log //é€šè¿‡æ—¥å¿—æŸ¥çœ‹æ˜¯å¦å¯åŠ¨æˆåŠŸ å¯åŠ¨ Broker123nohup sh bin/mqbroker -n localhost:9876 &amp;tail -f ~/logs/rocketmqlogs/broker.log //é€šè¿‡æ—¥å¿—æŸ¥çœ‹æ˜¯å¦å¯åŠ¨æˆåŠŸ ç„¶åè¿è¡Œå¯åŠ¨ç±»ï¼Œè¿è¡Œæ•ˆæœå¦‚ä¸‹ï¼š ç›‘æ§RocketMQæœ‰ä¸€ä¸ªå¯¹å…¶æ‰©å±•çš„å¼€æºé¡¹ç›® ocketmq-console ï¼Œå¦‚ä»Šä¹Ÿæäº¤ç»™äº† Apache ï¼Œåœ°å€åœ¨ï¼šhttps://github.com/apache/rocketmq-externals/tree/master/rocketmq-console ï¼Œå®˜æ–¹ä¹Ÿç»™å‡ºäº†å…¶æ”¯æŒçš„åŠŸèƒ½çš„ä¸­æ–‡æ–‡æ¡£ï¼šhttps://github.com/apache/rocketmq-externals/blob/master/rocketmq-console/doc/1_0_0/UserGuide_CN.md ï¼Œ é‚£ä¹ˆè¯¥å¦‚ä½•å®‰è£…ï¼Ÿ Docker å®‰è£…1ã€è·å– Docker é•œåƒ 1docker pull styletang/rocketmq-console-ng 2ã€è¿è¡Œï¼Œæ³¨æ„å°†ä½ è‡ªå·±çš„ NameServer åœ°å€æ›¿æ¢ä¸‹é¢çš„ 127.0.0.1 1docker run -e &quot;JAVA_OPTS=-Drocketmq.namesrv.addr=127.0.0.1:9876 -Dcom.rocketmq.sendMessageWithVIPChannel=false&quot; -p 8080:8080 -t styletang/rocketmq-console-ng é Docker å®‰è£…æˆ‘ä»¬ git clone ä¸€ä»½ä»£ç åˆ°æœ¬åœ°ï¼š 123git clone https://github.com/apache/rocketmq-externals.gitcd rocketmq-externals/rocketmq-console/ éœ€è¦ jdk 1.7 ä»¥ä¸Šã€‚ æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š 1mvn spring-boot:run æˆ–è€… 123mvn clean package -Dmaven.test.skip=truejava -jar target/rocketmq-console-ng-1.0.0.jar æ³¨æ„ï¼š 1ã€å¦‚æœä½ ä¸‹è½½ä¾èµ–ç¼“æ…¢ï¼Œä½ å¯ä»¥é‡æ–°è®¾ç½® maven çš„ mirror ä¸ºé˜¿é‡Œäº‘çš„é•œåƒ 12345678&lt;mirrors&gt; &lt;mirror&gt; &lt;id&gt;alimaven&lt;/id&gt; &lt;name&gt;aliyun maven&lt;/name&gt; &lt;url&gt;http://maven.aliyun.com/nexus/content/groups/public/&lt;/url&gt; &lt;mirrorOf&gt;central&lt;/mirrorOf&gt; &lt;/mirror&gt;&lt;/mirrors&gt; 2ã€å¦‚æœä½ ä½¿ç”¨çš„ RocketMQ ç‰ˆæœ¬å°äº 3.5.8ï¼Œå¦‚æœæ‚¨ä½¿ç”¨ rocketmq &lt; 3.5.8ï¼Œè¯·åœ¨å¯åŠ¨ rocketmq-console-ng æ—¶æ·»åŠ  -Dcom.rocketmq.sendMessageWithVIPChannel = falseï¼ˆæˆ–è€…æ‚¨å¯ä»¥åœ¨ ops é¡µé¢ä¸­æ›´æ”¹å®ƒï¼‰ 3ã€æ›´æ”¹ resource / application.properties ä¸­çš„ rocketmq.config.namesrvAddrï¼ˆæˆ–è€…å¯ä»¥åœ¨opsé¡µé¢ä¸­æ›´æ”¹å®ƒï¼‰ é”™è¯¯è§£å†³æ–¹æ³•1ã€Docker å¯åŠ¨é¡¹ç›®æŠ¥é”™ org.apache.rocketmq.remoting.exception.RemotingConnectException: connect to &lt;null&gt; failed å°† Docker å¯åŠ¨å‘½ä»¤æ”¹æˆå¦‚ä¸‹ä»¥åï¼š 1docker run -e &quot;JAVA_OPTS=-Drocketmq.config.namesrvAddr=127.0.0.1:9876 -Drocketmq.config.isVIPChannel=false&quot; -p 8080:8080 -t styletang/rocketmq-console-ng æŠ¥é”™ä¿¡æ¯æ”¹å˜äº†ï¼Œæ–°çš„æŠ¥é”™ä¿¡æ¯å¦‚ä¸‹ï¼š 123ERROR op=global_exception_handler_print_errororg.apache.rocketmq.console.exception.ServiceException: This date have&apos;t data! çœ‹åˆ°ç½‘ä¸Šæœ‰äººä¹Ÿé‡åˆ°è¿™ä¸ªé—®é¢˜ï¼Œä»–ä»¬éƒ½é€šè¿‡è‡ªå·±çš„æ–¹å¼è§£å†³äº†ï¼Œä½†æ˜¯æ–¹æ³•æˆ‘éƒ½è¯•äº†ï¼Œä¸é€‚åˆæˆ‘ã€‚ä¸å¾—ä¸è¯´ï¼Œé˜¿é‡Œï¼Œä½ èƒ½å†ç”¨å¿ƒç‚¹å—ï¼Ÿæ—¢ç„¶æŠŠ RocketMQ æç»™ Apache äº†ï¼Œè¿™äº›æ–‡æ¡£å•¥çš„éƒ½å¿…é¡»æ›´æ–°å•Šï¼Œä¸è¦è¿˜æ»åç€å‘¢ï¼Œä¸ç„¶å°‘ä¸äº†è¢«åæ§½ï¼ æäº†å¾ˆä¹…è¿™ç§æ–¹æ³•æ²¡æˆåŠŸï¼Œæš‚æ—¶æ”¾å¼ƒï¼mmp 2ã€é Docker å®‰è£…ï¼Œåªå¥½æŠŠæºç ç¼–è¯‘æ‰“åŒ…äº†ã€‚ 1) æ³¨æ„éœ€è¦ä¿®æ”¹å¦‚ä¸‹å›¾ä¸­çš„é…ç½®ï¼š 1234rocketmq.config.namesrvAddr=localhost:9876 //æ³¨æ„æ›¿æ¢ä½ è‡ªå·±çš„ip#å¦‚æœä½  rocketmq ç‰ˆæœ¬å°äº 3.5.8 æ‰éœ€è®¾ç½® `rocketmq.config.isVIPChannel` ä¸º falseï¼Œé»˜è®¤æ˜¯ true, è¿™ä¸ªå¯ä»¥åœ¨æºç ä¸­å¯ä»¥çœ‹åˆ°çš„rocketmq.config.isVIPChannel= 2) æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š 1mvn clean package -Dmaven.test.skip=true ç¼–è¯‘æˆåŠŸï¼š å¯ä»¥çœ‹åˆ°å·²ç»æ‰“å¥½äº† jar åŒ…ï¼š è¿è¡Œï¼š 1java -jar rocketmq-console-ng-1.0.0.jar æˆåŠŸï¼Œä¸æŠ¥é”™äº†ï¼Œå¼€å¿ƒğŸ˜„ï¼Œè®¿é—® http://localhost:8080/ æ•´ä¸ªç›‘æ§å¤§æ¦‚å°±æ˜¯è¿™äº›äº†ã€‚ ç„¶åæˆ‘è¿è¡Œä¹‹å‰çš„ SpringBoot æ•´åˆé¡¹ç›®ï¼ŒæŸ¥çœ‹ç›‘æ§ä¿¡æ¯å¦‚ä¸‹ï¼š æ€»ç»“æ•´ç¯‡æ–‡ç« è®²è¿°äº† SpringBoot ä¸ RocketMQ æ•´åˆå’Œ RocketMQ ç›‘æ§å¹³å°çš„æ­å»ºã€‚ å‚è€ƒæ–‡ç« 1ã€http://www.ymq.io/2018/02/02/spring-boot-rocketmq-example/#%E6%96%B0%E5%8A%A0%E9%A1%B9%E7%9B%AE 2ã€GitHub å®˜æ–¹ README","tags":[{"name":"SpringBoot","slug":"SpringBoot","permalink":"http://yoursite.com/tags/SpringBoot/"},{"name":"RocketMQ","slug":"RocketMQ","permalink":"http://yoursite.com/tags/RocketMQ/"}]},{"title":"RocketMQç³»åˆ—æ–‡ç« ï¼ˆä¸‰ï¼‰ï¼šRocketMQ ç®€å•çš„æ¶ˆæ¯ç¤ºä¾‹","date":"2018-02-06T16:00:00.000Z","path":"2018/02/07/rocketmq-example/","text":"ä½¿ç”¨ RocketMQ ä»¥ä¸‰ç§æ–¹å¼å‘é€æ¶ˆæ¯ï¼šå¯é çš„åŒæ­¥ï¼Œå¯é çš„å¼‚æ­¥å’Œå•å‘ä¼ è¾“ã€‚ å¯é çš„åŒæ­¥ä¼ è¾“åº”ç”¨ï¼šå¯é çš„åŒæ­¥ä¼ è¾“å¹¿æ³›åº”ç”¨äºé‡è¦é€šçŸ¥æ¶ˆæ¯ï¼ŒçŸ­ä¿¡é€šçŸ¥ï¼ŒçŸ­ä¿¡è¥é”€ç³»ç»Ÿç­‰ã€‚ 12345678910111213141516171819202122public class SyncProducer &#123; public static void main(String[] args) throws Exception &#123; //Instantiate with a producer group name. DefaultMQProducer producer = new DefaultMQProducer(\"please_rename_unique_group_name\"); //Launch the instance. producer.start(); for (int i = 0; i &lt; 100; i++) &#123; //Create a message instance, specifying topic, tag and message body. Message msg = new Message(\"TopicTest\" /* Topic */, \"TagA\" /* Tag */, (\"Hello RocketMQ \" + i).getBytes(RemotingHelper.DEFAULT_CHARSET) /* Message body */ ); //Call send message to deliver message to one of brokers. SendResult sendResult = producer.send(msg); System.out.printf(\"%s%n\", sendResult); &#125; //Shut down once the producer instance is not longer in use. producer.shutdown(); &#125;&#125; å¯é çš„å¼‚æ­¥ä¼ è¾“åº”ç”¨ï¼šå¼‚æ­¥ä¼ è¾“ä¸€èˆ¬ç”¨äºå“åº”æ—¶é—´æ•æ„Ÿçš„ä¸šåŠ¡åœºæ™¯ã€‚ 12345678910111213141516171819202122232425262728293031public class AsyncProducer &#123; public static void main(String[] args) throws Exception &#123; //Instantiate with a producer group name. DefaultMQProducer producer = new DefaultMQProducer(\"ExampleProducerGroup\"); //Launch the instance. producer.start(); producer.setRetryTimesWhenSendAsyncFailed(0); for (int i = 0; i &lt; 100; i++) &#123; final int index = i; //Create a message instance, specifying topic, tag and message body. Message msg = new Message(\"TopicTest\", \"TagA\", \"OrderID188\", \"Hello world\".getBytes(RemotingHelper.DEFAULT_CHARSET)); producer.send(msg, new SendCallback() &#123; @Override public void onSuccess(SendResult sendResult) &#123; System.out.printf(\"%-10d OK %s %n\", index, sendResult.getMsgId()); &#125; @Override public void onException(Throwable e) &#123; System.out.printf(\"%-10d Exception %s %n\", index, e); e.printStackTrace(); &#125; &#125;); &#125; //Shut down once the producer instance is not longer in use. producer.shutdown(); &#125;&#125; å•å‘ä¼ è¾“åº”ç”¨ï¼šå•å‘ä¼ è¾“ç”¨äºéœ€è¦ä¸­ç­‰å¯é æ€§çš„æƒ…å†µï¼Œä¾‹å¦‚æ—¥å¿—æ”¶é›†ã€‚ 123456789101112131415161718192021public class OnewayProducer &#123; public static void main(String[] args) throws Exception&#123; //Instantiate with a producer group name. DefaultMQProducer producer = new DefaultMQProducer(\"ExampleProducerGroup\"); //Launch the instance. producer.start(); for (int i = 0; i &lt; 100; i++) &#123; //Create a message instance, specifying topic, tag and message body. Message msg = new Message(\"TopicTest\" /* Topic */, \"TagA\" /* Tag */, (\"Hello RocketMQ \" + i).getBytes(RemotingHelper.DEFAULT_CHARSET) /* Message body */ ); //Call send message to deliver message to one of brokers. producer.sendOneway(msg); &#125; //Shut down once the producer instance is not longer in use. producer.shutdown(); &#125;&#125; å…³æ³¨æˆ‘ æ€»ç»“æœ¬æ–‡æ˜¯ RocketMQ çš„ä¸‰ç§å‘é€æ¶ˆæ¯çš„æ–¹å¼ã€‚ è½¬å‘è¯·æ³¨æ˜åœ°å€ï¼šhttp://www.54tianzhisheng.cn/2018/02/07/rocketmq-example/","tags":[{"name":"RocketMQ","slug":"RocketMQ","permalink":"http://yoursite.com/tags/RocketMQ/"}]},{"title":"RocketMQç³»åˆ—æ–‡ç« ï¼ˆäºŒï¼‰ï¼šRocketMQ å®‰è£…åŠå¿«é€Ÿå…¥é—¨","date":"2018-02-05T16:00:00.000Z","path":"2018/02/06/RocketMQ-install/","text":"å¦‚æœä½ å¯¹ RocketMQ è¿˜æ²¡äº†è§£ï¼Œå»ºè®®å…ˆçœ‹ä¸‹ä¸Šä¸€ç¯‡æ–‡ç« ï¼šRocketMQ åˆæ¢ å®‰è£…æ¡ä»¶ 64ä½æ“ä½œç³»ç»Ÿï¼Œå»ºè®®ä½¿ç”¨ Linux / Unix / Mac; 64ä½JDK 1.8+; Maven 3.2.x ä¸‹è½½å’Œæ„å»ºä» https://www.apache.org/dyn/closer.cgi?path=rocketmq/4.2.0/rocketmq-all-4.2.0-source-release.zip ä¸‹è½½ 4.2.0 çš„æºç ç‰ˆæœ¬ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ¥è§£å‹4.2.0æºç ç‰ˆæœ¬å¹¶æ„å»ºäºŒè¿›åˆ¶æ–‡ä»¶ã€‚ 12345unzip rocketmq-all-4.2.0-source-release.zipcd rocketmq-all-4.2.0/mvn -Prelease-all -DskipTests clean install -U æ„å»ºæˆåŠŸå¦‚ä¸‹ï¼š è¿›å…¥åˆ°ç›®å½• ï¼š 1cd distribution/target/apache-rocketmq å¯åŠ¨ NameServer123nohup sh bin/mqnamesrv &amp;tail -f ~/logs/rocketmqlogs/namesrv.log ç»“æœå¦‚ä¸‹å°±ä»£è¡¨å¯åŠ¨æˆåŠŸäº†ï¼š å¯åŠ¨ Broker123nohup sh bin/mqbroker -n localhost:9876 &amp;tail -f ~/logs/rocketmqlogs/broker.log ç»“æœå¦‚ä¸‹å°±ä»£è¡¨å¯åŠ¨æˆåŠŸäº†ï¼šä»æ—¥å¿—ä¸­å¯ä»¥çœ‹åˆ° broker æ³¨å†Œåˆ°äº† nameserver ä¸Šäº†ï¼ˆlocalhost:9876ï¼‰ å‘é€å’Œæ¥æ”¶æ¶ˆæ¯åœ¨å‘é€/æ¥æ”¶æ¶ˆæ¯ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å‘Šè¯‰å®¢æˆ·åç§°æœåŠ¡å™¨çš„ä½ç½®ã€‚RocketMQ æä¾›äº†å¤šç§æ–¹æ³•æ¥å®ç°è¿™ä¸€ç‚¹ã€‚ä¸ºäº†ç®€å•èµ·è§ï¼Œæˆ‘ä»¬ä½¿ç”¨ç¯å¢ƒå˜é‡NAMESRV_ADDR å‘é€æ¶ˆæ¯123export NAMESRV_ADDR=localhost:9876sh bin/tools.sh org.apache.rocketmq.example.quickstart.Producer æ¥æ”¶æ¶ˆæ¯1sh bin/tools.sh org.apache.rocketmq.example.quickstart.Consumer å…³é—­æœåŠ¡å™¨123sh bin/mqshutdown broker //åœæ­¢ brokersh bin/mqshutdown namesrv //åœæ­¢ nameserver å…³é—­æˆåŠŸåå¦‚ä¸‹ï¼š å¸¸ç”¨å‘½ä»¤ä¸Šé¢å‡ ä¸ªå¯åŠ¨å’Œå…³é—­ name server å’Œ broker çš„å°±ä¸å†è¯´äº†ï¼Œ æŸ¥çœ‹é›†ç¾¤æƒ…å†µ ./mqadmin clusterList -n 127.0.0.1:9876 æŸ¥çœ‹ broker çŠ¶æ€ ./mqadmin brokerStatus -n 127.0.0.1:9876 -b 172.20.1.138:10911 (æ³¨æ„æ¢æˆä½ çš„ broker åœ°å€) æŸ¥çœ‹ topic åˆ—è¡¨ ./mqadmin topicList -n 127.0.0.1:9876 æŸ¥çœ‹ topic çŠ¶æ€ ./mqadmin topicStatus -n 127.0.0.1:9876 -t MyTopic (æ¢æˆä½ æƒ³æŸ¥è¯¢çš„ topic) æŸ¥çœ‹ topic è·¯ç”± ./mqadmin topicRoute -n 127.0.0.1:9876 -t MyTopic å…³æ³¨æˆ‘ æ€»ç»“æœ¬æ–‡æ˜¯ RocketMQ çš„å®‰è£…åŠå¿«é€Ÿå…¥é—¨æ¡ˆä¾‹ã€‚ è½¬å‘è¯·æ³¨æ˜åœ°å€ï¼šhttp://www.54tianzhisheng.cn/2018/02/06/RocketMQ-install/","tags":[{"name":"RocketMQ","slug":"RocketMQ","permalink":"http://yoursite.com/tags/RocketMQ/"}]},{"title":"RocketMQç³»åˆ—æ–‡ç« ï¼ˆä¸€ï¼‰ï¼šRocketMQ åˆæ¢","date":"2018-02-04T16:00:00.000Z","path":"2018/02/05/RocketMQ/","text":"ä»‹ç»RocketMQ æ˜¯é˜¿é‡Œå¼€æºçš„æ¶ˆæ¯ä¸­é—´ä»¶ï¼Œå‰ä¸ä¹…æçŒ®ç»™äº† Apache ã€‚æ­£å¦‚å®˜ç½‘ä»‹ç»å¦‚ä¸‹ï¼šå®ƒæ˜¯ä¸€ä¸ªå¼€æºçš„åˆ†å¸ƒå¼æ¶ˆæ¯ä¼ é€’å’Œæµå¼æ•°æ®å¹³å°ã€‚ ç‰¹ç‚¹å¦‚ä¸‹ï¼š äº§å“å‘å±•å†å²å¤§çº¦ç»å†äº†ä¸‰ä¸ªä¸»è¦ç‰ˆæœ¬è¿­ä»£ ä¸€ã€Metaqï¼ˆMetamorphosisï¼‰1.x ç”±å¼€æºç¤¾åŒºkillme2008ç»´æŠ¤ï¼Œå¼€æºç¤¾åŒºéå¸¸æ´»è·ƒã€‚ äºŒã€Metaq 2.x äº2012å¹´10æœˆä»½ä¸Šçº¿ï¼Œåœ¨æ·˜å®å†…éƒ¨è¢«å¹¿æ³›ä½¿ç”¨ã€‚ ä¸‰ã€RocketMQ 3.x åŸºäºå…¬å¸å†…éƒ¨å¼€æºå…±å»ºåŸåˆ™ï¼ŒRocketMQ é¡¹ç›®åªç»´æŠ¤æ ¸å¿ƒåŠŸèƒ½ï¼Œä¸”å»é™¤äº†æ‰€æœ‰å…¶ä»–è¿è¡Œæ—¶ä¾èµ–ï¼Œæ ¸å¿ƒåŠŸèƒ½æœ€ç®€åŒ–ã€‚æ¯ä¸ª BU çš„ä¸ªæ€§åŒ–éœ€æ±‚éƒ½åœ¨ RocketMQ é¡¹ç›®ä¹‹ä¸Šè¿›è¡Œæ·±åº¦å®šåˆ¶ã€‚RocketMQ å‘å…¶ä»– BU æä¾›çš„ä»…ä»…æ˜¯ Jar åŒ…ï¼Œä¾‹å¦‚è¦å®šåˆ¶ä¸€ä¸ª Brokerï¼Œé‚£ä¹ˆåªéœ€è¦ä¾èµ– rocketmq-broker è¿™ä¸ª jar åŒ…å³å¯ï¼Œå¯é€šè¿‡ API è¿›è¡Œäº¤äº’ï¼Œå¦‚æœå®šåˆ¶ clientï¼Œåˆ™ä¾èµ– rocketmq-client è¿™ä¸ª jar åŒ…ï¼Œå¯¹å…¶æä¾›çš„ api è¿›è¡Œå†å°è£…ã€‚ åœ¨ RocketMQ é¡¹ç›®åŸºç¡€ä¸Šè¡ç”Ÿçš„é¡¹ç›®å¦‚ä¸‹ com.taobao.metaq v3.0 = RocketMQ + æ·˜å®ä¸ªæ€§åŒ–éœ€æ±‚ ä¸ºæ·˜å®åº”ç”¨æä¾›æ¶ˆæ¯æœåŠ¡ com.alipay.zpullmsg v1.0 =RocketMQ + æ”¯ä»˜å®ä¸ªæ€§åŒ–éœ€æ±‚ ä¸ºæ”¯ä»˜å®åº”ç”¨æä¾›æ¶ˆæ¯æœåŠ¡ com.alibaba.commonmq v1.0 = Notify + RocketMQ + B2Bä¸ªæ€§åŒ–éœ€æ±‚ ä¸º B2B åº”ç”¨æä¾›æ¶ˆæ¯æœåŠ¡ å››ã€RocketMQ 3.x ç›®å‰å®ƒçš„æœ€æ–°ç‰ˆæœ¬æ˜¯ 4.2 ç‰ˆæœ¬ã€‚ æ¦‚å¿µä¸“ä¸šæœ¯è¯­Producer æ¶ˆæ¯ç”Ÿäº§è€…ï¼Œè´Ÿè´£äº§ç”Ÿæ¶ˆæ¯ï¼Œä¸€èˆ¬ç”±ä¸šåŠ¡ç³»ç»Ÿè´Ÿè´£äº§ç”Ÿæ¶ˆæ¯ã€‚ Consumer æ¶ˆæ¯æ¶ˆè´¹è€…ï¼Œè´Ÿè´£æ¶ˆè´¹æ¶ˆæ¯ï¼Œä¸€èˆ¬æ˜¯åå°ç³»ç»Ÿè´Ÿè´£å¼‚æ­¥æ¶ˆè´¹ã€‚ Push Consumer Consumer çš„ä¸€ç§ï¼Œåº”ç”¨é€šå¸¸å‘ Consumer å¯¹è±¡æ³¨å†Œä¸€ä¸ª Listener æ¥å£ï¼Œä¸€æ—¦æ”¶åˆ°æ¶ˆæ¯ï¼ŒConsumer å¯¹è±¡ç«‹åˆ»å›è°ƒ Listener æ¥å£æ–¹æ³•ã€‚ Pull Consumer Consumer çš„ä¸€ç§ï¼Œåº”ç”¨é€šå¸¸ä¸»åŠ¨è°ƒç”¨ Consumer çš„æ‹‰æ¶ˆæ¯æ–¹æ³•ä» Broker æ‹‰æ¶ˆæ¯ï¼Œä¸»åŠ¨æƒç”±åº”ç”¨æ§åˆ¶ã€‚ Producer Group ä¸€ç±» Producer çš„é›†åˆåç§°ï¼Œè¿™ç±» Producer é€šå¸¸å‘é€ä¸€ç±»æ¶ˆæ¯ï¼Œä¸”å‘é€é€»è¾‘ä¸€è‡´ã€‚ Consumer Group ä¸€ç±» Consumer çš„é›†åˆåç§°ï¼Œè¿™ç±» Consumer é€šå¸¸æ¶ˆè´¹ä¸€ç±»æ¶ˆæ¯ï¼Œä¸”æ¶ˆè´¹é€»è¾‘ä¸€è‡´ã€‚ Broker æ¶ˆæ¯ä¸­è½¬è§’è‰²ï¼Œè´Ÿè´£å­˜å‚¨æ¶ˆæ¯ï¼Œè½¬å‘æ¶ˆæ¯ï¼Œä¸€èˆ¬ä¹Ÿç§°ä¸º Serverã€‚åœ¨ JMS è§„èŒƒä¸­ç§°ä¸º Providerã€‚ æ¶æ„ ä»è¿™æ¶æ„å›¾ä¸­å¯ä»¥çœ‹åˆ°å®ƒä¸»è¦ç”±å››éƒ¨åˆ†ç»„æˆï¼šProducerï¼ˆç”Ÿäº§è€…ï¼‰ã€NameServerã€Brokerã€Consumerï¼ˆæ¶ˆè´¹è€…ï¼‰ã€‚ Producerç”Ÿäº§è€…æ”¯æŒåˆ†å¸ƒå¼éƒ¨ç½²ã€‚åˆ†å¸ƒå¼ç”Ÿäº§è€…é€šè¿‡å¤šç§è´Ÿè½½å‡è¡¡æ¨¡å¼å‘ Broker é›†ç¾¤å‘é€æ¶ˆæ¯ã€‚å‘é€è¿‡ç¨‹æ”¯æŒå¿«é€Ÿå¤±è´¥å¹¶å…·æœ‰ä½å»¶è¿Ÿã€‚ NameServerå®ƒæä¾›è½»é‡çº§æœåŠ¡å‘ç°å’Œè·¯ç”±ï¼Œæ¯ä¸ª Name Server è®°å½•å®Œæ•´çš„è·¯ç”±ä¿¡æ¯ï¼Œæä¾›ç›¸åº”çš„è¯»å†™æœåŠ¡ï¼Œæ”¯æŒå¿«é€Ÿå­˜å‚¨æ‰©å±•ã€‚ä¸»è¦åŒ…æ‹¬ä¸¤ä¸ªåŠŸèƒ½ï¼š ä»£ç†ç®¡ç†ï¼Œ NameServer æ¥å—æ¥è‡ª Broker é›†ç¾¤çš„æ³¨å†Œï¼Œå¹¶æä¾›æ£€æµ‹ä»£ç†æ˜¯å¦å­˜åœ¨çš„å¿ƒè·³æœºåˆ¶ã€‚ è·¯ç”±ç®¡ç†ï¼Œæ¯ä¸ª NameServer å°†ä¿å­˜æœ‰å…³ä»£ç†ç¾¤é›†çš„å…¨éƒ¨è·¯ç”±ä¿¡æ¯ä»¥åŠå®¢æˆ·ç«¯æŸ¥è¯¢çš„é˜Ÿåˆ—ä¿¡æ¯ã€‚ æˆ‘ä»¬çŸ¥é“ï¼ŒRocketMQå®¢æˆ·ç«¯ï¼ˆç”Ÿäº§è€…/æ¶ˆè´¹è€…ï¼‰å°†ä»NameServeræŸ¥è¯¢é˜Ÿåˆ—è·¯ç”±ä¿¡æ¯ï¼Œä½†å®¢æˆ·ç«¯å¦‚ä½•æ‰¾åˆ°NameServeråœ°å€ï¼Ÿ å°†NameServeråœ°å€åˆ—è¡¨æä¾›ç»™å®¢æˆ·ç«¯æœ‰å››ç§æ–¹æ³•ï¼š ç¼–ç¨‹æ–¹å¼ï¼Œå°±åƒproducer.setNamesrvAddr(&quot;ip:port&quot;)ã€‚ Javaé€‰é¡¹ï¼Œä½¿ç”¨rocketmq.namesrv.addrã€‚ ç¯å¢ƒå˜é‡ï¼Œä½¿ç”¨NAMESRV_ADDRã€‚ HTTP ç«¯ç‚¹ã€‚ BrokerBroker é€šè¿‡æä¾›è½»é‡çº§çš„ Topic å’Œ Queue æœºåˆ¶æ¥ç…§é¡¾æ¶ˆæ¯å­˜å‚¨ã€‚å®ƒä»¬æ”¯æŒ Push å’Œ Pull æ¨¡å¼ï¼ŒåŒ…å«å®¹é”™æœºåˆ¶ï¼ˆ2ä¸ªæ‹·è´æˆ–è€…3ä¸ªæ‹·è´ï¼‰ï¼Œå¹¶ä¸”æä¾›äº†å¼ºå¤§çš„å³°å€¼å¡«å……å’Œä»¥åŸå§‹æ—¶é—´é¡ºåºç´¯è®¡æ•°åƒäº¿æ¡æ¶ˆæ¯çš„èƒ½åŠ›ã€‚æ­¤å¤–ï¼Œbroker è¿˜æä¾›ç¾éš¾æ¢å¤ï¼Œä¸°å¯Œçš„æŒ‡æ ‡ç»Ÿè®¡æ•°æ®å’Œè­¦æŠ¥æœºåˆ¶ï¼Œè€Œä¼ ç»Ÿçš„æ¶ˆæ¯ä¼ é€’ç³»ç»Ÿéƒ½ç¼ºä¹è¿™äº›æœºåˆ¶ã€‚ å¦‚ä¸Šå›¾ï¼šBroker æœåŠ¡å™¨é‡è¦çš„å­æ¨¡å—ï¼š è¿œç¨‹å¤„ç†æ¨¡å—æ˜¯ broker çš„å…¥å£ï¼Œå¤„ç†æ¥è‡ªå®¢æˆ·çš„è¯·æ±‚ã€‚ Client managerï¼Œç®¡ç†å®¢æˆ·ï¼ˆç”Ÿäº§è€…/æ¶ˆè´¹è€…ï¼‰å¹¶ç»´æŠ¤æ¶ˆè´¹è€…çš„ä¸»é¢˜è®¢é˜…ã€‚ Store Serviceï¼Œæä¾›ç®€å•çš„ API æ¥å­˜å‚¨æˆ–æŸ¥è¯¢ç‰©ç†ç£ç›˜ä¸­çš„æ¶ˆæ¯ã€‚ HA æœåŠ¡ï¼Œæä¾›ä¸»ä»£ç†å’Œä»ä»£ç†ä¹‹é—´çš„æ•°æ®åŒæ­¥åŠŸèƒ½ã€‚ ç´¢å¼•æœåŠ¡ï¼Œé€šè¿‡æŒ‡å®šé”®ä¸ºæ¶ˆæ¯å»ºç«‹ç´¢å¼•ï¼Œå¹¶æä¾›å¿«é€Ÿçš„æ¶ˆæ¯æŸ¥è¯¢ã€‚ Consumeræ¶ˆè´¹è€…ä¹Ÿæ”¯æŒ Push å’Œ Pull æ¨¡å‹ä¸­çš„åˆ†å¸ƒå¼éƒ¨ç½²ã€‚å®ƒè¿˜æ”¯æŒç¾¤é›†æ¶ˆè´¹å’Œæ¶ˆæ¯å¹¿æ’­ã€‚å®ƒæä¾›äº†å®æ—¶çš„æ¶ˆæ¯è®¢é˜…æœºåˆ¶ï¼Œå¯ä»¥æ»¡è¶³å¤§å¤šæ•°æ¶ˆè´¹è€…çš„éœ€æ±‚ã€‚ å…³æ³¨æˆ‘ æ€»ç»“æœ¬æ–‡æ˜¯å¯¹ RocketMQ çš„ç®€å•ç‚¹äº†è§£ï¼Œå‚è€ƒäº†å®˜ç½‘ä»‹ç»ã€‚ è½¬è½½è¯·æ³¨æ˜åœ°å€ï¼šhttp://www.54tianzhisheng.cn/2018/02/05/RocketMQ/","tags":[{"name":"RocketMQ","slug":"RocketMQ","permalink":"http://yoursite.com/tags/RocketMQ/"}]},{"title":"Spring Bootç³»åˆ—æ–‡ç« ï¼ˆäº”ï¼‰ï¼šSpringBoot RabbitMQ æ•´åˆè¿›é˜¶ç‰ˆ","date":"2018-01-27T16:00:00.000Z","path":"2018/01/28/RabbitMQ/","text":"æ¶ˆæ¯ä¸­é—´ä»¶RabbitMQ æ˜¯æ¶ˆæ¯ä¸­é—´ä»¶çš„ä¸€ç§, æ¶ˆæ¯ä¸­é—´ä»¶å³åˆ†å¸ƒå¼ç³»ç»Ÿä¸­å®Œæˆæ¶ˆæ¯çš„å‘é€å’Œæ¥æ”¶çš„åŸºç¡€è½¯ä»¶. è¿™äº›è½¯ä»¶æœ‰å¾ˆå¤š, åŒ…æ‹¬ ActiveMQ ( apache å…¬å¸çš„), RocketMQ (é˜¿é‡Œå·´å·´å…¬å¸çš„, ç°å·²ç»è½¬è®©ç»™ apache), è¿˜æœ‰æ€§èƒ½æé«˜çš„ Kafkaã€‚ æ¶ˆæ¯ä¸­é—´ä»¶çš„å·¥ä½œè¿‡ç¨‹å¯ä»¥ç”¨ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å‹æ¥è¡¨ç¤º. å³ç”Ÿäº§è€…ä¸æ–­çš„å‘æ¶ˆæ¯é˜Ÿåˆ—å‘é€ä¿¡æ¯, è€Œæ¶ˆè´¹è€…ä»æ¶ˆæ¯é˜Ÿåˆ—ä¸­æ¶ˆè´¹ä¿¡æ¯. å…·ä½“è¿‡ç¨‹å¦‚ä¸‹: ä»ä¸Šå›¾å¯çœ‹å‡º, å¯¹äºæ¶ˆæ¯é˜Ÿåˆ—æ¥è¯´, ç”Ÿäº§è€…,æ¶ˆæ¯é˜Ÿåˆ—,æ¶ˆè´¹è€… æ˜¯æœ€é‡è¦çš„ä¸‰ä¸ªæ¦‚å¿µã€‚ç”Ÿäº§è€…å‘æ¶ˆæ¯åˆ°æ¶ˆæ¯é˜Ÿåˆ—ä¸­å», æ¶ˆè´¹è€…ç›‘å¬æŒ‡å®šçš„æ¶ˆæ¯é˜Ÿåˆ—, å¹¶ä¸”å½“æ¶ˆæ¯é˜Ÿåˆ—æ”¶åˆ°æ¶ˆæ¯ä¹‹å, æ¥æ”¶æ¶ˆæ¯é˜Ÿåˆ—ä¼ æ¥çš„æ¶ˆæ¯, å¹¶ä¸”ç»™äºˆç›¸åº”çš„å¤„ç†. æ¶ˆæ¯é˜Ÿåˆ—å¸¸ç”¨äºåˆ†å¸ƒå¼ç³»ç»Ÿä¹‹é—´äº’ç›¸ä¿¡æ¯çš„ä¼ é€’. RabbitMQ å·¥ä½œåŸç†å¯¹äº RabbitMQ æ¥è¯´, é™¤äº†è¿™ä¸‰ä¸ªåŸºæœ¬æ¨¡å—ä»¥å¤–, è¿˜æ·»åŠ äº†ä¸€ä¸ªæ¨¡å—, å³äº¤æ¢æœº(Exchange). å®ƒä½¿å¾—ç”Ÿäº§è€…å’Œæ¶ˆæ¯é˜Ÿåˆ—ä¹‹é—´äº§ç”Ÿäº†éš”ç¦», ç”Ÿäº§è€…å°†æ¶ˆæ¯å‘é€ç»™äº¤æ¢æœº,è€Œäº¤æ¢æœºåˆ™æ ¹æ®è°ƒåº¦ç­–ç•¥æŠŠç›¸åº”çš„æ¶ˆæ¯è½¬å‘ç»™å¯¹åº”çš„æ¶ˆæ¯é˜Ÿåˆ—. é‚£ä¹ˆ RabitMQ çš„å·¥ä½œæµç¨‹å¦‚ä¸‹æ‰€ç¤º: è¯´ä¸€ä¸‹äº¤æ¢æœº: äº¤æ¢æœºçš„ä¸»è¦ä½œç”¨æ˜¯æ¥æ”¶ç›¸åº”çš„æ¶ˆæ¯å¹¶ä¸”ç»‘å®šåˆ°æŒ‡å®šçš„é˜Ÿåˆ—. äº¤æ¢æœºæœ‰å››ç§ç±»å‹, åˆ†åˆ«ä¸ºDirect, topic, headers, Fanout. Direct æ˜¯ RabbitMQ é»˜è®¤çš„äº¤æ¢æœºæ¨¡å¼,ä¹Ÿæ˜¯æœ€ç®€å•çš„æ¨¡å¼.å³åˆ›å»ºæ¶ˆæ¯é˜Ÿåˆ—çš„æ—¶å€™,æŒ‡å®šä¸€ä¸ª BindingKey. å½“å‘é€è€…å‘é€æ¶ˆæ¯çš„æ—¶å€™, æŒ‡å®šå¯¹åº”çš„ Key. å½“ Key å’Œæ¶ˆæ¯é˜Ÿåˆ—çš„ BindingKey ä¸€è‡´çš„æ—¶å€™,æ¶ˆæ¯å°†ä¼šè¢«å‘é€åˆ°è¯¥æ¶ˆæ¯é˜Ÿåˆ—ä¸­. topic è½¬å‘ä¿¡æ¯ä¸»è¦æ˜¯ä¾æ®é€šé…ç¬¦, é˜Ÿåˆ—å’Œäº¤æ¢æœºçš„ç»‘å®šä¸»è¦æ˜¯ä¾æ®ä¸€ç§æ¨¡å¼(é€šé…ç¬¦+å­—ç¬¦ä¸²), è€Œå½“å‘é€æ¶ˆæ¯çš„æ—¶å€™, åªæœ‰æŒ‡å®šçš„ Key å’Œè¯¥æ¨¡å¼ç›¸åŒ¹é…çš„æ—¶å€™, æ¶ˆæ¯æ‰ä¼šè¢«å‘é€åˆ°è¯¥æ¶ˆæ¯é˜Ÿåˆ—ä¸­. headers ä¹Ÿæ˜¯æ ¹æ®ä¸€ä¸ªè§„åˆ™è¿›è¡ŒåŒ¹é…, åœ¨æ¶ˆæ¯é˜Ÿåˆ—å’Œäº¤æ¢æœºç»‘å®šçš„æ—¶å€™ä¼šæŒ‡å®šä¸€ç»„é”®å€¼å¯¹è§„åˆ™, è€Œå‘é€æ¶ˆæ¯çš„æ—¶å€™ä¹Ÿä¼šæŒ‡å®šä¸€ç»„é”®å€¼å¯¹è§„åˆ™, å½“ä¸¤ç»„é”®å€¼å¯¹è§„åˆ™ç›¸åŒ¹é…çš„æ—¶å€™, æ¶ˆæ¯ä¼šè¢«å‘é€åˆ°åŒ¹é…çš„æ¶ˆæ¯é˜Ÿåˆ—ä¸­. Fanout æ˜¯è·¯ç”±å¹¿æ’­çš„å½¢å¼, å°†ä¼šæŠŠæ¶ˆæ¯å‘ç»™ç»‘å®šå®ƒçš„å…¨éƒ¨é˜Ÿåˆ—, å³ä¾¿è®¾ç½®äº† key, ä¹Ÿä¼šè¢«å¿½ç•¥. å…³æ³¨æˆ‘ è½¬è½½è¯·åŠ¡å¿…æ³¨æ˜åŸåˆ›åœ°å€ä¸ºï¼šhttp://www.54tianzhisheng.cn/2018/01/28/RabbitMQ/ SpringBoot æ•´åˆ RabbitMQï¼ˆTopic è½¬å‘æ¨¡å¼ï¼‰åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿå°† SpringBoot å’Œ RabbitMQ æ•´åˆè¿‡ï¼Œä¸è¿‡é‚£æ˜¯ä½¿ç”¨ Direct æ¨¡å¼ï¼Œæ–‡ç« åœ°å€æ˜¯ï¼šSpringBoot RabbitMQ æ•´åˆä½¿ç”¨ ç›¸å…³æ–‡ç« 1ã€SpringBoot Kafka æ•´åˆä½¿ç”¨ 2ã€SpringBoot RabbitMQ æ•´åˆä½¿ç”¨ 3ã€SpringBoot ActiveMQ æ•´åˆä½¿ç”¨ 4ã€Kafka å®‰è£…åŠå¿«é€Ÿå…¥é—¨ æ•´åˆæ¥ä¸‹æ¥ï¼Œæˆ‘è¦å¸¦å¤§å®¶ç»§ç»­æ•´åˆï¼ˆTopic è½¬å‘æ¨¡å¼ï¼‰ï¼š 1ã€é…ç½®æ–‡ä»¶å’Œ pom.xml è¿™äº›è¿˜éƒ½æ˜¯ä¸€æ ·çš„ï¼Œæˆ‘ä»¬ä¸ç”¨å†ä¿®æ”¹ 2ã€å¯åŠ¨ç±»ä¸­åˆ›å»º Queue å’Œ Exchangeï¼Œå¹¶æŠŠ Queue æŒ‰ç…§ç›¸åº”çš„è§„åˆ™ç»‘å®šåˆ°äº¤æ¢æœºQueue ä¸Šã€‚ä»£ç å¦‚ä¸‹å›¾ï¼š 1234567891011121314@Beanpublic Queue queue() &#123; return new Queue(\"rpc-queue-zhisheng\");&#125;@Beanpublic TopicExchange exchange() &#123; return new TopicExchange(\"rpc-exchange-zhisheng\");&#125;@Beanpublic Binding binding(Queue queue, TopicExchange exchange) &#123; return BindingBuilder.bind(queue).to(exchange).with(\"rpc-zhisheng\");&#125; è¿™é‡Œåˆ›å»ºä¸€ä¸ª Queue å’Œ Exchange ï¼Œç„¶åç»‘å®šã€‚ æ³¨æ„ï¼šä¸Šé¢ä»£ç ä¸­çš„ with(â€œrpc-zhishengâ€) è¿™ä¸ª â€œzhishengâ€ æ˜¯ routingkeyï¼ŒRabbitMQ å°†ä¼šæ ¹æ®è¿™ä¸ªå‚æ•°å»å¯»æ‰¾æœ‰æ²¡æœ‰åŒ¹é…æ­¤è§„åˆ™çš„é˜Ÿåˆ—ï¼Œå¦‚æœæœ‰ï¼Œåˆ™ä¼šæŠŠæ¶ˆæ¯å‘é€ç»™å®ƒï¼Œå¦‚æœä¸æ­¢æœ‰ä¸€ä¸ªï¼Œåˆ™ä¼šæŠŠæ¶ˆæ¯åˆ†å‘ç»™æ‰€æœ‰åŒ¹é…çš„é˜Ÿåˆ—ã€‚ 3ã€æ¶ˆæ¯å‘é€ç±» 1234567891011121314151617181920212223package com.zhisheng.rabbitmq.rpc.client;import org.springframework.amqp.core.TopicExchange;import org.springframework.amqp.rabbit.core.RabbitTemplate;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.stereotype.Component;/** * Created by zhisheng_tian on 2018/1/25 */@Componentpublic class RabbitMQClient &#123; @Autowired private RabbitTemplate rabbitTemplate; @Autowired private TopicExchange exchange; public void send(String message) &#123; rabbitTemplate.convertAndSend(exchange.getName(), \"rpc-zhisheng\", message); &#125;&#125; è¿™é‡Œæ˜¯å‘é€æ¶ˆæ¯çš„ä»£ç ï¼Œâ€œrpc-zhishengâ€ å°±æ˜¯ä¸Šé¢æˆ‘ä»¬è®¾ç½®çš„ routingkeyã€‚ 4ã€æ¶ˆæ¯æ¥æ”¶ç«¯ 12345678910111213141516package com.zhisheng.rabbitmq.rpc.server;import org.springframework.amqp.rabbit.annotation.RabbitListener;import org.springframework.stereotype.Component;/** * Created by zhisheng_tian on 2018/1/25 */@Componentpublic class RabbitMQServer &#123; @RabbitListener(queues = \"rpc-queue-zhisheng\") public void receive(String message) &#123; System.out.println(\"--------receive ------- \" + message); &#125;&#125; 5ã€å¯åŠ¨ç±»ä¸­æ³¨å…¥ å‘é€æ¶ˆæ¯ç±»ï¼Œç„¶åè°ƒç”¨ send æ–¹æ³• 12345678910111213@Autowiredprivate RabbitMQClient client;@PostConstructpublic void init() &#123; StopWatch stopWatch = new StopWatch(); stopWatch.start(); for (int i = 0; i &lt; 1000; i++) &#123; client.send(\" zhisheng, --------- send \" + i); &#125; stopWatch.stop(); System.out.println(\"æ€»å…±è€—æ—¶ï¼š\" + stopWatch.getTotalTimeMillis());&#125; è¿è¡Œæ­¤ SpringBoot é¡¹ç›®ï¼Œåˆ™å¯ä»¥å‘ç°ç»“æœå¦‚ä¸‹ï¼š è¿™é‡Œæµ‹è¯•çš„æ˜¯åŒ¹é…ä¸€ä¸ªæ¶ˆæ¯é˜Ÿåˆ—çš„æƒ…å†µï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥æµ‹è¯•ä¸‹åŒ¹é…å¤šä¸ªæ¶ˆæ¯é˜Ÿåˆ—çš„ã€‚ SpringBoot æ•´åˆ RabbitMQ( Fanout Exchange å½¢å¼)Fanout Exchange å½¢å¼åˆå«å¹¿æ’­å½¢å¼ã€‚ ä»»ä½•å‘é€åˆ° Fanout Exchange çš„æ¶ˆæ¯éƒ½ä¼šè¢«è½¬å‘åˆ°ä¸è¯¥ Exchange ç»‘å®š(Binding)çš„æ‰€æœ‰ Queue ä¸Šã€‚ è¿™ç§æ¨¡å¼éœ€è¦æå‰å°† Exchange ä¸ Queue è¿›è¡Œç»‘å®šï¼Œä¸€ä¸ª Exchange å¯ä»¥ç»‘å®šå¤šä¸ª Queueï¼Œä¸€ä¸ª Queue å¯ä»¥åŒå¤šä¸ª Exchange è¿›è¡Œç»‘å®š è¿™ç§æ¨¡å¼ä¸éœ€è¦ RoutingKey å¦‚æœæ¥å—åˆ°æ¶ˆæ¯çš„ Exchange æ²¡æœ‰ä¸ä»»ä½• Queue ç»‘å®šï¼Œåˆ™æ¶ˆæ¯ä¼šè¢«æŠ›å¼ƒã€‚ 1ã€æ¶ˆæ¯å‘é€ç±» 12345678910111213141516171819package com.zhisheng.rabbitmq.rpc.client;import org.springframework.amqp.rabbit.core.RabbitTemplate;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.stereotype.Component;/** * Created by zhisheng_tian on 2018/1/25 */@Componentpublic class RabbitMQClient &#123; @Autowired private RabbitTemplate rabbitTemplate; public void send2(String message) &#123; rabbitTemplate.convertAndSend(\"fanout-exchange\", \"\", message); &#125;&#125; è¿™é‡Œå¯ä»¥ä¸è®¾ç½® routingkey äº†ã€‚ 2ã€å¯åŠ¨ç±» 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071package com.zhisheng.rabbitmq.rpc;import com.zhisheng.rabbitmq.rpc.client.RabbitMQClient;import org.springframework.amqp.core.Binding;import org.springframework.amqp.core.BindingBuilder;import org.springframework.amqp.core.FanoutExchange;import org.springframework.amqp.core.Queue;import org.springframework.amqp.support.converter.Jackson2JsonMessageConverter;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.beans.factory.annotation.Qualifier;import org.springframework.boot.SpringApplication;import org.springframework.boot.autoconfigure.SpringBootApplication;import org.springframework.context.annotation.Bean;import javax.annotation.PostConstruct;@SpringBootApplicationpublic class RabbitmqRpcApplication &#123; @Autowired private RabbitMQClient client; @PostConstruct public void init() &#123; client.send2(\"zhisheng ++++++++++ send2 \"); &#125; public static void main(String[] args) &#123; SpringApplication.run(RabbitmqRpcApplication.class, args); &#125; @Bean(name = \"queue\") public Queue queue() &#123; return new Queue(\"rpc.queue\"); &#125; @Bean(name = \"queue2\") public Queue queue2() &#123; return new Queue(\"rpc.queue2\"); &#125; @Bean(name = \"queue3\") public Queue queue3() &#123; return new Queue(\"rpc.queue3\"); &#125; @Bean public FanoutExchange exchange() &#123; return new FanoutExchange(\"fanout-exchange\"); &#125; @Bean public Binding binding(@Qualifier(\"queue\") Queue queue, FanoutExchange exchange) &#123; return BindingBuilder.bind(queue).to(exchange); &#125; @Bean public Binding binding2(@Qualifier(\"queue2\") Queue queue, FanoutExchange exchange) &#123; return BindingBuilder.bind(queue).to(exchange); &#125; @Bean public Binding binding3(@Qualifier(\"queue3\") Queue queue, FanoutExchange exchange) &#123; return BindingBuilder.bind(queue).to(exchange); &#125; @Bean public Jackson2JsonMessageConverter messageConverter() &#123; return new Jackson2JsonMessageConverter(); &#125;&#125; åœ¨å¯åŠ¨ç±»ä¸­æˆ‘åˆ›å»ºä¸‰ä¸ª Queueï¼š rpc.queue, rpc.queue2 , rpc.queue3 ä¹Ÿåˆ›å»ºä¸€ä¸ª FanoutExchangeï¼Œå¹¶æŠŠè¿™ä¸‰ä¸ª Queue ç»‘å®šåœ¨åŒä¸€ä¸ªäº¤æ¢æœº fanout-exchange ä¸Šé¢ æ³¨æ„ï¼šè¿™ä¸ª fanout-exchange äº¤æ¢æœºä¸çŸ¥ä¸ºå•¥ï¼Œæˆ‘è‡ªå·±åœ¨åº”ç”¨ç¨‹åºé‡Œåˆ›å»ºï¼Œè¿è¡Œç¨‹åºä¼šå‡ºé”™ï¼Œä¸‹é¢è®²è®²æˆ‘æ˜¯æ€ä¹ˆè§£å†³çš„ã€‚ æˆ‘æ˜¯ä» RabbitMQ ç®¡ç†ç•Œé¢ç›´æ¥æ·»åŠ ä¸ª exchange çš„ã€‚ 3ã€æ¶ˆæ¯æ¥æ”¶ç±» 123456789101112131415161718192021222324252627package com.zhisheng.rabbitmq.rpc.server;import org.springframework.amqp.rabbit.annotation.RabbitListener;import org.springframework.stereotype.Component;/** * Created by zhisheng_tian on 2018/1/25 */@Componentpublic class RabbitMQServer &#123; @RabbitListener(queues = \"rpc.queue\") public void receive(String message) &#123; System.out.println(\"--------receive ------- \" + message); &#125; @RabbitListener(queues = \"rpc.queue2\") public void receive2(String message) &#123; System.out.println(\"--------receive2 ------- \" + message); &#125; @RabbitListener(queues = \"rpc.queue3\") public void receive3(String message) &#123; System.out.println(\"--------receive3 ------- \" + message); &#125;&#125; ç›‘å¬æ¯ä¸ª Queueï¼Œå¹¶æœ‰ä¸€ä¸ªæ–¹æ³•è¾“å‡ºå¯¹åº”æ¥æ”¶åˆ°çš„æ¶ˆæ¯ã€‚ 4ã€è¿è¡Œé¡¹ç›® ç»“æœå¦‚ä¸Šï¼Œæ¯ä¸ªé˜Ÿåˆ—éƒ½æ‰“å°å‡ºè‡ªå·±æ”¶åˆ°çš„ç»“æœï¼ŒåŒæ—¶æˆ‘ä»¬çœ‹çœ‹è¿™ä¸‰ä¸ª Queue æ˜¯ä¸æ˜¯ç»‘å®šåˆ° Exchange ä¸Šå‘¢ï¼Ÿ å¯ä»¥çœ‹åˆ°ä¸‰ä¸ª Queue éƒ½ç»‘å®šåœ¨ Exchange ä¸Šäº†ã€‚ æ€»ç»“RabbitMQ ä¸ SpringBoot æ•´åˆå°±åˆ°è¿™é‡Œä¸ºæ­¢äº†ï¼Œåé¢å¦‚æœæœ‰æ—¶é—´ä¼šæ·±åº¦ç ”ç©¶ RabbitMQ çš„ã€‚ è¿˜è¯·ç»§ç»­å…³æ³¨æˆ‘çš„åšå®¢ï¼šhttp://www.54tianzhisheng.cn/","tags":[{"name":"RabbitMQ","slug":"RabbitMQ","permalink":"http://yoursite.com/tags/RabbitMQ/"},{"name":"SpringBoot","slug":"SpringBoot","permalink":"http://yoursite.com/tags/SpringBoot/"}]},{"title":"Spring Bootç³»åˆ—æ–‡ç« ï¼ˆå››ï¼‰ï¼šSpringBoot ActiveMQ æ•´åˆä½¿ç”¨","date":"2018-01-26T16:00:00.000Z","path":"2018/01/27/SpringBoot-ActiveMQ/","text":"ä»‹ç» ActiveMQå®ƒæ˜¯ Apache å‡ºå“ï¼Œæœ€æµè¡Œçš„ï¼Œèƒ½åŠ›å¼ºåŠ²çš„å¼€æºæ¶ˆæ¯æ€»çº¿ã€‚ActiveMQ æ˜¯ä¸€ä¸ªå®Œå…¨æ”¯æŒ JMS1.1 å’Œ J2EE 1.4 è§„èŒƒçš„ JMS Provider å®ç°ï¼Œå°½ç®¡ JMS è§„èŒƒå‡ºå°å·²ç»æ˜¯å¾ˆä¹…çš„äº‹æƒ…äº†ï¼Œä½†æ˜¯ JMS åœ¨å½“ä»Šçš„J2EEåº”ç”¨ä¸­é—´ä»ç„¶æ‰®æ¼”ç€ç‰¹æ®Šçš„åœ°ä½ã€‚â€”â€” æ‘˜è‡ªç™¾åº¦ç™¾ç§‘ï¼Œå·äº†ä¸ªæ‡’ã€‚ ç›¸å…³æ–‡ç« 1ã€SpringBoot Kafka æ•´åˆä½¿ç”¨ 2ã€SpringBoot RabbitMQ æ•´åˆä½¿ç”¨ å®‰è£… ActiveMQåŒä¹‹å‰ä¸€æ ·ï¼Œç›´æ¥åœ¨ Docker é‡Œé¢ç©å§ã€‚å‘½ä»¤ä¹Ÿæ˜¯ä¸€è¡Œè§£å†³ï¼š 1docker run -d -p 8161:8161 -p 61616:61616 -e ACTIVEMQ_ADMIN_LOGIN=admin -e ACTIVEMQ_ADMIN_PASSWORD=admin --name activemq webcenter/activemq ç®€å•è§£é‡Šä¸‹ï¼š 8186: è¡¨ç¤º ActiveMQ æ§åˆ¶å°ç«¯å£å·ï¼Œå®ƒå’Œ RabbitMQ ä¸€æ ·éƒ½æ˜¯æœ‰æ§åˆ¶å°çš„ï¼Œå¯ä»¥ç™»é™†æ§åˆ¶å°è¿›è¡Œæ“ä½œçš„ 61616 ï¼š è¡¨ç¤º ActiveMQ æ‰€ç›‘å¬çš„ TCP ç«¯å£å·ï¼Œåº”ç”¨ç¨‹åºå¯é€šè¿‡è¯¥ç«¯å£å·ä¸ ActiveMQ å»ºç«‹ TCP è¿æ¥ CTIVEMQ_ADMIN_LOGIN ï¼šç™»é™†æ§åˆ¶å°çš„ç”¨æˆ·å ACTIVEMQ_ADMIN_PASSWORD ï¼šç™»é™†æ§åˆ¶å°çš„å¯†ç  æ‰§è¡Œåï¼Œå¯åœ¨æµè§ˆå™¨è¾“å…¥ http://localhost:8161/ æŸ¥çœ‹æ§åˆ¶å°ï¼Œ è§£é‡Šä¸‹ä¸Šé¢å›¾ç‰‡ä¸­æ§åˆ¶å°è¿™äº›æŒ‰é’®çš„åŸºæœ¬ä¿¡æ¯ï¼š Homeï¼šæŸ¥çœ‹ ActiveMQ çš„å¸¸è§ä¿¡æ¯ Queuesï¼šæŸ¥çœ‹ ActiveMQ çš„é˜Ÿåˆ—ä¿¡æ¯ Topicsï¼šæŸ¥çœ‹ ActiveMQ çš„ä¸»é¢˜ä¿¡æ¯ Subscribersï¼šæŸ¥çœ‹ä¸»é¢˜çš„è®¢é˜…è€…ä¿¡æ¯ Connectionsï¼šæŸ¥çœ‹ ActiveMQ å®¢æˆ·ç«¯çš„è¿æ¥ä¿¡æ¯ Networkï¼šæŸ¥çœ‹ ActiveMQ çš„ç½‘ç»œä¿¡æ¯ Scheduledï¼šæŸ¥çœ‹ ActiveMQ çš„å®šæ—¶ä»»åŠ¡ Sendï¼šç”¨äºé€šè¿‡è¡¨å•æ–¹å¼å‘é˜Ÿåˆ—æˆ–è€…ä¸»é¢˜å‘é€å…·ä½“çš„æ¶ˆæ¯ æ•´åˆIDEA åˆ›å»º SpringBoot é¡¹ç›®ï¼Œå› ä¸º SpringBoot å·²ç»å†…ç½®äº†å¯¹ ActiveMQ çš„æ”¯æŒï¼Œæ‰€ä»¥ç›´æ¥å¼•å…¥ä¾èµ– spring-boot-starter-activemq å°±è¡Œã€‚æ•´ä½“é¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š 1ã€pom.xml æ–‡ä»¶ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;groupId&gt;com.zhisheng&lt;/groupId&gt; &lt;artifactId&gt;activemq&lt;/artifactId&gt; &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt; &lt;packaging&gt;jar&lt;/packaging&gt; &lt;name&gt;activemq&lt;/name&gt; &lt;description&gt;Demo project for Spring Boot ActiveMQ&lt;/description&gt; &lt;parent&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt; &lt;version&gt;1.5.9.RELEASE&lt;/version&gt; &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt; &lt;/parent&gt; &lt;properties&gt; &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt; &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt; &lt;java.version&gt;1.8&lt;/java.version&gt; &lt;/properties&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-activemq&lt;/artifactId&gt; &lt;/dependency&gt; &lt;/dependencies&gt; &lt;build&gt; &lt;plugins&gt; &lt;plugin&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt; &lt;/plugin&gt; &lt;/plugins&gt; &lt;/build&gt;&lt;/project&gt; 2ã€é…ç½®æ–‡ä»¶ application.properties 123spring.activemq.broker-url=tcp://localhost:61616spring.activemq.user=adminspring.activemq.password=admin 3ã€å‘é€æ¶ˆæ¯ç±» 12345678910111213141516package com.zhisheng.activemq.client;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.jms.core.JmsTemplate;import org.springframework.stereotype.Component;@Componentpublic class ActiveMQClient &#123; @Autowired private JmsTemplate jmsTemplate; public void send(String message) &#123; jmsTemplate.convertAndSend(\"zhisheng\", message); &#125;&#125; åŒæ ·ï¼Œå’Œ RabbitMQ ç±»ä¼¼ï¼Œä¸å¤šè¯´äº†ã€‚ 4ã€æ¶ˆæ¯æ¥æ”¶ç±» 123456789101112package com.zhisheng.activemq.server;import org.springframework.jms.annotation.JmsListener;import org.springframework.stereotype.Component;@Componentpublic class ActiveMQServer &#123; @JmsListener(destination = \"zhisheng\") public void receive(String message) &#123; System.out.println(\"æ”¶åˆ°çš„ message æ˜¯ï¼š\" + message); &#125;&#125; 5ã€æ³¨æ„ è¿™ä¸ªé˜Ÿåˆ—æ˜¯ä¸éœ€è¦æˆ‘ä»¬æå‰å®šä¹‰å¥½çš„ï¼Œå®ƒå’Œ RabbitMQ ä¸ä¸€æ ·ï¼Œå®ƒä¼šåœ¨æˆ‘ä»¬éœ€è¦çš„æ—¶å€™åŠ¨æ€çš„åˆ›å»ºã€‚ è¿è¡Œ12345678910111213141516171819202122232425262728293031package com.zhisheng.activemq;import com.zhisheng.activemq.client.ActiveMQClient;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.boot.SpringApplication;import org.springframework.boot.autoconfigure.SpringBootApplication;import org.springframework.util.StopWatch;import javax.annotation.PostConstruct;@SpringBootApplicationpublic class ActivemqApplication &#123; @Autowired ActiveMQClient client; @PostConstruct public void init() &#123; StopWatch stopWatch = new StopWatch(); stopWatch.start(); for (int i = 0; i &lt; 10000; i++) &#123; client.send(\"å‘é€æ¶ˆæ¯----zhisheng-----\"); &#125; stopWatch.stop(); System.out.println(\"å‘é€æ¶ˆæ¯è€—æ—¶: \" + stopWatch.getTotalTimeMillis()); &#125; public static void main(String[] args) &#123; SpringApplication.run(ActivemqApplication.class, args); &#125;&#125; å‘é€ä¸€ä¸‡æ¡æ¶ˆæ¯è¿è¡Œåéœ€è¦çš„æ—¶é—´æŒºä¹…çš„ï¼š73180 ms æ¯” RabbitMQ å‘é€ 10000 æ¡æ¶ˆæ¯è€—æ—¶ 215 ms ä¸çŸ¥é“é«˜å‡ºå¤šå°‘å€äº†ï¼Œå¯è§å…¶æ€§èƒ½å¹¶ä¸é«˜çš„ã€‚ å…³æ³¨æˆ‘ æœ€åè½¬è½½è¯·åŠ¡å¿…æ³¨æ˜åŸåˆ›åœ°å€ä¸ºï¼šhttp://www.54tianzhisheng.cn/2018/01/27/SpringBoot-ActiveMQ/","tags":[{"name":"SpringBoot","slug":"SpringBoot","permalink":"http://yoursite.com/tags/SpringBoot/"},{"name":"ActiveMQ","slug":"ActiveMQ","permalink":"http://yoursite.com/tags/ActiveMQ/"}]},{"title":"Spring Bootç³»åˆ—æ–‡ç« ï¼ˆä¸‰ï¼‰ï¼šSpringBoot  RabbitMQ æ•´åˆä½¿ç”¨","date":"2018-01-25T16:00:00.000Z","path":"2018/01/26/SpringBoot-RabbitMQ/","text":"å‰æä¸Šæ¬¡å†™äº†ç¯‡æ–‡ç« ï¼Œã€ŠSpringBoot Kafka æ•´åˆä½¿ç”¨ã€‹ï¼Œé˜…è¯»é‡è¿˜æŒºé«˜çš„ï¼Œäºæ˜¯æƒ³æƒ³è¿˜æ˜¯æŠŠå…¶ä»–å‡ ç§ MQ ä¹Ÿå’Œ SpringBoot æ•´åˆä½¿ç”¨ä¸‹ã€‚ ä¸‹é¢æ˜¯å››ç§æ¯”è¾ƒæµè¡Œçš„ MQ ï¼š åé¢éƒ½å†™å†™å’Œ SpringBoot æ•´åˆçš„æ–‡ç« ã€‚ å®‰è£… RabbitMQç”±äºæ¢ Mac äº†ï¼Œæ‰€ä»¥ä¸€äº›ç¯å¢ƒå°±ç›´æ¥åœ¨ Mac æï¼Œä½†æ˜¯åƒå®‰è£… RabbitMQ è¿™äº›åˆä¼šæŠŠè‡ªå·±ç”µè„‘ç³»ç»Ÿç»™æçš„å¤ªä¹±ï¼Œæ‰€ä»¥èƒ½åœ¨ Docker é‡Œé¢å®‰è£…å°±å®‰è£…åœ¨ Dockerï¼Œè¿™æ¬¡ RabbitMQ æˆ‘ä¹Ÿç›´æ¥åœ¨ Docker é‡Œå®‰è£…ã€‚ å¯åŠ¨ Docker for Macï¼Œå¦‚æœæ²¡å®‰è£…è¿‡çš„è¯·çœ‹æˆ‘ä¸Šä¸€ç¯‡æ–‡ç« ï¼šhttp://www.54tianzhisheng.cn/2018/01/25/Docker-install/ å½“ç„¶ä½ ä¹Ÿå¯ä»¥åœ¨è‡ªå·±çš„ Linux æœåŠ¡å™¨æˆ–è€…è™šæ‹Ÿæœºé‡Œå¯åŠ¨å®‰è£… RabbitMQ ã€‚ Docker å®‰è£…çš„è¯å¾ˆç®€å•ï¼Œå› ä¸º RabbitMQ å®˜æ–¹å·²ç»æä¾›äº†è‡ªå·±çš„ Docker å®¹å™¨ï¼Œåªéœ€è¦ä¸€è¡Œå‘½ä»¤ï¼š 1docker run -d -p 15672:15672 -p 5672:5672 -e RABBITMQ_DEFAULT_USER=admin -e RABBITMQ_DEFAULT_PASS=admin --name rabbitmq rabbitmq:3-management è¯¥é•œåƒæ‹¥æœ‰ä¸€ä¸ªåŸºäº web çš„æ§åˆ¶å°å’Œ Http APIã€‚Http API å¯ä»¥åœ¨åœ°å€çœ‹åˆ°å¦‚ä½•ä½¿ç”¨ï¼šhttp://localhost:15672/api/ è®²è§£ä¸‹ä¸Šé¢å‘½ä»¤è¡Œï¼š 15672 ï¼šè¡¨ç¤º RabbitMQ æ§åˆ¶å°ç«¯å£å·ï¼Œå¯ä»¥åœ¨æµè§ˆå™¨ä¸­é€šè¿‡æ§åˆ¶å°æ¥æ‰§è¡Œ RabbitMQ çš„ç›¸å…³æ“ä½œã€‚ 5672 : è¡¨ç¤º RabbitMQ æ‰€ç›‘å¬çš„ TCP ç«¯å£å·ï¼Œåº”ç”¨ç¨‹åºå¯é€šè¿‡è¯¥ç«¯å£ä¸ RabbitMQ å»ºç«‹ TCP è¿æ¥ï¼Œå¹¶å®Œæˆåç»­çš„å¼‚æ­¥æ¶ˆæ¯é€šä¿¡ RABBITMQ_DEFAULT_USERï¼šç”¨äºè®¾ç½®ç™»é™†æ§åˆ¶å°çš„ç”¨æˆ·åï¼Œè¿™é‡Œæˆ‘è®¾ç½® admin RABBITMQ_DEFAULT_PASSï¼šç”¨äºè®¾ç½®ç™»é™†æ§åˆ¶å°çš„å¯†ç ï¼Œè¿™é‡Œæˆ‘è®¾ç½® admin å®¹å™¨å¯åŠ¨æˆåŠŸåï¼Œå¯ä»¥åœ¨æµè§ˆå™¨è¾“å…¥åœ°å€ï¼šhttp://localhost:15672/ è®¿é—®æ§åˆ¶å° ç™»é™†åï¼š ç®€å•æè¿°ä¸‹ä¸Šå›¾ä¸­ä¸­æ§åˆ¶å°çš„åˆ—è¡¨çš„ä½œç”¨ï¼š Overview ï¼šç”¨äºæŸ¥çœ‹ RabbitMQ çš„ä¸€äº›åŸºæœ¬ä¿¡æ¯ï¼ˆæ¶ˆæ¯é˜Ÿåˆ—ã€æ¶ˆæ¯å‘é€é€Ÿç‡ã€èŠ‚ç‚¹ã€ç«¯å£å’Œä¸Šä¸‹æ–‡ä¿¡æ¯ç­‰ï¼‰ Connectionsï¼šç”¨äºæŸ¥çœ‹ RabbitMQ å®¢æˆ·ç«¯çš„è¿æ¥ä¿¡æ¯ Channelsï¼šç”¨æˆ·æŸ¥çœ‹ RabbitMQ çš„é€šé“ä¿¡æ¯ Exchangeï¼šç”¨äºæŸ¥çœ‹ RabbitMQ äº¤æ¢æœº Queuesï¼šç”¨äºæŸ¥çœ‹ RabbitMQ çš„é˜Ÿåˆ— Adminï¼šç”¨äºç®¡ç†ç”¨æˆ·ï¼Œå¯å¢åŠ ç”¨æˆ· åˆ›å»ºé¡¹ç›®åœ¨ IDEA ä¸­åˆ›å»ºä¸€ä¸ª SpringBoot é¡¹ç›®ç»“æ„ï¼š SpringBoot æ¡†æ¶ä¸­å·²ç»å†…ç½®äº†å¯¹ RabbitMQ çš„æ”¯æŒï¼Œå¦‚æœä½ çœ‹è¿‡å®˜æ–¹æ–‡æ¡£çš„è¯ï¼Œå°±å¯ä»¥çœ‹åˆ°çš„ï¼Œæˆ‘ä»¬éœ€è¦æŠŠä¾èµ– spring-boot-starter-amqp å¼•å…¥å°±è¡Œã€‚ 1ã€ pom.xml å¼•å…¥ä¾èµ–åå¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;groupId&gt;com.zhisheng&lt;/groupId&gt; &lt;artifactId&gt;rabbitmq&lt;/artifactId&gt; &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt; &lt;packaging&gt;jar&lt;/packaging&gt; &lt;name&gt;rabbitmq&lt;/name&gt; &lt;description&gt;Demo project for Spring Boot RabbitMQ&lt;/description&gt; &lt;parent&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt; &lt;version&gt;1.5.9.RELEASE&lt;/version&gt; &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt; &lt;/parent&gt; &lt;properties&gt; &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt; &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt; &lt;java.version&gt;1.8&lt;/java.version&gt; &lt;/properties&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-amqp&lt;/artifactId&gt; &lt;/dependency&gt; &lt;/dependencies&gt; &lt;build&gt; &lt;plugins&gt; &lt;plugin&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt; &lt;/plugin&gt; &lt;/plugins&gt; &lt;/build&gt;&lt;/project&gt; 2ã€application.properties é…ç½®ä¿®æ”¹å¦‚ä¸‹ï¼š 123spring.rabbitmq.addresses=localhost:5672spring.rabbitmq.username=adminspring.rabbitmq.password=admin 3ã€æ¶ˆæ¯å‘é€ç±» RabbitMQClient.java 12345678910111213141516171819package com.zhisheng.rabbitmq.client;import org.springframework.amqp.rabbit.core.RabbitTemplate;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.stereotype.Component;/** * Created by zhisheng_tian on 2018/1/23 */@Componentpublic class RabbitMQClient &#123; @Autowired private RabbitTemplate rabbitTemplate; public void send(String message) &#123; rabbitTemplate.convertAndSend(\"zhisheng\", message); &#125;&#125; å°±è¿™æ ·ï¼Œå‘é€æ¶ˆæ¯ä»£ç å°±å®ç°äº†ã€‚ è¿™é‡Œå…³é”®çš„ä»£ç ä¸º rabbitTemplate.convertAndSend() æ–¹æ³•ï¼Œzhisheng è¿™ä¸ªæ˜¯è·¯ç”±è§„åˆ™ï¼ˆroutingKeyï¼‰ï¼Œå®ƒçš„å€¼è¡¨æ˜å°†æ¶ˆæ¯å‘é€åˆ°æŒ‡å®šçš„é˜Ÿåˆ— zhisheng ä¸­å»ï¼Œè¿™é‡Œè·Ÿäº†ä¸‹æºç ï¼Œå‘ç° convertAndSend() æ–¹æ³•æœ€åè°ƒç”¨çš„æ–¹æ³•å…¶å®æ˜¯ä¸€ä¸ª doSend() æ–¹æ³•ã€‚ 4ã€æ¶ˆæ¯æ¥æ”¶ç±» 12345678910111213141516package com.zhisheng.rabbitmq.server;import org.springframework.amqp.rabbit.annotation.RabbitListener;import org.springframework.stereotype.Component;/** * Created by zhisheng_tian on 2018/1/23 */@Componentpublic class RabbitMQServer &#123; @RabbitListener(queues = \"zhisheng\") public void receive(String message) &#123; System.out.println(\"æ”¶åˆ°çš„ message æ˜¯ï¼š\" + message); &#125;&#125; ä½ çœ‹ï¼Œè¿™é‡Œå°±æœ‰ä¸ª RabbitListener ä¸€ç›´åœ¨ç›‘å¬ç€é˜Ÿåˆ— zhisheng ã€‚ å½“ç„¶è¿™ä¸ªé˜Ÿåˆ—æ˜¯å¿…é¡»è¦æˆ‘ä»¬è‡ªå·±åœ¨åº”ç”¨ç¨‹åºä¸­åˆ›å»ºå¥½ï¼Œå®ƒä¸ä¼šåƒæˆ‘ä¹‹å‰å†™çš„æ–‡ç«  ã€ŠSpringBoot Kafka æ•´åˆä½¿ç”¨ã€‹ ä¸­çš„ Kafka ä¸€æ ·ï¼ŒKafka å®ƒä¼šåœ¨ç”¨åˆ°é˜Ÿåˆ—çš„æ—¶å€™åŠ¨æ€çš„åˆ›å»ºï¼Œä¸éœ€è¦æˆ‘ä»¬æå‰åˆ›å»ºå¥½ã€‚ é‚£ä¹ˆåœ¨ RabbitMQ ä¸­è¯¥å¦‚ä½•åˆ›å»ºé˜Ÿåˆ—å‘¢ï¼Ÿ å¦‚ä¸Šå›¾æ‰€ç¤ºï¼šè¿™æ ·æˆ‘ä»¬å°±åˆ›å»ºå¥½äº†ä¸€ä¸ª zhisheng çš„é˜Ÿåˆ—ï¼Œå½“ç¨‹åºå¼€å§‹è¿è¡Œæ—¶ï¼Œæ¶ˆæ¯æ¥æ”¶ç±»ä¼šæŒç»­ç›‘å¬é˜Ÿåˆ— zhisheng ä¸­å³å°†åˆ°æ¥çš„æ¶ˆæ¯ã€‚ 5ã€è¿è¡Œé¡¹ç›® éœ€è¦åœ¨å¯åŠ¨ç±»ä¸­æ³¨å…¥å‘é€æ¶ˆæ¯çš„ç±»ï¼Œå¹¶ä¸”æä¾› init æ–¹æ³•ï¼Œåœ¨ init æ–¹æ³•ä¸­è°ƒç”¨å‘é€æ¶ˆæ¯ç±»çš„ send() æ–¹æ³• 1234@PostConstructpublic void init() &#123; rabbitMQClient.send(\"å‘é€æ¶ˆæ¯----zhisheng-----\");&#125; éœ€è¦æ³¨æ„çš„æ˜¯ï¼šinit() æ–¹æ³•å¸¦æœ‰ @PostConstruct æ³¨è§£ï¼Œè¢« @PostConstruct ä¿®é¥°çš„æ–¹æ³•ä¼šåœ¨æ„é€ å‡½æ•°ä¹‹åæ‰§è¡Œã€‚ å¯åŠ¨é¡¹ç›®å°±å¯ä»¥å‘ç°æ§åˆ¶å°å·²ç»æ¥æ”¶åˆ°æ¶ˆæ¯äº†ã€‚ 6ã€å•çº¿ç¨‹æµ‹è¯•æ€§èƒ½ çœ‹åˆ°ä¸Šé¢å›¾ç‰‡ä¸­æ³¨é‡Šæ‰çš„ä»£ç æ²¡ï¼Ÿé‚£å°±æ˜¯ç”¨æ¥æµ‹è¯•æ¶ˆæ¯å‘é€çš„æ€§èƒ½çš„ï¼Œæˆ‘å‘é€ 10000 æ¡æ¶ˆæ¯çœ‹çœ‹æ€»å…±è€—æ—¶å¤šå°‘ã€‚ 10000 æ¡æ¶ˆæ¯å‘é€è€—æ—¶ï¼š215msã€‚ è¿™æ˜¯åœ¨å•çº¿ç¨‹ä¸‹ï¼Œä¸‹æ¬¡å¯ä»¥å’Œå…¶ä»–çš„ MQ æµ‹è¯•å¯¹æ¯”ä¸‹ï¼Œå¹¶ä¸”ä¹Ÿå¯ä»¥åœ¨å¤šçº¿ç¨‹çš„ç¯å¢ƒä¸‹æµ‹è¯•æ€§èƒ½ã€‚ åŒæ—¶ä»æ§åˆ¶å°å¯ä»¥çœ‹åˆ°å‘é€çš„é€Ÿç‡ï¼š 7ã€å¤šçº¿ç¨‹æµ‹è¯•æ€§èƒ½ å¼€äº†10 ä¸ªçº¿ç¨‹ï¼Œæ¯ä¸ªçº¿ç¨‹å‘é€ 10000 æ¡æ¶ˆæ¯ã€‚ init æ–¹æ³•ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738@PostConstruct public void init() &#123; StopWatch stopWatch = new StopWatch(); stopWatch.start(); int threads = 10; ExecutorService executorService = Executors.newFixedThreadPool(threads); final CountDownLatch start = new CountDownLatch(1); final CountDownLatch end = new CountDownLatch(threads); for (int i = 0; i &lt; threads; i++) &#123; executorService.execute(() -&gt; &#123; try &#123; start.await(); for (int i1 = 0; i1 &lt; 10000; i1++) &#123; rabbitMQClient.send(\"å‘é€æ¶ˆæ¯----zhisheng-----\"); &#125; &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; finally &#123; end.countDown(); &#125; &#125;); &#125; start.countDown(); try &#123; end.await(); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; finally &#123; executorService.shutdown(); &#125; stopWatch.stop(); System.out.println(\"å‘é€æ¶ˆæ¯è€—æ—¶ï¼š\" + stopWatch.getTotalTimeMillis()); &#125; è€—æ—¶ï¼š4063ms æ§åˆ¶å°æ˜¾ç¤ºå¦‚ä¸‹å›¾ï¼š 8ã€æ³¨æ„ è¿™é‡Œæµ‹è¯•å‘é€çš„æ¶ˆæ¯ç›´æ¥æ˜¯ String ç±»å‹çš„ï¼Œä½ ä¹Ÿå¯ä»¥æµ‹è¯•ä¸‹ Bean ç±»ï¼Œè¿™éœ€è¦æ³¨æ„éœ€è¦åºåˆ—åŒ–ã€‚ å…³æ³¨æˆ‘ æœ€åè½¬è½½è¯·åŠ¡å¿…æ³¨æ˜åŸåˆ›åœ°å€ä¸ºï¼šhttp://www.54tianzhisheng.cn/2018/01/26/SpringBoot-RabbitMQ/","tags":[{"name":"RabbitMQ","slug":"RabbitMQ","permalink":"http://yoursite.com/tags/RabbitMQ/"},{"name":"SpringBoot","slug":"SpringBoot","permalink":"http://yoursite.com/tags/SpringBoot/"}]},{"title":"Dockerç³»åˆ—æ–‡ç« ï¼ˆäºŒï¼‰ï¼šMac å®‰è£… Docker åŠå¸¸ç”¨å‘½ä»¤","date":"2018-01-24T16:00:00.000Z","path":"2018/01/25/Docker-install/","text":"èƒŒæ™¯å¾®æœåŠ¡ + å®¹å™¨ï¼Œå®Œç¾çš„ä¸€å¯¹ï¼å¿…é¡»å¾—å¥½å¥½å­¦ä¹ å­¦ä¹ ã€‚ å®‰è£…æ­¥éª¤Mac ä¸‹ Docker çš„å®‰è£…çœŸå¿ƒå»ºè®®è·Ÿç€å®˜æ–¹çš„æ–‡æ¡£èµ°ä¸€éï¼Œå®˜ç½‘å·²ç»è®²çš„å¾ˆè¯¦ç»†äº†ã€‚ https://docs.docker.com/docker-for-mac/install/#what-to-know-before-you-install ä½¿ç”¨ Docker for Machttps://docs.docker.com/docker-for-mac/#check-versions-of-docker-engine-compose-and-machine é…ç½® Docker åŠ é€Ÿå™¨Docker åŠ é€Ÿå™¨æ˜¯ä»€ä¹ˆï¼Œæˆ‘éœ€è¦ä½¿ç”¨å—ï¼Ÿ ä½¿ç”¨ Docker çš„æ—¶å€™ï¼Œéœ€è¦ç»å¸¸ä»å®˜æ–¹è·å–é•œåƒï¼Œä½†æ˜¯ç”±äºæ˜¾è€Œæ˜“è§çš„ç½‘ç»œåŸå› ï¼Œæ‹‰å–é•œåƒçš„è¿‡ç¨‹éå¸¸è€—æ—¶ï¼Œä¸¥é‡å½±å“ä½¿ç”¨ Docker çš„ä½“éªŒã€‚å› æ­¤ DaoCloud æ¨å‡ºäº†åŠ é€Ÿå™¨å·¥å…·è§£å†³è¿™ä¸ªéš¾é¢˜ï¼Œé€šè¿‡æ™ºèƒ½è·¯ç”±å’Œç¼“å­˜æœºåˆ¶ï¼Œæå¤§æå‡äº†å›½å†…ç½‘ç»œè®¿é—® Docker Hub çš„é€Ÿåº¦ï¼Œç›®å‰å·²ç»æ‹¥æœ‰äº†å¹¿æ³›çš„ç”¨æˆ·ç¾¤ä½“ï¼Œå¹¶å¾—åˆ°äº† Docker å®˜æ–¹çš„å¤§åŠ›æ¨èã€‚å¦‚æœæ‚¨æ˜¯åœ¨å›½å†…çš„ç½‘ç»œç¯å¢ƒä½¿ç”¨ Dockerï¼Œé‚£ä¹ˆ Docker åŠ é€Ÿå™¨ä¸€å®šèƒ½å¸®åŠ©åˆ°æ‚¨ã€‚ æ³¨å†Œ daocloudï¼Œç„¶ååœ¨ mac æ ‡ç­¾é¡µå¤åˆ¶åŠ é€Ÿå™¨ urlã€‚ å…¥é—¨æ¡ˆä¾‹è·Ÿç€ä¸‹é¢çš„æ–‡ç« è¿›è¡Œæ•²ä¸€éï¼Œç†Ÿæ‚‰ä¸‹ Docker æ•´ä¸ªçš„ä½¿ç”¨ã€‚ https://www.jianshu.com/p/cf6e7248b6c7 Docker å¸¸ç”¨å‘½ä»¤ä¸‹é¢åˆ—å‡ºäº›è‡ªå·±å¸¸ç”¨çš„å‘½ä»¤ï¼Œç›®çš„å°±æ˜¯è®°å½•ä¸‹æ¥ï¼Œä»¥åå¿˜è®°äº†ï¼Œå†æ‹¿æ¥è·Ÿç€æ•²å°±è¡Œï¼ 12345678910111213141516171819202122232425262728293031323334353637383940414243docker run -i -t &lt;image_name/continar_id&gt; /bin/bash å¯åŠ¨å®¹å™¨å¹¶å¯åŠ¨bashï¼ˆäº¤äº’æ–¹å¼ï¼‰docker run -d -it image_name å¯åŠ¨å®¹å™¨ä»¥åå°æ–¹å¼è¿è¡Œ(æ›´é€šç”¨çš„æ–¹å¼ï¼‰docker ps åˆ—å‡ºå½“å‰æ‰€æœ‰æ­£åœ¨è¿è¡Œçš„containerdocker ps -a åˆ—å‡ºæ‰€æœ‰çš„containerdocker ps -l åˆ—å‡ºæœ€è¿‘ä¸€æ¬¡å¯åŠ¨çš„containerdocker images åˆ—å‡ºæœ¬åœ°æ‰€æœ‰çš„é•œåƒdocker rmi imagesID åˆ é™¤æŒ‡å®šçš„é•œåƒiddocker rm CONTAINER ID åˆ é™¤æŒ‡å®šçš„CONTAINER iddocker diff é•œåƒå æŸ¥çœ‹å®¹å™¨çš„ä¿®æ”¹éƒ¨åˆ†docker kill CONTAINER ID æ€æ‰æ­£åœ¨è¿è¡Œçš„å®¹å™¨docker logs å®¹å™¨ID/name å¯ä»¥æŸ¥çœ‹åˆ°å®¹å™¨ä¸»ç¨‹åºçš„è¾“å‡ºdocker pull image_name ä¸‹è½½imagedocker push image_name å‘å¸ƒdockeré•œåƒdocker version æŸ¥çœ‹dockerç‰ˆæœ¬docker info æŸ¥çœ‹dockerç³»ç»Ÿçš„ä¿¡æ¯docker inspect å®¹å™¨çš„id å¯ä»¥æŸ¥çœ‹æ›´è¯¦ç»†çš„å…³äºæŸä¸€ä¸ªå®¹å™¨çš„ä¿¡æ¯docker run -d image-name åå°è¿è¡Œé•œåƒdocker search é•œåƒå æŸ¥æ‰¾å…¬å…±çš„å¯ç”¨é•œåƒdocker stop å®¹å™¨å/å®¹å™¨ ID ç»ˆæ­¢è¿è¡Œçš„å®¹å™¨docker restart å®¹å™¨å/å®¹å™¨ ID é‡å¯å®¹å™¨docker commit æäº¤ï¼Œåˆ›å»ºä¸ªæ–°é•œåƒdocker build [OPTIONS] PATH | URL | - åˆ©ç”¨ Dockerfile åˆ›å»ºæ–°é•œåƒ å…³æ³¨æˆ‘ æœ€åè½¬è½½è¯·æ³¨æ˜åœ°å€ï¼šhttp://www.54tianzhisheng.cn/2018/01/25/Docker-install/","tags":[{"name":"Docker","slug":"Docker","permalink":"http://yoursite.com/tags/Docker/"}]},{"title":"MacBook Pro åˆä½“éªŒ","date":"2018-01-23T16:00:00.000Z","path":"2018/01/24/mac/","text":"èƒŒæ™¯ åœ¨ Mac åˆ°æ‰‹ä¹‹å‰å°±åœ¨å„ç§ç¾¤é‡Œçœ‹åˆ°äººè¯´ Mac å¤šå¥½ç”¨ï¼Œä¹Ÿæœ‰å¾ˆå¤šäººé¼“å¹è¿‡ Mac çš„å¥½å¤„ï¼Œæœ€åä¹Ÿåšå®šæˆ‘çš„å¹´å‰ç›®æ ‡äº† â€”â€” å°±æ˜¯ä¹°å° Macï¼Œä¹‹å‰è¯·åŸè°…æˆ‘è¿™ä¸ªç©·é¬¼ï¼Œä¹°ä¸èµ·ï¼Œç°åœ¨ä¹°äº† Mac åæ›´åŠ å¾—ä½“è°…æˆ‘è¿™ä¸ªç©·é¬¼äº†ï¼Œæ¯•ç«Ÿåœ¨ä¸Šæµ·è¿™ä¸ªåŸå¸‚ï¼Œé ç€å®ä¹ å·¥èµ„ä¹°è¿™ç§å¥¢ä¾ˆå“ï¼Œä¸å®¹æ˜“å•ŠğŸ˜„ ã€‚åºŸè¯ä¸å¤šè¯´ï¼Œå¦‚æœæ„¿æ„æ”¯æŒæˆ‘çš„ï¼Œè¯·åœ¨æ–‡ç« åº•éƒ¨æ‰«æäºŒç»´ç ï¼Œåœ¨æ­¤å…ˆè°¢è°¢äº†ã€‚ å¦‚ä½•æŒ‘é€‰ï¼ŸMacBook ä¸»è¦åˆ†ä¸¤ç³»åˆ—ï¼šMacBook Air å’Œ MacBook Proã€‚ Air çš„è¯ä¸ªäººæ„Ÿè§‰é…ç½®ä¸é«˜ï¼Œå¦‚æœæ˜¯å¼€å‘è¿˜æ˜¯å»ºè®®ä¹° Pro ç³»åˆ—çš„ã€‚å¦‚ä»Šä¹°çš„è¯ï¼Œå¯èƒ½è¿˜ä¼šåˆ† 2015 æ¬¾ã€2016 æ¬¾ã€2017 æ¬¾ã€‚æ¯æ¬¾ä¸­åˆåˆ† å†…å­˜å¤§å°ï¼ˆ8/16gï¼‰ã€ç¡¬ç›˜å¤§å°ï¼ˆ128/256/512gï¼‰ã€CPUã€å¤„ç†å™¨ï¼ˆi5/i7ï¼‰ã€æ˜¯å¦æœ‰TouchBarã€æ˜¾å¡ç­‰ã€‚ä¸åŒé…ç½®å¯¹åº”ç”µè„‘çš„å‹å·ä¹Ÿæ˜¯ä¸ä¸€æ ·çš„ã€‚ä¸‹é¢ç›´æ¥ä¸Šä¸€å¼ åœ¨æˆ‘çš„ç‰¹æ®Šæ¸ é“é‡Œçš„æŠ¥ä»·è¡¨æˆªå›¾å§ã€‚ï¼ˆæƒ³äº†è§£çš„å¯ä»¥æ‰¾æˆ‘ï¼‰ å…‰è¿™å‹å·ï¼Œä¸æ‡‚çš„äººè¿˜çœŸä¸ä¼šæŒ‘ã€‚ ä¸å¾—ä¸è¯´ï¼Œè‹¹æœç”µè„‘çœŸå°¼ç›éš¾æŒ‘å•Šï¼Œå¦‚æœä½ æ˜¯åœŸè±ªï¼Œé‚£ä¸ç”¨æŒ‘äº†ï¼Œç›´æ¥ä¸Šæœ€é«˜ä»·é’±çš„å§ã€‚ ç„¶åå¯ä»¥ä»é…ç½®ä¸­å‘ç° 2016 æ¬¾å’Œ 2017 æ¬¾å˜åŒ–çœŸå¿ƒä¸å¤§ï¼Œåœ¨åŒç­‰é…ç½®ä¸‹ï¼Œ2017 æ¬¾å‡ ä¹æ¯” 2016 æ¬¾ä»·æ ¼é«˜ä¸ª 3000 æ¥å—ã€‚ ç„¶åå°±æ˜¯ 512 G ç¡¬ç›˜æ¯” 256 G ä¹Ÿå‡ ä¹è´µä¸ª 2000 å¤šã€‚ 16G é‚£æ˜¯å¿…é¡»çš„ä¸Šå•Šï¼Œæ ‡é…äº†ï¼Œ8G å°±ä¸è¯´äº†ï¼Œå¤ªå°äº†ã€‚ å« TouchBarï¼Œè™½ç„¶ç¡®å®ç”¨å¤„ä¸å¤§ï¼Œä¸è¿‡è°ƒéŸ³ä¸¤è¿˜æ˜¯ä¸é”™çš„ã€‚é«˜é…éƒ½æœ‰ TouchBar çš„ã€‚ å‡ºäº qiong ï¼Œæˆ‘ä¹°äº† 2016 æ¬¾ï¼Œé…ç½®æ˜¯ï¼š ä¸è¿‡ç°åœ¨ 2016 æ¬¾å¥½åƒåœäº§äº†ã€‚ åˆ°æ‰‹2018.01.11 ä¸‹åˆå…­ç‚¹å¿«é€’é€åˆ°çš„ï¼Œå¾ˆå¼€å¿ƒã€‚æ™šä¸Šæ‹¿å›å®¶æ‹†ç®±ï¼Œç¬¬ä¸€ä»¶äº‹æƒ…å°±æ˜¯æ£€æŸ¥åºåˆ—å·å•Šï¼Œä¸Šé¢çš„å›¾ç‰‡æ‰“ç æ‰çš„å°±æ˜¯åºåˆ—å·ï¼Œè¿™ä¸ªåºåˆ—å·åœ¨ç”µè„‘æœºèº«ã€ç³»ç»Ÿã€å¤–ç‰›çš®ç™£ç›’éƒ½æœ‰çš„ï¼Œå¯ä»¥åœ¨å®˜ç½‘æŸ¥è¯¢è¿™ä¸ªåºåˆ—å·ï¼Œè·å¾—ç”µè„‘çš„æ¿€æ´»æ—¥æœŸå’Œå‰©ä½™ä¿ä¿®æ—¶é—´çš„ã€‚å†å°±æ˜¯æŸ¥è¯¢ç”µè„‘çš„ç”µæ± å¾ªç¯æ¬¡æ•°äº†ï¼Œæˆ‘çš„æ˜¯ä¸€æ¬¡ï¼Œä¸€èˆ¬å¥½åƒæ˜¯å‡ æ¬¡ä¹‹å†…éƒ½æ˜¯ç¬¦åˆçš„ã€‚è¯æ˜ä¹‹å‰æ²¡è¢«åˆ«äººç”¨è¿‡ï¼Œè¿™ä¸ªæ•°å­—æˆ‘ä¹Ÿå¿˜è®°äº†ã€‚ ç†Ÿæ‚‰ç³»ç»ŸMac ç³»ç»Ÿæ˜¯ç±» Unix ç³»ç»Ÿï¼Œå…¶å®æˆ‘è§‰å¾—åˆ°å’Œ Ubuntu ç³»ç»ŸæŒºåƒçš„ï¼Œæ—¢æœ‰å›¾å½¢åŒ–ç•Œé¢ï¼Œä¹Ÿå¯ä»¥å‘½ä»¤è¡Œæ“ä½œã€‚ç†Ÿæ‚‰è¿‡ Linux çš„åº”è¯¥ä¸Šæ‰‹å¾ˆå¿«çš„ã€‚ å®‰è£…è½¯ä»¶å¯ä»¥åœ¨ Appstore é‡Œé¢ä¸‹è½½ï¼Œä¹Ÿå¯ä»¥åœ¨ä¸€äº›è½¯ä»¶çš„å®˜ç½‘ç›´æ¥ä¸‹è½½ mac ç‰ˆçš„ã€‚å®‰è£…ä¹ŸæŒºç®€å•çš„ã€‚å¦‚æœä½ ä¸çŸ¥é“æœ‰ä»€ä¹ˆè½¯ä»¶å¯ä»¥å®‰è£…ï¼Œé‚£ä¹ˆæˆ‘è¿™é‡Œç»™ä½ ä»½ Mac è½¯ä»¶å‚è€ƒåˆ—è¡¨ï¼šhttps://github.com/jaywcjlove/awesome-mac/blob/master/README-zh.md å½“ç„¶äº†ï¼Œä¸Šé¢çš„ä¸ä¸€å®šå…¨ï¼Œå…·ä½“ç”¨åˆ°å…¶ä»–çš„è¿˜æ˜¯çš„è‡ªå·±å»æ‰¾å¯¹åº”çš„è½¯ä»¶ã€‚ è¿˜æœ‰å°±æ˜¯å¥½å¤šè½¯ä»¶æ˜¯æ”¶è´¹çš„ï¼Œåœ¨ Mac ä¸Šå¦‚æœè¦ä¸‹è½½çš„è¯ï¼Œè¿˜çš„è´¹ç‚¹å¿ƒæ€å»ç ´è§£ï¼Œæ¯”å¦‚ Officeã€IDEAã€Adobe ç³»åˆ—ç­‰ï¼Œå½“ç„¶ä¹Ÿä¸æ˜¯é¼“å¹å¤§å®¶å»ç ´è§£ï¼Œæˆ‘ä»¬è‡ªå·±ç”¨ç”¨å°±è¡Œï¼Œè™½è¯´ç°åœ¨æ²¡é’±æ”¯æŒï¼Œä½†æ˜¯æœ‰é’±çš„è¯è¿˜æ˜¯æ”¯æŒä¸‹ã€‚æˆ‘ä¸€ä¸ªå†™åšå®¢çš„çŸ¥é“å†™åšå®¢çš„ä¸å®¹æ˜“ï¼Œé‚£å†™è½¯ä»¶çš„æ›´ä¸å®¹æ˜“äº†ï¼Œèƒ½æ”¯æŒä¸€ä¸¤å—ä¹ŸæŒºå¥½çš„ã€‚ ç„¶åå°±æ˜¯ç¾åŒ–ä¸‹æˆ‘ä»¬çš„ä¸€äº›è½¯ä»¶ï¼Œæ¯”å¦‚æˆ‘ä»¬çš„ç»ˆç«¯ä¹‹ç±»çš„ã€å°½é‡ä½¿ç”¨ Homebrew å®‰è£…è½¯ä»¶ã€‚å½“ç„¶è¿™ç¯‡æ–‡ç« ä¸ä¼šå†™è¿™äº›çš„ï¼Œæ”¹å¤©ä¸“é—¨å†™ç¯‡æ–‡ç« å†™è¿™ä¸ªè¯é¢˜ã€‚ è¿˜æœ‰å°±æ˜¯åœ¨ Mac ä¸Šä»æ–°æ‰“é€ ä¸€ä¸ªé€‚åˆè‡ªå·±çš„æ–°å†™ä½œç¯å¢ƒï¼ˆè½¯ä»¶ã€Hexo å†™åšå®¢ç¯å¢ƒï¼‰ã€‚ æœ€åä½“éªŒäº† Mac ä¹Ÿæœ‰ä¸€ä¸ªå¤šç¤¼æ‹œäº†ï¼Œæ•´ä½“æ•ˆæœè¿˜æ˜¯ä¸é”™çš„ï¼Œæ¯•ç«ŸèŠ±äº†å·¨èµ„å‘¢ï¼Œä¹Ÿç®—æ˜¯å®Œæˆäº†è‡ªå·±å¹´å‰çš„å°ç›®æ ‡ã€‚å…ˆ bb åˆ°è¿™é‡Œå§ã€‚æœ‰æ—¶é—´å†å†™ç‚¹å…³äº Mac ä¸Šçš„ä¸œè¥¿ï¼Œè¿™æ¬¡å†™çš„æ¯”è¾ƒç®€å•ï¼Œè¿™ç¯‡æ–‡ç« ä¹Ÿæ˜¯åœ¨ Mac ä¸Šå†™çš„ç¬¬ä¸€ç¯‡æ–‡ç« ã€‚","tags":[{"name":"Mac","slug":"Mac","permalink":"http://yoursite.com/tags/Mac/"}]},{"title":"Spring Bootç³»åˆ—æ–‡ç« ï¼ˆäºŒï¼‰ï¼šSpringBoot Admin ä½¿ç”¨æŒ‡å—","date":"2018-01-16T16:00:00.000Z","path":"2018/01/17/SpringBoot-Admin/","text":"ä»€ä¹ˆæ˜¯ SpringBoot Adminï¼ŸSpring Boot Admin æ˜¯ä¸€ä¸ªç®¡ç†å’Œç›‘æ§ä½ çš„ Spring Boot åº”ç”¨ç¨‹åºçš„åº”ç”¨ç¨‹åºã€‚ è¿™äº›åº”ç”¨ç¨‹åºé€šè¿‡ Spring Boot Admin Clientï¼ˆé€šè¿‡ HTTPï¼‰æ³¨å†Œæˆ–è€…ä½¿ç”¨ Spring Cloudï¼ˆä¾‹å¦‚ Eurekaï¼‰å‘ç°ã€‚ UIåªæ˜¯ Spring Boot Actuator ç«¯ç‚¹ä¸Šçš„ä¸€ä¸ª AngularJs åº”ç”¨ç¨‹åºã€‚ å¿«é€Ÿå¼€å§‹é¦–å…ˆåœ¨ IDEA åˆ›å»ºä¸€ä¸ª SpringBoot é¡¹ç›®ï¼ŒæŠŠå®ƒå½“ä½œ server ç«¯ï¼Œå·¥ç¨‹å¦‚ä¸‹ï¼š ç„¶ååœ¨ pom.xml ä¸­å¼•å…¥ä¾èµ–ï¼š 12345678910&lt;dependency&gt; &lt;groupId&gt;de.codecentric&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-admin-server&lt;/artifactId&gt; &lt;version&gt;1.5.6&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;de.codecentric&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-admin-server-ui&lt;/artifactId&gt; &lt;version&gt;1.5.6&lt;/version&gt;&lt;/dependency&gt; ç»§ç»­åœ¨å¯åŠ¨ç±» SpringbootAdminApplication.java ä¸­å¼•å…¥æ³¨è§£ @EnableAdminServer ï¼Œç„¶åè¿è¡Œé¡¹ç›®ï¼š è®¿é—® http://localhost:8084/ å³å¯ï¼š æ­¤æ—¶ä¼šå‘ç°æ²¡æœ‰ä»»ä½•åº”ç”¨ç¨‹åºçš„ä¿¡æ¯ã€‚ æ¥ä¸‹æ¥æˆ‘ä»¬æ–°å»ºä¸€ä¸ª SpringBoot é¡¹ç›®ï¼ŒæŠŠå®ƒå½“ä½œå®¢æˆ·ç«¯ç¨‹åºï¼Œå·¥ç¨‹å¦‚ä¸‹ï¼š åœ¨ pom.xml ä¸­æ·»åŠ ä¾èµ–ï¼š 12345&lt;dependency&gt; &lt;groupId&gt;de.codecentric&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-admin-starter-client&lt;/artifactId&gt; &lt;version&gt;1.5.6&lt;/version&gt;&lt;/dependency&gt; ç„¶ååœ¨ application.yml ä¸­è®¾ç½®ï¼š spring.boot.admin.url=http:localhost:8094 ç”¨äºå°†å½“å‰åº”ç”¨æ³¨å†Œåˆ° Spring Boot Adminã€‚ è¿˜å¯ä»¥è®¾ç½®ï¼Œspring.boot.admin.client.name: ï¼ˆåº”ç”¨ç¨‹åºçš„åå­—ï¼‰ä¸è®¾ç½®çš„è¯ä¼šæœ‰é»˜è®¤çš„åå­— æ­¤æ—¶æŠŠä¸¤ä¸ªé¡¹ç›®è¿è¡Œèµ·æ¥ï¼š ç‚¹å‡»å›¾ä¸­çš„ detail æŒ‰é’®ï¼šå¯ä»¥çœ‹åˆ°åº”ç”¨ç¨‹åºçš„å¥åº·å€¼ã€å†…å­˜ã€JVMã€GC ç­‰ä¿¡æ¯ã€‚ metrics ä¿¡æ¯ï¼š ç¯å¢ƒ ä¿¡æ¯ï¼š log ä¿¡æ¯ï¼š JMX ä¿¡æ¯ï¼š çº¿ç¨‹ ä¿¡æ¯ï¼š Trace è¿½è¸ªä¿¡æ¯ï¼š è¿˜å¯ä»¥ä¸‹è½½ Heapdump æ–‡ä»¶ã€‚ åˆšæ‰é¦–é¡µçš„åº”ç”¨åˆ—è¡¨åé¢æœ‰ä¸ªçº¢è‰²çš„ Ã—ï¼Œæˆ‘ä»¬å¯ä»¥å°†æ³¨å†Œä¸Šå»çš„åº”ç”¨ç§»é™¤ï¼Œä½†æ˜¯åªè¦ä½ ä¸æŠŠç¨‹åºåœæ‰ï¼Œå®ƒç«‹é©¬åˆä¼šæ³¨å†Œä¸Šå»ã€‚ è¿˜æœ‰å°±æ˜¯åº”ç”¨åˆ—è¡¨çš„ version å’Œ info ä¸Šé¢çš„å›¾ä¸­ä¸ºç©ºï¼Œä¸‹é¢çœ‹çœ‹æ€ä¹ˆæŠŠå®ƒå˜å‡ºæ¥ï¼š 123info.groupId: @project.groupId@info.artifactId: @project.artifactId@info.version: @project.version@ é‡æ–°è¿è¡Œå®¢æˆ·ç«¯ç¨‹åºï¼Œåˆ·æ–°é¡µé¢å¯ä»¥å‘ç°ï¼š è¿˜å¯ä»¥æŸ¥è¯¢åº”ç”¨ç¨‹åºçš„äº‹ä»¶å˜åŒ–ï¼š å®¢æˆ·ç«¯åº”ç”¨ç¨‹åºJMX beanç®¡ç†è¦åœ¨ç®¡ç†ç•Œé¢ä¸­ä¸JMX-beansè¿›è¡Œäº¤äº’ï¼Œæ‚¨å¿…é¡»åœ¨å®¢æˆ·ç«¯åº”ç”¨ç¨‹åºä¸­åŒ…å« Jolokia, pom.xml åŠ å…¥ä¾èµ–ï¼š 1234&lt;dependency&gt; &lt;groupId&gt;org.jolokia&lt;/groupId&gt; &lt;artifactId&gt;jolokia-core&lt;/artifactId&gt;&lt;/dependency&gt; é‡å¯å®¢æˆ·ç«¯ç¨‹åºåï¼Œå°±å¯ä»¥åœ¨è¿™é‡Œä¸ JMX åšäº¤äº’äº†ï¼š è¿˜æœ‰å¾ˆå¤š SpringBoot Admin å®¢æˆ·ç«¯é…ç½®é€‰é¡¹ï¼š http://codecentric.github.io/spring-boot-admin/1.5.6/#spring-boot-admin-client æœåŠ¡ç«¯ç¨‹åºä¹Ÿæœ‰äº› SpringBoot Admin æœåŠ¡ç«¯ç¨‹åºé…ç½®é€‰é¡¹ï¼š http://codecentric.github.io/spring-boot-admin/1.5.6/#spring-boot-admin-server å®˜æ–¹æ–‡æ¡£é‡Œé¢è¿˜æœ‰äº›å…³äºæœåŠ¡ä¸‹çº¿æ¶ˆæ¯é€šçŸ¥çš„çŸ¥è¯†ï¼Œæƒ³äº†è§£çš„å¯ä»¥æŸ¥çœ‹ï¼š http://codecentric.github.io/spring-boot-admin/1.5.6/#_notifications å…³æ³¨æˆ‘ å‚è€ƒæ–‡ç« http://codecentric.github.io/spring-boot-admin/1.5.6/ æœ€åè½¬è½½è¯·æ³¨æ˜æ–‡ç« åŸå§‹åœ°å€ä¸ºï¼šhttp://www.54tianzhisheng.cn/2018/01/17/SpringBoot-Admin/","tags":[{"name":"Java","slug":"Java","permalink":"http://yoursite.com/tags/Java/"},{"name":"SpringBoot","slug":"SpringBoot","permalink":"http://yoursite.com/tags/SpringBoot/"}]},{"title":"Lombok çœ‹è¿™ç¯‡å°±å¤Ÿäº†","date":"2018-01-08T16:00:00.000Z","path":"2018/01/09/lombok/","text":"å‰æè‡ªä»è¿›å…¬å¸å®ä¹ åï¼Œé¡¹ç›®ä»£ç ä¸­èƒ½ç”¨ Lombok çš„éƒ½ç”¨äº†ï¼Œæ¯•ç«Ÿè¿™ä¹ˆå¥½çš„è½®å­è¦å……åˆ†åˆ©ç”¨å¥½ã€‚ä¹Ÿå¯ä»¥å‡å°‘ä¸€äº› get/set/toString æ–¹æ³•çš„ç¼–å†™ï¼Œè™½è¯´ IDEA çš„æ’ä»¶å¯ä»¥è‡ªåŠ¨ç”Ÿæˆ get/set/toString æ–¹æ³•ï¼Œä½†æ˜¯ä½¿ç”¨ Lombok å¯ä»¥è®©ä»£ç æ›´ç®€æ´ã€‚ä¸‹é¢çœ‹çœ‹å¦‚ä½•åœ¨ IDEA ä¸­å¦‚ä½•å®‰è£… Lombokï¼š å®‰è£…æ‰“å¼€ IDEA çš„ Settings é¢æ¿ï¼Œå¹¶é€‰æ‹© Plugins é€‰é¡¹ï¼Œç„¶åç‚¹å‡» â€œBrowse repositoriesâ€ åœ¨è¾“å…¥æ¡†è¾“å…¥â€lombokâ€ï¼Œå¾—åˆ°æœç´¢ç»“æœï¼Œç‚¹å‡»å®‰è£…ï¼Œç„¶åå®‰è£…æç¤ºé‡å¯ IDEAï¼Œå®‰è£…æˆåŠŸ; å¼•å…¥ä¾èµ–åœ¨è‡ªå·±çš„é¡¹ç›®é‡Œæ·»åŠ  lombok çš„ç¼–è¯‘æ”¯æŒï¼Œåœ¨ pom æ–‡ä»¶é‡Œé¢æ·»åŠ  dependency 123456&lt;dependency&gt; &lt;groupId&gt;org.projectlombok&lt;/groupId&gt; &lt;artifactId&gt;lombok&lt;/artifactId&gt; &lt;version&gt;1.16.18&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt;&lt;/dependency&gt; æ€ä¹ˆä½¿ç”¨ï¼Ÿåœ¨å®ä½“ç±»ä¸Šå¼•å…¥ç›¸å…³çš„æ³¨è§£å°±è¡Œï¼š æœ‰å“ªäº›æ³¨è§£ï¼Ÿ @Data @Setter @Getter @Slf4j @AllArgsConstructor @NoArgsConstructor @EqualsAndHashCode @NonNull @Cleanup @ToString @RequiredArgsConstructor @Value @SneakyThrows @Synchronized æ³¨è§£è¯¦è§£@Data æ³¨è§£åœ¨ ç±» ä¸Šï¼›æä¾›ç±»æ‰€æœ‰å±æ€§çš„ get å’Œ set æ–¹æ³•ï¼Œæ­¤å¤–è¿˜æä¾›äº†equalsã€canEqualã€hashCodeã€toString æ–¹æ³•ã€‚ @Setter æ³¨è§£åœ¨ å±æ€§ ä¸Šï¼›ä¸ºå•ä¸ªå±æ€§æä¾› set æ–¹æ³•; æ³¨è§£åœ¨ ç±» ä¸Šï¼Œä¸ºè¯¥ç±»æ‰€æœ‰çš„å±æ€§æä¾› set æ–¹æ³•ï¼Œ éƒ½æä¾›é»˜è®¤æ„é€ æ–¹æ³•ã€‚ @Getter æ³¨è§£åœ¨ å±æ€§ ä¸Šï¼›ä¸ºå•ä¸ªå±æ€§æä¾› get æ–¹æ³•; æ³¨è§£åœ¨ ç±» ä¸Šï¼Œä¸ºè¯¥ç±»æ‰€æœ‰çš„å±æ€§æä¾› get æ–¹æ³•ï¼Œéƒ½æä¾›é»˜è®¤æ„é€ æ–¹æ³•ã€‚ @Slf4j æ³¨è§£åœ¨ ç±» ä¸Šï¼›ä¸ºç±»æä¾›ä¸€ä¸ª å±æ€§åä¸º log çš„æ—¥å¿—å¯¹è±¡ï¼Œæä¾›é»˜è®¤æ„é€ æ–¹æ³•ã€‚ @AllArgsConstructor æ³¨è§£åœ¨ ç±» ä¸Šï¼›ä¸ºç±»æä¾›ä¸€ä¸ªå…¨å‚çš„æ„é€ æ–¹æ³•ï¼ŒåŠ äº†è¿™ä¸ªæ³¨è§£åï¼Œç±»ä¸­ä¸æä¾›é»˜è®¤æ„é€ æ–¹æ³•äº†ã€‚ @NoArgsConstructor æ³¨è§£åœ¨ ç±» ä¸Šï¼›ä¸ºç±»æä¾›ä¸€ä¸ªæ— å‚çš„æ„é€ æ–¹æ³•ã€‚ @EqualsAndHashCode æ³¨è§£åœ¨ ç±» ä¸Š, å¯ä»¥ç”Ÿæˆ equalsã€canEqualã€hashCode æ–¹æ³•ã€‚ @NonNull æ³¨è§£åœ¨ å±æ€§ ä¸Šï¼Œä¼šè‡ªåŠ¨äº§ç”Ÿä¸€ä¸ªå…³äºæ­¤å‚æ•°çš„éç©ºæ£€æŸ¥ï¼Œå¦‚æœå‚æ•°ä¸ºç©ºï¼Œåˆ™æŠ›å‡ºä¸€ä¸ªç©ºæŒ‡é’ˆå¼‚å¸¸ï¼Œä¹Ÿä¼šæœ‰ä¸€ä¸ªé»˜è®¤çš„æ— å‚æ„é€ æ–¹æ³•ã€‚ @Cleanup è¿™ä¸ªæ³¨è§£ç”¨åœ¨ å˜é‡ å‰é¢ï¼Œå¯ä»¥ä¿è¯æ­¤å˜é‡ä»£è¡¨çš„èµ„æºä¼šè¢«è‡ªåŠ¨å…³é—­ï¼Œé»˜è®¤æ˜¯è°ƒç”¨èµ„æºçš„ close() æ–¹æ³•ï¼Œå¦‚æœè¯¥èµ„æºæœ‰å…¶å®ƒå…³é—­æ–¹æ³•ï¼Œå¯ä½¿ç”¨ @Cleanup(â€œmethodNameâ€) æ¥æŒ‡å®šè¦è°ƒç”¨çš„æ–¹æ³•ï¼Œä¹Ÿä¼šç”Ÿæˆé»˜è®¤çš„æ„é€ æ–¹æ³• @ToString è¿™ä¸ªæ³¨è§£ç”¨åœ¨ ç±» ä¸Šï¼Œå¯ä»¥ç”Ÿæˆæ‰€æœ‰å‚æ•°çš„ toString æ–¹æ³•ï¼Œè¿˜ä¼šç”Ÿæˆé»˜è®¤çš„æ„é€ æ–¹æ³•ã€‚ @RequiredArgsConstructor è¿™ä¸ªæ³¨è§£ç”¨åœ¨ ç±» ä¸Šï¼Œä½¿ç”¨ç±»ä¸­æ‰€æœ‰å¸¦æœ‰ @NonNull æ³¨è§£çš„æˆ–è€…å¸¦æœ‰ final ä¿®é¥°çš„æˆå‘˜å˜é‡ç”Ÿæˆå¯¹åº”çš„æ„é€ æ–¹æ³•ã€‚ @Value è¿™ä¸ªæ³¨è§£ç”¨åœ¨ ç±» ä¸Šï¼Œä¼šç”Ÿæˆå«æ‰€æœ‰å‚æ•°çš„æ„é€ æ–¹æ³•ï¼Œget æ–¹æ³•ï¼Œæ­¤å¤–è¿˜æä¾›äº†equalsã€hashCodeã€toString æ–¹æ³•ã€‚ @SneakyThrows è¿™ä¸ªæ³¨è§£ç”¨åœ¨ æ–¹æ³• ä¸Šï¼Œå¯ä»¥å°†æ–¹æ³•ä¸­çš„ä»£ç ç”¨ try-catch è¯­å¥åŒ…è£¹èµ·æ¥ï¼Œæ•è·å¼‚å¸¸å¹¶åœ¨ catch ä¸­ç”¨ Lombok.sneakyThrow(e) æŠŠå¼‚å¸¸æŠ›å‡ºï¼Œå¯ä»¥ä½¿ç”¨ @SneakyThrows(Exception.class) çš„å½¢å¼æŒ‡å®šæŠ›å‡ºå“ªç§å¼‚å¸¸ï¼Œä¹Ÿä¼šç”Ÿæˆé»˜è®¤çš„æ„é€ æ–¹æ³•ã€‚ @Synchronized è¿™ä¸ªæ³¨è§£ç”¨åœ¨ ç±»æ–¹æ³• æˆ–è€… å®ä¾‹æ–¹æ³• ä¸Šï¼Œæ•ˆæœå’Œ synchronized å…³é”®å­—ç›¸åŒï¼ŒåŒºåˆ«åœ¨äºé”å¯¹è±¡ä¸åŒï¼Œå¯¹äºç±»æ–¹æ³•å’Œå®ä¾‹æ–¹æ³•ï¼Œsynchronized å…³é”®å­—çš„é”å¯¹è±¡åˆ†åˆ«æ˜¯ç±»çš„ class å¯¹è±¡å’Œ this å¯¹è±¡ï¼Œè€Œ @Synchronized çš„é”å¯¹è±¡åˆ†åˆ«æ˜¯ ç§æœ‰é™æ€ final å¯¹è±¡ lock å’Œ ç§æœ‰ final å¯¹è±¡ lockï¼Œå½“ç„¶ï¼Œä¹Ÿå¯ä»¥è‡ªå·±æŒ‡å®šé”å¯¹è±¡ï¼Œæ­¤å¤–ä¹Ÿæä¾›é»˜è®¤çš„æ„é€ æ–¹æ³•ã€‚ æ€»ç»“ä»¥ä¸Šæ³¨è§£å¯æ ¹æ®éœ€è¦ä¸€èµ·æ­é…ä½¿ç”¨ï¼ è™½è¯´è½®å­å¥½ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸ä»…è¦çŸ¥å…¶ç„¶ï¼Œä¹Ÿè¦çŸ¥å…¶æ‰€ä»¥ç„¶ï¼ å…³æ³¨æˆ‘ æœ€åè½¬è½½è¯·æ³¨æ˜åŸåˆ›åœ°å€ï¼šhttp://www.54tianzhisheng.cn/2018/01/07/lombok/","tags":[{"name":"lombok","slug":"lombok","permalink":"http://yoursite.com/tags/lombok/"}]},{"title":"Spring Bootç³»åˆ—æ–‡ç« ï¼ˆä¸€ï¼‰ï¼šSpringBoot Kafka æ•´åˆä½¿ç”¨","date":"2018-01-04T16:00:00.000Z","path":"2018/01/05/SpringBoot-Kafka/","text":"å‰æå‡è®¾ä½ äº†è§£è¿‡ SpringBoot å’Œ Kafkaã€‚1ã€SpringBoot å¦‚æœå¯¹ SpringBoot ä¸äº†è§£çš„è¯ï¼Œå»ºè®®å»çœ‹çœ‹ DD å¤§ä½¬ å’Œ çº¯æ´çš„å¾®ç¬‘ çš„ç³»åˆ—åšå®¢ã€‚ 2ã€Kafka Kafka çš„è¯å¯ä»¥çœ‹çœ‹æˆ‘å‰ä¸¤å¤©å†™çš„åšå®¢ ï¼š Kafka å®‰è£…åŠå¿«é€Ÿå…¥é—¨ å­¦ä¹ çš„è¯è‡ªå·±å¼€å°è™šæ‹Ÿæœºè‡ªå·±æ‰‹åŠ¨æ­å»ºç¯å¢ƒå§ï¼Œæœ‰æ¡ä»¶çš„ä¹°æœåŠ¡å™¨ã€‚ æ³¨æ„ï¼šä¸€å®šè¦äº²è‡ªè‡ªå·±å®‰è£…å®è·µï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°†è¿™ä¸¤ä¸ªè¿›è¡Œæ•´åˆã€‚ åˆ›å»ºé¡¹ç›®é¡¹ç›®æ•´ä½“æ¶æ„ï¼š ä½¿ç”¨ IDEA åˆ›å»º SpringBoot é¡¹ç›®ï¼Œè¿™ä¸ªå¾ˆç®€å•äº†ï¼Œè¿™é‡Œä¸åšè¿‡å¤šçš„è®²è§£ã€‚ 1ã€pom æ–‡ä»¶ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;groupId&gt;com.zhisheng&lt;/groupId&gt; &lt;artifactId&gt;kafka-learning&lt;/artifactId&gt; &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt; &lt;packaging&gt;jar&lt;/packaging&gt; &lt;name&gt;kafka-learning&lt;/name&gt; &lt;description&gt;Demo project for Spring Boot + kafka&lt;/description&gt; &lt;parent&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt; &lt;version&gt;1.5.9.RELEASE&lt;/version&gt; &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt; &lt;/parent&gt; &lt;properties&gt; &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt; &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt; &lt;java.version&gt;1.8&lt;/java.version&gt; &lt;/properties&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.projectlombok&lt;/groupId&gt; &lt;artifactId&gt;lombok&lt;/artifactId&gt; &lt;optional&gt;true&lt;/optional&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.kafka&lt;/groupId&gt; &lt;artifactId&gt;spring-kafka&lt;/artifactId&gt; &lt;version&gt;1.1.1.RELEASE&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.google.code.gson&lt;/groupId&gt; &lt;artifactId&gt;gson&lt;/artifactId&gt; &lt;version&gt;2.8.2&lt;/version&gt; &lt;/dependency&gt; &lt;/dependencies&gt; &lt;build&gt; &lt;plugins&gt; &lt;plugin&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt; &lt;/plugin&gt; &lt;/plugins&gt; &lt;/build&gt;&lt;/project&gt; ä¸»è¦å¼•å…¥äº† spring-kafka ã€lombok ã€ gson ä¾èµ–ã€‚ 2ã€æ¶ˆæ¯å®ä½“ç±» Message.java å¦‚ä¸‹ï¼š 123456789@Datapublic class Message &#123; private Long id; //id private String msg; //æ¶ˆæ¯ private Date sendTime; //æ—¶é—´æˆ³&#125; 3ã€æ¶ˆæ¯å‘é€ç±» KafkaSender.java 12345678910111213141516171819@Component@Slf4jpublic class KafkaSender &#123; @Autowired private KafkaTemplate&lt;String, String&gt; kafkaTemplate; private Gson gson = new GsonBuilder().create(); //å‘é€æ¶ˆæ¯æ–¹æ³• public void send() &#123; Message message = new Message(); message.setId(System.currentTimeMillis()); message.setMsg(UUID.randomUUID().toString()); message.setSendTime(new Date()); log.info(\"+++++++++++++++++++++ message = &#123;&#125;\", gson.toJson(message)); kafkaTemplate.send(\"zhisheng\", gson.toJson(message)); &#125;&#125; å°±è¿™æ ·ï¼Œå‘é€æ¶ˆæ¯ä»£ç å°±å®ç°äº†ã€‚ è¿™é‡Œå…³é”®çš„ä»£ç ä¸º kafkaTemplate.send() æ–¹æ³•ï¼Œzhisheng æ˜¯ Kafka é‡Œçš„ topic ï¼Œè¿™ä¸ª topic åœ¨ Java ç¨‹åºä¸­æ˜¯ä¸éœ€è¦æå‰åœ¨ Kafka ä¸­è®¾ç½®çš„ï¼Œå› ä¸ºå®ƒä¼šåœ¨å‘é€çš„æ—¶å€™è‡ªåŠ¨åˆ›å»ºä½ è®¾ç½®çš„ topicï¼Œ gson.toJson(message) æ˜¯æ¶ˆæ¯å†…å®¹ï¼Œè¿™é‡Œæš‚æ—¶å…ˆè¯´è¿™ä¹ˆå¤šäº†ï¼Œä¸è¯¦è§£äº†ï¼Œåé¢æœ‰æœºä¼šç»§ç»­æŠŠé‡Œé¢æºç è§£è¯»å†™ç¯‡åšå®¢å‡ºæ¥ï¼ˆå› ä¸ºä¸­é€”ç¢°åˆ°å‘ï¼Œè€å­è·Ÿäº†å‡ éæºç ï¼‰ã€‚ 4ã€æ¶ˆæ¯æ¥æ”¶ç±» KafkaReceiver.java 12345678910111213141516171819@Component@Slf4jpublic class KafkaReceiver &#123; @KafkaListener(topics = &#123;\"zhisheng\"&#125;) public void listen(ConsumerRecord&lt;?, ?&gt; record) &#123; Optional&lt;?&gt; kafkaMessage = Optional.ofNullable(record.value()); if (kafkaMessage.isPresent()) &#123; Object message = kafkaMessage.get(); log.info(\"----------------- record =\" + record); log.info(\"------------------ message =\" + message); &#125; &#125;&#125; å®¢æˆ·ç«¯ consumer æ¥æ”¶æ¶ˆæ¯ç‰¹åˆ«ç®€å•ï¼Œç›´æ¥ç”¨ @KafkaListener æ³¨è§£å³å¯ï¼Œå¹¶åœ¨ç›‘å¬ä¸­è®¾ç½®ç›‘å¬çš„ topic ï¼Œtopics æ˜¯ä¸€ä¸ªæ•°ç»„æ‰€ä»¥æ˜¯å¯ä»¥ç»‘å®šå¤šä¸ªä¸»é¢˜çš„ï¼Œä¸Šé¢çš„ä»£ç ä¸­ä¿®æ”¹ä¸º @KafkaListener(topics = {&quot;zhisheng&quot;,&quot;tian&quot;}) å°±å¯ä»¥åŒæ—¶ç›‘å¬ä¸¤ä¸ª topic çš„æ¶ˆæ¯äº†ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼šè¿™é‡Œçš„ topic éœ€è¦å’Œæ¶ˆæ¯å‘é€ç±» KafkaSender.java ä¸­è®¾ç½®çš„ topic ä¸€è‡´ã€‚ 5ã€å¯åŠ¨ç±» KafkaApplication.java 123456789101112131415161718192021@SpringBootApplicationpublic class KafkaApplication &#123; public static void main(String[] args) &#123; ConfigurableApplicationContext context = SpringApplication.run(KafkaApplication.class, args); KafkaSender sender = context.getBean(KafkaSender.class); for (int i = 0; i &lt; 3; i++) &#123; //è°ƒç”¨æ¶ˆæ¯å‘é€ç±»ä¸­çš„æ¶ˆæ¯å‘é€æ–¹æ³• sender.send(); try &#123; Thread.sleep(3000); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125; &#125;&#125; 6ã€é…ç½®æ–‡ä»¶ application.properties 1234567891011121314151617181920212223242526#============== kafka ===================# æŒ‡å®škafka ä»£ç†åœ°å€ï¼Œå¯ä»¥å¤šä¸ªspring.kafka.bootstrap-servers=192.168.153.135:9092#=============== provider =======================spring.kafka.producer.retries=0# æ¯æ¬¡æ‰¹é‡å‘é€æ¶ˆæ¯çš„æ•°é‡spring.kafka.producer.batch-size=16384spring.kafka.producer.buffer-memory=33554432# æŒ‡å®šæ¶ˆæ¯keyå’Œæ¶ˆæ¯ä½“çš„ç¼–è§£ç æ–¹å¼spring.kafka.producer.key-serializer=org.apache.kafka.common.serialization.StringSerializerspring.kafka.producer.value-serializer=org.apache.kafka.common.serialization.StringSerializer#=============== consumer =======================# æŒ‡å®šé»˜è®¤æ¶ˆè´¹è€…group idspring.kafka.consumer.group-id=test-consumer-groupspring.kafka.consumer.auto-offset-reset=earliestspring.kafka.consumer.enable-auto-commit=truespring.kafka.consumer.auto-commit-interval=100# æŒ‡å®šæ¶ˆæ¯keyå’Œæ¶ˆæ¯ä½“çš„ç¼–è§£ç æ–¹å¼spring.kafka.consumer.key-deserializer=org.apache.kafka.common.serialization.StringDeserializerspring.kafka.consumer.value-deserializer=org.apache.kafka.common.serialization.StringDeserializer spring.kafka.bootstrap-servers åé¢è®¾ç½®ä½ å®‰è£…çš„ Kafka çš„æœºå™¨ IP åœ°å€å’Œç«¯å£å· 9092ã€‚ å¦‚æœä½ åªæ˜¯ç®€å•æ•´åˆä¸‹ï¼Œå…¶ä»–çš„å‡ ä¸ªé»˜è®¤å°±å¥½äº†ã€‚ Kafka è®¾ç½®åœ¨ä½ å®‰è£…çš„ Kafka ç›®å½•æ–‡ä»¶ä¸‹ï¼š å¯åŠ¨ zkä½¿ç”¨å®‰è£…åŒ…ä¸­çš„è„šæœ¬å¯åŠ¨å•èŠ‚ç‚¹ Zookeeper å®ä¾‹ï¼š 1bin/zookeeper-server-start.sh -daemon config/zookeeper.properties å¯åŠ¨ Kafka æœåŠ¡ä½¿ç”¨ kafka-server-start.sh å¯åŠ¨ kafka æœåŠ¡ï¼š 1bin/kafka-server-start.sh config/server.properties å¯åŠ¨æˆåŠŸåï¼ åƒä¸‡æ³¨æ„ï¼š è®°å¾—å°†ä½ çš„è™šæ‹Ÿæœºæˆ–è€…æœåŠ¡å™¨å…³é—­é˜²ç«å¢™æˆ–è€…å¼€å¯ Kafka çš„ç«¯å£ 9092ã€‚ è¿è¡Œ å‡ºç°è¿™å°±ä»£è¡¨æ•´åˆæˆåŠŸäº†ï¼ æˆ‘ä»¬çœ‹ä¸‹ Kafka ä¸­çš„ topic åˆ—è¡¨å°± 1bin/kafka-topics.sh --list --zookeeper localhost:2181 å°±ä¼šå‘ç°åˆšæ‰æˆ‘ä»¬ç¨‹åºä¸­çš„ zhisheng å·²ç»è‡ªå·±åˆ›å»ºäº†ã€‚ å…³æ³¨æˆ‘ æœ€åè½¬è½½è¯·åŠ¡å¿…æ³¨æ˜åŸåˆ›åœ°å€ä¸ºï¼šhttp://www.54tianzhisheng.cn/2018/01/05/SpringBoot-Kafka/","tags":[{"name":"Kafka","slug":"Kafka","permalink":"http://yoursite.com/tags/Kafka/"},{"name":"SpringBoot","slug":"SpringBoot","permalink":"http://yoursite.com/tags/SpringBoot/"}]},{"title":"ä¸ºä»€ä¹ˆè¦é‡æ–°è¿è¥ä»¥å‰çš„å…¬ä¼—å·å‘¢ï¼Ÿ","date":"2018-01-03T16:00:00.000Z","path":"2018/01/04/weixin/","text":"å‰æè€è¯»è€…å¯èƒ½ä¼šå‘ç°ç°åœ¨æˆ‘çš„å…¬ä¼—å·å·²ç»æ”¹åäº†ã€‚ï¼ˆç”± â€œçŒ¿blogâ€ å˜æˆ â€œzhishengâ€ äº†ï¼Œç»†å¿ƒçš„ç«¥é‹ä¼šå‘ç°ä¸ä»…åå­—å˜äº†ï¼Œ ID ä¹Ÿå˜äº†ï¼Œä½†æ˜¯å›¾ç‰‡è¿˜æ²¡æ”¹ï¼Œæš‚æ—¶è¿˜æ²¡æƒ³åˆ°å¥½çš„ logo å›¾ç‰‡ï¼‰ï¼Œä¸‹é¢è¯´è¯´ä¸ºå•¥å§ï¼ å¬æˆ‘ç BB ä¸Šå›¾æ˜¯ä¸¤å¹´å‰å…¬ä¼—å·ç¾¤å‘çš„ç¬¬ä¸€æ¡ä¿¡æ¯ï¼Œé‚£æ—¶è‡ªå·±è¿˜æ˜¯åœ¨å­¦æ ¡ï¼Œå¦‚ä»Šå·²ç»è¿›å…¥äº†ç¤¾ä¼šï¼Œåœ¨å…¬å¸å®ä¹ äº†ã€‚è®°å¾—å½“åˆå¼€è¿™ä¸ªå…¬ä¼—å·çš„åŸå› æ˜¯å› ä¸ºå‡ ä¸ªå¹´è½»äººæœ‰ç€æ¢¦æƒ³ï¼Œæ‰“ç®—ä¸€èµ·åšç‚¹ä¸œè¥¿ï¼Œå½“æ—¶ä¸€è…”çƒ­è¡€çš„è‡ªå·±ç«‹é©¬å°±å…ˆç”³è¯·äº†ä¸ªå…¬ä¼—å·ï¼Œåæ¥ â€œä¸œè¥¿â€ å€’æ˜¯æ²¡åšï¼Œåå€’æ˜¯æˆ‘è‡ªå·±æ…¢æ…¢çš„åœ¨å¾®ä¿¡å…¬ä¼—å·åˆ†äº«ä¸€äº›æ–‡ç« ï¼Œç„¶åé‚£æ—¶è‡ªå·±ä¹Ÿå†™åšå®¢ï¼ˆç®—ç®—è‡ªå·±å†™åšå®¢åº”è¯¥å¿«ä¸‰å¹´äº†ï¼ŒåšæŒçœŸä¸æ˜“å•Šï¼‰ï¼Œæ‰€ä»¥å¶å°”ä¹ŸæŠŠè‡ªå·±çš„åšå®¢åˆ†äº«åœ¨å¾®ä¿¡å…¬ä¼—å·ä¸Šã€‚ ä½†æ˜¯å¥½æ™¯ä¸é•¿ï¼Œé‚£æ—¶çš„å¾®ä¿¡å…¬ä¼—å·æ’ç‰ˆçœŸå°¼ç›éš¾ç”¨çš„ä¸€æ‰¹ï¼Œä½œä¸ºä¸€ä¸ªç†å·¥ç§‘çš„ç”·ç”Ÿï¼Œæœ¬æ¥è‡ªå·±åšäº‹ä¸€èˆ¬ç»†å¿ƒå’Œè€å¿ƒï¼Œæ— å¥ˆï¼ŒæŠŠè¿™ä¹ˆå¥½çš„ä¸€ä¸ªç«¥é‹éƒ½ç»™é€¼åäº†ã€‚æˆ‘ç°åœ¨è¿˜æ˜¯å¾—åæ§½ä¸‹ï¼Œå¦‚ä»Šçš„å¾®ä¿¡å…¬ä¼—å·åå°æ’ç‰ˆè¿˜æ˜¯é‚£ä¹ˆå·®ã€‚ä½†æ˜¯å¯èƒ½å› ä¸ºéœ€æ±‚æ¯”è¾ƒå¤šäº†ï¼Œæ‰€ä»¥å°±æœ‰äººåšå‡ºäº†å·¥å…·ï¼ˆå°† markdown æ’ç‰ˆååœ¨å°†æ•´ä¸ªæ ·å¼å¤åˆ¶ç²˜è´´åˆ°å¾®ä¿¡å…¬ä¼—å·åå°ï¼‰ï¼Œè¿™æ ·ä¸€ç¯‡æ’ç‰ˆè¿˜ç®—ä¸é”™çš„åšå®¢å°±å‡ºæ¥äº†ã€‚ è‡ªå·±æ—©å°±çŸ¥é“äº†è¿™ä¹ˆä¸ªå·¥å…·ï¼Œä»¥å‰çœ‹ DD çš„åšå®¢çš„æ—¶å€™å°±å‘ç°äº†è¿™ä¸ªå·¥å…·ï¼Œä½†æ˜¯å¾ˆä¹…æ²¡æ›´æ–°çš„å¾®ä¿¡å…¬ä¼—å·ï¼Œè‡ªå·±ä¹Ÿä¸æ€ä¹ˆæƒ³å†ç®¡ç†ã€‚ æœ‰äººå°±è¦é—®äº†ï¼Ÿé‚£ä¸ºå•¥ç°åœ¨åˆè¦å¼€å§‹è·Ÿæ–°äº†å‘¢ï¼Ÿ æˆ‘åªæƒ³è¯´ï¼šâ€œè´±äººå°±æ˜¯çŸ«æƒ…ï¼ï¼ï¼åˆæƒ³çæŠ˜è…¾ä¸‹ã€‚â€ï¼Œåæ­£è‡ªå·±çš„åšå®¢ä¹Ÿåœ¨ä¸æ–­çš„æ›´æ–°ï¼Œå¶å°”é¡ºå¸¦æŠŠæ–‡ç« åŒæ­¥åˆ°å¾®ä¿¡å…¬ä¼—å·å…¶å®ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚åœ¨å­¦æ ¡çš„æ—¶å€™æ—¶é—´æ¯”è¾ƒå¤šï¼Œé‚£æ—¶çœŸçš„æ˜¯æ—¶é—´æ¯”è¾ƒå¤šï¼Œåæ‚”æ²¡å¥½å¥½åšæŒè¿è¥ä¸‹æ¥ã€‚ç°åœ¨å·¥ä½œäº†ï¼Œè‡ªå·±å·¥ä½œä¹‹å¤–çš„æ—¶é—´è¾ƒå°‘ï¼Œé™¤äº†å­¦ä¹ ï¼Œå¶å°”å†™å†™åšå®¢ï¼Œå¨±ä¹æ—¶é—´æ¯”è¾ƒå°‘ï¼Œéƒ½æ˜¯å¤§å­¦æ—¶å®…çš„ã€‚ å‰æ®µæ—¶é—´è¢«äºº â€œå¿½æ‚ â€ è¯´ç»§ç»­æ›´æ–°å…¬ä¼—å·ï¼Œé‚£æ—¶åˆšå¥½ä¹Ÿå¿« 2018 å¹´äº†ï¼Œè‡ªå·±ä¹Ÿæƒ³ç»™è‡ªå·±å®šå‡ ä¸ªç›®æ ‡ï¼Œåœ¨å…ƒæ—¦çš„é‚£å¤©ï¼Œæƒ³æƒ³è¿˜æ˜¯ç»§ç»­æ›´æ–°å¾®ä¿¡å…¬ä¼—å·å§ï¼Œæ‰€ä»¥ä½ ä¹Ÿçœ‹å¾—åˆ°æœ€è¿‘æˆ‘çš„æ›´æ–°äº†ï¼Œå¯èƒ½æœ€è¿‘çš„æ›´æ–°æ¯”è¾ƒæœ‰è§„å¾‹ï¼Œå› ä¸ºè¿™äº›æ–‡ç« å¤§éƒ¨åˆ†æ˜¯ä¹‹å‰å°±å·²ç»å†™å¥½äº†çš„ï¼Œå·²ç»å‘è¿‡åœ¨æˆ‘çš„åšå®¢é‡Œäº†ã€‚ä¼°è®¡æŠŠè¿™äº›æ–‡ç« æ›´æ–°å®Œåï¼Œå°±ä¸ä¼šæ¯å¤©éƒ½æ›´æ–°æˆ‘è‡ªå·±çš„æ–‡ç« äº†ã€‚ å®šä½è¯´ä¸‹å¾®ä¿¡å…¬ä¼—å·çš„å®šä½å§ï¼š 1ã€æˆ‘çš„æŠ€æœ¯åšå®¢åº”è¯¥éƒ½ä¼šåŒæ­¥åœ¨è¿™é‡Œçš„ã€‚ 2ã€åˆ†äº«è‡ªå·±å¹³æ—¶çš„éšç¬”æ–‡ç« ã€‚ï¼ˆæ¯”å¦‚è¿™ç¯‡ã€‚ã€‚ã€‚ï¼‰ 3ã€é™¤äº†æŠ€æœ¯æ–‡ç« ï¼Œå½“ç„¶è¿˜æœ‰å¹³æ—¶è‡ªå·±çš„ å¥‡æ·«æŠ€å·§ ï¼ˆåŒ…æ‹¬ä½†ä¸é™äºå†™ä½œæ–¹å¼ã€æ¨èå¥½ç”¨çš„è½¯ä»¶ç­‰ï¼‰ 4ã€åˆ†äº«è‡ªå·±è§‰å¾—ä¸é”™çš„æ–‡ç« ï¼ˆåˆ«äººçš„ï¼Œå°½é‡å¾å¾—åŒæ„ï¼Œä¸€å®šä¼šå¤‡æ³¨åŸåˆ›åœ°å€çš„ï¼‰ 5ã€å¦‚æœä½ ä¹Ÿå†™åšå®¢ï¼Œä½†æ˜¯é˜…è¯»é‡å¾ˆå°çš„è¯ï¼Œå¯ä»¥è€ƒè™‘è‡ªèã€‚ï¼ˆæ³¨ï¼šæ–‡ç« æˆ‘å¯èƒ½ä¼šå®¡æ‰¹ï¼Œå¿…é¡»è¦è§‰å¾—ä¸é”™çš„æ–‡ç« ï¼‰ 6ã€åˆ†äº«ä¸€äº›å­¦ä¹ è§†é¢‘å’Œä¹¦ç± 7ã€åæœŸå¯èƒ½ä¼šæå·¥ä½œå†…æ¨ ã€‚ã€‚ã€‚ æš‚æ—¶åªæƒ³åˆ°è¿™äº›äº† é—®é¢˜æ¥äº†å› ä¸ºå·¥ä½œäº†ï¼Œæ‰€ä»¥æ—¶é—´å°‘ï¼Œè¿è¥è¿™å¾®ä¿¡å…¬ä¼—å·å¯èƒ½éœ€è¦èŠ±è´¹æˆ‘ä¸å°‘å·¥ä½œä¹‹å¤–çš„æ—¶é—´ã€‚ å¦‚æœå¯ä»¥çš„è¯ï¼Œæˆ‘å¸Œæœ›èƒ½æ‰¾åˆ°ä¸€ä¸ªèƒ½å¸®æˆ‘åˆ†æ‹…ç‚¹çš„æœ‹å‹ã€‚ æ³¨ï¼šæ— å¿çš„ï¼Œå¦‚æœä»‹æ„çš„è¯ï¼Œä¸‹é¢å°±ä¸ç”¨å†çœ‹äº†ã€‚ è¯´ç‚¹ç®€å•çš„è¦æ±‚å§ï¼š 1ã€ç»†å¿ƒã€è€å¿ƒçš„ boy or girl éƒ½è¡Œ 2ã€èµ·ç è¦çŸ¥é“ç‚¹ç¼–ç¨‹æ–¹é¢çš„çŸ¥è¯† 3ã€èƒ½åšæŒä¸‹æ¥ 4ã€å¯¹æ–°æŠ€æœ¯æœ‰æ•æ„Ÿçš„å—…è§‰ 5ã€æœ€åä¸€ç‚¹å°±æ˜¯ä½ è¦æœ‰ç‚¹æ—¶é—´äº†ï¼Œå¸Œæœ›ä¸è€½è¯¯ä½ å­¦ä¹  å†è¯´ä¸‹èƒ½ç»™ä½ å¸¦æ¥çš„ å¥½å¤„ å§ï¼š 1ã€è‚¯å®šèƒ½å¢åŠ ä½ çš„è¿è¥èƒ½åŠ›ï¼ˆå†å»äº’è”ç½‘å…¬å¸æŠ•è¿è¥å²—ä½ä¼šæœ‰ä¼˜åŠ¿çš„ï¼‰ 2ã€æœ¬äººä¸€å¼€å§‹ä¼šäº²è‡ªæ•™æˆè¯¥æ€ä¹ˆåšï¼Œæ‰€ä»¥æ²¡ç»éªŒçš„æœ‹å‹ä¸ç”¨æ‹…å¿ƒ 3ã€å¯ä»¥å¢åŠ å’Œå¤§ç‰›å‹¾æ­çš„æœºä¼šï¼Œä½ ä»¬æ‡‚çš„ã€‚ã€‚ 4ã€æœ¬äººå¯ä»¥äº²è‡ªä¼ æˆç»éªŒï¼ˆç¼–ç¨‹å’Œç”Ÿæ´»ç‚¹æ»´ç»éªŒï¼‰ å¦‚æœä½ æœ‰æ„æ„¿çš„è¯ï¼Œè¯·åŠ æˆ‘ QQ ï¼š 1041218129 èŠèŠå§ å…³æ³¨æˆ‘","tags":[{"name":"éšç¬”","slug":"éšç¬”","permalink":"http://yoursite.com/tags/éšç¬”/"}]},{"title":"Kafka å®‰è£…åŠå¿«é€Ÿå…¥é—¨","date":"2018-01-03T16:00:00.000Z","path":"2018/01/04/Kafka/","text":"ä»‹ç»å®˜ç½‘ï¼šhttp://kafka.apache.org/ Apache Kafkaæ˜¯åˆ†å¸ƒå¼å‘å¸ƒ-è®¢é˜…æ¶ˆæ¯ç³»ç»Ÿã€‚å®ƒæœ€åˆç”±LinkedInå…¬å¸å¼€å‘ï¼Œä¹‹åæˆä¸ºApacheé¡¹ç›®çš„ä¸€éƒ¨åˆ†ã€‚Kafkaæ˜¯ä¸€ç§å¿«é€Ÿã€å¯æ‰©å±•çš„ã€è®¾è®¡å†…åœ¨å°±æ˜¯åˆ†å¸ƒå¼çš„ï¼Œåˆ†åŒºçš„å’Œå¯å¤åˆ¶çš„æäº¤æ—¥å¿—æœåŠ¡ã€‚Apache Kafkaä¸ä¼ ç»Ÿæ¶ˆæ¯ç³»ç»Ÿç›¸æ¯”ï¼Œæœ‰ä»¥ä¸‹ä¸åŒï¼š å®ƒè¢«è®¾è®¡ä¸ºä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿï¼Œæ˜“äºå‘å¤–æ‰©å±•ï¼› å®ƒåŒæ—¶ä¸ºå‘å¸ƒå’Œè®¢é˜…æä¾›é«˜ååé‡ï¼› å®ƒæ”¯æŒå¤šè®¢é˜…è€…ï¼Œå½“å¤±è´¥æ—¶èƒ½è‡ªåŠ¨å¹³è¡¡æ¶ˆè´¹è€…ï¼› å®ƒå°†æ¶ˆæ¯æŒä¹…åŒ–åˆ°ç£ç›˜ï¼Œå› æ­¤å¯ç”¨äºæ‰¹é‡æ¶ˆè´¹ï¼Œä¾‹å¦‚ETLï¼Œä»¥åŠå®æ—¶åº”ç”¨ç¨‹åºã€‚ å®‰è£… kafkaä¸‹è½½åœ°å€ï¼šhttps://kafka.apache.org/downloads 1wget http://mirrors.shuosc.org/apache/kafka/1.0.0/kafka_2.11-1.0.0.tgz è§£å‹ï¼š123tar -zxvf kafka_2.11-1.0.0.tgzcd /usr/local/kafka_2.11-1.0.0/ ä¿®æ”¹ kafka-server çš„é…ç½®æ–‡ä»¶ 1vim /usr/local/kafka/config/server.properties ä¿®æ”¹å…¶ä¸­çš„ï¼š 12broker.id=1log.dir=/data/kafka/logs-1 åŠŸèƒ½éªŒè¯ï¼š1ã€å¯åŠ¨ zkä½¿ç”¨å®‰è£…åŒ…ä¸­çš„è„šæœ¬å¯åŠ¨å•èŠ‚ç‚¹ Zookeeper å®ä¾‹ï¼š 1bin/zookeeper-server-start.sh -daemon config/zookeeper.properties 2ã€å¯åŠ¨Kafka æœåŠ¡ä½¿ç”¨ kafka-server-start.sh å¯åŠ¨ kafka æœåŠ¡ï¼š 1bin/kafka-server-start.sh config/server.properties 3ã€åˆ›å»º topicä½¿ç”¨ kafka-topics.sh åˆ›å»ºå•åˆ†åŒºå•å‰¯æœ¬çš„ topic testï¼š 1bin/kafka-topics.sh --create --zookeeper localhost:2181 --replication-factor 1 --partitions 1 --topic test æŸ¥çœ‹ topic åˆ—è¡¨ï¼š 1bin/kafka-topics.sh --list --zookeeper localhost:2181 æŸ¥è¯¢åˆ›å»ºçš„ topic åˆ—è¡¨æŠ¥é”™ï¼š è§£å†³æ–¹æ³•: 1vim /etc/hosts å°† host é‡Œçš„ 12127.0.0.1 localhost localhost.localdomain localhost4 localhost4.localdomain4::1 localhost localhost.localdomain localhost6 localhost6.localdomain6 ä¿®æ”¹ä¸ºï¼š 12127.0.0.1 localhost localhost.localdomain localhost4 localhost4.localdomain4::1 ip6-localhost ip6-localhost.localdomain localhost6 localhost6.localdomain6 æ–¹æ³•å‚è€ƒï¼šzookeeper unable to open socket to localhost/0:0:0:0:0:0:0:1:2181 å†æ¬¡æŸ¥è¯¢å°±ä¸æŠ¥é”™äº†ã€‚ 4ã€äº§ç”Ÿæ¶ˆæ¯ä½¿ç”¨ kafka-console-producer.sh å‘é€æ¶ˆæ¯ï¼š 1bin/kafka-console-producer.sh --broker-list localhost:9092 --topic test 5ã€æ¶ˆè´¹æ¶ˆæ¯ä½¿ç”¨ kafka-console-consumer.sh æ¥æ”¶æ¶ˆæ¯å¹¶åœ¨ç»ˆç«¯æ‰“å°ï¼š 1bin/kafka-console-consumer.sh --zookeeper localhost:2181 --topic test --from-beginning æ‰“å¼€ä¸ªæ–°çš„å‘½ä»¤çª—å£æ‰§è¡Œä¸Šé¢å‘½ä»¤å³å¯æŸ¥çœ‹ä¿¡æ¯ï¼š 6ã€æŸ¥çœ‹æè¿° topics ä¿¡æ¯1bin/kafka-topics.sh --describe --zookeeper localhost:2181 --topic test ç»“æœï¼š 12Topic:test PartitionCount:1 ReplicationFactor:1 Configs: Topic: test Partition: 0 Leader: 1 Replicas: 1 Isr: 1 ç¬¬ä¸€è¡Œç»™å‡ºäº†æ‰€æœ‰åˆ†åŒºçš„æ‘˜è¦ï¼Œæ¯ä¸ªé™„åŠ è¡Œç»™å‡ºäº†å…³äºä¸€ä¸ªåˆ†åŒºçš„ä¿¡æ¯ã€‚ ç”±äºæˆ‘ä»¬åªæœ‰ä¸€ä¸ªåˆ†åŒºï¼Œæ‰€ä»¥åªæœ‰ä¸€è¡Œã€‚ â€œLeaderâ€: æ˜¯è´Ÿè´£ç»™å®šåˆ†åŒºçš„æ‰€æœ‰è¯»å–å’Œå†™å…¥çš„èŠ‚ç‚¹ã€‚ æ¯ä¸ªèŠ‚ç‚¹å°†æˆä¸ºåˆ†åŒºéšæœºé€‰æ‹©éƒ¨åˆ†çš„é¢†å¯¼è€…ã€‚ â€œReplicasâ€: æ˜¯å¤åˆ¶æ­¤åˆ†åŒºæ—¥å¿—çš„èŠ‚ç‚¹åˆ—è¡¨ï¼Œæ— è®ºå®ƒä»¬æ˜¯å¦æ˜¯é¢†å¯¼è€…ï¼Œæˆ–è€…å³ä½¿ä»–ä»¬å½“å‰å¤„äºæ´»åŠ¨çŠ¶æ€ã€‚ â€œIsrâ€: æ˜¯ä¸€ç»„â€œåŒæ­¥â€å‰¯æœ¬ã€‚è¿™æ˜¯å¤åˆ¶å“åˆ—è¡¨çš„å­é›†ï¼Œå½“å‰æ´»ç€å¹¶è¢«å¼•å¯¼åˆ°é¢†å¯¼è€…ã€‚ é›†ç¾¤é…ç½®Kafka æ”¯æŒä¸¤ç§æ¨¡å¼çš„é›†ç¾¤æ­å»ºï¼šå¯ä»¥åœ¨å•æœºä¸Šè¿è¡Œå¤šä¸ª broker å®ä¾‹æ¥å®ç°é›†ç¾¤ï¼Œä¹Ÿå¯åœ¨å¤šå°æœºå™¨ä¸Šæ­å»ºé›†ç¾¤ï¼Œä¸‹é¢ä»‹ç»ä¸‹å¦‚ä½•å®ç°å•æœºå¤š broker å®ä¾‹é›†ç¾¤ï¼Œå…¶å®å¾ˆç®€å•ï¼Œåªéœ€è¦å¦‚ä¸‹é…ç½®å³å¯ã€‚ å•æœºå¤šbroker é›†ç¾¤é…ç½®åˆ©ç”¨å•èŠ‚ç‚¹éƒ¨ç½²å¤šä¸ª brokerã€‚ ä¸åŒçš„ broker è®¾ç½®ä¸åŒçš„ idï¼Œç›‘å¬ç«¯å£åŠæ—¥å¿—ç›®å½•ã€‚ ä¾‹å¦‚ï¼š 1234567cp config/server.properties config/server-2.propertiescp config/server.properties config/server-3.propertiesvim config/server-2.propertiesvim config/server-3.properties ä¿®æ”¹ ï¼š 12345broker.id=2listeners = PLAINTEXT://your.host.name:9093log.dir=/data/kafka/logs-2 å’Œ 12345broker.id=3listeners = PLAINTEXT://your.host.name:9094log.dir=/data/kafka/logs-3 å¯åŠ¨KafkaæœåŠ¡ï¼š 123bin/kafka-server-start.sh config/server-2.properties &amp;bin/kafka-server-start.sh config/server-3.properties &amp; è‡³æ­¤ï¼Œå•æœºå¤šbrokerå®ä¾‹çš„é›†ç¾¤é…ç½®å®Œæ¯•ã€‚ å¤šæœºå¤š broker é›†ç¾¤é…ç½®åˆ†åˆ«åœ¨å¤šä¸ªèŠ‚ç‚¹æŒ‰ä¸Šè¿°æ–¹å¼å®‰è£… Kafkaï¼Œé…ç½®å¯åŠ¨å¤šä¸ª Zookeeper å®ä¾‹ã€‚ å‡è®¾ä¸‰å°æœºå™¨ IP åœ°å€æ˜¯ ï¼š 192.168.153.135ï¼Œ 192.168.153.136ï¼Œ 192.168.153.137 åˆ†åˆ«é…ç½®å¤šä¸ªæœºå™¨ä¸Šçš„ Kafka æœåŠ¡ï¼Œè®¾ç½®ä¸åŒçš„ broker idï¼Œzookeeper.connect è®¾ç½®å¦‚ä¸‹: 1vim config/server.properties é‡Œé¢çš„ zookeeper.connect ä¿®æ”¹ä¸ºï¼š 1zookeeper.connect=192.168.153.135:2181,192.168.153.136:2181,192.168.153.137:2181 ä½¿ç”¨ Kafka Connect æ¥å¯¼å…¥/å¯¼å‡ºæ•°æ®ä»æ§åˆ¶å°å†™å…¥æ•°æ®å¹¶å°†å…¶å†™å›æ§åˆ¶å°æ˜¯ä¸€ä¸ªæ–¹ä¾¿çš„èµ·ç‚¹ï¼Œä½†æ‚¨å¯èƒ½æƒ³è¦ä½¿ç”¨å…¶ä»–æ¥æºçš„æ•°æ®æˆ–å°†æ•°æ®ä» Kafka å¯¼å‡ºåˆ°å…¶ä»–ç³»ç»Ÿã€‚å¯¹äºè®¸å¤šç³»ç»Ÿï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ Kafka Connect æ¥å¯¼å…¥æˆ–å¯¼å‡ºæ•°æ®ï¼Œè€Œä¸å¿…ç¼–å†™è‡ªå®šä¹‰é›†æˆä»£ç ã€‚ Kafka Connect æ˜¯ Kafka åŒ…å«çš„ä¸€ä¸ªå·¥å…·ï¼Œå¯ä»¥å°†æ•°æ®å¯¼å…¥å’Œå¯¼å‡ºåˆ° Kafkaã€‚å®ƒæ˜¯ä¸€ä¸ªå¯æ‰©å±•çš„å·¥å…·ï¼Œè¿è¡Œ è¿æ¥å™¨ï¼Œå®ç°ä¸å¤–éƒ¨ç³»ç»Ÿäº¤äº’çš„è‡ªå®šä¹‰é€»è¾‘ã€‚åœ¨è¿™ä¸ªå¿«é€Ÿå…¥é—¨ä¸­ï¼Œæˆ‘ä»¬å°†çœ‹åˆ°å¦‚ä½•ä½¿ç”¨ç®€å•çš„è¿æ¥å™¨è¿è¡Œ Kafka Connectï¼Œè¿™äº›è¿æ¥å™¨å°†æ•°æ®ä»æ–‡ä»¶å¯¼å…¥åˆ° Kafka topicï¼Œå¹¶å°†æ•°æ®ä» Kafka topic å¯¼å‡ºåˆ°æ–‡ä»¶ã€‚ é¦–å…ˆï¼Œæˆ‘ä»¬å°†é€šè¿‡åˆ›å»ºä¸€äº›ç§å­æ•°æ®å¼€å§‹æµ‹è¯•ï¼š 1echo -e &quot;zhisheng\\ntian&quot; &gt; test.txt æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†å¯åŠ¨ä¸¤ä¸ªä»¥ç‹¬ç«‹æ¨¡å¼è¿è¡Œçš„è¿æ¥å™¨ï¼Œè¿™æ„å‘³ç€å®ƒä»¬å°†åœ¨å•ä¸ªæœ¬åœ°ä¸“ç”¨è¿›ç¨‹ä¸­è¿è¡Œã€‚æˆ‘ä»¬æä¾›ä¸‰ä¸ªé…ç½®æ–‡ä»¶ä½œä¸ºå‚æ•°ã€‚é¦–å…ˆæ˜¯ Kafka Connect è¿‡ç¨‹çš„é…ç½®ï¼ŒåŒ…å«å¸¸è§çš„é…ç½®ï¼Œä¾‹å¦‚è¦è¿æ¥çš„ Kafka ä»£ç†ä»¥åŠæ•°æ®çš„åºåˆ—åŒ–æ ¼å¼ã€‚å…¶ä½™çš„é…ç½®æ–‡ä»¶éƒ½æŒ‡å®šä¸€ä¸ªè¦åˆ›å»ºçš„è¿æ¥å™¨ã€‚è¿™äº›æ–‡ä»¶åŒ…æ‹¬å”¯ä¸€çš„è¿æ¥å™¨åç§°ï¼Œè¦å®ä¾‹åŒ–çš„è¿æ¥å™¨ç±»ä»¥åŠè¿æ¥å™¨æ‰€éœ€çš„ä»»ä½•å…¶ä»–é…ç½®ã€‚ 1bin/connect-standalone.sh config/connect-standalone.properties config/connect-file-source.properties config/connect-file-sink.properties Kafka é™„å¸¦çš„è¿™äº›ç¤ºä¾‹é…ç½®æ–‡ä»¶ä½¿ç”¨æ‚¨ä¹‹å‰å¯åŠ¨çš„é»˜è®¤æœ¬åœ°ç¾¤é›†é…ç½®ï¼Œå¹¶åˆ›å»ºä¸¤ä¸ªè¿æ¥å™¨ï¼šç¬¬ä¸€ä¸ªæ˜¯æºè¿æ¥å™¨ï¼Œç”¨äºè¯»å–è¾“å…¥æ–‡ä»¶ä¸­çš„è¡Œï¼Œå¹¶å°†æ¯ä¸ªè¿æ¥ç”Ÿæˆä¸º Kafka topicï¼Œç¬¬äºŒä¸ªä¸ºè¿æ¥å™¨å®ƒä» Kafka topic è¯»å–æ¶ˆæ¯ï¼Œå¹¶åœ¨è¾“å‡ºæ–‡ä»¶ä¸­äº§ç”Ÿæ¯è¡Œæ¶ˆæ¯ã€‚ åœ¨å¯åŠ¨è¿‡ç¨‹ä¸­ï¼Œæ‚¨ä¼šçœ‹åˆ°ä¸€äº›æ—¥å¿—æ¶ˆæ¯ï¼Œå…¶ä¸­ä¸€äº›æŒ‡ç¤ºè¿æ¥å™¨æ­£åœ¨å®ä¾‹åŒ–ã€‚Kafka Connect è¿›ç¨‹å¯åŠ¨åï¼Œæºè¿æ¥å™¨åº”è¯¥å¼€å§‹è¯»å– test.txt topic connect-testï¼Œå¹¶å°†å…¶ç”Ÿæˆ topic ï¼Œå¹¶ä¸”æ¥æ”¶å™¨è¿æ¥å™¨åº”è¯¥å¼€å§‹è¯»å– topic ä¸­çš„æ¶ˆæ¯ connect-test å¹¶å°†å…¶å†™å…¥æ–‡ä»¶ test.sink.txtã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡æ£€æŸ¥è¾“å‡ºæ–‡ä»¶çš„å†…å®¹æ¥éªŒè¯é€šè¿‡æ•´ä¸ªç®¡é“ä¼ è¾“çš„æ•°æ®ï¼š æ•°æ®å­˜å‚¨åœ¨ Kafka topic ä¸­ connect-testï¼Œå› æ­¤æˆ‘ä»¬ä¹Ÿå¯ä»¥è¿è¡Œæ§åˆ¶å°ä½¿ç”¨è€…æ¥æŸ¥çœ‹ topic ä¸­çš„æ•°æ® 1bin/kafka-console-consumer.sh --bootstrap-server localhost:9092 --topic connect-test --from-beginning è¿æ¥å™¨ç»§ç»­å¤„ç†æ•°æ®ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å°†æ•°æ®æ·»åŠ åˆ°æ–‡ä»¶ä¸­ï¼Œå¹¶çœ‹åˆ°å®ƒåœ¨ç®¡é“ä¸­ç§»åŠ¨ï¼š 1234echo zhishengtian&gt;&gt; test.txtecho zhishengtian2&gt;&gt; test.txtecho zhishengtian3&gt;&gt; test.txtecho zhishengtian4&gt;&gt; test.txt ä½¿ç”¨ Kafka æµæ¥å¤„ç†æ•°æ®Kafka Streams æ˜¯ç”¨äºæ„å»ºå…³é”®ä»»åŠ¡å®æ—¶åº”ç”¨ç¨‹åºå’Œå¾®æœåŠ¡çš„å®¢æˆ·ç«¯åº“ï¼Œè¾“å…¥å’Œ/æˆ–è¾“å‡ºæ•°æ®å­˜å‚¨åœ¨ Kafka é›†ç¾¤ä¸­ã€‚Kafka Streams ç»“åˆäº†åœ¨å®¢æˆ·ç«¯ç¼–å†™å’Œéƒ¨ç½²æ ‡å‡† Java å’Œ Scala åº”ç”¨ç¨‹åºçš„ç®€å•æ€§ä»¥åŠ Kafka æœåŠ¡å™¨ç«¯é›†ç¾¤æŠ€æœ¯çš„ä¼˜åŠ¿ï¼Œä½¿è¿™äº›åº”ç”¨ç¨‹åºå…·æœ‰é«˜åº¦å¯ä¼¸ç¼©æ€§ï¼Œå¼¹æ€§ï¼Œå®¹é”™æ€§ï¼Œåˆ†å¸ƒå¼ç­‰ç‰¹æ€§ã€‚ å¯å‚è€ƒå®˜ç½‘å…¥é—¨æ¡ˆä¾‹ï¼šhttp://kafka.apache.org/10/documentation/streams/quickstart å‚è€ƒ1ã€åœ¨CentOS 7ä¸Šå®‰è£…Kafka 2ã€http://kafka.apache.org/10/documentation/streams/quickstart å…³æ³¨æˆ‘ æœ€åè½¬è½½è¯·æ³¨æ˜åŸåˆ›åœ°å€ä¸ºï¼šhttp://www.54tianzhisheng.cn/2018/01/04/Kafka/","tags":[{"name":"Kafka","slug":"Kafka","permalink":"http://yoursite.com/tags/Kafka/"}]},{"title":"Windows ä¸‹å®‰è£… Consul","date":"2017-12-26T16:00:00.000Z","path":"2017/12/27/consul-install/","text":"å‰æä»åˆšå·¥ä½œå°±å¼€å§‹æ¥è§¦ Consulï¼Œä¸­é€”è‡ªå·±ä¹Ÿæœ‰ä¸¤ä¸ªé¡¹ç›®å’Œ Consul æœ‰å…³ï¼Œåé¢æœ‰æœºä¼šå†è®²è®²ï¼Œç½‘ä¸Šå…³äºè¿™ä¸ªçš„èµ„æ–™è¿˜æ¯”è¾ƒå°‘ã€‚å› ä¸ºæ˜å¤©æœ‰ Consul çš„æŠ€æœ¯åˆ†äº«ï¼Œæ‰€ä»¥è‡ªå·±ä»Šå¤©ä¸‹åˆåœ¨å®˜ç½‘çœ‹äº†ä¸‹ç›¸å…³çš„ä»‹ç»ã€‚ ä»‹ç»Consul æ˜¯ä¸€ä¸ªæ”¯æŒå¤šæ•°æ®ä¸­å¿ƒåˆ†å¸ƒå¼é«˜å¯ç”¨çš„æœåŠ¡å‘ç°å’Œé…ç½®å…±äº«çš„æœåŠ¡è½¯ä»¶, ç”± HashiCorp å…¬å¸ç”¨ Go è¯­è¨€å¼€å‘, åŸºäº Mozilla Public License 2.0 çš„åè®®è¿›è¡Œå¼€æºã€‚Consul æ”¯æŒå¥åº·æ£€æŸ¥, å¹¶å…è®¸ HTTP å’Œ DNS åè®®è°ƒç”¨ API å­˜å‚¨é”®å€¼å¯¹ã€‚å‘½ä»¤è¡Œè¶…çº§å¥½ç”¨çš„è™šæ‹Ÿæœºç®¡ç†è½¯ä»¶ vgrant ä¹Ÿæ˜¯ HashiCorp å…¬å¸å¼€å‘çš„äº§å“ã€‚ä¸€è‡´æ€§åè®®é‡‡ç”¨ Raft ç®—æ³•, ç”¨æ¥ä¿è¯æœåŠ¡çš„é«˜å¯ç”¨ï¼Œ ä½¿ç”¨ GOSSIP åè®®ç®¡ç†æˆå‘˜å’Œå¹¿æ’­æ¶ˆæ¯, å¹¶ä¸”æ”¯æŒ ACL è®¿é—®æ§åˆ¶ã€‚ ä¸‹è½½å®‰è£…å»å®˜ç½‘ä¸‹è½½ï¼šhttps://www.consul.io/downloads.html å¾—åˆ°ä¸€ä¸ª zip å‹ç¼©åŒ… åœ¨ä½ æƒ³è¦å®‰è£…çš„ä½ç½®è§£å‹å°±è¡Œï¼Œåªæœ‰ä¸€ä¸ª consul.exe æ–‡ä»¶ï¼ˆæˆ‘çš„è§£å‹ä½ç½®æ˜¯ï¼šD:\\softwareï¼‰ è®¾ç½®ç¯å¢ƒå˜é‡ï¼ˆåœ¨ path ä¸­æ–°å¢ä¸€æ¡ï¼‰ï¼š D:\\software cmd å‘½ä»¤çª—å£å¯åŠ¨ï¼š 1consul agent -dev consul è‡ªå¸¦ UI ç•Œé¢ï¼Œæ‰“å¼€ç½‘å€ï¼šhttp://localhost:8500 ï¼Œå¯ä»¥çœ‹åˆ°å½“å‰æ³¨å†Œçš„æœåŠ¡ç•Œé¢ã€‚ Consul ä¼˜åŠ¿ ä½¿ç”¨ Raft ç®—æ³•æ¥ä¿è¯ä¸€è‡´æ€§, æ¯”å¤æ‚çš„ Paxos ç®—æ³•æ›´ç›´æ¥. ç›¸æ¯”è¾ƒè€Œè¨€, zookeeper é‡‡ç”¨çš„æ˜¯ Paxos, è€Œ etcd ä½¿ç”¨çš„åˆ™æ˜¯ Raft. æ”¯æŒå¤šæ•°æ®ä¸­å¿ƒï¼Œå†…å¤–ç½‘çš„æœåŠ¡é‡‡ç”¨ä¸åŒçš„ç«¯å£è¿›è¡Œç›‘å¬ã€‚ å¤šæ•°æ®ä¸­å¿ƒé›†ç¾¤å¯ä»¥é¿å…å•æ•°æ®ä¸­å¿ƒçš„å•ç‚¹æ•…éšœ,è€Œå…¶éƒ¨ç½²åˆ™éœ€è¦è€ƒè™‘ç½‘ç»œå»¶è¿Ÿ, åˆ†ç‰‡ç­‰æƒ…å†µç­‰. zookeeper å’Œ etcd å‡ä¸æä¾›å¤šæ•°æ®ä¸­å¿ƒåŠŸèƒ½çš„æ”¯æŒ. æ”¯æŒå¥åº·æ£€æŸ¥. etcd ä¸æä¾›æ­¤åŠŸèƒ½. æ”¯æŒ http å’Œ dns åè®®æ¥å£. zookeeper çš„é›†æˆè¾ƒä¸ºå¤æ‚, etcd åªæ”¯æŒ http åè®®. å®˜æ–¹æä¾›webç®¡ç†ç•Œé¢, etcd æ— æ­¤åŠŸèƒ½. ç»¼åˆæ¯”è¾ƒ, Consul ä½œä¸ºæœåŠ¡æ³¨å†Œå’Œé…ç½®ç®¡ç†çš„æ–°æ˜Ÿ, æ¯”è¾ƒå€¼å¾—å…³æ³¨å’Œç ”ç©¶. æœ€å æœ¬æ–‡é¦–å‘äºï¼šzhishengçš„åšå®¢ åœ°å€ä¸ºï¼šhttp://www.54tianzhisheng.cn/2017/12/27/consul-install/ è½¬è½½è¯·æ³¨æ˜åœ°å€ï¼","tags":[{"name":"Consul","slug":"Consul","permalink":"http://yoursite.com/tags/Consul/"}]},{"title":"Elasticsearch ç³»åˆ—æ–‡ç« ï¼ˆäº”ï¼‰ï¼šELK å®æ—¶æ—¥å¿—åˆ†æå¹³å°ç¯å¢ƒæ­å»º","date":"2017-12-24T16:00:00.000Z","path":"2017/12/25/ELK/","text":"ç®€å•ä»‹ç»ELKï¼ˆElasticSearch, Logstash, Kibanaï¼‰ï¼Œä¸‰è€…ç»„åˆåœ¨ä¸€èµ·æ­å»ºå®æ—¶çš„æ—¥å¿—åˆ†æå¹³å°ï¼Œç›®å‰å¥½å¤šå…¬å¸éƒ½æ˜¯è¿™å¥—ï¼ Elasticsearch æ˜¯ä¸ªå¼€æºåˆ†å¸ƒå¼æœç´¢å¼•æ“ï¼Œå®ƒçš„ç‰¹ç‚¹æœ‰ï¼šåˆ†å¸ƒå¼ï¼Œé›¶é…ç½®ï¼Œè‡ªåŠ¨å‘ç°ï¼Œç´¢å¼•è‡ªåŠ¨åˆ†ç‰‡ï¼Œç´¢å¼•å‰¯æœ¬æœºåˆ¶ï¼Œrestful é£æ ¼æ¥å£ï¼Œå¤šæ•°æ®æºï¼Œè‡ªåŠ¨æœç´¢è´Ÿè½½ç­‰ã€‚ Logstash æ˜¯ä¸€ä¸ªå®Œå…¨å¼€æºçš„å·¥å…·ï¼Œä»–å¯ä»¥å¯¹ä½ çš„æ—¥å¿—è¿›è¡Œæ”¶é›†ã€è¿‡æ»¤ï¼Œå¹¶å°†å…¶å­˜å‚¨ä¾›ä»¥åä½¿ç”¨ï¼ˆå¦‚ï¼Œæœç´¢ï¼‰ã€‚ Kibana ä¹Ÿæ˜¯ä¸€ä¸ªå¼€æºå’Œå…è´¹çš„å·¥å…·ï¼Œå®ƒ Kibana å¯ä»¥ä¸º Logstash å’Œ ElasticSearch æä¾›çš„æ—¥å¿—åˆ†æå‹å¥½çš„ Web ç•Œé¢ï¼Œå¯ä»¥å¸®åŠ©æ‚¨æ±‡æ€»ã€åˆ†æå’Œæœç´¢é‡è¦æ•°æ®æ—¥å¿—ã€‚ å®‰è£… ESã€‚ã€‚ã€‚è¿™ä¸ªçœç•¥ï¼Œä¸ bb äº†ï¼Œä»¥å‰å†™è¿‡ã€‚ã€‚ã€‚ä¼ é€é—¨ï¼šhttp://www.54tianzhisheng.cn/2017/09/09/Elasticsearch-install/ å®‰è£… LogstashELK æ•´å¥—ç¯å¢ƒæ­å»ºç‰ˆæœ¬å¾ˆå…³é”®ï¼Œæœ€å¥½å…¨ç»Ÿä¸€ä¸€ä¸ªç‰ˆæœ¬ï¼Œå¦åˆ™å‡ºå•¥é—®é¢˜å°±ä¸å¤ªå¥½æ‰¾äº†ã€‚è¿™æ˜¯æˆ‘è§è¿‡ç‰ˆæœ¬ç»Ÿä¸€æœ€ä¸¥æ ¼çš„äº†ã€‚è€Œå·² ES ç‰ˆæœ¬å‡äº†åï¼Œå…¶ä»–çš„éƒ½è¦éƒ½è¦å‡çº§ï¼ŒåŒ…æ‹¬å…¶æ’ä»¶ã€‚å‡çº§ä»£ä»·æŒºå¤§çš„ï¼Œæœ€å¥½ä¸€å¼€å§‹å°±å®šä½å¥½è¦å®‰è£…å“ªä¸ªç‰ˆæœ¬ï¼ åœ¨å®˜ç½‘ä¸‹å¥½å®‰è£…åŒ…åä¼ åˆ° Linux ä¸Šï¼Œè¿™æ˜¯é€Ÿåº¦æœ€å¿«çš„ã€‚ 1234567891011121314151617181920212223242526åœ¨ /usr/local ç›®å½•ä¸‹è§£å‹ï¼štar -zxvf logstash-5.5.2.tar.gzè¿›å…¥è§£å‹åçš„ç›®å½•ï¼šcd /usr/local/logstash-5.5.2/binæ–°å¢é…ç½®æ–‡ä»¶ï¼švim logstash.confå¢åŠ ï¼šinput&#123; file&#123; path =&gt; [&quot;/var/log/*.log&quot;] &#125;&#125;output&#123; elasticsearch&#123; hosts =&gt; [&quot;192.168.153.135:9200&quot;] index =&gt; &quot;logstash__log&quot; &#125;&#125; Logstash çš„å¯åŠ¨æ–¹å¼æ˜¯ï¼š 123åœ¨ /usr/local/logstash-5.5.2/bin ç›®å½•ä¸‹è¿è¡Œï¼š./logstash -f logstash.conf å®‰è£… KibanaåŒæ ·ï¼Œå®˜ç½‘ä¸‹å¥½å®‰è£…åŒ…ï¼Œä¸Šä¼ åˆ° Linuxã€‚ 1234567891011è§£å‹ï¼štar -zxvf kibana-5.5.2-linux-x86_64.tar.gzä¿®æ”¹é…ç½®æ–‡ä»¶ kibana-5.5.2/config/kibana.yml å¦‚ä¸‹ï¼šServer.host //é…ç½®æœºå™¨ip/hostnameServer.name //æ­¤kibanaæœåŠ¡çš„åç§°elasticsearch.url //es masterèŠ‚ç‚¹url Kibana å¯åŠ¨æ–¹å¼ï¼š 123åœ¨ /usr/local/kibana-5.5.2/bin ç›®å½•ä¸‹è¿è¡Œï¼š./kibana Webç•Œé¢è®¿é—®: http://ip:5601 æ­¤æ—¶éœ€è¦è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ç™»å½•,é»˜è®¤åˆ†åˆ«æ˜¯ elastic å’Œ changeme X-PackX-Pack æ˜¯ä¸€ä¸ª Elastic Stack çš„æ‰©å±•ï¼Œå°†å®‰å…¨ï¼Œè­¦æŠ¥ï¼Œç›‘æ§ï¼ŒæŠ¥å‘Šå’Œå›¾å½¢åŠŸèƒ½åŒ…å«åœ¨ä¸€ä¸ªæ˜“äºå®‰è£…çš„è½¯ä»¶åŒ…ä¸­ã€‚ ES å’Œ Kibana éƒ½å¯å®‰è£…ã€‚ æ’ä»¶ x-pack-5.5.2.zip ä¾æ—§å®˜ç½‘ä¸‹ã€‚ ES å®‰è£… X-Pack123cd /usr/local/elasticsearch/bin./elasticsearch-plugin install file:///opt/es/x-pack-5.5.2.zip å¦‚æœæˆåŠŸï¼šæ˜¾ç¤ºå¦‚ä¸‹ 123456789101112131415161718192021222324252627282930[root@node1 bin]# ./elasticsearch-plugin install file:///opt/es/x-pack-5.5.2.zip-&gt; Downloading file:///opt/es/x-pack-5.5.2.zip[=================================================] 100%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ WARNING: plugin requires additional permissions @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@* java.io.FilePermission \\\\.\\pipe\\* read,write* java.lang.RuntimePermission accessClassInPackage.com.sun.activation.registries* java.lang.RuntimePermission getClassLoader* java.lang.RuntimePermission setContextClassLoader* java.lang.RuntimePermission setFactory* java.security.SecurityPermission createPolicy.JavaPolicy* java.security.SecurityPermission getPolicy* java.security.SecurityPermission putProviderProperty.BC* java.security.SecurityPermission setPolicy* java.util.PropertyPermission * read,write* java.util.PropertyPermission sun.nio.ch.bugLevel write* javax.net.ssl.SSLPermission setHostnameVerifierSee http://docs.oracle.com/javase/8/docs/technotes/guides/security/permissions.htmlfor descriptions of what these permissions allow and the associated risks.Continue with installation? [y/N]y@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ WARNING: plugin forks a native controller @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@This plugin launches a native controller that is not subject to the Javasecurity manager nor to system call filters.Continue with installation? [y/N]y-&gt; Installed x-pack Kibana å®‰è£… X-Pack123cd /usr/local/kibana-5.5.2/bin./kibana-plugin install file:///opt/es/x-pack-5.5.2.zip å®‰è£…æˆåŠŸå¦‚ä¸‹ï¼š 123456789[root@node1 bin]# ./kibana-plugin install file:///opt/es/x-pack-5.5.2.zipAttempting to transfer from file:///opt/es/x-pack-5.5.2.zipTransferring 159867054 bytes....................Transfer completeRetrieving metadata from plugin archiveExtracting plugin archiveExtraction completeOptimizing and caching browser bundles...Plugin installation complete å¯ç”¨ x-pack å®‰å…¨æœºåˆ¶åˆ†åˆ«åœ¨ kibana.yml å’Œ elasticsearch.yml ä¸­åŠ å…¥ä¸‹è¡Œ 1xpack.security.enabled: true è¿™æ ·åï¼Œä½ å†æ‰“å¼€ ES çš„ head ç•Œé¢å’Œ Kibana ç®¡ç†ç•Œé¢å°±éœ€è¦è¾“å…¥è´¦å·å¯†ç äº†ã€‚ ä¸Šå›¾å³è¾¹æ˜¯å®‰è£… X-Pack åçš„ï¼ŒåŠŸèƒ½å¤šäº†å‡ ä¸ªã€‚ æœ€åç¯å¢ƒæ­å»ºå¾ˆç®€å•ï¼Œåé¢å¦‚æœæœ‰æ—¶é—´çš„è¯å¯ä»¥å†è®²è®²åœ¨ Kibana çš„ Dev Tools ä¸Šæ„å»º ES çš„ JSON ä¸²æ¥å¯¹ ES è¿›è¡Œæ“ä½œã€‚ æˆ‘è¿˜å†™è¿‡ ES ç›¸å…³çš„æ–‡ç« ï¼š 1ã€Elasticsearch é»˜è®¤åˆ†è¯å™¨å’Œä¸­åˆ†åˆ†è¯å™¨ä¹‹é—´çš„æ¯”è¾ƒåŠä½¿ç”¨æ–¹æ³• 2ã€å…¨æ–‡æœç´¢å¼•æ“ Elasticsearch é›†ç¾¤æ­å»ºå…¥é—¨æ•™ç¨‹ 3ã€ElasticSearch é›†ç¾¤ç›‘æ§ 4ã€ElasticSearch å•ä¸ªèŠ‚ç‚¹ç›‘æ§ ç»“å°¾ æœ¬æ–‡é¦–å‘äºï¼šzhisheng çš„åšå®¢ è½¬è½½è¯·æ³¨æ˜åœ°å€ï¼šhttp://www.54tianzhisheng.cn/2017/12/25/ELK/","tags":[{"name":"ElasticSearch","slug":"ElasticSearch","permalink":"http://yoursite.com/tags/ElasticSearch/"},{"name":"LogStash","slug":"LogStash","permalink":"http://yoursite.com/tags/LogStash/"},{"name":"Kibana","slug":"Kibana","permalink":"http://yoursite.com/tags/Kibana/"}]},{"title":"Hexo + yilia æ­å»ºåšå®¢å¯èƒ½ä¼šé‡åˆ°çš„æ‰€æœ‰ç–‘é—®","date":"2017-12-17T16:00:00.000Z","path":"2017/12/18/hexo-yilia/","text":"å‰æä¸ºä»€ä¹ˆä¼šå†æ¬¡å†™è¿™ç¯‡åšå®¢ï¼Ÿè¯·çœ‹ä¸‹å›¾ï¼š è¿™æ˜¯æˆ‘åšå®¢æœç´¢å¼•æ“çš„ä¸»è¦å…³é”®å­—ã€‚ä¸ºä»€ä¹ˆä¼šæœ‰è¿™äº›å…³é”®å­—å‘¢ï¼Ÿ æˆ‘çŒœä¼°è®¡æ˜¯æ›¾ç»å†™äº†å‡ ç¯‡å…³äºæ­å»ºåšå®¢çš„æ–‡ç« ï¼Œè¢«æœç´¢å¼•æ“æ”¶å…¥äº†ï¼Œæ‰€ä»¥æœç´¢å¼•æ“æ‰ä¼šå°†è¿™äº›æµé‡å¼•å¯¼è‡³æˆ‘çš„åšå®¢ï¼Œæ–‡ç« å¦‚ä¸‹ï¼š 1ã€åˆ©ç”¨Github Page æ­å»ºä¸ªäººåšå®¢ç½‘ç«™ 2ã€Hexo + yilia ä¸»é¢˜å®ç°æ–‡ç« ç›®å½• 3ã€Github pages + Hexo åšå®¢ yilia ä¸»é¢˜ä½¿ç”¨ç•…è¨€è¯„è®ºç³»ç»Ÿ é‚£è¿˜æœ‰è¿™ä¹ˆå¤šäººæœç´¢è¿™äº›å…³é”®å­—ï¼Ÿè¯´æ˜ç¢°åˆ°é—®é¢˜çš„è¿˜æœ‰ä¸å°‘ï¼Œæ‰€ä»¥æ‰æœ‰äº†è¿™ç¯‡æ–‡ç« çš„è¯ç”Ÿï¼ é—®é¢˜è§£ç­”1ã€hexo yilia æ–‡ç« ç›®å½• è¿™ä¸ªæˆ‘ä»¥å‰å†™è¿‡ä¸€ç¯‡æ–‡ç« ï¼šHexo + yilia ä¸»é¢˜å®ç°æ–‡ç« ç›®å½• é‚£ç¯‡æ–‡ç« å†™äº†æˆ‘é‚£ä¸ªç‰ˆæœ¬çš„ yilia æ€ä¹ˆæ·»åŠ æ–‡ç« ç›®å½•çš„ï¼Œä½†æ˜¯å¥½åƒæ–°ç‰ˆæœ¬çš„ yilia å·²ç»è‡ªå¸¦äº†è¿™ä¸ªæ–‡ç« ç›®å½•åŠŸèƒ½ã€‚æ‰€ä»¥å¦‚æœä½ æ˜¯ä½¿ç”¨çš„æ–°ç‰ˆæœ¬çš„ yilia ï¼Œè¯·ä¸è¦åšä»»ä½•ä¿®æ”¹ï¼ä½†æ˜¯å‰å‡ å¤©æœ‰äººç»™æˆ‘å‘äº†ä¸ªå›¾ç‰‡ï¼Œåˆå¥½åƒæœ‰ç‚¹åŒºåˆ«ï¼Œå¦‚æœå®åœ¨æœ‰ä¸åŒçš„è¯ï¼Œè¯·åŠ ç¾¤ 528776268 æ‰¾æˆ‘è¦æˆ‘é‚£ä¸ªä¸»é¢˜ç‰ˆæœ¬çš„æ‰€æœ‰é…ç½®æ–‡ä»¶ã€‚å†æ¬¡è¯´æ˜ï¼Œæˆ‘å‰ç«¯ä¹Ÿä¸æ˜¯å¾ˆæ“…é•¿ï¼Œæˆ‘å†™é‚£ç¯‡æ–‡ç« ä¹Ÿæ˜¯å‚è€ƒå…¶ä»–åšå®¢çš„ä¿®æ”¹ï¼Œæ‰€ä»¥æ— èƒ½ä¸ºåŠ›äº†ã€‚æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œå»ºè®®ç›´æ¥åœ¨ yilia ä¸»é¢˜çš„ GitHub å»æ‰¾ä½œè€…èŠï¼ 2ã€Hexo yilia éšç¬” éšç¬”å¦‚ä¸‹ï¼š å¯¹æ­¤æƒ³è¯´çš„å°±æ˜¯ï¼Œâ€œéšç¬”â€ å…¶å®å°±æ˜¯æ–‡ç« çš„ä¸€ä¸ª tags(æ ‡ç­¾)ï¼Œå¦‚æœä½ æƒ³æŠŠæ–‡ç« ä½œä¸ºéšç¬”çš„è¯ï¼Œè¯·åœ¨æ–‡ç« çš„é¦–éƒ¨å†™ä¸ª tags ä¸º â€œéšç¬”â€ çš„æ ‡ç­¾ã€‚å¦‚ä¸‹å›¾ï¼š æ³¨æ„ï¼š- åé¢æœ‰ä¸ªç©ºæ ¼ã€‚ 3ã€yilia ä¸»é¢˜åˆ†ç±»å®ç° å¦‚æœè¦æœ‰å¤šä¸ªæ ‡ç­¾ï¼Œå¯ä»¥å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š 4ã€hexo yilia è®¾ç½®æ–‡ç« æ˜¾ç¤ºé•¿åº¦ï¼Œä¸å±•å¼€å…¨æ–‡ yilia ä¸»é¢˜ä¸­å¯ä»¥ç”¨ &lt;!-- more --&gt; æˆªå–æ–‡ç« çš„æ˜¾ç¤ºé•¿åº¦ï¼Œå¦‚æœä½ æƒ³åœ¨å“ªæˆªå–æ–‡ç« ï¼Œå°±åœ¨é‚£è¡Œä½¿ç”¨è¯¥å­—ç¬¦ã€‚ 5ã€yilia æ·»åŠ é˜…è¯»é‡ æˆ‘æ·»åŠ çš„æ˜¯ â€œä¸è’œå­â€ è®¡æ•°ï¼Œå®ƒå¯ä»¥åŒºåˆ† pv/uv çš„ç»Ÿè®¡æ–¹å¼ï¼Œç»Ÿè®¡æ›´ç²¾å‡†ï¼Œæ»¡è¶³æ›´å¤šéœ€æ±‚ã€‚æœ‰è¿™ä¸ªéœ€æ±‚çš„å¯ä»¥å»æŸ¥æ‰¾ä¸‹åšå®¢æ€ä¹ˆæ·»åŠ ã€‚ï¼ˆç½‘ä¸Šæœ‰å¾ˆå¤šè¿™æ–¹é¢çš„åšå®¢ï¼‰ 6ã€yilia ä¸»é¢˜ä½¿ç”¨ â€œç•…è¨€â€ è¯„è®ºç³»ç»Ÿ å‚è§æˆ‘ä»¥å‰çš„æ–‡ç« ï¼š Github pages + Hexo åšå®¢ yilia ä¸»é¢˜ä½¿ç”¨ç•…è¨€è¯„è®ºç³»ç»Ÿ 7ã€hexo yilia å¼•å…¥éŸ³ä¹ 1&lt;iframe frameborder=\"no\" border=\"0\" marginwidth=\"0\" marginheight=\"0\" width=330 height=86 src=\"å¡«å†™éŸ³ä¹é“¾æ¥åœ°å€\"&gt;&lt;/iframe&gt; å¦‚ä¸‹å›¾ï¼Œå¯ä»¥åœ¨ç½‘æ˜“äº‘éŸ³ä¹é‡Œæœåˆ°ä½ æƒ³è¦å¼•å…¥çš„éŸ³ä¹ï¼Œç„¶åç‚¹å‡»å¦‚ä¸‹çš„ â€œç”Ÿæˆå¤–é“¾æ’­æ”¾å™¨â€ å³å¯ï¼š 8ã€hexo yilia å¼•å…¥è§†é¢‘ hexo æ”¯æŒ html è¯­æ³•çš„ï¼Œæ‰€ä»¥å¯ä»¥å¦‚ä¸Šå›¾è¿™æ ·å¼•å…¥è§†é¢‘ï¼ 9ã€hexo yilia ç›¸å†Œ è¿™ä¸ªæŠ±æ­‰ï¼Œæˆ‘è‡ªå·±ä¹Ÿæ²¡åšè¿™æ–¹é¢çš„åŠŸèƒ½ï¼Œæš‚æ—¶ä¸å¤ªæ¸…æ¥šæ€ä¹ˆå®ç°ã€‚ä¸è¿‡æœ‰æ–‡ç« å†™æ€ä¹ˆå®ç°ï¼Œå¤§å®¶å¯ä»¥æœç´¢ä¸‹ï¼ 10ã€hexo yilia æ€ä¹ˆå†™æ–‡ç«  æˆ‘ä¸€èˆ¬å†™æ–‡ç« å°±æ˜¯å…ˆç”¨æœ¬åœ° markdown ç¼–è¾‘å™¨å†™å¥½åï¼Œç„¶åæ”¾åœ¨ hexo çš„ source/_posts ç›®å½•ä¸‹ã€‚ ç»“å°¾å¥½äº†ï¼Œå¤§æ¦‚å°±è¿™äº›é—®é¢˜ï¼Œæˆ‘ä¹Ÿä¸€ä¸€è§£ç­”äº†ï¼Œå¸Œæœ›æ­å»ºåšå®¢çš„ä½ å¯ä»¥çœ‹åˆ°è¿™ç¯‡æ–‡ç« ï¼Œè®©ä½ å°‘èµ°ç‚¹å¼¯è·¯ï¼Œå¦‚æœä½ ä¹Ÿé‡åˆ°è¿‡è¿™äº›é—®é¢˜ï¼Œè¿˜è¯·ä½ èƒ½åˆ†äº«ä¸‹æ–‡ç« ï¼Œè®©æ›´å¤šäººé¿å…å…¥å‘ï¼ æœ¬æ–‡åœ°å€æ˜¯ï¼šHexo + yilia æ­å»ºåšå®¢å¯èƒ½ä¼šé‡åˆ°çš„æ‰€æœ‰ç–‘é—® æœ¬æ–‡åŸåˆ›ï¼Œè½¬è½½è¯·æ³¨æ˜åŸåˆ›åœ°å€ã€‚ æœ€åhttp://www.54tianzhisheng.cn/2017/12/18/hexo-yilia è¿™ä¸ªé“¾æ¥æ˜¯è®©æ¨é…·çˆ¬è™«åæ‰çš„ï¼Œå“ˆå“ˆï¼","tags":[{"name":"hexo","slug":"hexo","permalink":"http://yoursite.com/tags/hexo/"},{"name":"yilia","slug":"yilia","permalink":"http://yoursite.com/tags/yilia/"}]},{"title":"è°·æ­Œå¼€å‘è€…å¤§ä¼šæ”¶è·æ»¡æ»¡ï¼Œä¸å»çœŸ â€œå¯æƒœâ€ äº†","date":"2017-12-12T16:00:00.000Z","path":"2017/12/13/Google-Developer-Days/","text":"å…¨æ–‡å›¾ç‰‡è¾ƒå¤šï¼Œè¯·åœ¨ WiFi ä¸‹é˜…è¯»ï¼ŒåœŸè±ªè¯·éšæ„ï¼ å‰æä»Šå¹´ Google å¼€å‘è€…å¤§ä¼šå†åº¦æ¥è¢­ï¼Œå¤§ä¼šå°†äº 12 æœˆ 13 æ—¥å’Œ 14 æ—¥åœ¨ä¸Šæµ·ä¸¾åŠï¼Œä¸»é¢˜æ¶µç›–æœºå™¨å­¦ä¹ (Machine Learning)ã€Androidã€ç§»åŠ¨ç½‘ç»œ(Mobile Web)ã€TensorFlowã€Firebaseã€äº‘æœåŠ¡(Cloud)ã€AR/VRã€è®¾è®¡(Design)ä»¥åŠæ›´å¤šå¼€å‘è€…ç›¸å…³å†…å®¹ã€‚ ä»Šå¤©æˆ‘å°±åˆ°èµ°ä¸€é­ï¼Œæ”¶è·æ»¡æ»¡ï¼Œéƒ½æ˜¯ç”¨è¢‹å­æå›æ¥çš„ï¼Œå“ˆå“ˆã€‚ä¸‹å›¾ä¸ºè¢‹å­ï¼š å†ç§€å¼ å›¾ä»£è¡¨æˆ‘å»äº†ï¼š å…¥åœº è¯´ä¸‹ä»Šå¤©æˆ‘å‚åŠ çš„ä¼šåœºå§ï¼ ä¼šåœºä¸»ä¼šåœºå¼€å¹• å½“ç„¶æ˜¯ç”¨æ¥ç”¨æ¥åšå¼€å‘è€…å¼€å¹•å¤§ä¼šä¸»é¢˜æ¼”è®²çš„ã€‚ç›¸ä¿¡ä¸å°‘æ²¡åˆ°ç°åœºçš„ä¹Ÿçœ‹äº†ç›´æ’­ã€‚ æ‹äº†ä¸¤å¼ æé£é£æ¼”è®²æ—¶çš„ç…§ç‰‡ï¼š è¿˜æœ‰ä¸ªå¦¹å­æ˜¯è®² TensorFlow çš„ï¼Œå…¨ç¨‹ä¸­æ–‡ï¼Œè¿˜è´¼ 6ï¼Œä½©æœï¼ï¼ï¼ ä¸­é€”æ¼”è®²è¿˜å¥½å‡ ä¸ªï¼Œæ²¡æ‹ç…§äº†ã€‚ã€‚ã€‚ ä¸­é€”èŒ¶æ­‡ï¼šå»å¤–é¢çœ‹äº†ä¸‹ã€‚ ä¸»ä¼šåœºæ¼”è®²ä¸»é¢˜æ˜¯ï¼šã€Šæ¸è¿›å¼ç½‘é¡µåº”ç”¨ï¼šå¿«é€Ÿã€é›†æˆã€å¯é å¹¶ä¸”å…·æœ‰å¸å¼•åŠ›ã€‹ è¿™æ¬¡åçš„æ˜¯å‰æ’ï¼Œè¿˜æ‹äº†ç…§ï¼Œæ¼”è®²äººæŠ€å·§å¾ˆå¥½ï¼Œè¾¹æ¼”è®²è¾¹å¸¦æœ‰èº«ä½“åŠ¨ä½œçš„ï¼Œè€Œä¸”è¿˜æ¯”è¾ƒè¯™è°ã€‚ åˆé¤èƒ¸ç‰Œä¸Šæœ‰13ã€14 å·çš„åˆé¤åˆ¸ï¼Œå¯ä»¥å…è´¹åƒã€å…è´¹æ‹¿ï¼Œç¦åˆ©è¶…å¥½ã€‚ ä¸‹åˆä¼šåœºä¸‹åˆä¼šåœºæœ‰ç‚¹å¤šï¼Œç•¥ç•¥ç•¥ã€‚ã€‚ã€‚ éƒ½æ‹äº†ç‚¹ç…§ï¼Œå¦‚æœæƒ³è¦ï¼Œå¯ä»¥åŠ ç¾¤ï¼š528776268 æ‰¾æˆ‘è¦ã€ æ™šé¤è¯±æƒ‘é¢‡å¤§ã€‚ã€‚ æˆ‘è¿˜å–äº†æ¯è‘¡è„é…’ã€‚ã€‚å“ˆå“ˆ å¦å¤–é™¤äº†ç…§ç‰‡ï¼Œè¿˜æ‹äº†ä¸‰ä¸ªè§†é¢‘ å›å®¶åƒé¥±å–è¶³ï¼Œå›å®¶æ‹äº†å¼ ç…§ ç¤¼ç‰©åˆ°å®¶äº†ï¼Œæ•´ç†äº†ä¸‹ä»Šå¤©çš„ç¤¼ç‰©ï¼š è´´çº¸ä¸€å¼  å°ç¤¼å“ä¸€ä¸ª ä¸€ä¸ªå¯ DIY çš„éŸ³ç®± ä¸€ä¸ªå®šåˆ¶çš„æ‰‹æç”µè„‘åŒ…ï¼Œè´¨é‡å¾ˆå¥½ã€‚ AndroidThings æœ€åå…¨æ–‡å›¾ç‰‡è¾ƒå¤šï¼Œè°¢è°¢é˜…è¯»ï¼è‡ªå·±æ”¶è·ä¹ŸæŒºå¤šçš„ï¼Œæ˜å¤©è¿˜æœ‰ä¸€å¤©ï¼Œå¯æƒœä¸æ‰“ç®—å»äº†ï¼Œè½¬è½½è¯·æ³¨æ˜åœ°å€ï¼šhttp://www.54tianzhisheng.cn/2017/12/13/Google-Developer-Days/ ç»“å°¾è¿™ä¸ªæ˜¯ä¸ºäº†é˜²çˆ¬è™«å†™çš„ï¼Œå“ˆå“ˆ","tags":[{"name":"éšç¬”","slug":"éšç¬”","permalink":"http://yoursite.com/tags/éšç¬”/"}]},{"title":"ä½¿ç”¨ CodeMirror æ‰“é€ å±äºè‡ªå·±çš„åœ¨çº¿ä»£ç ç¼–è¾‘å™¨","date":"2017-12-08T16:00:00.000Z","path":"2017/12/09/CodeMirror/","text":"å‰æå†™è¿™ä¸ªçš„ç›®çš„æ˜¯å› ä¸ºä¹‹å‰é¡¹ç›®é‡Œç”¨åˆ°è¿‡ CodeMirrorï¼Œè§‰å¾—ä½œä¸ºä¸€æ¬¾åœ¨çº¿ä»£ç ç¼–è¾‘å™¨è¿˜æ˜¯ä¸é”™ï¼Œä¹Ÿçœ‹åˆ°è¿‡æœ‰äº›ç½‘ç«™ç”¨åˆ°è¿‡åœ¨çº¿ä»£ç ç¼–è¾‘ï¼Œå½“ç„¶æˆ‘ä¸çŸ¥é“ä»–ä»¬æ˜¯ç”¨ä»€ä¹ˆåšçš„ï¼Œè¿™é‡Œæˆ‘æŠŠå…¬å¸é¡¹ç›®é‡Œç”¨åˆ°çš„é‚£éƒ¨åˆ†æŠ½å‡ºæ¥ï¼Œå•ç‹¬å†™ç¯‡åšå®¢ï¼Œå¹¶æŠŠæŠ½å‡ºæ¥çš„é‚£éƒ¨åˆ†ä»£ç æäº¤åˆ° GitHub å»ï¼ˆåœ°å€ï¼‰ï¼Œä»¥é˜²æ—¥åå¯èƒ½ä¼šå†æ¬¡ç”¨åˆ°ï¼ˆæ²¡å‡†æ¯•ä¸šè®¾è®¡é‡Œå¯èƒ½ç”¨çš„åˆ°ï¼‰ã€‚ ç®€å•ä»‹ç»CodeMirror æ˜¯ä¸€æ¬¾åœ¨çº¿çš„æ”¯æŒè¯­æ³•é«˜äº®çš„ä»£ç ç¼–è¾‘å™¨ã€‚å®˜ç½‘ï¼š http://codemirror.net/ å¯èƒ½å…‰çœ‹å®˜ç½‘ï¼Œç¬¬ä¸€çœ¼è§‰å¾—é‚£äº›åœ¨çº¿ç¼–è¾‘å™¨æœ‰ç‚¹ä¸‘ï¼Œåæ­£ç¬¬ä¸€çœ¼ç»™æˆ‘çš„æ„Ÿè§‰å°±æ˜¯è¿™æ ·å­ï¼Œä½†æ˜¯ç»è¿‡è‡ªå·±çš„ç»†è°ƒï¼Œä¹Ÿèƒ½æ‰“é€ å‡ºä¸€æ¬¾ç²¾ç¾çš„åœ¨çº¿ä»£ç ç¼–è¾‘å™¨ã€‚ å®˜ç½‘å¯ä»¥æŠŠå®ƒä¸‹è½½ä¸‹æ¥ã€‚ ä¸‹è½½åï¼Œè§£å‹å¼€å¾—åˆ°çš„æ–‡ä»¶å¤¹ä¸­ï¼Œlib ä¸‹æ˜¯æ”¾çš„æ˜¯æ ¸å¿ƒåº“å’Œæ ¸å¿ƒ cssï¼Œmode ä¸‹æ”¾çš„æ˜¯å„ç§æ”¯æŒè¯­è¨€çš„è¯­æ³•å®šä¹‰ï¼Œtheme ç›®å½•ä¸‹æ˜¯æ”¯æŒçš„ä¸»é¢˜æ ·å¼ã€‚ä¸€èˆ¬åœ¨å¼€å‘ä¸­ï¼Œæ·»åŠ  lib ä¸‹çš„å¼•ç”¨å’Œ mode ä¸‹çš„å¼•ç”¨å°±å¤Ÿäº†ã€‚ å¦‚ä½•ä½¿ç”¨ä¸‹é¢ä¸¤ä¸ªæ˜¯ä½¿ç”¨ Code Mirror å¿…é¡»å¼•å…¥çš„ï¼š 12&lt;link rel=\"stylesheet\" href=\"codemirror-5.31.0/lib/codemirror.css\"/&gt;&lt;script src=\"codemirror-5.31.0/lib/codemirror.js\"&gt;&lt;/script&gt; æ¥ä¸‹æ¥è¦å¼•ç”¨çš„å°±æ˜¯åœ¨ mode ç›®å½•ä¸‹ç¼–è¾‘å™¨ä¸­è¦ç¼–è¾‘çš„è¯­è¨€å¯¹åº”çš„ js æ–‡ä»¶ï¼Œè¿™é‡Œä»¥ Groovy ä¸ºä¾‹ï¼š 12&lt;!--groovyä»£ç é«˜äº®--&gt;&lt;script src=\"codemirror-5.31.0/mode/groovy/groovy.js\"&gt;&lt;/script&gt; å¦‚æœä½ æƒ³è®© Java ä»£ç ä¹Ÿæ”¯æŒä»£ç é«˜äº®ï¼Œåˆ™éœ€è¦å¼•å…¥æˆ‘ä»ç½‘ä¸Šä¸‹è½½ä¸‹æ¥çš„ clike.jsï¼ˆæˆ‘å·²ç»æ”¾åˆ°æˆ‘çš„ GitHub å»äº†ï¼‰ 12&lt;!--Javaä»£ç é«˜äº®å¿…é¡»å¼•å…¥--&gt;&lt;script src=\"codemirror-5.31.0/clike.js\"&gt;&lt;/script&gt; å¼•ç”¨çš„æ–‡ä»¶ç”¨äºæ”¯æŒå¯¹åº”è¯­è¨€çš„è¯­æ³•é«˜äº®ã€‚ ç„¶åå‰é¢è¯´äº†ç¬¬ä¸€æ¬¡è¿›å…¥ Code Mirror å®˜ç½‘ï¼Œè§‰å¾—é‚£äº›ç¼–è¾‘å™¨æ¯”è¾ƒä¸‘ï¼Œé‚£å¯èƒ½æ˜¯ä¸»é¢˜æ¯”è¾ƒä¸‘ï¼Œæˆ‘è¿™é‡Œæ¨èä¸€æ¬¾è¿˜ä¸é”™çš„ä¸»é¢˜ï¼Œåªéœ€æŒ‰ç…§å¦‚ä¸‹å¼•å…¥å³å¯ï¼š 12&lt;!--å¼•å…¥cssæ–‡ä»¶ï¼Œç”¨ä»¥æ”¯æŒä¸»é¢˜--&gt;&lt;link rel=\"stylesheet\" href=\"codemirror-5.31.0/theme/dracula.css\"/&gt; å¦‚æœä½ è¿˜æƒ³è®©ä½ çš„ç¼–è¾‘å™¨æ”¯æŒä»£ç è¡ŒæŠ˜å ï¼Œè¯·æŒ‰ç…§å¦‚ä¸‹è¿›è¡Œæ“ä½œï¼š 123456&lt;!--æ”¯æŒä»£ç æŠ˜å --&gt;&lt;link rel=\"stylesheet\" href=\"codemirror-5.31.0/addon/fold/foldgutter.css\"/&gt;&lt;script src=\"codemirror-5.31.0/addon/fold/foldcode.js\"&gt;&lt;/script&gt;&lt;script src=\"codemirror-5.31.0/addon/fold/foldgutter.js\"&gt;&lt;/script&gt;&lt;script src=\"codemirror-5.31.0/addon/fold/brace-fold.js\"&gt;&lt;/script&gt;&lt;script src=\"codemirror-5.31.0/addon/fold/comment-fold.js\"&gt;&lt;/script&gt; æ˜¯ä¸æ˜¯è¿™æ ·å¼•å…¥å°±å¥½äº†å‘¢ï¼Œå½“ç„¶ä¸æ˜¯å•¦ åˆ›å»ºç¼–è¾‘å™¨åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œä¸€èˆ¬éƒ½ä¸ä¼šç›´æ¥æŠŠ body æ•´ä¸ªå†…å®¹ä½œä¸ºç¼–è¾‘å™¨çš„å®¹å™¨ã€‚è€Œæœ€å¸¸ç”¨çš„ï¼Œæ˜¯ä½¿ç”¨ textareaã€‚è¿™é‡Œæˆ‘åœ¨ é‡Œä½¿ç”¨ä¸ª textareaï¼Œ 123&lt;!-- begin code --&gt;&lt;textarea class=\"form-control\" id=\"code\" name=\"code\"&gt;&lt;/textarea&gt;&lt;!-- end code--&gt; æ¥ä¸‹æ¥å°±æ˜¯åˆ›å»ºç¼–è¾‘å™¨äº†ã€‚ 123//æ ¹æ®DOMå…ƒç´ çš„idæ„é€ å‡ºä¸€ä¸ªç¼–è¾‘å™¨var editor = CodeMirror.fromTextArea(document.getElementById(\"code\"), &#123;&#125;); æ˜¯ä¸æ˜¯æœ‰ç‚¹å•è°ƒï¼Ÿ æ²¡é”™ï¼Œæˆ‘è¿˜å¯ä»¥åœ¨é‡Œé¢ç»™ä»–è®¾ç½®äº›å±æ€§ï¼šï¼ˆå……åˆ†åˆ©ç”¨æˆ‘ä¸€å¼€å§‹å¼•å…¥çš„é‚£äº›æ–‡ä»¶ï¼‰ 123456789mode: \"text/groovy\", //å®ç°groovyä»£ç é«˜äº®mode: \"text/x-java\", //å®ç°Javaä»£ç é«˜äº®lineNumbers: true, //æ˜¾ç¤ºè¡Œå·theme: \"dracula\", //è®¾ç½®ä¸»é¢˜lineWrapping: true, //ä»£ç æŠ˜å foldGutter: true,gutters: [\"CodeMirror-linenumbers\", \"CodeMirror-foldgutter\"],matchBrackets: true, //æ‹¬å·åŒ¹é…//readOnly: true, //åªè¯» å¦‚æœéœ€è¦æŸ¥çœ‹æ›´å¤šå±æ€§ï¼Œå¯ä»¥å»å®˜ç½‘æŸ¥æ‰¾ï¼Œç›®å‰æˆ‘åªç”¨åˆ°è¿™äº›å±æ€§ï¼ ä¸‹é¢ä¹Ÿåˆ—ä¸¾äº›å§ï¼š indentUnit: integerç¼©è¿›å•ä½ï¼Œå€¼ä¸ºç©ºæ ¼æ•°ï¼Œé»˜è®¤ä¸º2 ã€‚ smartIndent: booleanè‡ªåŠ¨ç¼©è¿›ï¼Œè®¾ç½®æ˜¯å¦æ ¹æ®ä¸Šä¸‹æ–‡è‡ªåŠ¨ç¼©è¿›ï¼ˆå’Œä¸Šä¸€è¡Œç›¸åŒçš„ç¼©è¿›é‡ï¼‰ã€‚é»˜è®¤ä¸ºtrueã€‚ tabSize: integertabå­—ç¬¦çš„å®½åº¦ï¼Œé»˜è®¤ä¸º4 ã€‚ indentWithTabs: booleanåœ¨ç¼©è¿›æ—¶ï¼Œæ˜¯å¦éœ€è¦æŠŠ n*tabå®½åº¦ä¸ªç©ºæ ¼æ›¿æ¢æˆnä¸ªtabå­—ç¬¦ï¼Œé»˜è®¤ä¸ºfalse ã€‚ electricChars: booleanåœ¨è¾“å…¥å¯èƒ½æ”¹å˜å½“å‰çš„ç¼©è¿›æ—¶ï¼Œæ˜¯å¦é‡æ–°ç¼©è¿›ï¼Œé»˜è®¤ä¸ºtrue ï¼ˆä»…åœ¨modeæ”¯æŒç¼©è¿›æ—¶æœ‰æ•ˆï¼‰ã€‚ specialChars: RegExpéœ€è¦è¢«å ä½ç¬¦(placeholder)æ›¿æ¢çš„ç‰¹æ®Šå­—ç¬¦çš„æ­£åˆ™è¡¨è¾¾å¼ã€‚æœ€å¸¸ç”¨çš„æ˜¯éæ‰“å°å­—ç¬¦ã€‚é»˜è®¤ä¸ºï¼š/[\\u0000-\\u0019\\u00ad\\u200b-\\u200f\\u2028\\u2029\\ufeff]/ã€‚ specialCharPlaceholder: function(char) â†’ Elementè¿™æ˜¯ä¸€ä¸ªæ¥æ”¶ç”±specialCharsé€‰é¡¹æŒ‡å®šçš„å­—ç¬¦ä½œä¸ºå‚æ•°çš„å‡½æ•°ï¼Œæ­¤å‡½æ•°ä¼šäº§ç”Ÿä¸€ä¸ªç”¨æ¥æ˜¾ç¤ºæŒ‡å®šå­—ç¬¦çš„DOMèŠ‚ç‚¹ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæ˜¾ç¤ºä¸€ä¸ªçº¢ç‚¹ï¼ˆâ€¢ï¼‰ï¼Œè¿™ä¸ªçº¢ç‚¹æœ‰ä¸€ä¸ªå¸¦æœ‰å‰é¢ç‰¹æ®Šå­—ç¬¦ç¼–ç çš„æç¤ºæ¡†ã€‚ rtlMoveVisually: booleanDetermines whether horizontal cursor movement through right-to-left (Arabic, Hebrew) text is visual (pressing the left arrow moves the cursor left) or logical (pressing the left arrow moves to the next lower index in the string, which is visually right in right-to-left text). The default is false on Windows, and true on other platforms.ï¼ˆè¿™æ®µå®Œå…¨ä¸æ™“å¾—æå•¥å­é¬¼ï¼‰ keyMap: stringé…ç½®å¿«æ·é”®ã€‚é»˜è®¤å€¼ä¸ºdefaultï¼Œå³ codemorrir.js å†…éƒ¨å®šä¹‰ã€‚å…¶å®ƒåœ¨key mapç›®å½•ä¸‹ã€‚ extraKeys: objectç»™ç¼–è¾‘å™¨ç»‘å®šä¸å‰é¢keyMapé…ç½®ä¸åŒçš„å¿«æ·é”®ã€‚ lineWrapping: booleanåœ¨é•¿è¡Œæ—¶æ–‡å­—æ˜¯æ¢è¡Œ(wrap)è¿˜æ˜¯æ»šåŠ¨(scroll)ï¼Œé»˜è®¤ä¸ºæ»šåŠ¨(scroll)ã€‚ lineNumbers: booleanæ˜¯å¦åœ¨ç¼–è¾‘å™¨å·¦ä¾§æ˜¾ç¤ºè¡Œå·ã€‚ firstLineNumber: integerè¡Œå·ä»å“ªä¸ªæ•°å¼€å§‹è®¡æ•°ï¼Œé»˜è®¤ä¸º1 ã€‚ lineNumberFormatter: function(line: integer) â†’ stringä½¿ç”¨ä¸€ä¸ªå‡½æ•°è®¾ç½®è¡Œå·ã€‚ gutters: arrayç”¨æ¥æ·»åŠ é¢å¤–çš„gutterï¼ˆåœ¨è¡Œå·gutterå‰æˆ–ä»£æ›¿è¡Œå·gutterï¼‰ã€‚å€¼åº”è¯¥æ˜¯CSSåç§°æ•°ç»„ï¼Œæ¯ä¸€é¡¹å®šä¹‰äº†ç”¨äºç»˜åˆ¶gutterèƒŒæ™¯çš„å®½åº¦ï¼ˆè¿˜æœ‰å¯é€‰çš„èƒŒæ™¯ï¼‰ã€‚ä¸ºäº†èƒ½æ˜ç¡®è®¾ç½®è¡Œå·gutterçš„ä½ç½®ï¼ˆé»˜è®¤åœ¨æ‰€æœ‰å…¶å®ƒgutterçš„å³è¾¹ï¼‰ï¼Œä¹Ÿå¯ä»¥åŒ…å«CodeMirror-linenumbersç±»ã€‚ç±»åæ˜¯ç”¨äºä¼ ç»™setGutterMarkerçš„é”®å(keys)ã€‚ fixedGutter: booleanè®¾ç½®gutterè·Ÿéšç¼–è¾‘å™¨å†…å®¹æ°´å¹³æ»šåŠ¨ï¼ˆfalseï¼‰è¿˜æ˜¯å›ºå®šåœ¨å·¦ä¾§ï¼ˆtrueæˆ–é»˜è®¤ï¼‰ã€‚ scrollbarStyle: stringè®¾ç½®æ»šåŠ¨æ¡ã€‚é»˜è®¤ä¸ºâ€nativeâ€ï¼Œæ˜¾ç¤ºåŸç”Ÿçš„æ»šåŠ¨æ¡ã€‚æ ¸å¿ƒåº“è¿˜æä¾›äº†â€nullâ€æ ·å¼ï¼Œæ­¤æ ·å¼ä¼šå®Œå…¨éšè—æ»šåŠ¨æ¡ã€‚Addonså¯ä»¥è®¾ç½®æ›´å¤šçš„æ»šåŠ¨æ¡æ¨¡å¼ã€‚ coverGutterNextToScrollbar: booleanå½“fixedGutterå¯ç”¨ï¼Œå¹¶ä¸”å­˜åœ¨æ°´å¹³æ»šåŠ¨æ¡æ—¶ï¼Œåœ¨æ»šåŠ¨æ¡æœ€å·¦ä¾§é»˜è®¤ä¼šæ˜¾ç¤ºgutterï¼Œå½“æ­¤é¡¹è®¾ç½®ä¸ºtrueæ—¶ï¼Œgutterä¼šè¢«å¸¦æœ‰CodeMirror-gutter-fillerç±»çš„å…ƒç´ é®æŒ¡ã€‚inputStyle: stringé€‰æ‹©CodeMirrorå¤„ç†è¾“å…¥å’Œç„¦ç‚¹çš„æ–¹å¼ã€‚æ ¸å¿ƒåº“å®šä¹‰äº†textareaå’Œcontenteditableè¾“å…¥æ¨¡å¼ã€‚åœ¨ç§»åŠ¨æµè§ˆå™¨ä¸Šï¼Œé»˜è®¤æ˜¯contenteditableï¼Œåœ¨æ¡Œé¢æµè§ˆå™¨ä¸Šï¼Œé»˜è®¤æ˜¯textareaã€‚åœ¨contenteditableæ¨¡å¼ä¸‹å¯¹IMEå’Œå±å¹•é˜…è¯»å™¨æ”¯æŒæ›´å¥½ã€‚ readOnly: boolean|stringç¼–è¾‘å™¨æ˜¯å¦åªè¯»ã€‚å¦‚æœè®¾ç½®ä¸ºé¢„è®¾çš„å€¼ â€œnocursorâ€ï¼Œé‚£ä¹ˆé™¤äº†è®¾ç½®åªè¯»å¤–ï¼Œç¼–è¾‘åŒºåŸŸè¿˜ä¸èƒ½è·å¾—ç„¦ç‚¹ã€‚ showCursorWhenSelecting: booleanåœ¨é€‰æ‹©æ—¶æ˜¯å¦æ˜¾ç¤ºå…‰æ ‡ï¼Œé»˜è®¤ä¸ºfalseã€‚ lineWiseCopyCut: booleanå¯ç”¨æ—¶ï¼Œå¦‚æœåœ¨å¤åˆ¶æˆ–å‰ªåˆ‡æ—¶æ²¡æœ‰é€‰æ‹©æ–‡æœ¬ï¼Œé‚£ä¹ˆå°±ä¼šè‡ªåŠ¨æ“ä½œå…‰æ ‡æ‰€åœ¨çš„æ•´è¡Œã€‚ undoDepth: integeræœ€å¤§æ’¤æ¶ˆæ¬¡æ•°ï¼Œé»˜è®¤ä¸º200ï¼ˆåŒ…æ‹¬é€‰ä¸­å†…å®¹æ”¹å˜äº‹ä»¶ï¼‰ ã€‚ historyEventDelay: integeråœ¨è¾“å…¥æˆ–åˆ é™¤æ—¶å¼•å‘å†å²äº‹ä»¶å‰çš„æ¯«ç§’æ•°ã€‚ tabindex: integerç¼–è¾‘å™¨çš„tabindexã€‚ autofocus: booleanæ˜¯å¦åœ¨åˆå§‹åŒ–æ—¶è‡ªåŠ¨è·å–ç„¦ç‚¹ã€‚é»˜è®¤æƒ…å†µæ˜¯å…³é—­çš„ã€‚ä½†æ˜¯ï¼Œåœ¨ä½¿ç”¨textareaå¹¶ä¸”æ²¡æœ‰æ˜ç¡®æŒ‡å®šå€¼çš„æ—¶å€™ä¼šè¢«è‡ªåŠ¨è®¾ç½®ä¸ºtrueã€‚ dragDrop: booleanæ˜¯å¦å…è®¸æ‹–æ”¾ï¼Œé»˜è®¤ä¸ºtrueã€‚ allowDropFileTypes: arrayé»˜è®¤ä¸ºnullã€‚å½“è®¾ç½®æ­¤é¡¹æ—¶ï¼Œåªæ¥æ”¶åŒ…å«åœ¨æ­¤æ•°ç»„å†…çš„æ–‡ä»¶ç±»å‹æ‹–å…¥ç¼–è¾‘å™¨ã€‚æ–‡ä»¶ç±»å‹ä¸ºMIMEåç§°ã€‚ cursorBlinkRate: numberå…‰æ ‡é—ªåŠ¨çš„é—´éš”ï¼Œå•ä½ä¸ºæ¯«ç§’ã€‚é»˜è®¤ä¸º530ã€‚å½“è®¾ç½®ä¸º0æ—¶ï¼Œä¼šç¦ç”¨å…‰æ ‡é—ªåŠ¨ã€‚è´Ÿæ•°ä¼šéšè—å…‰æ ‡ã€‚ cursorScrollMargin: numberå½“å…‰æ ‡é è¿‘å¯è§†åŒºåŸŸè¾¹ç•Œæ—¶ï¼Œå…‰æ ‡è·ç¦»ä¸Šæ–¹å’Œä¸‹æ–¹çš„è·ç¦»ã€‚é»˜è®¤ä¸º0 ã€‚ cursorHeight: numberå…‰æ ‡é«˜åº¦ã€‚é»˜è®¤ä¸º1ï¼Œä¹Ÿå°±æ˜¯æ’‘æ»¡è¡Œé«˜ã€‚å¯¹ä¸€äº›å­—ä½“ï¼Œè®¾ç½®0.85çœ‹èµ·æ¥ä¼šæ›´å¥½ã€‚ resetSelectionOnContextMenu: booleanè®¾ç½®åœ¨é€‰æ‹©æ–‡æœ¬å¤–ç‚¹å‡»æ‰“å¼€ä¸Šä¸‹æ–‡èœå•æ—¶ï¼Œæ˜¯å¦å°†å…‰æ ‡ç§»åŠ¨åˆ°ç‚¹å‡»å¤„ã€‚é»˜è®¤ä¸ºtrueã€‚ workTime, workDelay: numberé€šè¿‡ä¸€ä¸ªå‡çš„åå°çº¿ç¨‹é«˜äº® workTime æ—¶é•¿ï¼Œç„¶åä½¿ç”¨ timeout ä¼‘æ¯ workDelay æ—¶é•¿ã€‚é»˜è®¤ä¸º200å’Œ300 ã€‚ï¼ˆå®Œå…¨ä¸æ‡‚è¿™ä¸ªåŠŸèƒ½æ˜¯åœ¨è¯´å•¥ï¼‰ pollInterval: numberæŒ‡æ˜CodeMirrorå‘å¯¹åº”çš„textareaæ»šåŠ¨ï¼ˆå†™æ•°æ®ï¼‰çš„é€Ÿåº¦ï¼ˆè·å¾—ç„¦ç‚¹æ—¶ï¼‰ã€‚å¤§å¤šæ•°çš„è¾“å…¥éƒ½æ˜¯é€šè¿‡äº‹ä»¶æ•è·ï¼Œä½†æ˜¯æœ‰çš„è¾“å…¥æ³•ï¼ˆå¦‚IMEï¼‰åœ¨æŸäº›æµè§ˆå™¨ä¸Šå¹¶ä¸ä¼šç”Ÿæˆäº‹ä»¶ï¼Œæ‰€ä»¥ä½¿ç”¨æ•°æ®æ»šåŠ¨ã€‚é»˜è®¤ä¸º100æ¯«ç§’ã€‚ flattenSpans: booleané»˜è®¤æƒ…å†µä¸‹ï¼ŒCodeMirrorä¼šå°†ä½¿ç”¨ç›¸åŒclassçš„ä¸¤ä¸ªspanåˆå¹¶æˆä¸€ä¸ªã€‚é€šè¿‡è®¾ç½®æ­¤é¡¹ä¸ºfalseç¦ç”¨æ­¤åŠŸèƒ½ã€‚ addModeClass: booleanå½“å¯ç”¨æ—¶ï¼ˆé»˜è®¤ç¦ç”¨ï¼‰ï¼Œä¼šç»™æ¯ä¸ªæ ‡è®°æ·»åŠ é¢å¤–çš„è¡¨ç¤ºç”Ÿæˆæ ‡è®°çš„modeçš„ä»¥cm-må¼€å¤´çš„CSSæ ·å¼ç±»ã€‚ä¾‹å¦‚ï¼ŒXML modeäº§ç”Ÿçš„æ ‡è®°ï¼Œä¼šæ·»åŠ cm-m-xmlç±»ã€‚ maxHighlightLength: numberå½“éœ€è¦é«˜äº®å¾ˆé•¿çš„è¡Œæ—¶ï¼Œä¸ºäº†ä¿æŒå“åº”æ€§èƒ½ï¼Œå½“åˆ°è¾¾æŸäº›ä½ç½®æ—¶ï¼Œç¼–è¾‘å™¨ä¼šç›´æ¥å°†å…¶ä»–è¡Œè®¾ç½®ä¸ºçº¯æ–‡æœ¬(plain text)ã€‚é»˜è®¤ä¸º10000ï¼Œå¯ä»¥è®¾ç½®ä¸ºInfinityæ¥å…³é—­æ­¤åŠŸèƒ½ã€‚ viewportMargin: integeræŒ‡å®šå½“å‰æ»šåŠ¨åˆ°è§†å›¾ä¸­å†…å®¹ä¸Šæ–¹å’Œä¸‹æ–¹è¦æ¸²æŸ“çš„è¡Œæ•°ã€‚è¿™ä¼šå½±å“åˆ°æ»šåŠ¨æ—¶è¦æ›´æ–°çš„è¡Œæ•°ã€‚é€šå¸¸æƒ…å†µä¸‹åº”è¯¥ä½¿ç”¨é»˜è®¤å€¼10ã€‚å¯ä»¥è®¾ç½®å€¼ä¸ºInfinityå§‹ç»ˆæ¸²æŸ“æ•´ä¸ªæ–‡æ¡£ã€‚æ³¨æ„ï¼šè¿™æ ·è®¾ç½®åœ¨å¤„ç†å¤§æ–‡æ¡£æ—¶ä¼šå½±å“æ€§èƒ½ã€‚ å¦‚æœä½ è¦è®¾ç½®ä»£ç æ¡†çš„å¤§å°è¯¥æ€ä¹ˆåšå‘¢ï¼Ÿ 1editor.setSize('800px', '950px'); //è®¾ç½®ä»£ç æ¡†çš„é•¿å®½ å¦å¤–ï¼Œå¦‚æœä½ æƒ³ç»™ä»£ç æ¡†èµ‹å€¼ï¼Œè¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ 12editor.setValue(\"\"); //ç»™ä»£ç æ¡†èµ‹å€¼editor.getValue(); //è·å–ä»£ç æ¡†çš„å€¼ å¦‚æœä½ å†æƒ³åœ¨å…¶ä»–åœ°æ–¹è®¾ç½®æ–°çš„å±æ€§ï¼Œå¯ä»¥åƒä¸‹é¢è¿™æ ·å†™ï¼š 1editor.setOption(\"readOnly\", true); //ç±»ä¼¼è¿™ç§ æ€»ç»“ä¸Šé¢å°±å¤§æ¦‚è®²äº†ä¸‹ Code Mirror æ€ä¹ˆä½¿ç”¨ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ¥çœ‹çœ‹æ•ˆæœå§ æˆ‘è‡ªæˆ‘æ„Ÿè§‰è¿˜æ˜¯å¯ä»¥çš„å“ˆï¼ é‡Œé¢æ‰€æœ‰æ¶‰åŠçš„ä»£ç åœ¨ GitHub é‡Œå¯ä»¥ä¸‹è½½ï¼šhttps://github.com/zhisheng17/CoderBlog/tree/master/CodeMirror æ–‡ç« åŸåˆ›ï¼Œè½¬è½½åŠ¡å¿…è¯·æ³¨æ˜åŸåˆ›åœ°å€ï¼šhttp://www.54tianzhisheng.cn/2017/12/09/CodeMirror/ æœ€åfuck æ— è„‘çš„æ¨é…·çˆ¬è™«ï¼Œç«Ÿç„¶æŠŠæˆ‘æ‰€æœ‰æ–‡ç« æœ€åçš„åŸåˆ›é“¾æ¥éƒ½ç»™å»æ‰äº†ï¼Œè¿™æ˜¯æˆ‘ç°åœ¨æƒ³åˆ°çš„ä¸€ç§å¯¹ç­–æ–¹æ³•ã€‚ä»»ä½•å…¶ä»–å½¢å¼çš„è½¬è½½ï¼Œä¹Ÿå¿…é¡»æŠŠæˆ‘æ–‡ç« æ‰€æœ‰å†…å®¹åŠ ä¸Šï¼Œä¸å¾—åšä»»ä½•ä¿®æ”¹ï¼Œå¦åˆ™è¯·åˆ«è½¬è½½äº†ï¼","tags":[{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"http://yoursite.com/tags/å‰ç«¯/"}]},{"title":"Nettyç³»åˆ—æ–‡ç« ï¼ˆä¸€ï¼‰ï¼šNetty æºç é˜…è¯»ä¹‹åˆå§‹ç¯å¢ƒæ­å»º","date":"2017-12-07T16:00:00.000Z","path":"2017/12/08/netty-01-env/","text":"Netty ç®€ä»‹Netty æ˜¯ç”± JBOSS æä¾›çš„ä¸€ä¸ªå¼€æºçš„ java ç½‘ç»œç¼–ç¨‹æ¡†æ¶ï¼Œä¸»è¦æ˜¯å¯¹ java çš„ nio åŒ…è¿›è¡Œäº†å†æ¬¡å°è£…ã€‚Netty æ¯” java åŸç”Ÿçš„nio åŒ…æä¾›äº†æ›´åŠ å¼ºå¤§ã€ç¨³å®šçš„åŠŸèƒ½å’Œæ˜“äºä½¿ç”¨çš„ apiã€‚ netty çš„ä½œè€…æ˜¯ Trustin Leeï¼Œè¿™æ˜¯ä¸€ä¸ªéŸ©å›½äººï¼Œä»–è¿˜å¼€å‘äº†å¦å¤–ä¸€ä¸ªè‘—åçš„ç½‘ç»œç¼–ç¨‹æ¡†æ¶ï¼Œminaã€‚äºŒè€…åœ¨å¾ˆå¤šæ–¹é¢éƒ½ååˆ†ç›¸ä¼¼ï¼Œå®ƒä»¬çš„çº¿ç¨‹æ¨¡å‹ä¹Ÿæ˜¯åŸºæœ¬ä¸€è‡´ ã€‚ä¸è¿‡ netty ç¤¾åŒºçš„æ´»è·ƒç¨‹åº¦è¦ mina é«˜å¾—å¤šã€‚ç‰ˆæœ¬é€‰æ‹©ï¼š 3.x ç›®å‰ä¼ä¸šä½¿ç”¨æœ€å¤šçš„ç‰ˆæœ¬ï¼Œæœ€ä¸ºç¨³å®šã€‚ä¾‹å¦‚dubboä½¿ç”¨çš„å°±æ˜¯3.xç‰ˆæœ¬ 4.x å¼•å…¥äº†å†…å­˜æ± ç­‰é‡å¤§ç‰¹æ€§ï¼Œå¯ä»¥æœ‰æ•ˆçš„é™ä½GCè´Ÿè½½ï¼Œrocketmqä½¿ç”¨çš„å°±æ˜¯4.x 5.x å·²ç»è¢«åºŸå¼ƒäº†ï¼Œå…·ä½“å¯å‚è§ https://github.com/netty/netty/issues/4466 æ‰€ä»¥è¿™é‡Œæˆ‘æ­å»ºçš„æºç é˜…è¯»ç¯å¢ƒæ˜¯å­˜åœ¨çš„ 4.1 ç‰ˆæœ¬ã€‚ å‡†å¤‡å·¥å…· IDEA 2017 ç¯å¢ƒæ­å»ºåœ¨ IDEA ä¸­å¯¼å…¥é¡¹ç›®åœ°å€ï¼šhttps://github.com/netty/netty.git ï¼Œç„¶åå°±ä¼šè‡ªåŠ¨ä¸‹è½½é¡¹ç›®æ‰€æœ‰çš„ä¾èµ–ï¼Œä½†æ˜¯è¯·æ³¨æ„ï¼š å¿…é¡»åœ¨ IDEA ä¸­å°† Profiles ä¸­çš„æ‰€æœ‰éƒ½å‹¾é€‰ä¸Šï¼Œå¦åˆ™ä¼šå¯¼è‡´å¾ˆå¤š jar åŒ…æ‹‰ä¸ä¸‹æ¥ï¼Œå¦‚ä¸‹å›¾ï¼š ç„¶åå°±æ˜¯è€å¿ƒç­‰å¾…äº†ï¼Œä¸€ç›´åˆ°æ‰€æœ‰çš„ jar åŒ…æ‹‰å–ä¸‹æ¥ã€‚ ä¸­é€”ä½ å¯èƒ½ä¼šé‡åˆ°å¦‚ä¸‹é—®é¢˜ï¼š è¿™é‡Œçš„æ˜¯ 1.5 ç‰ˆæœ¬ï¼Œå¯¼è‡´æˆ‘ä»¬å¦‚æœæƒ³ç”¨äº›é«˜çº§çš„è¯­æ³•ä¼šå®Œå…¨æŠ¥é”™ã€‚ å¦‚æœä½ æŠŠè¿™ä¸ªç‰ˆæœ¬è®¾ç½®ä¸º 8 çš„ç‰ˆæœ¬åï¼Œ ä¸‹é¢ä¼šæç¤ºä½ ï¼Œé¡¹ç›®æ˜¯ä» maven å¯¼è¿‡æ¥çš„ï¼Œå¦‚æœ maven é…ç½®æ”¹å˜é‡æ–° reimport åï¼Œä»»ä½•åœ¨è¿™é‡Œçš„æ”¹å˜éƒ½ä¼šä¸¢å¤±ã€‚ åŒæ—¶ä½ ä¼šçœ‹åˆ°é¡¹ç›®çš„ Java Compile ç‰ˆæœ¬æ˜¯ 1.5 çš„ï¼Œå¦‚ä¸‹å›¾ï¼š åŒæ ·ï¼Œä½ åœ¨è¿™é‡Œä¿®æ”¹ï¼Œå¦‚æœ maven é…ç½®æ”¹å˜é‡æ–° reimport åï¼Œä»»ä½•åœ¨è¿™é‡Œçš„æ”¹å˜ä¹Ÿéƒ½ä¼šä¸¢å¤±ã€‚æˆ‘ä¼°è®¡ç¢°åˆ°è¿™ç§é—®é¢˜çš„ä¸å°‘ã€‚ æ€»ç»“èµ·æ¥åŸå› å°±æ˜¯ maven ä¸­çš„ç¼–è¯‘ç‰ˆæœ¬å°±æ˜¯ 1.5 çš„ï¼Œæ‰€ä»¥æ‰ä¼šå¯¼è‡´è¿™é‡Œçš„é—®é¢˜å‘ç”Ÿï¼Œå¦‚æœæƒ³å®Œå…¨ä¿®æ”¹å¥½ï¼ˆä¸€åŠ³æ°¸é€¸ï¼‰ã€‚è¯·ç›´æ¥å¯¹ pom æ–‡ä»¶åŠ¨åˆ€ï¼Œå°±æ˜¯å¹²ï¼ åªéœ€æŠŠå¤§é¡¹ç›®ï¼ˆnetty-parentï¼‰çš„é‚£ä¸ª pom.xml ä¿®æ”¹ä¸ªå±æ€§ï¼ŒæŠŠç‰ˆæœ¬ä¿¡æ¯æé«˜åˆ° 1.8ã€‚ åœ¨ç­‰å¾…å®ƒæ‹‰å– jar åŒ…å§ æå®Œäº†ä¹‹åå‘ç°è¿˜æœ‰ä¸¤ä¸ªæ¨¡å—ï¼ˆnetty-bomã€netty-dev-toolsï¼‰ä¸èƒ½è®¾ç½®åˆ° ç‰ˆæœ¬ï¼Œåªèƒ½æ‰‹åŠ¨çš„å’Œä¸Šé¢é‚£ç§è®¾ç½® language level å’Œ Java compile ä¸º 1.8 äº†ã€‚ æœ€åä½ ä¼šå‘ç°è¿™é‡Œçš„å®Œå…¨æ²¡æœ‰æŠ¥é”™äº†ï¼Œå¼€å¿ƒä¸ï¼Ÿ ä»£ç è¡Œæ•°ç»Ÿè®¡é¢ï¼Œçœ‹åˆ°é¡¹ç›®è¿™ä¹ˆå¤šå­æ¨¡å—ï¼Œä½ éƒ½ä¸çŸ¥é“è¯¥ä»å“ªé‡Œä¸‹æ‰‹å¼€å§‹çœ‹ï¼Œé‚£ä¹ˆæˆ‘å°±å†™äº†ä¸ªç®€å•çš„ Java è„šæœ¬å»å¤§æ¦‚çš„ç»Ÿè®¡æ¯ä¸ªå­é¡¹ç›®ä»£ç çš„è¡Œæ•°ã€‚å…ˆçœ‹çœ‹ç»Ÿè®¡ç»“æœï¼š æ•´ä¸ªé¡¹ç›®å·®ä¸å¤š 23 ä¸‡ã€‚ï¼ˆè¿‡æ»¤äº†ç©ºè¡Œã€å„ç§æ³¨é‡Šå’Œ @Override ä¹‹åçš„ Java ä»£ç è¡Œæ•°ï¼‰ï¼Œé è¿™ä¸ªæ•°å­—å¾ˆå“äººï¼ æ¥çœ‹çœ‹æˆ‘çš„è„šæœ¬ä»£ç å§ï¼š 123456789101112131415public static void main(String[] args) throws Exception &#123; long count = Files.walk(Paths.get(\"C:\\\\JetBrains\\\\IDEAProject\\\\netty\\\\transport-udt\")) // é€’å½’è·å¾—é¡¹ç›®ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ .filter(file -&gt; !Files.isDirectory(file)) // ç­›é€‰å‡ºæ–‡ä»¶ .filter(file -&gt; file.toString().endsWith(\".java\")) // ç­›é€‰å‡º java æ–‡ä»¶ .flatMap(Try.of(file -&gt; Files.lines(file), Stream.empty())) // å°†ä¼šæŠ›å‡ºå—æ£€å¼‚å¸¸çš„ Lambda åŒ…è£…ä¸º æŠ›å‡ºéå—æ£€å¼‚å¸¸çš„ Lambda .filter(line -&gt; !line.trim().isEmpty()) // è¿‡æ»¤æ‰ç©ºè¡Œ .filter(line -&gt; !line.trim().startsWith(\"//\")) //è¿‡æ»¤æ‰ //ä¹‹ç±»çš„æ³¨é‡Š .filter(line -&gt; !(line.trim().startsWith(\"/*\") &amp;&amp; line.trim().endsWith(\"*/\"))) //è¿‡æ»¤æ‰/* */ä¹‹ç±»çš„æ³¨é‡Š .filter(line -&gt; !(line.trim().startsWith(\"/*\") &amp;&amp; !line.trim().endsWith(\"*/\"))) //è¿‡æ»¤æ‰ä»¥ /* å¼€å¤´çš„æ³¨é‡Šï¼ˆå»é™¤ç©ºæ ¼åçš„å¼€å¤´ï¼‰ .filter(line -&gt; !(!line.trim().startsWith(\"/*\") &amp;&amp; line.trim().endsWith(\"*/\"))) //è¿‡æ»¤æ‰å·² */ ç»“å°¾çš„æ³¨é‡Š .filter(line -&gt; !line.trim().startsWith(\"*\")) //è¿‡æ»¤æ‰ javadoc ä¸­çš„æ–‡å­—æ³¨é‡Š .filter(line -&gt; !line.trim().startsWith(\"@Override\")) //è¿‡æ»¤æ‰æ–¹æ³•ä¸Šå« @Override çš„ .count(); System.out.println(\"ä»£ç è¡Œæ•°ï¼š\" + count);&#125; åé¢æˆ‘ä¼šæŠŠæˆ‘é˜…è¯»æºç çš„ä¸­æ–‡æ³¨é‡ŠåŠè§£æä¹‹ç±»çš„æ›´æ–°åˆ°æˆ‘çš„ GitHub å»ï¼ˆæ¬¢è¿å…³æ³¨ã€æˆ‘æ˜¯æ¥éª— star çš„ï¼‰ï¼Œhttps://github.com/zhisheng17/netty ï¼Œå¦‚æœä½ ä¸æƒ³å»è‡ªå·±è®¾ç½®ä¸Šé¢æ‰€è¯´çš„è¿™äº›ï¼ˆå·æ‡’ï¼‰ï¼Œé‚£å°±ç›´æ¥ fork æˆ‘çš„è¿™ä»½å§ï¼ æœ€åç¯å¢ƒæ­å»ºå°±å†™åˆ°è¿™é‡Œäº†ï¼Œè½¬è½½è¯·æ³¨æ˜åœ°å€ï¼šhttp://www.54tianzhisheng.cn/2017/12/08/netty-01-env/","tags":[{"name":"Java","slug":"Java","permalink":"http://yoursite.com/tags/Java/"},{"name":"Netty","slug":"Netty","permalink":"http://yoursite.com/tags/Netty/"}]},{"title":"RestTemplate è¯¦è§£","date":"2017-12-02T16:00:00.000Z","path":"2017/12/03/RestTemplate/","text":"èƒŒæ™¯è¿™æ®µæ—¶é—´è‡ªå·±åšçš„é¡¹ç›®ä¸­éœ€è¦è°ƒç”¨æœåŠ¡æä¾›è€…çš„æœåŠ¡ï¼ˆæ¥å£ï¼‰ï¼Œå…·ä½“å°±æ˜¯ï¼šæˆ‘è¿™è¾¹éœ€è¦å°†é¡µé¢æ‰€è¾“å…¥çš„ Groovy è„šæœ¬ä»£ç ä¼ ç»™åˆ«äººæä¾›çš„æœåŠ¡æ¥å£ï¼Œç„¶åé‚£è¾¹è¿”å›è„šæœ¬ç¼–è¯‘çš„ç»“æœç»™æˆ‘ï¼Œæˆ‘éœ€è¦å°†ç¼–è¯‘ç»“æœå±•ç¤ºåœ¨é¡µé¢ï¼Œç”¨çš„å°±æ˜¯ RestTemplate äº†ï¼Œé‚£ RestTemplate æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿç®€å•è¯´å°±æ˜¯ï¼šç®€åŒ–äº†å‘èµ· HTTP è¯·æ±‚ä»¥åŠå¤„ç†å“åº”çš„è¿‡ç¨‹ï¼Œå¹¶ä¸”æ”¯æŒ REST ã€‚ä¸‹æ–‡å°±ç¨å¾®æ€»ç»“ä¸‹ã€‚ å¦‚ä½•ä½¿ç”¨å…ˆè®²è®²å¦‚ä½•ä½¿ç”¨å§ï¼Œæˆ‘é¡¹ç›®æ˜¯ SpringBoot é¡¹ç›®ï¼Œå¯ä»¥åœ¨å¯åŠ¨ç±»ä¸­åŠ å…¥ï¼š 1234@Beanpublic RestTemplate restTemplate() &#123; return new RestTemplate();&#125; ç„¶ååœ¨ Controller å±‚ä¸­å¼•å…¥ï¼š 12@Autowiredprivate RestTemplate restTemplate; æ¥ä¸‹æ¥å°±å¯ä»¥åœ¨ Controller ä¸­å„ä¸ªæ–¹æ³•ä¸­ä½¿ç”¨ restTemplate äº†ï¼Œä½†æ˜¯ restTemplate é‡Œé¢æœ‰ä»€ä¹ˆæ–¹æ³•å‘¢ï¼Ÿ RestTemplate å†…éƒ¨æ–¹æ³• ä»å›¾ä¸­ RestTemplate å¯ä»¥çœ‹åˆ°æœ‰å¾ˆå¤šæ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥æå–å‡ºä¸»è¦çš„å‡ ç§æ–¹æ³•æ˜¯ï¼š GET POST PUT DELETE HEAD OPTIONS EXCHANGE EXECUTE å›¾ç‰‡ä¸­ä¾ç„¶å¯ä»¥çŸ¥é“ RestTemplate ç±»ä¸­çš„æ–¹æ³•ä¸»è¦æ˜¯æ¥è‡ªæ¥å£ RestOperationsï¼Œä¸‹é¢æˆ‘ä»¬å…·ä½“çœ‹çœ‹è¿™äº›æ–¹æ³•é‡Œé¢çš„å…·ä½“å®ç°ä¸è¯¥å¦‚ä½•ä½¿ç”¨ã€‚ Get æ–¹æ³•åœ¨ RestTemplate ä¸­ï¼Œå‘é€ä¸€ä¸ª GET è¯·æ±‚ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¦‚ä¸‹ä¸¤ç§æ–¹å¼ï¼š getForEntity getForEntity æ–¹æ³•çš„è¿”å›å€¼æ˜¯ä¸€ä¸ªResponseEntity&lt;T&gt;ï¼ŒResponseEntity&lt;T&gt;æ˜¯ Spring å¯¹ HTTP è¯·æ±‚å“åº”çš„å°è£…ï¼ŒåŒ…æ‹¬äº†å‡ ä¸ªé‡è¦çš„å…ƒç´ ï¼Œå¦‚å“åº”ç ã€contentTypeã€contentLengthã€å“åº”æ¶ˆæ¯ä½“ç­‰ã€‚æ¯”å¦‚ä¸‹é¢ä¸€ä¸ªä¾‹å­ï¼š 1234567891011121314@RequestMapping(\"/gethello\")public String getHello() &#123; ResponseEntity&lt;String&gt; responseEntity = restTemplate.getForEntity(\"http://HELLO-SERVICE/hello\", String.class); String body = responseEntity.getBody(); HttpStatus statusCode = responseEntity.getStatusCode(); int statusCodeValue = responseEntity.getStatusCodeValue(); HttpHeaders headers = responseEntity.getHeaders(); StringBuffer result = new StringBuffer(); result.append(\"responseEntity.getBody()ï¼š\").append(body).append(\"&lt;hr&gt;\") .append(\"responseEntity.getStatusCode()ï¼š\").append(statusCode).append(\"&lt;hr&gt;\") .append(\"responseEntity.getStatusCodeValue()ï¼š\").append(statusCodeValue).append(\"&lt;hr&gt;\") .append(\"responseEntity.getHeaders()ï¼š\").append(headers).append(\"&lt;hr&gt;\"); return result.toString();&#125; å…³äºè¿™æ®µä»£ç ï¼Œè¯´å¦‚ä¸‹å‡ ç‚¹ï¼š getForEntity çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºæˆ‘è¦è°ƒç”¨çš„æœåŠ¡çš„åœ°å€ï¼Œè¿™é‡Œæˆ‘è°ƒç”¨äº†æœåŠ¡æä¾›è€…æä¾›çš„ /hello æ¥å£ï¼Œæ³¨æ„è¿™é‡Œæ˜¯é€šè¿‡æœåŠ¡åè°ƒç”¨è€Œä¸æ˜¯æœåŠ¡åœ°å€ï¼Œå¦‚æœå†™æˆæœåŠ¡åœ°å€å°±æ²¡æ³•å®ç°å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡äº†ã€‚ï¼ˆå¤‡æ³¨ï¼šæˆ‘é¡¹ç›®ä¸­éœ€è¦é€šè¿‡ ConsulClient å»è·å–æœåŠ¡åï¼Œç„¶ååœ¨å»è·å–æœåŠ¡çš„ IP å’Œ Portï¼Œå¹¶æŠŠå®ƒæ‹¼æ¥èµ·æ¥ç»„åˆæˆæˆ‘çš„æœåŠ¡åœ°å€ï¼Œæ‰€ä»¥å°±æ²¡æ³•å®ç°å®¢æˆ·ç«¯çš„è´Ÿè½½å‡è¡¡äº†ï¼Œå¦‚æœè¦æ˜¯å®ç°è´Ÿè½½å‡è¡¡ï¼Œå¯ä»¥åœ¨ SpringBoot å¯åŠ¨ç±»çš„ä¸­åŠ å…¥æ³¨è§£ @LoadBalanced, å¦‚ä¸‹: 12345@Bean@LoadBalancedpublic RestTemplate restTemplate() &#123; return new RestTemplate();&#125; ï¼‰ getForEntity ç¬¬äºŒä¸ªå‚æ•° String.class è¡¨ç¤ºæˆ‘å¸Œæœ›è¿”å›çš„ body ç±»å‹æ˜¯ String æ‹¿åˆ°è¿”å›ç»“æœä¹‹åï¼Œå°†è¿”å›ç»“æœéå†æ‰“å°å‡ºæ¥ æœ‰æ—¶å€™æˆ‘åœ¨è°ƒç”¨æœåŠ¡æä¾›è€…æä¾›çš„æ¥å£æ—¶ï¼Œå¯èƒ½éœ€è¦ä¼ é€’å‚æ•°ï¼Œæœ‰ä¸¤ç§ä¸åŒçš„æ–¹å¼: 123456789101112@RequestMapping(\"/sayhello\")public String sayHello() &#123; ResponseEntity&lt;String&gt; responseEntity = restTemplate.getForEntity(\"http://HELLO-SERVICE/sayhello?name=&#123;1&#125;\", String.class, \"å¼ ä¸‰\"); return responseEntity.getBody();&#125;@RequestMapping(\"/sayhello2\")public String sayHello2() &#123; Map&lt;String, String&gt; map = new HashMap&lt;&gt;(); map.put(\"name\", \"æå››\"); ResponseEntity&lt;String&gt; responseEntity = restTemplate.getForEntity(\"http://HELLO-SERVICE/sayhello?name=&#123;name&#125;\", String.class, map); return responseEntity.getBody();&#125; å¯ä»¥ç”¨ä¸€ä¸ªæ•°å­—åšå ä½ç¬¦ï¼Œæœ€åæ˜¯ä¸€ä¸ªå¯å˜é•¿åº¦çš„å‚æ•°ï¼Œæ¥ä¸€ ä¸€æ›¿æ¢å‰é¢çš„å ä½ç¬¦ ä¹Ÿå¯ä»¥å‰é¢ä½¿ç”¨ name={name} è¿™ç§å½¢å¼ï¼Œæœ€åä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ª mapï¼Œmap çš„ key å³ä¸ºå‰è¾¹å ä½ç¬¦çš„åå­—ï¼Œmapçš„ value ä¸ºå‚æ•°å€¼ ç¬¬ä¸€ä¸ªè°ƒç”¨åœ°å€ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªURIè€Œä¸æ˜¯å­—ç¬¦ä¸²ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬æ„å»ºä¸€ä¸ªURIå³å¯ï¼Œå‚æ•°ç¥é©¬çš„éƒ½åŒ…å«åœ¨URIä¸­äº†ï¼Œå¦‚ä¸‹ï¼š 1234567@RequestMapping(\"/sayhello3\")public String sayHello3() &#123; UriComponents uriComponents = UriComponentsBuilder.fromUriString(\"http://HELLO-SERVICE/sayhello?name=&#123;name&#125;\").build().expand(\"ç‹äº”\").encode(); URI uri = uriComponents.toUri(); ResponseEntity&lt;String&gt; responseEntity = restTemplate.getForEntity(uri, String.class); return responseEntity.getBody();&#125; é€šè¿‡Springä¸­æä¾›çš„UriComponentsæ¥æ„å»ºUriå³å¯ã€‚ å½“ç„¶ï¼ŒæœåŠ¡æä¾›è€…ä¸ä»…å¯ä»¥è¿”å›Stringï¼Œä¹Ÿå¯ä»¥è¿”å›ä¸€ä¸ªè‡ªå®šä¹‰ç±»å‹çš„å¯¹è±¡ï¼Œæ¯”å¦‚æˆ‘çš„æœåŠ¡æä¾›è€…ä¸­æœ‰å¦‚ä¸‹æ–¹æ³•ï¼š 1234@RequestMapping(value = \"/getbook1\", method = RequestMethod.GET)public Book book1() &#123; return new Book(\"ä¸‰å›½æ¼”ä¹‰\", 90, \"ç½—è´¯ä¸­\", \"èŠ±åŸå‡ºç‰ˆç¤¾\");&#125; å¯¹äºè¯¥æ–¹æ³•æˆ‘å¯ä»¥åœ¨æœåŠ¡æ¶ˆè´¹è€…ä¸­é€šè¿‡å¦‚ä¸‹æ–¹å¼æ¥è°ƒç”¨ï¼š 12345@RequestMapping(\"/book1\")public Book book1() &#123; ResponseEntity&lt;Book&gt; responseEntity = restTemplate.getForEntity(\"http://HELLO-SERVICE/getbook1\", Book.class); return responseEntity.getBody();&#125; è¿è¡Œç»“æœå¦‚ä¸‹ï¼š getForObject â€‹ getForObject å‡½æ•°å®é™…ä¸Šæ˜¯å¯¹ getForEntity å‡½æ•°çš„è¿›ä¸€æ­¥å°è£…ï¼Œå¦‚æœä½ åªå…³æ³¨è¿”å›çš„æ¶ˆæ¯ä½“çš„å†…å®¹ï¼Œå¯¹å…¶ä»–ä¿¡æ¯éƒ½ä¸å…³æ³¨ï¼Œæ­¤æ—¶å¯ä»¥ä½¿ç”¨ getForObjectï¼Œä¸¾ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œå¦‚ä¸‹ï¼š 12345@RequestMapping(\"/book2\")public Book book2() &#123; Book book = restTemplate.getForObject(\"http://HELLO-SERVICE/getbook1\", Book.class); return book;&#125; POST æ–¹æ³•åœ¨ RestTemplate ä¸­ï¼ŒPOST è¯·æ±‚å¯ä»¥é€šè¿‡å¦‚ä¸‹ä¸‰ä¸ªæ–¹æ³•æ¥å‘èµ·ï¼š postForEntity è¯¥æ–¹æ³•å’Œgetè¯·æ±‚ä¸­çš„getForEntityæ–¹æ³•ç±»ä¼¼ï¼Œå¦‚ä¸‹ä¾‹å­ï¼š 1234567@RequestMapping(\"/book3\")public Book book3() &#123; Book book = new Book(); book.setName(\"çº¢æ¥¼æ¢¦\"); ResponseEntity&lt;Book&gt; responseEntity = restTemplate.postForEntity(\"http://HELLO-SERVICE/getbook2\", book, Book.class); return responseEntity.getBody();&#125; æ–¹æ³•çš„ç¬¬ä¸€å‚æ•°è¡¨ç¤ºè¦è°ƒç”¨çš„æœåŠ¡çš„åœ°å€ æ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°è¡¨ç¤ºä¸Šä¼ çš„å‚æ•° æ–¹æ³•çš„ç¬¬ä¸‰ä¸ªå‚æ•°è¡¨ç¤ºè¿”å›çš„æ¶ˆæ¯ä½“çš„æ•°æ®ç±»å‹ æˆ‘è¿™é‡Œåˆ›å»ºäº†ä¸€ä¸ªBookå¯¹è±¡ï¼Œè¿™ä¸ªBookå¯¹è±¡åªæœ‰nameå±æ€§æœ‰å€¼ï¼Œå°†ä¹‹ä¼ é€’åˆ°æœåŠ¡æä¾›è€…é‚£é‡Œå»ï¼ŒæœåŠ¡æä¾›è€…ä»£ç å¦‚ä¸‹ï¼š 12345678@RequestMapping(value = \"/getbook2\", method = RequestMethod.POST)public Book book2(@RequestBody Book book) &#123; System.out.println(book.getName()); book.setPrice(33); book.setAuthor(\"æ›¹é›ªèŠ¹\"); book.setPublisher(\"äººæ°‘æ–‡å­¦å‡ºç‰ˆç¤¾\"); return book;&#125; æœåŠ¡æä¾›è€…æ¥æ”¶åˆ°æœåŠ¡æ¶ˆè´¹è€…ä¼ æ¥çš„å‚æ•°bookï¼Œç»™å…¶ä»–å±æ€§è®¾ç½®ä¸Šå€¼å†è¿”å›ï¼Œè°ƒç”¨ç»“æœå¦‚ä¸‹ï¼š postForObject å¦‚æœä½ åªå…³æ³¨ï¼Œè¿”å›çš„æ¶ˆæ¯ä½“ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨postForObjectã€‚ç”¨æ³•å’ŒgetForObjectä¸€è‡´ã€‚ postForLocation postForLocation ä¹Ÿæ˜¯æäº¤æ–°èµ„æºï¼Œæäº¤æˆåŠŸä¹‹åï¼Œè¿”å›æ–°èµ„æºçš„ URIï¼ŒpostForLocation çš„å‚æ•°å’Œå‰é¢ä¸¤ç§çš„å‚æ•°åŸºæœ¬ä¸€è‡´ï¼Œåªä¸è¿‡è¯¥æ–¹æ³•çš„è¿”å›å€¼ä¸º URI ï¼Œè¿™ä¸ªåªéœ€è¦æœåŠ¡æä¾›è€…è¿”å›ä¸€ä¸ª URI å³å¯ï¼Œè¯¥ URI è¡¨ç¤ºæ–°èµ„æºçš„ä½ç½®ã€‚ PUT æ–¹æ³• åœ¨ RestTemplate ä¸­ï¼ŒPUT è¯·æ±‚å¯ä»¥é€šè¿‡ put æ–¹æ³•è°ƒç”¨ï¼Œput æ–¹æ³•çš„å‚æ•°å’Œå‰é¢ä»‹ç»çš„ postForEntity æ–¹æ³•çš„å‚æ•°åŸºæœ¬ä¸€è‡´ï¼Œåªæ˜¯ put æ–¹æ³•æ²¡æœ‰è¿”å›å€¼è€Œå·²ã€‚ä¸¾ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œå¦‚ä¸‹ï¼š 123456@RequestMapping(\"/put\")public void put() &#123; Book book = new Book(); book.setName(\"çº¢æ¥¼æ¢¦\"); restTemplate.put(\"http://HELLO-SERVICE/getbook3/&#123;1&#125;\", book, 99);&#125; bookå¯¹è±¡æ˜¯æˆ‘è¦æäº¤çš„å‚æ•°ï¼Œæœ€åçš„99ç”¨æ¥æ›¿æ¢å‰é¢çš„å ä½ç¬¦{1} DELETE æ–¹æ³• delete è¯·æ±‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ delete æ–¹æ³•è°ƒç”¨æ¥å®ç°ï¼Œå¦‚ä¸‹ä¾‹å­ï¼š 1234@RequestMapping(\"/delete\")public void delete() &#123; restTemplate.delete(\"http://HELLO-SERVICE/getbook4/&#123;1&#125;\", 100);&#125; HEADER æ–¹æ³• è¿”å›èµ„æºçš„æ‰€æœ‰ HTTP headersã€‚ OPTIONS é—®å¯ä»¥æ‰§è¡Œå“ªäº›æ–¹æ³•ã€‚ EXCHANGE ä¸å…¶å®ƒæ¥å£çš„ä¸åŒï¼š å…è®¸è°ƒç”¨è€…æŒ‡å®šHTTPè¯·æ±‚çš„æ–¹æ³•ï¼ˆGET,POST,PUTç­‰ï¼‰ å¯ä»¥åœ¨è¯·æ±‚ä¸­å¢åŠ bodyä»¥åŠå¤´ä¿¡æ¯ï¼Œå…¶å†…å®¹é€šè¿‡å‚æ•° HttpEntity&lt;?&gt;requestEntity æè¿° exchangeæ”¯æŒâ€˜å«å‚æ•°çš„ç±»å‹â€™ï¼ˆå³æ³›å‹ç±»ï¼‰ä½œä¸ºè¿”å›ç±»å‹ï¼Œè¯¥ç‰¹æ€§é€šè¿‡ ParameterizedTypeReferenceresponseType æè¿° EXECUTEç»†å¿ƒçš„ä½ ï¼Œä¸çŸ¥é“æœ‰æ²¡æœ‰å‘ç°ä¸Šé¢æ‰€æœ‰çš„æ–¹æ³•å†…éƒ¨è¿”å›å€¼éƒ½è°ƒç”¨äº†åŒä¸€ä¸ªæ–¹æ³• â€”â€” execute æ–¹æ³•ã€‚ ä¸‹é¢æˆ‘ä»¬æ¥çœ‹çœ‹ï¼š å¯ä»¥çœ‹åˆ°ï¼ŒExcuteæ–¹æ³•åªæ˜¯å°† String æ ¼å¼çš„ URI è½¬æˆäº† java.net.URIï¼Œä¹‹åè°ƒç”¨äº†doExecuteæ–¹æ³•ã€‚æ•´ä¸ªè°ƒç”¨è¿‡ç¨‹å…³é”®èµ·ä½œç”¨çš„æ˜¯ doExecute æ–¹æ³• doExecute æ–¹æ³• è¿™é‡Œéœ€è¦äº†è§£ä¸¤ä¸ªç±»ï¼š RequestCallback å’Œ ResponseExtractor RestTemplate ç±»ä¸­å¯ä»¥çœ‹åˆ°ä»–ä»¬ä¸¤çš„å®ç°ç±»ã€‚ RequestCallback ï¼šç”¨äºæ“ä½œè¯·æ±‚å¤´å’Œbodyï¼Œåœ¨è¯·æ±‚å‘å‡ºå‰æ‰§è¡Œã€‚ è¯¥æ¥å£æœ‰ä¸¤ä¸ªå®ç°ç±»ï¼š AcceptHeaderRequestCallback åªå¤„ç†è¯·æ±‚å¤´ï¼Œç”¨äºgetXXX()æ–¹æ³•ã€‚ HttpEntityRequestCallback ç»§æ‰¿äºAcceptHeaderRequestCallbackå¯ä»¥å¤„ç†è¯·æ±‚å¤´å’Œbodyï¼Œç”¨äºputXXX()ã€postXXX()å’Œexchange()æ–¹æ³•ã€‚ ResponseExtractorï¼šè§£æHTTPå“åº”çš„æ•°æ®ï¼Œè€Œä¸”ä¸éœ€è¦æ‹…å¿ƒå¼‚å¸¸å’Œèµ„æºçš„å…³é—­ ä¸Šé¢å›¾çº¸è¿™ä¸ªå®ç°ç±» ResponseEntityResponseExtractor çš„ä½œç”¨æ˜¯ï¼šä½¿ç”¨ HttpMessageConverterExtractor æå– bodyï¼ˆå§”æ‰˜æ¨¡å¼ï¼‰ï¼Œç„¶åå°† body å’Œå“åº”å¤´ã€çŠ¶æ€å°è£…æˆ ResponseEntity å¯¹è±¡ã€‚ æœ€åè½¬è½½è¯·æ³¨æ˜åœ°å€ï¼šhttp://www.54tianzhisheng.cn/2017/12/03/RestTemplate/ å‚è€ƒèµ„æ–™1ã€https://www.cnblogs.com/caolei1108/p/6169950.html 2ã€https://segmentfault.com/a/1190000011093597 å¦‚æœæƒ³å’Œæˆ‘è¿›ä¸€æ­¥äº¤æµè¯·å…³æ³¨ï¼š","tags":[{"name":"Spring","slug":"Spring","permalink":"http://yoursite.com/tags/Spring/"}]},{"title":"å®ä¹ åœˆç¾¤é‡Œæé—®å°è®°","date":"2017-12-01T16:00:00.000Z","path":"2017/12/02/wx-01/","text":"","tags":[{"name":"å®ä¹ åœˆ","slug":"å®ä¹ åœˆ","permalink":"http://yoursite.com/tags/å®ä¹ åœˆ/"}]},{"title":"Dockerç³»åˆ—æ–‡ç« ï¼ˆä¸€ï¼‰ï¼šåŸºäº Harbor æ­å»º Docker ç§æœ‰é•œåƒä»“åº“","date":"2017-11-25T16:00:00.000Z","path":"2017/11/26/Docker-harbor/","text":"ä»€ä¹ˆæ˜¯ Harborï¼Ÿç¬¬ä¸€æ¬¡ä½¿ç”¨è¿™ä¸ªçš„æ—¶å€™æ˜¯åˆšè¿›å…¬å¸å¤„ç†çš„ç¬¬ä¸€ä¸ªä»»åŠ¡çš„æ—¶å€™ï¼Œå‘ç° Harbor å°±æ˜¯ä¸€ä¸ªç”¨äºå­˜å‚¨å’Œåˆ†å‘ Docker é•œåƒçš„ä¼ä¸šçº§Registry æœåŠ¡å™¨ã€‚ç½‘ä¸Šæ‰¾åˆ°ä¸€ä¸ª Harbor çš„æ¶æ„å›¾ï¼š Harbor æ˜¯ VMware å…¬å¸å¼€æºçš„ä¼ä¸šçº§ DockerRegistry é¡¹ç›®ï¼Œé¡¹ç›®åœ°å€ä¸º https://github.com/vmware/harborã€‚å…¶ç›®æ ‡æ˜¯å¸®åŠ©ç”¨æˆ·è¿…é€Ÿæ­å»ºä¸€ä¸ªä¼ä¸šçº§çš„ Docker registry æœåŠ¡ã€‚å®ƒä»¥ Docker å…¬å¸å¼€æºçš„ registry ä¸ºåŸºç¡€ï¼Œæä¾›äº†ç®¡ç†UIï¼ŒåŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶(Role Based Access Control)ï¼ŒAD/LDAPé›†æˆã€ä»¥åŠå®¡è®¡æ—¥å¿—(Auditlogging) ç­‰ä¼ä¸šç”¨æˆ·éœ€æ±‚çš„åŠŸèƒ½ï¼ŒåŒæ—¶è¿˜åŸç”Ÿæ”¯æŒä¸­æ–‡ã€‚Harbor çš„æ¯ä¸ªç»„ä»¶éƒ½æ˜¯ä»¥ Docker å®¹å™¨çš„å½¢å¼æ„å»ºçš„ï¼Œä½¿ç”¨ Docker Compose æ¥å¯¹å®ƒè¿›è¡Œéƒ¨ç½²ã€‚ ç¯å¢ƒå‡†å¤‡1ã€è‡ªå·±åœ¨è…¾è®¯äº‘ä¹°çš„æœåŠ¡å™¨ï¼ˆCentOS7.3ï¼‰ 2ã€Docker ç‰ˆæœ¬ï¼š17.05.0-ce 3ã€Docker-composeï¼š1.17.1 4ã€Harborï¼š1.1.2 å®‰è£… Dockerå› ä¸ºç³»ç»Ÿæ˜¯ CentOS 7.3 ï¼Œå†…æ ¸å•¥çš„éƒ½å·²ç»æ˜¯ 3.10ï¼Œæ‰€ä»¥ä¸ç”¨æ‹…å¿ƒå†…æ ¸å‡çº§çš„é—®é¢˜ï¼Œä¸€äº›æ“ä½œå•¥çš„åœ¨ 7.x ä¸Šæ“ä½œä¹Ÿå¾ˆæ–¹ä¾¿ã€‚ 1234567891011121314151617181920212223yum update //ç³»ç»Ÿç‰ˆæœ¬æ›´æ–°vim /etc/yum.repos.d/docker.repo //æ·»åŠ ä»¥ä¸‹å†…å®¹[dockerrepo]name=Docker Repositorybaseurl=https://yum.dockerproject.org/repo/main/centos/7/enabled=1gpgcheck=1gpgkey=https://yum.dockerproject.org/gpg//ä¸‹é¢å®‰è£… Docker å¼•æ“yum install docker-engine -y//å®‰è£…dockerå¼•æ“ï¼Œæ­¤æ­¥ä¹Ÿå¯ä½œä¸ºæ›´æ–°dockerç‰ˆæœ¬çš„æ“ä½œï¼šå…ˆ#systemctl stop docker åœæ­¢dockeræœåŠ¡ï¼Œå†#yum install docker-engine æ›´æ–°dockerç‰ˆæœ¬systemctl enable docker.servicesystemctl start docker //å¯åŠ¨dockerå®ˆæŠ¤è¿›ç¨‹docker info //æŸ¥çœ‹dockerè¿è¡Œæƒ…å†µdocker -v //æŸ¥çœ‹ç‰ˆæœ¬ä¿¡æ¯ ä¿®æ”¹ Docker é…ç½®æ–‡ä»¶ /etc/default/docker å¦‚ä¸‹ï¼š 1DOCKER_OPTS=\"--registry-mirror=http://aad0405c.m.daocloud.io\" //æ¢æˆå›½å†…çš„é•œåƒåŠ é€Ÿæºï¼Œä¸ç„¶æ‹‰å–é•œåƒç®€ç›´é¾Ÿé€Ÿï¼Œä¸æƒ³åœ¨åæ§½äº† ä½¿ç”¨ service docker restart é‡å¯ Docker æœåŠ¡å³å¯ã€‚ æˆ–è€…ç”¨å®˜æ–¹æä¾›çš„æ–¹å¼ï¼š 1curl -sSL https://get.daocloud.io/daotools/set_mirror.sh | sh -s http://ef017c13.m.daocloud.io å®‰è£… Docker-composeå¦‚æœæ˜¯æƒ³ç›´æ¥å‘½ä»¤å®‰è£…ä¹Ÿè¡Œï¼Œ 1234567891011121314ä¸‹è½½æŒ‡å®šç‰ˆæœ¬çš„docker-composesudo curl -L https://github.com/docker/compose/releases/download/1.17.0/docker-compose-`uname -s`-`uname -m` -o /usr/local/bin/docker-composeå¯¹äºŒè¿›åˆ¶æ–‡ä»¶èµ‹å¯æ‰§è¡Œæƒé™chmod +x /usr/local/bin/docker-composeæµ‹è¯•ä¸‹docker-composeæ˜¯å¦å®‰è£…æˆåŠŸdocker-compose --versionå‡ºç°å¦‚ä¸‹docker-compose version 1.17.1, build 6d101fb ä½†æ˜¯ï¼Œè¿™ç§æ–¹æ³•ç®€ç›´é¾Ÿé€Ÿï¼Œå¹¸å¥½è¿˜æœ‰ç§æ–¹æ³•ï¼Œ è§è¿™é‡Œï¼šhttps://docs.docker.com/compose/install/#install-compose è¿™ç§éœ€è¦é€šè¿‡ Python çš„ pip å®‰è£… å®‰è£… pip123456789wget --no-check-certificate https://pypi.python.org/packages/source/s/setuptools/setuptools-1.4.2.tar.gztar -vxf setuptools-1.4.2.tar.gzcd setuptools-1.4.2python2.7 setup.py install //å› ä¸ºæœåŠ¡å™¨è‡ªå¸¦ Python 2.7easy_install-2.7 pip å®‰è£… docker compose123pip install docker-composedocker-compose --version //æµ‹è¯•å®‰è£…æ˜¯å¦æˆåŠŸ å®‰è£… Harbor12345wget https://github.com/vmware/harbor/releases/download/v1.1.2/harbor-offline-installer-v1.1.2.tgzç¦»çº¿å®‰è£…åŒ…,ä¹Ÿæ˜¯é¾Ÿé€Ÿï¼ŒæŠŠè¿™ä¸ªä¸‹è½½é“¾æ¥ç”¨è¿…é›·ä¸‹è½½ï¼Œé€Ÿåº¦å´è´¼å¿«ï¼Œå˜¿å˜¿ï¼Œç„¶åå†ä¼ åˆ°æœåŠ¡å™¨ä¸Šå»ï¼Œæ•´ä¸ªè¿‡ç¨‹å¿«å¾ˆå¤šï¼tar -zxvf harbor-offline-installer-v1.1.2.tgz è§£å‹ç¼©ä¹‹åï¼Œè¿›å…¥ç›®å½•ä¸‹ä¼šçœ‹åˆ° harbor.cfg æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶å°±æ˜¯ Harbor çš„é…ç½®æ–‡ä»¶ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192939495## Configuration file of Harbor# hostnameè®¾ç½®è®¿é—®åœ°å€ï¼Œå¯ä»¥ä½¿ç”¨ipã€åŸŸåï¼Œä¸å¯ä»¥è®¾ç½®ä¸º127.0.0.1æˆ–localhosthostname = 115.159.227.249 #è¿™é‡Œæˆ‘å…ˆé…ç½®æˆ‘çš„æœåŠ¡å™¨IPåœ°å€# è®¿é—®åè®®ï¼Œé»˜è®¤æ˜¯httpï¼Œä¹Ÿå¯ä»¥è®¾ç½®httpsï¼Œå¦‚æœè®¾ç½®httpsï¼Œåˆ™nginx ssléœ€è¦è®¾ç½®onui_url_protocol = http# mysqlæ•°æ®åº“rootç”¨æˆ·é»˜è®¤å¯†ç root123ï¼Œå®é™…ä½¿ç”¨æ—¶ä¿®æ”¹ä¸‹db_password = root123#Maximum number of job workers in job servicemax_job_workers = 3#Determine whether or not to generate certificate for the registry&apos;s token.#If the value is on, the prepare script creates new root cert and private key#for generating token to access the registry. If the value is off the default key/cert will be used.#This flag also controls the creation of the notary signer&apos;s cert.customize_crt = on#The path of cert and key files for nginx, they are applied only the protocol is set to httpsssl_cert = /data/cert/server.crtssl_cert_key = /data/cert/server.key#The path of secretkey storagesecretkey_path = /data#Admiral&apos;s url, comment this attribute, or set its value to NA when Harbor is standaloneadmiral_url = NA#NOTES: The properties between BEGIN INITIAL PROPERTIES and END INITIAL PROPERTIES#only take effect in the first boot, the subsequent changes of these properties#should be performed on web ui#************************BEGIN INITIAL PROPERTIES************************#Email account settings for sending out password resetting emails.#Email server uses the given username and password to authenticate on TLS connections to host and act as identity.#Identity left blank to act as username.email_identity =email_server = smtp.mydomain.comemail_server_port = 25email_username = sample_admin@mydomain.comemail_password = abcemail_from = admin &lt;sample_admin@mydomain.com&gt;email_ssl = false##The initial password of Harbor admin, only works for the first time when Harbor starts.#It has no effect after the first launch of Harbor.# å¯åŠ¨Harboråï¼Œç®¡ç†å‘˜UIç™»å½•çš„å¯†ç ï¼Œé»˜è®¤æ˜¯Harbor12345harbor_admin_password = Harbor12345# è®¤è¯æ–¹å¼ï¼Œè¿™é‡Œæ”¯æŒå¤šç§è®¤è¯æ–¹å¼ï¼Œå¦‚LADPã€æœ¬æ¬¡å­˜å‚¨ã€æ•°æ®åº“è®¤è¯ã€‚é»˜è®¤æ˜¯db_authï¼Œmysqlæ•°æ®åº“è®¤è¯auth_mode = db_auth#The url for an ldap endpoint.ldap_url = ldaps://ldap.mydomain.com#A user&apos;s DN who has the permission to search the LDAP/AD server.#If your LDAP/AD server does not support anonymous search, you should configure this DN and ldap_search_pwd.#ldap_searchdn = uid=searchuser,ou=people,dc=mydomain,dc=com#the password of the ldap_searchdn#ldap_search_pwd = password#The base DN from which to look up a user in LDAP/ADldap_basedn = ou=people,dc=mydomain,dc=com#Search filter for LDAP/AD, make sure the syntax of the filter is correct.#ldap_filter = (objectClass=person)# The attribute used in a search to match a user, it could be uid, cn, email, sAMAccountName or other attributes depending on your LDAP/AD ldap_uid = uid#the scope to search for users, 1-LDAP_SCOPE_BASE, 2-LDAP_SCOPE_ONELEVEL, 3-LDAP_SCOPE_SUBTREEldap_scope = 3#Timeout (in seconds) when connecting to an LDAP Server. The default value (and most reasonable) is 5 seconds.ldap_timeout = 5# æ˜¯å¦å¼€å¯è‡ªæ³¨å†Œself_registration = on# Tokenæœ‰æ•ˆæ—¶é—´ï¼Œé»˜è®¤30åˆ†é’Ÿtoken_expiration = 30# ç”¨æˆ·åˆ›å»ºé¡¹ç›®æƒé™æ§åˆ¶ï¼Œé»˜è®¤æ˜¯everyoneï¼ˆæ‰€æœ‰äººï¼‰ï¼Œä¹Ÿå¯ä»¥è®¾ç½®ä¸ºadminonlyï¼ˆåªèƒ½ç®¡ç†å‘˜ï¼‰project_creation_restriction = everyone#Determine whether the job service should verify the ssl cert when it connects to a remote registry.#Set this flag to off when the remote registry uses a self-signed or untrusted certificate.verify_remote_cert = on#************************END INITIAL PROPERTIES************************ å¯åŠ¨ harborï¼Œä¿®æ”¹å®Œé…ç½®æ–‡ä»¶åï¼Œåœ¨çš„å½“å‰ç›®å½•æ‰§è¡Œ./install.shï¼ŒHarboræœåŠ¡å°±ä¼šæ ¹æ®å½“æœŸç›®å½•ä¸‹çš„docker-compose.ymlå¼€å§‹ä¸‹è½½ä¾èµ–çš„é•œåƒï¼Œæ£€æµ‹å¹¶æŒ‰ç…§é¡ºåºä¾æ¬¡å¯åŠ¨å„ä¸ªæœåŠ¡ã€‚ å¯åŠ¨å®Œæˆåï¼Œæˆ‘ä»¬è®¿é—®åˆšè®¾ç½®çš„ hostname å³å¯ï¼Œhttp://115.159.227.249/ï¼Œé»˜è®¤æ˜¯80ç«¯å£ï¼Œå¦‚æœç«¯å£å ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥å»ä¿®æ”¹docker-compose.ymlæ–‡ä»¶ä¸­ï¼Œå¯¹åº”æœåŠ¡çš„ç«¯å£æ˜ å°„ã€‚ ç™»å½• Web Harbor , è¾“å…¥ç”¨æˆ·å adminï¼Œé»˜è®¤å¯†ç ï¼ˆæˆ–å·²ä¿®æ”¹å¯†ç ï¼‰ç™»å½•ç³»ç»Ÿã€‚ æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç³»ç»Ÿå„ä¸ªæ¨¡å—å¦‚ä¸‹ï¼š é¡¹ç›®ï¼šæ–°å¢/åˆ é™¤é¡¹ç›®ï¼ŒæŸ¥çœ‹é•œåƒä»“åº“ï¼Œç»™é¡¹ç›®æ·»åŠ æˆå‘˜ã€æŸ¥çœ‹æ“ä½œæ—¥å¿—ã€å¤åˆ¶é¡¹ç›®ç­‰ æ—¥å¿—ï¼šä»“åº“å„ä¸ªé•œåƒcreateã€pushã€pullç­‰æ“ä½œæ—¥å¿— ç³»ç»Ÿç®¡ç† ç”¨æˆ·ç®¡ç†ï¼šæ–°å¢/åˆ é™¤ç”¨æˆ·ã€è®¾ç½®ç®¡ç†å‘˜ç­‰ å¤åˆ¶ç®¡ç†ï¼šæ–°å¢/åˆ é™¤ä»åº“ç›®æ ‡ã€æ–°å»º/åˆ é™¤/å¯åœå¤åˆ¶è§„åˆ™ç­‰ é…ç½®ç®¡ç†ï¼šè®¤è¯æ¨¡å¼ã€å¤åˆ¶ã€é‚®ç®±è®¾ç½®ã€ç³»ç»Ÿè®¾ç½®ç­‰ å…¶ä»–è®¾ç½® ç”¨æˆ·è®¾ç½®ï¼šä¿®æ”¹ç”¨æˆ·åã€é‚®ç®±ã€åç§°ä¿¡æ¯ ä¿®æ”¹å¯†ç ï¼šä¿®æ”¹ç”¨æˆ·å¯†ç  æ³¨æ„ï¼šéç³»ç»Ÿç®¡ç†å‘˜ç”¨æˆ·ç™»å½•ï¼Œåªèƒ½çœ‹åˆ°æœ‰æƒé™çš„é¡¹ç›®å’Œæ—¥å¿—ï¼Œå…¶ä»–æ¨¡å—ä¸å¯è§ã€‚ æˆ‘ä»¬è¦å°è¯•ä¸‹èƒ½ä¸èƒ½æŠŠè‡ªå·± Docker é‡Œé¢çš„é•œåƒ push åˆ° Harbor çš„ library é‡Œæ¥ï¼ˆé»˜è®¤è¿™ä¸ª library é¡¹ç›®æ˜¯å…¬å¼€çš„ï¼Œæ‰€æœ‰äººéƒ½å¯ä»¥æœ‰è¯»çš„æƒé™ï¼Œéƒ½ä¸éœ€è¦ docker login è¿›æ¥ï¼Œå°±å¯ä»¥æ‹‰å–é‡Œé¢çš„é•œåƒï¼‰ã€‚ æ³¨æ„ï¼š ä¸ºäº†åé¢ç•™å‘ï¼Œæˆ‘è¿™é‡Œå…ˆ åœ¨è‡ªå·±çš„ docker.service ä¸­æ·»åŠ ä»“åº“ï¼šï¼ˆè¿™æ˜¯ä¸ªå‘ï¼Œå»ºè®®ä½ å…ˆæŒ‰ç…§æˆ‘è¯´çš„åšï¼Œä¸ç„¶ä¸‹é¢å¯èƒ½ä¼šä¸€ç›´ç™»å½•ä¸ä¸Šï¼‰ 1234vim /usr/lib/systemd/system/docker.serviceé‡Œé¢çš„è¿™è¡Œä¿®æ”¹ä¸ºï¼šï¼ˆå…¶å®å°±æ˜¯æ·»åŠ  --insecure-registry 115.159.227.249 ï¼‰ExecStart=/usr/bin/dockerd --insecure-registry 115.159.227.249 æ·»åŠ å®Œäº†åé‡æ–°å¯åŠ¨ dockerï¼š 1systemctl daemon-reload &amp;&amp; systemctl enable docker &amp;&amp; systemctl start docker å¯åŠ¨ docker æœåŠ¡: 1service docker start ç™»å½•ï¼šï¼ˆä¸ºäº†æµ‹è¯•ä¸‹èƒ½å¦ç™»å½•æˆåŠŸï¼‰ 12345adminç™»å½•$ docker login 115.159.227.249Username: adminPassword:Login Succeeded æ‰“ tag å¹¶ push 12345678910docker tag ubuntu:15.10 115.159.227.249/library/ubuntu:15.10 //ç»™æˆ‘çš„é•œåƒæ‰“ä¸ª tagdocker push 115.159.227.249/library/ubuntuThe push refers to a repository [115.159.227.249/library/ubuntu]98d59071f692: Pushedaf288f00b8a7: Pushed4b955941a4d0: Pushedf121afdbbd5d: Pushed15.10: digest: sha256:ec89c4a90f45f5e103860191890f48d8379e0504a2881ff706aef0768dc0321b size: 1150 ä¸Šä¼ å®Œæ¯•åï¼Œç™»å½•Web Harborï¼Œé€‰æ‹©é¡¹ç›® libraryï¼Œå°±å¯ä»¥çœ‹åˆ°æˆ‘åˆš push çš„é•œåƒäº†ã€‚ åŒç†ï¼Œä½ ä¹Ÿå¯ä»¥æµ‹è¯•ä¸‹ä» Harbor pull é•œåƒåˆ°ä½ çš„ Docker ä¸­å»ï¼Œè¿™é‡Œå°±ä¸ç»§ç»­æ¼”ç¤ºäº†ã€‚ æœ€åè½¬è½½è¯·æ³¨æ˜åœ°å€ä¸ºï¼šhttp://www.54tianzhisheng.cn/2017/11/26/Docker-harbor/","tags":[{"name":"Docker","slug":"Docker","permalink":"http://yoursite.com/tags/Docker/"}]},{"title":"è°ˆè°ˆæˆ‘çš„ç†è´¢","date":"2017-11-17T16:00:00.000Z","path":"2017/11/18/Money-management/","text":"èƒŒæ™¯æœ€å¼€å§‹æ¥è§¦ç†è´¢æ˜¯å»å¹´çš„æ—¶å€™ï¼Œåœ¨æˆ‘çš„ä¸€ä¸ªç¾¤é‡Œï¼ˆå‡ ä¸ªå¥½æœ‹å‹ï¼‰ï¼Œæœ‰ä¸ªæœ‹å‹ä»–å¥³æœ‹å‹æ˜¯å­¦é‡‘èçš„ï¼Œå½“æ—¶è¿˜å¼€ç©ç¬‘åœ°è¯´å«å¥¹å¸¦å¸¦æˆ‘ä»¬æ€ä¹ˆä¹°è‚¡ç¥¨ã€åŸºé‡‘ã€é»„é‡‘è¿™äº›ä¸œè¥¿å‘¢ã€‚åæ¥åœ¨ç¾¤é‡Œå¶å°”èŠä¸‹è¿™æ–¹é¢çš„ä¸œè¥¿ï¼ é»„é‡‘é‚£æ—¶æˆ‘ç¬¬æ‰å¼€å§‹æ¥è§¦é»„é‡‘ï¼Œä¹Ÿæ˜¯è‡ªå·±ä¸€ä¸ªäººä¹°äº†ç‚¹æ”¯ä»˜å®é‡Œé¢çš„å­˜é‡‘å®ï¼Œï¼ˆä¸å¤šï¼Œå°±å‡ ç™¾å—ï¼‰ï¼Œåæ¥æ…¢æ…¢çš„åŠ ä»“å’Œå‡ä»“ï¼Œåˆšå¼€å§‹çš„æ—¶å€™ï¼Œå› ä¸ºæ˜¯åˆšä¸Šæ‰‹è¿™äº›ä¸œè¥¿ï¼Œæ¯”è¾ƒå¯¹è¿™æ¯å¤©çš„æ•°å­—å¢é•¿å’Œé™ä½å¾ˆåœ¨æ„ï¼Œä¸€å¤©æ‰“å¼€èš‚èšèšå®çš„æ¬¡æ•°å¾ˆå¤šï¼Œè€æ˜¯çœ‹ç€æ¯å¤©çš„å®æ—¶å‚è€ƒé‡‘ä»·ï¼Œåæ­£å°±æ˜¯å¿ƒç†å„ç§ä¸è¸å®ã€‚å°±æ˜¯é‚£ç§æ‚£å¾—æ‚£å¤±çš„æ„Ÿè§‰ï¼Œå“ˆå“ˆï¼Œæˆ‘ä¹Ÿä¸çŸ¥é“æ€ä¹ˆå½¢å®¹äº†ã€‚ã€‚ã€‚ğŸ˜³ é‚£æ—¶ä¹Ÿä¸æ‡‚ï¼Œè€æ˜¯è¿½æ¶¨ä½æŠ›ï¼Œæ²¡æœ‰æ‰“ç®—é•¿æœŸæŒæœ‰ã€‚é™„å›¾ï¼š ç°åœ¨çœ‹çœ‹è¿™å›¾ï¼Œæƒ³æƒ³è‡ªå·±ä»¥å‰çœŸå‚»ã€‚å¯ä»¥å‘ç°ç°åœ¨å·²ç»æ²¡ä¹°é»„é‡‘äº†ï¼Œå¯¹ï¼Œåœ¨ä»Šå¹´çš„æ—¶å€™ä¸»è¦æ˜¯å…³æ³¨äº›åŸºé‡‘ï¼ åŸºé‡‘é€šè¿‡ä¹°é»„é‡‘ï¼Œå‘ç°ï¼Œé»„é‡‘å¢é•¿ä¸‹è·Œç¡®å®ä¸æ€ä¹ˆé‚£ä¹ˆå°½äººæ„ï¼Œåªèµšäº†ä¸€ç‚¹ç‚¹ã€‚ç„¶åæ…¢æ…¢åœ¨å…³æ³¨ç€åŸºé‡‘ï¼Œå‘ç°æœ‰äº›åŸºé‡‘çš„è¿˜æ˜¯æ”¶å…¥æ•ˆæœè¿˜æ˜¯å¾ˆå¥½çš„ã€‚ ä»€ä¹ˆæ˜¯åŸºé‡‘å‘¢ï¼Ÿ å¥½åƒæœ‰å¾ˆå¤šç§ï¼Œä½†æ˜¯æˆ‘çš„ç†è§£æ˜¯ï¼Œæˆ‘ä»¬æ•£æˆ·æœ‰ç‚¹é—²é’±ï¼Œæ‰“ç®—æŠ•èµ„ï¼Œåˆæ²¡æ—¶é—´å»ä¹°è‚¡ç¥¨ï¼Œä¸€æ˜¯ç¼ºä¹ç»éªŒï¼Œä¸çŸ¥é“ä¹°å“ªæ”¯ï¼Œè€Œæ˜¯æ²¡ç©ºå»æ•´å¤©ç›¯ç€è‚¡ç¥¨çš„èµ°åŠ¿ã€‚è¿™æ—¶å°±å‡ºç°äº†ä¸€ä¸ªå¹³å°ï¼Œæˆ‘ä»¬æ•£æˆ·æŠŠé’±æŠ•ç»™è¿™ä¸ªå¹³å°ï¼Œå¹³å°æœ‰ä¸“ä¸šçš„äººå»è¿›è¡Œä¹°è‚¡ç¥¨ï¼Œå¦‚ä¹°è‚¡ç¥¨æœ‰ç›ˆåˆ©ï¼Œåˆ™å¤§å®¶ä¸€èµ·èµšé’±ï¼Œå¦‚æœäºï¼Œåˆ™ä¸€èµ·äºï¼Œæˆ‘å¯¹åŸºé‡‘å°±æ˜¯è¿™æ ·çš„ç†è§£ï¼Œä¹Ÿä¸çŸ¥é“å¯¹ä¸å¯¹ï¼Ÿ å†è¯´è¯´æˆ‘ç°åœ¨ä¸»è¦ä¹°çš„åŸºé‡‘å§ï¼Œçœ‹çœ‹æ”¶ç›Šå›¾ï¼š å˜¿å˜¿ï¼Œè¿™å‡ ä¸ªæ˜¯æˆ‘è§‚å¯Ÿå¾ˆä¹…äº†ï¼Œå¹¶è§‰å¾—é•¿æœŸçœ‹å¥½çš„åŸºé‡‘äº†ï¼Œå½“ç„¶ä»¥å‰ä¹Ÿä¹°è¿‡ä¸€ä¸¤ä¸ªåŸºé‡‘ï¼Œæœ‰ä¸ªäºå¾—ä¸å°‘ï¼Œæœ‰æ¶¨æœ‰è·Œï¼Œç°åœ¨è§‰å¾—åˆè¦å¹³å¸¸å¿ƒï¼Œå¦‚æœæ˜¯é•¿æœŸçœ‹å¥½çš„ï¼Œæ²¡å¿…è¦çº ç»“è¿™ä¸€ä¸¤å¤©çš„æ¶¨è·Œï¼Œç­‰è¿‡æ®µæ—¶é—´å†æ¥çœ‹çœ‹æ•ˆæœå’‹æ ·ï¼ˆå¿ƒæ€ä¸€å®šè¦å¥½ï¼‰ï¼Œå¦‚æœé‡åˆ°è¢«å¥—çš„è¯ï¼Œæœ‰æ—¶ä¹Ÿéœ€è¦è£…æ­»å¿ƒæ€ï¼Œå“ˆå“ˆï¼å¦å¤–ï¼Œæˆ‘è¿˜è‡ªé€‰äº†ä¸€æ‰¹åŸºé‡‘ï¼Œæ­£åœ¨è§‚å¯Ÿä¸­ï¼Œç­‰æœ‰æ—¶é—´æŠŠè§‰å¾—è¿˜è¡Œçš„ç»™ç»Ÿè®¡ä¸‹ï¼ è‚¡ç¥¨è¿™ä¸ªä¸å¤ªæ‡‚ï¼Œä¸è¿‡ç›®å‰è§‰å¾—æˆ‘è‡ªå·±å…¬å¸çš„è‚¡ç¥¨ä¹Ÿè¿˜ä¸é”™ï¼Œæ‰“ç®—çœ‹ä»€ä¹ˆæ—¶å€™æœ‰æœºä¼šä¹°ç‚¹ï¼Œè¿™ä¸œè¥¿éƒ½æ˜¯é è‡ªå·±æ…¢æ…¢ç ”ç©¶å‡ºæ¥çš„ï¼Œç„¶åå°±æ˜¯çœ‹çœ‹é«˜äººæŒ‡ç‚¹ï¼Œæˆ‘å€’æ˜¯å…³æ³¨äº†ç‚¹å¾®ä¿¡å…¬ä¼—å·è®²è¿™æ–¹é¢çš„çŸ¥è¯†ï¼Œå¾®åšä¹Ÿå…³æ³¨äº†å‡ ä¸ªï¼Œåœ¨èš‚èšè´¢å¯Œé‡Œé¢ä¹Ÿå…³æ³¨äº›ï¼Œè§‰å¾—æœ‰äº›è¿˜æ˜¯å¾ˆé è°±çš„ï¼Œè¿˜æ˜¯ä¸€æ ·ï¼Œæœ‰æ—¶é—´ç»§ç»­åšä¸ªç»Ÿè®¡ï¼Œç„¶åå‘åœ¨æˆ‘çš„å°å¯†åœˆé‡Œé¢ã€‚ å‹é‡‘æ‰€æŠ•äº†è¿™ä¸ªæ˜¯å› ä¸ºè¿› stormzhang çš„å°å¯†åœˆï¼Œé€šè¿‡æ³¨å†Œå¹¶æŠ•èµ„ç‚¹å¯ä»¥å…è´¹è¿›ä»–çš„å°å¯†åœˆï¼Œä¸ç„¶å¾—èŠ± 199 å…ƒï¼Œè¿™ç®—å¾ˆä¼˜æƒ äº†ã€‚å› ä¸ºæ˜¯æ–°ç”¨æˆ·ï¼Œæ‰€ä»¥è¿™ä¸ªæ”¶ç›Šå¾ˆé«˜ï¼Œä¸€ä¸ªæœˆæœŸé™ï¼Œ12% çš„æ”¶ç›Šï¼ ä½™é¢å®æ”¯ä»˜å®é‡Œçš„ï¼Œå¹³å¸¸é’±ä¹Ÿä¸€èˆ¬æ”¾è¿™é‡Œé¢ï¼Œå› ä¸ºå¹³æ—¶ç”¨æ”¯ä»˜å®æ¯”è¾ƒå¤šï¼Œæ”¾è¿™é‡Œï¼Œå¯ä»¥ä»˜æ¬¾çš„æ—¶å€™é€‰æ‹©ç›´æ¥ä½™é¢å®æ”¯ä»˜ï¼Œå¦å¤–è¿˜æœ‰å·®ä¸å¤š 4% çš„æ”¶ç›Šï¼Œå¯ä»¥éšæ—¶å­˜å–ï¼Œæ¯”è¾ƒæ–¹ä¾¿ï¼ æœ€åæœ‰æ—¶é—´å°†ä¸Šé¢æ‰€è¯´çš„ï¼šè‡ªé€‰åŸºé‡‘åˆ—è¡¨ã€å¾®ä¿¡å…¬ä¼—å·ã€å¾®åšè¿™å‡ ä¸ªåˆ—è¡¨å‘åœ¨æˆ‘çš„å°å¯†åœˆé‡Œã€‚ æœ€é‡è¦çš„è¯è¿˜æ˜¯å¾—è¯´ä¸‰éï¼š æŠ•èµ„æœ‰é£é™©ï¼Œéœ€è°¨æ…ï¼ æŠ•èµ„æœ‰é£é™©ï¼Œéœ€è°¨æ…ï¼ æŠ•èµ„æœ‰é£é™©ï¼Œéœ€è°¨æ…ï¼","tags":[{"name":"æŠ•èµ„ç†è´¢","slug":"æŠ•èµ„ç†è´¢","permalink":"http://yoursite.com/tags/æŠ•èµ„ç†è´¢/"}]},{"title":"åŸºäºåˆ†å¸ƒå¼ç¯å¢ƒä¸‹é™æµç³»ç»Ÿçš„è®¾è®¡","date":"2017-11-17T16:00:00.000Z","path":"2017/11/18/flow-control/","text":"å‰æä¸šåŠ¡èƒŒæ™¯å°±æ‹¿å‰äº›å¤©çš„åŒåä¸€çš„ â€œæŠ¢åˆ¸æ´»åŠ¨â€ æ¥è¯´ï¼Œä¸€èˆ¬æ˜¯è®¾ç½®æ•´ç‚¹å¼€å§‹æŠ¢çš„ï¼Œä½ æƒ³æƒ³ï¼Œæ·˜å®çš„ç”¨æˆ·ç¾¤ä½“éå¸¸å¤§ï¼Œå¯ä»¥è¾¾åˆ°äº¿çº§åˆ«ï¼Œè€ŒæœåŠ¡æ¥å£æ¯ç§’èƒ½å¤„ç†çš„é‡æ˜¯æœ‰é™çš„ï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶å€™é—®é¢˜å°±ä¼šå‡ºç°ï¼Œæˆ‘ä»¬å¦‚ä½•é€šè¿‡ç¨‹åºæ¥æ§åˆ¶ç”¨æˆ·æŠ¢åˆ¸å‘¢ï¼Œäºæ˜¯å°±å¿…é¡»åŠ ä¸Šè¿™ä¸ªé™æµåŠŸèƒ½äº†ã€‚ ç”Ÿäº§ç¯å¢ƒ1ã€æœåŠ¡æ¥å£æ‰€èƒ½æä¾›çš„æœåŠ¡ä¸Šé™ï¼ˆlimitï¼‰å‡å¦‚æ˜¯ 500æ¬¡/s 2ã€ç”¨æˆ·è¯·æ±‚æ¥å£çš„æ¬¡æ•°æœªçŸ¥ï¼ŒQPSå¯èƒ½è¾¾åˆ° 800æ¬¡/sï¼Œ1000æ¬¡/sï¼Œæˆ–è€…æ›´é«˜ 3ã€å½“æœåŠ¡æ¥å£çš„è®¿é—®é¢‘ç‡è¶…è¿‡ 500æ¬¡/sï¼Œè¶…è¿‡çš„é‡å°†æ‹’ç»æœåŠ¡ï¼Œå¤šå‡ºçš„ä¿¡æ¯å°†ä¼šä¸¢å¤± 4ã€çº¿ä¸Šç¯å¢ƒæ˜¯å¤šèŠ‚ç‚¹éƒ¨ç½²çš„ï¼Œä½†æ˜¯è°ƒç”¨çš„æ˜¯åŒä¸€ä¸ªæœåŠ¡æ¥å£ äºæ˜¯ï¼Œä¸ºäº†ä¿è¯æœåŠ¡çš„å¯ç”¨æ€§ï¼Œå°±è¦å¯¹æœåŠ¡æ¥å£è°ƒç”¨çš„é€Ÿç‡è¿›è¡Œé™åˆ¶ï¼ˆæ¥å£é™æµï¼‰ã€‚ ä»€ä¹ˆæ˜¯é™æµï¼Ÿé™æµæ˜¯å¯¹ç³»ç»Ÿçš„å‡ºå…¥æµé‡è¿›è¡Œæ§åˆ¶ï¼Œé˜²æ­¢å¤§æµé‡å‡ºå…¥ï¼Œå¯¼è‡´èµ„æºä¸è¶³ï¼Œç³»ç»Ÿä¸ç¨³å®šã€‚ é™æµç³»ç»Ÿæ˜¯å¯¹èµ„æºè®¿é—®çš„æ§åˆ¶ç»„ä»¶ï¼Œæ§åˆ¶ä¸»è¦çš„ä¸¤ä¸ªåŠŸèƒ½ï¼šé™æµç­–ç•¥å’Œç†”æ–­ç­–ç•¥ï¼Œå¯¹äºç†”æ–­ç­–ç•¥ï¼Œä¸åŒçš„ç³»ç»Ÿæœ‰ä¸åŒçš„ç†”æ–­ç­–ç•¥è¯‰æ±‚ï¼Œæœ‰çš„ç³»ç»Ÿå¸Œæœ›ç›´æ¥æ‹’ç»ã€æœ‰çš„ç³»ç»Ÿå¸Œæœ›æ’é˜Ÿç­‰å¾…ã€æœ‰çš„ç³»ç»Ÿå¸Œæœ›æœåŠ¡é™çº§ã€æœ‰çš„ç³»ç»Ÿä¼šå®šåˆ¶è‡ªå·±çš„ç†”æ–­ç­–ç•¥ï¼Œè¿™é‡Œåªé’ˆå¯¹é™æµç­–ç•¥è¿™ä¸ªåŠŸèƒ½åšè¯¦ç»†çš„è®¾è®¡ã€‚ é™æµç®—æ³•1ã€é™åˆ¶ç¬æ—¶å¹¶å‘æ•°Guava RateLimiter æä¾›äº†ä»¤ç‰Œæ¡¶ç®—æ³•å®ç°ï¼šå¹³æ»‘çªå‘é™æµ(SmoothBursty)å’Œå¹³æ»‘é¢„çƒ­é™æµ(SmoothWarmingUp)å®ç°ã€‚ 2ã€é™åˆ¶æŸä¸ªæ¥å£çš„æ—¶é—´çª—æœ€å¤§è¯·æ±‚æ•°å³ä¸€ä¸ªæ—¶é—´çª—å£å†…çš„è¯·æ±‚æ•°ï¼Œå¦‚æƒ³é™åˆ¶æŸä¸ªæ¥å£/æœåŠ¡æ¯ç§’/æ¯åˆ†é’Ÿ/æ¯å¤©çš„è¯·æ±‚æ•°/è°ƒç”¨é‡ã€‚å¦‚ä¸€äº›åŸºç¡€æœåŠ¡ä¼šè¢«å¾ˆå¤šå…¶ä»–ç³»ç»Ÿè°ƒç”¨ï¼Œæ¯”å¦‚å•†å“è¯¦æƒ…é¡µæœåŠ¡ä¼šè°ƒç”¨åŸºç¡€å•†å“æœåŠ¡è°ƒç”¨ï¼Œä½†æ˜¯æ€•å› ä¸ºæ›´æ–°é‡æ¯”è¾ƒå¤§å°†åŸºç¡€æœåŠ¡æ‰“æŒ‚ï¼Œè¿™æ—¶æˆ‘ä»¬è¦å¯¹æ¯ç§’/æ¯åˆ†é’Ÿçš„è°ƒç”¨é‡è¿›è¡Œé™é€Ÿï¼›ä¸€ç§å®ç°æ–¹å¼å¦‚ä¸‹æ‰€ç¤ºï¼š 12345678910111213141516171819LoadingCache&lt;Long, AtomicLong&gt; counter = CacheBuilder.newBuilder() .expireAfterWrite(2, TimeUnit.SECONDS) .build(new CacheLoader&lt;Long, AtomicLong&gt;() &#123; @Override public AtomicLong load(Long seconds) throws Exception &#123; return new AtomicLong(0); &#125; &#125;);long limit = 1000;while(true) &#123; //å¾—åˆ°å½“å‰ç§’ long currentSeconds = System.currentTimeMillis() / 1000; if(counter.get(currentSeconds).incrementAndGet() &gt; limit) &#123; System.out.println(\"é™æµäº†:\" + currentSeconds); continue; &#125; //ä¸šåŠ¡å¤„ç†&#125; ä½¿ç”¨Guavaçš„Cacheæ¥å­˜å‚¨è®¡æ•°å™¨ï¼Œè¿‡æœŸæ—¶é—´è®¾ç½®ä¸º2ç§’ï¼ˆä¿è¯1ç§’å†…çš„è®¡æ•°å™¨æ˜¯æœ‰çš„ï¼‰ï¼Œç„¶åæˆ‘ä»¬è·å–å½“å‰æ—¶é—´æˆ³ç„¶åå–ç§’æ•°æ¥ä½œä¸ºKEYè¿›è¡Œè®¡æ•°ç»Ÿè®¡å’Œé™æµï¼Œè¿™ç§æ–¹å¼ä¹Ÿæ˜¯ç®€å•ç²—æš´ï¼Œåˆšæ‰è¯´çš„åœºæ™¯å¤Ÿç”¨äº†ã€‚ 3ã€ä»¤ç‰Œæ¡¶ ç®—æ³•æè¿°ï¼š å‡å¦‚ç”¨æˆ·é…ç½®çš„å¹³å‡å‘é€é€Ÿç‡ä¸ºrï¼Œåˆ™æ¯éš”1/rç§’ä¸€ä¸ªä»¤ç‰Œè¢«åŠ å…¥åˆ°æ¡¶ä¸­ å‡è®¾æ¡¶ä¸­æœ€å¤šå¯ä»¥å­˜æ”¾bä¸ªä»¤ç‰Œã€‚å¦‚æœä»¤ç‰Œåˆ°è¾¾æ—¶ä»¤ç‰Œæ¡¶å·²ç»æ»¡äº†ï¼Œé‚£ä¹ˆè¿™ä¸ªä»¤ç‰Œä¼šè¢«ä¸¢å¼ƒ å½“æµé‡ä»¥é€Ÿç‡vè¿›å…¥ï¼Œä»æ¡¶ä¸­ä»¥é€Ÿç‡vå–ä»¤ç‰Œï¼Œæ‹¿åˆ°ä»¤ç‰Œçš„æµé‡é€šè¿‡ï¼Œæ‹¿ä¸åˆ°ä»¤ç‰Œæµé‡ä¸é€šè¿‡ï¼Œæ‰§è¡Œç†”æ–­é€»è¾‘ å±æ€§ é•¿æœŸæ¥çœ‹ï¼Œç¬¦åˆæµé‡çš„é€Ÿç‡æ˜¯å—åˆ°ä»¤ç‰Œæ·»åŠ é€Ÿç‡çš„å½±å“ï¼Œè¢«ç¨³å®šä¸ºï¼šr å› ä¸ºä»¤ç‰Œæ¡¶æœ‰ä¸€å®šçš„å­˜å‚¨é‡ï¼Œå¯ä»¥æŠµæŒ¡ä¸€å®šçš„æµé‡çªå‘æƒ…å†µ Mæ˜¯ä»¥å­—èŠ‚/ç§’ä¸ºå•ä½çš„æœ€å¤§å¯èƒ½ä¼ è¾“é€Ÿç‡ã€‚ M&gt;r T max = b/(M-r) æ‰¿å—æœ€å¤§ä¼ è¾“é€Ÿç‡çš„æ—¶é—´ B max = T max * M æ‰¿å—æœ€å¤§ä¼ è¾“é€Ÿç‡çš„æ—¶é—´å†…ä¼ è¾“çš„æµé‡ ä¼˜ç‚¹ï¼šæµé‡æ¯”è¾ƒå¹³æ»‘ï¼Œå¹¶ä¸”å¯ä»¥æŠµæŒ¡ä¸€å®šçš„æµé‡çªå‘æƒ…å†µ 4ã€Google guava æä¾›çš„å·¥å…·åº“ä¸­ RateLimiter ç±»ï¼ˆå†…éƒ¨ä¹Ÿæ˜¯é‡‡ç”¨ä»¤ç‰Œæ¡¶ç®—æ³•å®ç°ï¼‰æœ€å¿«çš„æ–¹å¼æ˜¯ä½¿ç”¨ RateLimit ç±»ï¼Œä½†æ˜¯è¿™ä»…é™åˆ¶åœ¨å•èŠ‚ç‚¹ï¼Œå¦‚æœæ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿï¼Œæ¯ä¸ªèŠ‚ç‚¹çš„ QPS æ˜¯ä¸€æ ·çš„ï¼Œè¯·æ±‚é‡åˆ°æœåŠ¡æ¥å£é‚£çš„è¯å°±æ˜¯ QPS * èŠ‚ç‚¹æ•° äº†ã€‚æ‰€ä»¥è¿™ç§æ–¹æ¡ˆåœ¨åˆ†å¸ƒå¼çš„æƒ…å†µä¸‹ä¸é€‚ç”¨ï¼ 5ã€åŸºäº Redis å®ç°ï¼Œå­˜å‚¨ä¸¤ä¸ª keyï¼Œä¸€ä¸ªç”¨äºè®¡æ—¶ï¼Œä¸€ä¸ªç”¨äºè®¡æ•°ã€‚è¯·æ±‚æ¯è°ƒç”¨ä¸€æ¬¡ï¼Œè®¡æ•°å™¨å¢åŠ  1ï¼Œè‹¥åœ¨è®¡æ—¶å™¨æ—¶é—´å†…è®¡æ•°å™¨æœªè¶…è¿‡é˜ˆå€¼ï¼Œåˆ™å¯ä»¥å¤„ç†ä»»åŠ¡ã€‚è¿™ç§èƒ½å¤Ÿå¾ˆå¥½åœ°è§£å†³äº†åˆ†å¸ƒå¼ç¯å¢ƒä¸‹å¤šå®ä¾‹æ‰€å¯¼è‡´çš„å¹¶å‘é—®é¢˜ã€‚å› ä¸ºä½¿ç”¨redisè®¾ç½®çš„è®¡æ—¶å™¨å’Œè®¡æ•°å™¨å‡æ˜¯å…¨å±€å”¯ä¸€çš„ï¼Œä¸ç®¡å¤šå°‘ä¸ªèŠ‚ç‚¹ï¼Œå®ƒä»¬ä½¿ç”¨çš„éƒ½æ˜¯åŒæ ·çš„è®¡æ—¶å™¨å’Œè®¡æ•°å™¨ï¼Œå› æ­¤å¯ä»¥åšåˆ°éå¸¸ç²¾å‡†çš„æµæ§ã€‚ ä»£ç å°±ä¸å…¬å¸ƒäº†ï¼Œæ¯•ç«Ÿæ¶‰åŠå…¬å¸éšç§äº†ã€‚ æœ€åå‚è€ƒæ–‡ç« ï¼š åŸºäºRedisçš„é™æµç³»ç»Ÿçš„è®¾è®¡ æ„Ÿå…´è¶£çš„å¯ä»¥çœ‹çœ‹åˆ«äººçš„ä»£ç æ˜¯æ€ä¹ˆå†™çš„ï¼šhttps://github.com/wukq/rate-limiter è½¬è½½è¯·æ³¨æ˜æ–‡ç« åœ°å€ä¸ºï¼šhttp://www.54tianzhisheng.cn/2017/11/18/flow-control/","tags":[{"name":"Redis","slug":"Redis","permalink":"http://yoursite.com/tags/Redis/"},{"name":"æµæ§","slug":"æµæ§","permalink":"http://yoursite.com/tags/æµæ§/"}]},{"title":"é€ä½ ä¸€ä»½åŒåä¸€å‰æ‰‹ä¹¦å•ã€å¢™è£‚æ¨èã€‘","date":"2017-11-10T16:00:00.000Z","path":"2017/11/11/recommended-books/","text":"æ˜¨æ™šå’Œæœ‹å‹èŠå¤©è¯´åŒåä¸€éƒ½ä¹°å•¥ï¼Œç»“æœ TMD ç«Ÿç„¶éƒ½æ˜¯ä¹¦ç±ï¼Œä¸æ„§æ˜¯æ ‡å‡†çš„ç¨‹åºçŒ¿ã€‚æ‰€ä»¥è¿™é‡Œæƒ³æ¨èåŸºä½¬çš„ä¸€ä»½ä¹¦å•ï¼Œæ–¹ä¾¿å¤§å®¶åœ¨åŒåä¸€å‰å‰å‰ï¼Œå»ºè®®å…ˆæ”¶è—æœ¬ä¹¦å•ï¼Œè®¤çœŸå•ƒå®Œä¸€æœ¬å†ä¹°ä¸‹ä¸€æœ¬ï¼Œæ‰å®èµ°å®Œæ¯ä¸€æ­¥ï¼Œå¸Œæœ›ä¹¦å•èƒ½åœ¨ä½ æƒ³è¦è¿›ä¸€æ­¥æ‰“æ€ªå‡çº§çš„è·¯ä¸Šï¼Œç»™äºˆäº›è®¸å¸®åŠ©ï¼ ä¹¦ç±åˆ—è¡¨ã€ŠEffective Java ä¸­æ–‡ç‰ˆã€‹ è±†ç“£è¯„åˆ†ï¼š9.1ã€1235 äººè¯„ä»·ã€‘ æ¨èç†ç”±ï¼šæœ¬ä¹¦ä»‹ç»äº†åœ¨Javaç¼–ç¨‹ä¸­78æ¡æå…·å®ç”¨ä»·å€¼çš„ç»éªŒè§„åˆ™ï¼Œè¿™äº›ç»éªŒè§„åˆ™æ¶µç›–äº†å¤§å¤šæ•°å¼€å‘äººå‘˜æ¯å¤©æ‰€é¢ä¸´çš„é—®é¢˜çš„è§£å†³æ–¹æ¡ˆã€‚ å‹æƒ…æç¤ºï¼šåŒæ¨èã€Šé‡æ„ : æ”¹å–„æ—¢æœ‰ä»£ç çš„è®¾è®¡ã€‹ã€ã€Šä»£ç æ•´æ´ä¹‹é“ã€‹ã€ã€Šä»£ç å¤§å…¨ã€‹ï¼Œæœ‰ä¸€å®šçš„å†…å®¹é‡å ã€‚ ã€ŠJavaæ€§èƒ½æƒå¨æŒ‡å—ã€‹ è±†ç“£è¯„åˆ†ï¼š8.2ã€44 äººè¯„ä»·ã€‘ æ¨èç†ç”±ï¼šå¸‚é¢ä¸Šä»‹ç»Javaçš„ä¹¦æœ‰å¾ˆå¤šï¼Œä½†ä¸“æ³¨äºJavaæ€§èƒ½çš„å¹¶ä¸å¤šï¼Œèƒ½æ¸¸åˆƒæœ‰ä½™åœ°å±•ç¤ºJavaæ€§èƒ½ä¼˜åŒ–éš¾ç‚¹çš„æ›´æ˜¯å‡¤æ¯›éºŸè§’ï¼Œæœ¬ä¹¦å³æ˜¯å…¶ä¸­ä¹‹ä¸€ã€‚é€šè¿‡ä½¿ç”¨JVMå’ŒJavaå¹³å°ï¼Œä»¥åŠJavaè¯­è¨€å’Œåº”ç”¨ç¨‹åºæ¥å£ï¼Œæœ¬ä¹¦è¯¦å°½è®²è§£äº†Javaæ€§èƒ½è°ƒä¼˜çš„ç›¸å…³çŸ¥è¯†ï¼Œå¸®åŠ©è¯»è€…æ·±å…¥ç†è§£Javaå¹³å°æ€§èƒ½çš„å„ä¸ªæ–¹é¢ï¼Œæœ€ç»ˆä½¿ç¨‹åºå¦‚è™æ·»ç¿¼ã€‚ ã€ŠSpringæ­ç§˜ã€‹ è±†ç“£è¯„åˆ†ï¼š9.0 ã€162 äººè¯„ä»·ã€‘ æ¨èç†ç”±ï¼šSpring ä½¿ç”¨è€…ä¸å¾—ä¸è¯»ï¼ æ¨èåšå®¢ï¼šSpring4Allç¤¾åŒº æ¨èå…¬ä¼—å·ï¼šSpring4Allç¤¾åŒº ã€ŠSpringBootæ­ç§˜ã€‹ è±†ç“£è¯„åˆ†ï¼š6.8 ã€44 äººè¯„ä»·ã€‘ æ¨èç†ç”±ï¼šã€ŠSpringæ­ç§˜ã€‹ç›¸åŒä½œè€…ã€‚SpringBoot å…¥é—¨ä¹¦ç±ã€‚ ä½œè€…åšå®¢ï¼šæ‰¶å¢™è€å¸ˆè¯´ï¼šä¸€ä¸ªæ¶æ„å£«çš„æ€è€ƒä¸æ²‰æ·€ ä½œè€…å…¬ä¼—å·ï¼šæ‰¶å¢™è€å¸ˆè¯´ ä»˜è´¹æ•™ç¨‹ï¼šã€ŠJava å¾®æœåŠ¡å®è·µ - Spring Boot ç³»åˆ—ã€‹ ã€ŠMyBatisæŠ€æœ¯å†…å¹•ã€‹ è±†ç“£è¯„åˆ†ï¼šæš‚æ—  æ¨èç†ç”±ï¼šä»¥MyBatis 3.4ä¸ºåŸºç¡€ï¼Œé’ˆå¯¹MyBatisçš„æ¶æ„è®¾è®¡å’Œå®ç°ç»†èŠ‚è¿›è¡Œäº†è¯¦ç»†åˆ†æï¼Œå…¶ä¸­ç©¿æ’ä»‹ç»äº†MyBatisæºç ä¸­æ¶‰åŠçš„åŸºç¡€çŸ¥è¯†ã€è®¾è®¡æ¨¡å¼ä»¥åŠç¬”è€…è‡ªå·±åœ¨å®è·µä¸­çš„æ€è€ƒã€‚ ä½œè€…åšå®¢ï¼šç¥–å¤§ä¿Šçš„åšå®¢ ã€Šæœ‰æ•ˆçš„å•å…ƒæµ‹è¯•ã€‹ è±†ç“£è¯„åˆ†ï¼š7.4 ã€18 äººè¯„ä»·ã€‘ æ¨èç†ç”±ï¼šJava å•å…ƒæµ‹è¯•å…¥é—¨ã€‚ ã€ŠJavaå¹¶å‘ç¼–ç¨‹å®æˆ˜ã€‹ è±†ç“£è¯„åˆ†ï¼š9.0 ã€651 äººè¯„ä»·ã€‘ æ¨èç†ç”±ï¼šæœ¬ä¹¦æ·±å…¥æµ…å‡ºåœ°ä»‹ç»äº†Javaçº¿ç¨‹å’Œå¹¶å‘ï¼Œæ˜¯ä¸€æœ¬å®Œç¾çš„Javaå¹¶å‘å‚è€ƒæ‰‹å†Œã€‚ æ¨èåšå®¢ï¼šå¹¶å‘ç¼–ç¨‹ç½‘ æ¨èå…¬ä¼—å·ï¼šå¹¶å‘ç¼–ç¨‹ç½‘ ã€ŠNettyå®æˆ˜ã€‹ è±†ç“£è¯„åˆ†ï¼š7.5ã€24 äººè¯„ä»·ã€‘ è±†ç“£è¯„åˆ†ï¼š8.1ã€83 äººè¯„ä»·ã€‘ ã€ŠNetty in Actionã€‹è‹±æ–‡ç‰ˆ æ¨èç†ç”±ï¼šNettyä¹‹çˆ¶â€Trustin Leeä½œåºæ¨èã€‚ æ¨èå…¬ä¼—å·ï¼šNettyä¹‹å®¶ ã€Šæ·±å…¥å‰–æTomcatã€‹ è±†ç“£è¯„åˆ†ï¼š8.3ã€118 äººè¯„ä»·ã€‘ è±†ç“£è¯„åˆ†ï¼š8.9ã€73 äººè¯„ä»·ã€‘ ã€ŠHow Tomcat Worksã€‹è‹±æ–‡ç‰ˆ æ¨èç†ç”±ï¼šæœ¬ä¹¦æ·±å…¥å‰–æTomcat 4å’ŒTomcat 5ä¸­çš„æ¯ä¸ªç»„ä»¶ï¼Œå¹¶æ­ç¤ºå…¶å†…éƒ¨å·¥ä½œåŸç†ã€‚é€šè¿‡å­¦ä¹ æœ¬ä¹¦ï¼Œä½ å°†å¯ä»¥è‡ªè¡Œå¼€å‘Tomcatç»„ä»¶ï¼Œæˆ–è€…æ‰©å±•å·²æœ‰çš„ç»„ä»¶ã€‚ ã€ŠNginx ä¸­æ–‡å®˜æ–¹æ–‡æ¡£ã€‹ è±†ç“£è¯„åˆ†ï¼šæš‚æ—  æ¨èç†ç”±ï¼šæš‚æ—¶æœªæ‰¾åˆ°å¤§å®¶è¯„ä»·ä¸é”™çš„ Nginx å®æˆ˜ç›¸å…³ä¹¦ç±ï¼Œå…ˆæ¨èçœ‹ä¸­æ–‡ç¿»è¯‘çš„å®˜æ–¹æ–‡æ¡£ã€‚å¦‚æœä½ æœ‰åˆé€‚çš„æ¨èï¼Œçƒ¦è¯·å‘Šè¯‰æˆ‘ã€‚ ã€Šæ·±å…¥ç†è§£Nginxã€‹ è±†ç“£è¯„åˆ†ï¼š8.5ã€138 äººè¯„ä»·ã€‘ æ¨èç†ç”±ï¼šä¹¦ä¸­é¦–å…ˆé€šè¿‡ä»‹ç»å®˜æ–¹Nginxçš„åŸºæœ¬ç”¨æ³•å’Œé…ç½®è§„åˆ™ï¼Œå¸®åŠ©è¯»è€…äº†è§£ä¸€èˆ¬Nginxæ¨¡å—çš„ç”¨æ³•ï¼Œç„¶åé‡ç‚¹ä»‹ç»äº†å¦‚ä½•å¼€å‘HTTPæ¨¡å—(å«HTTPè¿‡æ»¤æ¨¡å—)æ¥å¾—åˆ°å®šåˆ¶åŒ–çš„Nginxï¼Œå…¶ä¸­åŒ…æ‹¬å¼€å‘â€”ä¸ªåŠŸèƒ½å¤æ‚çš„æ¨¡å—æ‰€éœ€è¦äº†è§£çš„å„ç§çŸ¥è¯†ï¼Œå¹¶å¯¹å†…å­˜æ± çš„å®ç°ç»†èŠ‚åŠTCPåè®®è¿›è¡Œäº†è¯¦ç»†ä»‹ç»ï¼›æ¥ç€ï¼Œç»¼åˆNginxæ¡†æ¶ä»£ç åˆ†æäº†Nginxæ¶æ„çš„è®¾è®¡ç†å¿µå’ŒæŠ€å·§ï¼Œæ­¤å¤–ï¼Œè¿˜æ–°å¢äº†å¦‚ä½•åœ¨æ¨¡å—ä¸­æ”¯æŒHTTPå˜é‡ï¼Œä»¥åŠä¸slabå…±äº«å†…å­˜ç­‰ç›¸å…³çš„å†…å®¹ï¼Œç›¸ä¿¡é€šè¿‡å®Œå–„ï¼Œå¯è¿›ä¸€æ­¥å¸®åŠ©è¯»è€…æ›´å¥½åœ°å¼€å‘å‡ºåŠŸèƒ½ä¸°å¯Œã€æ€§èƒ½â€”æµçš„Nginxæ¨¡å—ã€‚ å‹æƒ…æç¤ºï¼šç›¸å¯¹é€‚ç”¨äº Nginx å¼€å‘è€…ã€‚Nginx ä½¿ç”¨è€…å¯ä»¥äº†è§£ã€‚ ã€Šæ·±å…¥ç†è§£Javaè™šæ‹Ÿæœºï¼šJVMé«˜çº§ç‰¹æ€§ä¸æœ€ä½³å®è·µã€‹ è±†ç“£è¯„åˆ†ï¼š8.9 ã€657 äººè¯„ä»·ã€‘ æ¨èç†ç”±ï¼šä¸å»äº†è§£ JVM çš„å·¥ç¨‹å¸ˆï¼Œå’Œå’¸é±¼æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ æ¨èå…¬ä¼—å·ï¼šä½ å‡ç¬¨ æ¨èåšå®¢ï¼šä½ å‡ç¬¨@JVM æ¨èå°ç¨‹åºï¼šJVMPocket ã€ŠJavaæ ¸å¿ƒæŠ€æœ¯ç³»åˆ—ï¼šJavaè™šæ‹Ÿæœºè§„èŒƒï¼ˆJava SE 8ç‰ˆï¼‰ã€‹ è±†ç“£è¯„åˆ†ï¼šæš‚æ— è¯„ä»· è±†ç“£è¯„åˆ†ï¼š8.3 ã€27 äººè¯„ä»·ã€‘ã€ŠJavaè™šæ‹Ÿæœºè§„èŒƒ(Java SE 7ç‰ˆ)ã€‹ æ¨èç†ç”±ï¼šåŸºäºJava SE 8,Oracleå®˜æ–¹å‘å¸ƒï¼ŒJavaè™šæ‹ŸæœºæŠ€æœ¯åˆ›å»ºäººæ’°å†™ï¼Œå›½å†…JavaæŠ€æœ¯ä¸“å®¶ç¿»è¯‘ï¼Œæ˜¯æ·±åº¦äº†è§£Javaè™šæ‹Ÿæœºå’ŒJavaè¯­è¨€å®ç°ç»†èŠ‚çš„å¿…è¯»ä¹‹ä½œ æ¨èåšå®¢ï¼šå å°ç‹¼çš„ç®€ä¹¦ æ¨èå…¬ä¼—å·ï¼šå å°ç‹¼çš„åšå®¢ ã€ŠGoè¯­è¨€ç¼–ç¨‹ã€‹ è±†ç“£è¯„åˆ†ï¼š7.1 ã€444 äººè¯„ä»·ã€‘ æ¨èç†ç”±ï¼šè¿™æœ¬ä¹¦ä»æ•´ä½“çš„å†™ä½œé£æ ¼æ¥è¯´ï¼Œä¼šä»¥ä»‹ç» Go è¯­è¨€ç‰¹æ€§ä¸ºä¸»ï¼Œç¤ºä¾‹åˆ™å°½é‡é‡‡ç”¨ä½œè€…å¹³å¸¸çš„å®è·µï¼Œè€Œä¸æ˜¯ä¸€ä¸ªæ²¡æœ‰å¤ªå¤§å®é™…æ„ä¹‰çš„è¯­æ³•ç¤ºèŒƒæ ·ä¾‹ã€‚ å‹æƒ…æç¤ºï¼šæœ¬ä¹¦ä½œè€…èƒŒæ™¯æå¼ºï¼Œè®¸å¼ä¼Ÿä¸ºåŸé‡‘å±±WPSé¦–å¸­æ¶æ„å¸ˆã€æ›¾æ˜¯ç››å¤§åˆ›æ–°é™¢ç ”ç©¶å‘˜ï¼Œç›®å‰æ˜¯å›½å†…Goè¯­è¨€å®è·µåœˆå­å…¬è®¤çš„Goè¯­è¨€ä¸“å®¶ã€‚ ã€Š Goè¯­è¨€å­¦ä¹ ç¬”è®°ã€‹ è±†ç“£è¯„åˆ†ï¼š8.4 ã€57 äººè¯„ä»·ã€‘ æ¨èç†ç”±ï¼šåŸºäºGo1.6ï¼Œ è§£æè¯­è¨€è§„èŒƒï¼Œæ·±å…¥å‰–æGoè¿è¡Œæ—¶æºç  å‹æƒ…æç¤ºï¼šé›¨ç—•å¤§å¤§ï¼Œæ•™ç§‘ä¹¦çº§äººç‰©ã€‚ ã€ŠMySQLæŠ€æœ¯å†…å¹•â€”â€”InnoDBå­˜å‚¨å¼•æ“ã€‹ è±†ç“£è¯„åˆ†ï¼š8.6 ã€104 äººè¯„ä»·ã€‘ æ¨èç†ç”±ï¼šä»æºä»£ç çš„è§’åº¦æ·±åº¦è§£æäº†InnoDBçš„ä½“ç³»ç»“æ„ã€å®ç°åŸç†ã€å·¥ä½œæœºåˆ¶ï¼Œå¹¶ç»™å‡ºäº†å¤§é‡æœ€ä½³å®è·µï¼Œèƒ½å¸®åŠ©ä½ ç³»ç»Ÿè€Œæ·±å…¥åœ°æŒæ¡InnoDBï¼Œæ›´é‡è¦çš„æ˜¯ï¼Œå®ƒèƒ½ä¸ºä½ è®¾è®¡ç®¡ç†é«˜æ€§èƒ½ã€é«˜å¯ç”¨çš„æ•°æ®åº“ç³»ç»Ÿæä¾›ç»ä½³çš„æŒ‡å¯¼ã€‚ æ¨èå…¬ä¼—å·ï¼šDBAplusç¤¾ç¾¤ ã€Šé«˜æ€§èƒ½MySQLã€‹ è±†ç“£è¯„åˆ†ï¼š9.3 ã€245 äººè¯„ä»·ã€‘ æ¨èç†ç”±ï¼šå¯¹äºæƒ³è¦äº†è§£MySQLæ€§èƒ½æå‡çš„äººæ¥è¯´ï¼Œè¿™æ˜¯ä¸€æœ¬ä¸å¯å¤šå¾—çš„ä¹¦ã€‚ä¹¦ä¸­æ²¡æœ‰å„ç§æå‡æ€§èƒ½çš„ç§˜ç±ï¼Œè€Œæ˜¯æ·±å…¥é—®é¢˜çš„æ ¸å¿ƒï¼Œè¯¦ç»†çš„è§£é‡Šäº†æ¯ç§æå‡æ€§èƒ½çš„åŸç†ï¼Œä»è€Œå¯ä»¥ä½¿ä½ å››ä¸¤æ‹¨åƒæ–¤ã€‚æˆä¹‹äºé±¼ä¸å¦‚æˆä¹‹äºæ¸”ï¼Œè¿™æœ¬ä¹¦åšåˆ°äº†ã€‚ æ¨èå…¬ä¼—å·ï¼šè€å¶èŒ¶é¦† ã€Šé«˜å¯ç”¨MySQLã€‹ è±†ç“£è¯„åˆ†ï¼š8.0 ã€87 äººè¯„ä»·ã€‘ æ¨èç†ç”±ï¼šã€Šé«˜æ€§èƒ½MySQLã€‹çš„å§Šå¦¹ç¯‡ã€‚ ã€ŠMongoDBæƒå¨æŒ‡å—ã€‹ è±†ç“£è¯„åˆ†ï¼š8.0 ã€69 äººè¯„ä»·ã€‘ æ¨èç†ç”±ï¼šç®—æ˜¯æ™®é€šçš„å‚è€ƒä¹¦äº†ï¼Œæ²¡æœ‰ç‰¹åˆ«æœ‰æ·±åº¦çš„è®²è§£ã€‚å…¶å®å°±æ˜¯ä¸€æœ¬æ­£å¸¸çš„ä»‹ç»mongoDBæ˜¯æ€ä¹ˆç”¨çš„ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºnosqlå­¦ä¹ çš„å…¥é—¨ã€‚ä½œä¸ºæŒ‡å—ä¹¦ï¼Œè¿˜æ˜¯å¾ˆåˆæ ¼çš„ç¬¦åˆæœŸæœ›ã€‚ æ¨èåšå®¢ï¼šMongoDB ä¸­æ–‡ç¤¾åŒº æ¨èå…¬ä¼—å·ï¼šMongoDB ä¸­æ–‡ç¤¾åŒº ã€ŠRediså¼€å‘ä¸è¿ç»´ã€‹ è±†ç“£è¯„åˆ†ï¼š8.8 ã€41 äººè¯„ä»·ã€‘ æ¨èç†ç”±ï¼šä»å¼€å‘ã€è¿ç»´ä¸¤ä¸ªè§’åº¦æ€»ç»“äº†Rediså®æˆ˜ç»éªŒï¼Œæ·±å…¥æµ…å‡ºåœ°å‰–æåº•å±‚å®ç°ï¼ŒåŒ…å«å¤§è§„æ¨¡é›†ç¾¤å¼€å‘ä¸è¿ç»´çš„å®é™…æ¡ˆä¾‹ã€åº”ç”¨æŠ€å·§ã€‚å…¨é¢è¦†ç›–Redis åŸºæœ¬åŠŸèƒ½åŠåº”ç”¨ï¼Œå›¾ç¤ºä¸°å¯Œï¼Œè®²è§£ç»†è…»ã€‚ æ¨èåšå®¢ï¼šRedis ä¸­å›½ç”¨æˆ·ç»„ æ¨èå…¬ä¼—å·ï¼šCRUG ã€ŠRedisè®¾è®¡ä¸å®ç°ã€‹ è±†ç“£è¯„åˆ†ï¼š8.5 ã€427 äººè¯„ä»·ã€‘ æ¨èç†ç”±ï¼šç³»ç»Ÿè€Œå…¨é¢åœ°æè¿°äº† Redis å†…éƒ¨è¿è¡Œæœºåˆ¶ã€‚å›¾ç¤ºä¸°å¯Œï¼Œæè¿°æ¸…æ™°ï¼Œå¹¶ç»™å‡ºå¤§é‡å‚è€ƒä¿¡æ¯ï¼Œæ˜¯NoSQLæ•°æ®åº“å¼€å‘äººå‘˜æ¡ˆå¤´å¿…å¤‡ã€‚ ã€ŠNoSQLç²¾ç²¹ã€‹ è±†ç“£è¯„åˆ†ï¼š8.2 ã€226 äººè¯„ä»·ã€‘ æ¨èç†ç”±ï¼šä¹¦ä¸­å…¨æ–¹ä½æ¯”è¾ƒäº†å…³ç³»å‹æ•°æ®åº“ä¸NoSQLæ•°æ®åº“çš„å¼‚åŒï¼›åˆ†åˆ«ä»¥Riakã€MongoDBã€Cassandraå’ŒNeo4Jä¸ºä»£è¡¨ï¼Œè¯¦ç»†è®²è§£äº†é”®å€¼æ•°æ®åº“ã€æ–‡æ¡£æ•°æ®åº“ã€åˆ—æ—æ•°æ®åº“å’Œå›¾æ•°æ®åº“è¿™4å¤§ç±»NoSQLæ•°æ®åº“çš„ä¼˜åŠ£åŠ¿ã€ç”¨æ³•å’Œé€‚ç”¨åœºåˆï¼›æ·±å…¥æ¢è®¨äº†å®ç°NoSQLæ•°æ®åº“ç³»ç»Ÿçš„å„ç§ç»†èŠ‚ï¼Œä»¥åŠä¸å…³ç³»å‹æ•°æ®åº“çš„æ··ç”¨ã€‚ ã€ŠElasticSearch å¯æ‰©å±•çš„å¼€æºå¼¹æ€§æœç´¢è§£å†³æ–¹æ¡ˆã€‹ è±†ç“£è¯„åˆ†ï¼š7.3 ã€23 äººè¯„ä»·ã€‘ æ¨èç†ç”±ï¼šåŸºäºElasticSearch çš„0.2 ç‰ˆæœ¬ï¼Œè¦†ç›–äº†ElasticSearch å„ç§åŠŸèƒ½å’Œå‘½ä»¤çš„åº”ç”¨ï¼Œå…¨é¢ã€è¯¦ç»†åœ°ä»‹ç»äº†å¼€æºã€åˆ†å¸ƒå¼ã€RESTfulï¼Œå…·æœ‰å…¨æ–‡æ£€ç´¢åŠŸèƒ½çš„æœç´¢å¼•æ“ElasticSearchã€‚ å‹æƒ…æç¤ºï¼šæœ¬ä¹¦ ElasticSearch æ¯”è¾ƒæ—§ï¼Œä¸å¿æ¨èã€‚ä»…é€‚åˆå…¥é—¨ï¼Œæœ‰å…¶ä»–åˆé€‚çš„ ElasticSearch ä¹¦ç±ï¼Œçƒ¦è¯·å‘Šè¯‰æˆ‘ã€‚ã€ŠElasticsearchæƒå¨æŒ‡å—ã€‹ä¸­æ–‡ç‰ˆï¼Œç›®å‰æ­£åœ¨ç¿»è¯‘ä¸­ã€‚ æ¨èåšå®¢ï¼šElastic ä¸­æ–‡ç¤¾åŒº ã€ŠELK Stackæƒå¨æŒ‡å—ã€‹ è±†ç“£è¯„åˆ†ï¼š7.0 ã€10 äººè¯„ä»·ã€‘ æ¨èç†ç”±ï¼šELK stackæ˜¯ä»¥Elasticsearchã€Logstashã€Kibanaä¸‰ä¸ªå¼€æºè½¯ä»¶ä¸ºä¸»çš„æ•°æ®å¤„ç†å·¥å…·é“¾ï¼Œæ˜¯ç›®å‰å¼€æºç•Œæœ€æµè¡Œçš„å®æ—¶æ•°æ®åˆ†æè§£å†³æ–¹æ¡ˆï¼Œæˆä¸ºå®æ—¶æ—¥å¿—å¤„ç†é¢†åŸŸå¼€æºç•Œçš„ç¬¬ä¸€é€‰æ‹©ã€‚ ã€ŠZooKeeperï¼šåˆ†å¸ƒå¼è¿‡ç¨‹ååŒæŠ€æœ¯è¯¦è§£ã€‹ è±†ç“£è¯„åˆ†ï¼š7.6 ã€49 äººè¯„ä»·ã€‘ æ¨èç†ç”±ï¼šZookeeper å…¥é—¨ å‹æƒ…æç¤ºï¼šç¿»è¯‘å¯èƒ½ç•¥æ˜¾å°´å°¬ã€‚ ã€Šä»Paxosåˆ°Zookeeperåˆ†å¸ƒå¼ä¸€è‡´æ€§åŸç†ä¸å®è·µã€‹ è±†ç“£è¯„åˆ†ï¼š8.1 ã€187 äººè¯„ä»·ã€‘ æ¨èç†ç”±ï¼šä»åˆ†å¸ƒå¼ä¸€è‡´æ€§çš„ç†è®ºå‡ºå‘ï¼Œå‘è¯»è€…ç®€è¦ä»‹ç»å‡ ç§å…¸å‹çš„åˆ†å¸ƒå¼ä¸€è‡´æ€§åè®®ï¼Œä»¥åŠè§£å†³åˆ†å¸ƒå¼ä¸€è‡´æ€§é—®é¢˜çš„æ€è·¯ï¼Œå…¶ä¸­é‡ç‚¹è®²è§£äº†Paxoså’ŒZABåè®®ã€‚åŒæ—¶ï¼Œæœ¬ä¹¦æ·±å…¥ä»‹ç»äº†åˆ†å¸ƒå¼ä¸€è‡´æ€§é—®é¢˜çš„å·¥ä¸šè§£å†³æ–¹æ¡ˆâ€”â€”ZooKeeperï¼Œå¹¶ç€é‡å‘è¯»è€…å±•ç¤ºè¿™ä¸€åˆ†å¸ƒå¼åè°ƒæ¡†æ¶çš„ä½¿ç”¨æ–¹æ³•ã€å†…éƒ¨å®ç°åŠè¿ç»´æŠ€å·§ï¼Œæ—¨åœ¨å¸®åŠ©è¯»è€…å…¨é¢äº†è§£ZooKeeperï¼Œå¹¶æ›´å¥½åœ°ä½¿ç”¨å’Œè¿ç»´ZooKeeperã€‚ ã€ŠRabbitMQå®æˆ˜ï¼šé«˜æ•ˆéƒ¨ç½²åˆ†å¸ƒå¼æ¶ˆæ¯é˜Ÿåˆ—ã€‹ è±†ç“£è¯„åˆ†ï¼š6.9 ã€47 äººè¯„ä»·ã€‘ æ¨èç†ç”±ï¼šæœ¬ä¹¦å¯¹RabbitMQåšäº†å…¨é¢ã€ç¿”å®çš„è®²è§£ï¼Œä½“ç°äº†ä¸¤ä½ä¸“å®¶çš„çœŸçŸ¥ç¼è§ã€‚æœ¬ä¹¦é¦–å…ˆä»‹ç»äº†æœ‰å…³MQçš„å†å²ï¼Œç„¶åä»åŸºæœ¬çš„æ¶ˆæ¯é€šä¿¡åŸç†è®²èµ·ï¼Œå¸¦é¢†è¯»è€…ä¸€è·¯æ¢ç´¢RabbitMQçš„æ¶ˆæ¯é€šä¿¡ä¸–ç•Œã€‚ å‹æƒ…æç¤ºï¼šæœ¬ä¹¦ RabbitMQ ç‰ˆæœ¬è¾ƒæ—§ã€‚æ¶ˆæ¯é˜Ÿåˆ—ä¸­é—´ä»¶ RabbitMQã€ActiveMQã€RocketMQã€Kafka å¯ä»¥é€‰æ‹©äº†è§£ä¸€ä¸‹ã€‚ ã€ŠApache Kafkaæºç å‰–æã€‹ è±†ç“£è¯„åˆ†ï¼š7.8 ã€30 äººè¯„ä»·ã€‘ æ¨èç†ç”±ï¼šä»¥Kafka 0.10.0ç‰ˆæœ¬æºç ä¸ºåŸºç¡€ï¼Œé’ˆå¯¹Kafkaçš„æ¶æ„è®¾è®¡åˆ°å®ç°ç»†èŠ‚è¿›è¡Œè¯¦ç»†é˜è¿°ã€‚ ã€Šä½œä¸šè°ƒåº¦ç³»ç»Ÿ Quartz ä¸­æ–‡æ–‡æ¡£ã€‹ è±†ç“£è¯„åˆ†ï¼šæš‚æ—  æ¨èç†ç”±ï¼šæš‚æ—¶æœªæ‰¾åˆ°å¤§å®¶è¯„ä»·ä¸é”™çš„ Quartz å®æˆ˜ç›¸å…³ä¹¦ç±ï¼Œå…ˆæ¨èçœ‹ä¸­æ–‡ç¿»è¯‘çš„å®˜æ–¹æ–‡æ¡£ã€‚å¦‚æœä½ æœ‰åˆé€‚çš„æ¨èï¼Œçƒ¦è¯·å‘Šè¯‰æˆ‘ã€‚ å‹æƒ…æç¤ºï¼šå›½å†…å¼€æºé¡¹ç›® Elastic-Jobï¼ŒXXL-Job éƒ½å¯ä»¥é€‰æ‹©äº†è§£ã€‚ ã€Šå¾®æœåŠ¡è®¾è®¡ã€‹ è±†ç“£è¯„åˆ†ï¼š8.1 ã€273 äººè¯„ä»·ã€‘ æ¨èç†ç”±ï¼šé€šè¿‡Netflixç­‰å¤šä¸ªä¸šç•Œæ¡ˆä¾‹ï¼Œä»å¾®æœåŠ¡æ¶æ„æ¼”è¿›åˆ°åŸç†å‰–æï¼Œå…¨é¢è®²è§£å»ºæ¨¡é›†æˆéƒ¨ç½²ç­‰å¾®æœåŠ¡æ‰€æ¶‰åŠçš„å„ç§ä¸»é¢˜ï¼Œå¾®æœåŠ¡æ¶æ„ä¸å®è·µæŒ‡å—ã€‚ ã€ŠSpring Cloudå¾®æœåŠ¡å®æˆ˜ã€‹ è±†ç“£è¯„åˆ†ï¼š7.9ã€20 äººè¯„ä»·ã€‘ æ¨èç†ç”±ï¼šä»æ—¶ä¸‹æµè¡Œçš„å¾®æœåŠ¡æ¶æ„æ¦‚å¿µå‡ºå‘ï¼Œè¯¦ç»†ä»‹ç»äº†Spring Cloudé’ˆå¯¹å¾®æœåŠ¡æ¶æ„ä¸­å‡ å¤§æ ¸å¿ƒè¦ç´ çš„è§£å†³æ–¹æ¡ˆå’ŒåŸºç¡€ç»„ä»¶ã€‚å¯¹äºå„ä¸ªç»„ä»¶çš„ä»‹ç»ï¼Œä¸»è¦ä»¥ç¤ºä¾‹ä¸æºç ç»“åˆçš„æ–¹å¼æ¥å¸®åŠ©è¯»è€…æ›´å¥½åœ°ç†è§£è¿™äº›ç»„ä»¶çš„ä½¿ç”¨æ–¹æ³•ä»¥åŠè¿è¡ŒåŸç†ã€‚åŒæ—¶ï¼Œåœ¨ä»‹ç»çš„è¿‡ç¨‹ä¸­ï¼Œè¿˜åŒ…å«äº†ä½œè€…åœ¨å®è·µä¸­æ‰€é‡åˆ°çš„ä¸€äº›é—®é¢˜å’Œè§£å†³æ€è·¯ï¼Œå¯ä¾›è¯»è€…åœ¨å®è·µä¸­ä½œä¸ºå‚è€ƒã€‚ ä½œè€…åšå®¢ï¼šhttp://blog.didispace.com/ ä½œè€…å…¬ä¼—å·ï¼šdidispace ã€Šäº¿çº§æµé‡ç½‘ç«™æ¶æ„æ ¸å¿ƒæŠ€æœ¯ã€‹ è±†ç“£è¯„åˆ†ï¼š7.6ã€57 äººè¯„ä»·ã€‘ æ¨èç†ç”±ï¼šæ€»ç»“å¹¶æ¢³ç†äº†äº¿çº§æµé‡ç½‘ç«™é«˜å¯ç”¨å’Œé«˜å¹¶å‘åŸåˆ™ï¼Œé€šè¿‡å®ä¾‹è¯¦ç»†ä»‹ç»äº†å¦‚ä½•è½åœ°è¿™äº›åŸåˆ™ã€‚æœ¬ä¹¦åˆ†ä¸ºå››éƒ¨åˆ†ï¼šæ¦‚è¿°ã€é«˜å¯ç”¨åŸåˆ™ã€é«˜å¹¶å‘åŸåˆ™ã€æ¡ˆä¾‹å®æˆ˜ã€‚ ä½œè€…åšå®¢ï¼šå¼€æ¶›çš„åšå®¢ ä½œè€…å…¬ä¼—å·ï¼šå¼€æ¶›çš„åšå®¢ ã€Šæ¶æ„å³æœªæ¥ï¼šç°ä»£ä¼ä¸šå¯æ‰©å±•çš„Webæ¶æ„ã€æµç¨‹å’Œç»„ç»‡ã€‹ è±†ç“£è¯„åˆ†ï¼š8.7ã€77 äººè¯„ä»·ã€‘ æ¨èç†ç”±ï¼šä»»ä½•ä¸€ä¸ªæŒç»­æˆé•¿çš„å…¬å¸æœ€ç»ˆéƒ½éœ€è¦è§£å†³ç³»ç»Ÿã€ç»„ç»‡å’Œæµç¨‹çš„æ‰©å±•æ€§é—®é¢˜ã€‚æœ¬ä¹¦æ±‡èšäº†ä½œè€…ä»eBayã€VISAã€Salesforce.comåˆ°Appleè¶…è¿‡30å¹´çš„ä¸°å¯Œç»éªŒï¼Œ å…¨é¢é˜é‡Šäº†ç»è¿‡éªŒè¯çš„ä¿¡æ¯æŠ€æœ¯æ‰©å±•æ–¹æ³•ï¼Œå¯¹æ‰€éœ€è¦æŒæ¡çš„äº§å“å’ŒæœåŠ¡çš„å¹³æ»‘æ‰©å±•åšäº†è¯¦å°½çš„è®ºè¿°ï¼Œå¹¶åœ¨ç¬¬1ç‰ˆçš„åŸºç¡€ä¸Šæ›´æ–°äº†æ‰©å±•çš„ç­–ç•¥ã€æŠ€æœ¯å’Œæ¡ˆä¾‹ã€‚ ã€ŠMaven å®æˆ˜ã€‹ è±†ç“£è¯„åˆ†ï¼š8.1ã€563 äººè¯„ä»·ã€‘ æ¨èç†ç”±ï¼šå›½å†…æœ€æƒå¨çš„Mavenä¸“å®¶çš„åŠ›ä½œï¼Œå”¯ä¸€ä¸€æœ¬å“¦ï¼ ã€ŠJenkinsæƒå¨æŒ‡å—ã€‹ è±†ç“£è¯„åˆ†ï¼šæš‚æ— è¯„åˆ† æ¨èç†ç”±ï¼šJenkins å”¯ä¸€å®ä½“ä¹¦ã€‚ å‹æƒ…æç¤ºï¼šå†…å®¹ç›¸å¯¹æ¯”è¾ƒæ—§ï¼Œå¤§å¤šæ˜¯è¿‡æ—¶çš„æ¡ˆä¾‹ã€‚å»ºè®®ï¼Œå¿«é€Ÿè¿‡ä¸€éã€‚Jenkins æ–¹é¢æ— ç‰¹åˆ«å¥½çš„é€‰æ‹©æ¨èä¹¦ç±ã€‚å¯ä»¥é€‰æ‹© Google ä¸€äº›æ•™ç¨‹ã€‚ ã€Šé¸Ÿå“¥çš„Linuxç§æˆ¿èœ ï¼ˆåŸºç¡€å­¦ä¹ ç¯‡ï¼‰ã€‹ è±†ç“£è¯„åˆ†ï¼š9.1ã€2269 äººè¯„ä»·ã€‘ æ¨èç†ç”±ï¼šæœ¬ä¹¦æ˜¯æœ€å…·çŸ¥ååº¦çš„Linuxå…¥é—¨ä¹¦ã€Šé¸Ÿå“¥çš„Linuxç§æˆ¿èœåŸºç¡€å­¦ä¹ ç¯‡ã€‹çš„æœ€æ–°ç‰ˆï¼Œå…¨é¢è€Œè¯¦ç»†åœ°ä»‹ç»äº†Linuxæ“ä½œç³»ç»Ÿã€‚ å‹æƒ…æç¤ºï¼šå†…å®¹éå¸¸å…¨é¢ï¼Œå»ºè®®æŒ‘é€‰å’Œè‡ªå·±å®é™…å·¥ä½œç›¸å…³åº¦è¾ƒé«˜çš„ï¼Œå…¶ä»–éƒ¨åˆ†æœ‰éœ€è¦å†é˜…è¯»ã€‚ ã€Šé¸Ÿå“¥çš„Linuxç§æˆ¿èœ ï¼ˆæœåŠ¡å™¨æ¶è®¾ç¯‡ï¼‰ã€‹ è±†ç“£è¯„åˆ†ï¼š8.8 ã€198 äººè¯„ä»·ã€‘ æ¨èç†ç”±ï¼šæ‚¨å·²æœ‰LinuxåŸºç¡€ï¼Œæƒ³è¦è¿›ä¸€æ­¥å­¦ä¹ æœåŠ¡å™¨æ¶è®¾ï¼Ÿè¿˜æƒ³äº†è§£å¦‚ä½•ç»´æŠ¤ä¸ç®¡ç†æ‚¨çš„æœåŠ¡å™¨ï¼Ÿæœ¬ä¹¦æ˜¯æ‚¨æœ€ä½³çš„é€‰æ‹©ã€‚ ã€ŠZabbixä¼ä¸šçº§åˆ†å¸ƒå¼ç›‘æ§ç³»ç»Ÿã€‹ è±†ç“£è¯„åˆ†ï¼š7.6 ã€39 äººè¯„ä»·ã€‘ æ¨èç†ç”±ï¼šæœ¬ä¹¦ä»è¿ç»´ï¼ˆOPSï¼‰è§’åº¦å¯¹Zabbixçš„å„é¡¹åŠŸèƒ½è¿›è¡Œäº†è¯¦ç»†ä»‹ç»ï¼Œä»¥è‡ªåŠ¨åŒ–è¿ç»´è§†è§’ä¸ºå‡ºå‘ç‚¹ï¼Œå¯¹Zabbixçš„å®‰è£…å’Œé…ç½®ã€è‡ªåŠ¨åŒ–åŠŸèƒ½ã€ç›‘æ§å‘Šè­¦ã€æ€§èƒ½è°ƒä¼˜ã€Zabbix APIã€Zabbixåè®®ã€RPMå®‰è£…åŒ…å®šåˆ¶ï¼Œç»“åˆSaltStackå®ç°è‡ªåŠ¨åŒ–é…ç½®ç®¡ç†ç­‰å†…å®¹è¿›è¡Œäº†å…¨æ–¹ä½çš„æ·±å…¥å‰–æã€‚ ã€Šç¬¬ä¸€æœ¬Dockerä¹¦ã€‹ è±†ç“£è¯„åˆ†ï¼š8.8 ã€63 äººè¯„ä»·ã€‘ æ¨èç†ç”±ï¼šæœ¬ä¹¦ç”±Dockerå…¬å¸å‰æœåŠ¡ä¸æ”¯æŒå‰¯æ€»è£James Turnbullç¼–å†™ï¼Œæ˜¯Dockerå¼€å‘æŒ‡å—ã€‚æœ¬ä¹¦ä¸“æ³¨äºDocker 1.9åŠä»¥ä¸Šç‰ˆæœ¬ï¼ŒæŒ‡å¯¼è¯»è€…å®ŒæˆDockerçš„å®‰è£…ã€éƒ¨ç½²ã€ç®¡ç†å’Œæ‰©å±•ï¼Œå¸¦é¢†è¯»è€…ç»å†ä»æµ‹è¯•åˆ°ç”Ÿäº§çš„æ•´ä¸ªå¼€å‘ç”Ÿå‘½å‘¨æœŸï¼Œè®©è¯»è€…äº†è§£Dockeré€‚ç”¨äºä»€ä¹ˆåœºæ™¯ã€‚ æ¨èåšå®¢ï¼šDockerOne æ¨èå…¬ä¼—å·ï¼šDockerOne ã€ŠDockerâ€”â€”å®¹å™¨ä¸å®¹å™¨äº‘ã€‹ è±†ç“£è¯„åˆ†ï¼š8.5 ã€99 äººè¯„ä»·ã€‘ æ¨èç†ç”±ï¼šæœ¬ä¹¦æ ¹æ®Docker 1.10ç‰ˆå’ŒKubernetes 1.2ç‰ˆå¯¹ç¬¬1ç‰ˆè¿›è¡Œäº†å…¨é¢æ›´æ–°ï¼Œä»å®è·µè€…çš„è§’åº¦å‡ºå‘ï¼Œä»¥Dockerå’ŒKubernetesä¸ºé‡ç‚¹ï¼Œæ²¿ç€â€œåŸºæœ¬ç”¨æ³•ä»‹ç»â€åˆ°â€œæ ¸å¿ƒåŸç†è§£è¯»â€åˆ°â€œé«˜çº§å®è·µæŠ€å·§â€çš„æ€è·¯ï¼Œä¸€æœ¬ä¹¦è®²é€å½“å‰ä¸»æµçš„å®¹å™¨å’Œå®¹å™¨äº‘æŠ€æœ¯ï¼Œæœ‰åŠ©äºè¯»è€…åœ¨å®é™…åœºæ™¯ä¸­åˆ©ç”¨Dockerå®¹å™¨å’Œå®¹å™¨äº‘è§£å†³é—®é¢˜å¹¶å¯å‘æ–°çš„æ€è€ƒã€‚ ã€ŠKubernetesæƒå¨æŒ‡å—ã€‹ è±†ç“£è¯„åˆ†ï¼š7.7ã€15 äººè¯„ä»·ã€‘ æ¨èç†ç”±ï¼šKubernetesé‡ç£…å¼€å±±ä¹‹ä½œï¼Œé’ˆå¯¹Kubernetes v1.6å’Œæœ¬ä¹¦ç¬¬2ç‰ˆè¿›è¡Œå¤§ç¯‡å¹…å†…å®¹æ›´æ–°ï¼Œå…¨æ–¹ä½å®Œç¾è¦†ç›–ï¼Œå¯å€Ÿé‰´æ€§æå¼ºã€‚ æ¨èåšå®¢ï¼šKubernetes ä¸­æ–‡ç¤¾åŒº æ¨èå…¬ä¼—å·ï¼šK8S æŠ€æœ¯ç¤¾åŒº ã€Šç”¨Mesosæ¡†æ¶æ„å»ºåˆ†å¸ƒå¼åº”ç”¨ã€‹ è±†ç“£è¯„åˆ†ï¼šæš‚æ— è¯„åˆ† æ¨èç†ç”±ï¼šè¶…çº§è–„çš„ä¸€æœ¬ä¹¦ï¼Œçœ‹å®Œä¹‹åï¼Œä½ ä¼šå¯¹ Mesos ä¼šéå¸¸äº†è§£ï¼Œå¹¶ä¸”æå¤§å¯èƒ½æ€§å­¦ä¼šå¦‚ä½•åŸºäº Mesos æ¡†æ¶æ„å»ºåˆ†å¸ƒå¼åº”ç”¨ã€‚ ã€Šæ•°æ®ç»“æ„ä¸ç®—æ³•åˆ†æï¼šJavaè¯­è¨€æè¿°ã€‹ è±†ç“£è¯„åˆ†ï¼š8.3ã€183 äººè¯„ä»·ã€‘ æ¨èç†ç”±ï¼šæœ¬ä¹¦æ˜¯å›½å¤–æ•°æ®ç»“æ„ä¸ç®—æ³•åˆ†ææ–¹é¢çš„ç»å…¸æ•™æï¼Œä½¿ç”¨å“è¶Šçš„Javaç¼–ç¨‹è¯­è¨€ä½œä¸ºå®ç°å·¥å…·è®¨è®ºäº†æ•°æ®ç»“æ„ï¼ˆç»„ç»‡å¤§é‡æ•°æ®çš„æ–¹æ³•ï¼‰å’Œç®—æ³•åˆ†æï¼ˆå¯¹ç®—æ³•è¿è¡Œæ—¶é—´çš„ä¼°è®¡ï¼‰ã€‚ å‹æƒ…æç¤ºï¼šç®—æ³•æ–¹æ³•è¿˜æœ‰å…¶ä»–å¾ˆå¥½çš„ä¹¦ç±ï¼Œä¾‹å¦‚ã€Šç®—æ³•å¯¼è®ºã€‹ã€ã€Šç®—æ³•ï¼ˆç¬¬å››ç‰ˆï¼‰ã€‹ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©é˜…è¯»ã€‚é‡è¦çš„æ˜¯ï¼Œä¿æŒè€å¿ƒï¼Œäº«å—è¿™ä¸ªç—›å¹¶å¿«ä¹çš„è¿‡ç¨‹ã€‚ ã€ŠHead First è®¾è®¡æ¨¡å¼ã€‹ è±†ç“£è¯„åˆ†ï¼š9.2ã€2394 äººè¯„ä»·ã€‘ æ¨èç†ç”±ï¼šã€ŠHead Firstè®¾è®¡æ¨¡å¼ã€‹(ä¸­æ–‡ç‰ˆ)å…±æœ‰14ç« ï¼Œæ¯ç« éƒ½ä»‹ç»äº†å‡ ä¸ªè®¾è®¡æ¨¡å¼ï¼Œå®Œæ•´åœ°æ¶µç›–äº†å››äººç»„ç‰ˆæœ¬å…¨éƒ¨23ä¸ªè®¾è®¡æ¨¡å¼ã€‚ ã€ŠHTTPæƒå¨æŒ‡å—ã€‹ è±†ç“£è¯„åˆ†ï¼š8.7 ã€1126 äººè¯„ä»·ã€‘ æ¨èç†ç”±ï¼šæœ¬ä¹¦å°è¯•ç€å°†HTTPä¸­ä¸€äº›äº’ç›¸å…³è”ä¸”å¸¸è¢«è¯¯è§£çš„è§„åˆ™æ¢³ç†æ¸…æ¥šï¼Œå¹¶ç¼–å†™äº†ä¸€ç³»åˆ—åŸºäºå„ç§ä¸»é¢˜çš„ç« èŠ‚ï¼Œå¯¹HTTPå„æ–¹é¢çš„ç‰¹æ€§è¿›è¡Œäº†ä»‹ç»ã€‚çºµè§‚å…¨ä¹¦ï¼Œå¯¹HTTPâ€œä¸ºä»€ä¹ˆâ€è¿™æ ·åšè¿›è¡Œäº†è¯¦ç»†çš„è§£é‡Šï¼Œè€Œä¸ä»…ä»…åœç•™åœ¨å®ƒæ˜¯â€œæ€ä¹ˆåšâ€çš„ã€‚ ã€ŠTCP/IPè¯¦è§£ ç³»åˆ—ã€‹ è±†ç“£è¯„åˆ†ï¼š9.3 ã€1883 äººè¯„ä»·ã€‘ æ¨èç†ç”±ï¼šå®Œæ•´è€Œè¯¦ç»†çš„TCP/IPåè®®æŒ‡å—ã€‚é’ˆå¯¹ä»»ä½•å¸Œæœ›ç†è§£TCP/IPåè®®æ˜¯å¦‚ä½•å®ç°çš„è¯»è€…è®¾è®¡ã€‚ ã€ŠLinuxå†…æ ¸è®¾è®¡ä¸å®ç°ã€‹ è±†ç“£è¯„åˆ†ï¼š8.7ã€286 äººè¯„ä»·ã€‘ è¯¦ç»†æè¿°äº†Linuxå†…æ ¸çš„ä¸»è¦å­ç³»ç»Ÿå’Œç‰¹ç‚¹ï¼ŒåŒ…æ‹¬Linuxå†…æ ¸çš„è®¾è®¡ã€å®ç°å’Œæ¥å£ã€‚ä»ç†è®ºåˆ°å®è·µæ¶µç›–äº†Linuxå†…æ ¸çš„æ–¹æ–¹é¢é¢ï¼Œå¯ä»¥æ»¡è¶³è¯»è€…çš„å„ç§å…´è¶£å’Œéœ€æ±‚ã€‚ å‹æƒ…æç¤ºï¼šLinuxå†…æ ¸æ–¹é¢ä¸ä¹å¥½ä¹¦ã€‚æœ¬ä¹¦ç¯‡å¹…æ–¹é¢è¾ƒä¸ºåˆé€‚ã€‚ ã€Šå‰‘æŒ‡Offerï¼šåä¼é¢è¯•å®˜ç²¾è®²å…¸å‹ç¼–ç¨‹é¢˜ã€‹ è±†ç“£è¯„åˆ†ï¼š8.5ã€508 äººè¯„ä»·ã€‘ æ¨èç†ç”±ï¼šå‰–æäº†80ä¸ªå…¸å‹çš„ç¼–ç¨‹é¢è¯•é¢˜ï¼Œç³»ç»Ÿæ•´ç†åŸºç¡€çŸ¥è¯†ã€ä»£ç è´¨é‡ã€è§£é¢˜æ€è·¯ã€ä¼˜åŒ–æ•ˆç‡å’Œç»¼åˆèƒ½åŠ›è¿™5ä¸ªé¢è¯•è¦ç‚¹ã€‚ æ¨èç½‘ç«™ï¼šç‰›å®¢ç½‘-ä¸“ä¸šITç¬”è¯•é¢è¯•å¤‡è€ƒå¹³å° ã€Šç¨‹åºå‘˜ä»£ç é¢è¯•æŒ‡å—ï¼šITåä¼ç®—æ³•ä¸æ•°æ®ç»“æ„é¢˜ç›®æœ€ä¼˜è§£ã€‹ è±†ç“£è¯„åˆ†ï¼š8.4ã€32 äººè¯„ä»·ã€‘ æ¨èç†ç”±ï¼šç¨‹åºå‘˜åˆ·é¢˜å®å…¸ï¼ç¼–ç¨‹èƒ½åŠ›æå‡ç§˜ç¬ˆï¼ç²¾é€‰ITåä¼çœŸå®ä»£ç é¢è¯•é¢˜ï¼Œå…¨é¢è¦†ç›–ç®—æ³•ä¸æ•°æ®ç»“æ„é¢˜å‹ï¼ ã€Šé¢†åŸŸé©±åŠ¨è®¾è®¡ã€‹ è±†ç“£è¯„åˆ†ï¼š9.0ã€115 äººè¯„ä»·ã€‘ æ¨èç†ç”±ï¼šæ˜¯é¢†åŸŸé©±åŠ¨è®¾è®¡æ–¹é¢çš„ç»å…¸ä¹‹ä½œã€‚å…¨ä¹¦å›´ç»•ç€è®¾è®¡å’Œå¼€å‘å®è·µï¼Œç»“åˆè‹¥å¹²çœŸå®çš„é¡¹ç›®æ¡ˆä¾‹ï¼Œå‘è¯»è€…é˜è¿°å¦‚ä½•åœ¨çœŸå®çš„è½¯ä»¶å¼€å‘ä¸­åº”ç”¨é¢†åŸŸé©±åŠ¨è®¾è®¡ã€‚ å‹æƒ…æç¤ºï¼šç†è®ºçš„ä¹¦ç±å¾€å¾€è¾ƒä¸ºæ¯ç‡¥ï¼Œå‹¤ä¿®å†…åŠŸæ˜¯å¿…é¡»èµ°çš„è·¯ã€‚ ã€Šç«çƒ:UMLå¤§æˆ˜éœ€æ±‚åˆ†æã€‹ è±†ç“£è¯„åˆ†ï¼š7.9ã€115 äººè¯„ä»·ã€‘ æ¨èç†ç”±ï¼šèåˆUMLã€éUMLã€éœ€æ±‚åˆ†æåŠéœ€æ±‚ç®¡ç†ç­‰å„æ–¹é¢çš„çŸ¥è¯†ï¼Œå¸®åŠ©è¯»è€…è§£å†³UMLä¸šç•Œé—®é¢˜ã€éœ€æ±‚åˆ†æåŠéœ€æ±‚ç®¡ç†é—®é¢˜ã€‚ å‹æƒ…æç¤ºï¼šå¯èƒ½ä¸æ˜¯æœ€å¥½çš„ UML ä¹¦ç±ï¼Œä½†ä»æ˜¯å¦èƒ½å¤Ÿé˜…è¯»ç†è§£å®Œçš„è§’åº¦æ¥è¯´ï¼Œæœ¬ä¹¦å¯èƒ½æ˜¯ç›¸å¯¹åˆé€‚çš„ã€‚æœ‰å…´è¶£çš„åŒå­¦ä¹Ÿå¯ä»¥çœ‹çœ‹ã€ŠUMLå’Œæ¨¡å¼åº”ç”¨ã€‹ã€ã€Šå¤§è±¡ï¼šThinking in UMLã€‹ã€‚ TODO Listå¾…æ¨èä¸»é¢˜ä¹¦ç± TODO ã€Šå¤§æ•°æ®æ—¥çŸ¥å½• æ¶æ„ä¸ç®—æ³•ã€‹TODO ã€Šå¤§å‹ç½‘ç«™ç³»ç»Ÿä¸Javaä¸­é—´ä»¶å®è·µã€‹TODO ã€ŠHotSpotå®æˆ˜ã€‹TODO ã€Šåƒåœ¾å›æ”¶çš„ç®—æ³•ä¸å®ç°ã€‹TODO ã€Šå½©è‰²UMLå»ºæ¨¡ã€‹TODO ã€Šä¸ƒå‘¨ä¸ƒå¹¶å‘æ¨¡å‹ã€‹TODO ã€ŠGoç¨‹åºè®¾è®¡è¯­è¨€ã€‹ [x] Go [ ] Node [x] Linux å†…æ ¸ [x] é¢†åŸŸ [x] UML [x] Tomcat [x] SpringCloud [x] Java åŸºç¡€ [x] Netty [x] MyBatis [x] æ•°æ®åº“ [x] MongoDB [x] Maven [x] DevOps [x] Linux è¿ç»´ [x] é¢è¯• [x] æ¶ˆæ¯é˜Ÿåˆ— [x] è®¾è®¡æ¨¡å¼ [x] ç®—æ³•ä¸æ•°æ®ç»“æ„ [x] Zookeeper [x] SpringBoot [x] Nginx [x] å®šæ—¶ä»»åŠ¡ [x] æœç´¢å¼•æ“ [x] åè®® [x] å•å…ƒæµ‹è¯• [x] é‡æ„ [x] æ—¥å¿— [x] Docker [x] ç›‘æ§ æœ€ååŸæ–‡å‡ºå¤„ http://www.iocoder.cn/Architecture/books-recommended/ ã€ŒèŠ‹é“æºç ã€æ¬¢è¿è½¬è½½ï¼Œä¿ç•™æ‘˜è¦ï¼Œè°¢è°¢ï¼","tags":[{"name":"ä¹¦ç±","slug":"ä¹¦ç±","permalink":"http://yoursite.com/tags/ä¹¦ç±/"}]},{"title":"Maven ä¸­ dependencies ä¸ dependencyManagement çš„åŒºåˆ«","date":"2017-11-10T16:00:00.000Z","path":"2017/11/11/Maven-dependencies-dependencyManagement/","text":"å‰æè¿™æ®µæ—¶é—´é¡¹ç›®ä¸­é‡åˆ°è¿‡äº†ä¸€äº› Jar åŒ…å†²çªçš„é—®é¢˜ï¼Œå¾ˆå¤šæ˜¯ç”±äºæˆ‘ä»¬é¡¹ç›®æ¨¡å—å¾ˆå¤šçš„æ—¶å€™ï¼Œç”¨ Maven ç®¡ç†ä¸å½“å¯¼è‡´çš„å†²çªé—®é¢˜ï¼Œæœ¬æ–‡å°±è¿™ä¸ªé—®é¢˜å‚è€ƒç½‘ä¸Šçš„èµ„æ–™ï¼Œäºæ˜¯æ€»ç»“ä¸‹ Maven ä¸­ dependencies ä¸ dependencyManagement çš„åŒºåˆ«ã€‚ å‡è®¾é¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š parent ä¸ºçˆ¶æ¨¡å—ï¼ŒæŠ½è±¡å‡ºæ¥ç®¡ç†å­é¡¹ç›®çš„å…¬å…±ä¾èµ–ï¼Œä¸ºäº†é¡¹ç›®çš„æ­£ç¡®è¿è¡Œï¼Œå¿…é¡»è®©æ‰€æœ‰çš„å­é¡¹ç›®ä½¿ç”¨ä¾èµ–é¡¹çš„ç»Ÿä¸€ç‰ˆæœ¬ï¼Œå¿…é¡»ç¡®ä¿åº”ç”¨çš„å„ä¸ªé¡¹ç›®çš„ä¾èµ–é¡¹å’Œç‰ˆæœ¬ä¸€è‡´ï¼Œæ‰èƒ½ä¿è¯æµ‹è¯•çš„å’Œå‘å¸ƒçš„æ˜¯ç›¸åŒçš„ç»“æœã€‚ dependencyManagementåœ¨é¡¹ç›®çš„ parent å±‚ï¼Œå¯ä»¥é€šè¿‡ dependencyManagement å…ƒç´ æ¥ç®¡ç† jar åŒ…çš„ç‰ˆæœ¬ï¼Œè®©å­é¡¹ç›®ä¸­å¼•ç”¨ä¸€ä¸ªä¾èµ–è€Œä¸ç”¨æ˜¾ç¤ºçš„åˆ—å‡ºç‰ˆæœ¬å·ã€‚ parent ä¸­ pom.xml 123456789101112131415161718&lt;properties&gt; &lt;version.framework&gt;1.0-SNAPSHOT&lt;/version.framework&gt; &lt;javaee-api.version&gt;1.0-SNAPSHOT&lt;/javaee-api.version&gt;&lt;/properties&gt;&lt;dependencyManagement&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;com.zhisheng&lt;/groupId&gt; &lt;artifactId&gt;framework-cache&lt;/artifactId&gt; &lt;version&gt;$&#123;version.framework&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;javax&lt;/groupId&gt; &lt;artifactId&gt;javaee-api&lt;/artifactId&gt; &lt;version&gt;$&#123;javaee-api.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;/dependencies&gt;&lt;/dependencyManagement&gt; extendion ä¸­çš„ pom.xml 123456789101112131415161718192021&lt;parent&gt; &lt;artifactId&gt;parent&lt;/artifactId&gt; &lt;groupId&gt;com.zhisheng&lt;/groupId&gt; &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt; &lt;relativePath&gt;../parent/pom.xml&lt;/relativePath&gt;&lt;/parent&gt;&lt;!--ä¾èµ–å…³ç³»--&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;javax&lt;/groupId&gt; &lt;artifactId&gt;javaee-api&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.zhisheng&lt;/groupId&gt; &lt;artifactId&gt;framework-cache&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt; &lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt; &lt;/dependency&gt; &lt;/dependencies&gt; è¿™æ ·åšçš„å¥½å¤„ï¼šç»Ÿä¸€ç®¡ç†é¡¹ç›®çš„ç‰ˆæœ¬å·ï¼Œç¡®ä¿åº”ç”¨çš„å„ä¸ªé¡¹ç›®çš„ä¾èµ–å’Œç‰ˆæœ¬ä¸€è‡´ï¼Œæ‰èƒ½ä¿è¯æµ‹è¯•çš„å’Œå‘å¸ƒçš„æ˜¯ç›¸åŒçš„æˆæœï¼Œå› æ­¤ï¼Œåœ¨é¡¶å±‚ pom ä¸­å®šä¹‰å…±åŒçš„ä¾èµ–å…³ç³»ã€‚åŒæ—¶å¯ä»¥é¿å…åœ¨æ¯ä¸ªä½¿ç”¨çš„å­é¡¹ç›®ä¸­éƒ½å£°æ˜ä¸€ä¸ªç‰ˆæœ¬å·ï¼Œè¿™æ ·æƒ³å‡çº§æˆ–è€…åˆ‡æ¢åˆ°å¦ä¸€ä¸ªç‰ˆæœ¬æ—¶ï¼Œåªéœ€è¦åœ¨çˆ¶ç±»å®¹å™¨é‡Œæ›´æ–°ï¼Œä¸éœ€è¦ä»»ä½•ä¸€ä¸ªå­é¡¹ç›®çš„ä¿®æ”¹ï¼›å¦‚æœæŸä¸ªå­é¡¹ç›®éœ€è¦å¦å¤–ä¸€ä¸ªç‰ˆæœ¬å·æ—¶ï¼Œåªéœ€è¦åœ¨ dependencies ä¸­å£°æ˜ä¸€ä¸ªç‰ˆæœ¬å·å³å¯ã€‚å­ç±»å°±ä¼šä½¿ç”¨å­ç±»å£°æ˜çš„ç‰ˆæœ¬å·ï¼Œä¸ç»§æ‰¿äºçˆ¶ç±»ç‰ˆæœ¬å·ã€‚ æˆ‘ä»¬çŸ¥é“ Maven çš„ç»§æ‰¿å’Œ Java çš„ç»§æ‰¿ä¸€æ ·ï¼Œæ˜¯æ— æ³•å®ç°å¤šé‡ç»§æ‰¿çš„ï¼Œå¦‚æœ10ä¸ªã€20ä¸ªç”šè‡³æ›´å¤šæ¨¡å—ç»§æ‰¿è‡ªåŒä¸€ä¸ªæ¨¡å—ï¼Œé‚£ä¹ˆæŒ‰ç…§æˆ‘ä»¬ä¹‹å‰çš„åšæ³•ï¼Œè¿™ä¸ªçˆ¶æ¨¡å—çš„ dependencyManagement ä¼šåŒ…å«å¤§é‡çš„ä¾èµ–ã€‚å¦‚æœä½ æƒ³æŠŠè¿™äº›ä¾èµ–åˆ†ç±»ä»¥æ›´æ¸…æ™°çš„ç®¡ç†ï¼Œé‚£å°±ä¸å¯èƒ½äº†ï¼Œimport scope ä¾èµ–èƒ½è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ä½ å¯ä»¥æŠŠ dependencyManagement æ”¾åˆ°å•ç‹¬çš„ä¸“é—¨ç”¨æ¥ç®¡ç†ä¾èµ–çš„ POM ä¸­ï¼Œç„¶ååœ¨éœ€è¦ä½¿ç”¨ä¾èµ–çš„æ¨¡å—ä¸­é€šè¿‡ import scope ä¾èµ–ï¼Œå°±å¯ä»¥å¼•å…¥dependencyManagementã€‚ä¾‹å¦‚å¯ä»¥å†™è¿™æ ·ä¸€ä¸ªç”¨äºä¾èµ–ç®¡ç†çš„ POMï¼š 12345678910111213141516171819202122&lt;project&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;groupId&gt;com.zhisheng.sample&lt;/groupId&gt; &lt;artifactId&gt;sample-dependency-infrastructure&lt;/artifactId&gt; &lt;packaging&gt;pom&lt;/packaging&gt; &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt; &lt;dependencyManagement&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;junit&lt;/groupId&gt; &lt;artifactid&gt;junit&lt;/artifactId&gt; &lt;version&gt;4.8.2&lt;/version&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;log4j&lt;/groupId&gt; &lt;artifactid&gt;log4j&lt;/artifactId&gt; &lt;version&gt;1.2.16&lt;/version&gt; &lt;/dependency&gt; &lt;/dependencies&gt; &lt;/dependencyManagement&gt;&lt;/project&gt; ç„¶åå°±å¯ä»¥é€šè¿‡éç»§æ‰¿çš„æ–¹å¼æ¥å¼•å…¥è¿™æ®µä¾èµ–ç®¡ç†é…ç½®ï¼š 1234567891011121314151617181920&lt;dependencyManagement&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;com.zhisheng.sample&lt;/groupId&gt; &lt;artifactid&gt;sample-dependency-infrastructure&lt;/artifactId&gt; &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt; &lt;type&gt;pom&lt;/type&gt; &lt;scope&gt;import&lt;/scope&gt; &lt;/dependency&gt; &lt;/dependencies&gt; &lt;/dependencyManagement&gt; &lt;dependency&gt; &lt;groupId&gt;junit&lt;/groupId&gt; &lt;artifactid&gt;junit&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;log4j&lt;/groupId&gt; &lt;artifactid&gt;log4j&lt;/artifactId&gt; &lt;/dependency&gt; è¿™æ ·ï¼Œçˆ¶æ¨¡å—çš„ POM å°±ä¼šéå¸¸å¹²å‡€ï¼Œç”±ä¸“é—¨çš„ packaging ä¸º pom çš„ POM æ¥ç®¡ç†ä¾èµ–ï¼Œä¹Ÿå¥‘åˆçš„é¢å‘å¯¹è±¡è®¾è®¡ä¸­çš„å•ä¸€èŒè´£åŸåˆ™ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜èƒ½å¤Ÿåˆ›å»ºå¤šä¸ªè¿™æ ·çš„ä¾èµ–ç®¡ç† POMï¼Œä»¥æ›´ç»†åŒ–çš„æ–¹å¼ç®¡ç†ä¾èµ–ã€‚è¿™ç§åšæ³•ä¸é¢å‘å¯¹è±¡è®¾è®¡ä¸­ä½¿ç”¨ç»„åˆè€Œéç»§æ‰¿ä¹Ÿæœ‰ç‚¹ç›¸ä¼¼çš„å‘³é“ã€‚ dependenciesç›¸å¯¹äº dependencyManagementï¼Œæ‰€æœ‰å£°æ˜åœ¨çˆ¶é¡¹ç›®ä¸­ dependencies é‡Œçš„ä¾èµ–éƒ½ä¼šè¢«å­é¡¹ç›®è‡ªåŠ¨å¼•å…¥ï¼Œå¹¶é»˜è®¤è¢«æ‰€æœ‰çš„å­é¡¹ç›®ç»§æ‰¿ã€‚ åŒºåˆ« dependencies å³ä½¿åœ¨å­é¡¹ç›®ä¸­ä¸å†™è¯¥ä¾èµ–é¡¹ï¼Œé‚£ä¹ˆå­é¡¹ç›®ä»ç„¶ä¼šä»çˆ¶é¡¹ç›®ä¸­ç»§æ‰¿è¯¥ä¾èµ–é¡¹ï¼ˆå…¨éƒ¨ç»§æ‰¿ï¼‰ dependencyManagement é‡Œåªæ˜¯å£°æ˜ä¾èµ–ï¼Œå¹¶ä¸å®ç°å¼•å…¥ï¼Œå› æ­¤å­é¡¹ç›®éœ€è¦æ˜¾ç¤ºçš„å£°æ˜éœ€è¦ç”¨çš„ä¾èµ–ã€‚å¦‚æœä¸åœ¨å­é¡¹ç›®ä¸­å£°æ˜ä¾èµ–ï¼Œæ˜¯ä¸ä¼šä»çˆ¶é¡¹ç›®ä¸­ç»§æ‰¿ä¸‹æ¥çš„ï¼›åªæœ‰åœ¨å­é¡¹ç›®ä¸­å†™äº†è¯¥ä¾èµ–é¡¹ï¼Œå¹¶ä¸”æ²¡æœ‰æŒ‡å®šå…·ä½“ç‰ˆæœ¬ï¼Œæ‰ä¼šä»çˆ¶é¡¹ç›®ä¸­ç»§æ‰¿è¯¥é¡¹ï¼Œå¹¶ä¸” version å’Œ scope éƒ½è¯»å–è‡ªçˆ¶ pom; å¦å¤–å¦‚æœå­é¡¹ç›®ä¸­æŒ‡å®šäº†ç‰ˆæœ¬å·ï¼Œé‚£ä¹ˆä¼šä½¿ç”¨å­é¡¹ç›®ä¸­æŒ‡å®šçš„jarç‰ˆæœ¬ã€‚ æ¶ˆé™¤å¤šæ¨¡å—æ’ä»¶é…ç½®é‡å¤ä¸ dependencyManagement ç±»ä¼¼çš„ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ pluginManagement å…ƒç´ ç®¡ç†æ’ä»¶ã€‚ä¸€ä¸ªå¸¸è§çš„ç”¨æ³•å°±æ˜¯æˆ‘ä»¬å¸Œæœ›é¡¹ç›®æ‰€æœ‰æ¨¡å—çš„ä½¿ç”¨ Maven Compiler Plugin çš„æ—¶å€™ï¼Œéƒ½ä½¿ç”¨ Java 1.8ï¼Œä»¥åŠæŒ‡å®š Java æºæ–‡ä»¶ç¼–ç ä¸º UTF-8ï¼Œè¿™æ—¶å¯ä»¥åœ¨çˆ¶æ¨¡å—çš„ POM ä¸­å¦‚ä¸‹é…ç½® pluginManagementï¼š 12345678910111213141516&lt;build&gt; &lt;pluginManagement&gt; &lt;plugins&gt; &lt;plugin&gt; &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt; &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt; &lt;version&gt;2.5.1&lt;/version&gt; &lt;configuration&gt; &lt;source&gt;1.8&lt;/source&gt; &lt;target&gt;1.8&lt;/target&gt; &lt;encoding&gt;UTF-8&lt;/encoding&gt; &lt;/configuration&gt; &lt;/plugin&gt; &lt;/plugins&gt; &lt;/pluginManagement&gt;&lt;/build&gt; è¿™æ®µé…ç½®ä¼šè¢«åº”ç”¨åˆ°æ‰€æœ‰å­æ¨¡å—çš„ maven-compiler-plugin ä¸­ï¼Œç”±äº Maven å†…ç½®äº† maven-compiler-plugin ä¸ç”Ÿå‘½å‘¨æœŸçš„ç»‘å®šï¼Œå› æ­¤å­æ¨¡å—å°±ä¸å†éœ€è¦ä»»ä½• maven-compiler-plugin çš„é…ç½®äº†ã€‚ ä¸ä¾èµ–é…ç½®ä¸åŒçš„æ˜¯ï¼Œé€šå¸¸æ‰€æœ‰é¡¹ç›®å¯¹äºä»»æ„ä¸€ä¸ªä¾èµ–çš„é…ç½®éƒ½åº”è¯¥æ˜¯ç»Ÿä¸€çš„ï¼Œä½†æ’ä»¶å´ä¸æ˜¯è¿™æ ·ï¼Œä¾‹å¦‚ä½ å¯ä»¥å¸Œæœ›æ¨¡å— A è¿è¡Œæ‰€æœ‰å•å…ƒæµ‹è¯•ï¼Œæ¨¡å— B è¦è·³è¿‡ä¸€äº›æµ‹è¯•ï¼Œè¿™æ—¶å°±éœ€è¦é…ç½® maven-surefire-plugin æ¥å®ç°ï¼Œé‚£æ ·ä¸¤ä¸ªæ¨¡å—çš„æ’ä»¶é…ç½®å°±ä¸ä¸€è‡´äº†ã€‚è¿™ä¹Ÿå°±æ˜¯è¯´ï¼Œç®€å•çš„æŠŠæ’ä»¶é…ç½®æå–åˆ°çˆ¶ POM çš„ pluginManagement ä¸­å¾€å¾€ä¸é€‚åˆæ‰€æœ‰æƒ…å†µï¼Œé‚£æˆ‘ä»¬åœ¨ä½¿ç”¨çš„æ—¶å€™å°±éœ€è¦æ³¨æ„äº†ï¼Œåªæœ‰é‚£äº›æ™®é€‚çš„æ’ä»¶é…ç½®æ‰åº”è¯¥ä½¿ç”¨ pluginManagement æå–åˆ°çˆ¶ POM ä¸­ã€‚ å…³äºæ’ä»¶ pluginManagementï¼ŒMaven å¹¶æ²¡æœ‰æä¾›ä¸ import scope ä¾èµ–ç±»ä¼¼çš„æ–¹å¼ç®¡ç†ï¼Œé‚£æˆ‘ä»¬åªèƒ½å€ŸåŠ©ç»§æ‰¿å…³ç³»ï¼Œä¸è¿‡å¥½åœ¨ä¸€èˆ¬æ¥è¯´æ’ä»¶é…ç½®çš„æ•°é‡è¿œæ²¡æœ‰ä¾èµ–é…ç½®é‚£ä¹ˆå¤šï¼Œå› æ­¤è¿™ä¹Ÿä¸æ˜¯ä¸€ä¸ªé—®é¢˜ã€‚ æœ€åä½ çœ‹åˆ°çš„åªæ˜¯å†°å±±ä¸€è§’ï¼Œæ›´å¤šè¯·çœ‹ä¹¦ç±ã€ŠMaven å®æˆ˜ã€‹ ã€‚ è½¬è½½è¯·æ³¨æ˜åœ°å€ï¼šhttp://www.54tianzhisheng.cn/2017/11/11/Maven-dependencies-dependencyManagement/","tags":[{"name":"Maven","slug":"Maven","permalink":"http://yoursite.com/tags/Maven/"}]},{"title":"å°ç™½è°ˆæ•°æ®è„±æ•","date":"2017-10-27T16:00:00.000Z","path":"2017/10/28/Data-Desensitization/","text":"ä»€ä¹ˆæ˜¯æ•°æ®è„±æ•ï¼Ÿç™¾åº¦ç™¾ç§‘æ˜¯è¿™æ ·æè¿°çš„ï¼š æ•°æ®è„±æ•æ˜¯æŒ‡å¯¹æŸäº›æ•æ„Ÿä¿¡æ¯é€šè¿‡è„±æ•è§„åˆ™è¿›è¡Œæ•°æ®çš„å˜å½¢ï¼Œå®ç°æ•æ„Ÿéšç§æ•°æ®çš„å¯é ä¿æŠ¤ã€‚åœ¨æ¶‰åŠå®¢æˆ·å®‰å…¨æ•°æ®æˆ–è€…ä¸€äº›å•†ä¸šæ€§æ•æ„Ÿæ•°æ®çš„æƒ…å†µä¸‹ï¼Œåœ¨ä¸è¿åç³»ç»Ÿè§„åˆ™æ¡ä»¶ä¸‹ï¼Œå¯¹çœŸå®æ•°æ®è¿›è¡Œæ”¹é€ å¹¶æä¾›æµ‹è¯•ä½¿ç”¨ï¼Œå¦‚èº«ä»½è¯å·ã€æ‰‹æœºå·ã€å¡å·ã€å®¢æˆ·å§“åã€å®¢æˆ·åœ°å€ã€ç­‰ä¸ªäººæ•æ„Ÿä¿¡æ¯éƒ½éœ€è¦é€šè¿‡è„±æ•è§„åˆ™è¿›è¡Œæ•°æ®çš„å˜å½¢ï¼Œå®ç°æ•æ„Ÿéšç§æ•°æ®çš„å¯é ä¿æŠ¤ã€‚è¿™æ ·å°±å¯ä»¥åœ¨å¼€å‘ã€æµ‹è¯•å’Œå…¶ä»–éç”Ÿäº§ç¯å¢ƒä»¥åŠå¤–åŒ…ç¯å¢ƒä¸­å¯ä»¥å®‰å…¨çš„ä½¿ç”¨è„±æ•åçš„çœŸå®æ•°æ®é›†ã€‚ ç”Ÿæ´»ä¸­çš„å¸¸è§ä¾‹å­1ã€ç«è½¦ç¥¨ï¼š 2ã€æ·˜å®ç½‘é¡µä¸Šçš„æ”¶è·åœ°å€ä¿¡æ¯ï¼š æ•æ„Ÿæ•°æ®æ¢³ç†åœ¨è¿›è¡Œæ•°æ®è„±æ•ä¹‹å‰æˆ‘ä»¬åº”è¯¥è¦ç¡®å®šå…¬å¸çš„å“ªäº›æ•°æ®ï¼ˆå“ªäº›è¡¨ã€å“ªäº›å­—æ®µï¼‰è¦ä½œä¸ºè„±æ•çš„ç›®æ ‡ï¼Œä¸‹é¢ä»ç”¨æˆ·ã€å…¬å¸ã€å–å®¶æ–¹é¢åˆ†æï¼š 1ã€ç”¨æˆ·ï¼šåå­—ã€æ‰‹æœºå·ç ã€èº«ä»½è¯å·ç ã€å›ºå®šç”µè¯ã€æ”¶è´§åœ°å€ã€ç”µå­é‚®ç®±ã€é“¶è¡Œå¡å·ã€å¯†ç ç­‰ 2ã€å–å®¶ï¼šåå­—ã€æ‰‹æœºå·ç ã€èº«ä»½è¯å·ç ã€å›ºå®šç”µè¯ç­‰ 3ã€å…¬å¸ï¼šäº¤æ˜“é‡‘é¢ã€ä¼˜æƒ åˆ¸ç ã€å……å€¼ç ç­‰ ç¡®å®šè„±æ•è§„åˆ™ç¡®å®šå¥½äº†å…¬å¸çš„å“ªäº›æ•°æ®è¦ä½œä¸ºè„±æ•ç›®æ ‡åï¼Œæˆ‘ä»¬å°±éœ€è¦åˆ¶å®šè„±æ•çš„è§„åˆ™ï¼ˆå…·ä½“çš„å®æ–½æ–¹æ³•ï¼‰ã€‚ å¸¸è§æ–¹æ³•ï¼š 1ã€æ›¿æ¢ï¼šå¦‚ç»Ÿä¸€å°†å¥³æ€§ç”¨æˆ·åæ›¿æ¢ä¸ºFï¼Œè¿™ç§æ–¹æ³•æ›´åƒâ€œéšœçœ¼æ³•â€ï¼Œå¯¹å†…éƒ¨äººå‘˜å¯ä»¥å®Œå…¨ä¿æŒä¿¡æ¯å®Œæ•´æ€§ï¼Œä½†æ˜“ç ´è§£ã€‚ 2ã€é‡æ’ï¼šåºå·12345 é‡æ’ä¸º 54321ï¼ŒæŒ‰ç…§ä¸€å®šçš„é¡ºåºè¿›è¡Œæ‰“ä¹±ï¼Œå¾ˆåƒâ€œæ›¿æ¢â€ï¼Œ å¯ä»¥åœ¨éœ€è¦æ—¶æ–¹ä¾¿è¿˜åŸä¿¡æ¯ï¼Œä½†åŒæ ·æ˜“ç ´è§£ã€‚ 3ã€åŠ å¯†ï¼šç¼–å· 12345 åŠ å¯†ä¸º 23456ï¼Œå®‰å…¨ç¨‹åº¦å–å†³äºé‡‡ç”¨å“ªç§åŠ å¯†ç®—æ³•ï¼Œä¸€èˆ¬æ ¹æ®å®é™…æƒ…å†µè€Œå®šã€‚ 4ã€æˆªæ–­ï¼š13811001111 æˆªæ–­ä¸º 138ï¼Œèˆå¼ƒå¿…è¦ä¿¡æ¯æ¥ä¿è¯æ•°æ®çš„æ¨¡ç³Šæ€§ï¼Œæ˜¯æ¯”è¾ƒå¸¸ç”¨çš„è„±æ•æ–¹æ³•ï¼Œä½†å¾€å¾€å¯¹ç”Ÿäº§ä¸å¤Ÿå‹å¥½ã€‚ï¼ˆä¸¢å¤±å­—æ®µçš„é•¿åº¦ï¼‰ 5ã€æ©ç : 123456 -&gt; 1xxxx6ï¼Œä¿ç•™äº†éƒ¨åˆ†ä¿¡æ¯ï¼Œå¹¶ä¸”ä¿è¯äº†ä¿¡æ¯çš„é•¿åº¦ä¸å˜æ€§ï¼Œå¯¹ä¿¡æ¯æŒæœ‰è€…æ›´æ˜“è¾¨åˆ«ï¼Œ å¦‚ç«è½¦ç¥¨ä¸Šå¾—èº«ä»½ä¿¡æ¯ã€‚ï¼ˆå¸¸ç”¨æ–¹æ³•ï¼‰ 6ã€æ—¥æœŸåç§»å–æ•´ï¼š20130520 12:30:45 -&gt; 20130520 12:00:00ï¼Œèˆå¼ƒç²¾åº¦æ¥ä¿è¯åŸå§‹æ•°æ®çš„å®‰å…¨æ€§ï¼Œä¸€èˆ¬æ­¤ç§æ–¹æ³•å¯ä»¥ä¿æŠ¤æ•°æ®çš„æ—¶é—´åˆ†å¸ƒå¯†åº¦ã€‚ ç›®å‰æˆ‘çš„è„±æ•è§„åˆ™æƒ³æ³•æ˜¯ï¼š 1ã€ã€ä¸­æ–‡å§“åã€‘åªæ˜¾ç¤ºç¬¬ä¸€ä¸ªæ±‰å­—ï¼Œå…¶ä»–éšè—ä¸º2ä¸ªæ˜Ÿå·ï¼Œæ¯”å¦‚ï¼šæ** 2ã€ã€èº«ä»½è¯å·ã€‘æ˜¾ç¤ºæœ€åå››ä½ï¼Œå…¶ä»–éšè—ã€‚å…±è®¡18ä½æˆ–è€…15ä½ï¼Œæ¯”å¦‚ï¼š*************1234 3ã€ã€å›ºå®šç”µè¯ã€‘ æ˜¾ç¤ºåå››ä½ï¼Œå…¶ä»–éšè—ï¼Œæ¯”å¦‚ï¼š*******3241 4ã€ã€æ‰‹æœºå·ç ã€‘å‰ä¸‰ä½ï¼Œåå››ä½ï¼Œå…¶ä»–éšè—ï¼Œæ¯”å¦‚ï¼š135****6810 5ã€ã€åœ°å€ã€‘åªæ˜¾ç¤ºåˆ°åœ°åŒºï¼Œä¸æ˜¾ç¤ºè¯¦ç»†åœ°å€ï¼Œæ¯”å¦‚ï¼šä¸Šæµ·å¾æ±‡åŒºæ¼•æ²³æ³¾å¼€å‘åŒº*** 6ã€ã€ç”µå­é‚®ç®±ã€‘ é‚®ç®±å‰ç¼€ä»…æ˜¾ç¤ºç¬¬ä¸€ä¸ªå­—æ¯ï¼Œå‰ç¼€å…¶ä»–éšè—ï¼Œç”¨æ˜Ÿå·ä»£æ›¿ï¼Œ@åŠåé¢çš„åœ°å€æ˜¾ç¤ºï¼Œæ¯”å¦‚ï¼šd**@126.com 7ã€ã€é“¶è¡Œå¡å·ã€‘å‰å…­ä½ï¼Œåå››ä½ï¼Œå…¶ä»–ç”¨æ˜Ÿå·éšè—æ¯ä½1ä¸ªæ˜Ÿå·ï¼Œæ¯”å¦‚ï¼š6222600**********1234 8ã€ã€å¯†ç ã€‘å¯†ç çš„å…¨éƒ¨å­—ç¬¦éƒ½ç”¨ä»£æ›¿ï¼Œæ¯”å¦‚ï¼š* æ ¹æ®ä»¥ä¸Šè§„åˆ™è¿›è¡Œæ•°æ®è„±æ•ï¼ å…·ä½“æ€è·¯ç›®å‰æ˜¯è¿™æ ·çš„ï¼š ä»åŸæ•°æ®æºæŸ¥è¯¢åˆ°çš„ç”Ÿäº§æ•°æ® â€”â€”&gt; æ•°æ®è„±æ• â€”â€”&gt; æ›´æ–°åˆ°ç›®æ ‡æ•°æ®æºã€‚ åŸæ•°æ®æºã€ç›®æ ‡æ•°æ®æºã€éœ€è¦è„±æ•çš„è¡¨ã€å­—æ®µç­‰éƒ½æ”¾åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œåšåˆ°å¯æ‰©å±•æ€§ï¼ è„±æ•å·¥å…·ä»£ç æ ¹æ®ä»¥ä¸Šè§„åˆ™å·²ç»å†™å¥½äº†ä¸€ä»½ç®€å•çš„è„±æ•è§„åˆ™å·¥å…·ç±»ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119/** * æ•°æ®è„±æ•å·¥å…·ç±» * Created by zhisheng_tian on 2017/10/25. */public class DesensitizedUtils &#123; /** * ã€ä¸­æ–‡å§“åã€‘åªæ˜¾ç¤ºç¬¬ä¸€ä¸ªæ±‰å­—ï¼Œå…¶ä»–éšè—ä¸º2ä¸ªæ˜Ÿå·ï¼Œæ¯”å¦‚ï¼šæ** * * @param fullName * @return */ public static String chineseName(String fullName) &#123; if (StringUtils.isBlank(fullName)) &#123; return \"\"; &#125; String name = StringUtils.left(fullName, 1); return StringUtils.rightPad(name, StringUtils.length(fullName), \"*\"); &#125; /** * ã€èº«ä»½è¯å·ã€‘æ˜¾ç¤ºæœ€åå››ä½ï¼Œå…¶ä»–éšè—ã€‚å…±è®¡18ä½æˆ–è€…15ä½ï¼Œæ¯”å¦‚ï¼š*************1234 * * @param id * @return */ public static String idCardNum(String id) &#123; if (StringUtils.isBlank(id)) &#123; return \"\"; &#125; String num = StringUtils.right(id, 4); return StringUtils.leftPad(num, StringUtils.length(id), \"*\"); &#125; /** * ã€å›ºå®šç”µè¯ã€‘ æ˜¾ç¤ºåå››ä½ï¼Œå…¶ä»–éšè—ï¼Œæ¯”å¦‚ï¼š*******3241 * * @param num * @return */ public static String fixedPhone(String num) &#123; if (StringUtils.isBlank(num)) &#123; return \"\"; &#125; return StringUtils.leftPad(StringUtils.right(num, 4), StringUtils.length(num), \"*\"); &#125; /** * ã€æ‰‹æœºå·ç ã€‘å‰ä¸‰ä½ï¼Œåå››ä½ï¼Œå…¶ä»–éšè—ï¼Œæ¯”å¦‚ï¼š135****6810 * * @param num * @return */ public static String mobilePhone(String num) &#123; if (StringUtils.isBlank(num)) &#123; return \"\"; &#125; return StringUtils.left(num, 3).concat(StringUtils.removeStart(StringUtils.leftPad(StringUtils.right(num, 4), StringUtils.length(num), \"*\"), \"***\")); &#125; /** * ã€åœ°å€ã€‘åªæ˜¾ç¤ºåˆ°åœ°åŒºï¼Œä¸æ˜¾ç¤ºè¯¦ç»†åœ°å€ï¼Œæ¯”å¦‚ï¼šä¸Šæµ·å¾æ±‡åŒºæ¼•æ²³æ³¾å¼€å‘åŒº*** * * @param address * @param sensitiveSize æ•æ„Ÿä¿¡æ¯é•¿åº¦ * @return */ public static String address(String address, int sensitiveSize) &#123; if (StringUtils.isBlank(address)) &#123; return \"\"; &#125; int length = StringUtils.length(address); return StringUtils.rightPad(StringUtils.left(address, length - sensitiveSize), length, \"*\"); &#125; /** * ã€ç”µå­é‚®ç®±ã€‘ é‚®ç®±å‰ç¼€ä»…æ˜¾ç¤ºç¬¬ä¸€ä¸ªå­—æ¯ï¼Œå‰ç¼€å…¶ä»–éšè—ï¼Œç”¨æ˜Ÿå·ä»£æ›¿ï¼Œ@åŠåé¢çš„åœ°å€æ˜¾ç¤ºï¼Œæ¯”å¦‚ï¼šd**@126.com * * @param email * @return */ public static String email(String email) &#123; if (StringUtils.isBlank(email)) &#123; return \"\"; &#125; int index = StringUtils.indexOf(email, \"@\"); if (index &lt;= 1) return email; else return StringUtils.rightPad(StringUtils.left(email, 1), index, \"*\").concat(StringUtils.mid(email, index, StringUtils.length(email))); &#125; /** * ã€é“¶è¡Œå¡å·ã€‘å‰å…­ä½ï¼Œåå››ä½ï¼Œå…¶ä»–ç”¨æ˜Ÿå·éšè—æ¯ä½1ä¸ªæ˜Ÿå·ï¼Œæ¯”å¦‚ï¼š6222600**********1234 * * @param cardNum * @return */ public static String bankCard(String cardNum) &#123; if (StringUtils.isBlank(cardNum)) &#123; return \"\"; &#125; return StringUtils.left(cardNum, 6).concat(StringUtils.removeStart(StringUtils.leftPad(StringUtils.right(cardNum, 4), StringUtils.length(cardNum), \"*\"), \"******\")); &#125; /** * ã€å¯†ç ã€‘å¯†ç çš„å…¨éƒ¨å­—ç¬¦éƒ½ç”¨*ä»£æ›¿ï¼Œæ¯”å¦‚ï¼š****** * * @param password * @return */ public static String password(String password) &#123; if (StringUtils.isBlank(password)) &#123; return \"\"; &#125; String pwd = StringUtils.left(password, 0); return StringUtils.rightPad(pwd, StringUtils.length(password), \"*\"); &#125;&#125; æœ€åè½¬è½½è¯·æ³¨æ˜åœ°å€ï¼šhttp://www.54tianzhisheng.cn/2017/10/28/Data-Desensitization/","tags":[{"name":"æ•°æ®åº“","slug":"æ•°æ®åº“","permalink":"http://yoursite.com/tags/æ•°æ®åº“/"}]},{"title":"HBase é›†ç¾¤ç›‘æ§","date":"2017-10-20T16:00:00.000Z","path":"2017/10/21/HBase-metrics/","text":"ä¸ºä»€ä¹ˆéœ€è¦ç›‘æ§ï¼Ÿä¸ºäº†ä¿è¯ç³»ç»Ÿçš„ç¨³å®šæ€§ï¼Œå¯é æ€§ï¼Œå¯è¿ç»´æ€§ã€‚ æŒæ§é›†ç¾¤çš„æ ¸å¿ƒæ€§èƒ½æŒ‡æ ‡ï¼Œäº†è§£é›†ç¾¤çš„æ€§èƒ½è¡¨ç°ã€‚ é›†ç¾¤å‡ºç°é—®é¢˜æ—¶åŠæ—¶æŠ¥è­¦ï¼Œä¾¿äºè¿ç»´åŒå­¦åŠæ—¶ä¿®å¤é—®é¢˜ã€‚ é›†ç¾¤é‡è¦æŒ‡æ ‡å€¼å¼‚å¸¸æ—¶è¿›è¡Œé¢„è­¦ï¼Œå°†é—®é¢˜æ‰¼æ€åœ¨æ‘‡ç¯®ä¸­ï¼Œä¸ç”¨ç­‰é›†ç¾¤çœŸæ­£ä¸å¯ç”¨æ—¶æ‰é‡‡å–è¡ŒåŠ¨ã€‚ å½“é›†ç¾¤å‡ºç°é—®é¢˜æ—¶ï¼Œç›‘æ§ç³»ç»Ÿå¯ä»¥å¸®åŠ©æˆ‘ä»¬æ›´å¿«çš„å®šä½é—®é¢˜å’Œè§£å†³é—®é¢˜ å¦‚ä½•æ„å»º HBase é›†ç¾¤ç›‘æ§ç³»ç»Ÿï¼Ÿå…¬å¸æœ‰è‡ªå·±çš„ç›‘æ§ç³»ç»Ÿï¼Œæˆ‘ä»¬æ‰€è¦åšçš„å°±æ˜¯å°† HBase ä¸­æˆ‘ä»¬å…³å¿ƒçš„æŒ‡æ ‡é¡¹å‘é€åˆ°ç›‘æ§ç³»ç»Ÿå»ï¼Œé—®é¢˜å°±è½¬æ¢ä¸ºæˆ‘ä»¬å¼€å‘ï¼Œé‡‡é›†å¹¶è¿”å›å“ªäº› HBase é›†ç¾¤ç›‘æ§æŒ‡æ ‡é¡¹ã€‚ HBase é›†ç¾¤ç›‘æ§æŒ‡æ ‡é‡‡é›†çš„ç›‘æ§æ•°æ®ä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼šæŸå°æœºå™¨ OS å±‚é¢ä¸Šçš„æ•°æ®ï¼Œä¾‹å¦‚ CPUã€å†…å­˜ã€ç£ç›˜ã€ç½‘ç»œã€loadã€ç½‘ç»œæµé‡ç­‰ï¼›æŸå° regionserverï¼ˆæˆ–masterï¼‰æœºå™¨ jvm çš„çŠ¶æ€ï¼Œä¾‹å¦‚å…³äºçº¿ç¨‹çš„ä¿¡æ¯ï¼ŒGC çš„æ¬¡æ•°å’Œæ—¶é—´ï¼Œå†…å­˜ä½¿ç”¨çŠ¶å†µï¼Œä»¥åŠ ERRORã€WARNã€Fatal äº‹ä»¶å‡ºç°çš„æ¬¡æ•°ï¼›regionserverï¼ˆæˆ– masterï¼‰è¿›ç¨‹ä¸­çš„ç»Ÿè®¡ä¿¡æ¯ã€‚ å¯ä»¥é€šè¿‡ä»¥ä¸‹åœ°å€è·å– HBase æä¾›çš„ JMX ä¿¡æ¯çš„ web é¡µé¢ 1http://your_master:60010/jmx //æ‰€æœ‰çš„bean JMX web é¡µé¢çš„æ•°æ®æ ¼å¼æ˜¯jsonæ ¼å¼ï¼Œä¿¡æ¯å¾ˆå¤šï¼ OS ç›‘æ§æ•°æ®HBase ä¸­å¯¹äº OS çš„ç›‘æ§æ•°æ®ï¼Œä¸»è¦æ˜¯ OperatingSystem çš„å¯¹è±¡æ¥è¿›è¡Œçš„ï¼Œå¦‚ä¸‹å°±æ˜¯æˆ‘æå–å‡ºæ¥çš„ JSON ä¿¡æ¯ï¼Œ 1234567891011121314151617181920&#123; \"name\" : \"java.lang:type=OperatingSystem\", \"modelerType\" : \"com.sun.management.UnixOperatingSystem\", \"MaxFileDescriptorCount\" : 1000000, \"OpenFileDescriptorCount\" : 413, \"CommittedVirtualMemorySize\" : 1892225024, \"FreePhysicalMemorySize\" : 284946432, \"FreeSwapSpaceSize\" : 535703552, \"ProcessCpuLoad\" : 0.0016732901066722444, \"ProcessCpuTime\" : 59306210000000, \"SystemCpuLoad\" : 0.018197029910060655, \"TotalPhysicalMemorySize\" : 16660848640, \"TotalSwapSpaceSize\" : 536862720, \"AvailableProcessors\" : 8, \"Arch\" : \"amd64\", \"SystemLoadAverage\" : 0.0, \"Name\" : \"Linux\", \"Version\" : \"2.6.32-431.11.7.el6.ucloud.x86_64\", \"ObjectName\" : \"java.lang:type=OperatingSystem\" &#125; å…¶ä¸­æ¯”è¾ƒé‡è¦çš„æŒ‡æ ‡æœ‰ OpenFileDescriptorCount , FreePhysicalMemorySize , ProcessCpuLoad , SystemCpuLoad , AvailableProcessors , SystemLoadAverage JVM ç›‘æ§æ•°æ®Hbase ä¸­å¯¹äº JVM çš„ç›‘æ§æ•°æ®ï¼Œä¸»è¦æ˜¯ JvmMetrics çš„å¯¹è±¡æ¥è¿›è¡Œçš„ï¼Œå¦‚ä¸‹å°±æ˜¯æˆ‘æå–å‡ºæ¥çš„ JSON ä¿¡æ¯ï¼Œ 12345678910111213141516171819202122232425262728293031&#123; \"name\" : \"Hadoop:service=HBase,name=JvmMetrics\", \"modelerType\" : \"JvmMetrics\", \"tag.Context\" : \"jvm\", \"tag.ProcessName\" : \"Master\", \"tag.SessionId\" : \"\", \"tag.Hostname\" : \"uhadoop-qrljqo-master2\", \"MemNonHeapUsedM\" : 53.846107, \"MemNonHeapCommittedM\" : 85.84375, \"MemNonHeapMaxM\" : 130.0, \"MemHeapUsedM\" : 79.05823, \"MemHeapCommittedM\" : 240.125, \"MemHeapMaxM\" : 989.875, \"MemMaxM\" : 989.875, \"GcCountParNew\" : 15190, \"GcTimeMillisParNew\" : 72300, \"GcCountConcurrentMarkSweep\" : 2, \"GcTimeMillisConcurrentMarkSweep\" : 319, \"GcCount\" : 15192, \"GcTimeMillis\" : 72619, \"ThreadsNew\" : 0, \"ThreadsRunnable\" : 21, \"ThreadsBlocked\" : 0, \"ThreadsWaiting\" : 144, \"ThreadsTimedWaiting\" : 18, \"ThreadsTerminated\" : 0, \"LogFatal\" : 0, \"LogError\" : 0, \"LogWarn\" : 0, \"LogInfo\" : 0 &#125; JvmMetrics ä¸»è¦ç»Ÿè®¡çš„ä¿¡æ¯åŒ…æ‹¬ï¼šå†…å­˜çš„ä½¿ç”¨çŠ¶æ€ä¿¡æ¯ï¼›GCçš„ç»Ÿè®¡ä¿¡æ¯ï¼›çº¿ç¨‹çš„ç»Ÿè®¡ä¿¡æ¯ï¼›ä»¥åŠäº‹ä»¶çš„ç»Ÿè®¡ä¿¡æ¯ã€‚ å†…å­˜çš„ç»Ÿè®¡ä¿¡æ¯ä¸»è¦æ˜¯ï¼šJVM å½“å‰å·²ç»ä½¿ç”¨çš„ NonHeapMemory çš„å¤§å°ã€ä»¥åŠé…ç½®çš„ NonHeapMemory çš„å¤§å°ï¼›JVM å½“å‰å·²ç»ä½¿ç”¨çš„ HeapMemory çš„å¤§å°ã€ä»¥åŠé…ç½®çš„ HeapMemory çš„å¤§å°ï¼› JVM è¿è¡Œæ—¶çš„å¯ä»¥ä½¿ç”¨çš„æœ€å¤§çš„å†…å­˜çš„å¤§å°ã€‚ GC çš„ç»Ÿè®¡è¾ƒä¸ºç®€å•ï¼Œä»…ç»Ÿè®¡äº†è¿›ç¨‹åœ¨å›ºå®šé—´éš”å†… GC çš„æ¬¡æ•°å’ŒèŠ±è´¹çš„æ€»æ—¶é—´ã€‚ çº¿ç¨‹çš„ç»Ÿè®¡ï¼Œä¸»è¦æ˜¯ç»Ÿè®¡è¿›ç¨‹å†…å½“å‰çº¿ç¨‹çš„å¤„äº NEW ã€RUNNABLEã€BLOCKEDã€WAITINGã€TIMED_WAITINGã€TERMINATED è¿™å…­ç§çŠ¶æ€ä¸‹çš„çº¿ç¨‹æ•°é‡ã€‚ å¯¹äºäº‹ä»¶çš„ç»Ÿè®¡ï¼Œä¸»è¦ç»Ÿè®¡å›ºå®šæ—¶é—´é—´éš”å†…çš„ Fatalã€Errorã€Warn ä»¥åŠ Info çš„æ•°é‡ã€‚(è¿™å—å¥½åƒä¸æ€ä¹ˆé‡è¦) Region Servers å¥åº·ä½ ä¹Ÿå¯ä»¥é€šè¿‡å¦‚ä¸‹åœ°å€ï¼š 1http://your_master:60010/jmx?qry=Hadoop:service=HBase,name=Master,sub=Server è·å¾—åˆ° Region Servers å¥åº·å€¼ï¼š 123456789101112131415161718&#123; \"name\" : \"Hadoop:service=HBase,name=Master,sub=Server\", \"modelerType\" : \"Master,sub=Server\", \"tag.liveRegionServers\" : \"xxx\", \"tag.deadRegionServers\" : \"\", \"tag.zookeeperQuorum\" : \"xxx\", \"tag.serverName\" : \"xxx2,60000,1495683310213\", \"tag.clusterId\" : \"e5e044a3-ef9f-48f7-ba63-637376f5fa90\", \"tag.isActiveMaster\" : \"true\", \"tag.Context\" : \"master\", \"tag.Hostname\" : \"xxx\", \"masterActiveTime\" : 1495683312239, \"masterStartTime\" : 1495683310213, \"averageLoad\" : 143.66666666666666, \"numRegionServers\" : 3, \"numDeadRegionServers\" : 0, \"clusterRequests\" : 1297834323 &#125; MemoryPoolä»å…¨éƒ¨çš„ JSON å€¼ä¸­ä½ ä¼šçœ‹åˆ°å¾ˆå¤šç§ MemoryPool å€¼ï¼Œæ¯”å¦‚ Par Eden Space ã€CMS Perm Genã€Par Survivor Spaceã€CMS Old Genã€Code Cache ï¼ŒæŒ‰éœ€è·å–å§ã€‚ æ€»ç»“ä»»ä½•ä¸€ä¸ªæœåŠ¡çš„ç›‘æ§ç³»ç»Ÿéƒ½æ˜¯ä¸€ä¸ªä¸æ–­è¿­ä»£ï¼Œä¸æ–­ä¼˜åŒ–çš„è¿‡ç¨‹ï¼Œä¸å¯èƒ½ä¸€å¼€å§‹å°±åšåˆ°æœ€å¥½ã€‚ç›‘æ§æ€»æ˜¯æ¯”é—®é¢˜å‘ç”Ÿæ¥çš„æ›´æ—©ä¸€äº›ï¼Œè€Œæ¯ä¸€æ¬¡å‡ºé—®é¢˜ï¼Œåˆè¿›ä¸€æ­¥åŠ å¼ºç›¸åº”æ–¹é¢çš„ç›‘æ§ï¼Œæˆ‘ä»¬éœ€è¦è®©ç›‘æ§ç³»ç»Ÿä»å‡ºé—®é¢˜æ—¶æ‰æŠ¥è­¦åˆ°å¯èƒ½å‡ºç°é—®é¢˜æ—¶å°±é¢„è­¦é€æ¸è¿‡æ¸¡ï¼Œæœ€ç»ˆè®©ç›‘æ§ç³»ç»Ÿæˆä¸ºæˆ‘ä»¬ä¿è¯ç³»ç»Ÿç¨³å®šæ€§çš„ä¸€ä¸ªæœ‰åŠ›å·¥å…·ã€‚ æœ€åç›‘æ§æŒ‡æ ‡æœ‰å¾ˆå¤šï¼Œä½†è¯·æŒ‰éœ€è·å– ! è½¬è½½æ–‡ç« è¯·æ³¨æ˜åŸå‡ºå¤„ï¼Œè°¢è°¢æ”¯æŒï¼ http://www.54tianzhisheng.cn/2017/10/21/HBase-metrics/ å‚è€ƒèµ„æ–™1ã€hbaseæ€§èƒ½ç›‘æ§ï¼ˆä¸€ï¼‰ 2ã€hbaseæ€§èƒ½ç›‘æ§ï¼ˆäºŒï¼‰ 3ã€hbaseæ€§èƒ½ç›‘æ§ï¼ˆä¸‰ï¼‰ 4ã€HBase é›†ç¾¤ç›‘æ§ç³»ç»Ÿæ„å»º 5ã€hbase jmxå¸¸ç”¨ç›‘æ§æŒ‡æ ‡ æ¨èç›¸å…³æ–‡ç« 1ã€ElasticSearch å•ä¸ªèŠ‚ç‚¹ç›‘æ§ 2ã€ElasticSearch é›†ç¾¤ç›‘æ§","tags":[{"name":"HBase","slug":"HBase","permalink":"http://yoursite.com/tags/HBase/"}]},{"title":"Elasticsearch ç³»åˆ—æ–‡ç« ï¼ˆå››ï¼‰ï¼šElasticSearch å•ä¸ªèŠ‚ç‚¹ç›‘æ§","date":"2017-10-17T16:00:00.000Z","path":"2017/10/18/ElasticSearch-nodes-metrics/","text":"é›†ç¾¤å¥åº·ç›‘æ§æ˜¯å¯¹é›†ç¾¤ä¿¡æ¯è¿›è¡Œé«˜åº¦çš„æ¦‚æ‹¬ï¼ŒèŠ‚ç‚¹ç»Ÿè®¡å€¼ API æä¾›äº†é›†ç¾¤ä¸­æ¯ä¸ªèŠ‚ç‚¹çš„ç»Ÿè®¡å€¼ã€‚èŠ‚ç‚¹ç»Ÿè®¡å€¼å¾ˆå¤šï¼Œåœ¨ç›‘æ§çš„æ—¶å€™ä»éœ€è¦æˆ‘ä»¬æ¸…æ¥šå“ªäº›æŒ‡æ ‡æ˜¯æœ€å€¼å¾—å…³æ³¨çš„ã€‚ é›†ç¾¤å¥åº·ç›‘æ§å¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç« ï¼šElasticSearch é›†ç¾¤ç›‘æ§ èŠ‚ç‚¹ä¿¡æ¯ Node Info :1curl -XGET &apos;http://localhost:9200/_nodes&apos; æ‰§è¡Œä¸Šè¿°å‘½ä»¤å¯ä»¥è·å–æ‰€æœ‰ node çš„ä¿¡æ¯ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071_nodes: &#123; total: 2, successful: 2, failed: 0&#125;,cluster_name: \"elasticsearch\",nodes: &#123; MSQ_CZ7mTNyOSlYIfrvHag: &#123; name: \"node0\", transport_address: \"192.168.180.110:9300\", host: \"192.168.180.110\", ip: \"192.168.180.110\", version: \"5.5.0\", build_hash: \"260387d\", total_indexing_buffer: 103887667, roles:&#123;...&#125;, settings: &#123;...&#125;, os: &#123; refresh_interval_in_millis: 1000, name: \"Linux\", arch: \"amd64\", version: \"3.10.0-229.el7.x86_64\", available_processors: 4, allocated_processors: 4 &#125;, process: &#123; refresh_interval_in_millis: 1000, id: 3022, mlockall: false &#125;, jvm: &#123; pid: 3022, version: \"1.8.0_121\", vm_name: \"Java HotSpot(TM) 64-Bit Server VM\", vm_version: \"25.121-b13\", vm_vendor: \"Oracle Corporation\", start_time_in_millis: 1507515225302, mem: &#123; heap_init_in_bytes: 1073741824, heap_max_in_bytes: 1038876672, non_heap_init_in_bytes: 2555904, non_heap_max_in_bytes: 0, direct_max_in_bytes: 1038876672 &#125;, gc_collectors: [], memory_pools: [], using_compressed_ordinary_object_pointers: \"true\", input_arguments:&#123;&#125; &#125; thread_pool:&#123; force_merge: &#123;&#125;, fetch_shard_started: &#123;&#125;, listener: &#123;&#125;, index: &#123;&#125;, refresh: &#123;&#125;, generic: &#123;&#125;, warmer: &#123;&#125;, search: &#123;&#125;, flush: &#123;&#125;, fetch_shard_store: &#123;&#125;, management: &#123;&#125;, get: &#123;&#125;, bulk: &#123;&#125;, snapshot: &#123;&#125; &#125; transport: &#123;...&#125;, http: &#123;...&#125;, plugins: [], modules: [], ingest: &#123;...&#125; &#125; ä¸Šé¢æ˜¯æˆ‘å·²ç»ç®€å†™äº†å¾ˆå¤šæ•°æ®ä¹‹åçš„è¿”å›å€¼ï¼Œä½†æ˜¯æŒ‡æ ‡è¿˜æ˜¯å¾ˆå¤šï¼Œæœ‰äº›æ˜¯ä¸€äº›å¸¸è§„çš„æŒ‡æ ‡ï¼Œå¯¹äºç›‘æ§æ¥è¯´ï¼Œæ²¡å¿…è¦æ‹¿å–ã€‚ä»ä¸Šé¢æˆ‘ä»¬å¯ä»¥ä¸»è¦å…³æ³¨ä»¥ä¸‹è¿™äº›æŒ‡æ ‡: 1os, process, jvm, thread_pool, transport, http, ingest and indices èŠ‚ç‚¹ç»Ÿè®¡ nodes-statisticsèŠ‚ç‚¹ç»Ÿè®¡å€¼ API å¯é€šè¿‡å¦‚ä¸‹å‘½ä»¤è·å–ï¼š 1GET /_nodes/stats å¾—åˆ°ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158_nodes: &#123; total: 2, successful: 2, failed: 0&#125;,cluster_name: \"elasticsearch\",nodes: &#123; MSQ_CZ7mTNyOSlYI0yvHag: &#123; timestamp: 1508312932354, name: \"node0\", transport_address: \"192.168.180.110:9300\", host: \"192.168.180.110\", ip: \"192.168.180.110:9300\", roles: [], indices: &#123; docs: &#123; count: 6163666, deleted: 0 &#125;, store: &#123; size_in_bytes: 2301398179, throttle_time_in_millis: 122850 &#125;, indexing: &#123;&#125;, get: &#123;&#125;, search: &#123;&#125;, merges: &#123;&#125;, refresh: &#123;&#125;, flush: &#123;&#125;, warmer: &#123;&#125;, query_cache: &#123;&#125;, fielddata: &#123;&#125;, completion: &#123;&#125;, segments: &#123;&#125;, translog: &#123;&#125;, request_cache: &#123;&#125;, recovery: &#123;&#125; &#125;, os: &#123; timestamp: 1508312932369, cpu: &#123; percent: 0, load_average: &#123; 1m: 0.09, 5m: 0.12, 15m: 0.08 &#125; &#125;, mem: &#123; total_in_bytes: 8358301696, free_in_bytes: 1381613568, used_in_bytes: 6976688128, free_percent: 17, used_percent: 83 &#125;, swap: &#123; total_in_bytes: 8455712768, free_in_bytes: 8455299072, used_in_bytes: 413696 &#125;, cgroup: &#123; cpuacct: &#123;&#125;, cpu: &#123; control_group: \"/user.slice\", cfs_period_micros: 100000, cfs_quota_micros: -1, stat: &#123;&#125; &#125; &#125;&#125;,process: &#123; timestamp: 1508312932369, open_file_descriptors: 228, max_file_descriptors: 65536, cpu: &#123; percent: 0, total_in_millis: 2495040 &#125;, mem: &#123; total_virtual_in_bytes: 5002465280 &#125;&#125;,jvm: &#123; timestamp: 1508312932369, uptime_in_millis: 797735804, mem: &#123; heap_used_in_bytes: 318233768, heap_used_percent: 30, heap_committed_in_bytes: 1038876672, heap_max_in_bytes: 1038876672, non_heap_used_in_bytes: 102379784, non_heap_committed_in_bytes: 108773376, pools: &#123; young: &#123; used_in_bytes: 62375176, max_in_bytes: 279183360, peak_used_in_bytes: 279183360, peak_max_in_bytes: 279183360 &#125;, survivor: &#123; used_in_bytes: 175384, max_in_bytes: 34865152, peak_used_in_bytes: 34865152, peak_max_in_bytes: 34865152 &#125;, old: &#123; used_in_bytes: 255683208, max_in_bytes: 724828160, peak_used_in_bytes: 255683208, peak_max_in_bytes: 724828160 &#125; &#125; &#125;, threads: &#123;&#125;, gc: &#123;&#125;, buffer_pools: &#123;&#125;, classes: &#123;&#125;&#125;, thread_pool: &#123; bulk: &#123;&#125;, fetch_shard_started: &#123;&#125;, fetch_shard_store: &#123;&#125;, flush: &#123;&#125;, force_merge: &#123;&#125;, generic: &#123;&#125;, get: &#123;&#125;, index: &#123; threads: 1, queue: 0, active: 0, rejected: 0, largest: 1, completed: 1 &#125; listener: &#123;&#125;, management: &#123;&#125;, refresh: &#123;&#125;, search: &#123;&#125;, snapshot: &#123;&#125;, warmer: &#123;&#125; &#125;, fs: &#123;&#125;, transport: &#123; server_open: 13, rx_count: 11696, rx_size_in_bytes: 1525774, tx_count: 10282, tx_size_in_bytes: 1440101928 &#125;, http: &#123; current_open: 4, total_opened: 23 &#125;, breakers: &#123;&#125;, script: &#123;&#125;, discovery: &#123;&#125;, ingest: &#123;&#125;&#125; èŠ‚ç‚¹åæ˜¯ä¸€ä¸ª UUIDï¼Œä¸Šé¢åˆ—ä¸¾äº†å¾ˆå¤šæŒ‡æ ‡ï¼Œä¸‹é¢è®²è§£ä¸‹ï¼š ç´¢å¼•éƒ¨åˆ† indicesè¿™éƒ¨åˆ†åˆ—å‡ºäº†è¿™ä¸ªèŠ‚ç‚¹ä¸Šæ‰€æœ‰ç´¢å¼•çš„èšåˆè¿‡çš„ç»Ÿè®¡å€¼ ï¼š docs å±•ç¤ºèŠ‚ç‚¹å†…å­˜æœ‰å¤šå°‘æ–‡æ¡£ï¼ŒåŒ…æ‹¬è¿˜æ²¡æœ‰ä»æ®µé‡Œæ¸…é™¤çš„å·²åˆ é™¤æ–‡æ¡£æ•°é‡ã€‚ store éƒ¨åˆ†æ˜¾ç¤ºèŠ‚ç‚¹è€—ç”¨äº†å¤šå°‘ç‰©ç†å­˜å‚¨ã€‚è¿™ä¸ªæŒ‡æ ‡åŒ…æ‹¬ä¸»åˆ†ç‰‡å’Œå‰¯æœ¬åˆ†ç‰‡åœ¨å†…ã€‚å¦‚æœé™æµæ—¶é—´å¾ˆå¤§ï¼Œé‚£å¯èƒ½è¡¨æ˜ä½ çš„ç£ç›˜é™æµè®¾ç½®å¾—è¿‡ä½ã€‚ indexing æ˜¾ç¤ºå·²ç»ç´¢å¼•äº†å¤šå°‘æ–‡æ¡£ã€‚è¿™ä¸ªå€¼æ˜¯ä¸€ä¸ªç´¯åŠ è®¡æ•°å™¨ã€‚åœ¨æ–‡æ¡£è¢«åˆ é™¤çš„æ—¶å€™ï¼Œæ•°å€¼ä¸ä¼šä¸‹é™ã€‚è¿˜è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨å‘ç”Ÿå†…éƒ¨ ç´¢å¼•æ“ä½œçš„æ—¶å€™ï¼Œè¿™ä¸ªå€¼ä¹Ÿä¼šå¢åŠ ï¼Œæ¯”å¦‚è¯´æ–‡æ¡£æ›´æ–°ã€‚ è¿˜åˆ—å‡ºäº†ç´¢å¼•æ“ä½œè€—è´¹çš„æ—¶é—´ï¼Œæ­£åœ¨ç´¢å¼•çš„æ–‡æ¡£æ•°é‡ï¼Œä»¥åŠåˆ é™¤æ“ä½œçš„ç±»ä¼¼ç»Ÿè®¡å€¼ã€‚ get æ˜¾ç¤ºé€šè¿‡ ID è·å–æ–‡æ¡£çš„æ¥å£ç›¸å…³çš„ç»Ÿè®¡å€¼ã€‚åŒ…æ‹¬å¯¹å•ä¸ªæ–‡æ¡£çš„ GET å’Œ HEAD è¯·æ±‚ã€‚ search æè¿°åœ¨æ´»è·ƒä¸­çš„æœç´¢ï¼ˆ open_contexts ï¼‰æ•°é‡ã€æŸ¥è¯¢çš„æ€»æ•°é‡ã€ä»¥åŠè‡ªèŠ‚ç‚¹å¯åŠ¨ä»¥æ¥åœ¨æŸ¥è¯¢ä¸Šæ¶ˆè€—çš„æ€»æ—¶é—´ã€‚ç”¨ query_time_in_millis / query_total è®¡ç®—çš„æ¯”å€¼ï¼Œå¯ä»¥ç”¨æ¥ç²—ç•¥çš„è¯„ä»·ä½ çš„æŸ¥è¯¢æœ‰å¤šé«˜æ•ˆã€‚æ¯”å€¼è¶Šå¤§ï¼Œæ¯ä¸ªæŸ¥è¯¢èŠ±è´¹çš„æ—¶é—´è¶Šå¤šï¼Œä½ åº”è¯¥è¦è€ƒè™‘è°ƒä¼˜äº†ã€‚ fetch ç»Ÿè®¡å€¼å±•ç¤ºäº†æŸ¥è¯¢å¤„ç†çš„åä¸€åŠæµç¨‹ï¼ˆquery-then-fetch é‡Œçš„ fetch ï¼‰ã€‚å¦‚æœ fetch è€—æ—¶æ¯” query è¿˜å¤šï¼Œè¯´æ˜ç£ç›˜è¾ƒæ…¢ï¼Œæˆ–è€…è·å–äº†å¤ªå¤šæ–‡æ¡£ï¼Œæˆ–è€…å¯èƒ½æœç´¢è¯·æ±‚è®¾ç½®äº†å¤ªå¤§çš„åˆ†é¡µï¼ˆæ¯”å¦‚ï¼Œ size: 10000 ï¼‰ã€‚ merges åŒ…æ‹¬äº† Lucene æ®µåˆå¹¶ç›¸å…³çš„ä¿¡æ¯ã€‚å®ƒä¼šå‘Šè¯‰ä½ ç›®å‰åœ¨è¿è¡Œå‡ ä¸ªåˆå¹¶ï¼Œåˆå¹¶æ¶‰åŠçš„æ–‡æ¡£æ•°é‡ï¼Œæ­£åœ¨åˆå¹¶çš„æ®µçš„æ€»å¤§å°ï¼Œä»¥åŠåœ¨åˆå¹¶æ“ä½œä¸Šæ¶ˆè€—çš„æ€»æ—¶é—´ã€‚ filter_cache å±•ç¤ºäº†å·²ç¼“å­˜çš„è¿‡æ»¤å™¨ä½é›†åˆæ‰€ç”¨çš„å†…å­˜æ•°é‡ï¼Œä»¥åŠè¿‡æ»¤å™¨è¢«é©±é€å‡ºå†…å­˜çš„æ¬¡æ•°ã€‚è¿‡å¤šçš„é©±é€æ•° å¯èƒ½ è¯´æ˜ä½ éœ€è¦åŠ å¤§è¿‡æ»¤å™¨ç¼“å­˜çš„å¤§å°ï¼Œæˆ–è€…ä½ çš„è¿‡æ»¤å™¨ä¸å¤ªé€‚åˆç¼“å­˜ï¼ˆæ¯”å¦‚å®ƒä»¬å› ä¸ºé«˜åŸºæ•°è€Œåœ¨å¤§é‡äº§ç”Ÿï¼Œå°±åƒæ˜¯ç¼“å­˜ä¸€ä¸ª now æ—¶é—´è¡¨è¾¾å¼ï¼‰ã€‚ ä¸è¿‡ï¼Œé©±é€æ•°æ˜¯ä¸€ä¸ªå¾ˆéš¾è¯„å®šçš„æŒ‡æ ‡ã€‚è¿‡æ»¤å™¨æ˜¯åœ¨æ¯ä¸ªæ®µçš„åŸºç¡€ä¸Šç¼“å­˜çš„ï¼Œè€Œä»ä¸€ä¸ªå°çš„æ®µé‡Œé©±é€è¿‡æ»¤å™¨ï¼Œä»£ä»·æ¯”ä»ä¸€ä¸ªå¤§çš„æ®µé‡Œè¦å»‰ä»·çš„å¤šã€‚æœ‰å¯èƒ½ä½ æœ‰å¾ˆå¤§çš„é©±é€æ•°ï¼Œä½†æ˜¯å®ƒä»¬éƒ½å‘ç”Ÿåœ¨å°æ®µä¸Šï¼Œä¹Ÿå°±æ„å‘³ç€è¿™äº›å¯¹æŸ¥è¯¢æ€§èƒ½åªæœ‰å¾ˆå°çš„å½±å“ã€‚ æŠŠé©±é€æ•°æŒ‡æ ‡ä½œä¸ºä¸€ä¸ªç²—ç•¥çš„å‚è€ƒã€‚å¦‚æœä½ çœ‹åˆ°æ•°å­—å¾ˆå¤§ï¼Œæ£€æŸ¥ä¸€ä¸‹ä½ çš„è¿‡æ»¤å™¨ï¼Œç¡®ä¿ä»–ä»¬éƒ½æ˜¯æ­£å¸¸ç¼“å­˜çš„ã€‚ä¸æ–­é©±é€ç€çš„è¿‡æ»¤å™¨ï¼Œå“ªæ€•éƒ½å‘ç”Ÿåœ¨å¾ˆå°çš„æ®µä¸Šï¼Œæ•ˆæœä¹Ÿæ¯”æ­£ç¡®ç¼“å­˜ä½äº†çš„è¿‡æ»¤å™¨å·®å¾ˆå¤šã€‚ field_data æ˜¾ç¤º fielddata ä½¿ç”¨çš„å†…å­˜ï¼Œ ç”¨ä»¥èšåˆã€æ’åºç­‰ç­‰ã€‚è¿™é‡Œä¹Ÿæœ‰ä¸€ä¸ªé©±é€è®¡æ•°ã€‚å’Œ filter_cache ä¸åŒçš„æ˜¯ï¼Œè¿™é‡Œçš„é©±é€è®¡æ•°æ˜¯å¾ˆæœ‰ç”¨çš„ï¼šè¿™ä¸ªæ•°åº”è¯¥æˆ–è€…è‡³å°‘æ˜¯æ¥è¿‘äº 0ã€‚å› ä¸º fielddata ä¸æ˜¯ç¼“å­˜ï¼Œä»»ä½•é©±é€éƒ½æ¶ˆè€—å·¨å¤§ï¼Œåº”è¯¥é¿å…æ‰ã€‚å¦‚æœä½ åœ¨è¿™é‡Œçœ‹åˆ°é©±é€æ•°ï¼Œä½ éœ€è¦é‡æ–°è¯„ä¼°ä½ çš„å†…å­˜æƒ…å†µï¼Œfielddata é™åˆ¶ï¼Œè¯·æ±‚è¯­å¥ï¼Œæˆ–è€…è¿™ä¸‰è€…ã€‚ segments ä¼šå±•ç¤ºè¿™ä¸ªèŠ‚ç‚¹ç›®å‰æ­£åœ¨æœåŠ¡ä¸­çš„ Lucene æ®µçš„æ•°é‡ã€‚ è¿™æ˜¯ä¸€ä¸ªé‡è¦çš„æ•°å­—ã€‚å¤§å¤šæ•°ç´¢å¼•ä¼šæœ‰å¤§æ¦‚ 50â€“150 ä¸ªæ®µï¼Œå“ªæ€•å®ƒä»¬å­˜æœ‰ TB çº§åˆ«çš„æ•°åäº¿æ¡æ–‡æ¡£ã€‚æ®µæ•°é‡è¿‡å¤§è¡¨æ˜åˆå¹¶å‡ºç°äº†é—®é¢˜ï¼ˆæ¯”å¦‚ï¼Œåˆå¹¶é€Ÿåº¦è·Ÿä¸ä¸Šæ®µçš„åˆ›å»ºï¼‰ã€‚æ³¨æ„è¿™ä¸ªç»Ÿè®¡å€¼æ˜¯èŠ‚ç‚¹ä¸Šæ‰€æœ‰ç´¢å¼•çš„æ±‡èšæ€»æ•°ã€‚è®°ä½è¿™ç‚¹ã€‚ memory ç»Ÿè®¡å€¼å±•ç¤ºäº† Lucene æ®µè‡ªå·±ç”¨æ‰çš„å†…å­˜å¤§å°ã€‚ è¿™é‡ŒåŒ…æ‹¬åº•å±‚æ•°æ®ç»“æ„ï¼Œæ¯”å¦‚å€’æ’è¡¨ï¼Œå­—å…¸ï¼Œå’Œå¸ƒéš†è¿‡æ»¤å™¨ç­‰ã€‚å¤ªå¤§çš„æ®µæ•°é‡ä¼šå¢åŠ è¿™äº›æ•°æ®ç»“æ„å¸¦æ¥çš„å¼€é”€ï¼Œè¿™ä¸ªå†…å­˜ä½¿ç”¨é‡å°±æ˜¯ä¸€ä¸ªæ–¹ä¾¿ç”¨æ¥è¡¡é‡å¼€é”€çš„åº¦é‡å€¼ã€‚ æ“ä½œç³»ç»Ÿå’Œè¿›ç¨‹éƒ¨åˆ†OS å’Œ Process éƒ¨åˆ†åŸºæœ¬æ˜¯è‡ªæè¿°çš„ï¼Œä¸ä¼šåœ¨ç»†èŠ‚ä¸­å±•å¼€è®²è§£ã€‚å®ƒä»¬åˆ—å‡ºæ¥åŸºç¡€çš„èµ„æºç»Ÿè®¡å€¼ï¼Œæ¯”å¦‚ CPU å’Œè´Ÿè½½ã€‚OS éƒ¨åˆ†æè¿°äº†æ•´ä¸ªæ“ä½œç³»ç»Ÿï¼Œè€Œ Process éƒ¨åˆ†åªæ˜¾ç¤º Elasticsearch çš„ JVM è¿›ç¨‹ä½¿ç”¨çš„èµ„æºæƒ…å†µã€‚ è¿™äº›éƒ½æ˜¯éå¸¸æœ‰ç”¨çš„æŒ‡æ ‡ï¼Œä¸è¿‡é€šå¸¸åœ¨ä½ çš„ç›‘æ§æŠ€æœ¯æ ˆé‡Œå·²ç»éƒ½æµ‹é‡å¥½äº†ã€‚ç»Ÿè®¡å€¼åŒ…æ‹¬ä¸‹é¢è¿™äº›ï¼š CPU è´Ÿè½½ å†…å­˜ä½¿ç”¨ç‡ ï¼ˆmem.used_percentï¼‰ Swap ä½¿ç”¨ç‡ æ‰“å¼€çš„æ–‡ä»¶æè¿°ç¬¦ ï¼ˆopen_file_descriptorsï¼‰ JVM éƒ¨åˆ†jvm éƒ¨åˆ†åŒ…æ‹¬äº†è¿è¡Œ Elasticsearch çš„ JVM è¿›ç¨‹ä¸€äº›å¾ˆå…³é”®çš„ä¿¡æ¯ã€‚ æœ€é‡è¦çš„ï¼Œå®ƒåŒ…æ‹¬äº†åƒåœ¾å›æ”¶çš„ç»†èŠ‚ï¼Œè¿™å¯¹ä½ çš„ Elasticsearch é›†ç¾¤çš„ç¨³å®šæ€§æœ‰ç€é‡å¤§å½±å“ã€‚ 123456789101112jvm: &#123; timestamp: 1508312932369, uptime_in_millis: 797735804, mem: &#123; heap_used_in_bytes: 318233768, heap_used_percent: 30, heap_committed_in_bytes: 1038876672, heap_max_in_bytes: 1038876672, non_heap_used_in_bytes: 102379784, non_heap_committed_in_bytes: 108773376, &#125;&#125; jvm éƒ¨åˆ†é¦–å…ˆåˆ—å‡ºä¸€äº›å’Œ heap å†…å­˜ä½¿ç”¨æœ‰å…³çš„å¸¸è§ç»Ÿè®¡å€¼ã€‚ä½ å¯ä»¥çœ‹åˆ°æœ‰å¤šå°‘ heap è¢«ä½¿ç”¨äº†ï¼Œå¤šå°‘è¢«æŒ‡æ´¾äº†ï¼ˆå½“å‰è¢«åˆ†é…ç»™è¿›ç¨‹çš„ï¼‰ï¼Œä»¥åŠ heap è¢«å…è®¸åˆ†é…çš„æœ€å¤§å€¼ã€‚ç†æƒ³æƒ…å†µä¸‹ï¼Œheap_committed_in_bytes åº”è¯¥ç­‰äº heap_max_in_bytes ã€‚å¦‚æœæŒ‡æ´¾çš„å¤§å°æ›´å°ï¼ŒJVM æœ€ç»ˆä¼šè¢«è¿«è°ƒæ•´ heap å¤§å°â€”â€”è¿™æ˜¯ä¸€ä¸ªéå¸¸æ˜‚è´µçš„æ“ä½œã€‚å¦‚æœä½ çš„æ•°å­—ä¸ç›¸ç­‰ï¼Œé˜…è¯» å †å†…å­˜:å¤§å°å’Œäº¤æ¢ å­¦ä¹ å¦‚ä½•æ­£ç¡®çš„é…ç½®å®ƒã€‚ heap_used_percent æŒ‡æ ‡æ˜¯å€¼å¾—å…³æ³¨çš„ä¸€ä¸ªæ•°å­—ã€‚Elasticsearch è¢«é…ç½®ä¸ºå½“ heap è¾¾åˆ° 75% çš„æ—¶å€™å¼€å§‹ GCã€‚å¦‚æœä½ çš„èŠ‚ç‚¹ä¸€ç›´ &gt;= 75%ï¼Œä½ çš„èŠ‚ç‚¹æ­£å¤„äº å†…å­˜å‹åŠ› çŠ¶æ€ã€‚è¿™æ˜¯ä¸ªå±é™©ä¿¡å·ï¼Œä¸è¿œçš„æœªæ¥å¯èƒ½å°±æœ‰æ…¢ GC è¦å‡ºç°äº†ã€‚ å¦‚æœ heap ä½¿ç”¨ç‡ä¸€ç›´ &gt;=85%ï¼Œä½ å°±éº»çƒ¦äº†ã€‚Heap åœ¨ 90â€“95% ä¹‹é—´ï¼Œåˆ™é¢ä¸´å¯æ€•çš„æ€§èƒ½é£é™©ï¼Œæ­¤æ—¶æœ€å¥½çš„æƒ…å†µæ˜¯é•¿è¾¾ 10â€“30s çš„ GCï¼Œæœ€å·®çš„æƒ…å†µå°±æ˜¯å†…å­˜æº¢å‡ºï¼ˆOOMï¼‰å¼‚å¸¸ã€‚ çº¿ç¨‹æ± éƒ¨åˆ†Elasticsearch åœ¨å†…éƒ¨ç»´æŠ¤äº†çº¿ç¨‹æ± ã€‚ è¿™äº›çº¿ç¨‹æ± ç›¸äº’åä½œå®Œæˆä»»åŠ¡ï¼Œæœ‰å¿…è¦çš„è¯ç›¸äº’é—´è¿˜ä¼šä¼ é€’ä»»åŠ¡ã€‚é€šå¸¸æ¥è¯´ï¼Œä½ ä¸éœ€è¦é…ç½®æˆ–è€…è°ƒä¼˜çº¿ç¨‹æ± ï¼Œä¸è¿‡æŸ¥çœ‹å®ƒä»¬çš„ç»Ÿè®¡å€¼æœ‰æ—¶å€™è¿˜æ˜¯æœ‰ç”¨çš„ï¼Œå¯ä»¥æ´å¯Ÿä½ çš„é›†ç¾¤è¡¨ç°å¦‚ä½•ã€‚ æ¯ä¸ªçº¿ç¨‹æ± ä¼šåˆ—å‡ºå·²é…ç½®çš„çº¿ç¨‹æ•°é‡ï¼ˆ threads ï¼‰ï¼Œå½“å‰åœ¨å¤„ç†ä»»åŠ¡çš„çº¿ç¨‹æ•°é‡ï¼ˆ active ï¼‰ï¼Œä»¥åŠåœ¨é˜Ÿåˆ—ä¸­ç­‰å¾…å¤„ç†çš„ä»»åŠ¡å•å…ƒæ•°é‡ï¼ˆ queue ï¼‰ã€‚ å¦‚æœé˜Ÿåˆ—ä¸­ä»»åŠ¡å•å…ƒæ•°è¾¾åˆ°äº†æé™ï¼Œæ–°çš„ä»»åŠ¡å•å…ƒä¼šå¼€å§‹è¢«æ‹’ç»ï¼Œä½ ä¼šåœ¨ rejected ç»Ÿè®¡å€¼ä¸Šçœ‹åˆ°å®ƒåæ˜ å‡ºæ¥ã€‚è¿™é€šå¸¸æ˜¯ä½ çš„é›†ç¾¤åœ¨æŸäº›èµ„æºä¸Šç¢°åˆ°ç“¶é¢ˆçš„ä¿¡å·ã€‚å› ä¸ºé˜Ÿåˆ—æ»¡æ„å‘³ç€ä½ çš„èŠ‚ç‚¹æˆ–é›†ç¾¤åœ¨ç”¨æœ€é«˜é€Ÿåº¦è¿è¡Œï¼Œä½†ä¾ç„¶è·Ÿä¸ä¸Šå·¥ä½œçš„èœ‚æ‹¥è€Œå…¥ã€‚ è¿™é‡Œçš„ä¸€ç³»åˆ—çš„çº¿ç¨‹æ± ï¼Œå¤§å¤šæ•°ä½ å¯ä»¥å¿½ç•¥ï¼Œä½†æ˜¯æœ‰ä¸€å°éƒ¨åˆ†è¿˜æ˜¯å€¼å¾—å…³æ³¨çš„ï¼š indexing æ™®é€šçš„ç´¢å¼•è¯·æ±‚çš„çº¿ç¨‹æ±  bulk æ‰¹é‡è¯·æ±‚ï¼Œå’Œå•æ¡çš„ç´¢å¼•è¯·æ±‚ä¸åŒçš„çº¿ç¨‹æ±  get Get-by-ID æ“ä½œ search æ‰€æœ‰çš„æœç´¢å’ŒæŸ¥è¯¢è¯·æ±‚ merging ä¸“ç”¨äºç®¡ç† Lucene åˆå¹¶çš„çº¿ç¨‹æ±  ç½‘ç»œéƒ¨åˆ† transport æ˜¾ç¤ºå’Œ ä¼ è¾“åœ°å€ ç›¸å…³çš„ä¸€äº›åŸºç¡€ç»Ÿè®¡å€¼ã€‚åŒ…æ‹¬èŠ‚ç‚¹é—´çš„é€šä¿¡ï¼ˆé€šå¸¸æ˜¯ 9300 ç«¯å£ï¼‰ä»¥åŠä»»æ„ä¼ è¾“å®¢æˆ·ç«¯æˆ–è€…èŠ‚ç‚¹å®¢æˆ·ç«¯çš„è¿æ¥ã€‚å¦‚æœçœ‹åˆ°è¿™é‡Œæœ‰å¾ˆå¤šè¿æ¥æ•°ä¸è¦æ‹…å¿ƒï¼›Elasticsearch åœ¨èŠ‚ç‚¹ä¹‹é—´ç»´æŠ¤äº†å¤§é‡çš„è¿æ¥ã€‚ http æ˜¾ç¤º HTTP ç«¯å£ï¼ˆé€šå¸¸æ˜¯ 9200ï¼‰çš„ç»Ÿè®¡å€¼ã€‚å¦‚æœä½ çœ‹åˆ° total_opened æ•°å¾ˆå¤§è€Œä¸”è¿˜åœ¨ä¸€ç›´ä¸Šæ¶¨ï¼Œè¿™æ˜¯ä¸€ä¸ªæ˜ç¡®ä¿¡å·ï¼Œè¯´æ˜ä½ çš„ HTTP å®¢æˆ·ç«¯é‡Œæœ‰æ²¡å¯ç”¨ keep-alive é•¿è¿æ¥çš„ã€‚æŒç»­çš„ keep-alive é•¿è¿æ¥å¯¹æ€§èƒ½å¾ˆé‡è¦ï¼Œå› ä¸ºè¿æ¥ã€æ–­å¼€å¥—æ¥å­—æ˜¯å¾ˆæ˜‚è´µçš„ï¼ˆè€Œä¸”æµªè´¹æ–‡ä»¶æè¿°ç¬¦ï¼‰ã€‚è¯·ç¡®è®¤ä½ çš„å®¢æˆ·ç«¯éƒ½é…ç½®æ­£ç¡®ã€‚ å‚è€ƒèµ„æ–™1ã€nodes-info 2ã€nodes-stats 3ã€ESç›‘æ§æŒ‡æ ‡ æœ€åï¼šè½¬è½½è¯·æ³¨æ˜åœ°å€ï¼šhttp://www.54tianzhisheng.cn/2017/10/18/ElasticSearch-nodes-metrics/","tags":[{"name":"ElasticSearch","slug":"ElasticSearch","permalink":"http://yoursite.com/tags/ElasticSearch/"}]},{"title":"Elasticsearch ç³»åˆ—æ–‡ç« ï¼ˆä¸‰ï¼‰ï¼šElasticSearch é›†ç¾¤ç›‘æ§","date":"2017-10-14T16:00:00.000Z","path":"2017/10/15/ElasticSearch-cluster-health-metrics/","text":"æœ€è¿‘åœ¨åš ElasticSearch çš„ä¿¡æ¯ï¼ˆé›†ç¾¤å’ŒèŠ‚ç‚¹ï¼‰ç›‘æ§ï¼Œç‰¹æ­¤ç¨å¾®æ•´ç†ä¸‹å­¦åˆ°çš„ä¸œè¥¿ã€‚è¿™ç¯‡æ–‡ç« ä¸»è¦ä»‹ç»é›†ç¾¤çš„ç›‘æ§ã€‚ è¦ç›‘æ§å“ªäº› ElasticSearch metrics Elasticsearch æä¾›äº†å¤§é‡çš„ Metricï¼Œå¯ä»¥å¸®åŠ©æ‚¨æ£€æµ‹åˆ°é—®é¢˜çš„è¿¹è±¡ï¼Œåœ¨é‡åˆ°èŠ‚ç‚¹ä¸å¯ç”¨ã€out-of-memoryã€long garbage collection times çš„æ—¶å€™é‡‡å–ç›¸åº”æªæ–½ã€‚ä½†æ˜¯æŒ‡æ ‡å¤ªå¤šäº†ï¼Œæœ‰æ—¶æˆ‘ä»¬å¹¶ä¸éœ€è¦è¿™ä¹ˆå¤šï¼Œè¿™å°±éœ€è¦æˆ‘ä»¬è¿›è¡Œç­›é€‰ã€‚ é›†ç¾¤å¥åº·ä¸€ä¸ª Elasticsearch é›†ç¾¤è‡³å°‘åŒ…æ‹¬ä¸€ä¸ªèŠ‚ç‚¹å’Œä¸€ä¸ªç´¢å¼•ã€‚æˆ–è€…å®ƒ å¯èƒ½æœ‰ä¸€ç™¾ä¸ªæ•°æ®èŠ‚ç‚¹ã€ä¸‰ä¸ªå•ç‹¬çš„ä¸»èŠ‚ç‚¹ï¼Œä»¥åŠä¸€å°æ‰“å®¢æˆ·ç«¯èŠ‚ç‚¹â€”â€”è¿™äº›å…±åŒæ“ä½œä¸€åƒä¸ªç´¢å¼•ï¼ˆä»¥åŠä¸Šä¸‡ä¸ªåˆ†ç‰‡ï¼‰ã€‚ ä¸ç®¡é›†ç¾¤æ‰©å±•åˆ°å¤šå¤§è§„æ¨¡ï¼Œä½ éƒ½ä¼šæƒ³è¦ä¸€ä¸ªå¿«é€Ÿè·å–é›†ç¾¤çŠ¶æ€çš„é€”å¾„ã€‚Cluster Health API å……å½“çš„å°±æ˜¯è¿™ä¸ªè§’è‰²ã€‚ä½ å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆæ˜¯åœ¨ä¸€ä¸‡è‹±å°ºçš„é«˜åº¦é¸Ÿç°é›†ç¾¤ã€‚å®ƒå¯ä»¥å‘Šè¯‰ä½ å®‰å¿ƒå§ä¸€åˆ‡éƒ½å¥½ï¼Œæˆ–è€…è­¦å‘Šä½ é›†ç¾¤æŸä¸ªåœ°æ–¹æœ‰é—®é¢˜ã€‚ è®©æˆ‘ä»¬æ‰§è¡Œä¸€ä¸‹ cluster-health API ç„¶åçœ‹çœ‹å“åº”ä½“æ˜¯ä»€ä¹ˆæ ·å­çš„ï¼š 1GET _cluster/health å’Œ Elasticsearch é‡Œå…¶ä»– API ä¸€æ ·ï¼Œcluster-health ä¼šè¿”å›ä¸€ä¸ª JSON å“åº”ã€‚è¿™å¯¹è‡ªåŠ¨åŒ–å’Œå‘Šè­¦ç³»ç»Ÿæ¥è¯´ï¼Œéå¸¸ä¾¿äºè§£æã€‚å“åº”ä¸­åŒ…å«äº†å’Œä½ é›†ç¾¤æœ‰å…³çš„ä¸€äº›å…³é”®ä¿¡æ¯ï¼š 123456789101112&#123; \"cluster_name\": \"elasticsearch_zach\", \"status\": \"green\", \"timed_out\": false, \"number_of_nodes\": 1, \"number_of_data_nodes\": 1, \"active_primary_shards\": 10, \"active_shards\": 10, \"relocating_shards\": 0, \"initializing_shards\": 0, \"unassigned_shards\": 0&#125; å“åº”ä¿¡æ¯ä¸­æœ€é‡è¦çš„ä¸€å—å°±æ˜¯ status å­—æ®µã€‚çŠ¶æ€å¯èƒ½æ˜¯ä¸‹åˆ—ä¸‰ä¸ªå€¼ä¹‹ä¸€ : status å«ä¹‰ green æ‰€æœ‰çš„ä¸»åˆ†ç‰‡å’Œå‰¯æœ¬åˆ†ç‰‡éƒ½å·²åˆ†é…ã€‚ä½ çš„é›†ç¾¤æ˜¯ 100% å¯ç”¨çš„ã€‚ yellow æ‰€æœ‰çš„ä¸»åˆ†ç‰‡å·²ç»åˆ†ç‰‡äº†ï¼Œä½†è‡³å°‘è¿˜æœ‰ä¸€ä¸ªå‰¯æœ¬æ˜¯ç¼ºå¤±çš„ã€‚ä¸ä¼šæœ‰æ•°æ®ä¸¢å¤±ï¼Œæ‰€ä»¥æœç´¢ç»“æœä¾ç„¶æ˜¯å®Œæ•´çš„ã€‚ä¸è¿‡ï¼Œä½ çš„é«˜å¯ç”¨æ€§åœ¨æŸç§ç¨‹åº¦ä¸Šè¢«å¼±åŒ–ã€‚å¦‚æœ æ›´å¤šçš„ åˆ†ç‰‡æ¶ˆå¤±ï¼Œä½ å°±ä¼šä¸¢æ•°æ®äº†ã€‚æŠŠ yellow æƒ³è±¡æˆä¸€ä¸ªéœ€è¦åŠæ—¶è°ƒæŸ¥çš„è­¦å‘Šã€‚ red è‡³å°‘ä¸€ä¸ªä¸»åˆ†ç‰‡ï¼ˆä»¥åŠå®ƒçš„å…¨éƒ¨å‰¯æœ¬ï¼‰éƒ½åœ¨ç¼ºå¤±ä¸­ã€‚è¿™æ„å‘³ç€ä½ åœ¨ç¼ºå°‘æ•°æ®ï¼šæœç´¢åªèƒ½è¿”å›éƒ¨åˆ†æ•°æ®ï¼Œè€Œåˆ†é…åˆ°è¿™ä¸ªåˆ†ç‰‡ä¸Šçš„å†™å…¥è¯·æ±‚ä¼šè¿”å›ä¸€ä¸ªå¼‚å¸¸ã€‚ number_of_nodes å’Œ number_of_data_nodes è¿™ä¸ªå‘½åå®Œå…¨æ˜¯è‡ªæè¿°çš„ã€‚ active_primary_shards æŒ‡å‡ºä½ é›†ç¾¤ä¸­çš„ä¸»åˆ†ç‰‡æ•°é‡ã€‚è¿™æ˜¯æ¶µç›–äº†æ‰€æœ‰ç´¢å¼•çš„æ±‡æ€»å€¼ã€‚ active_shards æ˜¯æ¶µç›–äº†æ‰€æœ‰ç´¢å¼•çš„æ‰€æœ‰åˆ†ç‰‡çš„æ±‡æ€»å€¼ï¼Œå³åŒ…æ‹¬å‰¯æœ¬åˆ†ç‰‡ã€‚ relocating_shards æ˜¾ç¤ºå½“å‰æ­£åœ¨ä»ä¸€ä¸ªèŠ‚ç‚¹è¿å¾€å…¶ä»–èŠ‚ç‚¹çš„åˆ†ç‰‡çš„æ•°é‡ã€‚é€šå¸¸æ¥è¯´åº”è¯¥æ˜¯ 0ï¼Œä¸è¿‡åœ¨ Elasticsearch å‘ç°é›†ç¾¤ä¸å¤ªå‡è¡¡æ—¶ï¼Œè¯¥å€¼ä¼šä¸Šæ¶¨ã€‚æ¯”å¦‚è¯´ï¼šæ·»åŠ äº†ä¸€ä¸ªæ–°èŠ‚ç‚¹ï¼Œæˆ–è€…ä¸‹çº¿äº†ä¸€ä¸ªèŠ‚ç‚¹ã€‚ initializing_shards æ˜¯åˆšåˆšåˆ›å»ºçš„åˆ†ç‰‡çš„ä¸ªæ•°ã€‚æ¯”å¦‚ï¼Œå½“ä½ åˆšåˆ›å»ºç¬¬ä¸€ä¸ªç´¢å¼•ï¼Œåˆ†ç‰‡éƒ½ä¼šçŸ­æš‚çš„å¤„äº initializing çŠ¶æ€ã€‚è¿™é€šå¸¸ä¼šæ˜¯ä¸€ä¸ªä¸´æ—¶äº‹ä»¶ï¼Œåˆ†ç‰‡ä¸åº”è¯¥é•¿æœŸåœç•™åœ¨ initializingçŠ¶æ€ã€‚ä½ è¿˜å¯èƒ½åœ¨èŠ‚ç‚¹åˆšé‡å¯çš„æ—¶å€™çœ‹åˆ° initializing åˆ†ç‰‡ï¼šå½“åˆ†ç‰‡ä»ç£ç›˜ä¸ŠåŠ è½½åï¼Œå®ƒä»¬ä¼šä»initializing çŠ¶æ€å¼€å§‹ã€‚ unassigned_shards æ˜¯å·²ç»åœ¨é›†ç¾¤çŠ¶æ€ä¸­å­˜åœ¨çš„åˆ†ç‰‡ï¼Œä½†æ˜¯å®é™…åœ¨é›†ç¾¤é‡Œåˆæ‰¾ä¸ç€ã€‚é€šå¸¸æœªåˆ†é…åˆ†ç‰‡çš„æ¥æºæ˜¯æœªåˆ†é…çš„å‰¯æœ¬ã€‚æ¯”å¦‚ï¼Œä¸€ä¸ªæœ‰ 5 åˆ†ç‰‡å’Œ 1 å‰¯æœ¬çš„ç´¢å¼•ï¼Œåœ¨å•èŠ‚ç‚¹é›†ç¾¤ä¸Šï¼Œå°±ä¼šæœ‰ 5 ä¸ªæœªåˆ†é…å‰¯æœ¬åˆ†ç‰‡ã€‚å¦‚æœä½ çš„é›†ç¾¤æ˜¯ red çŠ¶æ€ï¼Œä¹Ÿä¼šé•¿æœŸä¿æœ‰æœªåˆ†é…åˆ†ç‰‡ï¼ˆå› ä¸ºç¼ºå°‘ä¸»åˆ†ç‰‡ï¼‰ã€‚ é›†ç¾¤ç»Ÿè®¡é›†ç¾¤ç»Ÿè®¡ä¿¡æ¯åŒ…å« é›†ç¾¤çš„åˆ†ç‰‡æ•°ï¼Œæ–‡æ¡£æ•°ï¼Œå­˜å‚¨ç©ºé—´ï¼Œç¼“å­˜ä¿¡æ¯ï¼Œå†…å­˜ä½¿ç”¨ç‡ï¼Œæ’ä»¶å†…å®¹ï¼Œæ–‡ä»¶ç³»ç»Ÿå†…å®¹ï¼ŒJVM ä½œç”¨çŠ¶å†µï¼Œç³»ç»Ÿ CPUï¼ŒOS ä¿¡æ¯ï¼Œæ®µä¿¡æ¯ã€‚ æŸ¥çœ‹å…¨éƒ¨ç»Ÿè®¡ä¿¡æ¯å‘½ä»¤ï¼š 1curl -XGET &apos;http://localhost:9200/_cluster/stats?human&amp;pretty&apos; è¿”å› JSON ç»“æœï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177&#123; \"timestamp\": 1459427693515, \"cluster_name\": \"elasticsearch\", \"status\": \"green\", \"indices\": &#123; \"count\": 2, \"shards\": &#123; \"total\": 10, \"primaries\": 10, \"replication\": 0, \"index\": &#123; \"shards\": &#123; \"min\": 5, \"max\": 5, \"avg\": 5 &#125;, \"primaries\": &#123; \"min\": 5, \"max\": 5, \"avg\": 5 &#125;, \"replication\": &#123; \"min\": 0, \"max\": 0, \"avg\": 0 &#125; &#125; &#125;, \"docs\": &#123; \"count\": 10, \"deleted\": 0 &#125;, \"store\": &#123; \"size\": \"16.2kb\", \"size_in_bytes\": 16684, \"throttle_time\": \"0s\", \"throttle_time_in_millis\": 0 &#125;, \"fielddata\": &#123; \"memory_size\": \"0b\", \"memory_size_in_bytes\": 0, \"evictions\": 0 &#125;, \"query_cache\": &#123; \"memory_size\": \"0b\", \"memory_size_in_bytes\": 0, \"total_count\": 0, \"hit_count\": 0, \"miss_count\": 0, \"cache_size\": 0, \"cache_count\": 0, \"evictions\": 0 &#125;, \"completion\": &#123; \"size\": \"0b\", \"size_in_bytes\": 0 &#125;, \"segments\": &#123; \"count\": 4, \"memory\": \"8.6kb\", \"memory_in_bytes\": 8898, \"terms_memory\": \"6.3kb\", \"terms_memory_in_bytes\": 6522, \"stored_fields_memory\": \"1.2kb\", \"stored_fields_memory_in_bytes\": 1248, \"term_vectors_memory\": \"0b\", \"term_vectors_memory_in_bytes\": 0, \"norms_memory\": \"384b\", \"norms_memory_in_bytes\": 384, \"doc_values_memory\": \"744b\", \"doc_values_memory_in_bytes\": 744, \"index_writer_memory\": \"0b\", \"index_writer_memory_in_bytes\": 0, \"version_map_memory\": \"0b\", \"version_map_memory_in_bytes\": 0, \"fixed_bit_set\": \"0b\", \"fixed_bit_set_memory_in_bytes\": 0, \"file_sizes\": &#123;&#125; &#125;, \"percolator\": &#123; \"num_queries\": 0 &#125; &#125;, \"nodes\": &#123; \"count\": &#123; \"total\": 1, \"data\": 1, \"coordinating_only\": 0, \"master\": 1, \"ingest\": 1 &#125;, \"versions\": [ \"5.6.3\" ], \"os\": &#123; \"available_processors\": 8, \"allocated_processors\": 8, \"names\": [ &#123; \"name\": \"Mac OS X\", \"count\": 1 &#125; ], \"mem\" : &#123; \"total\" : \"16gb\", \"total_in_bytes\" : 17179869184, \"free\" : \"78.1mb\", \"free_in_bytes\" : 81960960, \"used\" : \"15.9gb\", \"used_in_bytes\" : 17097908224, \"free_percent\" : 0, \"used_percent\" : 100 &#125; &#125;, \"process\": &#123; \"cpu\": &#123; \"percent\": 9 &#125;, \"open_file_descriptors\": &#123; \"min\": 268, \"max\": 268, \"avg\": 268 &#125; &#125;, \"jvm\": &#123; \"max_uptime\": \"13.7s\", \"max_uptime_in_millis\": 13737, \"versions\": [ &#123; \"version\": \"1.8.0_74\", \"vm_name\": \"Java HotSpot(TM) 64-Bit Server VM\", \"vm_version\": \"25.74-b02\", \"vm_vendor\": \"Oracle Corporation\", \"count\": 1 &#125; ], \"mem\": &#123; \"heap_used\": \"57.5mb\", \"heap_used_in_bytes\": 60312664, \"heap_max\": \"989.8mb\", \"heap_max_in_bytes\": 1037959168 &#125;, \"threads\": 90 &#125;, \"fs\": &#123; \"total\": \"200.6gb\", \"total_in_bytes\": 215429193728, \"free\": \"32.6gb\", \"free_in_bytes\": 35064553472, \"available\": \"32.4gb\", \"available_in_bytes\": 34802409472 &#125;, \"plugins\": [ &#123; \"name\": \"analysis-icu\", \"version\": \"5.6.3\", \"description\": \"The ICU Analysis plugin integrates Lucene ICU module into elasticsearch, adding ICU relates analysis components.\", \"classname\": \"org.elasticsearch.plugin.analysis.icu.AnalysisICUPlugin\", \"has_native_controller\": false &#125;, &#123; \"name\": \"ingest-geoip\", \"version\": \"5.6.3\", \"description\": \"Ingest processor that uses looksup geo data based on ip adresses using the Maxmind geo database\", \"classname\": \"org.elasticsearch.ingest.geoip.IngestGeoIpPlugin\", \"has_native_controller\": false &#125;, &#123; \"name\": \"ingest-user-agent\", \"version\": \"5.6.3\", \"description\": \"Ingest processor that extracts information from a user agent\", \"classname\": \"org.elasticsearch.ingest.useragent.IngestUserAgentPlugin\", \"has_native_controller\": false &#125; ] &#125;&#125; å†…å­˜ä½¿ç”¨å’Œ GC æŒ‡æ ‡åœ¨è¿è¡Œ Elasticsearch æ—¶ï¼Œå†…å­˜æ˜¯æ‚¨è¦å¯†åˆ‡ç›‘æ§çš„å…³é”®èµ„æºä¹‹ä¸€ã€‚ Elasticsearch å’Œ Lucene ä»¥ä¸¤ç§æ–¹å¼åˆ©ç”¨èŠ‚ç‚¹ä¸Šçš„æ‰€æœ‰å¯ç”¨ RAMï¼šJVM heap å’Œæ–‡ä»¶ç³»ç»Ÿç¼“å­˜ã€‚ Elasticsearch è¿è¡Œåœ¨Javaè™šæ‹Ÿæœºï¼ˆJVMï¼‰ä¸­ï¼Œè¿™æ„å‘³ç€JVMåƒåœ¾å›æ”¶çš„æŒç»­æ—¶é—´å’Œé¢‘ç‡å°†æˆä¸ºå…¶ä»–é‡è¦çš„ç›‘æ§é¢†åŸŸã€‚ ä¸Šé¢è¿”å›çš„ JSONï¼Œç›‘æ§çš„æŒ‡æ ‡æœ‰æˆ‘ä¸ªäººè§‰å¾—æœ‰è¿™äº›ï¼š nodes.successful nodes.failed nodes.total nodes.mem.used_percent nodes.process.cpu.percent nodes.jvm.mem.heap_used å¯ä»¥çœ‹åˆ° JSON æ–‡ä»¶æ˜¯å¾ˆå¤æ‚çš„ï¼Œå¦‚æœä»è¿™å¤æ‚çš„ JSON ä¸­è·å–åˆ°å¯¹åº”çš„æŒ‡æ ‡ï¼ˆkeyï¼‰çš„å€¼å‘¢ï¼Œè¿™é‡Œè¯·çœ‹æ–‡ç«  ï¼šJsonPath â€”â€” JSON è§£æç¥å™¨ æœ€åè¿™é‡Œä¸»è¦è®²ä¸‹ ES é›†ç¾¤çš„ä¸€äº›ç›‘æ§ä¿¡æ¯ï¼Œæœ‰äº›ç›‘æ§æŒ‡æ ‡æ˜¯ä¸ªäººè§‰å¾—éœ€è¦ç›‘æ§çš„ï¼Œä½†æ˜¯å…·ä½“æƒ…å†µè¿˜æ˜¯å¾—çœ‹éœ€æ±‚äº†ã€‚ä¸‹ç¯‡æ–‡ç« ä¸»è¦è®²èŠ‚ç‚¹çš„ç›‘æ§ä¿¡æ¯ã€‚è½¬è½½è¯·æ³¨æ˜åœ°å€ï¼šhttp://www.54tianzhisheng.cn/2017/10/15/ElasticSearch-cluster-health-metrics/ å‚è€ƒèµ„æ–™1ã€How to monitor Elasticsearch performance 2ã€ElasticSearch æ€§èƒ½ç›‘æ§ 3ã€cluster-health 4ã€cluster-stats ç›¸å…³é˜…è¯»1ã€Elasticsearch é»˜è®¤åˆ†è¯å™¨å’Œä¸­åˆ†åˆ†è¯å™¨ä¹‹é—´çš„æ¯”è¾ƒåŠä½¿ç”¨æ–¹æ³• 2ã€å…¨æ–‡æœç´¢å¼•æ“ Elasticsearch é›†ç¾¤æ­å»ºå…¥é—¨æ•™ç¨‹","tags":[{"name":"ElasticSearch","slug":"ElasticSearch","permalink":"http://yoursite.com/tags/ElasticSearch/"}]},{"title":"JsonPath â€”â€” JSON è§£æç¥å™¨","date":"2017-10-13T16:00:00.000Z","path":"2017/10/14/JsonPath/","text":"çœŸä¹ƒç¥å™¨ä¹Ÿï¼Œå†å¤æ‚çš„ Json éƒ½èƒ½ç»™ä½ è§£æå‡ºæ¥ï¼Œéå¸¸æ–¹ä¾¿çš„è·å– JSON çš„å†…å®¹ï¼Œå¾ˆå¼ºå¤§ï¼è¯­æ³•ç®€ä»‹ JsonPath æè¿° $ æ ¹èŠ‚ç‚¹ @ å½“å‰èŠ‚ç‚¹ .or[] å­èŠ‚ç‚¹ .. é€‰æ‹©æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„èŠ‚ç‚¹ * æ‰€æœ‰èŠ‚ç‚¹ [] è¿­ä»£å™¨æ ‡ç¤ºï¼Œå¦‚æ•°ç»„ä¸‹æ ‡ [,] æ”¯æŒè¿­ä»£å™¨ä¸­åšå¤šé€‰ [start:end:step] æ•°ç»„åˆ‡ç‰‡è¿ç®—ç¬¦ ?() æ”¯æŒè¿‡æ»¤æ“ä½œ () æ”¯æŒè¡¨è¾¾å¼è®¡ç®— JSON å€¼ï¼š 1234567891011121314151617181920&#123; \"store\": &#123; \"book\": [ &#123; \"category\": \"reference\", \"author\": \"Nigel Rees\", \"title\": \"Sayings of the Century\", \"price\": 8.95 &#125;, &#123; \"category\": \"fiction\", \"author\": \"Evelyn Waugh\", \"title\": \"Sword of Honour\", \"price\": 12.99, \"isbn\": \"0-553-21311-3\" &#125; ], \"bicycle\": &#123; \"color\": \"red\", \"price\": 19.95 &#125; &#125;&#125; å¯¼åŒ…ï¼šimport com.jayway.jsonpath.JsonPath è§£æä»£ç ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344//è¾“å‡ºbook[0]çš„authorå€¼String author = JsonPath.read(json, \"$.store.book[0].author\");System.out.println(\"author\\t\"+author);//è¾“å‡ºå…¨éƒ¨authorçš„å€¼ï¼Œä½¿ç”¨Iteratorè¿­ä»£List&lt;String&gt; authors = JsonPath.read(json, \"$.store.book[*].author\");System.out.println(\"authors\\t\"+authors);//è¾“å‡ºbook[*]ä¸­category == 'reference'çš„bookList&lt;Object&gt; books = JsonPath.read(json, \"$.store.book[?(@.category == 'reference')]\");System.out.println(\"books\\t\"+books);//è¾“å‡ºbook[*]ä¸­category == 'reference'çš„bookæˆ–è€…List&lt;Object&gt; books2 = JsonPath.read(json, \"$.store.book[?(@.category == 'reference' || @.price&gt;10)]\");System.out.println(\"books2\\t\"+books2);//è¾“å‡ºbook[*]ä¸­category == 'reference'çš„bookçš„authorList&lt;Object&gt; books1 = JsonPath.read(json, \"$.store.book[?(@.category == 'reference')].author\");System.out.println(\"books1\\t\"+books1);//è¾“å‡ºbook[*]ä¸­price&gt;10çš„bookList&lt;Object&gt; b1 = JsonPath.read(json, \"$.store.book[?(@.price&gt;10)]\");System.out.println(\"b1\"+b1);//è¾“å‡ºbook[*]ä¸­å«æœ‰isbnå…ƒç´ çš„bookList&lt;Object&gt; b2 = JsonPath.read(json, \"$.store.book[?(@.isbn)]\");System.out.println(\"b2\"+b2);//è¾“å‡ºè¯¥jsonä¸­æ‰€æœ‰priceçš„å€¼List&lt;Double&gt; prices = JsonPath.read(json, \"$..price\");System.out.println(\"prices\"+prices);//è¾“å‡ºè¯¥jsonä¸­æ‰€æœ‰titleçš„å€¼List&lt;Double&gt; title = JsonPath.read(json, \"$..title\");System.out.println(\"title\"+title);//è¾“å‡ºè¯¥jsonä¸­book 0,1çš„å€¼List&lt;Double&gt; book01 = JsonPath.read(json, \"$..book[0,1]\");System.out.println(\"book01\"+book01);/* //è¾“å‡ºè¯¥jsonä¸­book 0,1çš„å€¼List&lt;Double&gt; book012 = JsonPath.read(json, \"$..book[-2:]\");System.out.println(\"book012\"+book012);*///å¯ä»¥æå‰ç¼–è¾‘ä¸€ä¸ªè·¯å¾„ï¼Œå¹¶å¤šæ¬¡ä½¿ç”¨å®ƒJsonPath path = JsonPath.compile(\"$.store.book[*]\");List&lt;Object&gt; b3 = path.read(json);System.out.println(\"path\\t\"+path+\"\\n\"+b3); ç”¨æ³•æ¯”è¾ƒç®€å•ï¼Œå¤šä½¿ç”¨å‡ æ¬¡å°±ä¼šä½¿ç”¨äº†ï¼æ–‡ç« ä¸»è¦å‚è€ƒç½‘ä¸Šï¼åŸè°…å¾ˆå¤šå¤©ä¸è·Ÿåšçš„æˆ‘ç°åœ¨ç«Ÿç„¶è¿™æ ·æ°´äº†è¿™ä¹ˆä¸€ç¯‡æ–‡ç« ï¼Œå“ˆå“ˆï¼å®åœ¨æ˜¯å¿™ï¼","tags":[{"name":"JSON","slug":"JSON","permalink":"http://yoursite.com/tags/JSON/"}]},{"title":"Centos7 æ­å»ºæœ€æ–° Nexus3 Maven ç§æœ","date":"2017-10-13T16:00:00.000Z","path":"2017/10/14/Nexus3-Maven/","text":"Maven ä»‹ç»Apache Maven æ˜¯ä¸€ä¸ªåˆ›æ–°çš„è½¯ä»¶é¡¹ç›®ç®¡ç†å’Œç»¼åˆå·¥å…·ã€‚Maven æä¾›äº†ä¸€ä¸ªåŸºäºé¡¹ç›®å¯¹è±¡æ¨¡å‹ï¼ˆPOMï¼‰æ–‡ä»¶çš„æ–°æ¦‚å¿µæ¥ç®¡ç†é¡¹ç›®çš„æ„å»ºï¼Œå¯ä»¥ä»ä¸€ä¸ªä¸­å¿ƒèµ„æ–™ç‰‡ç®¡ç†é¡¹ç›®æ„å»ºï¼ŒæŠ¥å‘Šå’Œæ–‡ä»¶ã€‚Maven æœ€å¼ºå¤§çš„åŠŸèƒ½å°±æ˜¯èƒ½å¤Ÿè‡ªåŠ¨ä¸‹è½½é¡¹ç›®ä¾èµ–åº“ã€‚Maven æä¾›äº†å¼€å‘äººå‘˜æ„å»ºä¸€ä¸ªå®Œæ•´çš„ç”Ÿå‘½å‘¨æœŸæ¡†æ¶ã€‚å¼€å‘å›¢é˜Ÿå¯ä»¥è‡ªåŠ¨å®Œæˆé¡¹ç›®çš„åŸºç¡€å·¥å…·å»ºè®¾ï¼ŒMaven ä½¿ç”¨æ ‡å‡†çš„ç›®å½•ç»“æ„å’Œé»˜è®¤æ„å»ºç”Ÿå‘½å‘¨æœŸã€‚åœ¨å¤šä¸ªå¼€å‘å›¢é˜Ÿç¯å¢ƒæ—¶ï¼ŒMaven å¯ä»¥è®¾ç½®æŒ‰æ ‡å‡†åœ¨éå¸¸çŸ­çš„æ—¶é—´é‡Œå®Œæˆé…ç½®å·¥ä½œã€‚ç”±äºå¤§éƒ¨åˆ†é¡¹ç›®çš„è®¾ç½®éƒ½å¾ˆç®€å•ï¼Œå¹¶ä¸”å¯é‡å¤ä½¿ç”¨ï¼ŒMaven è®©å¼€å‘äººå‘˜çš„å·¥ä½œæ›´è½»æ¾ï¼ŒåŒæ—¶åˆ›å»ºæŠ¥è¡¨ï¼Œæ£€æŸ¥ï¼Œæ„å»ºå’Œæµ‹è¯•è‡ªåŠ¨åŒ–è®¾ç½®ã€‚Maven é¡¹ç›®çš„ç»“æ„å’Œå†…å®¹åœ¨ä¸€ä¸ª XML æ–‡ä»¶ä¸­å£°æ˜ï¼Œpom.xml é¡¹ç›®å¯¹è±¡æ¨¡å‹ï¼ˆPOMï¼‰ï¼Œè¿™æ˜¯æ•´ä¸ª Maven ç³»ç»Ÿçš„åŸºæœ¬å•å…ƒã€‚ Maven æä¾›äº†å¼€å‘äººå‘˜çš„æ–¹å¼æ¥ç®¡ç†ï¼š1ï¼‰Builds2ï¼‰Documentation3ï¼‰Reporting4ï¼‰Dependencies5ï¼‰SCMs6ï¼‰Releases7ï¼‰Distribution8ï¼‰mailing listæ¦‚æ‹¬åœ°è¯´ï¼ŒMaven ç®€åŒ–å’Œæ ‡å‡†åŒ–é¡¹ç›®å»ºè®¾è¿‡ç¨‹ã€‚å¤„ç†ç¼–è¯‘ï¼Œåˆ†é…ï¼Œæ–‡æ¡£ï¼Œå›¢é˜Ÿåä½œå’Œå…¶ä»–ä»»åŠ¡çš„æ— ç¼è¿æ¥ã€‚Maven å¢åŠ å¯é‡ç”¨æ€§å¹¶è´Ÿè´£å»ºç«‹ç›¸å…³çš„ä»»åŠ¡ã€‚Maven æœ€åˆè®¾è®¡ï¼Œæ˜¯ä»¥ç®€åŒ– Jakarta Turbine é¡¹ç›®çš„å»ºè®¾ã€‚åœ¨å‡ ä¸ªé¡¹ç›®ï¼Œæ¯ä¸ªé¡¹ç›®åŒ…å«äº†ä¸åŒçš„ Ant æ„å»ºæ–‡ä»¶ã€‚ JAR æ£€æŸ¥åˆ° CVSã€‚Apache ç»„ç»‡å¼€å‘ Maven å¯ä»¥å»ºç«‹å¤šä¸ªé¡¹ç›®ï¼Œå‘å¸ƒé¡¹ç›®ä¿¡æ¯ï¼Œé¡¹ç›®éƒ¨ç½²ï¼Œåœ¨å‡ ä¸ªé¡¹ç›®ä¸­ JAR æ–‡ä»¶æä¾›å›¢é˜Ÿåˆä½œå’Œå¸®åŠ©ã€‚ Maven ä¸»è¦ç›®æ ‡æ˜¯æä¾›ç»™å¼€å‘äººå‘˜ï¼š1ï¼‰é¡¹ç›®æ˜¯å¯é‡å¤ä½¿ç”¨ï¼Œæ˜“ç»´æŠ¤ï¼Œæ›´å®¹æ˜“ç†è§£çš„ä¸€ä¸ªç»¼åˆæ¨¡å‹ã€‚2ï¼‰æ’ä»¶æˆ–äº¤äº’çš„å·¥å…·ï¼Œè¿™ç§å£°æ˜æ€§çš„æ¨¡å¼ã€‚ ç§æœä»‹ç»ç§æœæ˜¯æŒ‡ç§æœ‰æœåŠ¡å™¨ï¼Œæ˜¯æ¶è®¾åœ¨å±€åŸŸç½‘çš„ä¸€ç§ç‰¹æ®Šçš„è¿œç¨‹ä»“åº“ï¼Œç›®çš„æ˜¯ä»£ç†è¿œç¨‹ä»“åº“åŠéƒ¨ç½²ç¬¬ä¸‰æ–¹æ„å»ºã€‚æœ‰äº†ç§æœä¹‹åï¼Œå½“ Maven éœ€è¦ä¸‹è½½æ„ä»¶æ—¶ï¼Œç›´æ¥è¯·æ±‚ç§æœï¼Œç§æœä¸Šå­˜åœ¨åˆ™ä¸‹è½½åˆ°æœ¬åœ°ä»“åº“ï¼›å¦åˆ™ï¼Œç§æœè¯·æ±‚å¤–éƒ¨çš„è¿œç¨‹ä»“åº“ï¼Œå°†æ„ä»¶ä¸‹è½½åˆ°ç§æœï¼Œå†æä¾›ç»™æœ¬åœ°ä»“åº“ä¸‹è½½ã€‚ Nexus ä»‹ç»Nexus æ˜¯ä¸€ä¸ªå¼ºå¤§çš„ Maven ä»“åº“ç®¡ç†å™¨ï¼Œå®ƒæå¤§åœ°ç®€åŒ–äº†æœ¬åœ°å†…éƒ¨ä»“åº“çš„ç»´æŠ¤å’Œå¤–éƒ¨ä»“åº“çš„è®¿é—®ã€‚å¦‚æœä½¿ç”¨äº†å…¬å…±çš„ Maven ä»“åº“æœåŠ¡å™¨ï¼Œå¯ä»¥ä» Maven ä¸­å¤®ä»“åº“ä¸‹è½½æ‰€éœ€è¦çš„æ„ä»¶ï¼ˆArtifactï¼‰ï¼Œä½†è¿™é€šå¸¸ä¸æ˜¯ä¸€ä¸ªå¥½çš„åšæ³•ã€‚æ­£å¸¸åšæ³•æ˜¯åœ¨æœ¬åœ°æ¶è®¾ä¸€ä¸ª Maven ä»“åº“æœåŠ¡å™¨ï¼Œå³åˆ©ç”¨ Nexus ç§æœå¯ä»¥åªåœ¨ä¸€ä¸ªåœ°æ–¹å°±èƒ½å¤Ÿå®Œå…¨æ§åˆ¶è®¿é—®å’Œéƒ¨ç½²åœ¨ä½ æ‰€ç»´æŠ¤ä»“åº“ä¸­çš„æ¯ä¸ª Artifactã€‚Nexus åœ¨ä»£ç†è¿œç¨‹ä»“åº“çš„åŒæ—¶ç»´æŠ¤æœ¬åœ°ä»“åº“ï¼Œä»¥é™ä½ä¸­å¤®ä»“åº“çš„è´Ÿè·, èŠ‚çœå¤–ç½‘å¸¦å®½å’Œæ—¶é—´ï¼ŒNexus ç§æœå°±å¯ä»¥æ»¡è¶³è¿™æ ·çš„éœ€è¦ã€‚Nexus æ˜¯ä¸€å¥— â€œå¼€ç®±å³ç”¨â€ çš„ç³»ç»Ÿä¸éœ€è¦æ•°æ®åº“ï¼Œå®ƒä½¿ç”¨æ–‡ä»¶ç³»ç»ŸåŠ  Lucene æ¥ç»„ç»‡æ•°æ®ã€‚Nexus ä½¿ç”¨ ExtJS æ¥å¼€å‘ç•Œé¢ï¼Œåˆ©ç”¨ Restlet æ¥æä¾›å®Œæ•´çš„ REST APIsï¼Œé€šè¿‡ m2eclipse ä¸ Eclipse é›†æˆä½¿ç”¨ã€‚Nexus æ”¯æŒ WebDAV ä¸ LDAP å®‰å…¨èº«ä»½è®¤è¯ã€‚Nexus è¿˜æä¾›äº†å¼ºå¤§çš„ä»“åº“ç®¡ç†åŠŸèƒ½ï¼Œæ„ä»¶æœç´¢åŠŸèƒ½ï¼Œå®ƒåŸºäº RESTï¼Œå‹å¥½çš„ UI æ˜¯ä¸€ä¸ª extjs çš„ REST å®¢æˆ·ç«¯ï¼Œå®ƒå ç”¨è¾ƒå°‘çš„å†…å­˜ï¼ŒåŸºäºç®€å•æ–‡ä»¶ç³»ç»Ÿè€Œéæ•°æ®åº“ã€‚ ä¸ºä»€ä¹ˆè¦æ„å»º Nexus ç§æœï¼Ÿå¦‚æœæ²¡æœ‰ Nexus ç§æœï¼Œæˆ‘ä»¬æ‰€éœ€çš„æ‰€æœ‰æ„ä»¶éƒ½éœ€è¦é€šè¿‡ maven çš„ä¸­å¤®ä»“åº“å’Œç¬¬ä¸‰æ–¹çš„ Maven ä»“åº“ä¸‹è½½åˆ°æœ¬åœ°ï¼Œè€Œä¸€ä¸ªå›¢é˜Ÿä¸­çš„æ‰€æœ‰äººéƒ½é‡å¤çš„ä» maven ä»“åº“ä¸‹è½½æ„ä»¶æ— ç–‘åŠ å¤§äº†ä»“åº“çš„è´Ÿè½½å’Œæµªè´¹äº†å¤–ç½‘å¸¦å®½ï¼Œå¦‚æœç½‘é€Ÿæ…¢çš„è¯ï¼Œè¿˜ä¼šå½±å“é¡¹ç›®çš„è¿›ç¨‹ã€‚å¾ˆå¤šæƒ…å†µä¸‹é¡¹ç›®çš„å¼€å‘éƒ½æ˜¯åœ¨å†…ç½‘è¿›è¡Œçš„ï¼Œè¿æ¥ä¸åˆ° maven ä»“åº“æ€ä¹ˆåŠå‘¢ï¼Ÿå¼€å‘çš„å…¬å…±æ„ä»¶æ€ä¹ˆè®©å…¶å®ƒé¡¹ç›®ä½¿ç”¨ï¼Ÿè¿™ä¸ªæ—¶å€™æˆ‘ä»¬ä¸å¾—ä¸ä¸ºè‡ªå·±çš„å›¢é˜Ÿæ­å»ºå±äºè‡ªå·±çš„ maven ç§æœï¼Œè¿™æ ·æ—¢èŠ‚çœäº†ç½‘ç»œå¸¦å®½ä¹Ÿä¼šåŠ é€Ÿé¡¹ç›®æ­å»ºçš„è¿›ç¨‹ï¼Œå½“ç„¶å‰ææ¡ä»¶å°±æ˜¯ä½ çš„ç§æœä¸­æ‹¥æœ‰é¡¹ç›®æ‰€éœ€çš„æ‰€æœ‰æ„ä»¶ã€‚ æ€»ä¹‹ï¼Œåœ¨æœ¬åœ°æ„å»º nexus ç§æœçš„å¥½å¤„æœ‰ï¼š1ï¼‰åŠ é€Ÿæ„å»ºï¼›2ï¼‰èŠ‚çœå¸¦å®½ï¼›3ï¼‰èŠ‚çœä¸­å¤® maven ä»“åº“çš„å¸¦å®½ï¼›4ï¼‰ç¨³å®šï¼ˆåº”ä»˜ä¸€æ—¦ä¸­å¤®æœåŠ¡å™¨å‡ºé—®é¢˜çš„æƒ…å†µï¼‰ï¼›5ï¼‰æ§åˆ¶å’Œå®¡è®¡ï¼›6ï¼‰èƒ½å¤Ÿéƒ¨ç½²ç¬¬ä¸‰æ–¹æ„ä»¶ï¼›7ï¼‰å¯ä»¥å»ºç«‹æœ¬åœ°å†…éƒ¨ä»“åº“ï¼›8ï¼‰å¯ä»¥å»ºç«‹å…¬å…±ä»“åº“è¿™äº›ä¼˜ç‚¹ä½¿å¾— Nexus æ—¥è¶‹æˆä¸ºæœ€æµè¡Œçš„ Maven ä»“åº“ç®¡ç†å™¨ã€‚ 1. å®‰è£… jdk1.8å…³äº jdk1.8 çš„å®‰è£…, åœ¨è¿™é‡Œå°±ä¸åšèµ˜è¿°äº† 2. å®‰è£… mavenå…³äº maven çš„å®‰è£…, æœ¬æ–‡åœ¨è¿™é‡Œå°±ä¸è¯¦ç»†å†™äº† 3. å®‰è£… nexus31. ä¸‹è½½ nexus-3.6.0-02-unix.tar.gzå®˜ç½‘é“¾æ¥åœ°å€ï¼šhttps://www.sonatype.com/download-oss-sonatype ä¸‹è½½ linux æœ€æ–°ç‰ˆæœ¬ï¼Œç›´æ¥ä¸‹è½½é€Ÿåº¦å¯èƒ½å¾ˆæ…¢ï¼Œå»ºè®®ç”¨è¿…é›·ä¸‹è½½ä¼šå¿«å¾ˆå¤šçš„ã€‚ 2. è§£å‹1tar -zxvf nexus-3.6.0-02-unix.tar.gz -C /usr/local/ 3. å¯åŠ¨ nexus312cd /usr/local/nexus-3.6.0-02/bin/./nexus run &amp; ç¨ç­‰ä¸€ä¼š (é¦–æ¬¡å¯åŠ¨ä¼šæ¯”è¾ƒæ…¢), å½“å‡ºç°ä»¥ä¸‹æ—¥å¿—çš„æ—¶å€™è¡¨ç¤ºå¯åŠ¨æˆåŠŸ! 12345-------------------------------------------------Started Sonatype Nexus OSS 3.6.0-02------------------------------------------------- 4. å¼€å¯è¿œç¨‹è®¿é—®ç«¯å£å…³é—­é˜²ç«å¢™ï¼Œå¹¶å¼€å¯è¿œç¨‹è®¿é—®ç«¯å£ 8081 123vim /etc/sysconfig/iptablesæ·»åŠ ï¼š-A INPUT -p tcp -m state --state NEW -m tcp --dport 8081 -j ACCEPT 5. æµ‹è¯• 123nexus3é»˜è®¤ç«¯å£æ˜¯:8081nexus3é»˜è®¤è´¦å·æ˜¯:adminnexus3é»˜è®¤å¯†ç æ˜¯:admin123 6. è®¾ç½®å¼€æœºè‡ªå¯åŠ¨123ln -s /usr/local/nexus-3.6.0-02/bin/nexus /etc/init.d/nexus3chkconfig --add nexus3chkconfig nexus3 on 7. ä¿®æ”¹ nexus3 çš„è¿è¡Œç”¨æˆ·ä¸º root1vim nexus.rc 12//è®¾ç½®run_as_user=&quot;root&quot; 8. ä¿®æ”¹ nexus3 å¯åŠ¨æ—¶è¦ä½¿ç”¨çš„ jdk ç‰ˆæœ¬1vim nexus ç¬¬ 14 è¡Œ: 1INSTALL4J_JAVA_HOME_OVERRIDE=/usr/local/java/jdk1.8.0_144 9. ä¿®æ”¹ nexus3 é»˜è®¤ç«¯å£ (å¯é€‰)12cd /usr/local/nexus-3.6.0-02/etc/vim nexus-default.properties é»˜è®¤ç«¯å£: 8081 1application-port=8081 10. ä¿®æ”¹ nexus3 æ•°æ®ä»¥åŠç›¸å…³æ—¥å¿—çš„å­˜å‚¨ä½ç½® (å¯é€‰)ï¼š12[root@MiWiFi-R3-srv bin]# cd /usr/local/nexus-3.6.0-02/bin/[root@MiWiFi-R3-srv bin]# vim nexus.vmoptions 123-XX:LogFile=./sonatype-work/nexus3/log/jvm.log-Dkaraf.data=./sonatype-work/nexus3-Djava.io.tmpdir=./sonatype-work/nexus3/tmp å‡ºç°ä¸Šé¢ 5 ä¸­çš„æµ‹è¯•é¡µé¢ï¼Œè¯´æ˜é…ç½® nexus æˆåŠŸï¼ ç‚¹å‡»å³ä¸Šè§’ â€œLog inâ€ï¼Œ è¾“å…¥é»˜è®¤ç”¨æˆ·å (admin) å’Œé»˜è®¤å¯†ç ï¼ˆadmin123ï¼‰ç™»å½• è‡³æ­¤, nexus3_maven çš„ç§æœå°±æ­å»ºå®Œæˆäº†!!! å¯ä»¥ç‚¹å‡»ä¸Šé¢çš„ â€œè®¾ç½®â€ å›¾æ ‡ï¼Œåœ¨ â€œè®¾ç½®â€ é‡Œå¯ä»¥æ·»åŠ ç”¨æˆ·ã€è§’è‰²ï¼Œå¯¹æ¥ LDAP ç­‰çš„è®¾ç½®ï¼Œå¦‚ä¸‹ï¼š å¯ä»¥åœ¨ â€œç®¡ç†â€ é‡ŒæŸ¥çœ‹ nexus çš„ç³»ç»Ÿä¿¡æ¯ æ³¨æ„ï¼š1.component name çš„ä¸€äº›è¯´æ˜ï¼š 1ï¼‰maven-centralï¼šmaven ä¸­å¤®åº“ï¼Œé»˜è®¤ä» https://repo1.maven.org/maven2 / æ‹‰å– jar 2ï¼‰maven-releasesï¼šç§åº“å‘è¡Œç‰ˆ jar 3ï¼‰maven-snapshotsï¼šç§åº“å¿«ç…§ï¼ˆè°ƒè¯•ç‰ˆæœ¬ï¼‰jar 4ï¼‰maven-publicï¼šä»“åº“åˆ†ç»„ï¼ŒæŠŠä¸Šé¢ä¸‰ä¸ªä»“åº“ç»„åˆåœ¨ä¸€èµ·å¯¹å¤–æä¾›æœåŠ¡ï¼Œåœ¨æœ¬åœ° maven åŸºç¡€é…ç½® settings.xml ä¸­ä½¿ç”¨ã€‚ 2.Nexus é»˜è®¤çš„ä»“åº“ç±»å‹æœ‰ä»¥ä¸‹å››ç§ï¼š 1ï¼‰group(ä»“åº“ç»„ç±»å‹)ï¼šåˆå«ç»„ä»“åº“ï¼Œç”¨äºæ–¹ä¾¿å¼€å‘äººå‘˜è‡ªå·±è®¾å®šçš„ä»“åº“ï¼› 2ï¼‰hosted(å®¿ä¸»ç±»å‹)ï¼šå†…éƒ¨é¡¹ç›®çš„å‘å¸ƒä»“åº“ï¼ˆå†…éƒ¨å¼€å‘äººå‘˜ï¼Œå‘å¸ƒä¸Šå»å­˜æ”¾çš„ä»“åº“ï¼‰ï¼› 3ï¼‰proxy(ä»£ç†ç±»å‹)ï¼šä»è¿œç¨‹ä¸­å¤®ä»“åº“ä¸­å¯»æ‰¾æ•°æ®çš„ä»“åº“ï¼ˆå¯ä»¥ç‚¹å‡»å¯¹åº”çš„ä»“åº“çš„ Configuration é¡µç­¾ä¸‹ Remote Storage Location å±æ€§çš„å€¼å³è¢«ä»£ç†çš„è¿œç¨‹ä»“åº“çš„è·¯å¾„ï¼‰ï¼› 4ï¼‰virtual(è™šæ‹Ÿç±»å‹)ï¼šè™šæ‹Ÿä»“åº“ï¼ˆè¿™ä¸ªåŸºæœ¬ç”¨ä¸åˆ°ï¼Œé‡ç‚¹å…³æ³¨ä¸Šé¢ä¸‰ä¸ªä»“åº“çš„ä½¿ç”¨ï¼‰ï¼› 3.Policy(ç­–ç•¥): è¡¨ç¤ºè¯¥ä»“åº“ä¸ºå‘å¸ƒ (Release) ç‰ˆæœ¬ä»“åº“è¿˜æ˜¯å¿«ç…§ (Snapshot) ç‰ˆæœ¬ä»“åº“ï¼› 4.Public Repositories ä¸‹çš„ä»“åº“ 1ï¼‰3rd party: æ— æ³•ä»å…¬å…±ä»“åº“è·å¾—çš„ç¬¬ä¸‰æ–¹å‘å¸ƒç‰ˆæœ¬çš„æ„ä»¶ä»“åº“ï¼Œå³ç¬¬ä¸‰æ–¹ä¾èµ–çš„ä»“åº“ï¼Œè¿™ä¸ªæ•°æ®é€šå¸¸æ˜¯ç”±å†…éƒ¨äººå‘˜è‡ªè¡Œä¸‹è½½ä¹‹åå‘å¸ƒä¸Šå»ï¼› 2ï¼‰Apache Snapshots: ç”¨äº†ä»£ç† ApacheMaven ä»“åº“å¿«ç…§ç‰ˆæœ¬çš„æ„ä»¶ä»“åº“ 3ï¼‰Central: ç”¨æ¥ä»£ç† maven ä¸­å¤®ä»“åº“ä¸­å‘å¸ƒç‰ˆæœ¬æ„ä»¶çš„ä»“åº“ 4ï¼‰Central M1 shadow: ç”¨äºæä¾›ä¸­å¤®ä»“åº“ä¸­ M1 æ ¼å¼çš„å‘å¸ƒç‰ˆæœ¬çš„æ„ä»¶é•œåƒä»“åº“ 5ï¼‰Codehaus Snapshots: ç”¨æ¥ä»£ç† CodehausMaven ä»“åº“çš„å¿«ç…§ç‰ˆæœ¬æ„ä»¶çš„ä»“åº“ 6ï¼‰Releases: å†…éƒ¨çš„æ¨¡å—ä¸­ release æ¨¡å—çš„å‘å¸ƒä»“åº“ï¼Œç”¨æ¥éƒ¨ç½²ç®¡ç†å†…éƒ¨çš„å‘å¸ƒç‰ˆæœ¬æ„ä»¶çš„å®¿ä¸»ç±»å‹ä»“åº“ï¼›release æ˜¯å‘å¸ƒç‰ˆæœ¬ï¼› 7ï¼‰Snapshots: å‘å¸ƒå†…éƒ¨çš„ SNAPSHOT æ¨¡å—çš„ä»“åº“ï¼Œç”¨æ¥éƒ¨ç½²ç®¡ç†å†…éƒ¨çš„å¿«ç…§ç‰ˆæœ¬æ„ä»¶çš„å®¿ä¸»ç±»å‹ä»“åº“ï¼›snapshots æ˜¯å¿«ç…§ç‰ˆæœ¬ï¼Œä¹Ÿå°±æ˜¯ä¸ç¨³å®šç‰ˆæœ¬æ‰€ä»¥è‡ªå®šä¹‰æ„å»ºçš„ä»“åº“ç»„ä»£ç†ä»“åº“çš„é¡ºåºä¸ºï¼šReleasesï¼ŒSnapshotsï¼Œ3rd partyï¼ŒCentralã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨ oschina æ”¾åˆ° Central å‰é¢ï¼Œä¸‹è½½åŒ…ä¼šæ›´å¿«ã€‚ 5.Nexus é»˜è®¤çš„ç«¯å£æ˜¯ 8081ï¼Œå¯ä»¥åœ¨ etc/nexus-default.properties é…ç½®ä¸­ä¿®æ”¹ã€‚ 6.Nexus é»˜è®¤çš„ç”¨æˆ·åå¯†ç æ˜¯ admin/admin123 å½“é‡åˆ°å¥‡æ€ªé—®é¢˜æ—¶ï¼Œé‡å¯ nexusï¼Œé‡å¯å web ç•Œé¢è¦ 1 åˆ†é’Ÿå·¦å³åæ‰èƒ½è®¿é—®ã€‚ 8.Nexus çš„å·¥ä½œç›®å½•æ˜¯ sonatype-workï¼ˆè·¯å¾„ä¸€èˆ¬åœ¨ nexus åŒçº§ç›®å½•ä¸‹ï¼‰12345678[root@master-node local]# pwd/usr/local[root@master-node local]# ls nexus/bin deploy etc lib LICENSE.txt NOTICE.txt public system[root@master-node local]# ls sonatype-work/nexus3[root@master-node local]# ls sonatype-work/nexus3/backup blobs cache db elasticsearch etc generated-bundles health-check instances keystores lock log orient port tmp Nexus ä»“åº“åˆ†ç±»çš„æ¦‚å¿µï¼š1ï¼‰Maven å¯ç›´æ¥ä»å®¿ä¸»ä»“åº“ä¸‹è½½æ„ä»¶, ä¹Ÿå¯ä»¥ä»ä»£ç†ä»“åº“ä¸‹è½½æ„ä»¶, è€Œä»£ç†ä»“åº“é—´æ¥çš„ä»è¿œç¨‹ä»“åº“ä¸‹è½½å¹¶ç¼“å­˜æ„ä»¶2ï¼‰ä¸ºäº†æ–¹ä¾¿, Maven å¯ä»¥ä»ä»“åº“ç»„ä¸‹è½½æ„ä»¶, è€Œä»“åº“ç»„å¹¶æ²¡æœ‰æ—¶é—´çš„å†…å®¹ (ä¸‹å›¾ä¸­ç”¨è™šçº¿è¡¨ç¤º, å®ƒä¼šè½¬å‘åŒ…å«çš„å®¿ä¸»ä»“åº“æˆ–è€…ä»£ç†ä»“åº“è·å¾—å®é™…æ„ä»¶çš„å†…å®¹). Nexus çš„ web ç•Œé¢åŠŸèƒ½ä»‹ç»1.Browse Server Content 1.1 Searchè¿™ä¸ªå°±æ˜¯ç±»ä¼¼ Maven ä»“åº“ä¸Šçš„æœç´¢åŠŸèƒ½ï¼Œå°±æ˜¯ä»ç§æœä¸ŠæŸ¥æ‰¾æ˜¯å¦æœ‰å“ªäº›åŒ…ã€‚æ³¨æ„ï¼š1ï¼‰åœ¨ Search è¿™çº§æ˜¯æ”¯æŒæ¨¡ç³Šæœç´¢çš„ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š 2ï¼‰å¦‚æœè¿›å…¥å…·ä½“çš„ç›®å½•ï¼Œå¥½åƒä¸æ”¯æŒæ¨¡ç³Šæœç´¢ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š 1.2 Browse 1ï¼‰Assetsè¿™æ˜¯èƒ½çœ‹åˆ°æ‰€æœ‰çš„èµ„æºï¼ŒåŒ…å« Jarï¼Œå·²ç»å¯¹ Jar çš„ä¸€äº›æè¿°ä¿¡æ¯ã€‚2ï¼‰Componentsè¿™é‡Œåªèƒ½çœ‹åˆ° Jar åŒ…ã€‚ 2.Server Adminstration And configurationçœ‹åˆ°è¿™ä¸ªé€‰é¡¹çš„å‰ææ˜¯è¦è¿›è¡Œç™»å½•çš„ï¼Œå¦‚ä¸Šé¢å·²ç»ä»‹ç»ç™»é™†æ–¹æ³•ï¼Œå³ä¸Šè§’ç‚¹å‡» â€œSign Inâ€ çš„ç™»å½•æŒ‰é’®ï¼Œè¾“å…¥ admin/admin123, ç™»å½•æˆåŠŸä¹‹åï¼Œå³å¯çœ‹åˆ°æ­¤åŠŸèƒ½ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š 2.1 Blob Storesæ–‡ä»¶å­˜å‚¨çš„åœ°æ–¹ï¼Œåˆ›å»ºä¸€ä¸ªç›®å½•çš„è¯ï¼Œå¯¹åº”æ–‡ä»¶ç³»ç»Ÿçš„ä¸€ä¸ªç›®å½•ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š 2.2 Repositories 1ï¼‰Proxyè¿™é‡Œå°±æ˜¯ä»£ç†çš„æ„æ€ï¼Œä»£ç†ä¸­å¤® Maven ä»“åº“ï¼Œå½“ PC è®¿é—®ä¸­å¤®åº“çš„æ—¶å€™ï¼Œå…ˆé€šè¿‡ Proxy ä¸‹è½½åˆ° Nexus ä»“åº“ï¼Œç„¶åå†ä» Nexus ä»“åº“ä¸‹è½½åˆ° PC æœ¬åœ°ã€‚è¿™æ ·çš„ä¼˜åŠ¿åªè¦å…¶ä¸­ä¸€ä¸ªäººä»ä¸­å¤®åº“ä¸‹æ¥äº†ï¼Œä»¥åå¤§å®¶éƒ½æ˜¯ä» Nexus ç§æœä¸Šè¿›è¡Œä¸‹æ¥ï¼Œç§æœä¸€èˆ¬éƒ¨ç½²åœ¨å†…ç½‘ï¼Œè¿™æ ·å¤§å¤§èŠ‚çº¦çš„å®½å¸¦ã€‚åˆ›å»º Proxy çš„å…·ä½“æ­¥éª¤1 ç‚¹å‡» â€œCreate Repositoriesâ€ æŒ‰é’® 2 é€‰æ‹©è¦åˆ›å»ºçš„ç±»å‹ 3 å¡«å†™è¯¦ç»†ä¿¡æ¯Nameï¼šå°±æ˜¯ä¸ºä»£ç†èµ·ä¸ªåå­—Remote Storage: ä»£ç†çš„åœ°å€ï¼ŒMaven çš„åœ°å€ä¸º: https://repo1.maven.org/maven2/Blob Store: é€‰æ‹©ä»£ç†ä¸‹è½½åŒ…çš„å­˜æ”¾è·¯å¾„ 2ï¼‰HostedHosted æ˜¯å®¿ä¸»æœºçš„æ„æ€ï¼Œå°±æ˜¯æ€ä¹ˆæŠŠç¬¬ä¸‰æ–¹çš„ Jar æ”¾åˆ°ç§æœä¸Šã€‚Hosted æœ‰ä¸‰ç§æ–¹å¼ï¼ŒReleasesã€SNAPSHOTã€MixedReleases: ä¸€èˆ¬æ˜¯å·²ç»å‘å¸ƒçš„ Jar åŒ…Snapshot: æœªå‘å¸ƒçš„ç‰ˆæœ¬Mixedï¼šæ··åˆçš„Hosted çš„åˆ›å»ºå’Œ Proxy æ˜¯ä¸€è‡´çš„ï¼Œå…·ä½“æ­¥éª¤å’Œä¸Šé¢åŸºæœ¬ä¸€è‡´ã€‚å¦‚ä¸‹ï¼š æ³¨æ„äº‹é¡¹ï¼šDeployment Pollcy: éœ€è¦æŠŠç­–ç•¥æ”¹æˆ â€œAllow redeployâ€ã€‚ 3ï¼‰Groupèƒ½æŠŠä¸¤ä¸ªä»“åº“åˆæˆä¸€ä¸ªä»“åº“æ¥ä½¿ç”¨ï¼Œç›®å‰æ²¡ä½¿ç”¨è¿‡ï¼Œæ‰€ä»¥æ²¡åšè¯¦ç»†çš„ç ”ç©¶ã€‚ 2.3 Securityè¿™é‡Œä¸»è¦æ˜¯ç”¨æˆ·ã€è§’è‰²ã€æƒé™çš„é…ç½®ï¼ˆä¸Šé¢å·²ç»æåˆ°äº†åœ¨è¿™é‡Œæ·»åŠ ç”¨æˆ·å’Œè§’è‰²ç­‰ï¼‰ 2.4 SupportåŒ…å«æ—¥å¿—åŠæ•°æ®åˆ†æã€‚ 2.5 Systemä¸»è¦æ˜¯é‚®ä»¶æœåŠ¡å™¨ï¼Œè°ƒåº¦çš„è®¾ç½®åœ°æ–¹è¿™éƒ¨åˆ†ä¸»è¦è®²æ€ä¹ˆå’Œ Maven åšé›†æˆ, é›†æˆçš„æ–¹å¼ä¸»è¦åˆ†ä»¥ä¸‹ç§æƒ…å†µï¼šä»£ç†ä¸­å¤®ä»“åº“ã€Snapshot åŒ…çš„ç®¡ç†ã€Release åŒ…çš„ç®¡ç†ã€ç¬¬ä¸‰æ–¹ Jar ä¸Šä¼ åˆ° Nexus ä¸Šã€‚ ä»£ç†ä¸­å¤®ä»“åº“åªè¦åœ¨ PMO æ–‡ä»¶ä¸­é…ç½®ç§æœçš„åœ°å€ï¼ˆæ¯”å¦‚ http://192.168.1.14:8081ï¼‰å³å¯ï¼Œé…ç½®å¦‚ä¸‹ï¼š 12345678910111213&lt;repositories&gt; &lt;repository&gt; &lt;id&gt;maven-central&lt;/id&gt; &lt;name&gt;maven-central&lt;/name&gt; &lt;url&gt;http://192.168.1.14:8081/repository/maven-central/&lt;/url&gt; &lt;snapshots&gt; &lt;enabled&gt;true&lt;/enabled&gt; &lt;/snapshots&gt; &lt;releases&gt; &lt;enabled&gt;true&lt;/enabled&gt; &lt;/releases&gt; &lt;/repository&gt;&lt;/repositories&gt; Snapshot åŒ…çš„ç®¡ç†1ï¼‰ä¿®æ”¹ Maven çš„ settings.xml æ–‡ä»¶ï¼ŒåŠ å…¥è®¤è¯æœºåˆ¶ 12345&lt;servers&gt; &lt;server&gt;&lt;id&gt;nexus&lt;/id&gt; &lt;username&gt;admin&lt;/username&gt; &lt;password&gt;admin123&lt;/password&gt;&lt;/server&gt; 2ï¼‰ä¿®æ”¹å·¥ç¨‹çš„ Pom æ–‡ä»¶ 123456789101112&lt;distributionManagement&gt; &lt;snapshotRepository&gt; &lt;id&gt;nexus&lt;/id&gt; &lt;name&gt;Nexus Snapshot&lt;/name&gt; &lt;url&gt;http://192.168.1.14:8081/repository/maven-snapshots/&lt;/url&gt; &lt;/snapshotRepository&gt; &lt;site&gt; &lt;id&gt;nexus&lt;/id&gt; &lt;name&gt;Nexus Sites&lt;/name&gt; &lt;url&gt;dav:http://192.168.1.14:8081/repository/maven-snapshots/&lt;/url&gt; &lt;/site&gt;&lt;/distributionManagement&gt; æ³¨æ„äº‹é¡¹: ä¸Šé¢ä¿®æ”¹çš„ Pom æ–‡ä»¶å¦‚æˆªå›¾ä¸­çš„åå­—è¦è·Ÿ / usr/local/maven/conf/settings.xml æ–‡ä»¶ä¸­çš„åå­—ä¸€å®šè¦å¯¹åº”ä¸Šã€‚ 3ï¼‰ä¸Šä¼ åˆ° Nexus ä¸Š 1â€“ é¡¹ç›®ç¼–è¯‘æˆçš„ jar æ˜¯ Snapshot(POM æ–‡ä»¶çš„å¤´éƒ¨) 1234&lt;groupId&gt;com.zhisheng&lt;/groupId&gt;&lt;artifactId&gt;test-nexus&lt;/artifactId&gt;&lt;version&gt;1.0.0-SHAPSHOT&lt;/version&gt;&lt;packaging&gt;jar&lt;/packaging&gt; 2â€“ ä½¿ç”¨ mvn deploy å‘½ä»¤è¿è¡Œå³å¯ï¼ˆè¿è¡Œç»“æœåœ¨æ­¤ç•¥è¿‡ï¼‰ 3â€“ å› ä¸º Snapshot æ˜¯å¿«ç…§ç‰ˆæœ¬ï¼Œé»˜è®¤ä»–æ¯æ¬¡ä¼šæŠŠ Jar åŠ ä¸€ä¸ªæ—¶é—´æˆ³ï¼Œåšä¸ºå†å²å¤‡ä»½ç‰ˆæœ¬ã€‚ Releases åŒ…çš„ç®¡ç†1ï¼‰ä¸ Snapshot å¤§åŒå°å¼‚ï¼Œåªæ˜¯ä¸Šä¼ åˆ°ç§æœä¸Šçš„ Jar åŒ…ä¸ä¼šè‡ªåŠ¨å¸¦æ—¶é—´æˆ³2ï¼‰ä¸ Snapshot é…ç½®ä¸åŒçš„åœ°æ–¹ï¼Œå°±æ˜¯å·¥ç¨‹çš„ PMO æ–‡ä»¶ï¼ŒåŠ å…¥ repository é…ç½® 1234567&lt;distributionManagement&gt; &lt;repository&gt; &lt;id&gt;nexus&lt;/id&gt; &lt;name&gt;Nexus Snapshot&lt;/name&gt; &lt;url&gt;http://192.168.1.14:8081/repository/maven-releases/&lt;/url&gt; &lt;/repository&gt;&lt;/distributionManagement&gt; 3ï¼‰æ‰“åŒ…çš„æ—¶å€™éœ€è¦æŠŠ Snapshot å»æ‰ 1234&lt;groupId&gt;com.zhisheng&lt;/groupId&gt;&lt;artifactId&gt;test-nexus&lt;/artifactId&gt;&lt;version&gt;1.0.0&lt;/version&gt;&lt;packaging&gt;jar&lt;/packaging&gt; | ç¬¬ä¸‰æ–¹ Jar ä¸Šä¼ åˆ° Nexus[root@master-node src]# mvn deploy:deploy-file -DgroupId=org.jasig.cas.client -DartifactId=cas-client-core -Dversion=3.1.3 -Dpackagæ³¨æ„äº‹é¡¹ï¼š-DrepositoryId=nexus å¯¹åº”çš„å°±æ˜¯ Maven ä¸­ settings.xml çš„è®¤è¯é…çš„åå­—ã€‚ æœ€åæ­å»ºçš„æ—¶å€™æ˜¯å‚è€ƒç½‘ä¸Šåšå®¢ï¼Œå†™ç¯‡å®Œæ•´çš„åšå®¢å†å›é¦ˆç»™ç½‘ä¸Šã€‚è½¬è½½è¯·æ³¨æ˜åœ°å€ï¼šhttp://www.54tianzhisheng.cn/2017/10/14/Nexus3-Maven/","tags":[{"name":"Maven","slug":"Maven","permalink":"http://yoursite.com/tags/Maven/"}]},{"title":"Google Guava ç¼“å­˜å®ç°æ¥å£çš„é™æµ","date":"2017-09-22T16:00:00.000Z","path":"2017/09/23/Guava-limit/","text":"é¡¹ç›®èƒŒæ™¯æœ€è¿‘é¡¹ç›®ä¸­éœ€è¦è¿›è¡Œæ¥å£ä¿æŠ¤ï¼Œé˜²æ­¢é«˜å¹¶å‘çš„æƒ…å†µæŠŠç³»ç»Ÿæå´©ï¼Œå› æ­¤éœ€è¦å¯¹ä¸€ä¸ªæŸ¥è¯¢æ¥å£è¿›è¡Œé™æµï¼Œä¸»è¦çš„ç›®çš„å°±æ˜¯é™åˆ¶å•ä½æ—¶é—´å†…è¯·æ±‚æ­¤æŸ¥è¯¢çš„æ¬¡æ•°ï¼Œä¾‹å¦‚ 1000 æ¬¡ï¼Œæ¥ä¿æŠ¤æ¥å£ã€‚å‚è€ƒäº† å¼€æ¶›çš„åšå®¢èŠèŠé«˜å¹¶å‘ç³»ç»Ÿé™æµç‰¹æŠ€ ï¼Œå­¦ä¹ äº†å…¶ä¸­åˆ©ç”¨ Google Guava ç¼“å­˜å®ç°é™æµçš„æŠ€å·§ï¼Œåœ¨ç½‘ä¸Šä¹ŸæŸ¥åˆ°äº†å¾ˆå¤šå…³äº Google Guava ç¼“å­˜çš„åšå®¢ï¼Œå­¦åˆ°äº†å¥½å¤šï¼Œæ¨èä¸€ä¸ªåšå®¢æ–‡ç« ï¼šhttp://ifeve.com/google-guava-cachesexplained/, å…³äº Google Guava ç¼“å­˜çš„æ›´å¤šç»†èŠ‚æˆ–è€…æŠ€æœ¯ï¼Œè¿™ç¯‡æ–‡ç« è®²çš„å¾ˆè¯¦ç»†ï¼›è¿™é‡Œæˆ‘ä»¬å¹¶ä¸æ˜¯ç”¨ç¼“å­˜æ¥ä¼˜åŒ–æŸ¥è¯¢ï¼Œè€Œæ˜¯åˆ©ç”¨ç¼“å­˜ï¼Œå­˜å‚¨ä¸€ä¸ªè®¡æ•°å™¨ï¼Œç„¶åç”¨è¿™ä¸ªè®¡æ•°å™¨æ¥å®ç°é™æµã€‚ æ•ˆæœå®éªŒ1234567static LoadingCache&lt;Long, AtomicLong&gt; count = CacheBuilder.newBuilder().expireAfterWrite(1, TimeUnit.SECONDS).build(new CacheLoader&lt;Long, AtomicLong&gt;() &#123; @Override public AtomicLong load(Long o) throws Exception &#123; //System.out.println(\"Load call!\"); return new AtomicLong(0L); &#125; &#125;); ä¸Šé¢ï¼Œæˆ‘ä»¬é€šè¿‡ CacheBuilder æ¥æ–°å»ºä¸€ä¸ª LoadingCache ç¼“å­˜å¯¹è±¡ countï¼Œç„¶åè®¾ç½®å…¶æœ‰æ•ˆæ—¶é—´ä¸º 1 ç§’ï¼Œå³æ¯ 1 ç§’é’Ÿåˆ·æ–°ä¸€æ¬¡ï¼›ç¼“å­˜ä¸­ï¼Œkey ä¸ºä¸€ä¸ª long å‹çš„æ—¶é—´æˆ³ç±»å‹ï¼Œvalue æ˜¯ä¸€ä¸ªè®¡æ•°å™¨ï¼Œä½¿ç”¨åŸå­æ€§çš„ AtomicLong ä¿è¯è‡ªå¢å’Œè‡ªå‡æ“ä½œçš„åŸå­æ€§ï¼Œ æ¯æ¬¡æŸ¥è¯¢ç¼“å­˜æ—¶å¦‚æœä¸èƒ½å‘½ä¸­ï¼Œå³æŸ¥è¯¢çš„æ—¶é—´æˆ³ä¸åœ¨ç¼“å­˜ä¸­ï¼Œåˆ™é‡æ–°åŠ è½½ç¼“å­˜ï¼Œæ‰§è¡Œ load å°†å½“å‰çš„æ—¶é—´æˆ³çš„è®¡æ•°å€¼åˆå§‹åŒ–ä¸º 0ã€‚è¿™æ ·å¯¹äºæ¯ä¸€ç§’çš„æ—¶é—´æˆ³ï¼Œèƒ½è®¡ç®—è¿™ä¸€ç§’å†…æ‰§è¡Œçš„æ¬¡æ•°ï¼Œä»è€Œè¾¾åˆ°é™æµçš„ç›®çš„ï¼›è¿™æ˜¯è¦æ‰§è¡Œçš„ä¸€ä¸ª getCounter æ–¹æ³•ï¼š 123456public class Counter &#123; static int counter = 0; public static int getCounter() throws Exception&#123; return counter++; &#125;&#125; ç°åœ¨æˆ‘ä»¬åˆ›å»ºå¤šä¸ªçº¿ç¨‹æ¥æ‰§è¡Œè¿™ä¸ªæ–¹æ³•ï¼š 12345678910111213141516171819202122public class Test &#123; public static void main(String args[]) throws Exception &#123; for(int i = 0;i&lt;100;i++) &#123; new Thread()&#123; @Override public void run() &#123; try &#123; System.out.println(Counter.getCounter()); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; &#125; &#125;.start(); &#125; &#125;&#125; è¿™æ ·æ‰§è¡Œçš„è¯ï¼Œæ‰§è¡Œç»“æœå¾ˆç®€å•ï¼Œå°±æ˜¯å¾ˆå¿«åœ°æ‰§è¡Œè¿™ä¸ª for å¾ªç¯ï¼Œè¿…é€Ÿæ‰“å° 0 åˆ° 99 æŠ˜ 100 ä¸ªæ•°ï¼Œä¸å†è´´å‡ºã€‚è¿™é‡Œçš„ for å¾ªç¯æ‰§è¡Œ 100 ä¸ªè¿›ç¨‹æ—¶é—´æ˜¯å¾ˆå¿«çš„ï¼Œé‚£ä¹ˆç°åœ¨æˆ‘ä»¬è¦é™åˆ¶æ¯ç§’åªèƒ½æœ‰ 10 ä¸ªçº¿ç¨‹æ¥æ‰§è¡Œ getCounter() æ–¹æ³•ï¼Œè¯¥æ€ä¹ˆåŠå‘¢ï¼Œä¸Šé¢è®²çš„é™æµæ–¹æ³•å°±æ´¾ä¸Šç”¨åœºäº†ï¼š 12345678910111213141516171819202122public class Counter &#123; static LoadingCache&lt;Long, AtomicLong&gt; count = CacheBuilder.newBuilder().expireAfterWrite(1, TimeUnit.SECONDS).build(new CacheLoader&lt;Long, AtomicLong&gt;() &#123; @Override public AtomicLong load(Long o) throws Exception &#123; System.out.println(\"Load call!\"); return new AtomicLong(0L); &#125; &#125;); static long limits = 10; static int counter = 0; public static synchronized int getCounter() throws Exception&#123; while (true) &#123; //è·å–å½“å‰çš„æ—¶é—´æˆ³ä½œä¸ºkey Long currentSeconds = System.currentTimeMillis() / 1000; if (count.get(currentSeconds).getAndIncrement() &gt; limits) &#123; continue; &#125; return counter++; &#125; &#125;&#125; è¿™æ ·ä¸€æ¥ï¼Œå°±å¯ä»¥é™åˆ¶æ¯ç§’çš„æ‰§è¡Œæ•°äº†ã€‚å¯¹äºæ¯ä¸ªçº¿ç¨‹ï¼Œè·å–å½“å‰æ—¶é—´æˆ³ï¼Œå¦‚æœå½“å‰æ—¶é—´ (å½“å‰è¿™ 1 ç§’) å†…æœ‰è¶…è¿‡ 10 ä¸ªçº¿ç¨‹æ­£åœ¨æ‰§è¡Œï¼Œé‚£ä¹ˆè¿™ä¸ªè¿›ç¨‹ä¸€ç›´åœ¨è¿™é‡Œå¾ªç¯ï¼Œç›´åˆ°ä¸‹ä¸€ç§’ï¼Œæˆ–è€…æ›´é åçš„æ—¶é—´ï¼Œé‡æ–°åŠ è½½ï¼Œæ‰§è¡Œ loadï¼Œå°†æ–°çš„æ—¶é—´æˆ³çš„è®¡æ•°å€¼é‡æ–°ä¸º 0ã€‚æ‰§è¡Œç»“æœï¼šæ¯ç§’æ‰§è¡Œ 11 ä¸ªï¼ˆå› ä¸ºä» 0 å¼€å§‹ï¼‰ï¼Œæ¯ä¸€ç§’ä¹‹åï¼Œload æ–¹æ³•ä¼šæ‰§è¡Œä¸€æ¬¡ï¼› 12345678910111213141516171819202122232425ä¸ºäº†æ›´åŠ ç›´è§‚ï¼Œæˆ‘ä»¬å¯ä»¥è®©æ¯ä¸ªforå¾ªç¯sleepä¸€æ®µæ—¶é—´ï¼špublic class Test &#123; public static void main(String args[]) throws Exception &#123; for(int i = 0;i&lt;100;i++) &#123; new Thread()&#123; @Override public void run() &#123; try &#123; System.out.println(Counter.getCounter()); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; &#125; &#125;.start(); Thread.sleep(100); &#125; &#125;&#125; åœ¨ä¸Šè¿°è¿™æ ·çš„æƒ…å†µä¸‹ï¼Œä¸€ä¸ªçº¿ç¨‹å¦‚æœé‡åˆ°å½“å‰æ—¶é—´æ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹è¶…è¿‡ limit å€¼å°±ä¼šä¸€ç›´åœ¨ while å¾ªç¯ï¼Œè¿™æ ·ä¼šæµªè´¹å¤§é‡çš„èµ„æºï¼Œæˆ‘ä»¬åœ¨åšé™æµçš„æ—¶å€™ï¼Œå¦‚æœå‡ºç°è¿™ç§æƒ…å†µï¼Œå¯ä»¥ä¸è¿›è¡Œ while å¾ªç¯ï¼Œè€Œæ˜¯ç›´æ¥æŠ›å‡ºå¼‚å¸¸æˆ–è€…è¿”å›ï¼Œæ¥æ‹’ç»è¿™æ¬¡æ‰§è¡Œï¼ˆæŸ¥è¯¢ï¼‰ï¼Œè¿™æ ·ä¾¿å¯ä»¥èŠ‚çœèµ„æºã€‚ æœ€åæœ¬ç¯‡æ–‡ç« åœ°å€ï¼š http://www.54tianzhisheng.cn/2017/09/23/Guava-limit/","tags":[{"name":"Guava","slug":"Guava","permalink":"http://yoursite.com/tags/Guava/"}]},{"title":"é¢è¯•è¿‡é˜¿é‡Œç­‰äº’è”ç½‘å¤§å…¬å¸ï¼Œæˆ‘çŸ¥é“äº†è¿™äº›å¥—è·¯","date":"2017-09-16T16:00:00.000Z","path":"2017/09/17/Interview-summary/","text":"å‰é¢æ„Ÿè°¢ä¸€æ³¢å› ä¸ºçœ‹åˆ°æ˜é‡‘åœ¨åšç§‹æ‹›æ±‚èŒå¾æ–‡å¤§èµ›ï¼ŒèµåŠ©å•†ä¹Ÿæœ‰ç‰›å®¢ç½‘ï¼Œè‡ªå·±å‰æ®µæ—¶é—´ä¹Ÿç¨å¾®å†™äº†ç¯‡åšå®¢æ€»ç»“æˆ‘çš„å¤§å­¦ç”Ÿæ´»ï¼Œé‚£äº›å¹´æˆ‘çœ‹è¿‡çš„ä¹¦ â€”â€” è‡´æ•¬æˆ‘çš„å¤§å­¦ç”Ÿæ´» â€”â€” Say Good Bye ï¼ åšå®¢ä¸­ç¨å¾®ç®€å•çš„ä»‹ç»äº†ä¸‹è‡ªå·±çš„æ±‚èŒï¼Œé‡ç‚¹æ˜¯æ¨èäº†ä¸‹æˆ‘è‡ªå·±çœ‹è¿‡çš„é‚£äº›ä¹¦ç±ï¼Œå¯¹æˆ‘å¸®åŠ©çœŸçš„å¾ˆå¤§ã€‚ å¦‚ä»Šå€Ÿè¿™ä¹ˆä¸ªæœºä¼šï¼Œå›é¦ˆæ˜é‡‘å’Œç‰›å®¢ç½‘ï¼Œæƒ³æƒ³è‡ªå·±è¿™ä¸€å¹´åœ¨æ˜é‡‘ä¹Ÿå†™è¿‡ä¸å°‘æ–‡ç« ï¼Œä» 0 ä¸ªç²‰ä¸åˆ°å¦‚ä»Šè¢« 11047 äººï¼ˆæˆªæ­¢å†™æ­¤ç¯‡æ–‡ç« æ—¶ï¼‰å…³æ³¨ï¼Œæœ‰ç‚¹å°æ¿€åŠ¨ï¼Œç«Ÿç„¶è¿™ä¹ˆå¤šç²‰ï¼Œä¹Ÿä¸çŸ¥é“çœŸæ­£æ´»è·ƒçš„ç”¨æˆ·æœ‰å¤šå°‘ã€‚ä¸ç®¡æ€æ ·ï¼Œè¿™ä¸€å¹´åœ¨æ˜é‡‘è¿˜æ˜¯æ”¶è·å¾ˆå¤šçš„ï¼Œä¸ä»…å¯ä»¥é˜…è¯»åˆ°å¾ˆå¤šå¤§ç¥çš„æ–‡ç« ï¼Œå­¦ä¹ æ–°çš„çŸ¥è¯†ï¼Œè€Œä¸”è¿˜é‡åˆ°äº†å¥½å‡ ä¸ªä¸é”™çš„å“¥ä»¬ï¼Œå¦‚ä»Šå¹³å¸¸ä¹Ÿæœ‰å’Œä»–ä»¬äº¤æµï¼Œæ¯”å¦‚ ï¼šèŠ‹é“æºç  è€å“¥äººå°±å¾ˆä¸é”™ï¼Œåœ¨ä¸Šæµ·è¿˜å’Œè€å“¥è§è¿‡é¢ï¼Œåƒè¿‡é¥­ï¼Œå¹³å¸¸å¯¹æˆ‘å¸®åŠ©ä¹Ÿå¾ˆå¤§ï¼Œä¼šæ¨èä¸€äº›å¾ˆæœ‰ç”¨çš„ä¹¦ç±ç»™æˆ‘çœ‹ã€‚æ¬¢è¿å¤§å®¶å…³æ³¨ä»–çš„åšå®¢ï¼šèŠ‹é“æºç çš„åšå®¢ ï¼Œé‡Œé¢æœ‰å¥½å‡ ç³»åˆ—çš„æºç åˆ†æåšå®¢æ–‡ç« å‘¢ã€‚è‡³äºç‰›å®¢ç½‘ï¼Œæˆ‘å°±æ›´æ˜¯è€ç”¨æˆ·äº†ï¼Œå°è±¡ä¸­å¥½åƒæ˜¯å¤§ä¸€çš„æ—¶å€™æ³¨å†Œçš„ï¼Œé‚£æ—¶æœ‰ç©ºçš„è¯å°±ä¼šå»ä¸Šé¢åˆ·å‡ é“åŸºç¡€é¢˜ï¼Œå†™å†™é¢˜è§£ï¼ŒåšæŒäº†å¥½ä¹…äº†ï¼Œå¦‚ä»Šæ—©å·²æ˜¯çº¢åäº†ã€‚ï¼ˆå…¶å®æ˜¯æ°´å‡ºæ¥çš„ï¼Œå“ˆå“ˆï¼‰åœ¨ç‰›å®¢ç½‘é‡åˆ°çš„å¤§ç¥ä¹Ÿæ˜¯è¶…å¤šï¼Œå¥½å¤šæœ‹å‹å‡ ä¹éƒ½æ˜¯é€šè¿‡ç‰›å®¢ç½‘è®¤è¯†çš„ï¼Œé‚£æ—¶æ—©çš„æ—¶å€™ä¸€èµ·åœ¨ä¸€ç¾¤è®¨è®ºé—®é¢˜ï¼Œåˆ«æé‚£åœºé¢äº†ï¼Œéœ‡æƒŠï¼Œæˆ‘ç­‰å¼±æ¸£ç‘Ÿç‘Ÿå‘æŠ–ã€‚æ„Ÿè°¢å¶ç¥ï¼Œå·¦ç¥ï¼Œç‰›å¦¹ï¼ è¯´ç€è¯´ç€ï¼Œå¥½åƒåé¢˜äº†ã€‚ æ­£å¼è¿›å…¥è¯é¢˜å§ï¼ æ­£æ–‡å¼€å§‹æœ¬ç¯‡ç§‹æ‹›æ±‚èŒå¾æ–‡ä¸»è¦åˆ†äº«å¦‚ä¸‹å‡ æ–¹é¢ï¼šæ‹›è˜èŒä½éœ€æ±‚å¥—è·¯ ã€æ‹›è˜é¢è¯•çš„å¥—è·¯ã€ç®€å†æ’°å†™å¥—è·¯ã€ç®€å†æŠ•é€’å¥—è·¯ ã€æ‰¾å·¥ä½œç»å† ã€è‡ªå·±é¢è¯•é¢ç» ã€å®ä¹ æ„Ÿæ‚Ÿã€ä¹¦ç±æ¨è ã€ä¼˜ç§€ç½‘ç«™æ¨è ã€ä¼˜ç§€åšå®¢æ¨è ã€æ±‚èŒèµ„æ–™æ”¾é€ã€‚ æ‹›è˜èŒä½éœ€æ±‚å¥—è·¯æ‘˜ä¸¾ä¸‹å‡ ä¸ªå…¬å¸çš„æ‹›è˜éœ€æ±‚ï¼šï¼ˆfrom lagouï¼‰ 1ã€Javaå¼€å‘æ ¡æ‹›ç”Ÿ( æœ‰èµ ) èŒä½è¯±æƒ‘ï¼šç¦åˆ©å¥½å¾…é‡ä½³ï¼ŒæŠ€æœ¯æ°›å›´æµ“ï¼Œæœ‰å¤§ç‰›å¸¦æˆé•¿å¿«èŒä½æè¿°ï¼š æœ‰èµ2018æ ¡æ‹›å®˜æ–¹ç½‘ç”³åœ°å€ï¼ˆè¯·åœ¨å®˜ç½‘æŠ•é€’ï¼Œå‹¿ç›´æ¥åœ¨Lagouä¸ŠæŠ•é€’ï¼‰ï¼šhttps://job.youzan.com/campuså²—ä½èŒè´£ æˆ‘ä»¬æ‹¥æœ‰ä¸–ç•Œçº§çš„ SaaS ç”µå•†è§£å†³æ–¹æ¡ˆï¼Œæ¯å¤©å¤„ç†å‡ ç™¾ä¸‡è®¢å•ã€å‡ äº¿æ¡æ¶ˆæ¯ï¼Œå¹¶ä¸”é‡çº§ä¸æ–­æ”€å‡ï¼› æˆ‘ä»¬å¼€æ”¾äº†æœ‰èµäº‘ï¼Œè¿æ¥äº†æ•°åä¸‡å¼€å‘è€…ï¼Œå¤§å¤§æå‡äº† SaaS å¯¹å•†å®¶äº§ç”Ÿçš„ä»·å€¼ï¼› æˆ‘ä»¬æ­£åœ¨æ–°é›¶å”®çš„æ½®æµä¸­æ¿€æµå‹‡è¿›ã€å¼€ç–†æ‹“åœŸï¼Œç”¨äº§å“æŠ€æœ¯æ’¬åŠ¨å·¨å¤§çš„å¸‚åœºï¼› è€Œä½ çš„å·¥ä½œï¼Œå°±æ˜¯å‚ä¸è¿™äº›å¤§æµé‡ç³»ç»Ÿçš„ç ”å‘ï¼Œå“ªæ€•æå‡1%çš„æ€§èƒ½å’Œç¨³å®šæ€§éƒ½å°†æ˜¯æ¿€åŠ¨äººå¿ƒçš„æ—¶åˆ»ã€‚ å²—ä½è¦æ±‚ 2018å±Šæœ¬ç§‘åŠä»¥ä¸Šå­¦å†åº”å±Šæ¯•ä¸šç”Ÿï¼Œè®¡ç®—æœºæˆ–è€…è½¯ä»¶å·¥ç¨‹ç›¸å…³ä¸“ä¸šï¼› å…·å¤‡æ‰å®çš„è®¡ç®—æœºåŸºç¡€çŸ¥è¯†ï¼Œè‡³å°‘ç†Ÿç»ƒä½¿ç”¨ä¸€é—¨ä¸»æµå¼€å‘è¯­è¨€ï¼› ç§¯æå‚ä¸å¼€å‘å®è·µï¼Œå¦‚æœæ‹¥æœ‰å¼•ä»¥ä¸ºè±ªçš„é¡¹ç›®ç»å†åˆ™åŠ åˆ†ï¼› çƒ­è¡·æ•°æ®ç»“æ„ä¸ç®—æ³•ï¼Œå¦‚æœä¸€ä¸å°å¿ƒåœ¨ ACM èµ›åœºæ‘˜è¿‡é‡‘ï¼Œå¤ºè¿‡é“¶åˆ™åŠ åˆ†ï¼› èƒ½åœ¨ Linux ä¸Šå†™ä»»ä½•è„šæœ¬ï¼Œæ¯”ç‹è€…è£è€€ä¸Šæ‰‹è¿˜å¿«åˆ™åŠ åˆ†ï¼› å¿«é€Ÿå­¦ä¹ æ–°é²œäº‹ç‰©ï¼Œè‡ªæˆ‘é©±åŠ¨è¿½æ±‚å“è¶Šï¼Œç§¯æåº”å¯¹é—®é¢˜å’Œå˜åŒ–ã€‚ 2ã€äº¬ä¸œå±…å®¶ç”Ÿæ´»äº‹ä¸šéƒ¨-æ±½è½¦ç”¨å“æ‹›è˜å®ä¹ ç”Ÿï¼ˆ2018å±Šï¼‰ èŒä½è¯±æƒ‘ï¼šäº¬ä¸œå•†åŸ èŒä½æè¿°ï¼šäº¬ä¸œå•†åŸ-æ±½è½¦ç”¨å“éƒ¨é—¨æ‹›è˜å®ä¹ ç”Ÿ æˆ‘ä»¬éœ€è¦è¿™æ ·çš„ä½ ï¼š 2018å±Šæ¯•ä¸šç”Ÿï¼ˆæœ¬ç§‘æˆ–ç¡•å£«å‡å¯ï¼‰ å­¦ä¹ èƒ½åŠ›å¼º æ‹…å½“ã€æŠ—å‹ã€æ¥å—å˜åŒ– èƒ½é•¿æœŸå®ä¹ ï¼ˆä¼˜ç§€è€…æœ‰è½¬æ­£æœºä¼šï¼‰ éœ€è¦ä¸€ä¸ªå¤§çš„å¹³å°æ¥å±•ç¤ºå’Œå‘æŒ¥è‡ªå·±çš„èƒ½åŠ› ä½ å°†æ”¶è·ï¼š é‡æ–°è®¤è¯†å¿«é€Ÿæˆé•¿çš„è‡ªå·± ä¸€ä»½ä¸–ç•Œ500å¼ºçš„å®ä¹ ç»å† ä¸€ç¾¤ä¼˜ç§€çš„ä¼™ä¼´ 3ã€çˆ±å¥‡è‰º Java å®ä¹ ç”Ÿ - æ¸¸æˆäº‹ä¸šéƒ¨ è¦æ±‚ï¼šè‡³å°‘ 6 ä¸ªæœˆä»¥ä¸Šæ¯å‘¨ä¸‰å¤©ä»¥ä¸Šå®ä¹ ã€‚ æœ¬ç§‘ä»¥ä¸Šå­¦å†ï¼Œè®¡ç®—æœºã€è½¯ä»¶å·¥ç¨‹ç›¸å…³ä¸“ä¸šï¼› åŸºç¡€æ‰å®ï¼Œç†Ÿæ‚‰ Java ç¼–ç¨‹ï¼Œç†Ÿæ‚‰ Springã€MyBatis ç­‰æ¡†æ¶ä¼˜å…ˆï¼› ç†Ÿæ‚‰ SQL è¯­å¥ï¼Œç†Ÿç»ƒä½¿ç”¨ MySQL æ•°æ®åº“ï¼› è‰¯å¥½çš„æ²Ÿé€šã€è¡¨è¾¾ã€åè°ƒèƒ½åŠ›ï¼Œå¯Œæœ‰æ¿€æƒ…ï¼Œå­¦ä¹ èƒ½åŠ›å¼ºï¼› æœ‰ GitHub è´¦å·æˆ–è€…æŠ€æœ¯åšå®¢ä¼˜å…ˆï¼› çƒ­çˆ±æ¸¸æˆè¡Œä¸šä¼˜å…ˆã€‚ è¿™é‡Œéšä¾¿æ‰¾äº†ä¸‰ä¸ªï¼Œä»æ‹›è˜éœ€æ±‚é‡Œçœ‹ï¼Œå¥½å¤šå…¬å¸ç›®å‰æ‹›è˜çš„è¯åœ¨æ‹›è˜éœ€æ±‚ä¸­å¹¶ä¸æ€ä¹ˆä¼šå†™çš„å¾ˆæ¸…æ¥šï¼Œæœ‰çš„ä¹Ÿä¸ä¼šè¯´æ˜è¦æ±‚çš„æŠ€æœ¯æ ˆï¼Œè¿™å…¶å®æœ‰æ—¶ä¼šå¯¹æˆ‘ä»¬è¿™ç§æ–°äººæ¥è¯´ï¼Œæœ‰ç‚¹ä¸å¥½çš„ï¼Œè¿™æ ·çš„è¯æˆ‘ä»¬å°±æ²¡æœ‰æ˜ç¡®çš„ç›®æ ‡å»å¤ä¹ ï¼Œè¿˜æœ‰å°±æ˜¯ä¸€äº›åŠ åˆ†é¡¹ï¼Œå…¶å®ä¹Ÿæ˜¯æœ‰ç‚¹å¸®åŠ©çš„ã€‚å°±æ¯”å¦‚æœ‰äº›æ‹›è˜ä¸Šé¢çš„è¯´æœ‰ä¼˜ç§€åšå®¢å’Œ GitHub è€…ä¼˜å…ˆï¼Œè¿™ä¸¤ç‚¹çš„è¯æˆ‘ä»¬å…¶å®å¯ä»¥åœ¨å¤§å­¦æ…¢æ…¢ç§¯ç´¯å‡ºæ¥çš„ï¼Œå¯¹é¢è¯•ç¡®å®æœ‰å¸®åŠ©ï¼Œæˆ‘å¥½äº›é¢è¯•æœºä¼šéƒ½æ˜¯é è¿™ä¸¤ä¸ªçš„ã€‚è¿˜æœ‰å¥—è·¯å°±æ˜¯ï¼Œåˆ«å…‰ä¿¡ä»–è¿™æ‹›è˜éœ€æ±‚ï¼Œè¿›å»é¢è¯•å¯èƒ½å°±ä¸é—®ä½ è¿™äº›æ–¹é¢çš„é—®é¢˜äº†ï¼Œé‚£äº›å…¬å¸å‡ ä¹éƒ½æ˜¯è¿™ä¹ˆä¸ªå¥—è·¯ï¼šé¢è¯•é€ ç«ç®­ï¼Œå…¥èŒæ‹§èºä¸ ï¼ è¿›å»å…¬å¸ä¹‹å‰å¯èƒ½éœ€è¦ä½ æ‡‚å¾ˆå¤šä¸œè¥¿ï¼Œä½†æ˜¯è¿›å»çš„è¯è¿˜åªæ˜¯ä¸“é—¨åšä¸€æ–¹é¢çš„ä¸œè¥¿ã€‚ä¸ç®¡æ€æ ·ï¼Œå¦‚æœä½ æœ‰æœºä¼šè¿›å»å¤§å…¬å¸çš„è¯ï¼ˆè€Œä¸”é€‚åˆå»ï¼‰ï¼Œè¿˜æ˜¯å»å¤§å…¬å¸å§ï¼Œå‡ºæ¥å¤§å‚å…‰ç¯ä¸å°‘ã€‚ è®¤çœŸè€å¿ƒåœ°æ‹§èºä¸é’‰ï¼Œè¯´ä¸å®šæœ‰æœºä¼šå»é€ å¤§ç«ç®­â€”â€”æ­£è§„å¤§å…¬å¸çš„èŠ‚å¥ã€‚ çŸ­æ—¶é—´æŠŠèºä¸æ‹§å‡ºèŠ±ï¼Œè¯´ä¸å®šæœ‰æœºä¼šé€ å°ç«ç®­â€”â€”ä¸Šå‡ä¸­åˆ›ä¸šå…¬å¸çš„èŠ‚å¥ã€‚ æ‹›è˜é¢è¯•çš„å¥—è·¯å‚è€ƒï¼šhttps://mp.weixin.qq.com/s/qRwDowetBkJqpeMeAZsIpA ä¸€ä¸ªåœ¨æ˜é‡‘ä¸Šè®¤è¯†çš„è€å“¥ï¼Œåœ¨äº¬ä¸œå·¥ä½œï¼Œå†™çš„ä¸é”™ï¼Œå¹²è„†åˆ†äº«ä¸‹ã€‚å¤§å®¶å¯ä»¥å»çœ‹ä»–çš„åšå®¢ï¼Œhttp://mindwind.me/ å½“æ—¶æˆ‘æ±‚èŒçš„æ—¶å€™é€šè¿‡ä½œè€…åšå®¢ä¹Ÿå­¦åˆ°ä¸å°‘ä¸œè¥¿ã€‚ ä¸€æ¬¡é›†ä¸­çš„æ‰©æ‹›éœ€æ±‚ï¼Œæœ‰ç‚¹åƒæ¯å¹´ä¸€åº¦çš„æ™‹å‡è¯„å®¡ï¼Œéƒ½éœ€è¦å¯¹å¤§é‡çš„å€™é€‰äººè¿›è¡Œå®šçº§è¯„å®¡ï¼Œå› ä¸ºæ¯ä¸€ä¸ªæ–°æ‹›è˜çš„äººå‘˜éƒ½ä¼šå¯¹å…¶æœ‰ä¸€ä¸ªå®šçº§çš„è¿‡ç¨‹ã€‚ ç»´åº¦ï¼š é€šç”¨èƒ½åŠ›ï¼šè€ƒå¯Ÿå…¶æ²Ÿé€šè¡¨è¾¾ã€å­¦ä¹ æˆé•¿ç­‰ ä¸“ä¸šçŸ¥è¯†ï¼šè€ƒå¯Ÿå…¶çŸ¥è¯†çš„æŒæ¡ã€æ·±åº¦ã€å¹¿åº¦ç­‰ ä¸“ä¸šèƒ½åŠ›ï¼šè€ƒå¯Ÿå…¶æŠ€èƒ½åº”ç”¨çš„èƒ½åŠ›å’Œç»“æœ å·¥ä½œä¸šç»©ï¼šè€ƒå¯Ÿå…¶å·¥ä½œæˆæœã€äº§å‡ºã€åˆ›æ–°ç‚¹ç­‰ ä»·å€¼è§‚ï¼šè€ƒå¯Ÿå…¶è®¤çŸ¥ã€ç†è§£ã€è¡Œä¸ºç­‰ æ•´ä¸ªé¢è¯•è¿‡ç¨‹ä¼šåŒ…æ‹¬ä¸‹é¢å‡ ä¸ªéƒ¨åˆ†ï¼š è‡ªæˆ‘ä»‹ç»ä¸€å¼€å§‹çš„ç®€çŸ­è‡ªæˆ‘ä»‹ç»ï¼Œè€ƒå¯Ÿç‚¹åœ¨äºå¯¹è‡ªæˆ‘çš„æ€»ç»“ã€å½’çº³å’Œè®¤çŸ¥èƒ½åŠ›ã€‚è§‚å¯Ÿå…¶è¡¨è¾¾çš„é€»è¾‘æ€§å’Œæ¸…æ™°æ€§ï¼Œæœ‰ä¸ªæ•´ä½“å°è±¡ã€‚ é¡¹ç›®ç»å†ä¸€èˆ¬æˆ‘ä¸ä¼šä¸“é—¨é—®ä¸€äº›æ¯”è¾ƒæ­»çš„ä¸“ä¸šæŠ€æœ¯ç‚¹ä¹‹ç±»çš„çŸ¥è¯†ï¼Œéƒ½æ˜¯å¥—åœ¨å€™é€‰äººçš„é¡¹ç›®ç»å†å’Œè¿‡å¾€ç»éªŒä¸­ç©¿æ’ã€‚é€šè¿‡å…¶æè¿°ï¼Œæ¥åˆ¤æ–­å…¶æŒæ¡çŸ¥è¯†ç‚¹çš„èŒƒå›´å’Œæ·±åº¦ï¼Œä»¥åŠåœ¨å®é™…çš„æ¡ˆä¾‹ä¸­å¦‚ä½•è¿ç”¨è¿™äº›çŸ¥è¯†ä¸æŠ€èƒ½è§£å†³çœŸæ­£çš„é—®é¢˜çš„ã€‚ æ‰€ä»¥ï¼Œä¸ä¼šæœ‰æ‰€è°“çš„é¢˜åº“ã€‚æ¯ä¸€ä¸ªæˆ‘å†³å®šé¢è¯•çš„å€™é€‰äººï¼Œéƒ½æ˜¯æå‰ç»†è¯»å…¶ç®€å†ï¼Œæç‚¼åœºæ™¯å’Œå‘æ˜éœ€è¦é—®çš„é—®é¢˜ï¼Œç›¸å½“äºé¢è¯•å‰æœ‰ä¸ªäºŒä¸‰ååˆ†é’Ÿçš„å¤‡è¯¾è¿‡ç¨‹ï¼Œç»„ç»‡å¥½é¢è¯•æ—¶çš„äº¤äº’è¿‡ç¨‹ä¸åœºæ™¯ï¼Œä»¥é¡ºåˆ©è¾¾åˆ°æˆ‘æƒ³è¦äº†è§£çš„ç‚¹ã€‚ å›¢é˜Ÿåˆä½œé€šå¸¸è¿˜ä¼šé—®å€™é€‰äººå…¶æ‰€åœ¨å›¢é˜Ÿä¸­çš„è§’è‰²ï¼Œä»–ä»¬çš„å·¥ä½œæ¨¡å¼ã€åä½œæ–¹å¼ï¼Œå¹¶ç»™å‡ºä¸€äº›çœŸå®çš„åœºæ™¯åŒ–æ¡ˆä¾‹è§‚å¯Ÿå…¶åº”å¯¹çš„ååº”ã€‚è¯„ä»·ä¸€ä¸‹å…³äºä»–å‘¨å›´çš„åŒäº‹ã€ä¸‹å±æˆ–é¢†å¯¼ï¼Œäº†è§£ä»–åœ¨å›¢é˜Ÿä¸­çš„è‡ªæˆ‘å®šä½ã€‚è¿™é‡Œçš„è€ƒå¯Ÿç‚¹æ˜¯æ²Ÿé€šåä½œæ–¹é¢çš„é€šç”¨èƒ½åŠ›ã€‚ å­¦ä¹ æˆé•¿è¿™ä¸ªç»´åº¦è€ƒå¯Ÿçš„å…³é”®ç‚¹åŒ…æ‹¬ï¼šæˆé•¿æ½œåŠ›ã€èŒä¸šç”Ÿæ¶¯è§„åˆ’çš„æ¸…æ™°åº¦ã€‚äººä¸äººä¹‹é—´æˆé•¿é€Ÿåº¦çš„å…³é”®å·®è·ï¼Œæˆ‘è‡ªå·±è§‚å¯Ÿå¾—å‡ºçš„ç»“è®ºåœ¨äºï¼šè‡ªé©±åŠ›ã€‚è€Œè·¯å¾„çš„æ¸…æ™°æ€§ï¼Œä¹Ÿæ˜¯äº§ç”Ÿè‡ªé©±çš„ä¸€ä¸ªæºåŠ¨åŠ›ï¼Œå¦åˆ™å¯èƒ½ä¼šæ„Ÿè§‰è¿·èŒ«ï¼Œè€Œé™·äºå›°é¡¿ã€‚ æ–‡åŒ–åŒ¹é…è¿™ç®—æ˜¯ä»·å€¼è§‚çš„ä¸€éƒ¨åˆ†å§ã€‚å…¶å®ï¼Œè¿™æ˜¯æœ€éš¾è€ƒæ ¸çš„ï¼Œæˆ‘æ²¡æœ‰ä»€ä¹ˆå¥½æ–¹æ³•ï¼ŒåŸºæœ¬é æ„Ÿè§‰ã€‚æ›¾ç»æœ‰è¿‡å¥½å‡ æ¬¡ç¢°åˆ°ç»å†å’ŒæŠ€èƒ½éƒ½ä¸é”™çš„äººï¼Œä½†æ€»æ˜¯æ„Ÿè§‰å“ªé‡Œä¸å¯¹ï¼Œä½†åˆç€æ€¥è¦äººï¼Œå°±æ”¾è¿›æ¥äº†ã€‚ä½†æœ€ç»ˆæ„Ÿè§‰æ˜¯å¯¹çš„ï¼Œåˆä½œå¾ˆå¿«å°±ç»“æŸäº†ï¼Œäººä¹Ÿèµ°äº†ã€‚ ç»¼åˆè¯„ä»·æ€»ç»“ç‚¹è¯„å€™é€‰äººçš„ä¼˜åŠ¿ã€åŠ£åŠ¿å¹¶è¿›è¡ŒæŠ€æœ¯å®šçº§ï¼Œå®šçº§ä¹Ÿæ²¡æœ‰ç»å¯¹æ ‡å‡†ï¼Œè€Œæ˜¯ç›¸å¯¹çš„ã€‚æˆ‘ä¸€èˆ¬å°±æ˜¯å’Œå‘¨å›´è§‰å¾—å·®ä¸å¤šçº§åˆ«çš„äººçš„å¹³å‡æ°´å‡†æ¯”è¾ƒä¸‹ï¼Œå¤§æ¦‚å°±ä¼šæœ‰ä¸€ä¸ªæŠ€æœ¯çº§åˆ«çš„åˆ¤æ–­ã€‚ å¥—è·¯ æ‹›è˜é¢è¯•ï¼Œå…¶å®æ˜¯ä¸€ä¸ªå¯¹äººçš„ç­›é€‰ï¼Œè€Œç­›é€‰çš„æœ¬è´¨æ˜¯åŒ¹é… â€”â€” åŒ¹é…äººä¸èŒä½ã€‚ç¬¬ä¸€ï¼Œä½ å¾—éå¸¸æ¸…æ¥šåœ°ç†è§£ï¼Œè¿™ä¸ªèŒä½éœ€è¦ä»€ä¹ˆæ ·å±æ€§çš„äººã€‚ç¬¬äºŒï¼Œç¡®å®šä½ çš„å€™é€‰äººæ˜¯å¦æ‹¥æœ‰è¿™ä¸ªèŒä½è¦æ±‚çš„å¿…é¡»å±æ€§ã€‚é‚£ä¹ˆï¼Œé¦–å…ˆå›ç­”ç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œä¸€èˆ¬çš„èŒä½éœ€è¦ä»€ä¹ˆæ ·çš„å±æ€§ï¼Ÿ å±æ€§ï¼Œåˆå¯ä»¥è¿›ä¸€æ­¥æ‹†è§£ä¸ºä¸‰ä¸ªå±‚æ¬¡ã€‚ç¬¬ä¸€å±‚æ¬¡æ˜¯ã€ŒæŠ€èƒ½ï¼ˆSkillsï¼‰ã€ï¼ŒæŠ€èƒ½æ˜¯ä½ ä¹ å¾—çš„ä¸€ç§å·¥å…·ï¼Œå°±åƒç¨‹åºå‘˜ä¼šç”¨æŸç§è¯­è¨€å’Œæ¡†æ¶æ¥ç¼–å†™æŸç±»åº”ç”¨ç¨‹åºã€‚ç¬¬äºŒå±‚æ¬¡æ˜¯ã€Œèƒ½åŠ›ï¼ˆAbilitiesï¼‰ã€ï¼Œèƒ½åŠ›æ˜¯ä½ è¿ç”¨å·¥å…·çš„æ€è€ƒå’Œè¡Œä¸ºæ–¹å¼ï¼Œç”¨åŒæ ·çš„è¯­è¨€å’Œæ¡†æ¶ç¼–å†™åŒæ ·ç¨‹åºçš„ç¨‹åºå‘˜èƒ½åŠ›å¯ä»¥å·®åˆ«å¾ˆå¤§ã€‚è€Œç¬¬ä¸‰å±‚æ¬¡æ˜¯ã€Œä»·å€¼è§‚ï¼ˆValuesï¼‰ã€ï¼Œä»·å€¼è§‚æ˜¯ä¸€ä¸ªäººæ ¹æ·±è’‚å›ºçš„ä¿¡å¿µä»¥åŠé©±åŠ¨è¡Œä¸ºçš„åŸå› ä¸åŠ¨åŠ›æ‰€åœ¨ã€‚ ç®€å†æ’°å†™å¥—è·¯å‚è€ƒï¼šhttps://mp.weixin.qq.com/s/3f8hGAQ-auLdkxkQ8XG3CQ ç®€å†ï¼Œæ˜¯å¦‚æ­¤é‡è¦ï¼Œå®ƒæ˜¯è·å¾—ä¸€ä»½æ»¡æ„å·¥ä½œçš„æ•²é—¨ç –ï¼Œä½†ä¸åŒçš„ç®€å†æ•²é—¨çš„å£°å“å¯ä¸åŒã€‚ ä½†å¾ˆå¤šæ—¶å€™ç®€å†ç»™äººçš„æ„Ÿè§‰ä¹Ÿä¼¼ä¹å¾®ä¸è¶³é“ï¼Œå› ä¸ºæ²¡æœ‰äººä¼šçœŸæ­£ç»†è‡´çš„å»è¯»ä¸€ä»½ç®€å†ã€‚è€Œä»…ä»…æ˜¯å¿«é€Ÿçš„æµè§ˆä¸€éï¼Œå°±å‡ ä¹åŒæ—¶å¯¹ä¸€ä¸ªå€™é€‰äººå½¢æˆäº†ä¸€ç§è¦ä¹ˆå¼ºçƒˆï¼Œè¦ä¹ˆæ— æ„Ÿçš„å°è±¡ã€‚ç°å®ä¸­çš„çœŸå®æƒ…å†µæ˜¯ï¼Œä½ çš„ç®€å†åªæœ‰åå‡ äºŒåç§’çš„æ—¶é—´çª—å£æœºä¼šä¼šè¢«æµè§ˆåˆ°ï¼Œç„¶åå°±å†³å®šäº†èƒ½å¦è¿›å…¥ä¸‹ä¸€æ­¥ã€‚ è¦è®©é¢è¯•å®˜çœ‹äº†ä½ çš„ç®€å†åï¼šçŸ¥é“ä½ åšè¿‡ä»€ä¹ˆï¼Ÿçœ‹çœ‹æŠ€èƒ½ã€ç»å†ä¸å²—ä½éœ€æ±‚çš„åŒ¹é…åº¦ï¼Œç„¶åå†é—®é—®ä½ æ˜¯è°ï¼Ÿä½ é€šè¿‡ç®€å†æ•£å‘å‡ºæ¥çš„å‘³é“æ˜¯ä»€ä¹ˆæ„Ÿè§‰ï¼Œæˆ‘æ„¿æ„å’Œè¿™æ ·çš„äººä¸€èµ·å…±äº‹ä¹ˆï¼Ÿ ä¸€ä»½ç®€å†çš„æœ€å°‘å¿…è¦å†…å®¹åŒ…æ‹¬ï¼š ä¸ªäººä¿¡æ¯ å§“å å¹´é¾„ æ‰‹æœº é‚®ç®± æ•™è‚²ç»å† åšå£«ï¼ˆç¡•å£«ã€æœ¬ç§‘ï¼‰ æœ‰å¤šä¸ªå…¨éƒ¨å†™å‡ºæ¥ï¼Œæœ€é«˜å­¦å†å†™åœ¨ä¸Šé¢ å·¥ä½œç»å†ï¼ˆæœ€åŒ¹é…èŒä½éœ€æ±‚çš„ï¼ŒæŒ‘é€‰å‡ºæ¥çš„ TOP3 çš„é¡¹ç›®ï¼‰ é¡¹ç›®1 é¡¹ç›®èƒŒæ™¯ä¸Šä¸‹æ–‡ï¼ˆåœºæ™¯ã€é—®é¢˜ï¼‰ ä½ åœ¨å…¶ä¸­çš„è§’è‰²ï¼ˆèŒè´£ã€å‘æŒ¥çš„ä½œç”¨ã€ç»“æœåº¦é‡ï¼‰ ä¸æ­¤é¡¹ç»å†æœ‰å…³çš„çŸ¥è¯†ä¸æŠ€èƒ½ï¼ˆæŠ€æœ¯æ ˆï¼‰ é¡¹ç›®2 é¡¹ç›®3 é™„åŠ ä¿¡æ¯ åšå®¢ï¼šæŒç»­æœ‰å†…å®¹ï¼Œä¸ç¢ç¢å¿µ å¼€æºï¼šGitHub æŒç»­ commit ç¤¾åŒºï¼šæœ‰ä¸€å®šä¸“ä¸šå½±å“åŠ›çš„ ä¹¦ç±ï¼šç”¨å¿ƒå†™çš„ æ¼”è®²ï¼šè¡Œä¸šå¤§ä¼šçº§åˆ«çš„ ä¸“åˆ©ï¼šå‡‘æ•°çš„å°±ç®—äº† è®ºæ–‡ï¼šå­¦æœ¯ç•Œæ¯”è¾ƒæœ‰å½±å“åŠ›çš„ çˆ±å¥½ï¼šçœŸæ­£çš„å…´è¶£ç‚¹ å¯¹äºæˆ‘ä»¬å­¦ç”Ÿï¼Œç¼ºä¹å·¥ä½œç»å†ï¼Œé‚£å°±å†™å†™ç‹¬ç‰¹çš„å­¦ä¹ æˆ–å®ä¹ ç»å†ã€‚åŒå­¦ä»¬å¤§å®¶éƒ½å…±æœ‰çš„ç»å†å°±ä¸è¦éšä¾¿å†™ä¸Šå»å‡‘æ•°äº†ã€‚å¯¹äºå­¦ç”Ÿï¼Œçœ‹é‡çš„æ˜¯é€šç”¨èƒ½åŠ›ï¼Œå­¦ä¹ èƒ½åŠ›ï¼Œé€‚åº”èƒ½åŠ›ä»¥åŠå¯¹å·¥ä½œçš„æ€åº¦å’Œçƒ­æƒ…ã€‚å¦‚æœæ²¡æœ‰åŒºåˆ†åº¦é«˜çš„ç»å†ï¼Œé‚£ä¹ˆæœ‰ä½œå“ä¹Ÿæ˜¯å¾ˆå¥½çš„ã€‚æ¯”å¦‚å°†ä½ çš„åšçš„ç½‘ç«™éƒ¨ç½²å‡ºæ¥ï¼ŒæŠŠåœ°å€å†™åœ¨ç®€å†ä¸Šã€‚ å…³äºæŠ€æœ¯æ ˆéƒ¨åˆ†çš„æŠ€æœ¯æœ¯è¯­ï¼Œå¾ˆå¤šç¨‹åºå‘˜ä¸å¤ªæ³¨æ„ã€‚æ¯”å¦‚ï¼ŒæŠŠ Java å†™æˆ java æˆ– JAVAï¼ŒJava å·²æ˜¯ä¸€ä¸ªä¸“æœ‰å“ç‰Œåè¯ï¼Œå¤§å°å†™è¦å®Œå…¨ç¬¦åˆï¼Œè¿™ä¸€ç‚¹å’Œ iOS ç±»ä¼¼ï¼ˆi å°å†™ï¼ŒOS å¤§å†™ï¼‰ã€‚å¦å¤–ï¼Œåƒ HTMLï¼ŒCSS åˆ™å…¨éƒ¨å¤§å†™ï¼Œå› ä¸ºè¿™æ˜¯å¤šä¸ªå•è¯çš„ç¼©å†™ã€‚ä¸€äº›å°å°çš„ç»†èŠ‚å°±èƒ½è¯»å‡ºä½ çš„ä¸“ä¸šæ€§å’Œæ•£å‘å‡ºæ¥çš„å‘³é“ã€‚æœ€åï¼ŒæŠ€æœ¯æœ¯è¯­ä¸æ˜¯ç½—åˆ—å¾—å¤šå°±å¥½ï¼Œä¸æ˜¯çœŸæ­£ç†Ÿç»ƒçš„æŠ€èƒ½ï¼Œä¸è¦è½»æ˜“å†™è¿›ç®€å†ã€‚å› ä¸ºè¿™å°†ç»™ä½ è‡ªå·±æŒ–å‘ã€‚ä½ å¯ä»¥å°†ä½ è‡ªå·±æ“…é•¿çš„æˆ–è€…å¾ˆç†Ÿçš„çŸ¥è¯†ç‚¹å†™è¿›å»ï¼Œæœ‰æ—¶æƒ³ç€é‡å°±åŠ ç²—æˆ–è€…æ‰“ä¸ªæ‹¬å·ï¼Œè¿™æ ·å¯ä»¥æŒ–å‘ç»™é¢è¯•å®˜ï¼Œè®©ä»–å»é—®ä½ ç†Ÿæ‚‰çš„ï¼ˆå‰æè¦ç¡®ä¿ä½ çœŸçš„èƒ½è®²æ¸…æ¥šï¼Œæˆ‘è¯•è¿‡è¿™ä¸ªæ–¹æ³•å¾ˆæœ‰æ•ˆçš„ï¼‰ã€‚ ç„¶åå°±æ˜¯ç®€å†æ ¼å¼äº†ï¼Œæœ€å¥½æ˜¯ PDF äº†ï¼ŒWord åœ¨ä¸åŒçš„ç”µè„‘ä¸Šçš„æ‰“å¼€æ•ˆæœå¯èƒ½ä¸ä¸€æ ·ï¼Œæ ¼å¼å¯èƒ½ä¼šå˜ï¼Œå†µä¸”æœ‰äº›äººçš„ç”µè„‘ä¸ä¸€å®šè£…äº† Wordï¼Œä¸è¿‡æˆ‘å–œæ¬¢ç”¨ Markdown å†™ç®€å†ï¼Œç®€æ´ï¼Œé€‚åˆç¨‹åºå‘˜ï¼Œç„¶åæŠŠ Markdown è½¬æ¢æˆ PDF å‡ºæ¥ã€‚ ç®€å†æŠ•é€’å¥—è·¯å†…æ¨ æœ‰å†…æ¨é€šé“å°½é‡èµ°å†…æ¨é€šé“ï¼Œä¸çŸ¥é“æ–¹ä¾¿å¤šå°‘ï¼Œè€Œä¸”æˆåŠŸå‡ ç‡ä¹Ÿå¾ˆå¤§ï¼æ‰¾ç†Ÿäººï¼Œæ‰¾å­¦é•¿å­¦å§å§ï¼ç‰›å®¢ç½‘è®¨è®ºåŒºå¾ˆå¤šå†…æ¨å¸–å­ï¼Œå¯ä»¥å»æ‰¾æ‰¾ã€‚ä¸è¿‡ä»Šå¹´çš„å¥½å¤šå…¬å¸çš„å†…æ¨é€šé“éƒ½ä¸å’‹ç®¡ç”¨äº†ï¼Œå¥—è·¯è¶Šæ¥è¶Šå¤šäº†ã€‚è®°å¾—å»å¹´å¥½å¤šå…¬å¸å†…æ¨éƒ½æ˜¯å…ç¬”è¯•ï¼Œç›´æ¥è¿›å…¥é¢è¯•é˜¶æ®µï¼Œä»Šå¹´ç›´æ¥å˜æˆå†…æ¨å…ç®€å†ç­›é€‰ï¼Œè¿›å…¥ç¬”è¯•ã€‚å› ä¸ºç°åœ¨çš„å†…æ¨è¶Šæ¥è¶Šä¸é è°±ï¼Œç›´æ¥é¢è¯•çš„è¯ï¼Œä¼šå¢åŠ å…¬å¸çš„é¢è¯•æˆæœ¬ï¼Œå¹²è„†ç¬”è¯•å†ç­›é€‰ä¸€éƒ¨åˆ†äººã€‚ æ‹‰å‹¾ç½‘ æ‹‰å‹¾ä¸Šè¿˜æ˜¯ç®—ä¸é”™çš„ã€‚ Boss ç›´è˜ è™½è¯´å‰æ®µæ—¶é—´å‡ºç°äº†ç¨‹åºå‘˜æ‰¾å·¥ä½œè¿›å…¥ä¼ é”€æœ€åå¯¼è‡´æ­»äº¡çš„æƒ¨äº‹å‘ç”Ÿï¼Œä½†æ˜¯é‡Œé¢æ€»æ¯”æ™ºè”æ‹›è˜å’Œå‰ç¨‹æ— å¿§é è°±ç‚¹ã€‚å› ä¸ºæ™ºè”æ‹›è˜å’Œå‰ç¨‹æ— å¿§å‡ ä¹è¢«å¹¿å‘Šå…šå’ŒåŸ¹è®­æœºæ„ç»™å é¢†äº†ã€‚ è„‰è„‰ é‡Œé¢æ‹›åº”å±Šç”Ÿå’Œå®ä¹ ç”Ÿæ¯”è¾ƒå°‘ï¼Œä½†æ˜¯ä¹Ÿæœ‰ï¼Œå¯ä»¥è¯•è¯•ã€‚ æ€»ä¹‹ï¼Œç®€å†æŠ•é€’ç»™å…¬å¸ä¹‹å‰ï¼Œè¯·ç¡®è®¤ä¸‹è¿™å®¶å…¬å¸åˆ°åº•å’‹æ ·ï¼Œå…ˆå»ç™¾åº¦äº†è§£ä¸‹ï¼Œåˆ«è¢«å‘äº†ï¼Œæ¯ä¸ªå¹³å°éƒ½æœ‰ä¸€äº›å±…å¿ƒä¸è‰¯çš„å¹¿å‘Šå…šç­‰ç€ä½ ä¸Šé’©ï¼Œåƒä¸‡åˆ«ä¸Šå½“ï¼ï¼ï¼ æ‰¾å·¥ä½œç»å†è¿™æ®µç»å†ï¼Œç®—æ˜¯è‡ªå·±å¾ˆéš¾å¿˜è®°çš„ç»å†å§ã€‚æ—¢è¾›é…¸æ—¢å……å®çš„æ—¥å­ï¼ä¹Ÿå¾ˆæ„Ÿè°¢è‡ªå·±åœ¨è¿™æ®µæ—¶é—´çš„ç³»ç»Ÿå¤ä¹ ï¼Œæ„Ÿè§‰æŠŠè‡ªå·±çš„åŸºç¡€çŸ¥è¯†å†æ¬¡èšé›†åœ¨ä¸€èµ·äº†ï¼Œè‡ªå·±çš„èƒ½åŠ›åœ¨è¿™ä¸€æ®µæ—¶é—´æå‡çš„ä¹Ÿå¾ˆå¿«ã€‚åé¢æœ‰æœºä¼šçš„è¯æˆ‘ä¹Ÿæƒ³å†™ä¸€ç³»åˆ—çš„ç›¸å…³æ–‡ç« ï¼Œä¸ºåæ¥å‡†å¤‡å·¥ä½œï¼ˆé¢è¯•ï¼‰çš„åŒå­¦æä¾›ä¸€äº›è‡ªå·±çš„å¸®åŠ©ã€‚è‡ªå·±åœ¨æ‰¾å·¥ä½œçš„è¿™æ®µæ—¶é—´é¢è¿‡çš„å…¬å¸ä¹Ÿæœ‰å‡ å®¶å¤§å‚ï¼Œä½†æ˜¯ç»“æœéƒ½ä¸æ˜¯å¾ˆå¥½ï¼Œå¯¹æˆ‘è‡ªå·±æœ‰å¾ˆå¤§çš„å‹åŠ›ï¼Œå½“æ—¶å¿ƒé‡ŒçœŸçš„æ„Ÿè§‰ ï¼šâ€œè‡ªå·±çœŸçš„æœ‰è¿™ä¹ˆå·®â€ï¼Œä¸ºä»€ä¹ˆä¸€ç›´è¢«æ‹’ï¼Œå½“æ—¶å¾ˆæ€€ç–‘è‡ªå·±çš„èƒ½åŠ›ï¼Œè‡ªå·±ä¹Ÿæœ‰æ€»ç»“åŸå› ã€‚ä¸€æ˜¯é¢è¯•çš„æ—¶å€™è‡ªå·±å‡†å¤‡çš„è¿˜ä¸å¤Ÿå……åˆ†ï¼Œè™½è¯´è‡ªå·±è„‘å­é‡Œå¯¹è¿™äº›åŸºç¡€æœ‰ç‚¹å°è±¡ï¼Œä½†æ˜¯é¢è¯•çš„æ—¶å€™è‡ªå·±ç¨ç´§å¼ ä¸‹å°±æè¿°ä¸æ€ä¹ˆæ¸…æ¥šäº†ï¼Œå¯¼è‡´é¢è¯•å®˜è§‰å¾—ä½ å¯èƒ½å¹¿åº¦å¤Ÿäº†ï¼Œæ·±åº¦è¿˜ä¸å¤Ÿï¼ˆè¿™æ˜¯é˜¿é‡Œé¢è¯•å®˜ç”µè¯é¢è¯•è¯´çš„ï¼‰ï¼›äºŒæ˜¯è‡ªå·±çš„è¡¨è¾¾èƒ½åŠ›è¿˜æ˜¯æœ‰æ‰€æ¬ ç¼ºï¼Œä¸èƒ½å¤Ÿå°†è‡ªå·±æ‰€è¦è¡¨è¾¾çš„ä¸œè¥¿è¯´å‡ºæ¥ï¼Œè¿™å¯èƒ½æˆ‘è¦åœ¨åé¢åŠ å¼ºçš„åœ°æ–¹ï¼›ä¸‰æ˜¯æˆ‘çš„å­¦æ ¡é—®é¢˜ã€‚åœ¨é¢äº†å‡ å®¶å…¬å¸å¤±è´¥åï¼Œç»ˆäºé¢äº†å®¶å…¬å¸è¦æˆ‘äº†ï¼Œæˆ‘ä¹Ÿç¡®å®šåœ¨è¿™å®¶å…¬å¸äº†ã€‚å¾ˆå¹¸è¿ï¼Œåˆšå‡ºæ¥ï¼Œå°±æœ‰ä¸€ä¸ªå¾ˆå¥½ï¼ˆå¾ˆè´Ÿè´£ï¼‰çš„æ¶æ„å¸ˆå¸¦æˆ‘ï¼Œè¿™å‘¨å°±ç»™äº†æˆ‘ä¸€ä¸ªå¾ˆç‰›é€¼çš„é¡¹ç›®ç»™æˆ‘çœ‹ï¼Œé‡Œé¢æ–°ä¸œè¥¿å¾ˆå¤šï¼Œè¯´åƒé€äº†è¿™ä¸ªé¡¹ç›®ï¼Œä»¥åç»å¯¹å¯ä»¥æ‹¿å‡ºå»å¹é€¼ï¼ˆä¸€è„¸æ­£ç».jpgï¼‰ã€‚æ‰¾å·¥ä½œæœŸé—´ï¼Œè‡ªå·±ä¹Ÿç»å¸¸å»æ”¶é›†ä¸€äº›åšå®¢ï¼Œå¹¶æŠŠå®ƒä¿å­˜ä¸‹æ¥ï¼Œè¿™æ ·èƒ½å¤Ÿè®©è‡ªå·±ä¸‹æ¬¡æ›´å¥½çš„ç³»ç»Ÿå¤ä¹ ï¼Œè¿˜åœ¨ç‰›å®¢ç½‘æ•´ç†äº†å¾ˆå¤šé¢ç»ï¼Œæ¯å¤©çœ‹å‡ ç¯‡é¢ç»ï¼ŒçŸ¥é“é¢è¯•ä¸€èˆ¬é—®ä»€ä¹ˆé—®é¢˜ï¼Œéƒ½æœ‰å•¥å¥—è·¯ï¼Œå…¶å®ä½ çœ‹å¤šäº†é¢ç»å°±ä¼šå‘ç°ï¼Œé¢è¯•è€ƒçš„é¢˜ç›®å‡ ä¹éƒ½å·®ä¸å¤šï¼ŒåŒºåˆ«ä¸æ˜¯å¾ˆå¤§ã€‚ç›®å‰æˆ‘çš„æ‰¾å·¥ä½œç»å†å°±ç®€çŸ­çš„ä»‹ç»åˆ°è¿™é‡Œäº†ï¼Œå¦‚æœæ„Ÿå…´è¶£çš„è¯ï¼Œå¯ä»¥åŠ ç¾¤ï¼š528776268 æœŸå¾…å¿—åŒé“åˆçš„ä½ ã€‚ è‡ªå·±é¢è¯•é¢ç»äºšä¿¡åœ°å€ï¼šhttp://www.54tianzhisheng.cn/2017/08/04/yaxin/ 1ï¼‰è‡ªæˆ‘ä»‹ç»ï¼ˆè¯´åˆ°ä¸€ä¸ªäº®ç‚¹ï¼šé•¿æœŸåšæŒå†™åšå®¢ï¼Œé¢è¯•å®˜è§‰å¾—è¿™ä¸ªä¹ æƒ¯å¾ˆå¥½ï¼Œç®—åŠ åˆ†é¡¹å§ï¼‰ 2ï¼‰çœ‹åˆ°ç®€å†é¡¹ç›®ä¸­ç”¨åˆ° Solrï¼Œè¯¦ç»†çš„é—®äº†ä¸‹ Solrï¼ˆè‡ªå·±ä»‹ç»äº†ä¸‹ Solr çš„ä½¿ç”¨åœºæ™¯å’Œå»ºç«‹ç´¢å¼•ç­‰ä¸œè¥¿ï¼‰ 3ï¼‰é¡¹ç›®é‡Œé¢å†™äº†ä¸€ä¸ª â€œ æ•æ„Ÿè¯å’Œ JS æ ‡ç­¾è¿‡æ»¤é˜² XSS æ”»å‡»â€ï¼Œé¢è¯•å®˜è®©æˆ‘è®²äº†ä¸‹è¿™ä¸ª XSS æ”»å‡»ï¼Œå¹¶ä¸”æ˜¯æ€æ ·å®ç°çš„ 4ï¼‰é¡¹ç›®é‡Œå†™äº†æ”¯æŒ Markdownï¼Œé—®æ˜¯ä¸æ˜¯è‡ªå·±å†™çš„è§£æä»£ç ï¼Œï¼ˆå›ç­”ä¸æ˜¯ï¼Œè‡ªå·±å¼•ç”¨çš„æ˜¯ GitHubä¸Šçš„ä¸€ä¸ªå¼€æºé¡¹ç›®è§£æçš„ï¼‰ 5ï¼‰æƒ³é—®æˆ‘å‰ç«¯çš„çŸ¥è¯†ï¼Œæˆ‘å›å¤åˆ°ï¼šè‡ªå·±ååç«¯å¼€å‘ï¼Œå‰ç«¯åªæ˜¯äº†è§£ï¼Œç„¶åé¢è¯•å®˜å°±ä¸é—®äº† 6ï¼‰é—®æˆ‘è€ƒä¸è€ƒç ”ï¼Ÿ 7ï¼‰è§‰å¾—æ­å·æ€ä¹ˆæ ·ï¼Ÿæ˜¯æ‰“ç®—å°±å‘†åœ¨æ­å·è¿˜æ˜¯æŠŠæ­å·ä½œä¸ºä¸€ä¸ªè·³æ¿ï¼Ÿ 8ï¼‰æœ‰å•¥å°ç›®æ ‡ï¼Ÿä»¥åæ˜¯æ‰“ç®—ç»§ç»­æŠ€æœ¯æ–¹å‘ï¼Œè¿˜æ˜¯å…ˆæŠ€æœ¯åç®¡ç†ï¼ˆè¿˜å¼€ç©ç¬‘çš„è¯´ï¼šæ˜¯ä¸æ˜¯èµšä»–å‡ ä¸ªäº¿ï¼Œå½“æ—¶æˆ‘ç¬‘äº†ç¬‘ï¼‰ 9ï¼‰æœ‰å•¥å…´è¶£çˆ±å¥½ï¼Ÿ æ€»ç»“ï¼šé¢è¯•é—®çš„é—®é¢˜ä¸ç®—å¤šï¼Œä¸»è¦æ˜¯é€šè¿‡ç®€å†ä¸Šé¡¹ç›®æ‰€æ¶‰åŠçš„ä¸œè¥¿æé—®çš„ï¼Œå¦‚æœè‡ªå·±ä¸å¤ªä¼šçš„åˆ‡è®°ä¸è¦å†™ä¸Šå»ã€‚é¢è¯•ä¸»è¦è€ƒå¯Ÿä½ å›ç­”é—®é¢˜æ¥åˆ¤æ–­ä½ çš„é€»è¾‘æ˜¯å¦å¾ˆæ¸…æ¥šã€‚ çˆ±å¥‡è‰ºåœ°å€ï¼šhttp://www.54tianzhisheng.cn/2017/08/04/iqiyi/ ç¬”è¯•ï¼ˆåŠä¸ªå°æ—¶ï¼‰é¢˜ç›®ï¼šï¼ˆè®°å¾—ä¸€äº›ï¼‰ 1ã€é‡è½½é‡å†™çš„åŒºåˆ«ï¼Ÿ 2ã€è½¬å‘å’Œé‡å®šå‘çš„åŒºåˆ«ï¼Ÿ 3ã€ç”»ä¸‹ HashMap çš„ç»“æ„å›¾ï¼ŸHashMap ã€ HashTable å’Œ ConcurrentHashMap çš„åŒºåˆ«ï¼Ÿ 4ã€statement å’Œ preparedstatement åŒºåˆ«ï¼Ÿ 5ã€JSP ä¸­ä¸€ä¸ª ä¸­å–å€¼ä¸ç›´æ¥å–å€¼çš„åŒºåˆ«ï¼Ÿä¼šæœ‰ä»€ä¹ˆå®‰å…¨é—®é¢˜ï¼Ÿ 6ã€å®ç°ä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„å•ä¾‹æ¨¡å¼ 7ã€ä¸€ä¸ªå†™ sql è¯­å¥çš„é¢˜ç›® 8ã€è‡ªå·±å®ç°ä¸€ä¸ª Listï¼Œï¼ˆä¸»è¦å®ç° addç­‰å¸¸ç”¨æ–¹æ³•ï¼‰ 9ã€Spring ä¸­ IOC å’Œ AOP çš„ç†è§£ï¼Ÿ 10ã€ä¸¤ä¸ªå¯¹è±¡çš„ hashcode ç›¸åŒï¼Œæ˜¯å¦å¯¹è±¡ç›¸åŒï¼Ÿequal() ç›¸åŒå‘¢ï¼Ÿ 11ã€@RequestBody å’Œ @ResponseBody åŒºåˆ«ï¼Ÿ 12ã€JVM ä¸€ä¸ªé”™è¯¯ï¼Œä»€ä¹ˆæƒ…å†µä¸‹ä¼šå‘ç”Ÿï¼Ÿ 13ã€å¸¸ç”¨çš„ Linux å‘½ä»¤ï¼Ÿ ç¬¬ä¸€è½®é¢è¯•ï¼ˆ80 åˆ†é’Ÿï¼‰1ã€è‡ªæˆ‘ä»‹ç» 2ã€ä»‹ç»ä½ æœ€ç†Ÿæ‚‰çš„ä¸€ä¸ªé¡¹ç›® 3ã€è®²ä¸‹è¿™ä¸ª XSS æ”»å‡» 4ã€HashMap çš„ç»“æ„ï¼ŸHashMap ã€ HashTable å’Œ ConcurrentHashMap çš„åŒºåˆ«ï¼Ÿ 5ã€HashMap ä¸­æ€ä¹ˆè§£å†³å†²çªçš„ï¼Ÿï¼ˆè¦æˆ‘è¯¦ç»†è®²ä¸‹ï¼‰ 6ã€ConcurrentHashMap å’Œ HashTable ä¸­çº¿ç¨‹å®‰å…¨çš„åŒºåˆ«ï¼Ÿä¸ºå•¥å»ºè®®ç”¨ ConcurrentHashMap ï¼Ÿèƒ½æŠŠ ConcurrentHashMap é‡Œé¢çš„å®ç°è¯¦ç»†çš„è®²ä¸‹å—ï¼Ÿ 7ã€Session å’Œ Cookie çš„åŒºåˆ«ï¼Ÿ 8ã€ä½ é¡¹ç›®ä¸­ç™»å½•æ˜¯æ€æ ·åšçš„ï¼Œç”¨çš„ Cookie å’Œ Sessionï¼Ÿ 9ã€è®²è®²ä½ å¯¹ Spring ä¸­çš„ IOC å’Œ AOP çš„ç†è§£ï¼Ÿ 10ã€é—®äº†å¥½å‡ ä¸ªæ³¨è§£çš„ä½œç”¨ï¼Ÿ 11ã€statement å’Œ preparedstatement åŒºåˆ«ï¼Ÿ 12ã€$ å’Œ # çš„åŒºåˆ«ï¼Ÿä»¥åŠè¿™ä¸¤ä¸ªåœ¨å“ªäº›åœ°æ–¹ç”¨ï¼Ÿ 13ã€å‰é¢é¡¹ç›®ä»‹ç»äº†æ•°æ®æ˜¯çˆ¬è™«çˆ¬å–è¿‡æ¥çš„ï¼Œé‚£ä½ è®²è®²ä½ çš„çˆ¬è™«æ˜¯å¤šçº¿ç¨‹çš„å§ï¼Ÿ 14ã€è®²è®² Python ä¸­çš„å¤šçº¿ç¨‹å’Œ Java ä¸­çš„å¤šçº¿ç¨‹åŒºåˆ«ï¼Ÿ 15ã€è‡ªå·±åˆšå¥½å‰å‡ å¤©åœ¨çœ‹çº¿ç¨‹æ± ï¼Œç«‹é©¬å°±æŠŠé¢è¯•å®˜å¸¦åˆ°æˆ‘ç†Ÿæ‚‰çš„çº¿ç¨‹æ± ï¼Œå’Œé¢è¯•å®˜è®²äº†ä¸‹ JDK è‡ªå¸¦çš„å››ç§çº¿ç¨‹æ± ã€ThreadPoolExecutor ç±»ä¸­çš„æœ€é‡è¦çš„æ„é€ å™¨é‡Œé¢çš„ä¸ƒä¸ªå‚æ•°ï¼Œç„¶åå†è®²äº†ä¸‹çº¿ç¨‹ä»»åŠ¡è¿›å…¥çº¿ç¨‹æ± å’Œæ ¸å¿ƒçº¿ç¨‹æ•°ã€ç¼“å†²é˜Ÿåˆ—ã€æœ€å¤§çº¿ç¨‹æ•°é‡æ¯”è¾ƒã€‚ 16ã€çº¿ç¨‹åŒæ­¥ï¼Œä½ äº†è§£å“ªå‡ ç§æ–¹å¼ï¼Ÿ 17ã€è®²ä¸‹ Synchronizedï¼Ÿ 18ã€è®²ä¸‹ RecentLock å¯é‡å…¥é”ï¼Ÿ ä»€ä¹ˆæ˜¯å¯é‡å…¥é”ï¼Ÿä¸ºä»€ä¹ˆè¦è®¾è®¡å¯é‡å…¥é”ï¼Ÿ 19ã€è®²ä¸‹ Volatile å§ï¼Ÿä»–æ˜¯æ€æ ·åšåˆ°åŒæ­¥çš„ï¼Ÿ 20ã€Volatile ä¸ºä»€ä¹ˆä¸æ”¯æŒåŸå­æ€§ï¼Ÿä¸¾ä¸ªä¾‹å­ 21ã€Atomic æ€ä¹ˆè®¾è®¡çš„ï¼Ÿï¼ˆæ²¡çœ‹è¿‡æºç ï¼Œå½“æ—¶å›ç­”é”™äº†ï¼Œåæ¥æ‰å‘ç°é‡Œé¢å…¨éƒ¨ç”¨ final ä¿®é¥°çš„å±æ€§å’Œæ–¹æ³•ï¼‰ 22ã€é—®å‡ ä¸ªå‰ç«¯çš„æ ‡ç­¾å§ï¼Ÿï¼ˆé—®äº†ä¸€ä¸ªä¸ä¼šï¼Œç›´æ¥è¯´æ˜æˆ‘ååç«¯ï¼Œå‰ç«¯åªæ˜¯äº†è§£ï¼Œåé¢å°±ä¸é—®äº†ï¼‰ 23ã€SpringBoot çš„äº†è§£ï¼Ÿ 24ã€Linux å¸¸ç”¨å‘½ä»¤ï¼Ÿ 25ã€JVM é‡Œçš„å‡ ä¸ªé—®é¢˜ï¼Ÿ 26ã€äº‹åŠ¡çš„ç‰¹æ€§ï¼Ÿ 27ã€éš”ç¦»çº§åˆ«ï¼Ÿ 28ã€ç½‘ç»œçŠ¶æ€ç ï¼Ÿä»¥ 2ã€3ã€4ã€5 å¼€å¤´çš„ä»£è¡¨ä»€ä¹ˆæ„æ€ã€‚ 29ã€å¹¶å‘å’Œå¹¶è¡Œçš„åŒºåˆ«ï¼Ÿ 30ã€ä½ æœ‰ä»€ä¹ˆé—®é¢˜æƒ³é—®æˆ‘çš„ï¼Ÿ ä¸€é¢é¢å®Œåé¢è¯•å®˜å’Œè¯´è¿™ä»½è¯•å·æ˜¯ç”¨æ¥è€ƒ 1~3 å¹´å¼€å‘å·¥ä½œç»éªŒçš„ï¼Œè®©æˆ‘å‡†å¤‡ä¸€ä¸‹ï¼Œæ¥ä¸‹æ¥çš„äºŒé¢ã€‚ ç¬¬äºŒè½®é¢è¯•ï¼ˆåŠä¸ªå°æ—¶ï¼‰1ã€ä¸€ä¸Šæ¥å°±é—®æ€ä¹ˆç®€å†åå­—éƒ½æ²¡æœ‰ï¼Œæˆ‘æŒ‡äº†ç®€å†ç¬¬ä¸€è¡Œçš„æˆ‘çš„åå­—ï¼Œè¿˜ç‰¹æ„å¤§å†™äº†ï¼Œç„¶åå°±é—®å­¦æ ¡æ˜¯ä¸æ˜¯åœ¨ä¸Šæµ·ï¼Œæˆ‘å›ç­”åœ¨å—æ˜Œï¼ˆæ„Ÿè§‰è¢«é„™è§†äº†ä¸€æ³¢ï¼Œåé¢æˆ‘åœ¨å›ç­”é—®é¢˜çš„æ—¶å€™é¢è¯•å®˜å°±ä¸€ç›´åœ¨ç©æ‰‹æœºï¼Œä¼°è®¡åé¢å¯¹æˆ‘çš„å°è±¡å°±ä¸æ˜¯å¾ˆå¥½äº†ï¼‰ 2ã€è‡ªæˆ‘ä»‹ç» 3ã€è¯´ä¸€è¯´æ•°æ®åº“å»ºè¡¨å§ï¼ˆä»èŒƒå¼è®²ï¼‰ 4ã€è®²è®²å¤šæ€ï¼Ÿï¼ˆè¿™ä¸ªæˆ‘ç­”å‡ºæ¥äº†ï¼Œå¯æ˜¯é¢è¯•å®˜ç«Ÿç„¶è¯´ä¸æ˜¯è¿™æ ·å§ï¼Œå¯èƒ½é¢è¯•å®˜æ²¡å¬è¯·ï¼Œåé¢è¿˜è¯´æˆ‘æ˜¯ä¸æ˜¯å¹³æ—¶å†™å¤šæ€æ¯”è¾ƒå°‘ï¼Œæ„Ÿè§‰è¿™ä¸ªä¹Ÿè®©é¢è¯•å®˜å¯¹æˆ‘å°è±¡å‡åˆ†ï¼‰ 5ã€å°†ä¸¤ä¸ªæ•°è½¬æ¢ï¼ˆä¸å€ŸåŠ©ç¬¬ä¸‰ä¸ªå‚æ•°ï¼‰ 6ã€æ‰‹å†™ä¸ªæ’å…¥æ’åºå§ï¼ˆå†™å®Œäº†å’Œé¢è¯•å®˜è®²äº†ä¸‹æ‰§è¡Œæµç¨‹ï¼‰ 7ã€è®²è®²ä½ å¯¹ Spring ä¸­çš„ IOC å’Œ AOP çš„ç†è§£ï¼Ÿ 8ã€é—®äº†å‡ ä¸ªå¸¸ç”¨çš„ Linux å‘½ä»¤ï¼Ÿ 9ã€ä¹Ÿé—®åˆ°å¤šçº¿ç¨‹ï¼Ÿå’Œä¸€é¢ä¸€æ ·æŠŠè‡ªå·±æœ€è¿‘çœ‹çš„çº¿ç¨‹æ± ä¹Ÿè®²äº†ä¸€é 10ã€å­¦ Java å¤šä¹…äº†ï¼Ÿ 11ã€ä½ æœ‰ä»€ä¹ˆæƒ³é—®çš„ï¼Ÿ æ€»ç»“ï¼šé¢è¯•é¢˜ç›®å¤§æ¦‚å°±æ˜¯è¿™ä¹ˆå¤šäº†ï¼Œæœ‰äº›é—®é¢˜è‡ªå·±ä¹Ÿå¿˜è®°äº†ï¼Œé¢è¯•é¢˜ç›®é¡ºåºä¸ä¸€å®šæ˜¯æŒ‰ç…§ä¸Šé¢æ‰€å†™çš„ã€‚å†æ¬¡æ„Ÿè°¢çˆ±å¥‡è‰ºçš„ç¬¬ä¸€é¢é¢è¯•å®˜äº†ï¼Œè¦ä¸æ˜¯ä»–å¸®å¿™å†…æ¨çš„ï¼Œæˆ‘å¯èƒ½è¿˜æ²¡æœ‰æœºä¼šæ”¶åˆ°é¢è¯•æœºä¼šã€‚è‡ªå·±æ¥åˆ°çˆ±å¥‡è‰ºé¢è¯•é‚€è¯·ç”µè¯æ˜¯æ˜ŸæœŸä¸€æ™šä¸Šå¿«7ç‚¹ä¸­çš„ï¼Œä¹‹ååŠ äº†é¢è¯•å®˜å¾®ä¿¡çº¦å¥½äº†æ˜ŸæœŸå››é¢è¯•çš„ï¼ˆæ—¶é—´å‡†å¤‡è¾ƒçŸ­ï¼Œä¹‹å‰æ²¡ç³»ç»Ÿçš„å¤ä¹ è¿‡ï¼‰ã€‚æ˜ŸæœŸå››ä¸€å¤§æ—©ï¼ˆ5ç‚¹å°±èµ·åºŠäº†ï¼‰ï¼Œç„¶åå°±æ”¶æ‹¾äº†ä¸‹ï¼Œå»ç­‰å…¬äº¤è½¦ï¼Œè½¬äº†ä¸¤æ¬¡è½¦ï¼Œç„¶åå†åšåœ°é“å»çˆ±å¥‡è‰ºå…¬å¸çš„ï¼Œæ€»å…±è·¯ä¸ŠèŠ±è´¹æ—¶é—´å››ä¸ªå¤šå°æ—¶ã€‚æ€»çš„æ¥è¯´ï¼Œè¿™æ¬¡é¢è¯•å‡†å¤‡çš„æ—¶é—´ä¸æ˜¯å¾ˆå……è£•ï¼Œæ‰€ä»¥å‡†å¤‡çš„ä¸ªäººè§‰å¾—ä¸æ˜¯å¾ˆå¥½ï¼Œé€šè¿‡è¿™æ¬¡çš„é¢è¯•ï¼Œå‘ç°é¢è¯•è¿˜æ˜¯æ¯”è¾ƒæ³¨é‡åŸºç¡€å’Œæ·±åº¦çš„ï¼Œæˆ‘ä¹ŸçŸ¥é“äº†è‡ªå·±çš„ä¸€äº›å¼±å¤„ï¼Œè¿˜éœ€è¦åœ¨å“ªé‡ŒåŠ å¼ºï¼Œé¢è¯•æŠ€å·§ä¸Šä¹Ÿè¦æŒæ¡äº›ã€‚ä¸ºåé¢çš„å…¶ä»–å…¬å¸ç»§ç»­åšå¥½å……è¶³çš„å‡†å¤‡ã€‚åŠ æ²¹ï¼ï¼ï¼ é˜¿é‡Œåœ°å€ï¼šhttp://www.54tianzhisheng.cn/2017/08/04/alibaba/ ï¼ˆèœé¸Ÿç½‘ç»œéƒ¨é—¨ï¼‰ï¼ˆ49 åˆ†é’Ÿï¼‰ 2017.08.02 æ™šä¸Š9ç‚¹21æ‰“ç”µè¯è¿‡æ¥ï¼Œé¢„çº¦æ˜å¤©ä»€ä¹ˆæ—¶å€™æœ‰ç©ºé¢è¯•ï¼Œçº¦å¥½ç¬¬äºŒå¤©ä¸‹åˆä¸¤ç‚¹ã€‚ 2017.08.03 ä¸‹åˆä¸¤ç‚¹10åˆ†æ‰“è¿‡æ¥äº†ã€‚ è¯´çœ‹äº†æˆ‘çš„åšå®¢å’Œ GitHubï¼Œè§‰å¾—æˆ‘å­¦çš„è¿˜è¡Œï¼ŒçŸ¥è¯†å¹¿åº¦éƒ½è¿˜ä¸é”™ï¼Œä½†æ˜¯è¿˜æ˜¯è¦é—®é—®å…·ä½“æƒ…å†µï¼Œä¸ºä»€ä¹ˆæ²¡çœ‹åˆ°ä½ æ˜¥æ‹›çš„è®°å½•ï¼Œä»€ä¹ˆåŸå› æ²¡æŠ•é˜¿é‡Œï¼Ÿéå¾—è¯´ä¸€ä¸ªåŸå› ï¼Œé‚£å°±æ˜¯ï¼šæˆ‘è‡ªå·±å¤ªèœäº†ï¼Œä¸æ•¢æŠ•ã€‚ 1ã€å…ˆè‡ªæˆ‘ä»‹ç» 2ã€ä»€ä¹ˆæ˜¯å¤šæ€ï¼Ÿå“ªé‡Œä½“ç°äº†å¤šæ€çš„æ¦‚å¿µï¼Ÿ 3ã€HashMap æºç åˆ†æï¼ŒæŠŠé‡Œé¢çš„ä¸œè¥¿é—®äº†ä¸ªéï¼Ÿæœ€åé—®æ˜¯ä¸æ˜¯çº¿ç¨‹å®‰å…¨ï¼Ÿå¼•å‡º ConcurrentHashMap 4ã€ConcurrentHashMap æºç åˆ†æ 5ã€ç±»åŠ è½½ï¼ŒåŒäº²å§”æ‰˜æœºåˆ¶ 6ã€Javaå†…å­˜æ¨¡å‹ï¼ˆä¸€å¼€å§‹è¯´çš„ä¸æ˜¯ä»–æƒ³è¦çš„ï¼Œä¸»è¦æƒ³é—®æˆ‘å †å’Œæ ˆçš„ç»†èŠ‚ï¼‰ 7ã€åƒåœ¾å›æ”¶ç®—æ³• 8ã€çº¿ç¨‹æ± ï¼Œè‡ªå·±ä¹‹å‰çœ‹è¿‡ï¼Œæ‰€ä»¥è¯´çš„æ¯”è¾ƒå¤šï¼Œæœ€åé¢è¯•å®˜è¯´äº†å¥ï¼šçœ‹ä½ å¯¹çº¿ç¨‹æ± äº†è§£è¿˜æ˜¯å¾ˆæ·±äº† 9ã€äº‹åŠ¡çš„å››ç§ç‰¹æ€§ 10ã€ä»€ä¹ˆæ˜¯æ­»é”ï¼Ÿ 11ã€ä¹è§‚é”å’Œæ‚²è§‚é”çš„ç­–ç•¥ 12ã€é«˜å¯ç”¨ç½‘ç«™çš„è®¾è®¡ï¼ˆæœ‰ä»€ä¹ˆæŠ€æœ¯å®ç°ï¼‰ 13ã€ä½è€¦åˆé«˜å†…èš 14ã€è®¾è®¡æ¨¡å¼äº†è§£ä¸ï¼Ÿä½ ç”¨è¿‡å“ªå‡ ç§ï¼Œä¸ºä»€ä¹ˆç”¨ï¼Œå•ä¾‹æ¨¡å¼å¸®æˆ‘ä»¬åšä»€ä¹ˆä¸œè¥¿ï¼Ÿæœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ 15ã€ä½ å‚ä¸ä»€ä¹ˆé¡¹ç›®ä¸­æˆé•¿æ¯”è¾ƒå¿«ï¼Ÿå­¦åˆ°äº†ä»€ä¹ˆä¸œè¥¿ï¼Œä»¥å‰æ˜¯æ²¡æœ‰å­¦è¿‡çš„ï¼Ÿ 16ã€é¡¹ç›®ä¸­é‡åˆ°çš„æœ€å¤§å›°éš¾æ˜¯æ€æ ·çš„ï¼Ÿæ˜¯æ€ä¹ˆè§£å†³çš„ï¼Ÿ 17ã€æ™ºåŠ›é¢˜ï¼ˆä¸¤æ ¹ä¸å‡åŒ€çš„é¦™ï¼Œç‚¹ä¸€å¤´çƒ§å®Œè¦ä¸€ä¸ªå°æ—¶ï¼Œæ€ä¹ˆç¡®å®š15åˆ†é’Ÿï¼‰ 18ã€ä½ æœ‰ä»€ä¹ˆé—®é¢˜æƒ³è¦é—®æˆ‘çš„ï¼Ÿ 19ã€é—®äº†èœé¸Ÿç½‘ç»œä»–ä»¬éƒ¨é—¨ä¸»è¦åšä»€ä¹ˆï¼Ÿ 20ã€å¯¹æˆ‘è¿™æ¬¡é¢è¯•åšä¸ªè¯„ä»·ï¼šçœ‹äº†ä½ åšå®¢å’Œ GitHubï¼ŒçŸ¥é“ä½ å¯¹å­¦ä¹ çš„çƒ­æƒ…è¿˜æ˜¯å¾ˆé«˜çš„ï¼ŒèŠ±äº†ä¸å°‘åŠŸå¤«ï¼Œåé¢æœ‰é€šçŸ¥ï¼ æ€»ç»“ï¼šé¢è¯•æ€»çš„æ¥è¯´ï¼Œç¬¬ä¸€æ¬¡ç”µè¯é¢è¯•ï¼Œæ„Ÿè§‰å¥½ç´§å¼ ï¼Œå¥½å¤šé—®é¢˜è‡ªå·±ä¼šç‚¹ï¼Œä½†æ˜¯å…¶ä¸­çš„ç»†èŠ‚æ²¡å¼„æ¸…æ¥šï¼Œè‡ªå·±å‡†å¤‡çš„ä¹Ÿä¸å¤Ÿå……åˆ†ã€‚é¢è¯•å®˜å¾ˆå‹å¥½ï¼Œçœ‹åˆ°æˆ‘ç´§å¼ ï¼Œä¹Ÿå®‰æ…°æˆ‘è¯´ä¸è¦ç´§ï¼Œä¸ç®¡ä»¥åå‡ºå»é¢è¯•å•¥çš„ï¼Œä¸éœ€è¦ç´§å¼ ï¼Œå…¬å¸é—®çš„é—®é¢˜å¯èƒ½å¾ˆå¹¿ï¼Œä½ åªéœ€è¦æŠŠä½ çŸ¥é“çš„è¯´å‡ºæ¥å°±è¡Œï¼Œä¸ä¼šçš„ç›´æ¥è¯´ä¸ä¼šå°±è¡Œã€‚ä¹‹å‰ä¸€ç›´ä¸æ•¢æŠ•é˜¿é‡Œï¼Œå› ä¸ºè‡ªå·±å‡†å¤‡çš„å®Œå…¨ä¸å¤Ÿå……åˆ†ï¼Œä½†æ˜¯åœ¨æœ‹å‹ç£Šå“¥çš„å¸®åŠ©ä¸‹ï¼Œè¿˜æ˜¯è¯•äº†ä¸‹ï¼Œä¸ç®¡ç»“æœæ€ä¹ˆæ ·ï¼Œç»å†è¿‡æ€»æ¯”æ²¡æœ‰çš„å¥½ã€‚ åé¢è¯´æœ‰é€šçŸ¥ï¼Œç»“æœå¹¶æ²¡æœ‰ï¼Œåªçœ‹åˆ°å®˜ç½‘çš„æŠ•é€’æŒ‰é’®å˜ç°äº†ã€‚åœ¨æ˜é‡‘ä¸Šä¸€ä¸ªæœ‹å‹ï¼ˆæˆ‘éš”å£å­¦æ ¡çš„ï¼‰ï¼Œå½“æ—¶çœ‹æˆ‘æŒ‚äº†è¯´è¦ä¸è¦è®©ä»–ç§Ÿä¸€èµ·çš„éš”å£é‚»å±…å†å†…æ¨ä¸‹æ·˜å®ï¼Œæˆ‘æƒ³æƒ³è¿˜æ˜¯ç®—äº†ï¼Œè‡ªå·±ç›®å‰èƒ½åŠ›çœŸçš„æ˜¯æœ‰é™ï¼Œè¾¾ä¸åˆ°è¿›é˜¿é‡Œçš„è¦æ±‚ï¼ä¸è¿‡è¿˜æ˜¯è¦æ„Ÿè°¢é‚£ä¸ªå“¥ä»¬ï¼ŒäººçœŸçš„è¶…çº§å¥½ï¼Œè™½ç„¶æˆ‘ä»¬æœªæ›¾è°‹é¢ï¼Œä½†æ˜¯æœ‰æœºä¼šçš„è¯ï¼Œæˆ‘ä¸€å®šä¼šè¯·ä½ åƒé¥­çš„ã€‚ å“”å“©å“”å“©é¦–å…ˆç›´æ¥æ ¹æ®ç®€å†é¡¹ç›®å¼€é—®ï¼Œè‡ªæˆ‘ä»‹ç»éƒ½æ²¡æœ‰ã€‚ 1ã€ç™»å½•ä»å‰ç«¯åˆ°åç«¯æ•´ä¸ªè¿‡ç¨‹æè¿°ä¸€éï¼Ÿè¶Šè¯¦ç»†è¶Šå¥½ï¼Œè¯´åˆ°å¯†ç åŠ å¯†ï¼Œç½‘ç»œä¼ è¾“ï¼Œåå°éªŒè¯ç”¨æˆ·åå’Œå¯†ç ï¼ŒCookie è®¾ç½®ç­‰ã€‚å…·ä½“é—®æˆ‘å¯†ç åŠ å¯†æ˜¯å‰å°è¿˜æ˜¯åå°åŠ å¯†ï¼Œè¯´äº†åœ¨åå°åŠ å¯†ï¼Ÿé¢è¯•å®˜è¯´ï¼Œé‚£ä½ åšè¿™ä¸ªé¡¹ç›®æœ‰ä»€ä¹ˆæ„æ€ï¼Ÿå¯†ç ä¼ è¾“éƒ½æ˜¯æ˜æ–‡çš„ï¼Œé»˜è®¤ HTTP ä¼ é€’æ˜¯æ˜æ–‡ä¼ è¾“ï¼Œå½“æ—¶è¢«é¢è¯•å®˜å¸¦è¿›å‰å°åŠ å¯†è¿˜æ˜¯åå°åŠ å¯†çš„æ²Ÿé‡Œå»äº†ï¼Œæ²¡æƒ³åˆ°ç”¨ HTTPS ï¼Œåæ¥åæ¥çš„è·¯ä¸ŠæŸ¥äº†äº›èµ„æ–™æ‰çŸ¥é“çš„ï¼Œé¢è¯•è¿‡ç¨‹ä¸­ä»–å¾ˆæƒ³æˆ‘è¯´å‰å°åŠ å¯†ï¼Œä½†æ˜¯å‰å°åŠ å¯†ç®—æ³•é‚£ä»£ç å°±æ‘†åœ¨é‚£é‡Œï¼Œå¾ˆå®¹æ˜“å°±ç»™ç ´è§£äº†å§ï¼Œä¹Ÿæ²¡ç»™ç‚¹æç¤ºè¯´ HTTPSï¼Œæˆ‘åªå¥½æŠ•é™ 2ã€å†™ä¸€ä¸ªæŸ¥è¯¢çš„ sql è¯­å¥ 3ã€çº¿ç¨‹åŒæ­¥çš„æ–¹æ³•ï¼ŸSynchronizedã€Volatileã€ï¼ˆé¢è¯•å®˜å¥½åƒè§‰å¾— Volatile ä¸å¯ä»¥åšåˆ°åŒæ­¥ï¼Œæˆ‘å’Œä»–è¯´äº†åŠå¤©çš„ Volatile åŸç† ï¼Œä»–ç«Ÿç„¶ä¸è®¤åŒï¼Œæˆ‘å¼€å§‹æ€€ç–‘ä»–çš„å®åŠ›äº†ï¼‰ã€ThreadLocalã€Atomicã€‚ è¯´åˆ°è¿™äº›äº†ï¼Œæˆ‘å½“æ—¶ç«Ÿç„¶æ²¡æŠŠä»–å¸¦è¿›æˆ‘æˆ‘ç»™ä»–æŒ–çš„å‘é‡Œå»ï¼ˆçº¿ç¨‹æ± ï¼Œä¹‹å‰å¥½å¥½ç ”ç©¶è¿‡å‘¢ï¼Œå¯æƒœäº†ï¼‰ 4ã€Spring IOC å’Œ AOP çš„ç†è§£ï¼Ÿå«æˆ‘å†™ AOP çš„ä»£ç ï¼Œæˆ‘æ²¡å†™ 5ã€JDK åŠ¨æ€ä»£ç†å’Œ Cglib ä»£ç†åŒºåˆ«ï¼Ÿ 5ã€ä½ è§‰å¾—é¡¹ç›®é‡Œé¢ä½ è§‰å¾—å“ªäº›æŠ€æœ¯æ¯”è¾ƒå¥½ï¼Ÿæˆ‘æŒ‡äº†ä¸¤ä¸ªï¼Œç„¶åä»–ä¹Ÿæ²¡æœ‰é—®ä¸‹å»ã€‚ 6ã€è§£é‡Šä¸‹ XSS æ”»å‡» 7ã€Spring å’Œ SpringBoot çš„åŒºåˆ«ï¼Ÿ 8ã€JVM åƒåœ¾å›æ”¶ç®—æ³•ï¼Ÿåˆ†ä»£ä¸­ä¸ºä»€ä¹ˆè¦åˆ†ä¸‰å±‚ï¼Ÿ 9ã€OOM æ˜¯ä»€ä¹ˆï¼Ÿä»€ä¹ˆæƒ…å†µä¼šå‘ç”Ÿï¼Ÿ 10ã€ä½ è§‰å¾—ä½ æœ‰å•¥ä¼˜ç‚¹ï¼Ÿ ç„¶åå°±å«æˆ‘ç­‰ä¸€ä¼šï¼Œä¸€ä¼šæœ‰äººäº‹æ¥é€šçŸ¥æˆ‘ï¼Œç»“æœè¿‡äº†ä¸€ä¼šäººäº‹å«æˆ‘å¯ä»¥å›å»ç­‰é€šçŸ¥äº†ã€‚ æ€»ç»“ï¼šåˆ°å…¬å¸çš„æ—¶å€™å·²ç»ä¸€ç‚¹å¤šé’Ÿäº†ï¼Œé¢è¯•ç›´æ¥åœ¨ä¸€ä¸ªå¾ˆå¤šäººçš„åœ°æ–¹ï¼ˆåƒé¥­çš„åœ°æ–¹ï¼‰ç›´æ¥é¢çš„ï¼Œå‘¨å›´è¿˜æœ‰äººå†åƒé¥­ï¼Œåœºæ™¯æœ‰ç‚¹å°´å°¬ï¼Œé¢è¯•è¿‡ç¨‹æ„Ÿè§‰å¾ˆéšæ„ï¼Œæƒ³åˆ°ä»€ä¹ˆé—®é¢˜å°±é—®ä»€ä¹ˆï¼Œå®Œå…¨æ²¡æœ‰è¡”æ¥ï¼Œé—®åˆ°çš„æœ‰äº›åœ°æ–¹æ„Ÿè§‰é¢è¯•å®˜è‡ªå·±éƒ½ä¸æ¸…æ¥šï¼Œè¿˜æ€€ç–‘æˆ‘æ‰€è¯´çš„ï¼Œå¦å¤–å°±æ˜¯é—®é¢˜æ¯”è¾ƒåˆé’»ï¼Œæ€»ä½“æŠ€æœ¯ä¹Ÿå°±é‚£æ ·å§ï¼ ç›®å‰æ‰€åœ¨å…¬å¸å½“æ—¶æ˜¯æˆ‘ç°åœ¨çš„è€å¤§ï¼ˆæ¶æ„å¸ˆï¼‰é¢çš„ï¼Œå…ˆæ˜¯ç”µè¯é¢è¯•è¿‡ä¸€æ¬¡ï¼Œé—®çš„é—®é¢˜ä¹Ÿæ¯”è¾ƒéš¾ï¼Œä¸è¿‡æœ€åè¿˜æ˜¯è§‰å¾—æˆ‘åŸºç¡€è¿˜æ˜¯ä¸é”™çš„ã€‚æœ€åå«æˆ‘å»å…¬å¸é¢è¯•ä¸‹ï¼Œæ¥åˆ°å…¬å¸é¢è¯•é—®çš„é—®é¢˜é‚£å°±æ›´éš¾äº†ï¼Œå‡ ä¹å¥½å¤šéƒ½å›ç­”ä¸å‡ºæ¥ï¼Œä½†æ˜¯ç®€å•çš„è¯´äº†ä¸‹æ€è·¯ï¼Œæœ€åå†å«ä¸»ä»»é¢è¯•äº†ä¸‹ï¼Œé—®çš„é—®é¢˜å°±å¾ˆç®€å•äº†ï¼Œæœ€åå°±æ˜¯ HR é¢äº†ï¼Œä¸»è¦è¯´äº†ä¸‹å·¥èµ„é—®é¢˜å’Œä»€ä¹ˆæ—¶å€™èƒ½æŠ¥é“ï¼è¿™å‡ æ¬¡é¢è¯•çš„é—®é¢˜å½“æ—¶ç”±äºæ—¶é—´æ¯”è¾ƒç´§ï¼Œä¹Ÿæ²¡å»æ•´ç†ï¼Œç°åœ¨ä¹Ÿè®°ä¸æ¸…æ¥šäº†ï¼ç›®å‰è‡ªå·±å·²ç»å·¥ä½œäº†å¿«ä¸€ä¸ªæœˆäº†ï¼Œç»™çš„é¡¹ç›®ä¹Ÿå®Œå…¨æ˜¯æ–°ä¸œè¥¿ï¼Œå¯¹æˆ‘çš„æŒ‘æˆ˜ä¹Ÿå¾ˆå¤§ï¼Œæœ‰æ—¶è‡ªå·±ä¹Ÿç¡®å®ä¸æ€ä¹ˆçŸ¥é“ï¼Œä¸è¿‡æˆ‘è€å¤§å¾ˆè€å¿ƒçš„æ•™æˆ‘ï¼Œå¯¹æˆ‘ä¹Ÿå¾ˆä¸é”™ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘æ‰“ç®—ç•™åœ¨è¿™é‡Œçš„åŸå› ï¼Œç¢°åˆ°ä¸ªå¥½è€å¤§ä¸æ˜“ï¼å¿…é¡»å¥½å¥½çæƒœï¼ å®ä¹ æ„Ÿæ‚Ÿè¿›å…¬å¸æ˜¯æ¶æ„è¿ç»´ç»„ä¸­çš„ Java å®ä¹ å¼€å‘ï¼Œç›®å‰å®ä¹ å·²ç»å¿«ä¸€ä¸ªæœˆäº†ï¼Œè¯´å®è¯ï¼Œå®ä¹ åæ‰å‘ç°ä¸€å¤©çœŸçš„å¾ˆå¿™ï¼Œå†™ä¸‹è¿™ç¯‡å¾æ–‡ä¹Ÿæ˜¯åœ¨å‘¨æœ«æ•´ç†å¤§æ™šä¸Šå†™çš„ã€‚åˆšè¿›å…¬å¸å°±ç»™äº†ä¸€ä¸ª Consul çš„æœåŠ¡å‘ç°ä¸æ³¨å†Œå’Œå¥åº·æ£€æŸ¥çš„é¡¹ç›®ï¼Œé‡Œé¢æ¶‰åŠçš„ä¸œè¥¿æœ‰ Consulã€Dockerã€Nginxã€Luaã€ElasticSearch è¿˜æœ‰å‡ ä¸ªå¾ˆè½»é‡çº§çš„æ¡†æ¶ï¼Œå¯¹æˆ‘æ¥è¯´å‡ ä¹éƒ½æ˜¯æ–°ä¸œè¥¿ï¼Œç¡®å®éœ€è¦æ—¶é—´å»äº†è§£ï¼Œå†ä¼˜åŒ–å’Œæ”¹é‡Œé¢çš„ bug çš„è¿‡ç¨‹ä¸­ï¼Œå¹¸å¥½æˆ‘è€å¤§å’Œæˆ‘ç†äº†å‡ æ¬¡æ€è·¯ï¼Œæ‰è®©æˆ‘å¯¹æ•´ä¸ªé¡¹ç›®æœ‰æ‰€è¿›å±•ï¼Œåç»­ç»§ç»­æ˜¯åœ¨ä¼˜åŒ–è¿™é¡¹ç›®ï¼ˆå¯èƒ½ä»¥åè¿™ä¸ªé¡¹ç›®çš„æ‰€æœ‰ä¸œè¥¿éƒ½æ˜¯æˆ‘æ¥åšï¼‰ã€‚åœ¨ä¸Šæµ·ï¼Œä½çš„åœ°æ–¹ç¦»å…¬å¸æœ‰ä¸€å®šçš„è·ç¦»ï¼Œä¸Šç­å‡ ä¹è¦ä¸€ä¸ªå°æ—¶ï¼Œæ¯å¤©èŠ±åœ¨ä¸Šç­è·¯ä¸Šçš„æ—¶é—´å¾ˆå¤šï¼Œè¿™ä¹Ÿå¯¼è‡´æˆ‘æ¯å¤©æ„Ÿè§‰å¾ˆå¿™ã€‚å…¬å¸ä¸Šç­æ—¶é—´æ¯”è¾ƒå¼¹æ€§ï¼Œæ— æ‰“å¡ï¼Œè™½è¯´å…¬å¸ä¸åŠ ç­ï¼Œä½†æ˜¯æ¯å¤©è‡ªå·±éƒ½ä¸æ€ä¹ˆä¼šæŒ‰ç‚¹ä¸‹ç­ï¼Œè‡ªå·±ä¹Ÿæƒ³åœ¨å®ä¹ é˜¶æ®µå¤šå­¦ç‚¹ä¸œè¥¿ï¼è¿™æ®µæ—¶é—´ä¹Ÿæ˜¯æœ€å…³é”®çš„æ—¶é—´ï¼Œç¢°åˆ°ä¸ªé—®é¢˜ï¼Œè¦èŠ±å¥½ä¹…æ—¶é—´æ‰èƒ½è§£å†³ï¼Œä¹Ÿæœ‰å¯èƒ½æœªå¿…è§£å†³å¾—äº†ï¼Œæœ‰æ—¶è§‰å¾—è‡ªå·±å•¥éƒ½ä¸ä¼šï¼Œè¿™ä¹ˆç‚¹ä¸œè¥¿éƒ½åšä¸å¥½ï¼Œæœ‰ç‚¹å¦å®šè‡ªå·±ã€‚è¿™ä¹Ÿç¡®å®æ˜¯è‡ªå·±çš„æŠ€æœ¯çŸ¥è¯†æ ˆç¼ºä¹ï¼Œå’Œè‡ªå·±å­¦çš„ SSMã€Spring Boot è¿™äº›éƒ½ä¸ç›¸å…³ï¼Œä¹Ÿä¸æ€ä¹ˆå†™ä¸šåŠ¡é€»è¾‘ä»£ç ã€‚æ‰€ä»¥æ„Ÿè§‰å¾ˆç—›è‹¦ï¼Œä¸åƒè‡ªå·±ä»¥å‰å†™çš„ä»£ç é‚£æ ·é¡ºç•…ï¼Œå½“ç„¶å¯èƒ½æ˜¯è‡ªå·±ä»¥å‰è‡ªå·±å†™çš„é¡¹ç›®å¤ª low äº†ã€‚ çœ‹åˆ°æ˜é‡‘-å‡¯ä¼¦å¾æ–‡ä¸­å†™åˆ°ï¼š å…¬å¸å…¶å®å¹¶ä¸æœŸæœ›åˆšåˆšè¿›æ¥çš„ä½ ï¼Œèƒ½å¤Ÿåˆ›é€ å¤šå°‘ä»·å€¼ã€‚æ–°äººæ˜¯è¦æˆé•¿çš„ï¼Œåœ¨æˆé•¿æœŸéš¾å…ä¼šé‡åˆ°å„ç§å„æ ·çš„å°é—®é¢˜ï¼Œè¿™å¯èƒ½æ˜¯å¤§å¤šæ•°äººçš„å¿…ç»ä¹‹è·¯ï¼Œå› ä¸ºä½ æ‰€çœ‹åˆ°çš„åŒäº‹ï¼Œä»–ä»¬éƒ½æ¯”ä½ åœ¨å·¥ä½œé¢†åŸŸå¾…çš„æ—¶é—´æ›´ä¹…ï¼Œæœ‰æ›´å¤šçš„ç»éªŒï¼Œå¯ä»¥æŠŠä»–ä»¬ä½œä¸ºç›®æ ‡ï¼Œä½†ä¸è¦æŠŠä»–ä»¬ä½œä¸ºç°åœ¨è‡ªå·±çš„æ ‡å‡†ï¼Œé‚£æ ·ä¼šå‹åŠ›å¤ªå¤§ã€‚ æ„Ÿè§‰è¿™æ®µè¯å¯¹æˆ‘ç°åœ¨å¾ˆå—ç”¨ï¼ åŠ æ²¹ï¼Œå¥½å¥½æŒºè¿‡è¿™ä¸ªé˜¶æ®µï¼Œåˆ«è½»æ˜“è¯´æ”¾å¼ƒï¼ ä¹¦ç±æ¨èå¤§å­¦ï¼Œæˆ‘ä¸æ€ä¹ˆå–œæ¬¢ç©æ¸¸æˆï¼Œè‡ªå·±ä¹Ÿè¿˜ç®—ä¸æ€ä¹ˆå •è½å§ï¼Œçœ‹äº†ä»¥ä¸‹çš„ä¸€äº›ä¹¦ç±ï¼Œç®—æ˜¯å¯¹æˆ‘åé¢å†™åšå®¢ã€æ‰¾å·¥ä½œä¹Ÿæœ‰å¾ˆå¤§çš„å¸®åŠ©ã€‚å¦‚æœä½ æ˜¯å¤§ç¥ï¼Œè¯·å¿½ç•¥ï¼Œå¦‚æœä½ è¿˜æ˜¯è¿˜åœ¨å¤§å­¦ï¼Œå’Œæˆ‘ä¸€æ ·ä¸æƒ³æŠŠæ—¶é—´æµªè´¹åœ¨æ¸¸æˆä¸Šï¼Œå¯ä»¥çœ‹çœ‹æˆ‘æ¨èçš„ä¸€äº›ä¹¦ç±ï¼Œæœ‰æƒ³è®¨è®ºçš„è¯·åœ¨è¯„è®ºä¸‹ç•™ä¸‹ä½ çš„è¯„è®ºæˆ–è€…åŠ ä¸Šé¢ç»™çš„ç¾¤å·ã€‚ Java1ã€ã€ŠJava æ ¸å¿ƒæŠ€æœ¯ã€‹å·ä¸€ ã€å·äºŒ ä¸¤æœ¬ä¹¦ï¼Œç®—æ˜¯å…¥é—¨æ¯”è¾ƒå¥½çš„ä¹¦ç±äº† 2ã€ã€Šç–¯ç‹‚ Java è®²ä¹‰ã€‹ å¾ˆåšçš„ä¸€æœ¬ä¹¦ï¼Œé‡Œé¢çš„å†…å®¹ä¹Ÿæ˜¯å¾ˆæ³¨é‡åŸºç¡€äº† 3ã€ã€ŠJava å¹¶å‘ç¼–ç¨‹çš„è‰ºæœ¯ã€‹â€”â€” æ–¹è…¾é£ ã€é­é¹ã€ç¨‹æ™“æ˜è‘— æ–¹è…¾é£ æ˜¯å¹¶å‘ç¼–ç¨‹ç½‘çš„åˆ›å§‹äººï¼Œé‡Œé¢çš„æ–‡ç« ç¡®å®è¿˜ä¸é”™ï¼Œå¯ä»¥å¤šçœ‹çœ‹é‡Œé¢çš„æ–‡ç« ï¼Œæ”¶è·ç»å¯¹å¾ˆå¤§ã€‚ 4ã€ã€Š Javaå¤šçº¿ç¨‹ç¼–ç¨‹æ ¸å¿ƒæŠ€æœ¯ã€‹â€”â€” é«˜æ´ªå²©è‘— è¿™æœ¬ä¹¦ä¹Ÿç®—æ˜¯å…¥é—¨å¤šçº¿ç¨‹ç¼–ç¨‹çš„ä¸é”™ä¹¦ç±ï¼Œæˆ‘ä¹‹å‰è¿˜å†™äº†ä¸€ç¯‡è¯»ä¹¦ç¬”è®°å‘¢ï¼Œã€ŠJava å¤šçº¿ç¨‹ç¼–ç¨‹æ ¸å¿ƒæŠ€æœ¯ã€‹å­¦ä¹ ç¬”è®°åŠæ€»ç»“ , å¤§å®¶å¦‚æœä¸æƒ³çœ‹ä¹¦çš„å¯ä»¥å»çœ‹æˆ‘çš„ç¬”è®°ã€‚ 5ã€ã€ŠJava å¹¶å‘ç¼–ç¨‹å®æˆ˜ã€‹ è¿™æœ¬ä¹¦è®²çš„æœ‰ç‚¹éš¾æ‡‚å•Šï¼Œä¸è¿‡ç¡®å®ä¹Ÿæ˜¯ä¸€æœ¬å¾ˆå¥½çš„ä¹¦ï¼Œä»¥ä¸Šä¸‰æœ¬ä¹¦ç±å¦‚æœéƒ½å¼„æ‡‚äº†ï¼Œæˆ‘è§‰å¾—ä½ å¹¶å‘ç¼–ç¨‹è¿™å—å¯èƒ½å¤§æ¦‚å°± OK äº†ï¼Œç„¶åå†å»çœ‹çœ‹çº¿ç¨‹æ± çš„æºç ï¼Œäº†è§£ä¸‹çº¿ç¨‹æ± ï¼Œæˆ‘è§‰å¾—é‚£å°±æ›´æ£’äº†ã€‚ä¸æƒ³çœ‹çš„è¯ï¼Œè¯·çœ‹æˆ‘çš„åšå®¢ï¼šJava çº¿ç¨‹æ± è‰ºæœ¯æ¢ç´¢ æˆ‘ä¸ªäººè§‰å¾—è¿˜æ˜¯å†™çš„å¾ˆä¸é”™ï¼Œé‚£äº›å¤§å‚é¢è¯•ä¹Ÿå‡ ä¹éƒ½ä¼šé—®çº¿ç¨‹æ± çš„ä¸œè¥¿ï¼Œç„¶åå¤§æ¦‚å†…å®¹ä¹Ÿå°±æ˜¯æˆ‘è¿™åšå®¢å†™çš„ 6ã€ã€ŠEffective Javaã€‹ä¸­æ–‡ç‰ˆ ç¬¬äºŒç‰ˆ ç®—æ˜¯ Java çš„è¿›é˜¶ä¹¦ç±äº†ï¼Œé¢è¯•å¥½å¤šé—®é¢˜ä¹Ÿæ˜¯ä»è¿™å‡ºæ¥çš„ 7ã€ã€Šæ·±å…¥ç†è§£ Java è™šæ‹Ÿæœºâ€”â€”JVMé«˜çº§ç‰¹æ€§ä¸æœ€ä½³å®è·µã€‹ç¬¬äºŒç‰ˆ è¿™ç®—æ˜¯å›½å†…è®² JVM æœ€æ¸…æ¥šçš„ä¹¦äº†å§ï¼Œç›®å‰è¿˜æ˜¯åªçœ‹äº†ä¸€éï¼Œåé¢ç»§ç»­å•ƒï¼Œå¤§å‚é¢è¯•å‡ ä¹ä¹Ÿæ˜¯éƒ½ä¼šè€ƒ JVM çš„ï¼Œé˜¿é‡Œé¢ JVM ç‰¹åˆ«å¤šï¼Œæƒ³è¿›é˜¿é‡Œçš„åŒå­¦è¯·ä¸€å®šè¦ä¹°è¿™æœ¬ä¹¦å»çœ‹ã€‚ 8ã€ã€Šæ·±å…¥åˆ†æJava WebæŠ€æœ¯å†…å¹• ä¿®è®¢ç‰ˆã€‹è®¸ä»¤æ³¢è‘— é‡Œé¢çŸ¥è¯†å¾ˆå¹¿ï¼Œæ¯ä¸€ç« éƒ½æ˜¯ä¸€ä¸ªä¸åŒçš„çŸ¥è¯†ï¼Œå¯è§ä½œè€…çš„ä¼˜ç§€ï¼Œä¸æ„§æ˜¯é˜¿é‡Œå¤§ç¥ã€‚ 9ã€ã€Šå¤§å‹ç½‘ç«™ç³»ç»Ÿä¸ Java ä¸­é—´ä»¶å®è·µã€‹â€”â€” æ›½å®ªæ° è‘— ä½œè€…æ˜¯å‰æ·˜å®æŠ€æœ¯æ€»ç›‘ï¼Œè§è¯äº†æ·˜å®ç½‘çš„å‘å±•ï¼Œé‡Œé¢çš„è®²çš„å†…å®¹ä¹Ÿæ˜¯å¾ˆå¥½ï¼Œçœ‹å®Œèƒ½è®©è‡ªå·±ä¹Ÿç«™åœ¨é«˜å¤„å»æ€è€ƒé—®é¢˜ã€‚ 10ã€ã€Šå¤§å‹ç½‘ç«™æŠ€æœ¯æ¶æ„ â€”â€” æ ¸å¿ƒåŸç†ä¸æ¡ˆä¾‹åˆ†æã€‹ â€”â€” ææ™ºæ…§ è‘— æœ€å¥½å’Œä¸Šé¢é‚£æœ¬ä¹¦ç±ä¸€èµ·çœ‹ï¼Œæ•ˆæœæ›´å¥½ï¼Œä¸¤æœ¬çœ‹å®Œäº†ï¼Œæå‡æ€æƒ³çš„é«˜åº¦ï¼ 11ã€ã€Šç–¯ç‹‚Java.çªç ´ç¨‹åºå‘˜åŸºæœ¬åŠŸçš„16è¯¾ã€‹ æåˆš è‘— ä¹¦ä¸­å¾ˆæ³¨é‡ Java çš„ä¸€äº›ç»†èŠ‚ï¼Œè®²çš„å¾ˆæ·±å…¥ï¼Œä½†æ˜¯ä¹¦ä¸­çš„é”™åˆ«å­—ç‰¹å¤šï¼Œå¯ä»¥çœ‹çœ‹æˆ‘çš„è¯»ä¹¦ç¬”è®°ï¼šã€Šç–¯ç‹‚ Java çªç ´ç¨‹åºå‘˜åŸºæœ¬åŠŸçš„ 16 è¯¾ã€‹è¯»ä¹¦ç¬”è®° 12ã€ã€ŠSpring å®æˆ˜ã€‹ Spring å…¥é—¨ä¹¦ç± 13ã€ã€ŠSpring æ­ç§˜ã€‹â€”â€” ç‹ç¦å¼º è‘— è¿™æœ¬ä¹¦åˆ«æå¤šç‰›äº†ï¼Œå‡ºç‰ˆæ—¶æœŸä¸º 2009 å¹´ï¼Œè±†ç“£è¯„åˆ†ä¸º 9.0 åˆ†ï¼Œå†™çš„æ˜¯çœŸæ£’ï¼æŠŠ Spring çš„ IOC å’Œ AOP ç‰¹æ€§å†™çš„å¾ˆæ¸…æ¥šï¼ŒæŠŠ Spring çš„æ¥é¾™å»è„‰è®²çš„å¾ˆå…¨ã€‚å¢™è£‚æ¨èè¿™æœ¬ä¹¦ç±ï¼Œå¦‚æœä½ æƒ³çœ‹ Springï¼Œä½œè€…å¾ˆç‰›ï¼Œèµ„æ·±æ¶æ„å¸ˆï¼Œå¾ˆæœ‰å¹¸å’Œä½œè€…æœ‰è¿‡ä¸€æ¬¡äº¤æµï¼Œå½“æ—¶å› ä¸ºè‡ªå·±çš„ä¸€ç¯‡åšå®¢ Pyspideræ¡†æ¶ â€”â€” Pythonçˆ¬è™«å®æˆ˜ä¹‹çˆ¬å– V2EX ç½‘ç«™å¸–å­ï¼Œç«Ÿç„¶æ‰¾åˆ°æˆ‘æƒ³å«æˆ‘å»å®ä¹ ï¼Œå¯æƒœäº†ï¼Œå½“æ—¶å·®ç‚¹å°±è·Ÿç€ä»–æ··äº†ã€‚ä½œè€…è¿˜æœ‰ä¸€æœ¬ä¹¦ ã€ŠSpring Boot æ­ç§˜ã€‹ã€‚ 14ã€ã€ŠSpring æŠ€æœ¯å†…å¹•ã€‹â€”â€” æ·±å…¥è§£æ Spring æ¶æ„ä¸è®¾è®¡åŸç† è®²è§£ Spring æºç ï¼Œæ·±å…¥äº†å†…éƒ¨æœºåˆ¶ï¼Œä¸ªäººè§‰å¾—è¿˜æ˜¯ä¸é”™çš„ã€‚ 15ã€Spring å®˜æ–¹çš„è‹±æ–‡æ–‡æ¡£ è¿™ä¸ªåˆ«æäº†ï¼Œå¾ˆå¥½ï¼Œèƒ½çœ‹è‹±æ–‡å°½é‡çœ‹è‹±æ–‡ 16ã€ã€Šè·Ÿå¼€æ¶›å­¦ Spring 3ã€‹ ã€Šè·Ÿå¼€æ¶›å­¦ Spring MVCã€‹ äº¬ä¸œå¤§ç¥ï¼Œè†œ 17ã€ã€Šçœ‹é€springMvcæºä»£ç åˆ†æä¸å®è·µã€‹ ç®—æ˜¯æŠŠ Spring MVC æºç è®²çš„å¾ˆå¥½çš„äº† è§æˆ‘çš„ç¬”è®°ï¼š 1ã€é€šè¿‡æºç è¯¦è§£ Servlet 2 ã€çœ‹é€ Spring MVC æºä»£ç åˆ†æä¸å®è·µ â€”â€” ç½‘ç«™åŸºç¡€çŸ¥è¯† 3 ã€çœ‹é€ Spring MVC æºä»£ç åˆ†æä¸å®è·µ â€”â€” ä¿¯è§† Spring MVC 4 ã€çœ‹é€ Spring MVC æºä»£ç åˆ†æä¸å®è·µ â€”â€” Spring MVC ç»„ä»¶åˆ†æ 18ã€ã€ŠSpring Boot å®æˆ˜ã€‹ 19ã€Spring Boot å®˜æ–¹ Reference Guide ç½‘ä¸Šå¥½å¤šå†™ SpringBoot çš„åšå®¢ï¼Œå‡ ä¹å’Œè¿™ä¸ªå·®ä¸å¤šã€‚ 20ã€ã€ŠJavaEEå¼€å‘çš„é¢ è¦†è€…: Spring Bootå®æˆ˜ã€‹ 21ã€MyBatis å½“ç„¶æ˜¯å®˜æ–¹çš„æ–‡æ¡£æœ€å¥½äº†ï¼Œè€Œä¸”è¿˜æ˜¯ä¸­æ–‡çš„ã€‚ è‡ªå·±ä¹Ÿå†™è¿‡å‡ ç¯‡æ–‡ç« ï¼Œå¸®åŠ©è¿‡å¾ˆå¤šäººå…¥é—¨ï¼Œä¼ é€é—¨ï¼š 1ã€é€šè¿‡é¡¹ç›®é€æ­¥æ·±å…¥äº†è§£Mybatisï¼ˆä¸€ï¼‰/) 2ã€é€šè¿‡é¡¹ç›®é€æ­¥æ·±å…¥äº†è§£Mybatisï¼ˆäºŒï¼‰/) 3ã€é€šè¿‡é¡¹ç›®é€æ­¥æ·±å…¥äº†è§£Mybatisï¼ˆä¸‰ï¼‰/) 4ã€é€šè¿‡é¡¹ç›®é€æ­¥æ·±å…¥äº†è§£Mybatisï¼ˆå››ï¼‰/) 22ã€ã€Šæ·±å…¥ç†è§£ Java å†…å­˜æ¨¡å‹ã€‹â€”â€” ç¨‹æ™“æ˜ è‘— æˆ‘è§‰å¾—æ¯ä¸ª Java ç¨‹åºå‘˜éƒ½åº”è¯¥äº†è§£ä¸‹ Java çš„å†…å­˜æ¨¡å‹ï¼Œè¯¥ä¹¦ç±æˆ‘çœ‹çš„æ˜¯ç”µå­ç‰ˆçš„ï¼Œä¸å¤šï¼Œä½†æ˜¯è®²çš„å´å¾ˆæ¸…æ¥šï¼ŒæŠŠé‡æ’åºã€é¡ºåºä¸€è‡´æ€§ã€Volatileã€é”ã€finalç­‰å†™çš„å¾ˆæ¸…æ¥šã€‚ Linuxã€Šé¸Ÿå“¥çš„Linuxç§æˆ¿èœ åŸºç¡€å­¦ä¹ ç¯‡(ç¬¬ä¸‰ç‰ˆ) ã€‹ é¸Ÿå“¥çš„Linuxç§æˆ¿èœï¼šæœåŠ¡å™¨æ¶è®¾ç¯‡(ç¬¬3ç‰ˆ) é¸Ÿå“¥çš„ä¹¦ è®¡ç®—æœºç½‘ç»œã€Šè®¡ç®—æœºç½‘ç»œç¬¬å…­ç‰ˆâ€”â€”è°¢å¸Œä» ç¼–ã€‹ ã€Šè®¡ç®—æœºç½‘ç»œè‡ªé¡¶å‘ä¸‹æ–¹æ³•ã€‹ è®¡ç®—æœºç³»ç»Ÿã€Šä»£ç æ­ç§˜ï¼šä»Cï¼C.çš„è§’åº¦æ¢ç§˜è®¡ç®—æœºç³»ç»Ÿ â€”â€” å·¦é£ã€‹ ã€Šæ·±å…¥ç†è§£è®¡ç®—æœºç³»ç»Ÿã€‹ ã€Šè®¡ç®—æœºç§‘å­¦å¯¼è®º_ä½›ç½—èµã€‹ æ•°æ®åº“ã€Šé«˜æ€§èƒ½MySQLã€‹ ã€ŠMysqlæŠ€æœ¯å†…å¹•InnoDBå­˜å‚¨å¼•æ“ã€‹ Pythonè¿™é—¨è¯­è¨€è¯­æ³•å¾ˆç®€å•ï¼Œä¸Šæ‰‹å¿«ï¼Œä¸è¿‡æˆ‘ç›®å‰å¥½ä¹…æ²¡ç”¨äº†ï¼Œéƒ½å¿˜å¾—å·®ä¸å¤šäº†ã€‚å½“æ—¶æ˜¯çœ‹çš„å»–é›ªå³°çš„ Python åšå®¢ è‡ªå·±ä¹Ÿç”¨ Python åšçˆ¬è™«å†™è¿‡å‡ ç¯‡åšå®¢ï¼Œä¸è¿‡æœ‰äº›æ˜¯åœ¨å‰äººçš„åŸºç¡€ä¸Šå†™çš„ã€‚æ„Ÿè°¢é‚£äº›æ ½æ ‘çš„äººï¼ å·¥å…·Git ï¼š å»–é›ªå³°çš„ Git æ•™ç¨‹ IDEAï¼šIntelliJ IDEA ç®€ä½“ä¸­æ–‡ä¸“é¢˜æ•™ç¨‹ Mavenï¼šã€ŠMavenå®æˆ˜ã€‹ å…¶ä»–ã€Šå¦‚ä½•é«˜æ•ˆå­¦ä¹ -æ–¯ç§‘ç‰¹æ¨ã€‹ æ•™ä½ æ€æ ·é«˜æ•ˆå­¦ä¹ çš„ ã€Šè½¯æŠ€èƒ½ï¼šä»£ç ä¹‹å¤–çš„ç”Ÿå­˜æŒ‡å—ã€‹ ç¨‹åºå‘˜é™¤äº†å†™ä»£ç ï¼Œè¿˜å¾—æ‡‚ç‚¹å…¶ä»–çš„è½¯æŠ€èƒ½ã€‚ ã€Šæé—®çš„æ™ºæ…§â€œä¸­æ–‡ç‰ˆâ€ã€‹ ã€ŠHow-To-Ask-Questions-The-Smart-Wayã€‹ ä½œä¸ºç¨‹åºå‘˜çš„ä½ ï¼Œä¸€å®šè¦å­¦ä¼šå’‹æé—®ï¼Œä¸ç„¶åˆ«äººéƒ½ä¸æƒ³é¸Ÿä½ ã€‚ ä¼˜ç§€ç½‘ç«™æ¨è1ã€GitHub åˆ«å’Œæˆ‘è¯´ä¸çŸ¥é“ 2ã€InfoQ æ–‡ç« å¾ˆä¸é”™ 3ã€CSDN ç»å¸¸çœ‹åšå®¢ä¸“å®¶çš„åšå®¢ï¼Œé‡Œé¢å¤§ç‰›å¾ˆå¤šï¼Œä¼ é€é—¨ï¼šzhisheng 4ã€çŸ¥ä¹ å¤šå…³æ³¨äº›å¤§ç‰›ï¼Œçœ‹ä»–ä»¬å¹é€¼ 5ã€æ˜é‡‘ è‡ªå·±ä¹Ÿåœ¨ä¸Šé¢å†™ä¸“æ ï¼Œç²‰ä¸å·²ç»è¶…è¿‡ä¸€ä¸‡äº†ï¼Œä¼ é€é—¨ ï¼šzhisheng 6ã€å¹¶å‘ç¼–ç¨‹ç½‘ å‰é¢å·²ç»ä»‹ç» 7ã€developerworks ä¸Šé¢çš„åšå®¢ä¹Ÿå¾ˆå¥½ 8ã€åšå®¢å›­ é‡Œé¢åº”è¯¥å¤§ç‰›ä¹Ÿå¾ˆå¤šï¼Œä¸è¿‡è‡ªå·±æ²¡åœ¨ä¸Šé¢å†™è¿‡åšå®¢ 9ã€å¾®ä¿¡å…¬ä¼—å· å…³æ³¨äº†å¾ˆå¤šäººï¼Œæœ‰äº›äººçš„æ–‡ç« ç¡®å®å¾ˆå¥½ï¼Œå¹³æ—¶ä¹Ÿç»å¸¸çœ‹ã€‚ 10ã€ç‰›å®¢ç½‘ åˆ·ç¬”è¯•é¢˜ä¸é”™çš„åœ°æ–¹ï¼Œé‡Œé¢å¤§ç‰›è¶…å¤šï¼Œæ€€å¿µå¶ç¥å’Œå·¦ç¥è®²è¯¾çš„æ—¶å€™ï¼Œè¿˜æœ‰å¾ˆæœ‰çˆ±çš„ç‰›å¦¹ã€‚ ä¼˜ç§€åšå®¢æ¨èå»–é›ªå³° Git å’Œ Python å…¥é—¨æ–‡ç« å°±æ˜¯ä»ä»–åšå®¢çœ‹çš„ é˜®ä¸€å³°çš„ç½‘ç»œæ—¥å¿— é…·å£³-é™ˆçš“ RednaxelaFX Rå¤§ï¼Œç‰›é€¼çš„ä¸å¾—äº† æ±Ÿå—ç™½è¡£ è€å¸æœº stormzhang äººç§°å¸…é€¼å¼ ï¼Œå¾®ä¿¡å…¬ä¼—å·å†™çš„ä¸é”™ ä½ å‡ç¬¨ é˜¿é‡Œæ JVM çš„ï¼Œå¾ˆå‰å®³ å å°ç‹¼ æ³¥ç“¦åŒ BYSocket å´”åº†æ‰ å†™äº†å¥½å¤š Python çˆ¬è™«ç›¸å…³çš„æ–‡ç«  çº¯æ´çš„å¾®ç¬‘ SpringBoot ç³»åˆ—ä¸é”™ï¼Œå…¶ä»–çš„æ–‡ç« è‡ªå·±çœ‹äº†æ„Ÿè§‰æ˜¯è‡ªå·±å–œæ¬¢çš„é‚£ç§æ–‡ç¬” ç¨‹åºçŒ¿DD å‘¨ç«‹ èŠ‹é“æºç çš„åšå®¢ å¥½å¤šç³»åˆ—çš„æºç åˆ†æ zhisheng è¿™ä¸ªæ˜¯æˆ‘ä¸è¦è„¸ï¼Œç«Ÿç„¶æŠŠè‡ªå·±åšå®¢åœ°å€çš„å†™ä¸Šå»äº† æ±‚èŒèµ„æ–™æ”¾é€è‡ªå·±åœ¨å‡†å¤‡æ‰¾å·¥ä½œé‚£æ®µæ—¶é—´ï¼Œç³»ç»Ÿçš„å¤ä¹ äº†ä¸‹å¤§å­¦æ‰€å­¦çš„çŸ¥è¯†ï¼ŒæœŸé—´åœ¨ç½‘ä¸Šå‚è€ƒäº†å¾ˆå¤šä¸é”™çš„åšå®¢ï¼Œå¹¶æ”¶é›†ä¸‹æ¥äº†ï¼Œä¸ªäººè§‰å¾—è¿˜æ˜¯ä¸é”™çš„ï¼Œå› ä¸ºè¿™æ˜¯åŒ…å«äº†è‡ªå·±çš„å¿ƒè¡€ï¼Œæ‰€ä»¥ä¸€ç›´æ²¡æ€ä¹ˆé€å‡ºæ¥ï¼Œåªç»™è¿‡æˆ‘çš„å‡ ä¸ªåŒå­¦ï¼Œè¿˜æœ‰å°±æ˜¯ä¸€äº›å­¦ä¹ è§†é¢‘å’Œå®æˆ˜é¡¹ç›®è§†é¢‘ã€‚å€Ÿç€è¿™æ¬¡å¾æ–‡çš„æœºä¼šï¼Œæˆ‘æƒ³é€ç»™é‚£äº›æœ‰ç¼˜äººï¼Œå¸Œæœ›ä½ æˆ–è®¸æ˜¯é‚£ç§åœ¨æ±‚èŒé“è·¯ä¸Šæ­£åœ¨è‰°éš¾èµ°ç€çš„äººï¼›æˆ–è®¸æ˜¯å¤§ä¸€å¤§äºŒçš„å­¦å¼Ÿå­¦å¦¹ä»¬å´æƒ³å¥½å¥½å­¦ä¹ ï¼Œæœ‰ä¸ªå¥‹æ–—çš„ç›®æ ‡ï¼Œä¸å ªåœ¨å¤§å­¦å •è½çš„ï¼›æˆ–è®¸æ˜¯å·¥ä½œä¸€ä¸¤å¹´åæ„Ÿè§‰åŸºç¡€è¿˜æ¯”è¾ƒè–„å¼±çš„ã€‚è¦èµ„æ–™çš„æ—¶å€™æœŸæœ›ä½ èƒ½ç®€å•çš„ä»‹ç»ä¸‹è‡ªå·±ï¼ŒæœŸæœ›ä½ ï¼è”ç³»æ–¹å¼è¯·çœ‹æ–‡ç« æœ€ä¸‹é¢ã€‚ æœ€åé€ä¸€å¥è¯ï¼Œè¶ŠåŠªåŠ›ï¼Œè¶Šå¹¸è¿ï¼Œç¥æ—©æ—¥æˆä¸ºå¤§ç¥ï¼ è¿™äº›åœ°æ–¹å¯ä»¥æ‰¾åˆ°æˆ‘ï¼š blog: http://www.54tianzhisheng.cn/ GitHub: https://github.com/zhisheng17 QQ ç¾¤ï¼š528776268","tags":[{"name":"é¢ç»","slug":"é¢ç»","permalink":"http://yoursite.com/tags/é¢ç»/"}]},{"title":"Linux ä¸‹ lua å¼€å‘ç¯å¢ƒå®‰è£…åŠå®‰è£… luafilesystem","date":"2017-09-14T16:00:00.000Z","path":"2017/09/15/linux-lua-lfs-install/","text":"ç«äº‘é‚ªç¥è¯­å½•ï¼šå¤©ä¸‹æ­¦åŠŸï¼Œæ— åšä¸ç ´ï¼Œå”¯å¿«ä¸ç ´ï¼Nginx çš„çœ‹å®¶æœ¬é¢†å°±æ˜¯é€Ÿåº¦ï¼ŒLua çš„æ‹¿æ‰‹å¥½æˆäº¦æ˜¯é€Ÿåº¦ï¼Œè¿™ä¸¤è€…çš„ç»“åˆåœ¨é€Ÿåº¦ä¸Šæ— ç–‘æœ‰åŸºå› ä¸Šçš„ä¼˜åŠ¿ã€‚ æœ€è¿‘ä¸€ç›´å†æŠ˜è…¾è¿™ä¸ªï¼Œå¹²è„†å°±ç¨å¾®æ•´ç†ä¸‹ã€‚ä»¥é˜²åé¢ç»§ç»­è·³å‘ï¼ å®‰è£…ï¼š 1.å…ˆå®‰è£… lua çš„ç›¸å…³ä¾èµ–å®‰è£… C å¼€å‘ç¯å¢ƒç”±äº gcc åŒ…éœ€è¦ä¾èµ– binutils å’Œ cpp åŒ…ï¼Œå¦å¤– make åŒ…ä¹Ÿæ˜¯åœ¨ç¼–è¯‘ä¸­å¸¸ç”¨çš„ï¼Œæ‰€ä»¥ä¸€å…±éœ€è¦ 9 ä¸ªåŒ…æ¥å®Œæˆå®‰è£…ï¼Œå› æ­¤æˆ‘ä»¬åªéœ€è¦æ‰§è¡Œ 9 æ¡æŒ‡ä»¤å³å¯ï¼š 12345678910gccï¼šå‘½ä»¤æœªæ‰¾åˆ°ï¼ˆè§£å†³æ–¹æ³•ï¼‰yum install cppyum install binutilsyum install glibcyum install glibc-kernheadersyum install glibc-commonyum install glibc-develyum install gccyum install makeyum install readline-devel 2.å®‰è£… lua5.1.5ä¸‹è½½åœ°å€ï¼šhttp://www.lua.org/ftp/ 1234567891011121314151617181920tar -zxvf lua-5.1.5.tar.gzcd lua-5.1.5vi Makefileè®¾ç½® INSTALL_TOP= /usr/local/luamake linuxmake testmake installrm -rf /usr/bin/lualn -s /usr/local/lua/bin/lua /usr/bin/lualn -s /usr/local/lua/share/lua /usr/share/luaè®¾ç½®ç¯å¢ƒå˜é‡ï¼švim /etc/profileæ·»åŠ ï¼šexport LUA_HOME=/usr/local/luaexport PATH=$PATH:$LUA_HOME/binç¯å¢ƒå˜é‡ç”Ÿæ•ˆï¼šsource /etc/profile 3ã€å®‰è£… luarocksæ˜¯ä¸€ä¸ª Lua åŒ…ç®¡ç†å™¨ï¼ŒåŸºäº Lua è¯­è¨€å¼€å‘ï¼Œæä¾›ä¸€ä¸ªå‘½ä»¤è¡Œçš„æ–¹å¼æ¥ç®¡ç† Lua åŒ…ä¾èµ–ã€å®‰è£…ç¬¬ä¸‰æ–¹ Lua åŒ…ç­‰ã€‚ åœ°å€ï¼š https://github.com/luarocks/luarocks 12345678910111213141516ä½¿ç”¨ luarocks-2.2.1 ç‰ˆæœ¬åœ¨æˆ‘æœºå™¨ä¸Šæ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯ä½¿ç”¨ luarocks-2.4.2 å‡ºç°é—®é¢˜wget http://luarocks.org/releases/luarocks-2.2.1.tar.gztar -zxvf luarocks-2.2.1.tar.gzcd luarocks-2.2.1./configure --with-lua=/usr/local --with-lua-include=/usr/local/lua/includeè®¾ç½®ç¯å¢ƒå˜é‡ï¼šexport LUA_LUAROCKS_PATH=/usr/local/luarocks-2.2.1export PATH=$PATH:$LUA_LUAROCKS_PATHmake &amp; make install 4ã€å®‰è£… luafilesystemæ˜¯ä¸€ä¸ªç”¨äº lua è¿›è¡Œæ–‡ä»¶è®¿é—®çš„åº“ï¼Œå¯ä»¥æ”¯æŒ lua 5.1 å’Œ lua5.2ï¼Œä¸”æ˜¯è·¨å¹³å°çš„ï¼Œåœ¨ä¸º lua å®‰è£… lfs ä¹‹å‰éœ€è¦å…ˆå®‰è£…luarocksã€‚å› ä¸ºè‡ªå·±çš„éœ€æ±‚åˆšå¥½éœ€è¦è¿™æ¨¡å—ã€‚ åœ°å€ï¼šhttps://github.com/keplerproject/luafilesystem æ–‡æ¡£ï¼š http://keplerproject.github.io/luafilesystem/index.html 1luarocks install luafilesystem 5ã€æµ‹è¯•æµ‹è¯• lua æ˜¯å¦å®‰è£…æˆåŠŸ lua -v ç»“æœï¼š 1Lua 5.1.5 Copyright (C) 1994-2012 Lua.org, PUC-Rio æµ‹è¯• luafilesystem æ˜¯å¦å®‰è£…æˆåŠŸ a.lua 123456789local lfs = require&quot;lfs&quot;function Rreturn(filePath) local time = os.date(&quot;%a, %d %b %Y %X GMT&quot;, lfs.attributes(filePath).modification) --æ‰“å°æ–‡ä»¶çš„ä¿®æ”¹æ—¶é—´ print(time)endRreturn(&quot;/opt/lua/a.txt&quot;) a.txt 123abc è¿è¡Œï¼š 1lua a.lua ç»“æœï¼š 1Tue, 12 Sep 2017 18:43:13 GMT å‡ºç°æ‰“å°å‡ºæ—¶é—´çš„ç»“æœå°±æ„å‘³ç€å·²ç»å®‰è£…å¥½äº†ã€‚ å½“ç„¶ä»¥ä¸Šè¿™æ˜¯åœ¨ Linux å®‰è£…çš„ï¼Œ Windows ä¸Šçš„å…¶å®æ¯”è¿™è¿˜ç®€å•äº†ï¼Œä½†æ˜¯å®‰è£… luafilesystem çš„è¯éœ€è¦è‡ªå·±å»ä¸‹è½½ä¸ª lfs.dll ï¼Œç„¶åæŠŠè¿™ä¸ªæ”¾åˆ° lua çš„å®‰è£…è·¯å¾„å»ã€‚å¾ˆç®€å•çš„ï¼Œè¿™é‡Œå°±ä¸ç»†è¯´äº†ã€‚ å‡ºç°è¿‡çš„é”™è¯¯ï¼š123456789101112[root@n1 lua-5.1.5]# make linux testcd src &amp;&amp; make linuxmake[1]: Entering directory `/opt/lua-5.1.5/src&apos;make all MYCFLAGS=-DLUA_USE_LINUX MYLIBS=&quot;-Wl,-E -ldl -lreadline -lhistory -lncurses&quot;make[2]: Entering directory `/opt/lua-5.1.5/src&apos;gcc -O2 -Wall -DLUA_USE_LINUX -c -o lapi.o lapi.cmake[2]: gccï¼šå‘½ä»¤æœªæ‰¾åˆ°make[2]: *** [lapi.o] é”™è¯¯ 127make[2]: Leaving directory `/opt/lua-5.1.5/src&apos;make[1]: *** [linux] é”™è¯¯ 2make[1]: Leaving directory `/opt/lua-5.1.5/src&apos;make: *** [linux] é”™è¯¯ 2 åŸå› ï¼šæœ€å¼€å§‹çš„é‚£äº›ä¾èµ–æ²¡å®‰è£…","tags":[{"name":"lua","slug":"lua","permalink":"http://yoursite.com/tags/lua/"}]},{"title":"Elasticsearch ç³»åˆ—æ–‡ç« ï¼ˆäºŒï¼‰ï¼šå…¨æ–‡æœç´¢å¼•æ“ Elasticsearch é›†ç¾¤æ­å»ºå…¥é—¨æ•™ç¨‹","date":"2017-09-08T16:00:00.000Z","path":"2017/09/09/Elasticsearch-install/","text":"ä»‹ç»ElasticSearch æ˜¯ä¸€ä¸ªåŸºäº Lucene çš„æœç´¢æœåŠ¡å™¨ã€‚å®ƒæä¾›äº†ä¸€ä¸ªåˆ†å¸ƒå¼å¤šç”¨æˆ·èƒ½åŠ›çš„å…¨æ–‡æœç´¢å¼•æ“ï¼ŒåŸºäº RESTful web æ¥å£ã€‚Elasticsearch æ˜¯ç”¨ Java å¼€å‘çš„ï¼Œå¹¶ä½œä¸º Apache è®¸å¯æ¡æ¬¾ä¸‹çš„å¼€æ”¾æºç å‘å¸ƒï¼Œæ˜¯å½“å‰æµè¡Œçš„ä¼ä¸šçº§æœç´¢å¼•æ“ã€‚è®¾è®¡ç”¨äºäº‘è®¡ç®—ä¸­ï¼Œèƒ½å¤Ÿè¾¾åˆ°å®æ—¶æœç´¢ï¼Œç¨³å®šï¼Œå¯é ï¼Œå¿«é€Ÿï¼Œå®‰è£…ä½¿ç”¨æ–¹ä¾¿ã€‚åŸºç™¾ç§‘ã€Stack Overflowã€Github éƒ½é‡‡ç”¨å®ƒã€‚ æœ¬æ–‡ä»é›¶å¼€å§‹ï¼Œè®²è§£å¦‚ä½•ä½¿ç”¨ Elasticsearch æ­å»ºè‡ªå·±çš„å…¨æ–‡æœç´¢å¼•æ“ã€‚æ¯ä¸€æ­¥éƒ½æœ‰è¯¦ç»†çš„è¯´æ˜ï¼Œå¤§å®¶è·Ÿç€åšå°±èƒ½å­¦ä¼šã€‚ ç¯å¢ƒ1ã€VMware 2ã€Centos 6.6 3ã€Elasticsearch 5.5.2 4ã€JDK 1.8 VMware å®‰è£…ä»¥åŠåœ¨ VMware ä¸­å®‰è£… Centos è¿™ä¸ªå°±ä¸è¯´äº†ï¼Œç¯å¢ƒé…ç½®ç›´æ¥é»˜è®¤å°±å¥½ï¼Œä¸è¿‡åˆ†é…ç»™æœºå™¨çš„å†…å­˜æœ€å¥½è®¾ç½®å¤§ç‚¹ï¼ˆå»ºè®® 2Gï¼‰ï¼Œ ä½¿ç”¨ dhclient å‘½ä»¤æ¥è‡ªåŠ¨è·å– IP åœ°å€ï¼ŒæŸ¥çœ‹è·å–çš„ IP åœ°å€åˆ™ä½¿ç”¨å‘½ä»¤ ip addr æˆ–è€… ifconfig ï¼Œåˆ™ä¼šçœ‹åˆ°ç½‘å¡ä¿¡æ¯å’Œ lo å¡ä¿¡æ¯ã€‚ ç»™è™šæ‹Ÿæœºé¢ä¸­çš„ linux è®¾ç½®å›ºå®šçš„ ipï¼ˆå› ä¸ºåé¢å‘ç°æ¯æ¬¡æœºå™¨é‡å¯ååˆè¦é‡æ–°ä½¿ç”¨ dhclient å‘½ä»¤æ¥è‡ªåŠ¨è·å– IP åœ°å€ï¼‰ 1vim /etc/sysconfig/network-scripts/ifcfg-eth0 ä¿®æ”¹ï¼š 12onboot=yesbootproto=static å¢åŠ ï¼šï¼ˆä¸‹é¢å¯è®¾ç½®å¯ä¸è®¾ç½®ï¼‰ 123IPADDR=192.168.1.113 ç½‘å¡IPåœ°å€GATEWAY=192.168.1.1NETMASK=255.255.255.0 è®¾ç½®å¥½ä¹‹åï¼ŒæŠŠç½‘ç»œæœåŠ¡é‡å¯ä¸€ä¸‹ï¼Œ service network restart ä¿®æ”¹ ip åœ°å€å‚è€ƒï¼š http://jingyan.baidu.com/article/e4d08ffdd417660fd3f60d70.html å¤§ç¯å¢ƒéƒ½å‡†å¤‡å¥½äº†ï¼Œä¸‹é¢å¼€å§‹å®‰è£…æ­¥éª¤ï¼š å®‰è£… JDK 1.8å…ˆå¸è½½è‡ªå¸¦çš„ openjdkï¼ŒæŸ¥æ‰¾ openjdk 1rpm -qa | grep java å¸è½½ openjdk 12yum -y remove java-1.7.0-openjdk-1.7.0.65-2.5.1.2.el65.x8664yum -y remove java-1.6.0-openjdk-1.6.0.0-11.1.13.4.el6.x86_64 è§£å‹ JDK å®‰è£…åŒ…ï¼š é™„ä¸Šjdk1.8çš„ä¸‹è½½åœ°å€ï¼šhttp://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html è§£å‹å®Œæˆåé…ç½®ä¸€ä¸‹ç¯å¢ƒå˜é‡å°± ok 1ã€åœ¨/usr/local/ä¸‹åˆ›å»ºJavaæ–‡ä»¶å¤¹ 12cd /usr/local/ è¿›å…¥ç›®å½•mkdir java æ–°å»ºjavaç›®å½• 2ã€æ–‡ä»¶å¤¹åˆ›å»ºå®Œæ¯•ï¼ŒæŠŠå®‰è£…åŒ…æ‹·è´åˆ° Java ç›®å½•ä¸­ï¼Œç„¶åè§£å‹ jdk åˆ°å½“å‰ç›®å½• 12cp /usr/jdk-8u144-linux-x64.tar.gz /usr/local/java/ **æ³¨æ„åŒ¹é…ä½ è‡ªå·±çš„æ–‡ä»¶å** æ‹·è´åˆ°javaç›®å½•tar -zxvf jdk-8u144-linux-x64.tar.gz è§£å‹åˆ°å½“å‰ç›®å½•ï¼ˆJavaç›®å½•ï¼‰ 3ã€è§£å‹å®Œä¹‹åï¼ŒJavaç›®å½•ä¸­ä¼šå‡ºç°ä¸€ä¸ªjdk1.8.0_144çš„ç›®å½•ï¼Œè¿™å°±è§£å‹å®Œæˆäº†ã€‚ä¹‹åé…ç½®ä¸€ä¸‹ç¯å¢ƒå˜é‡ã€‚ç¼–è¾‘/etc/ä¸‹çš„profileæ–‡ä»¶ï¼Œé…ç½®ç¯å¢ƒå˜é‡ 12345678vi /etc/profile è¿›å…¥profileæ–‡ä»¶çš„ç¼–è¾‘æ¨¡å¼åœ¨æœ€åè¾¹è¿½åŠ ä¸€ä¸‹å†…å®¹(**é…ç½®çš„æ—¶å€™ä¸€å®šè¦æ ¹æ®è‡ªå·±çš„ç›®å½•æƒ…å†µè€Œå®šå“¦ï¼**) JAVA_HOME=/usr/local/java/jdk1.8.0_144 CLASSPATH=$JAVA_HOME/lib/ PATH=$PATH:$JAVA_HOME/bin export PATH JAVA_HOME CLASSPATH ä¹‹åä¿å­˜å¹¶é€€å‡ºæ–‡ä»¶ä¹‹åã€‚ è®©æ–‡ä»¶ç”Ÿæ•ˆï¼šsource /etc/profile åœ¨æ§åˆ¶å°è¾“å…¥Java å’Œ Java -version çœ‹æœ‰æ²¡æœ‰ä¿¡æ¯è¾“å‡ºï¼Œå¦‚ä¸‹ï¼š java -version 123java version &quot;1.8.0_144&quot; Java(TM) SE Runtime Environment (build 1.8.0_60-b27) Java HotSpot(TM) Client VM (build 25.60-b23, mixed mode) èƒ½æ˜¾ç¤ºä»¥ä¸Šä¿¡æ¯ï¼Œå°±è¯´æ˜ JDK å®‰è£…æˆåŠŸå•¦ å®‰è£… Mavenå› ä¸ºåé¢å¯èƒ½ä¼šç”¨åˆ° maven ï¼Œå…ˆè£…ä¸Šè¿™ä¸ªã€‚ 1ã€ä¸‹è½½ maven 1wget http://mirrors.hust.edu.cn/apache/maven/maven-3/3.2.5/binaries/apache-maven-3.2.5-bin.tar.gz 2ã€è§£å‹è‡³ /usr/local ç›®å½• 1tar -zxvf apache-maven-3.2.5-bin.tar.gz 3ã€é…ç½®å…¬å¸ç»™çš„é…ç½® æ›¿æ¢æˆå…¬å¸ç»™çš„ setting.xml æ–‡ä»¶ï¼Œä¿®æ”¹å…³äºæœ¬åœ°ä»“åº“çš„ä½ç½®, é»˜è®¤ä½ç½®: ${user.home}/.m2/repository 4ã€é…ç½®ç¯å¢ƒå˜é‡etc/profile æœ€åæ·»åŠ ä»¥ä¸‹ä¸¤è¡Œ 12export MAVEN_HOME=/usr/local/apache-maven-3.2.5export PATH=$&#123;PATH&#125;:$&#123;MAVEN_HOME&#125;/bin 5ã€æµ‹è¯• 123[root@localhost ~]# mvn -vApache Maven 3.2.5 (12a6b3acb947671f09b81f49094c53f426d8cea1; 2014-12-14T09:29:23-08:00)Maven home: /usr/local/apache-maven-3.2.5 VMware è™šæ‹Ÿæœºé‡Œé¢çš„ä¸‰å°æœºå™¨ IP åˆ†åˆ«æ˜¯ï¼š 123192.168.153.133192.168.153.134192.168.153.132 é…ç½® hostsåœ¨ /etc/hostsä¸‹é¢ç¼–å†™ï¼šip node èŠ‚ç‚¹çš„åå­—ï¼ˆåŸŸåè§£æï¼‰ 1vim /etc/hosts æ–°å¢ï¼š 123192.168.153.133 es1192.168.153.134 es2192.168.153.132 es3 è®¾ç½® SSH å…å¯†ç ç™»å½•å®‰è£…expectå‘½ä»¤ ï¼š yum -y install expect å°† ssh_p2p.jar éšä¾¿è§£å‹åˆ°ä»»ä½•ç›®å½•ä¸‹ï¼š (è¿™ä¸ª jar åŒ…å¯ä»¥å»ç½‘ä¸Šä¸‹è½½) 1unzip ssh_p2p.zip ä¿®æ”¹ resource çš„ ip å€¼ 1vim /ssh_p2p/deploy_data/resource ï¼ˆå„ä¸ªèŠ‚ç‚¹å’Œè´¦æˆ·åï¼Œå¯†ç ï¼Œfreeä»£è¡¨ç›¸äº’éƒ½å¯ä»¥æ— å¯†ç ç™»é™†ï¼‰ 123456#è®¾ç½®ä¸ºä½ æ¯å°è™šæ‹Ÿæœºçš„ipåœ°å€ï¼Œç”¨æˆ·åï¼Œå¯†ç address=(&quot;192.168.153.133,root,123456,free&quot;&quot;192.168.153,134,root,123456,free&quot;&quot;192.168.153.132,root,123456,free&quot;) ä¿®æ”¹ start.sh çš„è¿è¡Œæƒé™ 1chmod u+x start.sh è¿è¡Œ 1./start.sh æµ‹è¯•ï¼š ssh ipåœ°å€ ï¼ˆæµ‹è¯•æ˜¯å¦å¯ä»¥ç™»å½•ï¼‰ å®‰è£… ElasticSearchä¸‹è½½åœ°å€ï¼š https://www.elastic.co/downloads/elasticsearch 123wget https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-5.5.2.tar.gzcd /usr/localtar -zxvf elasticsearch-5.5.2.tar.gz su tzs åˆ‡æ¢åˆ° tzs ç”¨æˆ·ä¸‹ ( é»˜è®¤ä¸æ”¯æŒ root ç”¨æˆ·) sh /usr/local/elasticsearch/bin/elasticsearch -d å…¶ä¸­ -d è¡¨ç¤ºåå°å¯åŠ¨ åœ¨ vmware ä¸Šæµ‹è¯•æ˜¯å¦æˆåŠŸï¼šcurl http://localhost:9200/ å‡ºç°å¦‚ä¸Šå›¾è¿™æ ·çš„æ•ˆæœï¼Œå°±ä»£è¡¨å·²ç»è£…å¥½äº†ã€‚ elasticsearch é»˜è®¤ restful-api çš„ç«¯å£æ˜¯ 9200 ä¸æ”¯æŒ IP åœ°å€ï¼Œä¹Ÿå°±æ˜¯è¯´æ— æ³•ä»ä¸»æœºè®¿é—®è™šæ‹Ÿæœºä¸­çš„æœåŠ¡ï¼Œåªèƒ½åœ¨æœ¬æœºç”¨ http://localhost:9200 æ¥è®¿é—®ã€‚å¦‚æœéœ€è¦æ”¹å˜ï¼Œéœ€è¦ä¿®æ”¹é…ç½®æ–‡ä»¶ /usr/local/elasticsearch/config/elasticsearch.yml æ–‡ä»¶ï¼ŒåŠ å…¥ä»¥ä¸‹ä¸¤è¡Œï¼š 12network.bind_host: 0.0.0.0network.publish_host: _nonloopback:ipv4 æˆ–å»é™¤ network.host å’Œ http.port ä¹‹å‰çš„æ³¨é‡Šï¼Œå¹¶å°† network.host çš„ IP åœ°å€ä¿®æ”¹ä¸ºæœ¬æœºå¤–ç½‘ IPã€‚ç„¶åé‡å¯ï¼ŒElasticsearch å…³é—­æ–¹æ³•ï¼ˆè¾“å…¥å‘½ä»¤ï¼šps -ef | grep elasticsearch ï¼Œæ‰¾åˆ°è¿›ç¨‹ï¼Œç„¶å kill æ‰å°±è¡Œäº†ã€‚ å¦‚æœå¤–ç½‘è¿˜æ˜¯ä¸èƒ½è®¿é—®ï¼Œåˆ™æœ‰å¯èƒ½æ˜¯é˜²ç«å¢™è®¾ç½®å¯¼è‡´çš„ ( å…³é—­é˜²ç«å¢™ï¼šservice iptables stop ) ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼švim config/elasticsearch.yml cluster.name : my-app (é›†ç¾¤çš„åå­—ï¼Œåå­—ç›¸åŒçš„å°±æ˜¯ä¸€ä¸ªé›†ç¾¤) node.name : es1 ï¼ˆèŠ‚ç‚¹çš„åå­—, å’Œå‰é¢é…ç½®çš„ hosts ä¸­çš„ name è¦ä¸€è‡´ï¼‰ path.data: /data/elasticsearch/data ï¼ˆæ•°æ®çš„è·¯å¾„ã€‚æ²¡æœ‰è¦åˆ›å»ºï¼ˆmkdir -p /data/elasticsearch/{data,logs}ï¼‰ï¼Œå¹¶ä¸”ç»™æ‰§è¡Œç”¨æˆ·æƒé™ chown tzs /data/elasticsearch/{data,logs} -R ï¼‰path.logs: /data/elasticsearch/logs ï¼ˆæ•°æ® log ä¿¡æ¯çš„è·¯å¾„ï¼ŒåŒä¸Šï¼‰network.host: 0.0.0.0 //å…è®¸å¤–ç½‘è®¿é—®ï¼Œä¹Ÿå¯ä»¥æ˜¯è‡ªå·±çš„ipåœ°å€http.port: 9200 //è®¿é—®çš„ç«¯å£discovery.zen.ping.unicast.hosts: [â€œ192.168.153.133â€, â€œ192.168.153.134â€, â€œ192.168.153.132â€] //å„ä¸ªèŠ‚ç‚¹çš„ipåœ°å€ è®°å¾—éœ€è¦æ·»åŠ ä¸Šï¼šï¼ˆè¿™ä¸ªæ˜¯å®‰è£… head æ’ä»¶è¦ç”¨çš„ï¼Œ ç›®å‰ä¸éœ€è¦ï¼‰http.cors.enabled: truehttp.cors.allow-origin: â€œ*â€ æœ€ååœ¨å¤–éƒ¨æµè§ˆå™¨çš„æ•ˆæœå¦‚ä¸‹å›¾ï¼š å®‰è£… IK ä¸­æ–‡åˆ†è¯å¯ä»¥è‡ªå·±ä¸‹è½½æºç ä½¿ç”¨ maven ç¼–è¯‘ï¼Œå½“ç„¶å¦‚æœæ€•éº»çƒ¦å¯ä»¥ç›´æ¥ä¸‹è½½ç¼–è¯‘å¥½çš„ https://github.com/medcl/elasticsearch-analysis-ik/releases/tag/v5.5.2 æ³¨æ„ä¸‹è½½å¯¹åº”çš„ç‰ˆæœ¬æ”¾åœ¨ plugins ç›®å½•ä¸‹ è§£å‹ unzip elasticsearch-analysis-ik-5.5.2.zip åœ¨ es çš„ plugins ä¸‹æ–°å»º ik ç›®å½• mkdir ik å°†åˆšæ‰è§£å‹çš„å¤åˆ¶åˆ°ikç›®å½•ä¸‹ cp -r elasticsearch/* ik åˆ é™¤åˆšæ‰è§£å‹åçš„ 12rm -rf elasticsearchrm -rf elasticsearch-analysis-ik-5.5.2.zip IK å¸¦æœ‰ä¸¤ä¸ªåˆ†è¯å™¨ik_max_word ï¼šä¼šå°†æ–‡æœ¬åšæœ€ç»†ç²’åº¦çš„æ‹†åˆ†ï¼›å°½å¯èƒ½å¤šçš„æ‹†åˆ†å‡ºè¯è¯­ ik_smartï¼šä¼šåšæœ€ç²—ç²’åº¦çš„æ‹†åˆ†ï¼›å·²è¢«åˆ†å‡ºçš„è¯è¯­å°†ä¸ä¼šå†æ¬¡è¢«å…¶å®ƒè¯è¯­å æœ‰ å®‰è£…å®Œ IK ä¸­æ–‡åˆ†è¯å™¨åï¼ˆå½“ç„¶ä¸æ­¢è¿™ç§ä¸­æ–‡åˆ†è¯å™¨ï¼Œè¿˜æœ‰å…¶ä»–çš„ï¼Œå¯ä»¥å‚è€ƒæˆ‘çš„æ–‡ç«  Elasticsearch é»˜è®¤åˆ†è¯å™¨å’Œä¸­åˆ†åˆ†è¯å™¨ä¹‹é—´çš„æ¯”è¾ƒåŠä½¿ç”¨æ–¹æ³•ï¼‰ï¼Œæµ‹è¯•åŒºåˆ«å¦‚ä¸‹ï¼š ik_max_wordcurl -XGET â€˜http://192.168.153.134:9200/_analyze?pretty&amp;analyzer=ik_max_wordâ€˜ -d â€˜è”æƒ³æ˜¯å…¨çƒæœ€å¤§çš„ç¬”è®°æœ¬å‚å•†â€™ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667&#123; &quot;tokens&quot; : [ &#123; &quot;token&quot; : &quot;è”æƒ³&quot;, &quot;start_offset&quot; : 0, &quot;end_offset&quot; : 2, &quot;type&quot; : &quot;CN_WORD&quot;, &quot;position&quot; : 0 &#125;, &#123; &quot;token&quot; : &quot;æ˜¯&quot;, &quot;start_offset&quot; : 2, &quot;end_offset&quot; : 3, &quot;type&quot; : &quot;CN_CHAR&quot;, &quot;position&quot; : 1 &#125;, &#123; &quot;token&quot; : &quot;å…¨çƒ&quot;, &quot;start_offset&quot; : 3, &quot;end_offset&quot; : 5, &quot;type&quot; : &quot;CN_WORD&quot;, &quot;position&quot; : 2 &#125;, &#123; &quot;token&quot; : &quot;æœ€å¤§&quot;, &quot;start_offset&quot; : 5, &quot;end_offset&quot; : 7, &quot;type&quot; : &quot;CN_WORD&quot;, &quot;position&quot; : 3 &#125;, &#123; &quot;token&quot; : &quot;çš„&quot;, &quot;start_offset&quot; : 7, &quot;end_offset&quot; : 8, &quot;type&quot; : &quot;CN_CHAR&quot;, &quot;position&quot; : 4 &#125;, &#123; &quot;token&quot; : &quot;ç¬”è®°æœ¬&quot;, &quot;start_offset&quot; : 8, &quot;end_offset&quot; : 11, &quot;type&quot; : &quot;CN_WORD&quot;, &quot;position&quot; : 5 &#125;, &#123; &quot;token&quot; : &quot;ç¬”è®°&quot;, &quot;start_offset&quot; : 8, &quot;end_offset&quot; : 10, &quot;type&quot; : &quot;CN_WORD&quot;, &quot;position&quot; : 6 &#125;, &#123; &quot;token&quot; : &quot;æœ¬å‚&quot;, &quot;start_offset&quot; : 10, &quot;end_offset&quot; : 12, &quot;type&quot; : &quot;CN_WORD&quot;, &quot;position&quot; : 7 &#125;, &#123; &quot;token&quot; : &quot;å‚å•†&quot;, &quot;start_offset&quot; : 11, &quot;end_offset&quot; : 13, &quot;type&quot; : &quot;CN_WORD&quot;, &quot;position&quot; : 8 &#125; ]&#125; ik_smartcurl -XGET â€˜http://localhost:9200/_analyze?pretty&amp;analyzer=ik_smartâ€˜ -d â€˜è”æƒ³æ˜¯å…¨çƒæœ€å¤§çš„ç¬”è®°æœ¬å‚å•†â€™ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253&#123; &quot;tokens&quot; : [ &#123; &quot;token&quot; : &quot;è”æƒ³&quot;, &quot;start_offset&quot; : 0, &quot;end_offset&quot; : 2, &quot;type&quot; : &quot;CN_WORD&quot;, &quot;position&quot; : 0 &#125;, &#123; &quot;token&quot; : &quot;æ˜¯&quot;, &quot;start_offset&quot; : 2, &quot;end_offset&quot; : 3, &quot;type&quot; : &quot;CN_CHAR&quot;, &quot;position&quot; : 1 &#125;, &#123; &quot;token&quot; : &quot;å…¨çƒ&quot;, &quot;start_offset&quot; : 3, &quot;end_offset&quot; : 5, &quot;type&quot; : &quot;CN_WORD&quot;, &quot;position&quot; : 2 &#125;, &#123; &quot;token&quot; : &quot;æœ€å¤§&quot;, &quot;start_offset&quot; : 5, &quot;end_offset&quot; : 7, &quot;type&quot; : &quot;CN_WORD&quot;, &quot;position&quot; : 3 &#125;, &#123; &quot;token&quot; : &quot;çš„&quot;, &quot;start_offset&quot; : 7, &quot;end_offset&quot; : 8, &quot;type&quot; : &quot;CN_CHAR&quot;, &quot;position&quot; : 4 &#125;, &#123; &quot;token&quot; : &quot;ç¬”è®°æœ¬&quot;, &quot;start_offset&quot; : 8, &quot;end_offset&quot; : 11, &quot;type&quot; : &quot;CN_WORD&quot;, &quot;position&quot; : 5 &#125;, &#123; &quot;token&quot; : &quot;å‚å•†&quot;, &quot;start_offset&quot; : 11, &quot;end_offset&quot; : 13, &quot;type&quot; : &quot;CN_WORD&quot;, &quot;position&quot; : 6 &#125; ]&#125; å®‰è£… head æ’ä»¶elasticsearch-head æ˜¯ä¸€ä¸ª elasticsearch çš„é›†ç¾¤ç®¡ç†å·¥å…·ï¼Œå®ƒæ˜¯å®Œå…¨ç”± html5 ç¼–å†™çš„ç‹¬ç«‹ç½‘é¡µç¨‹åºï¼Œä½ å¯ä»¥é€šè¿‡æ’ä»¶æŠŠå®ƒé›†æˆåˆ° esã€‚ æ•ˆæœå¦‚ä¸‹å›¾ï¼šï¼ˆå›¾ç‰‡æ¥è‡ªç½‘ç»œï¼‰ å®‰è£… git123yum remove gityum install gitgit clone git://github.com/mobz/elasticsearch-head.git æ‹‰å– head æ’ä»¶åˆ°æœ¬åœ°ï¼Œæˆ–è€…ç›´æ¥åœ¨ GitHub ä¸‹è½½ å‹ç¼©åŒ…ä¸‹æ¥ å®‰è£…nodejså…ˆå»å®˜ç½‘ä¸‹è½½ node-v8.4.0-linux-x64.tar.xz 12tar -Jxv -f node-v8.4.0-linux-x64.tar.xzmv node-v8.4.0-linux-x64 node ç¯å¢ƒå˜é‡è®¾ç½®ï¼š 1vim /etc/profile æ–°å¢ï¼š 123export NODE_HOME=/opt/nodeexport PATH=$PATH:$NODE_HOME/binexport NODE_PATH=$NODE_HOME/lib/node_modules ä½¿é…ç½®æ–‡ä»¶ç”Ÿæ•ˆï¼ˆè¿™æ­¥å¾ˆé‡è¦ï¼Œè‡ªå·±è¦å¤šæ³¨æ„è¿™æ­¥ï¼‰ 1source /etc/profile æµ‹è¯•æ˜¯å¦å…¨å±€å¯ç”¨äº†ï¼š 1node -v ç„¶å 12345mv elasticsearch-head headcd head/npm install -g grunt-clinpm installgrunt server å† es çš„é…ç½®æ–‡ä»¶ä¸­åŠ ï¼š 12http.cors.enabled: truehttp.cors.allow-origin: &quot;*&quot; åœ¨æµè§ˆå™¨æ‰“å¼€ http://192.168.153.133:9100/ å°±å¯ä»¥çœ‹åˆ°æ•ˆæœäº†ï¼Œ é‡åˆ°é—®é¢˜æŠŠå‘éƒ½èµ°äº†ä¸€éï¼Œé˜²æ­¢ä»¥åå†æ¬¡å…¥å‘ï¼Œç‰¹æ­¤è®°å½•ä¸‹æ¥ 1ã€ERROR Could not register mbeans java.security.AccessControlException: access denied (â€œjavax.management.MBeanTrustPermissionâ€ â€œregisterâ€) æ”¹å˜ elasticsearch æ–‡ä»¶å¤¹æ‰€æœ‰è€…åˆ°å½“å‰ç”¨æˆ· sudo chown -R noroot:noroot elasticsearch è¿™æ˜¯å› ä¸º elasticsearch éœ€è¦è¯»å†™é…ç½®æ–‡ä»¶ï¼Œæˆ‘ä»¬éœ€è¦ç»™äºˆ config æ–‡ä»¶å¤¹æƒé™ï¼Œä¸Šé¢æ–°å»ºäº† elsearch ç”¨æˆ·ï¼Œelsearch ç”¨æˆ·ä¸å…·å¤‡è¯»å†™æƒé™ï¼Œå› æ­¤è¿˜æ˜¯ä¼šæŠ¥é”™ï¼Œè§£å†³æ–¹æ³•æ˜¯åˆ‡æ¢åˆ°ç®¡ç†å‘˜è´¦æˆ·ï¼Œèµ‹äºˆæƒé™å³å¯ï¼š sudo -i chmod -R 775 config 2ã€[WARN ][o.e.b.ElasticsearchUncaughtExceptionHandler] [] uncaught exception in thread [main]org.elasticsearch.bootstrap.StartupException: java.lang.RuntimeException: can not run elasticsearch as root åŸå› æ˜¯elasticsearché»˜è®¤æ˜¯ä¸æ”¯æŒç”¨rootç”¨æˆ·æ¥å¯åŠ¨çš„ã€‚ è§£å†³æ–¹æ¡ˆä¸€ï¼šDes.insecure.allow.root=true ä¿®æ”¹/usr/local/elasticsearch-2.4.0/bin/elasticsearchï¼Œ æ·»åŠ  ES_JAVA_OPTS=â€-Des.insecure.allow.root=trueâ€ æˆ–æ‰§è¡Œæ—¶æ·»åŠ ï¼š sh /usr/local/elasticsearch-2.4.0/bin/elasticsearch -d -Des.insecure.allow.root=true æ³¨æ„ï¼šæ­£å¼ç¯å¢ƒç”¨rootè¿è¡Œå¯èƒ½ä¼šæœ‰å®‰å…¨é£é™©ï¼Œä¸å»ºè®®ç”¨rootæ¥è·‘ã€‚ è§£å†³æ–¹æ¡ˆäºŒï¼šæ·»åŠ ä¸“é—¨çš„ç”¨æˆ· 1234useradd elasticchown -R elastic:elastic elasticsearch-2.4.0su elasticsh /usr/local/elasticsearch-2.4.0/bin/elasticsearch -d 3ã€UnsupportedOperationException: seccomp unavailable: requires kernel 3.5+ with CONFIG_SECCOMP and CONFIG_SECCOMP_FILTER compiled in åªæ˜¯è­¦å‘Šï¼Œä½¿ç”¨æ–°çš„linuxç‰ˆæœ¬ï¼Œå°±ä¸ä¼šå‡ºç°æ­¤ç±»é—®é¢˜äº†ã€‚ 4ã€ERROR: [4] bootstrap checks failed[1]: max file descriptors [4096] for elasticsearch process is too low, increase to at least [65536] åŸå› ï¼šæ— æ³•åˆ›å»ºæœ¬åœ°æ–‡ä»¶é—®é¢˜,ç”¨æˆ·æœ€å¤§å¯åˆ›å»ºæ–‡ä»¶æ•°å¤ªå° è§£å†³æ–¹æ¡ˆï¼šåˆ‡æ¢åˆ° root ç”¨æˆ·ï¼Œç¼–è¾‘ limits.conf é…ç½®æ–‡ä»¶ï¼Œ æ·»åŠ ç±»ä¼¼å¦‚ä¸‹å†…å®¹ï¼š vim /etc/security/limits.conf æ·»åŠ å¦‚ä¸‹å†…å®¹: 1234* soft nofile 65536* hard nofile 131072* soft nproc 2048* hard nproc 4096 [2]: max number of threads [1024] for user [tzs] is too low, increase to at least [2048] åŸå› ï¼šæ— æ³•åˆ›å»ºæœ¬åœ°çº¿ç¨‹é—®é¢˜,ç”¨æˆ·æœ€å¤§å¯åˆ›å»ºçº¿ç¨‹æ•°å¤ªå° è§£å†³æ–¹æ¡ˆï¼šåˆ‡æ¢åˆ°rootç”¨æˆ·ï¼Œè¿›å…¥limits.dç›®å½•ä¸‹ï¼Œä¿®æ”¹90-nproc.conf é…ç½®æ–‡ä»¶ã€‚ vim /etc/security/limits.d/90-nproc.conf æ‰¾åˆ°å¦‚ä¸‹å†…å®¹ï¼š soft nproc 1024 ä¿®æ”¹ä¸º soft nproc 2048 [3]: max virtual memory areas vm.max_map_count [65530] is too low, increase to at least [262144] åŸå› ï¼šæœ€å¤§è™šæ‹Ÿå†…å­˜å¤ªå° rootç”¨æˆ·æ‰§è¡Œå‘½ä»¤ï¼š sysctl -w vm.max_map_count=262144 æˆ–è€…ä¿®æ”¹ /etc/sysctl.conf æ–‡ä»¶ï¼Œæ·»åŠ  â€œvm.max_map_countâ€è®¾ç½®è®¾ç½®åï¼Œå¯ä»¥ä½¿ç”¨$ sysctl -p [4]: system call filters failed to install; check the logs and fix your configuration or disable system call filters at your own risk åŸå› ï¼šCentos6ä¸æ”¯æŒSecCompï¼Œè€ŒES5.4.1é»˜è®¤bootstrap.system_call_filterä¸ºtrueè¿›è¡Œæ£€æµ‹ï¼Œæ‰€ä»¥å¯¼è‡´æ£€æµ‹å¤±è´¥ï¼Œå¤±è´¥åç›´æ¥å¯¼è‡´ESä¸èƒ½å¯åŠ¨ã€‚è¯¦è§ ï¼šhttps://github.com/elastic/elasticsearch/issues/22899 è§£å†³æ–¹æ³•ï¼šåœ¨elasticsearch.ymlä¸­æ–°å¢é…ç½®bootstrap.system_call_filterï¼Œè®¾ä¸ºfalseï¼Œæ³¨æ„è¦åœ¨Memoryä¸‹é¢:bootstrap.memory_lock: falsebootstrap.system_call_filter: false 5ã€ java.lang.IllegalArgumentException: property [elasticsearch.version] is missing for plugin [head] å† es çš„é…ç½®æ–‡ä»¶ä¸­åŠ ï¼š 12http.cors.enabled: truehttp.cors.allow-origin: &quot;*&quot; æœ€åæ•´ä¸ªæ­å»ºçš„è¿‡ç¨‹å…¨ç¨‹è‡ªå·±æ‰‹åŠ¨å®‰è£…ï¼Œä¸æ˜“ï¼Œå¦‚æœå®‰è£…å¾ˆå¤šå°æœºå™¨ï¼Œæ˜¯å¦å¯ä»¥å†™ä¸ªè„šæœ¬ä¹‹ç±»çš„è‡ªåŠ¨æ­å»ºå‘¢ï¼Ÿå¯ä»¥å»æƒ³æƒ³çš„ã€‚é¦–å‘äºï¼šhttp://www.54tianzhisheng.cn/2017/09/09/Elasticsearch-install/ ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼Œè°¢è°¢é…åˆï¼","tags":[{"name":"ElasticSearch","slug":"ElasticSearch","permalink":"http://yoursite.com/tags/ElasticSearch/"}]},{"title":"Elasticsearch ç³»åˆ—æ–‡ç« ï¼ˆä¸€ï¼‰ï¼šElasticsearch é»˜è®¤åˆ†è¯å™¨å’Œä¸­åˆ†åˆ†è¯å™¨ä¹‹é—´çš„æ¯”è¾ƒåŠä½¿ç”¨æ–¹æ³•","date":"2017-09-07T16:00:00.000Z","path":"2017/09/08/Elasticsearch-analyzers/","text":"ä»‹ç»ï¼šElasticSearch æ˜¯ä¸€ä¸ªåŸºäº Lucene çš„æœç´¢æœåŠ¡å™¨ã€‚å®ƒæä¾›äº†ä¸€ä¸ªåˆ†å¸ƒå¼å¤šç”¨æˆ·èƒ½åŠ›çš„å…¨æ–‡æœç´¢å¼•æ“ï¼ŒåŸºäº RESTful web æ¥å£ã€‚Elasticsearch æ˜¯ç”¨ Java å¼€å‘çš„ï¼Œå¹¶ä½œä¸ºApacheè®¸å¯æ¡æ¬¾ä¸‹çš„å¼€æ”¾æºç å‘å¸ƒï¼Œæ˜¯å½“å‰æµè¡Œçš„ä¼ä¸šçº§æœç´¢å¼•æ“ã€‚è®¾è®¡ç”¨äºäº‘è®¡ç®—ä¸­ï¼Œèƒ½å¤Ÿè¾¾åˆ°å®æ—¶æœç´¢ï¼Œç¨³å®šï¼Œå¯é ï¼Œå¿«é€Ÿï¼Œå®‰è£…ä½¿ç”¨æ–¹ä¾¿ã€‚ Elasticsearchä¸­ï¼Œå†…ç½®äº†å¾ˆå¤šåˆ†è¯å™¨ï¼ˆanalyzersï¼‰ã€‚ä¸‹é¢æ¥è¿›è¡Œæ¯”è¾ƒä¸‹ç³»ç»Ÿé»˜è®¤åˆ†è¯å™¨å’Œå¸¸ç”¨çš„ä¸­æ–‡åˆ†è¯å™¨ä¹‹é—´çš„åŒºåˆ«ã€‚ ç³»ç»Ÿé»˜è®¤åˆ†è¯å™¨ï¼š1ã€standard åˆ†è¯å™¨https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis-standard-analyzer.html å¦‚ä½•ä½¿ç”¨ï¼šhttp://www.yiibai.com/lucene/lucene_standardanalyzer.html è‹±æ–‡çš„å¤„ç†èƒ½åŠ›åŒäºStopAnalyzer.æ”¯æŒä¸­æ–‡é‡‡ç”¨çš„æ–¹æ³•ä¸ºå•å­—åˆ‡åˆ†ã€‚ä»–ä¼šå°†è¯æ±‡å•å…ƒè½¬æ¢æˆå°å†™å½¢å¼ï¼Œå¹¶å»é™¤åœç”¨è¯å’Œæ ‡ç‚¹ç¬¦å·ã€‚ 12345/**StandardAnalyzeråˆ†æå™¨*/public void standardAnalyzer(String msg)&#123; StandardAnalyzer analyzer = new StandardAnalyzer(Version.LUCENE_36); this.getTokens(analyzer, msg);&#125; 2ã€simple åˆ†è¯å™¨https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis-simple-analyzer.html å¦‚ä½•ä½¿ç”¨: http://www.yiibai.com/lucene/lucene_simpleanalyzer.html åŠŸèƒ½å¼ºäºWhitespaceAnalyzer, é¦–å…ˆä¼šé€šè¿‡éå­—æ¯å­—ç¬¦æ¥åˆ†å‰²æ–‡æœ¬ä¿¡æ¯ï¼Œç„¶åå°†è¯æ±‡å•å…ƒç»Ÿä¸€ä¸ºå°å†™å½¢å¼ã€‚è¯¥åˆ†æå™¨ä¼šå»æ‰æ•°å­—ç±»å‹çš„å­—ç¬¦ã€‚ 12345/**SimpleAnalyzeråˆ†æå™¨*/ public void simpleAnalyzer(String msg)&#123; SimpleAnalyzer analyzer = new SimpleAnalyzer(Version.LUCENE_36); this.getTokens(analyzer, msg); &#125; 3ã€Whitespace åˆ†è¯å™¨https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis-whitespace-analyzer.html å¦‚ä½•ä½¿ç”¨ï¼šhttp://www.yiibai.com/lucene/lucene_whitespaceanalyzer.html ä»…ä»…æ˜¯å»é™¤ç©ºæ ¼ï¼Œå¯¹å­—ç¬¦æ²¡æœ‰lowcaseåŒ–,ä¸æ”¯æŒä¸­æ–‡ï¼›å¹¶ä¸”ä¸å¯¹ç”Ÿæˆçš„è¯æ±‡å•å…ƒè¿›è¡Œå…¶ä»–çš„è§„èŒƒåŒ–å¤„ç†ã€‚ 12345/**WhitespaceAnalyzeråˆ†æå™¨*/ public void whitespaceAnalyzer(String msg)&#123; WhitespaceAnalyzer analyzer = new WhitespaceAnalyzer(Version.LUCENE_36); this.getTokens(analyzer, msg); &#125; 4ã€Stop åˆ†è¯å™¨https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis-stop-analyzer.html å¦‚ä½•ä½¿ç”¨ï¼šhttp://www.yiibai.com/lucene/lucene_stopanalyzer.html StopAnalyzerçš„åŠŸèƒ½è¶…è¶Šäº†SimpleAnalyzerï¼Œåœ¨SimpleAnalyzerçš„åŸºç¡€ä¸Šå¢åŠ äº†å»é™¤è‹±æ–‡ä¸­çš„å¸¸ç”¨å•è¯ï¼ˆå¦‚theï¼Œaç­‰ï¼‰ï¼Œä¹Ÿå¯ä»¥æ›´åŠ è‡ªå·±çš„éœ€è¦è®¾ç½®å¸¸ç”¨å•è¯ï¼›ä¸æ”¯æŒä¸­æ–‡ 12345/**StopAnalyzeråˆ†æå™¨*/ public void stopAnalyzer(String msg)&#123; StopAnalyzer analyzer = new StopAnalyzer(Version.LUCENE_36); this.getTokens(analyzer, msg); &#125; 5ã€keyword åˆ†è¯å™¨KeywordAnalyzeræŠŠæ•´ä¸ªè¾“å…¥ä½œä¸ºä¸€ä¸ªå•ç‹¬è¯æ±‡å•å…ƒï¼Œæ–¹ä¾¿ç‰¹æ®Šç±»å‹çš„æ–‡æœ¬è¿›è¡Œç´¢å¼•å’Œæ£€ç´¢ã€‚é’ˆå¯¹é‚®æ”¿ç¼–ç ï¼Œåœ°å€ç­‰æ–‡æœ¬ä¿¡æ¯ä½¿ç”¨å…³é”®è¯åˆ†è¯å™¨è¿›è¡Œç´¢å¼•é¡¹å»ºç«‹éå¸¸æ–¹ä¾¿ã€‚ 6ã€pattern åˆ†è¯å™¨https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis-pattern-analyzer.html ä¸€ä¸ªpatternç±»å‹çš„analyzerå¯ä»¥é€šè¿‡æ­£åˆ™è¡¨è¾¾å¼å°†æ–‡æœ¬åˆ†æˆâ€termsâ€(ç»è¿‡token Filter åå¾—åˆ°çš„ä¸œè¥¿ )ã€‚æ¥å—å¦‚ä¸‹è®¾ç½®: ä¸€ä¸ª pattern analyzer å¯ä»¥åšå¦‚ä¸‹çš„å±æ€§è®¾ç½®: lowercase termsæ˜¯å¦æ˜¯å°å†™. é»˜è®¤ä¸º true å°å†™. pattern æ­£åˆ™è¡¨è¾¾å¼çš„pattern, é»˜è®¤æ˜¯ \\W+. flags æ­£åˆ™è¡¨è¾¾å¼çš„flags stopwords ä¸€ä¸ªç”¨äºåˆå§‹åŒ–stop filterçš„éœ€è¦stop å•è¯çš„åˆ—è¡¨.é»˜è®¤å•è¯æ˜¯ç©ºçš„åˆ—è¡¨ 7ã€language åˆ†è¯å™¨https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis-lang-analyzer.html ä¸€ä¸ªç”¨äºè§£æç‰¹æ®Šè¯­è¨€æ–‡æœ¬çš„analyzeré›†åˆã€‚ï¼ˆ arabic,armenian, basque, brazilian, bulgarian, catalan, cjk, czech, danish, dutch, english, finnish, french,galician, german, greek, hindi, hungarian, indonesian, irish, italian, latvian, lithuanian, norwegian,persian, portuguese, romanian, russian, sorani, spanish, swedish, turkish, thai.ï¼‰å¯æƒœæ²¡æœ‰ä¸­æ–‡ã€‚ä¸äºˆè€ƒè™‘ 8ã€snowball åˆ†è¯å™¨ä¸€ä¸ªsnowballç±»å‹çš„analyzeræ˜¯ç”±standard tokenizerå’Œstandard filterã€lowercase filterã€stop filterã€snowball filterè¿™å››ä¸ªfilteræ„æˆçš„ã€‚ snowball analyzer åœ¨Luceneä¸­é€šå¸¸æ˜¯ä¸æ¨èä½¿ç”¨çš„ã€‚ 9ã€Custom åˆ†è¯å™¨æ˜¯è‡ªå®šä¹‰çš„analyzerã€‚å…è®¸å¤šä¸ªé›¶åˆ°å¤šä¸ªtokenizerï¼Œé›¶åˆ°å¤šä¸ª Char Filters. custom analyzer çš„åå­—ä¸èƒ½ä»¥ â€œ_â€å¼€å¤´. The following are settings that can be set for a custom analyzer type: Setting Description tokenizer é€šç”¨çš„æˆ–è€…æ³¨å†Œçš„tokenizer. filter é€šç”¨çš„æˆ–è€…æ³¨å†Œçš„token filters char_filter é€šç”¨çš„æˆ–è€…æ³¨å†Œçš„ character filters position_increment_gap è·ç¦»æŸ¥è¯¢æ—¶ï¼Œæœ€å¤§å…è®¸æŸ¥è¯¢çš„è·ç¦»ï¼Œé»˜è®¤æ˜¯100 è‡ªå®šä¹‰çš„æ¨¡æ¿ï¼š 1234567891011121314151617181920212223242526index : analysis : analyzer : myAnalyzer2 : type : custom tokenizer : myTokenizer1 filter : [myTokenFilter1, myTokenFilter2] char_filter : [my_html] position_increment_gap: 256 tokenizer : myTokenizer1 : type : standard max_token_length : 900 filter : myTokenFilter1 : type : stop stopwords : [stop1, stop2, stop3, stop4] myTokenFilter2 : type : length min : 0 max : 2000 char_filter : my_html : type : html_strip escaped_tags : [xxx, yyy] read_ahead : 1024 10ã€fingerprint åˆ†è¯å™¨https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis-fingerprint-analyzer.html ä¸­æ–‡åˆ†è¯å™¨ï¼š1ã€ik-analyzerhttps://github.com/wks/ik-analyzer IKAnalyzeræ˜¯ä¸€ä¸ªå¼€æºçš„ï¼ŒåŸºäºjavaè¯­è¨€å¼€å‘çš„è½»é‡çº§çš„ä¸­æ–‡åˆ†è¯å·¥å…·åŒ…ã€‚ é‡‡ç”¨äº†ç‰¹æœ‰çš„â€œæ­£å‘è¿­ä»£æœ€ç»†ç²’åº¦åˆ‡åˆ†ç®—æ³•â€œï¼Œæ”¯æŒç»†ç²’åº¦å’Œæœ€å¤§è¯é•¿ä¸¤ç§åˆ‡åˆ†æ¨¡å¼ï¼›å…·æœ‰83ä¸‡å­—/ç§’ï¼ˆ1600KB/Sï¼‰çš„é«˜é€Ÿå¤„ç†èƒ½åŠ›ã€‚ é‡‡ç”¨äº†å¤šå­å¤„ç†å™¨åˆ†ææ¨¡å¼ï¼Œæ”¯æŒï¼šè‹±æ–‡å­—æ¯ã€æ•°å­—ã€ä¸­æ–‡è¯æ±‡ç­‰åˆ†è¯å¤„ç†ï¼Œå…¼å®¹éŸ©æ–‡ã€æ—¥æ–‡å­—ç¬¦ ä¼˜åŒ–çš„è¯å…¸å­˜å‚¨ï¼Œæ›´å°çš„å†…å­˜å ç”¨ã€‚æ”¯æŒç”¨æˆ·è¯å…¸æ‰©å±•å®šä¹‰ é’ˆå¯¹Luceneå…¨æ–‡æ£€ç´¢ä¼˜åŒ–çš„æŸ¥è¯¢åˆ†æå™¨IKQueryParser(ä½œè€…åè¡€æ¨è)ï¼›å¼•å…¥ç®€å•æœç´¢è¡¨è¾¾å¼ï¼Œé‡‡ç”¨æ­§ä¹‰åˆ†æç®—æ³•ä¼˜åŒ–æŸ¥è¯¢å…³é”®å­—çš„æœç´¢æ’åˆ—ç»„åˆï¼Œèƒ½æå¤§çš„æé«˜Luceneæ£€ç´¢çš„å‘½ä¸­ç‡ã€‚ Mavenç”¨æ³•ï¼š 12345&lt;dependency&gt; &lt;groupId&gt;org.wltea.ik-analyzer&lt;/groupId&gt; &lt;artifactId&gt;ik-analyzer&lt;/artifactId&gt; &lt;version&gt;3.2.8&lt;/version&gt;&lt;/dependency&gt; åœ¨IK AnalyzeråŠ å…¥Maven Central Repositoryä¹‹å‰ï¼Œä½ éœ€è¦æ‰‹åŠ¨å®‰è£…ï¼Œå®‰è£…åˆ°æœ¬åœ°çš„repositoryï¼Œæˆ–è€…ä¸Šä¼ åˆ°è‡ªå·±çš„Maven repositoryæœåŠ¡å™¨ä¸Šã€‚ è¦å®‰è£…åˆ°æœ¬åœ°Maven repositoryï¼Œä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼Œå°†è‡ªåŠ¨ç¼–è¯‘ï¼Œæ‰“åŒ…å¹¶å®‰è£…ï¼šmvn install -Dmaven.test.skip=true Elasticsearchæ·»åŠ ä¸­æ–‡åˆ†è¯å®‰è£…IKåˆ†è¯æ’ä»¶https://github.com/medcl/elasticsearch-analysis-ik è¿›å…¥elasticsearch-analysis-ik-master æ›´å¤šå®‰è£…è¯·å‚è€ƒåšå®¢ï¼š 1ã€ä¸ºelasticæ·»åŠ ä¸­æ–‡åˆ†è¯ ï¼š http://blog.csdn.net/dingzfang/article/details/42776693 2ã€å¦‚ä½•åœ¨Elasticsearchä¸­å®‰è£…ä¸­æ–‡åˆ†è¯å™¨(IK+pinyin) ï¼šhttp://www.cnblogs.com/xing901022/p/5910139.html 3ã€Elasticsearch ä¸­æ–‡åˆ†è¯å™¨ IK é…ç½®å’Œä½¿ç”¨ ï¼š http://blog.csdn.net/jam00/article/details/52983056 ik å¸¦æœ‰ä¸¤ä¸ªåˆ†è¯å™¨ik_max_word ï¼šä¼šå°†æ–‡æœ¬åšæœ€ç»†ç²’åº¦çš„æ‹†åˆ†ï¼›å°½å¯èƒ½å¤šçš„æ‹†åˆ†å‡ºè¯è¯­ ik_smartï¼šä¼šåšæœ€ç²—ç²’åº¦çš„æ‹†åˆ†ï¼›å·²è¢«åˆ†å‡ºçš„è¯è¯­å°†ä¸ä¼šå†æ¬¡è¢«å…¶å®ƒè¯è¯­å æœ‰ åŒºåˆ«ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133# ik_max_wordcurl -XGET &apos;http://localhost:9200/_analyze?pretty&amp;analyzer=ik_max_word&apos; -d &apos;è”æƒ³æ˜¯å…¨çƒæœ€å¤§çš„ç¬”è®°æœ¬å‚å•†&apos;#è¿”å›&#123; &quot;tokens&quot; : [ &#123; &quot;token&quot; : &quot;è”æƒ³&quot;, &quot;start_offset&quot; : 0, &quot;end_offset&quot; : 2, &quot;type&quot; : &quot;CN_WORD&quot;, &quot;position&quot; : 0 &#125;, &#123; &quot;token&quot; : &quot;æ˜¯&quot;, &quot;start_offset&quot; : 2, &quot;end_offset&quot; : 3, &quot;type&quot; : &quot;CN_CHAR&quot;, &quot;position&quot; : 1 &#125;, &#123; &quot;token&quot; : &quot;å…¨çƒ&quot;, &quot;start_offset&quot; : 3, &quot;end_offset&quot; : 5, &quot;type&quot; : &quot;CN_WORD&quot;, &quot;position&quot; : 2 &#125;, &#123; &quot;token&quot; : &quot;æœ€å¤§&quot;, &quot;start_offset&quot; : 5, &quot;end_offset&quot; : 7, &quot;type&quot; : &quot;CN_WORD&quot;, &quot;position&quot; : 3 &#125;, &#123; &quot;token&quot; : &quot;çš„&quot;, &quot;start_offset&quot; : 7, &quot;end_offset&quot; : 8, &quot;type&quot; : &quot;CN_CHAR&quot;, &quot;position&quot; : 4 &#125;, &#123; &quot;token&quot; : &quot;ç¬”è®°æœ¬&quot;, &quot;start_offset&quot; : 8, &quot;end_offset&quot; : 11, &quot;type&quot; : &quot;CN_WORD&quot;, &quot;position&quot; : 5 &#125;, &#123; &quot;token&quot; : &quot;ç¬”è®°&quot;, &quot;start_offset&quot; : 8, &quot;end_offset&quot; : 10, &quot;type&quot; : &quot;CN_WORD&quot;, &quot;position&quot; : 6 &#125;, &#123; &quot;token&quot; : &quot;æœ¬å‚&quot;, &quot;start_offset&quot; : 10, &quot;end_offset&quot; : 12, &quot;type&quot; : &quot;CN_WORD&quot;, &quot;position&quot; : 7 &#125;, &#123; &quot;token&quot; : &quot;å‚å•†&quot;, &quot;start_offset&quot; : 11, &quot;end_offset&quot; : 13, &quot;type&quot; : &quot;CN_WORD&quot;, &quot;position&quot; : 8 &#125; ]&#125;# ik_smartcurl -XGET &apos;http://localhost:9200/_analyze?pretty&amp;analyzer=ik_smart&apos; -d &apos;è”æƒ³æ˜¯å…¨çƒæœ€å¤§çš„ç¬”è®°æœ¬å‚å•†&apos;# è¿”å›&#123; &quot;tokens&quot; : [ &#123; &quot;token&quot; : &quot;è”æƒ³&quot;, &quot;start_offset&quot; : 0, &quot;end_offset&quot; : 2, &quot;type&quot; : &quot;CN_WORD&quot;, &quot;position&quot; : 0 &#125;, &#123; &quot;token&quot; : &quot;æ˜¯&quot;, &quot;start_offset&quot; : 2, &quot;end_offset&quot; : 3, &quot;type&quot; : &quot;CN_CHAR&quot;, &quot;position&quot; : 1 &#125;, &#123; &quot;token&quot; : &quot;å…¨çƒ&quot;, &quot;start_offset&quot; : 3, &quot;end_offset&quot; : 5, &quot;type&quot; : &quot;CN_WORD&quot;, &quot;position&quot; : 2 &#125;, &#123; &quot;token&quot; : &quot;æœ€å¤§&quot;, &quot;start_offset&quot; : 5, &quot;end_offset&quot; : 7, &quot;type&quot; : &quot;CN_WORD&quot;, &quot;position&quot; : 3 &#125;, &#123; &quot;token&quot; : &quot;çš„&quot;, &quot;start_offset&quot; : 7, &quot;end_offset&quot; : 8, &quot;type&quot; : &quot;CN_CHAR&quot;, &quot;position&quot; : 4 &#125;, &#123; &quot;token&quot; : &quot;ç¬”è®°æœ¬&quot;, &quot;start_offset&quot; : 8, &quot;end_offset&quot; : 11, &quot;type&quot; : &quot;CN_WORD&quot;, &quot;position&quot; : 5 &#125;, &#123; &quot;token&quot; : &quot;å‚å•†&quot;, &quot;start_offset&quot; : 11, &quot;end_offset&quot; : 13, &quot;type&quot; : &quot;CN_WORD&quot;, &quot;position&quot; : 6 &#125; ]&#125; ä¸‹é¢æˆ‘ä»¬æ¥åˆ›å»ºä¸€ä¸ªç´¢å¼•ï¼Œä½¿ç”¨ ikåˆ›å»ºä¸€ä¸ªåå« iktest çš„ç´¢å¼•ï¼Œè®¾ç½®å®ƒçš„åˆ†æå™¨ç”¨ ik ï¼Œåˆ†è¯å™¨ç”¨ ik_max_wordï¼Œå¹¶åˆ›å»ºä¸€ä¸ª article çš„ç±»å‹ï¼Œé‡Œé¢æœ‰ä¸€ä¸ª subject çš„å­—æ®µï¼ŒæŒ‡å®šå…¶ä½¿ç”¨ ik_max_word åˆ†è¯å™¨ 12345678910111213141516171819202122curl -XPUT &apos;http://localhost:9200/iktest?pretty&apos; -d &apos;&#123; &quot;settings&quot; : &#123; &quot;analysis&quot; : &#123; &quot;analyzer&quot; : &#123; &quot;ik&quot; : &#123; &quot;tokenizer&quot; : &quot;ik_max_word&quot; &#125; &#125; &#125; &#125;, &quot;mappings&quot; : &#123; &quot;article&quot; : &#123; &quot;dynamic&quot; : true, &quot;properties&quot; : &#123; &quot;subject&quot; : &#123; &quot;type&quot; : &quot;string&quot;, &quot;analyzer&quot; : &quot;ik_max_word&quot; &#125; &#125; &#125; &#125;&#125;&apos; æ‰¹é‡æ·»åŠ å‡ æ¡æ•°æ®ï¼Œè¿™é‡Œæˆ‘æŒ‡å®šå…ƒæ•°æ® _id æ–¹ä¾¿æŸ¥çœ‹ï¼Œsubject å†…å®¹ä¸ºæˆ‘éšä¾¿æ‰¾çš„å‡ æ¡æ–°é—»çš„æ ‡é¢˜ 123456789101112curl -XPOST http://localhost:9200/iktest/article/_bulk?pretty -d &apos;&#123; &quot;index&quot; : &#123; &quot;_id&quot; : &quot;1&quot; &#125; &#125;&#123;&quot;subject&quot; : &quot;ï¼‚é—ºèœœï¼‚å´”é¡ºå®è¢«éŸ©æ£€æ–¹ä¼ å”¤ éŸ©æ€»ç»Ÿåºœä¿ƒå½»æŸ¥çœŸç›¸&quot; &#125;&#123; &quot;index&quot; : &#123; &quot;_id&quot; : &quot;2&quot; &#125; &#125;&#123;&quot;subject&quot; : &quot;éŸ©ä¸¾è¡Œï¼‚æŠ¤å›½è®­ç»ƒï¼‚ é’ç“¦å°:å†³ä¸è®¸å›½å®¶å®‰å…¨å‡ºé—®é¢˜&quot; &#125;&#123; &quot;index&quot; : &#123; &quot;_id&quot; : &quot;3&quot; &#125; &#125;&#123;&quot;subject&quot; : &quot;åª’ä½“ç§°FBIå·²ç»å–å¾—æœæŸ¥ä»¤ æ£€è§†å¸Œæ‹‰é‡Œç”µé‚®&quot; &#125;&#123; &quot;index&quot; : &#123; &quot;_id&quot; : &quot;4&quot; &#125; &#125;&#123;&quot;subject&quot; : &quot;æ‘ä¸Šæ˜¥æ ‘è·å®‰å¾’ç”Ÿå¥– æ¼”è®²ä¸­è°ˆåŠæ¬§æ´²æ’å¤–é—®é¢˜&quot; &#125;&#123; &quot;index&quot; : &#123; &quot;_id&quot; : &quot;5&quot; &#125; &#125;&#123;&quot;subject&quot; : &quot;å¸Œæ‹‰é‡Œå›¢é˜Ÿç‚®è½°FBI å‚é™¢æ°‘ä¸»å…šé¢†è¢–æ‰¹å…¶â€œè¿æ³•â€&quot; &#125;&apos; æŸ¥è¯¢ â€œå¸Œæ‹‰é‡Œå’ŒéŸ©å›½â€ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071curl -XPOST http://localhost:9200/iktest/article/_search?pretty -d&apos;&#123; &quot;query&quot; : &#123; &quot;match&quot; : &#123; &quot;subject&quot; : &quot;å¸Œæ‹‰é‡Œå’ŒéŸ©å›½&quot; &#125;&#125;, &quot;highlight&quot; : &#123; &quot;pre_tags&quot; : [&quot;&lt;font color=&apos;red&apos;&gt;&quot;], &quot;post_tags&quot; : [&quot;&lt;/font&gt;&quot;], &quot;fields&quot; : &#123; &quot;subject&quot; : &#123;&#125; &#125; &#125;&#125;&apos;#è¿”å›&#123; &quot;took&quot; : 113, &quot;timed_out&quot; : false, &quot;_shards&quot; : &#123; &quot;total&quot; : 5, &quot;successful&quot; : 5, &quot;failed&quot; : 0 &#125;, &quot;hits&quot; : &#123; &quot;total&quot; : 4, &quot;max_score&quot; : 0.034062363, &quot;hits&quot; : [ &#123; &quot;_index&quot; : &quot;iktest&quot;, &quot;_type&quot; : &quot;article&quot;, &quot;_id&quot; : &quot;2&quot;, &quot;_score&quot; : 0.034062363, &quot;_source&quot; : &#123; &quot;subject&quot; : &quot;éŸ©ä¸¾è¡Œï¼‚æŠ¤å›½è®­ç»ƒï¼‚ é’ç“¦å°:å†³ä¸è®¸å›½å®¶å®‰å…¨å‡ºé—®é¢˜&quot; &#125;, &quot;highlight&quot; : &#123; &quot;subject&quot; : [ &quot;&lt;font color=red&gt;éŸ©&lt;/font&gt;ä¸¾è¡Œï¼‚æŠ¤&lt;font color=red&gt;å›½&lt;/font&gt;è®­ç»ƒï¼‚ é’ç“¦å°:å†³ä¸è®¸å›½å®¶å®‰å…¨å‡ºé—®é¢˜&quot; ] &#125; &#125;, &#123; &quot;_index&quot; : &quot;iktest&quot;, &quot;_type&quot; : &quot;article&quot;, &quot;_id&quot; : &quot;3&quot;, &quot;_score&quot; : 0.0076681254, &quot;_source&quot; : &#123; &quot;subject&quot; : &quot;åª’ä½“ç§°FBIå·²ç»å–å¾—æœæŸ¥ä»¤ æ£€è§†å¸Œæ‹‰é‡Œç”µé‚®&quot; &#125;, &quot;highlight&quot; : &#123; &quot;subject&quot; : [ &quot;åª’ä½“ç§°FBIå·²ç»å–å¾—æœæŸ¥ä»¤ æ£€è§†&lt;font color=red&gt;å¸Œæ‹‰é‡Œ&lt;/font&gt;ç”µé‚®&quot; ] &#125; &#125;, &#123; &quot;_index&quot; : &quot;iktest&quot;, &quot;_type&quot; : &quot;article&quot;, &quot;_id&quot; : &quot;5&quot;, &quot;_score&quot; : 0.006709609, &quot;_source&quot; : &#123; &quot;subject&quot; : &quot;å¸Œæ‹‰é‡Œå›¢é˜Ÿç‚®è½°FBI å‚é™¢æ°‘ä¸»å…šé¢†è¢–æ‰¹å…¶â€œè¿æ³•â€&quot; &#125;, &quot;highlight&quot; : &#123; &quot;subject&quot; : [ &quot;&lt;font color=red&gt;å¸Œæ‹‰é‡Œ&lt;/font&gt;å›¢é˜Ÿç‚®è½°FBI å‚é™¢æ°‘ä¸»å…šé¢†è¢–æ‰¹å…¶â€œè¿æ³•â€&quot; ] &#125; &#125;, &#123; &quot;_index&quot; : &quot;iktest&quot;, &quot;_type&quot; : &quot;article&quot;, &quot;_id&quot; : &quot;1&quot;, &quot;_score&quot; : 0.0021509775, &quot;_source&quot; : &#123; &quot;subject&quot; : &quot;ï¼‚é—ºèœœï¼‚å´”é¡ºå®è¢«éŸ©æ£€æ–¹ä¼ å”¤ éŸ©æ€»ç»Ÿåºœä¿ƒå½»æŸ¥çœŸç›¸&quot; &#125;, &quot;highlight&quot; : &#123; &quot;subject&quot; : [ &quot;ï¼‚é—ºèœœï¼‚å´”é¡ºå®è¢«&lt;font color=red&gt;éŸ©&lt;/font&gt;æ£€æ–¹ä¼ å”¤ &lt;font color=red&gt;éŸ©&lt;/font&gt;æ€»ç»Ÿåºœä¿ƒå½»æŸ¥çœŸç›¸&quot; ] &#125; &#125; ] &#125;&#125; è¿™é‡Œç”¨äº†é«˜äº®å±æ€§ highlightï¼Œç›´æ¥æ˜¾ç¤ºåˆ° html ä¸­ï¼Œè¢«åŒ¹é…åˆ°çš„å­—æˆ–è¯å°†ä»¥çº¢è‰²çªå‡ºæ˜¾ç¤ºã€‚è‹¥è¦ç”¨è¿‡æ»¤æœç´¢ï¼Œç›´æ¥å°† match æ”¹ä¸º term å³å¯ çƒ­è¯æ›´æ–°é…ç½®ç½‘ç»œè¯è¯­æ—¥æ–°æœˆå¼‚ï¼Œå¦‚ä½•è®©æ–°å‡ºçš„ç½‘ç»œçƒ­è¯ï¼ˆæˆ–ç‰¹å®šçš„è¯è¯­ï¼‰å®æ—¶çš„æ›´æ–°åˆ°æˆ‘ä»¬çš„æœç´¢å½“ä¸­å‘¢ å…ˆç”¨ ik æµ‹è¯•ä¸€ä¸‹ 12345678910111213141516171819202122232425262728293031323334353637curl -XGET &apos;http://localhost:9200/_analyze?pretty&amp;analyzer=ik_max_word&apos; -d &apos;æˆé¾™åŸåé™ˆæ¸¯ç”Ÿ&apos;#è¿”å›&#123; &quot;tokens&quot; : [ &#123; &quot;token&quot; : &quot;æˆé¾™&quot;, &quot;start_offset&quot; : 1, &quot;end_offset&quot; : 3, &quot;type&quot; : &quot;CN_WORD&quot;, &quot;position&quot; : 0 &#125;, &#123; &quot;token&quot; : &quot;åŸå&quot;, &quot;start_offset&quot; : 3, &quot;end_offset&quot; : 5, &quot;type&quot; : &quot;CN_WORD&quot;, &quot;position&quot; : 1 &#125;, &#123; &quot;token&quot; : &quot;é™ˆ&quot;, &quot;start_offset&quot; : 5, &quot;end_offset&quot; : 6, &quot;type&quot; : &quot;CN_CHAR&quot;, &quot;position&quot; : 2 &#125;, &#123; &quot;token&quot; : &quot;æ¸¯&quot;, &quot;start_offset&quot; : 6, &quot;end_offset&quot; : 7, &quot;type&quot; : &quot;CN_WORD&quot;, &quot;position&quot; : 3 &#125;, &#123; &quot;token&quot; : &quot;ç”Ÿ&quot;, &quot;start_offset&quot; : 7, &quot;end_offset&quot; : 8, &quot;type&quot; : &quot;CN_CHAR&quot;, &quot;position&quot; : 4 &#125; ]&#125; ik çš„ä¸»è¯å…¸ä¸­æ²¡æœ‰â€é™ˆæ¸¯ç”Ÿâ€ è¿™ä¸ªè¯ï¼Œæ‰€ä»¥è¢«æ‹†åˆ†äº†ã€‚ç°åœ¨æˆ‘ä»¬æ¥é…ç½®ä¸€ä¸‹ ä¿®æ”¹ IK çš„é…ç½®æ–‡ä»¶ ï¼šES ç›®å½•/plugins/ik/config/ik/IKAnalyzer.cfg.xml ä¿®æ”¹å¦‚ä¸‹ï¼š 12345678910111213&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;!DOCTYPE properties SYSTEM &quot;http://java.sun.com/dtd/properties.dtd&quot;&gt;&lt;properties&gt; &lt;comment&gt;IK Analyzer æ‰©å±•é…ç½®&lt;/comment&gt; &lt;!--ç”¨æˆ·å¯ä»¥åœ¨è¿™é‡Œé…ç½®è‡ªå·±çš„æ‰©å±•å­—å…¸ --&gt; &lt;entry key=&quot;ext_dict&quot;&gt;custom/mydict.dic;custom/single_word_low_freq.dic&lt;/entry&gt; &lt;!--ç”¨æˆ·å¯ä»¥åœ¨è¿™é‡Œé…ç½®è‡ªå·±çš„æ‰©å±•åœæ­¢è¯å­—å…¸--&gt; &lt;entry key=&quot;ext_stopwords&quot;&gt;custom/ext_stopword.dic&lt;/entry&gt; &lt;!--ç”¨æˆ·å¯ä»¥åœ¨è¿™é‡Œé…ç½®è¿œç¨‹æ‰©å±•å­—å…¸ --&gt; &lt;entry key=&quot;remote_ext_dict&quot;&gt;http://192.168.1.136/hotWords.php&lt;/entry&gt; &lt;!--ç”¨æˆ·å¯ä»¥åœ¨è¿™é‡Œé…ç½®è¿œç¨‹æ‰©å±•åœæ­¢è¯å­—å…¸--&gt; &lt;!-- &lt;entry key=&quot;remote_ext_stopwords&quot;&gt;words_location&lt;/entry&gt; --&gt;&lt;/properties&gt; è¿™é‡Œæˆ‘æ˜¯ç”¨çš„æ˜¯è¿œç¨‹æ‰©å±•å­—å…¸ï¼Œå› ä¸ºå¯ä»¥ä½¿ç”¨å…¶ä»–ç¨‹åºè°ƒç”¨æ›´æ–°ï¼Œä¸”ä¸ç”¨é‡å¯ ESï¼Œå¾ˆæ–¹ä¾¿ï¼›å½“ç„¶ä½¿ç”¨è‡ªå®šä¹‰çš„ mydict.dic å­—å…¸ä¹Ÿæ˜¯å¾ˆæ–¹ä¾¿çš„ï¼Œä¸€è¡Œä¸€ä¸ªè¯ï¼Œè‡ªå·±åŠ å°±å¯ä»¥äº† æ—¢ç„¶æ˜¯è¿œç¨‹è¯å…¸ï¼Œé‚£ä¹ˆå°±è¦æ˜¯ä¸€ä¸ªå¯è®¿é—®çš„é“¾æ¥ï¼Œå¯ä»¥æ˜¯ä¸€ä¸ªé¡µé¢ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªtxtçš„æ–‡æ¡£ï¼Œä½†è¦ä¿è¯è¾“å‡ºçš„å†…å®¹æ˜¯ utf-8 çš„æ ¼å¼ hotWords.php çš„å†…å®¹ 12345678$s = &lt;&lt;&lt;'EOF'é™ˆæ¸¯ç”Ÿå…ƒæ¥¼è“ç˜¦EOF;header('Last-Modified: '.gmdate('D, d M Y H:i:s', time()).' GMT', true, 200);header('ETag: \"5816f349-19\"');echo $s; ik æ¥æ”¶ä¸¤ä¸ªè¿”å›çš„å¤´éƒ¨å±æ€§ Last-Modified å’Œ ETagï¼Œåªè¦å…¶ä¸­ä¸€ä¸ªæœ‰å˜åŒ–ï¼Œå°±ä¼šè§¦å‘æ›´æ–°ï¼Œik ä¼šæ¯åˆ†é’Ÿè·å–ä¸€æ¬¡é‡å¯ Elasticsearch ï¼ŒæŸ¥çœ‹å¯åŠ¨è®°å½•ï¼Œçœ‹åˆ°äº†ä¸‰ä¸ªè¯å·²è¢«åŠ è½½è¿›æ¥ å†æ¬¡æ‰§è¡Œä¸Šé¢çš„è¯·æ±‚ï¼Œè¿”å›, å°±å¯ä»¥çœ‹åˆ° ik åˆ†è¯å™¨å·²ç»åŒ¹é…åˆ°äº† â€œé™ˆæ¸¯ç”Ÿâ€ è¿™ä¸ªè¯ï¼ŒåŒç†ä¸€äº›å…³äºæˆ‘ä»¬å…¬å¸çš„ä¸“æœ‰åå­—ï¼ˆä¾‹å¦‚ï¼šæ°¸è¾‰ã€æ°¸è¾‰è¶…å¸‚ã€æ°¸è¾‰äº‘åˆ›ã€äº‘åˆ› â€¦. ï¼‰ä¹Ÿå¯ä»¥è‡ªå·±æ‰‹åŠ¨æ·»åŠ åˆ°å­—å…¸ä¸­å»ã€‚ 2ã€ç»“å·´ä¸­æ–‡åˆ†è¯ç‰¹ç‚¹ï¼š1ã€æ”¯æŒä¸‰ç§åˆ†è¯æ¨¡å¼ï¼š ç²¾ç¡®æ¨¡å¼ï¼Œè¯•å›¾å°†å¥å­æœ€ç²¾ç¡®åœ°åˆ‡å¼€ï¼Œé€‚åˆæ–‡æœ¬åˆ†æï¼› å…¨æ¨¡å¼ï¼ŒæŠŠå¥å­ä¸­æ‰€æœ‰çš„å¯ä»¥æˆè¯çš„è¯è¯­éƒ½æ‰«æå‡ºæ¥, é€Ÿåº¦éå¸¸å¿«ï¼Œä½†æ˜¯ä¸èƒ½è§£å†³æ­§ä¹‰ï¼› æœç´¢å¼•æ“æ¨¡å¼ï¼Œåœ¨ç²¾ç¡®æ¨¡å¼çš„åŸºç¡€ä¸Šï¼Œå¯¹é•¿è¯å†æ¬¡åˆ‡åˆ†ï¼Œæé«˜å¬å›ç‡ï¼Œé€‚åˆç”¨äºæœç´¢å¼•æ“åˆ†è¯ã€‚ 2ã€æ”¯æŒç¹ä½“åˆ†è¯ 3ã€æ”¯æŒè‡ªå®šä¹‰è¯å…¸ 3ã€THULACTHULACï¼ˆTHU Lexical Analyzer for Chineseï¼‰ç”±æ¸…åå¤§å­¦è‡ªç„¶è¯­è¨€å¤„ç†ä¸ç¤¾ä¼šäººæ–‡è®¡ç®—å®éªŒå®¤ç ”åˆ¶æ¨å‡ºçš„ä¸€å¥—ä¸­æ–‡è¯æ³•åˆ†æå·¥å…·åŒ…ï¼Œå…·æœ‰ä¸­æ–‡åˆ†è¯å’Œè¯æ€§æ ‡æ³¨åŠŸèƒ½ã€‚THULACå…·æœ‰å¦‚ä¸‹å‡ ä¸ªç‰¹ç‚¹ï¼š èƒ½åŠ›å¼ºã€‚åˆ©ç”¨æˆ‘ä»¬é›†æˆçš„ç›®å‰ä¸–ç•Œä¸Šè§„æ¨¡æœ€å¤§çš„äººå·¥åˆ†è¯å’Œè¯æ€§æ ‡æ³¨ä¸­æ–‡è¯­æ–™åº“ï¼ˆçº¦å«5800ä¸‡å­—ï¼‰è®­ç»ƒè€Œæˆï¼Œæ¨¡å‹æ ‡æ³¨èƒ½åŠ›å¼ºå¤§ã€‚ å‡†ç¡®ç‡é«˜ã€‚è¯¥å·¥å…·åŒ…åœ¨æ ‡å‡†æ•°æ®é›†Chinese Treebankï¼ˆCTB5ï¼‰ä¸Šåˆ†è¯çš„F1å€¼å¯è¾¾97.3ï¼…ï¼Œè¯æ€§æ ‡æ³¨çš„F1å€¼å¯è¾¾åˆ°92.9ï¼…ï¼Œä¸è¯¥æ•°æ®é›†ä¸Šæœ€å¥½æ–¹æ³•æ•ˆæœç›¸å½“ã€‚ é€Ÿåº¦è¾ƒå¿«ã€‚åŒæ—¶è¿›è¡Œåˆ†è¯å’Œè¯æ€§æ ‡æ³¨é€Ÿåº¦ä¸º300KB/sï¼Œæ¯ç§’å¯å¤„ç†çº¦15ä¸‡å­—ã€‚åªè¿›è¡Œåˆ†è¯é€Ÿåº¦å¯è¾¾åˆ°1.3MB/sã€‚ ä¸­æ–‡åˆ†è¯å·¥å…·thulac4jå‘å¸ƒ 1ã€è§„èŒƒåŒ–åˆ†è¯è¯å…¸ï¼Œå¹¶å»æ‰ä¸€äº›æ— ç”¨è¯ï¼› 2ã€é‡å†™DATï¼ˆåŒæ•°ç»„Trieæ ‘ï¼‰çš„æ„é€ ç®—æ³•ï¼Œç”Ÿæˆçš„DAT sizeå‡å°‘äº†8%å·¦å³ï¼Œä»è€ŒèŠ‚çœäº†å†…å­˜ï¼› 3ã€ä¼˜åŒ–åˆ†è¯ç®—æ³•ï¼Œæé«˜äº†åˆ†è¯é€Ÿç‡ã€‚ 12345&lt;dependency&gt; &lt;groupId&gt;io.github.yizhiru&lt;/groupId&gt; &lt;artifactId&gt;thulac4j&lt;/artifactId&gt; &lt;version&gt;$&#123;thulac4j.version&#125;&lt;/version&gt;&lt;/dependency&gt; http://www.cnblogs.com/en-heng/p/6526598.html thulac4jæ”¯æŒä¸¤ç§åˆ†è¯æ¨¡å¼ï¼š SegOnlyæ¨¡å¼ï¼Œåªåˆ†è¯æ²¡æœ‰è¯æ€§æ ‡æ³¨ï¼› SegPosæ¨¡å¼ï¼Œåˆ†è¯å…¼æœ‰è¯æ€§æ ‡æ³¨ã€‚ 12345678910// SegOnly modeString sentence = \"æ»”æ»”çš„æµæ°´ï¼Œå‘ç€æ³¢å£«é¡¿æ¹¾æ— å£°é€å»\";SegOnly seg = new SegOnly(\"models/seg_only.bin\");System.out.println(seg.segment(sentence));// [æ»”æ»”, çš„, æµæ°´, ï¼Œ, å‘ç€, æ³¢å£«é¡¿æ¹¾, æ— å£°, é€å»]// SegPos modeSegPos pos = new SegPos(\"models/seg_pos.bin\");System.out.println(pos.segment(sentence));//[æ»”æ»”/a, çš„/u, æµæ°´/n, ï¼Œ/w, å‘ç€/p, æ³¢å£«é¡¿æ¹¾/ns, æ— å£°/v, é€å»/v] 4ã€NLPIRä¸­ç§‘é™¢è®¡ç®—æ‰€ NLPIRï¼šhttp://ictclas.nlpir.org/nlpir/ (å¯ç›´æ¥åœ¨çº¿åˆ†æä¸­æ–‡) ä¸‹è½½åœ°å€ï¼šhttps://github.com/NLPIR-team/NLPIR ä¸­ç§‘é™¢åˆ†è¯ç³»ç»Ÿ(NLPIR)JAVAç®€æ˜“æ•™ç¨‹: http://www.cnblogs.com/wukongjiuwo/p/4092480.html 5ã€ansjåˆ†è¯å™¨https://github.com/NLPchina/ansj_seg è¿™æ˜¯ä¸€ä¸ªåŸºäºn-Gram+CRF+HMMçš„ä¸­æ–‡åˆ†è¯çš„javaå®ç°. åˆ†è¯é€Ÿåº¦è¾¾åˆ°æ¯ç§’é’Ÿå¤§çº¦200ä¸‡å­—å·¦å³ï¼ˆmac airä¸‹æµ‹è¯•ï¼‰ï¼Œå‡†ç¡®ç‡èƒ½è¾¾åˆ°96%ä»¥ä¸Š ç›®å‰å®ç°äº†.ä¸­æ–‡åˆ†è¯. ä¸­æ–‡å§“åè¯†åˆ« . ç”¨æˆ·è‡ªå®šä¹‰è¯å…¸,å…³é”®å­—æå–ï¼Œè‡ªåŠ¨æ‘˜è¦ï¼Œå…³é”®å­—æ ‡è®°ç­‰åŠŸèƒ½å¯ä»¥åº”ç”¨åˆ°è‡ªç„¶è¯­è¨€å¤„ç†ç­‰æ–¹é¢,é€‚ç”¨äºå¯¹åˆ†è¯æ•ˆæœè¦æ±‚é«˜çš„å„ç§é¡¹ç›®. maven å¼•å…¥ï¼š 12345&lt;dependency&gt; &lt;groupId&gt;org.ansj&lt;/groupId&gt; &lt;artifactId&gt;ansj_seg&lt;/artifactId&gt; &lt;version&gt;5.1.1&lt;/version&gt;&lt;/dependency&gt; è°ƒç”¨demo 1234String str = \"æ¬¢è¿ä½¿ç”¨ansj_seg,(ansjä¸­æ–‡åˆ†è¯)åœ¨è¿™é‡Œå¦‚æœä½ é‡åˆ°ä»€ä¹ˆé—®é¢˜éƒ½å¯ä»¥è”ç³»æˆ‘.æˆ‘ä¸€å®šå°½æˆ‘æ‰€èƒ½.å¸®åŠ©å¤§å®¶.ansj_segæ›´å¿«,æ›´å‡†,æ›´è‡ªç”±!\" ; System.out.println(ToAnalysis.parse(str)); æ¬¢è¿/v,ä½¿ç”¨/v,ansj/en,_,seg/en,,,(,ansj/en,ä¸­æ–‡/nz,åˆ†è¯/n,),åœ¨/p,è¿™é‡Œ/r,å¦‚æœ/c,ä½ /r,é‡åˆ°/v,ä»€ä¹ˆ/r,é—®é¢˜/n,éƒ½/d,å¯ä»¥/v,è”ç³»/v,æˆ‘/r,./m,æˆ‘/r,ä¸€å®š/d,å°½æˆ‘æ‰€èƒ½/l,./m,å¸®åŠ©/v,å¤§å®¶/r,./m,ansj/en,_,seg/en,æ›´å¿«/d,,,æ›´/d,å‡†/a,,,æ›´/d,è‡ªç”±/a,! 6ã€å“ˆå·¥å¤§çš„LTPhttps://link.zhihu.com/?target=https%3A//github.com/HIT-SCIR/ltp LTPåˆ¶å®šäº†åŸºäºXMLçš„è¯­è¨€å¤„ç†ç»“æœè¡¨ç¤ºï¼Œå¹¶åœ¨æ­¤åŸºç¡€ä¸Šæä¾›äº†ä¸€æ•´å¥—è‡ªåº•å‘ä¸Šçš„ä¸°å¯Œè€Œä¸”é«˜æ•ˆçš„ä¸­æ–‡è¯­è¨€å¤„ç†æ¨¡å—ï¼ˆåŒ…æ‹¬è¯æ³•ã€å¥æ³•ã€è¯­ä¹‰ç­‰6é¡¹ä¸­æ–‡å¤„ç†æ ¸å¿ƒæŠ€æœ¯ï¼‰ï¼Œä»¥åŠåŸºäºåŠ¨æ€é“¾æ¥åº“ï¼ˆDynamic Link Library, DLLï¼‰çš„åº”ç”¨ç¨‹åºæ¥å£ã€å¯è§†åŒ–å·¥å…·ï¼Œå¹¶ä¸”èƒ½å¤Ÿä»¥ç½‘ç»œæœåŠ¡ï¼ˆWeb Serviceï¼‰çš„å½¢å¼è¿›è¡Œä½¿ç”¨ã€‚ å…³äºLTPçš„ä½¿ç”¨ï¼Œè¯·å‚è€ƒ: http://ltp.readthedocs.io/zh_CN/latest/ 7ã€åº–ä¸è§£ç‰›ä¸‹è½½åœ°å€ï¼šhttp://pan.baidu.com/s/1eQ88SZS ä½¿ç”¨åˆ†ä¸ºå¦‚ä¸‹å‡ æ­¥ï¼š é…ç½®dicæ–‡ä»¶ï¼šä¿®æ”¹paoding-analysis.jarä¸­çš„paoding-dic-home.propertiesæ–‡ä»¶ï¼Œå°†â€œ#paoding.dic.home=dicâ€çš„æ³¨é‡Šå»æ‰ï¼Œå¹¶é…ç½®æˆè‡ªå·±dicæ–‡ä»¶çš„æœ¬åœ°å­˜æ”¾è·¯å¾„ã€‚egï¼š/home/hadoop/work/paoding-analysis-2.0.4-beta/dic æŠŠJaråŒ…å¯¼å…¥åˆ°é¡¹ç›®ä¸­ï¼šå°†paoding-analysis.jarã€commons-logging.jarã€lucene-analyzers-2.2.0.jarå’Œlucene-core-2.2.0.jarå››ä¸ªåŒ…å¯¼å…¥åˆ°é¡¹ç›®ä¸­ï¼Œè¿™æ—¶å°±å¯ä»¥åœ¨ä»£ç ç‰‡æ®µä¸­ä½¿ç”¨åº–ä¸è§£ç‰›å·¥å…·æä¾›çš„ä¸­æ–‡åˆ†è¯æŠ€æœ¯ï¼Œä¾‹å¦‚ï¼š 123456789101112Analyzer analyzer = new PaodingAnalyzer(); //å®šä¹‰ä¸€ä¸ªè§£æå™¨String text = \"åº–ä¸ç³»ç»Ÿæ˜¯ä¸ªå®Œå…¨åŸºäºluceneçš„ä¸­æ–‡åˆ†è¯ç³»ç»Ÿï¼Œå®ƒå°±æ˜¯é‡æ–°å»ºäº†ä¸€ä¸ªanalyzerï¼Œå«åšPaodingAnalyzerï¼Œè¿™ä¸ªanalyerçš„æ ¸å¿ƒä»»åŠ¡å°±æ˜¯ç”Ÿæˆä¸€ä¸ªå¯ä»¥åˆ‡è¯TokenStreamã€‚\"; &lt;span style=\"font-family: Arial, Helvetica, sans-serif;\"&gt;//å¾…åˆ†è¯çš„å†…å®¹&lt;/span&gt;TokenStream tokenStream = analyzer.tokenStream(text, new StringReader(text)); //å¾—åˆ°tokenåºåˆ—çš„è¾“å‡ºæµtry &#123; Token t; while ((t = tokenStream.next()) != null) &#123; System.out.println(t); //è¾“å‡ºæ¯ä¸ªtoken &#125;&#125; catch (IOException e) &#123; e.printStackTrace();&#125; 8ã€sogoåœ¨çº¿åˆ†è¯sogoåœ¨çº¿åˆ†è¯é‡‡ç”¨äº†åŸºäºæ±‰å­—æ ‡æ³¨çš„åˆ†è¯æ–¹æ³•ï¼Œä¸»è¦ä½¿ç”¨äº†çº¿æ€§é“¾é“¾CRFï¼ˆLinear-chain CRFï¼‰æ¨¡å‹ã€‚è¯æ€§æ ‡æ³¨æ¨¡å—ä¸»è¦åŸºäºç»“æ„åŒ–çº¿æ€§æ¨¡å‹ï¼ˆStructured Linear Modelï¼‰ åœ¨çº¿ä½¿ç”¨åœ°å€ä¸ºï¼šhttp://www.sogou.com/labs/webservice/ 9ã€wordåˆ†è¯åœ°å€ï¼š https://github.com/ysc/word wordåˆ†è¯æ˜¯ä¸€ä¸ªJavaå®ç°çš„åˆ†å¸ƒå¼çš„ä¸­æ–‡åˆ†è¯ç»„ä»¶ï¼Œæä¾›äº†å¤šç§åŸºäºè¯å…¸çš„åˆ†è¯ç®—æ³•ï¼Œå¹¶åˆ©ç”¨ngramæ¨¡å‹æ¥æ¶ˆé™¤æ­§ä¹‰ã€‚èƒ½å‡†ç¡®è¯†åˆ«è‹±æ–‡ã€æ•°å­—ï¼Œä»¥åŠæ—¥æœŸã€æ—¶é—´ç­‰æ•°é‡è¯ï¼Œèƒ½è¯†åˆ«äººåã€åœ°åã€ç»„ç»‡æœºæ„åç­‰æœªç™»å½•è¯ã€‚èƒ½é€šè¿‡è‡ªå®šä¹‰é…ç½®æ–‡ä»¶æ¥æ”¹å˜ç»„ä»¶è¡Œä¸ºï¼Œèƒ½è‡ªå®šä¹‰ç”¨æˆ·è¯åº“ã€è‡ªåŠ¨æ£€æµ‹è¯åº“å˜åŒ–ã€æ”¯æŒå¤§è§„æ¨¡åˆ†å¸ƒå¼ç¯å¢ƒï¼Œèƒ½çµæ´»æŒ‡å®šå¤šç§åˆ†è¯ç®—æ³•ï¼Œèƒ½ä½¿ç”¨refineåŠŸèƒ½çµæ´»æ§åˆ¶åˆ†è¯ç»“æœï¼Œè¿˜èƒ½ä½¿ç”¨è¯é¢‘ç»Ÿè®¡ã€è¯æ€§æ ‡æ³¨ã€åŒä¹‰æ ‡æ³¨ã€åä¹‰æ ‡æ³¨ã€æ‹¼éŸ³æ ‡æ³¨ç­‰åŠŸèƒ½ã€‚æä¾›äº†10ç§åˆ†è¯ç®—æ³•ï¼Œè¿˜æä¾›äº†10ç§æ–‡æœ¬ç›¸ä¼¼åº¦ç®—æ³•ï¼ŒåŒæ—¶è¿˜æ— ç¼å’ŒLuceneã€Solrã€ElasticSearchã€Lukeé›†æˆã€‚æ³¨æ„ï¼šword1.3éœ€è¦JDK1.8 maven ä¸­å¼•å…¥ä¾èµ–ï¼š 1234567&lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.apdplat&lt;/groupId&gt; &lt;artifactId&gt;word&lt;/artifactId&gt; &lt;version&gt;1.3&lt;/version&gt; &lt;/dependency&gt;&lt;/dependencies&gt; ElasticSearchæ’ä»¶ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344451ã€æ‰“å¼€å‘½ä»¤è¡Œå¹¶åˆ‡æ¢åˆ°elasticsearchçš„binç›®å½•cd elasticsearch-2.1.1/bin2ã€è¿è¡Œpluginè„šæœ¬å®‰è£…wordåˆ†è¯æ’ä»¶ï¼š./plugin install http://apdplat.org/word/archive/v1.4.zipå®‰è£…çš„æ—¶å€™æ³¨æ„ï¼š å¦‚æœæç¤ºï¼š ERROR: failed to download æˆ–è€… Failed to install word, reason: failed to download æˆ–è€… ERROR: incorrect hash (SHA1) åˆ™é‡æ–°å†æ¬¡è¿è¡Œå‘½ä»¤ï¼Œå¦‚æœè¿˜æ˜¯ä¸è¡Œï¼Œå¤šè¯•ä¸¤æ¬¡å¦‚æœæ˜¯elasticsearch1.xç³»åˆ—ç‰ˆæœ¬ï¼Œåˆ™ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼š./plugin -u http://apdplat.org/word/archive/v1.3.1.zip -i word3ã€ä¿®æ”¹æ–‡ä»¶elasticsearch-2.1.1/config/elasticsearch.ymlï¼Œæ–°å¢å¦‚ä¸‹é…ç½®ï¼šindex.analysis.analyzer.default.type : &quot;word&quot;index.analysis.tokenizer.default.type : &quot;word&quot;4ã€å¯åŠ¨ElasticSearchæµ‹è¯•æ•ˆæœï¼Œåœ¨Chromeæµè§ˆå™¨ä¸­è®¿é—®ï¼šhttp://localhost:9200/_analyze?analyzer=word&amp;text=æ¨å°šå·æ˜¯APDPlatåº”ç”¨çº§äº§å“å¼€å‘å¹³å°çš„ä½œè€…5ã€è‡ªå®šä¹‰é…ç½®ä¿®æ”¹é…ç½®æ–‡ä»¶elasticsearch-2.1.1/plugins/word/word.local.conf6ã€æŒ‡å®šåˆ†è¯ç®—æ³•ä¿®æ”¹æ–‡ä»¶elasticsearch-2.1.1/config/elasticsearch.ymlï¼Œæ–°å¢å¦‚ä¸‹é…ç½®ï¼šindex.analysis.analyzer.default.segAlgorithm : &quot;ReverseMinimumMatching&quot;index.analysis.tokenizer.default.segAlgorithm : &quot;ReverseMinimumMatching&quot;è¿™é‡ŒsegAlgorithmå¯æŒ‡å®šçš„å€¼æœ‰ï¼šæ­£å‘æœ€å¤§åŒ¹é…ç®—æ³•ï¼šMaximumMatchingé€†å‘æœ€å¤§åŒ¹é…ç®—æ³•ï¼šReverseMaximumMatchingæ­£å‘æœ€å°åŒ¹é…ç®—æ³•ï¼šMinimumMatchingé€†å‘æœ€å°åŒ¹é…ç®—æ³•ï¼šReverseMinimumMatchingåŒå‘æœ€å¤§åŒ¹é…ç®—æ³•ï¼šBidirectionalMaximumMatchingåŒå‘æœ€å°åŒ¹é…ç®—æ³•ï¼šBidirectionalMinimumMatchingåŒå‘æœ€å¤§æœ€å°åŒ¹é…ç®—æ³•ï¼šBidirectionalMaximumMinimumMatchingå…¨åˆ‡åˆ†ç®—æ³•ï¼šFullSegmentationæœ€å°‘è¯æ•°ç®—æ³•ï¼šMinimalWordCountæœ€å¤§Ngramåˆ†å€¼ç®—æ³•ï¼šMaxNgramScoreå¦‚ä¸æŒ‡å®šï¼Œé»˜è®¤ä½¿ç”¨åŒå‘æœ€å¤§åŒ¹é…ç®—æ³•ï¼šBidirectionalMaximumMatching 10ã€jcsegåˆ†è¯å™¨https://code.google.com/archive/p/jcseg/ 11ã€stanfordåˆ†è¯å™¨Stanfordå¤§å­¦çš„ä¸€ä¸ªå¼€æºåˆ†è¯å·¥å…·ï¼Œç›®å‰å·²æ”¯æŒæ±‰è¯­ã€‚ é¦–å…ˆï¼Œå»ã€1ã€‘ä¸‹è½½Download Stanford Word Segmenter version 3.5.2ï¼Œå–å¾—é‡Œé¢çš„ data æ–‡ä»¶å¤¹ï¼Œæ”¾åœ¨maven projectçš„ src/main/resources é‡Œã€‚ ç„¶åï¼Œmavenä¾èµ–æ·»åŠ ï¼š 123456789101112131415161718192021222324&lt;properties&gt; &lt;java.version&gt;1.8&lt;/java.version&gt; &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt; &lt;corenlp.version&gt;3.6.0&lt;/corenlp.version&gt; &lt;/properties&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;edu.stanford.nlp&lt;/groupId&gt; &lt;artifactId&gt;stanford-corenlp&lt;/artifactId&gt; &lt;version&gt;$&#123;corenlp.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;edu.stanford.nlp&lt;/groupId&gt; &lt;artifactId&gt;stanford-corenlp&lt;/artifactId&gt; &lt;version&gt;$&#123;corenlp.version&#125;&lt;/version&gt; &lt;classifier&gt;models&lt;/classifier&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;edu.stanford.nlp&lt;/groupId&gt; &lt;artifactId&gt;stanford-corenlp&lt;/artifactId&gt; &lt;version&gt;$&#123;corenlp.version&#125;&lt;/version&gt; &lt;classifier&gt;models-chinese&lt;/classifier&gt; &lt;/dependency&gt; &lt;/dependencies&gt; æµ‹è¯•ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243import java.util.Properties;import edu.stanford.nlp.ie.crf.CRFClassifier;public class CoreNLPSegment &#123; private static CoreNLPSegment instance; private CRFClassifier classifier; private CoreNLPSegment()&#123; Properties props = new Properties(); props.setProperty(\"sighanCorporaDict\", \"data\"); props.setProperty(\"serDictionary\", \"data/dict-chris6.ser.gz\"); props.setProperty(\"inputEncoding\", \"UTF-8\"); props.setProperty(\"sighanPostProcessing\", \"true\"); classifier = new CRFClassifier(props); classifier.loadClassifierNoExceptions(\"data/ctb.gz\", props); classifier.flags.setProperties(props); &#125; public static CoreNLPSegment getInstance() &#123; if (instance == null) &#123; instance = new CoreNLPSegment(); &#125; return instance; &#125; public String[] doSegment(String data) &#123; return (String[]) classifier.segmentString(data).toArray(); &#125; public static void main(String[] args) &#123; String sentence = \"ä»–å’Œæˆ‘åœ¨å­¦æ ¡é‡Œå¸¸æ‰“æ¡Œçƒã€‚\"; String ret[] = CoreNLPSegment.getInstance().doSegment(sentence); for (String str : ret) &#123; System.out.println(str); &#125; &#125;&#125; åšå®¢ï¼š https://blog.sectong.com/blog/corenlp_segment.html http://blog.csdn.net/lightty/article/details/51766602 12ã€SmartcnSmartcnä¸ºApache2.0åè®®çš„å¼€æºä¸­æ–‡åˆ†è¯ç³»ç»Ÿï¼ŒJavaè¯­è¨€ç¼–å†™ï¼Œä¿®æ”¹çš„ä¸­ç§‘é™¢è®¡ç®—æ‰€ICTCLASåˆ†è¯ç³»ç»Ÿã€‚å¾ˆæ—©ä»¥å‰çœ‹åˆ°Luceneä¸Šå¤šäº†ä¸€ä¸ªä¸­æ–‡åˆ†è¯çš„contributionï¼Œå½“æ—¶åªæ˜¯ç®€å•çš„æ‰«äº†ä¸€ä¸‹.classæ–‡ä»¶çš„æ–‡ä»¶åï¼Œé€šè¿‡æ–‡ä»¶åå¯ä»¥çœ‹å¾—å‡ºåˆæ˜¯ä¸€ä¸ªæ”¹çš„ICTCLASçš„åˆ†è¯ç³»ç»Ÿã€‚ http://lucene.apache.org/core/5_1_0/analyzers-smartcn/org/apache/lucene/analysis/cn/smart/SmartChineseAnalyzer.html 13ã€pinyin åˆ†è¯å™¨pinyinåˆ†è¯å™¨å¯ä»¥è®©ç”¨æˆ·è¾“å…¥æ‹¼éŸ³ï¼Œå°±èƒ½æŸ¥æ‰¾åˆ°ç›¸å…³çš„å…³é”®è¯ã€‚æ¯”å¦‚åœ¨æŸä¸ªå•†åŸæœç´¢ä¸­ï¼Œè¾“å…¥ yonghuiï¼Œå°±èƒ½åŒ¹é…åˆ° æ°¸è¾‰ã€‚è¿™æ ·çš„ä½“éªŒè¿˜æ˜¯éå¸¸å¥½çš„ã€‚ pinyinåˆ†è¯å™¨çš„å®‰è£…ä¸IKæ˜¯ä¸€æ ·çš„ã€‚ä¸‹è½½åœ°å€ï¼šhttps://github.com/medcl/elasticsearch-analysis-pinyin ä¸€äº›å‚æ•°è¯·å‚è€ƒ GitHub çš„ readme æ–‡æ¡£ã€‚ è¿™ä¸ªåˆ†è¯å™¨åœ¨1.8ç‰ˆæœ¬ä¸­ï¼Œæä¾›äº†ä¸¤ç§åˆ†è¯è§„åˆ™ï¼š pinyin,å°±æ˜¯æ™®é€šçš„æŠŠæ±‰å­—è½¬æ¢æˆæ‹¼éŸ³ï¼› pinyin_first_letterï¼Œæå–æ±‰å­—çš„æ‹¼éŸ³é¦–å­—æ¯ ä½¿ç”¨ï¼š 1.Create a index with custom pinyin analyzer 1234567891011121314151617181920212223curl -XPUT http://localhost:9200/medcl/ -d&apos;&#123; &quot;index&quot; : &#123; &quot;analysis&quot; : &#123; &quot;analyzer&quot; : &#123; &quot;pinyin_analyzer&quot; : &#123; &quot;tokenizer&quot; : &quot;my_pinyin&quot; &#125; &#125;, &quot;tokenizer&quot; : &#123; &quot;my_pinyin&quot; : &#123; &quot;type&quot; : &quot;pinyin&quot;, &quot;keep_separate_first_letter&quot; : false, &quot;keep_full_pinyin&quot; : true, &quot;keep_original&quot; : true, &quot;limit_first_letter_length&quot; : 16, &quot;lowercase&quot; : true, &quot;remove_duplicated_term&quot; : true &#125; &#125; &#125; &#125;&#125;&apos; 2.Test Analyzer, analyzing a chinese name, such as åˆ˜å¾·å 1http://localhost:9200/medcl/_analyze?text=%e5%88%98%e5%be%b7%e5%8d%8e&amp;analyzer=pinyin_analyzer 123456789101112131415161718192021222324252627282930313233343536373839&#123; &quot;tokens&quot; : [ &#123; &quot;token&quot; : &quot;liu&quot;, &quot;start_offset&quot; : 0, &quot;end_offset&quot; : 1, &quot;type&quot; : &quot;word&quot;, &quot;position&quot; : 0 &#125;, &#123; &quot;token&quot; : &quot;de&quot;, &quot;start_offset&quot; : 1, &quot;end_offset&quot; : 2, &quot;type&quot; : &quot;word&quot;, &quot;position&quot; : 1 &#125;, &#123; &quot;token&quot; : &quot;hua&quot;, &quot;start_offset&quot; : 2, &quot;end_offset&quot; : 3, &quot;type&quot; : &quot;word&quot;, &quot;position&quot; : 2 &#125;, &#123; &quot;token&quot; : &quot;åˆ˜å¾·å&quot;, &quot;start_offset&quot; : 0, &quot;end_offset&quot; : 3, &quot;type&quot; : &quot;word&quot;, &quot;position&quot; : 3 &#125;, &#123; &quot;token&quot; : &quot;ldh&quot;, &quot;start_offset&quot; : 0, &quot;end_offset&quot; : 3, &quot;type&quot; : &quot;word&quot;, &quot;position&quot; : 4 &#125; ]&#125; 3.Create mapping 12345678910111213141516171819curl -XPOST http://localhost:9200/medcl/folks/_mapping -d&apos;&#123; &quot;folks&quot;: &#123; &quot;properties&quot;: &#123; &quot;name&quot;: &#123; &quot;type&quot;: &quot;keyword&quot;, &quot;fields&quot;: &#123; &quot;pinyin&quot;: &#123; &quot;type&quot;: &quot;text&quot;, &quot;store&quot;: &quot;no&quot;, &quot;term_vector&quot;: &quot;with_offsets&quot;, &quot;analyzer&quot;: &quot;pinyin_analyzer&quot;, &quot;boost&quot;: 10 &#125; &#125; &#125; &#125; &#125;&#125;&apos; 4.Indexing 1curl -XPOST http://localhost:9200/medcl/folks/andy -d&apos;&#123;&quot;name&quot;:&quot;åˆ˜å¾·å&quot;&#125;&apos; 5.Letâ€™s search 12345http://localhost:9200/medcl/folks/_search?q=name:%E5%88%98%E5%BE%B7%E5%8D%8Ecurl http://localhost:9200/medcl/folks/_search?q=name.pinyin:%e5%88%98%e5%be%b7curl http://localhost:9200/medcl/folks/_search?q=name.pinyin:liucurl http://localhost:9200/medcl/folks/_search?q=name.pinyin:ldhcurl http://localhost:9200/medcl/folks/_search?q=name.pinyin:de+hua 6.Using Pinyin-TokenFilter 123456789101112131415161718192021222324252627curl -XPUT http://localhost:9200/medcl1/ -d&apos;&#123; &quot;index&quot; : &#123; &quot;analysis&quot; : &#123; &quot;analyzer&quot; : &#123; &quot;user_name_analyzer&quot; : &#123; &quot;tokenizer&quot; : &quot;whitespace&quot;, &quot;filter&quot; : &quot;pinyin_first_letter_and_full_pinyin_filter&quot; &#125; &#125;, &quot;filter&quot; : &#123; &quot;pinyin_first_letter_and_full_pinyin_filter&quot; : &#123; &quot;type&quot; : &quot;pinyin&quot;, &quot;keep_first_letter&quot; : true, &quot;keep_full_pinyin&quot; : false, &quot;keep_none_chinese&quot; : true, &quot;keep_original&quot; : false, &quot;limit_first_letter_length&quot; : 16, &quot;lowercase&quot; : true, &quot;trim_whitespace&quot; : true, &quot;keep_none_chinese_in_first_letter&quot; : true &#125; &#125; &#125; &#125;&#125;&apos; Token Test:åˆ˜å¾·å å¼ å­¦å‹ éƒ­å¯ŒåŸ é»æ˜ å››å¤§å¤©ç‹ 1curl -XGET http://localhost:9200/medcl1/_analyze?text=%e5%88%98%e5%be%b7%e5%8d%8e+%e5%bc%a0%e5%ad%a6%e5%8f%8b+%e9%83%ad%e5%af%8c%e5%9f%8e+%e9%bb%8e%e6%98%8e+%e5%9b%9b%e5%a4%a7%e5%a4%a9%e7%8e%8b&amp;analyzer=user_name_analyzer 12345678910111213141516171819202122232425262728293031323334353637383940&#123; &quot;tokens&quot; : [ &#123; &quot;token&quot; : &quot;ldh&quot;, &quot;start_offset&quot; : 0, &quot;end_offset&quot; : 3, &quot;type&quot; : &quot;word&quot;, &quot;position&quot; : 0 &#125;, &#123; &quot;token&quot; : &quot;zxy&quot;, &quot;start_offset&quot; : 4, &quot;end_offset&quot; : 7, &quot;type&quot; : &quot;word&quot;, &quot;position&quot; : 1 &#125;, &#123; &quot;token&quot; : &quot;gfc&quot;, &quot;start_offset&quot; : 8, &quot;end_offset&quot; : 11, &quot;type&quot; : &quot;word&quot;, &quot;position&quot; : 2 &#125;, &#123; &quot;token&quot; : &quot;lm&quot;, &quot;start_offset&quot; : 12, &quot;end_offset&quot; : 14, &quot;type&quot; : &quot;word&quot;, &quot;position&quot; : 3 &#125;, &#123; &quot;token&quot; : &quot;sdtw&quot;, &quot;start_offset&quot; : 15, &quot;end_offset&quot; : 19, &quot;type&quot; : &quot;word&quot;, &quot;position&quot; : 4 &#125; ]&#125; 7.Used in phrase query (1)ã€ 123456789101112131415161718192021222324252627282930PUT /medcl/ &#123; &quot;index&quot; : &#123; &quot;analysis&quot; : &#123; &quot;analyzer&quot; : &#123; &quot;pinyin_analyzer&quot; : &#123; &quot;tokenizer&quot; : &quot;my_pinyin&quot; &#125; &#125;, &quot;tokenizer&quot; : &#123; &quot;my_pinyin&quot; : &#123; &quot;type&quot; : &quot;pinyin&quot;, &quot;keep_first_letter&quot;:false, &quot;keep_separate_first_letter&quot; : false, &quot;keep_full_pinyin&quot; : true, &quot;keep_original&quot; : false, &quot;limit_first_letter_length&quot; : 16, &quot;lowercase&quot; : true &#125; &#125; &#125; &#125; &#125; GET /medcl/folks/_search &#123; &quot;query&quot;: &#123;&quot;match_phrase&quot;: &#123; &quot;name.pinyin&quot;: &quot;åˆ˜å¾·å&quot; &#125;&#125; &#125; (2)ã€ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647PUT /medcl/ &#123; &quot;index&quot; : &#123; &quot;analysis&quot; : &#123; &quot;analyzer&quot; : &#123; &quot;pinyin_analyzer&quot; : &#123; &quot;tokenizer&quot; : &quot;my_pinyin&quot; &#125; &#125;, &quot;tokenizer&quot; : &#123; &quot;my_pinyin&quot; : &#123; &quot;type&quot; : &quot;pinyin&quot;, &quot;keep_first_letter&quot;:false, &quot;keep_separate_first_letter&quot; : true, &quot;keep_full_pinyin&quot; : false, &quot;keep_original&quot; : false, &quot;limit_first_letter_length&quot; : 16, &quot;lowercase&quot; : true &#125; &#125; &#125; &#125; &#125; POST /medcl/folks/andy &#123;&quot;name&quot;:&quot;åˆ˜å¾·å&quot;&#125; GET /medcl/folks/_search &#123; &quot;query&quot;: &#123;&quot;match_phrase&quot;: &#123; &quot;name.pinyin&quot;: &quot;åˆ˜å¾·h&quot; &#125;&#125; &#125; GET /medcl/folks/_search &#123; &quot;query&quot;: &#123;&quot;match_phrase&quot;: &#123; &quot;name.pinyin&quot;: &quot;åˆ˜dh&quot; &#125;&#125; &#125; GET /medcl/folks/_search &#123; &quot;query&quot;: &#123;&quot;match_phrase&quot;: &#123; &quot;name.pinyin&quot;: &quot;dh&quot; &#125;&#125; &#125; 14ã€Mmseg åˆ†è¯å™¨ä¹Ÿæ”¯æŒ Elasticsearch ä¸‹è½½åœ°å€ï¼šhttps://github.com/medcl/elasticsearch-analysis-mmseg/releases æ ¹æ®å¯¹åº”çš„ç‰ˆæœ¬è¿›è¡Œä¸‹è½½ å¦‚ä½•ä½¿ç”¨ï¼š 1ã€åˆ›å»ºç´¢å¼•ï¼š 1curl -XPUT http://localhost:9200/index 2ã€åˆ›å»º mapping 123456789101112curl -XPOST http://localhost:9200/index/fulltext/_mapping -d&apos;&#123; &quot;properties&quot;: &#123; &quot;content&quot;: &#123; &quot;type&quot;: &quot;text&quot;, &quot;term_vector&quot;: &quot;with_positions_offsets&quot;, &quot;analyzer&quot;: &quot;mmseg_maxword&quot;, &quot;search_analyzer&quot;: &quot;mmseg_maxword&quot; &#125; &#125;&#125;&apos; 3.Indexing some docs 123456789101112131415curl -XPOST http://localhost:9200/index/fulltext/1 -d&apos;&#123;&quot;content&quot;:&quot;ç¾å›½ç•™ç»™ä¼Šæ‹‰å…‹çš„æ˜¯ä¸ªçƒ‚æ‘Šå­å—&quot;&#125;&apos;curl -XPOST http://localhost:9200/index/fulltext/2 -d&apos;&#123;&quot;content&quot;:&quot;å…¬å®‰éƒ¨ï¼šå„åœ°æ ¡è½¦å°†äº«æœ€é«˜è·¯æƒ&quot;&#125;&apos;curl -XPOST http://localhost:9200/index/fulltext/3 -d&apos;&#123;&quot;content&quot;:&quot;ä¸­éŸ©æ¸”è­¦å†²çªè°ƒæŸ¥ï¼šéŸ©è­¦å¹³å‡æ¯å¤©æ‰£1è‰˜ä¸­å›½æ¸”èˆ¹&quot;&#125;&apos;curl -XPOST http://localhost:9200/index/fulltext/4 -d&apos;&#123;&quot;content&quot;:&quot;ä¸­å›½é©»æ´›æ‰çŸ¶é¢†äº‹é¦†é­äºšè£”ç”·å­æªå‡» å«ŒçŠ¯å·²è‡ªé¦–&quot;&#125;&apos; 4.Query with highlighting(æŸ¥è¯¢é«˜äº®) 123456789101112curl -XPOST http://localhost:9200/index/fulltext/_search -d&apos;&#123; &quot;query&quot; : &#123; &quot;term&quot; : &#123; &quot;content&quot; : &quot;ä¸­å›½&quot; &#125;&#125;, &quot;highlight&quot; : &#123; &quot;pre_tags&quot; : [&quot;&lt;tag1&gt;&quot;, &quot;&lt;tag2&gt;&quot;], &quot;post_tags&quot; : [&quot;&lt;/tag1&gt;&quot;, &quot;&lt;/tag2&gt;&quot;], &quot;fields&quot; : &#123; &quot;content&quot; : &#123;&#125; &#125; &#125;&#125;&apos; 5ã€ç»“æœï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243&#123; &quot;took&quot;: 14, &quot;timed_out&quot;: false, &quot;_shards&quot;: &#123; &quot;total&quot;: 5, &quot;successful&quot;: 5, &quot;failed&quot;: 0 &#125;, &quot;hits&quot;: &#123; &quot;total&quot;: 2, &quot;max_score&quot;: 2, &quot;hits&quot;: [ &#123; &quot;_index&quot;: &quot;index&quot;, &quot;_type&quot;: &quot;fulltext&quot;, &quot;_id&quot;: &quot;4&quot;, &quot;_score&quot;: 2, &quot;_source&quot;: &#123; &quot;content&quot;: &quot;ä¸­å›½é©»æ´›æ‰çŸ¶é¢†äº‹é¦†é­äºšè£”ç”·å­æªå‡» å«ŒçŠ¯å·²è‡ªé¦–&quot; &#125;, &quot;highlight&quot;: &#123; &quot;content&quot;: [ &quot;&lt;tag1&gt;ä¸­å›½&lt;/tag1&gt;é©»æ´›æ‰çŸ¶é¢†äº‹é¦†é­äºšè£”ç”·å­æªå‡» å«ŒçŠ¯å·²è‡ªé¦– &quot; ] &#125; &#125;, &#123; &quot;_index&quot;: &quot;index&quot;, &quot;_type&quot;: &quot;fulltext&quot;, &quot;_id&quot;: &quot;3&quot;, &quot;_score&quot;: 2, &quot;_source&quot;: &#123; &quot;content&quot;: &quot;ä¸­éŸ©æ¸”è­¦å†²çªè°ƒæŸ¥ï¼šéŸ©è­¦å¹³å‡æ¯å¤©æ‰£1è‰˜ä¸­å›½æ¸”èˆ¹&quot; &#125;, &quot;highlight&quot;: &#123; &quot;content&quot;: [ &quot;å‡æ¯å¤©æ‰£1è‰˜&lt;tag1&gt;ä¸­å›½&lt;/tag1&gt;æ¸”èˆ¹ &quot; ] &#125; &#125; ] &#125;&#125; å‚è€ƒåšå®¢ï¼š ä¸ºelasticæ·»åŠ ä¸­æ–‡åˆ†è¯: http://blog.csdn.net/dingzfang/article/details/42776693 15ã€bosonnlp ï¼ˆç»æ£®æ•°æ®ä¸­æ–‡åˆ†æå™¨ï¼‰ä¸‹è½½åœ°å€ï¼šhttps://github.com/bosondata/elasticsearch-analysis-bosonnlp å¦‚ä½•ä½¿ç”¨ï¼š è¿è¡Œ ElasticSearch ä¹‹å‰éœ€è¦åœ¨ config æ–‡ä»¶å¤¹ä¸­ä¿®æ”¹ elasticsearch.yml æ¥å®šä¹‰ä½¿ç”¨ç»æ£®ä¸­æ–‡åˆ†æå™¨ï¼Œå¹¶å¡«å†™ç»æ£® API_TOKEN ä»¥åŠç»æ£®åˆ†è¯ API çš„åœ°å€ï¼Œå³åœ¨è¯¥æ–‡ä»¶ç»“å°¾å¤„æ·»åŠ ï¼š 12345678910111213141516171819202122index: analysis: analyzer: bosonnlp: type: bosonnlp API_URL: http://api.bosonnlp.com/tag/analysis # You MUST give the API_TOKEN value, otherwise it doesn&apos;t work API_TOKEN: *PUT YOUR API TOKEN HERE* # Please uncomment if you want to specify ANY ONE of the following # areguments, otherwise the DEFAULT value will be used, i.e., # space_mode is 0, # oov_level is 3, # t2s is 0, # special_char_conv is 0. # More detials can be found in bosonnlp docs: # http://docs.bosonnlp.com/tag.html # # # space_mode: put your value here(range from 0-3) # oov_level: put your value here(range from 0-4) # t2s: put your value here(range from 0-1) # special_char_conv: put your value here(range from 0-1) éœ€è¦æ³¨æ„çš„æ˜¯ å¿…é¡»åœ¨ API_URL å¡«å†™ç»™å®šçš„åˆ†è¯åœ°å€ä»¥åŠåœ¨API_TOKENï¼šPUT YOUR API TOKEN HERE ä¸­å¡«å†™ç»™å®šçš„ç»æ£®æ•°æ®API_TOKENï¼Œå¦åˆ™æ— æ³•ä½¿ç”¨ç»æ£®ä¸­æ–‡åˆ†æå™¨ã€‚è¯¥ API_TOKEN æ˜¯æ³¨å†Œç»æ£®æ•°æ®è´¦å·æ‰€è·å¾—ã€‚ å¦‚æœé…ç½®æ–‡ä»¶ä¸­å·²ç»æœ‰é…ç½®è¿‡å…¶ä»–çš„ analyzerï¼Œè¯·ç›´æ¥åœ¨ analyzer ä¸‹å¦‚ä¸Šæ·»åŠ  bosonnlp analyzerã€‚ å¦‚æœæœ‰å¤šä¸ª node å¹¶ä¸”éƒ½éœ€è¦ BosonNLP çš„åˆ†è¯æ’ä»¶ï¼Œåˆ™æ¯ä¸ª node ä¸‹çš„ yaml æ–‡ä»¶éƒ½éœ€è¦å¦‚ä¸Šå®‰è£…å’Œè®¾ç½®ã€‚ å¦å¤–ï¼Œç»æ£®ä¸­æ–‡åˆ†è¯è¿˜æä¾›äº†4ä¸ªå‚æ•°ï¼ˆspace_modeï¼Œoov_levelï¼Œt2sï¼Œspecial_char_convï¼‰å¯æ»¡è¶³ä¸åŒçš„åˆ†è¯éœ€æ±‚ã€‚å¦‚æœå–é»˜è®¤å€¼ï¼Œåˆ™æ— éœ€ä»»ä½•ä¿®æ”¹ï¼›å¦åˆ™ï¼Œå¯å–æ¶ˆå¯¹åº”å‚æ•°çš„æ³¨é‡Šå¹¶èµ‹å€¼ã€‚ æµ‹è¯•ï¼š å»ºç«‹ index 1curl -XPUT &apos;localhost:9200/test&apos; æµ‹è¯•åˆ†æå™¨æ˜¯å¦é…ç½®æˆåŠŸ 1curl -XGET &apos;localhost:9200/test/_analyze?analyzer=bosonnlp&amp;pretty&apos; -d &apos;è¿™æ˜¯ç»æ£®æ•°æ®åˆ†è¯çš„æµ‹è¯•&apos; ç»“æœ 123456789101112131415161718192021222324252627282930313233343536373839404142434445&#123; &quot;tokens&quot; : [ &#123; &quot;token&quot; : &quot;è¿™&quot;, &quot;start_offset&quot; : 0, &quot;end_offset&quot; : 1, &quot;type&quot; : &quot;word&quot;, &quot;position&quot; : 0 &#125;, &#123; &quot;token&quot; : &quot;æ˜¯&quot;, &quot;start_offset&quot; : 1, &quot;end_offset&quot; : 2, &quot;type&quot; : &quot;word&quot;, &quot;position&quot; : 1 &#125;, &#123; &quot;token&quot; : &quot;ç»æ£®&quot;, &quot;start_offset&quot; : 2, &quot;end_offset&quot; : 4, &quot;type&quot; : &quot;word&quot;, &quot;position&quot; : 2 &#125;, &#123; &quot;token&quot; : &quot;æ•°æ®&quot;, &quot;start_offset&quot; : 4, &quot;end_offset&quot; : 6, &quot;type&quot; : &quot;word&quot;, &quot;position&quot; : 3 &#125;, &#123; &quot;token&quot; : &quot;åˆ†è¯&quot;, &quot;start_offset&quot; : 6, &quot;end_offset&quot; : 8, &quot;type&quot; : &quot;word&quot;, &quot;position&quot; : 4 &#125;, &#123; &quot;token&quot; : &quot;çš„&quot;, &quot;start_offset&quot; : 8, &quot;end_offset&quot; : 9, &quot;type&quot; : &quot;word&quot;, &quot;position&quot; : 5 &#125;, &#123; &quot;token&quot; : &quot;æµ‹è¯•&quot;, &quot;start_offset&quot; : 9, &quot;end_offset&quot; : 11, &quot;type&quot; : &quot;word&quot;, &quot;position&quot; : 6 &#125; ]&#125; é…ç½® Token Filter ç°æœ‰çš„ BosonNLP åˆ†æå™¨æ²¡æœ‰å†…ç½® token filterï¼Œå¦‚æœæœ‰è¿‡æ»¤ Token çš„éœ€æ±‚ï¼Œå¯ä»¥åˆ©ç”¨ BosonNLP Tokenizer å’Œ ES æä¾›çš„ token filter æ­å»ºå®šåˆ¶åˆ†æå™¨ã€‚ æ­¥éª¤ é…ç½®å®šåˆ¶çš„ analyzer æœ‰ä»¥ä¸‹ä¸‰ä¸ªæ­¥éª¤ï¼š æ·»åŠ  BosonNLP tokenizeråœ¨ elasticsearch.yml æ–‡ä»¶ä¸­ analysis ä¸‹æ·»åŠ  tokenizerï¼Œ å¹¶åœ¨ tokenizer ä¸­æ·»åŠ  BosonNLP tokenizer çš„é…ç½®ï¼š 123456789101112131415161718192021222324index: analysis: analyzer: ... tokenizer: bosonnlp: type: bosonnlp API_URL: http://api.bosonnlp.com/tag/analysis # You MUST give the API_TOKEN value, otherwise it doesn&apos;t work API_TOKEN: *PUT YOUR API TOKEN HERE* # Please uncomment if you want to specify ANY ONE of the following # areguments, otherwise the DEFAULT value will be used, i.e., # space_mode is 0, # oov_level is 3, # t2s is 0, # special_char_conv is 0. # More detials can be found in bosonnlp docs: # http://docs.bosonnlp.com/tag.html # # # space_mode: put your value here(range from 0-3) # oov_level: put your value here(range from 0-4) # t2s: put your value here(range from 0-1) # special_char_conv: put your value here(range from 0-1) æ·»åŠ  token filter åœ¨ elasticsearch.yml æ–‡ä»¶ä¸­ analysis ä¸‹æ·»åŠ  filterï¼Œ å¹¶åœ¨ filter ä¸­æ·»åŠ æ‰€éœ€ filter çš„é…ç½®ï¼ˆä¸‹é¢ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä»¥ lowercase filter ä¸ºä¾‹ï¼‰ï¼š 123456789index: analysis: analyzer: ... tokenizer: ... filter: lowercase: type: lowercase æ·»åŠ å®šåˆ¶çš„ analyzer åœ¨ elasticsearch.yml æ–‡ä»¶ä¸­ analysis ä¸‹æ·»åŠ  analyzerï¼Œ å¹¶åœ¨ analyzer ä¸­æ·»åŠ å®šåˆ¶çš„ analyzer çš„é…ç½®ï¼ˆä¸‹é¢ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æŠŠå®šåˆ¶çš„ analyzer å‘½åä¸º filter_bosonnlpï¼‰ï¼š 12345678index: analysis: analyzer: ... filter_bosonnlp: type: custom tokenizer: bosonnlp filter: [lowercase] è‡ªå®šä¹‰åˆ†è¯å™¨è™½ç„¶Elasticsearchå¸¦æœ‰ä¸€äº›ç°æˆçš„åˆ†æå™¨ï¼Œç„¶è€Œåœ¨åˆ†æå™¨ä¸ŠElasticsearchçœŸæ­£çš„å¼ºå¤§ä¹‹å¤„åœ¨äºï¼Œä½ å¯ä»¥é€šè¿‡åœ¨ä¸€ä¸ªé€‚åˆä½ çš„ç‰¹å®šæ•°æ®çš„è®¾ç½®ä¹‹ä¸­ç»„åˆå­—ç¬¦è¿‡æ»¤å™¨ã€åˆ†è¯å™¨ã€è¯æ±‡å•å…ƒè¿‡æ»¤å™¨æ¥åˆ›å»ºè‡ªå®šä¹‰çš„åˆ†æå™¨ã€‚ å­—ç¬¦è¿‡æ»¤å™¨ï¼š å­—ç¬¦è¿‡æ»¤å™¨ ç”¨æ¥ æ•´ç† ä¸€ä¸ªå°šæœªè¢«åˆ†è¯çš„å­—ç¬¦ä¸²ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬çš„æ–‡æœ¬æ˜¯HTMLæ ¼å¼çš„ï¼Œå®ƒä¼šåŒ…å«åƒ &lt;p&gt; æˆ–è€… &lt;div&gt; è¿™æ ·çš„HTMLæ ‡ç­¾ï¼Œè¿™äº›æ ‡ç­¾æ˜¯æˆ‘ä»¬ä¸æƒ³ç´¢å¼•çš„ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ htmlæ¸…é™¤ å­—ç¬¦è¿‡æ»¤å™¨ æ¥ç§»é™¤æ‰æ‰€æœ‰çš„HTMLæ ‡ç­¾ï¼Œå¹¶ä¸”åƒæŠŠ &amp;Aacute; è½¬æ¢ä¸ºç›¸å¯¹åº”çš„Unicodeå­—ç¬¦ Ã è¿™æ ·ï¼Œè½¬æ¢HTMLå®ä½“ã€‚ ä¸€ä¸ªåˆ†æå™¨å¯èƒ½æœ‰0ä¸ªæˆ–è€…å¤šä¸ªå­—ç¬¦è¿‡æ»¤å™¨ã€‚ åˆ†è¯å™¨: ä¸€ä¸ªåˆ†æå™¨ å¿…é¡» æœ‰ä¸€ä¸ªå”¯ä¸€çš„åˆ†è¯å™¨ã€‚ åˆ†è¯å™¨æŠŠå­—ç¬¦ä¸²åˆ†è§£æˆå•ä¸ªè¯æ¡æˆ–è€…è¯æ±‡å•å…ƒã€‚ æ ‡å‡† åˆ†æå™¨é‡Œä½¿ç”¨çš„ æ ‡å‡† åˆ†è¯å™¨ æŠŠä¸€ä¸ªå­—ç¬¦ä¸²æ ¹æ®å•è¯è¾¹ç•Œåˆ†è§£æˆå•ä¸ªè¯æ¡ï¼Œå¹¶ä¸”ç§»é™¤æ‰å¤§éƒ¨åˆ†çš„æ ‡ç‚¹ç¬¦å·ï¼Œç„¶è€Œè¿˜æœ‰å…¶ä»–ä¸åŒè¡Œä¸ºçš„åˆ†è¯å™¨å­˜åœ¨ã€‚ è¯å•å…ƒè¿‡æ»¤å™¨: ç»è¿‡åˆ†è¯ï¼Œä½œä¸ºç»“æœçš„ è¯å•å…ƒæµ ä¼šæŒ‰ç…§æŒ‡å®šçš„é¡ºåºé€šè¿‡æŒ‡å®šçš„è¯å•å…ƒè¿‡æ»¤å™¨ ã€‚ è¯å•å…ƒè¿‡æ»¤å™¨å¯ä»¥ä¿®æ”¹ã€æ·»åŠ æˆ–è€…ç§»é™¤è¯å•å…ƒã€‚æˆ‘ä»¬å·²ç»æåˆ°è¿‡ lowercase å’Œ stop è¯è¿‡æ»¤å™¨ ï¼Œä½†æ˜¯åœ¨ Elasticsearch é‡Œé¢è¿˜æœ‰å¾ˆå¤šå¯ä¾›é€‰æ‹©çš„è¯å•å…ƒè¿‡æ»¤å™¨ã€‚ è¯å¹²è¿‡æ»¤å™¨ æŠŠå•è¯ éåˆ¶ ä¸º è¯å¹²ã€‚ ascii_folding è¿‡æ»¤å™¨ç§»é™¤å˜éŸ³ç¬¦ï¼ŒæŠŠä¸€ä¸ªåƒ â€œtrÃ¨sâ€ è¿™æ ·çš„è¯è½¬æ¢ä¸º â€œtresâ€ ã€‚ ngram å’Œ edge_ngram è¯å•å…ƒè¿‡æ»¤å™¨ å¯ä»¥äº§ç”Ÿ é€‚åˆç”¨äºéƒ¨åˆ†åŒ¹é…æˆ–è€…è‡ªåŠ¨è¡¥å…¨çš„è¯å•å…ƒã€‚ åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰åˆ†æå™¨æˆ‘ä»¬å¯ä»¥åœ¨ analysis ä¸‹çš„ç›¸åº”ä½ç½®è®¾ç½®å­—ç¬¦è¿‡æ»¤å™¨ã€åˆ†è¯å™¨å’Œè¯å•å…ƒè¿‡æ»¤å™¨: 1234567891011PUT /my_index&#123; &quot;settings&quot;: &#123; &quot;analysis&quot;: &#123; &quot;char_filter&quot;: &#123; ... custom character filters ... &#125;, &quot;tokenizer&quot;: &#123; ... custom tokenizers ... &#125;, &quot;filter&quot;: &#123; ... custom token filters ... &#125;, &quot;analyzer&quot;: &#123; ... custom analyzers ... &#125; &#125; &#125;&#125; è¿™ä¸ªåˆ†æå™¨å¯ä»¥åšåˆ°ä¸‹é¢çš„è¿™äº›äº‹: 1ã€ä½¿ç”¨ htmlæ¸…é™¤ å­—ç¬¦è¿‡æ»¤å™¨ç§»é™¤HTMLéƒ¨åˆ†ã€‚ 2ã€ä½¿ç”¨ä¸€ä¸ªè‡ªå®šä¹‰çš„ æ˜ å°„ å­—ç¬¦è¿‡æ»¤å™¨æŠŠ &amp; æ›¿æ¢ä¸º â€œå’Œâ€ ï¼š 123456&quot;char_filter&quot;: &#123; &quot;&amp;_to_and&quot;: &#123; &quot;type&quot;: &quot;mapping&quot;, &quot;mappings&quot;: [ &quot;&amp;=&gt; and &quot;] &#125;&#125; 3ã€ä½¿ç”¨ æ ‡å‡† åˆ†è¯å™¨åˆ†è¯ã€‚ 4ã€å°å†™è¯æ¡ï¼Œä½¿ç”¨ å°å†™ è¯è¿‡æ»¤å™¨å¤„ç†ã€‚ 5ã€ä½¿ç”¨è‡ªå®šä¹‰ åœæ­¢ è¯è¿‡æ»¤å™¨ç§»é™¤è‡ªå®šä¹‰çš„åœæ­¢è¯åˆ—è¡¨ä¸­åŒ…å«çš„è¯ï¼š 123456&quot;filter&quot;: &#123; &quot;my_stopwords&quot;: &#123; &quot;type&quot;: &quot;stop&quot;, &quot;stopwords&quot;: [ &quot;the&quot;, &quot;a&quot; ] &#125;&#125; æˆ‘ä»¬çš„åˆ†æå™¨å®šä¹‰ç”¨æˆ‘ä»¬ä¹‹å‰å·²ç»è®¾ç½®å¥½çš„è‡ªå®šä¹‰è¿‡æ»¤å™¨ç»„åˆäº†å·²ç»å®šä¹‰å¥½çš„åˆ†è¯å™¨å’Œè¿‡æ»¤å™¨ï¼š 12345678&quot;analyzer&quot;: &#123; &quot;my_analyzer&quot;: &#123; &quot;type&quot;: &quot;custom&quot;, &quot;char_filter&quot;: [ &quot;html_strip&quot;, &quot;&amp;_to_and&quot; ], &quot;tokenizer&quot;: &quot;standard&quot;, &quot;filter&quot;: [ &quot;lowercase&quot;, &quot;my_stopwords&quot; ] &#125;&#125; æ±‡æ€»èµ·æ¥ï¼Œå®Œæ•´çš„ åˆ›å»ºç´¢å¼• è¯·æ±‚ çœ‹èµ·æ¥åº”è¯¥åƒè¿™æ ·ï¼š 1234567891011121314151617181920212223PUT /my_index&#123; &quot;settings&quot;: &#123; &quot;analysis&quot;: &#123; &quot;char_filter&quot;: &#123; &quot;&amp;_to_and&quot;: &#123; &quot;type&quot;: &quot;mapping&quot;, &quot;mappings&quot;: [ &quot;&amp;=&gt; and &quot;] &#125;&#125;, &quot;filter&quot;: &#123; &quot;my_stopwords&quot;: &#123; &quot;type&quot;: &quot;stop&quot;, &quot;stopwords&quot;: [ &quot;the&quot;, &quot;a&quot; ] &#125;&#125;, &quot;analyzer&quot;: &#123; &quot;my_analyzer&quot;: &#123; &quot;type&quot;: &quot;custom&quot;, &quot;char_filter&quot;: [ &quot;html_strip&quot;, &quot;&amp;_to_and&quot; ], &quot;tokenizer&quot;: &quot;standard&quot;, &quot;filter&quot;: [ &quot;lowercase&quot;, &quot;my_stopwords&quot; ] &#125;&#125;&#125;&#125;&#125; ç´¢å¼•è¢«åˆ›å»ºä»¥åï¼Œä½¿ç”¨ analyze API æ¥ æµ‹è¯•è¿™ä¸ªæ–°çš„åˆ†æå™¨ï¼š 12GET /my_index/_analyze?analyzer=my_analyzerThe quick &amp; brown fox ä¸‹é¢çš„ç¼©ç•¥ç»“æœå±•ç¤ºå‡ºæˆ‘ä»¬çš„åˆ†æå™¨æ­£åœ¨æ­£ç¡®åœ°è¿è¡Œï¼š 12345678&#123; &quot;tokens&quot; : [ &#123; &quot;token&quot; : &quot;quick&quot;, &quot;position&quot; : 2 &#125;, &#123; &quot;token&quot; : &quot;and&quot;, &quot;position&quot; : 3 &#125;, &#123; &quot;token&quot; : &quot;brown&quot;, &quot;position&quot; : 4 &#125;, &#123; &quot;token&quot; : &quot;fox&quot;, &quot;position&quot; : 5 &#125; ]&#125; è¿™ä¸ªåˆ†æå™¨ç°åœ¨æ˜¯æ²¡æœ‰å¤šå¤§ç”¨å¤„çš„ï¼Œé™¤éæˆ‘ä»¬å‘Šè¯‰ Elasticsearchåœ¨å“ªé‡Œç”¨ä¸Šå®ƒã€‚æˆ‘ä»¬å¯ä»¥åƒä¸‹é¢è¿™æ ·æŠŠè¿™ä¸ªåˆ†æå™¨åº”ç”¨åœ¨ä¸€ä¸ª string å­—æ®µä¸Šï¼š 123456789PUT /my_index/_mapping/my_type&#123; &quot;properties&quot;: &#123; &quot;title&quot;: &#123; &quot;type&quot;: &quot;string&quot;, &quot;analyzer&quot;: &quot;my_analyzer&quot; &#125; &#125;&#125; æœ€åæ•´ç†å‚è€ƒç½‘ä¸Šèµ„æ–™ï¼Œå¦‚æœ‰ä¸æ­£ç¡®çš„åœ°æ–¹è¿˜è¯·å¤šå¤šæŒ‡æ•™ï¼","tags":[{"name":"ElasticSearch","slug":"ElasticSearch","permalink":"http://yoursite.com/tags/ElasticSearch/"}]},{"title":"é‚£äº›å¹´æˆ‘çœ‹è¿‡çš„ä¹¦ â€”â€” è‡´æ•¬æˆ‘çš„å¤§å­¦ç”Ÿæ´» â€”â€” Say Good Bye ï¼","date":"2017-08-27T16:00:00.000Z","path":"2017/08/28/recommend-books/","text":"å¼€å¤´2017.08.21 æ­£å¼å¼€å¯æˆ‘å…¥èŒçš„é‡Œç¨‹ï¼Œç°åœ¨å·²æ˜¯å·¥ä½œäº†ä¸€ä¸ªæ˜ŸæœŸäº†ï¼Œè¿™ä¸ªæ˜ŸæœŸç®—æ˜¯æˆ‘å…¥èŒçš„è¿‡æ¸¡æœŸï¼Œç®—æ˜¯çŸ¥é“äº†å­¦æ ¡ç”Ÿæ´»å’Œå·¥ä½œçš„å·®è·äº†ï¼Œæ€»ä¹‹ï¼Œå°½å¿«ä¹ æƒ¯è¿™ç§ç”Ÿæ´»å§ã€‚ä¸‹é¢è®²ä¸‹è‡ªå·±çš„æ‰¾å·¥ä½œç»å†å’Œå¤§å­¦é˜…è¯»çš„ä¹¦ç±ï¼Œç®—æ˜¯ä¸€ç§ä¹¦ç±æ¨èï¼Œä¸ºè¿˜åœ¨è¿·èŒ«çš„ä½ æŒ‡å¼•æ–¹å‘ï¼ŒåŒæ—¶ä¸ºæˆ‘ä¸‰å¹´çš„å¤§å­¦ç”Ÿæ´»è‡´æ•¬ï¼ä¹Ÿæ¿€åŠ±æˆ‘å¤§å››åœ¨å…¬å¸å®ä¹ èƒ½æ›´ä¸Šä¸€å±‚æ¥¼ï¼ æ‰¾å·¥ä½œç»å†è¿™æ®µç»å†ï¼Œç®—æ˜¯è‡ªå·±å¾ˆéš¾å¿˜è®°çš„ç»å†å§ã€‚æ—¢è¾›é…¸æ—¢å……å®çš„æ—¥å­ï¼ä¹Ÿå¾ˆæ„Ÿè°¢è‡ªå·±åœ¨è¿™æ®µæ—¶é—´çš„ç³»ç»Ÿå¤ä¹ ï¼Œæ„Ÿè§‰æŠŠè‡ªå·±çš„åŸºç¡€çŸ¥è¯†å†æ¬¡èšé›†åœ¨ä¸€èµ·äº†ï¼Œè‡ªå·±çš„èƒ½åŠ›åœ¨è¿™ä¸€æ®µæ—¶é—´æå‡çš„ä¹Ÿå¾ˆå¿«ã€‚åé¢æœ‰æœºä¼šçš„è¯æˆ‘ä¹Ÿæƒ³å†™ä¸€ç³»åˆ—çš„ç›¸å…³æ–‡ç« ï¼Œä¸ºåæ¥å‡†å¤‡å·¥ä½œï¼ˆé¢è¯•ï¼‰çš„åŒå­¦æä¾›ä¸€äº›è‡ªå·±çš„å¸®åŠ©ã€‚è‡ªå·±åœ¨æ‰¾å·¥ä½œçš„è¿™æ®µæ—¶é—´é¢è¿‡çš„å…¬å¸ä¹Ÿæœ‰å‡ å®¶å¤§å‚ï¼Œä½†æ˜¯ç»“æœéƒ½ä¸æ˜¯å¾ˆå¥½ï¼Œå¯¹æˆ‘è‡ªå·±æœ‰å¾ˆå¤§çš„å‹åŠ›ï¼Œå½“æ—¶å¿ƒé‡ŒçœŸçš„æ„Ÿè§‰ ï¼šâ€œè‡ªå·±çœŸçš„æœ‰è¿™ä¹ˆå·®â€ï¼Œä¸ºä»€ä¹ˆä¸€ç›´è¢«æ‹’ï¼Œå½“æ—¶å¾ˆæ€€ç–‘è‡ªå·±çš„èƒ½åŠ›ï¼Œè‡ªå·±ä¹Ÿæœ‰æ€»ç»“åŸå› ã€‚ä¸€æ˜¯é¢è¯•çš„æ—¶å€™è‡ªå·±å‡†å¤‡çš„è¿˜ä¸å¤Ÿå……åˆ†ï¼Œè™½è¯´è‡ªå·±è„‘å­é‡Œå¯¹è¿™äº›åŸºç¡€æœ‰ç‚¹å°è±¡ï¼Œä½†æ˜¯é¢è¯•çš„æ—¶å€™è‡ªå·±ç¨ç´§å¼ ä¸‹å°±æè¿°ä¸æ€ä¹ˆæ¸…æ¥šäº†ï¼Œå¯¼è‡´é¢è¯•å®˜è§‰å¾—ä½ å¯èƒ½å¹¿åº¦å¤Ÿäº†ï¼Œæ·±åº¦è¿˜ä¸å¤Ÿï¼ˆè¿™æ˜¯é˜¿é‡Œé¢è¯•å®˜ç”µè¯é¢è¯•è¯´çš„ï¼‰ï¼›äºŒæ˜¯è‡ªå·±çš„è¡¨è¾¾èƒ½åŠ›è¿˜æ˜¯æœ‰æ‰€æ¬ ç¼ºï¼Œä¸èƒ½å¤Ÿå°†è‡ªå·±æ‰€è¦è¡¨è¾¾çš„ä¸œè¥¿è¯´å‡ºæ¥ï¼Œè¿™å¯èƒ½æˆ‘è¦åœ¨åé¢åŠ å¼ºçš„åœ°æ–¹ï¼›ä¸‰æ˜¯æˆ‘çš„å­¦æ ¡é—®é¢˜ã€‚åœ¨é¢äº†å‡ å®¶å…¬å¸å¤±è´¥åï¼Œç»ˆäºé¢äº†å®¶å…¬å¸è¦æˆ‘äº†ï¼Œæˆ‘ä¹Ÿç¡®å®šåœ¨è¿™å®¶å…¬å¸äº†ã€‚å¾ˆå¹¸è¿ï¼Œåˆšå‡ºæ¥ï¼Œå°±æœ‰ä¸€ä¸ªå¾ˆå¥½ï¼ˆå¾ˆè´Ÿè´£ï¼‰çš„æ¶æ„å¸ˆå¸¦æˆ‘ï¼Œè¿™å‘¨å°±ç»™äº†æˆ‘ä¸€ä¸ªå¾ˆç‰›é€¼çš„é¡¹ç›®ç»™æˆ‘çœ‹ï¼ˆè™½ç„¶è‡ªå·±ç›®å‰è¿˜æ²¡æœ‰æ€è·¯æ”¹é‡Œé¢çš„ä»£ç ï¼‰ï¼Œé‡Œé¢æ–°ä¸œè¥¿å¾ˆå¤šï¼Œè¯´åƒé€äº†è¿™ä¸ªé¡¹ç›®ï¼Œä»¥åç»å¯¹å¯ä»¥æ‹¿å‡ºå»å¹é€¼ï¼ˆä¸€è„¸æ­£ç».jpgï¼‰ã€‚ç›®å‰æˆ‘çš„æ‰¾å·¥ä½œç»å†å°±ç®€çŸ­çš„ä»‹ç»åˆ°è¿™é‡Œäº†ï¼Œå¦‚æœæ„Ÿå…´è¶£çš„è¯ï¼Œå¯ä»¥åŠ ç¾¤ï¼š528776268 è¿›æ¥å’Œæˆ‘è®¨è®ºäº¤æµã€‚ ä¹¦ç±æ¨èå¤§å­¦ï¼Œæˆ‘ä¸æ€ä¹ˆå–œæ¬¢ç©æ¸¸æˆï¼Œè‡ªå·±ä¹Ÿè¿˜ç®—ä¸æ€ä¹ˆå •è½å§ï¼Œçœ‹äº†ä»¥ä¸‹çš„ä¸€äº›ä¹¦ç±ï¼Œç®—æ˜¯å¯¹æˆ‘åé¢å†™åšå®¢ã€æ‰¾å·¥ä½œä¹Ÿæœ‰å¾ˆå¤§çš„å¸®åŠ©ã€‚å¦‚æœä½ æ˜¯å¤§ç¥ï¼Œè¯·å¿½ç•¥ï¼Œå¦‚æœä½ è¿˜æ˜¯è¿˜åœ¨å¤§å­¦ï¼Œå’Œæˆ‘ä¸€æ ·ä¸æƒ³æŠŠæ—¶é—´æµªè´¹åœ¨æ¸¸æˆä¸Šï¼Œå¯ä»¥çœ‹çœ‹æˆ‘æ¨èçš„ä¸€äº›ä¹¦ç±ï¼Œæœ‰æƒ³è®¨è®ºçš„è¯·åœ¨è¯„è®ºä¸‹ç•™ä¸‹ä½ çš„è¯„è®ºæˆ–è€…åŠ ä¸Šé¢ç»™çš„ç¾¤å·ã€‚ Java1ã€ã€ŠJava æ ¸å¿ƒæŠ€æœ¯ã€‹å·ä¸€ ã€å·äºŒ ä¸¤æœ¬ä¹¦ï¼Œç®—æ˜¯å…¥é—¨æ¯”è¾ƒå¥½çš„ä¹¦ç±äº† 2ã€ã€Šç–¯ç‹‚ Java è®²ä¹‰ã€‹ å¾ˆåšçš„ä¸€æœ¬ä¹¦ï¼Œé‡Œé¢çš„å†…å®¹ä¹Ÿæ˜¯å¾ˆæ³¨é‡åŸºç¡€äº† 3ã€ã€ŠJava å¹¶å‘ç¼–ç¨‹çš„è‰ºæœ¯ã€‹â€”â€” æ–¹è…¾é£ ã€é­é¹ã€ç¨‹æ™“æ˜è‘— æ–¹è…¾é£ æ˜¯å¹¶å‘ç¼–ç¨‹ç½‘çš„åˆ›å§‹äººï¼Œé‡Œé¢çš„æ–‡ç« ç¡®å®è¿˜ä¸é”™ï¼Œå¯ä»¥å¤šçœ‹çœ‹é‡Œé¢çš„æ–‡ç« ï¼Œæ”¶è·ç»å¯¹å¾ˆå¤§ã€‚ 4ã€ã€Š Javaå¤šçº¿ç¨‹ç¼–ç¨‹æ ¸å¿ƒæŠ€æœ¯ã€‹â€”â€” é«˜æ´ªå²©è‘— è¿™æœ¬ä¹¦ä¹Ÿç®—æ˜¯å…¥é—¨å¤šçº¿ç¨‹ç¼–ç¨‹çš„ä¸é”™ä¹¦ç±ï¼Œæˆ‘ä¹‹å‰è¿˜å†™äº†ä¸€ç¯‡è¯»ä¹¦ç¬”è®°å‘¢ï¼Œã€ŠJava å¤šçº¿ç¨‹ç¼–ç¨‹æ ¸å¿ƒæŠ€æœ¯ã€‹å­¦ä¹ ç¬”è®°åŠæ€»ç»“ , å¤§å®¶å¦‚æœä¸æƒ³çœ‹ä¹¦çš„å¯ä»¥å»çœ‹æˆ‘çš„ç¬”è®°ã€‚ 5ã€ã€ŠJava å¹¶å‘ç¼–ç¨‹å®æˆ˜ã€‹ è¿™æœ¬ä¹¦è®²çš„æœ‰ç‚¹éš¾æ‡‚å•Šï¼Œä¸è¿‡ç¡®å®ä¹Ÿæ˜¯ä¸€æœ¬å¾ˆå¥½çš„ä¹¦ï¼Œä»¥ä¸Šä¸‰æœ¬ä¹¦ç±å¦‚æœéƒ½å¼„æ‡‚äº†ï¼Œæˆ‘è§‰å¾—ä½ å¹¶å‘ç¼–ç¨‹è¿™å—å¯èƒ½å¤§æ¦‚å°± OK äº†ï¼Œç„¶åå†å»çœ‹çœ‹çº¿ç¨‹æ± çš„æºç ï¼Œäº†è§£ä¸‹çº¿ç¨‹æ± ï¼Œæˆ‘è§‰å¾—é‚£å°±æ›´æ£’äº†ã€‚ä¸æƒ³çœ‹çš„è¯ï¼Œè¯·çœ‹æˆ‘çš„åšå®¢ï¼šJava çº¿ç¨‹æ± è‰ºæœ¯æ¢ç´¢ æˆ‘ä¸ªäººè§‰å¾—è¿˜æ˜¯å†™çš„å¾ˆä¸é”™ï¼Œé‚£äº›å¤§å‚é¢è¯•ä¹Ÿå‡ ä¹éƒ½ä¼šé—®çº¿ç¨‹æ± çš„ä¸œè¥¿ï¼Œç„¶åå¤§æ¦‚å†…å®¹ä¹Ÿå°±æ˜¯æˆ‘è¿™åšå®¢å†™çš„ 6ã€ã€ŠEffective Javaã€‹ä¸­æ–‡ç‰ˆ ç¬¬äºŒç‰ˆ ç®—æ˜¯ Java çš„è¿›é˜¶ä¹¦ç±äº†ï¼Œé¢è¯•å¥½å¤šé—®é¢˜ä¹Ÿæ˜¯ä»è¿™å‡ºæ¥çš„ 7ã€ã€Šæ·±å…¥ç†è§£ Java è™šæ‹Ÿæœºâ€”â€”JVMé«˜çº§ç‰¹æ€§ä¸æœ€ä½³å®è·µã€‹ç¬¬äºŒç‰ˆ è¿™ç®—æ˜¯å›½å†…è®² JVM æœ€æ¸…æ¥šçš„ä¹¦äº†å§ï¼Œç›®å‰è¿˜æ˜¯åªçœ‹äº†ä¸€éï¼Œåé¢ç»§ç»­å•ƒï¼Œå¤§å‚é¢è¯•å‡ ä¹ä¹Ÿæ˜¯éƒ½ä¼šè€ƒ JVM çš„ï¼Œé˜¿é‡Œé¢ JVM ç‰¹åˆ«å¤šï¼Œæƒ³è¿›é˜¿é‡Œçš„åŒå­¦è¯·ä¸€å®šè¦ä¹°è¿™æœ¬ä¹¦å»çœ‹ã€‚ 8ã€ã€Šæ·±å…¥åˆ†æJava WebæŠ€æœ¯å†…å¹• ä¿®è®¢ç‰ˆã€‹è®¸ä»¤æ³¢è‘— é‡Œé¢çŸ¥è¯†å¾ˆå¹¿ï¼Œæ¯ä¸€ç« éƒ½æ˜¯ä¸€ä¸ªä¸åŒçš„çŸ¥è¯†ï¼Œå¯è§ä½œè€…çš„ä¼˜ç§€ï¼Œä¸æ„§æ˜¯é˜¿é‡Œå¤§ç¥ã€‚ 9ã€ã€Šå¤§å‹ç½‘ç«™ç³»ç»Ÿä¸ Java ä¸­é—´ä»¶å®è·µã€‹â€”â€” æ›½å®ªæ° è‘— ä½œè€…æ˜¯å‰æ·˜å®æŠ€æœ¯æ€»ç›‘ï¼Œè§è¯äº†æ·˜å®ç½‘çš„å‘å±•ï¼Œé‡Œé¢çš„è®²çš„å†…å®¹ä¹Ÿæ˜¯å¾ˆå¥½ï¼Œçœ‹å®Œèƒ½è®©è‡ªå·±ä¹Ÿç«™åœ¨é«˜å¤„å»æ€è€ƒé—®é¢˜ã€‚ 10ã€ã€Šå¤§å‹ç½‘ç«™æŠ€æœ¯æ¶æ„ â€”â€” æ ¸å¿ƒåŸç†ä¸æ¡ˆä¾‹åˆ†æã€‹ â€”â€” ææ™ºæ…§ è‘— æœ€å¥½å’Œä¸Šé¢é‚£æœ¬ä¹¦ç±ä¸€èµ·çœ‹ï¼Œæ•ˆæœæ›´å¥½ï¼Œä¸¤æœ¬çœ‹å®Œäº†ï¼Œæå‡æ€æƒ³çš„é«˜åº¦ï¼ 11ã€ã€Šç–¯ç‹‚Java.çªç ´ç¨‹åºå‘˜åŸºæœ¬åŠŸçš„16è¯¾ã€‹ æåˆš è‘— ä¹¦ä¸­å¾ˆæ³¨é‡ Java çš„ä¸€äº›ç»†èŠ‚ï¼Œè®²çš„å¾ˆæ·±å…¥ï¼Œä½†æ˜¯ä¹¦ä¸­çš„é”™åˆ«å­—ç‰¹å¤šï¼Œå¯ä»¥çœ‹çœ‹æˆ‘çš„è¯»ä¹¦ç¬”è®°ï¼šã€Šç–¯ç‹‚ Java çªç ´ç¨‹åºå‘˜åŸºæœ¬åŠŸçš„ 16 è¯¾ã€‹è¯»ä¹¦ç¬”è®° 12ã€ã€ŠSpring å®æˆ˜ã€‹ Spring å…¥é—¨ä¹¦ç± 13ã€ã€ŠSpring æ­ç§˜ã€‹â€”â€” ç‹ç¦å¼º è‘— è¿™æœ¬ä¹¦åˆ«æå¤šç‰›äº†ï¼Œå‡ºç‰ˆæ—¶æœŸä¸º 2009 å¹´ï¼Œè±†ç“£è¯„åˆ†ä¸º 9.0 åˆ†ï¼Œå†™çš„æ˜¯çœŸæ£’ï¼æŠŠ Spring çš„ IOC å’Œ AOP ç‰¹æ€§å†™çš„å¾ˆæ¸…æ¥šï¼ŒæŠŠ Spring çš„æ¥é¾™å»è„‰è®²çš„å¾ˆå…¨ã€‚å¢™è£‚æ¨èè¿™æœ¬ä¹¦ç±ï¼Œå¦‚æœä½ æƒ³çœ‹ Springï¼Œä½œè€…å¾ˆç‰›ï¼Œèµ„æ·±æ¶æ„å¸ˆï¼Œå¾ˆæœ‰å¹¸å’Œä½œè€…æœ‰è¿‡ä¸€æ¬¡äº¤æµï¼Œå½“æ—¶å› ä¸ºè‡ªå·±çš„ä¸€ç¯‡åšå®¢ Pyspideræ¡†æ¶ â€”â€” Pythonçˆ¬è™«å®æˆ˜ä¹‹çˆ¬å– V2EX ç½‘ç«™å¸–å­ï¼Œç«Ÿç„¶æ‰¾åˆ°æˆ‘æƒ³å«æˆ‘å»å®ä¹ ï¼Œå¯æƒœäº†ï¼Œå½“æ—¶å·®ç‚¹å°±è·Ÿç€ä»–æ··äº†ã€‚ä½œè€…è¿˜æœ‰ä¸€æœ¬ä¹¦ ã€ŠSpring Boot æ­ç§˜ã€‹ã€‚ 14ã€ã€ŠSpring æŠ€æœ¯å†…å¹•ã€‹â€”â€” æ·±å…¥è§£æ Spring æ¶æ„ä¸è®¾è®¡åŸç† è®²è§£ Spring æºç ï¼Œæ·±å…¥äº†å†…éƒ¨æœºåˆ¶ï¼Œä¸ªäººè§‰å¾—è¿˜æ˜¯ä¸é”™çš„ã€‚ 15ã€Spring å®˜æ–¹çš„è‹±æ–‡æ–‡æ¡£ è¿™ä¸ªåˆ«æäº†ï¼Œå¾ˆå¥½ï¼Œèƒ½çœ‹è‹±æ–‡å°½é‡çœ‹è‹±æ–‡ 16ã€ã€Šè·Ÿå¼€æ¶›å­¦ Spring 3ã€‹ ã€Šè·Ÿå¼€æ¶›å­¦ Spring MVCã€‹ äº¬ä¸œå¤§ç¥ï¼Œè†œ 17ã€ã€Šçœ‹é€springMvcæºä»£ç åˆ†æä¸å®è·µã€‹ ç®—æ˜¯æŠŠ Spring MVC æºç è®²çš„å¾ˆå¥½çš„äº† è§æˆ‘çš„ç¬”è®°ï¼š 1ã€é€šè¿‡æºç è¯¦è§£ Servlet 2 ã€çœ‹é€ Spring MVC æºä»£ç åˆ†æä¸å®è·µ â€”â€” ç½‘ç«™åŸºç¡€çŸ¥è¯† 3 ã€çœ‹é€ Spring MVC æºä»£ç åˆ†æä¸å®è·µ â€”â€” ä¿¯è§† Spring MVC 4 ã€çœ‹é€ Spring MVC æºä»£ç åˆ†æä¸å®è·µ â€”â€” Spring MVC ç»„ä»¶åˆ†æ 18ã€ã€ŠSpring Boot å®æˆ˜ã€‹ 19ã€Spring Boot å®˜æ–¹ Reference Guide ç½‘ä¸Šå¥½å¤šå†™ SpringBoot çš„åšå®¢ï¼Œå‡ ä¹å’Œè¿™ä¸ªå·®ä¸å¤šã€‚ 20ã€ã€ŠJavaEEå¼€å‘çš„é¢ è¦†è€…: Spring Bootå®æˆ˜ã€‹ 21ã€MyBatis å½“ç„¶æ˜¯å®˜æ–¹çš„æ–‡æ¡£æœ€å¥½äº†ï¼Œè€Œä¸”è¿˜æ˜¯ä¸­æ–‡çš„ã€‚ è‡ªå·±ä¹Ÿå†™è¿‡å‡ ç¯‡æ–‡ç« ï¼Œå¸®åŠ©è¿‡å¾ˆå¤šäººå…¥é—¨ï¼Œä¼ é€é—¨ï¼š 1ã€é€šè¿‡é¡¹ç›®é€æ­¥æ·±å…¥äº†è§£Mybatisï¼ˆä¸€ï¼‰/) 2ã€é€šè¿‡é¡¹ç›®é€æ­¥æ·±å…¥äº†è§£Mybatisï¼ˆäºŒï¼‰/) 3ã€é€šè¿‡é¡¹ç›®é€æ­¥æ·±å…¥äº†è§£Mybatisï¼ˆä¸‰ï¼‰/) 4ã€é€šè¿‡é¡¹ç›®é€æ­¥æ·±å…¥äº†è§£Mybatisï¼ˆå››ï¼‰/) 22ã€ã€Šæ·±å…¥ç†è§£ Java å†…å­˜æ¨¡å‹ã€‹â€”â€” ç¨‹æ™“æ˜ è‘— æˆ‘è§‰å¾—æ¯ä¸ª Java ç¨‹åºå‘˜éƒ½åº”è¯¥äº†è§£ä¸‹ Java çš„å†…å­˜æ¨¡å‹ï¼Œè¯¥ä¹¦ç±æˆ‘çœ‹çš„æ˜¯ç”µå­ç‰ˆçš„ï¼Œä¸å¤šï¼Œä½†æ˜¯è®²çš„å´å¾ˆæ¸…æ¥šï¼ŒæŠŠé‡æ’åºã€é¡ºåºä¸€è‡´æ€§ã€Volatileã€é”ã€finalç­‰å†™çš„å¾ˆæ¸…æ¥šã€‚ Linuxã€Šé¸Ÿå“¥çš„Linuxç§æˆ¿èœ åŸºç¡€å­¦ä¹ ç¯‡(ç¬¬ä¸‰ç‰ˆ) ã€‹ é¸Ÿå“¥çš„Linuxç§æˆ¿èœï¼šæœåŠ¡å™¨æ¶è®¾ç¯‡(ç¬¬3ç‰ˆ) é¸Ÿå“¥çš„ä¹¦ è®¡ç®—æœºç½‘ç»œã€Šè®¡ç®—æœºç½‘ç»œç¬¬å…­ç‰ˆâ€”â€”è°¢å¸Œä» ç¼–ã€‹ ã€Šè®¡ç®—æœºç½‘ç»œè‡ªé¡¶å‘ä¸‹æ–¹æ³•ã€‹ è®¡ç®—æœºç³»ç»Ÿã€Šä»£ç æ­ç§˜ï¼šä»Cï¼C.çš„è§’åº¦æ¢ç§˜è®¡ç®—æœºç³»ç»Ÿ â€”â€” å·¦é£ã€‹ ã€Šæ·±å…¥ç†è§£è®¡ç®—æœºç³»ç»Ÿã€‹ ã€Šè®¡ç®—æœºç§‘å­¦å¯¼è®º_ä½›ç½—èµã€‹ æ•°æ®åº“ã€Šé«˜æ€§èƒ½MySQLã€‹ ã€ŠMysqlæŠ€æœ¯å†…å¹•InnoDBå­˜å‚¨å¼•æ“ã€‹ Pythonè¿™é—¨è¯­è¨€è¯­æ³•å¾ˆç®€å•ï¼Œä¸Šæ‰‹å¿«ï¼Œä¸è¿‡æˆ‘ç›®å‰å¥½ä¹…æ²¡ç”¨äº†ï¼Œéƒ½å¿˜å¾—å·®ä¸å¤šäº†ã€‚å½“æ—¶æ˜¯çœ‹çš„å»–é›ªå³°çš„ Python åšå®¢ è‡ªå·±ä¹Ÿç”¨ Python åšçˆ¬è™«å†™è¿‡å‡ ç¯‡åšå®¢ï¼Œä¸è¿‡æœ‰äº›æ˜¯åœ¨å‰äººçš„åŸºç¡€ä¸Šå†™çš„ã€‚æ„Ÿè°¢é‚£äº›æ ½æ ‘çš„äººï¼ å·¥å…·Git ï¼š å»–é›ªå³°çš„ Git æ•™ç¨‹ IDEAï¼šIntelliJ IDEA ç®€ä½“ä¸­æ–‡ä¸“é¢˜æ•™ç¨‹ Mavenï¼šã€ŠMavenå®æˆ˜ã€‹ å…¶ä»–ã€Šå¦‚ä½•é«˜æ•ˆå­¦ä¹ -æ–¯ç§‘ç‰¹æ¨ã€‹ æ•™ä½ æ€æ ·é«˜æ•ˆå­¦ä¹ çš„ ã€Šè½¯æŠ€èƒ½ï¼šä»£ç ä¹‹å¤–çš„ç”Ÿå­˜æŒ‡å—ã€‹ ç¨‹åºå‘˜é™¤äº†å†™ä»£ç ï¼Œè¿˜å¾—æ‡‚ç‚¹å…¶ä»–çš„è½¯æŠ€èƒ½ã€‚ ã€Šæé—®çš„æ™ºæ…§â€œä¸­æ–‡ç‰ˆâ€ã€‹ ã€ŠHow-To-Ask-Questions-The-Smart-Wayã€‹ ä½œä¸ºç¨‹åºå‘˜çš„ä½ ï¼Œä¸€å®šè¦å­¦ä¼šå’‹æé—®ï¼Œä¸ç„¶åˆ«äººéƒ½ä¸æƒ³é¸Ÿä½ ã€‚ ä¼˜ç§€ç½‘ç«™æ¨è1ã€GitHub åˆ«å’Œæˆ‘è¯´ä¸çŸ¥é“ 2ã€InfoQ æ–‡ç« å¾ˆä¸é”™ 3ã€CSDN ç»å¸¸çœ‹åšå®¢ä¸“å®¶çš„åšå®¢ï¼Œé‡Œé¢å¤§ç‰›å¾ˆå¤šï¼Œä¼ é€é—¨ï¼šzhisheng 4ã€çŸ¥ä¹ å¤šå…³æ³¨äº›å¤§ç‰›ï¼Œçœ‹ä»–ä»¬å¹é€¼ 5ã€æ˜é‡‘ è‡ªå·±ä¹Ÿåœ¨ä¸Šé¢å†™ä¸“æ ï¼Œç²‰ä¸å·²ç»è¶…è¿‡ä¸€ä¸‡äº†ï¼Œä¼ é€é—¨ ï¼šzhisheng 6ã€å¹¶å‘ç¼–ç¨‹ç½‘ å‰é¢å·²ç»ä»‹ç» 7ã€developerworks ä¸Šé¢çš„åšå®¢ä¹Ÿå¾ˆå¥½ 8ã€åšå®¢å›­ é‡Œé¢åº”è¯¥å¤§ç‰›ä¹Ÿå¾ˆå¤šï¼Œä¸è¿‡è‡ªå·±æ²¡åœ¨ä¸Šé¢å†™è¿‡åšå®¢ 9ã€å¾®ä¿¡å…¬ä¼—å· å…³æ³¨äº†å¾ˆå¤šäººï¼Œæœ‰äº›äººçš„æ–‡ç« ç¡®å®å¾ˆå¥½ã€‚ 10ã€ç‰›å®¢ç½‘ åˆ·ç¬”è¯•é¢˜ä¸é”™çš„åœ°æ–¹ï¼Œé‡Œé¢å¤§ç‰›è¶…å¤šï¼Œæ€€å¿µå¶ç¥å’Œå·¦ç¥è®²è¯¾çš„æ—¶å€™ï¼Œè¿˜æœ‰å¾ˆæœ‰çˆ±çš„ç‰›å¦¹ã€‚ 11ã€ä¼˜ç§€åšä¸»çš„åšå®¢åœ°å€äº† ä¼˜ç§€åšå®¢æ¨èå»–é›ªå³° Git å’Œ Python å…¥é—¨æ–‡ç« å°±æ˜¯ä»ä»–åšå®¢çœ‹çš„ é˜®ä¸€å³°çš„ç½‘ç»œæ—¥å¿— é…·å£³-é™ˆçš“ RednaxelaFX Rå¤§ï¼Œç‰›é€¼çš„ä¸å¾—äº† æ±Ÿå—ç™½è¡£ è€å¸æœº stormzhang äººç§°å¸…é€¼å¼ ï¼Œå¾®ä¿¡å…¬ä¼—å·å†™çš„ä¸é”™ ä½ å‡ç¬¨ é˜¿é‡Œæ JVM çš„ï¼Œå¾ˆå‰å®³ å å°ç‹¼ æ³¥ç“¦åŒ BYSocket å´”åº†æ‰ å†™äº†å¥½å¤š Python çˆ¬è™«ç›¸å…³çš„æ–‡ç«  çº¯æ´çš„å¾®ç¬‘ SpringBoot ç³»åˆ—ä¸é”™ï¼Œå…¶ä»–çš„æ–‡ç« è‡ªå·±çœ‹äº†æ„Ÿè§‰æ˜¯è‡ªå·±å–œæ¬¢çš„é‚£ç§æ–‡ç¬” ç¨‹åºçŒ¿DD å‘¨ç«‹ èŠ‹è‰¿Vçš„åšå®¢ å¥½å¤šç³»åˆ—çš„æºç åˆ†æ zhisheng è¿™ä¸ªæ˜¯æˆ‘ä¸è¦è„¸ï¼Œç«Ÿç„¶æŠŠè‡ªå·±åšå®¢åœ°å€çš„å†™ä¸Šå»äº† æœ€åé€ä¸€å¥è¯ï¼Œè¶ŠåŠªåŠ›ï¼Œè¶Šå¹¸è¿ï¼Œç¥æ—©æ—¥æˆä¸ºå¤§ç¥ï¼ è¿™äº›åœ°æ–¹å¯ä»¥æ‰¾åˆ°æˆ‘ï¼š blog: http://www.54tianzhisheng.cn/ GitHub: https://github.com/zhisheng17 QQ ç¾¤ï¼š528776268","tags":[{"name":"éšç¬”","slug":"éšç¬”","permalink":"http://yoursite.com/tags/éšç¬”/"}]},{"title":"Ubuntu16.10 å®‰è£… Nginx","date":"2017-08-17T16:00:00.000Z","path":"2017/08/18/Ubuntu-install-Nginx/","text":"å®‰è£… Nginx ä¾èµ–åº“å®‰è£… gcc g++ çš„ä¾èµ–åº“Ubuntu å¹³å°ä½¿ç”¨ï¼š 12apt-get install build-essentialapt-get install libtool CentOS å¹³å°ä½¿ç”¨ï¼š 12345centoså¹³å°ç¼–è¯‘ç¯å¢ƒä½¿ç”¨å¦‚ä¸‹æŒ‡ä»¤å®‰è£…makeï¼šyum -y install gcc automake autoconf libtool makeå®‰è£…g++:yum install gcc gcc-c++ å®‰è£… pcre ä¾èµ–åº“12sudo apt-get updatesudo apt-get install libpcre3 libpcre3-dev å®‰è£… zlib ä¾èµ–åº“1apt-get install zlib1g-dev å®‰è£… ssl ä¾èµ–åº“1apt-get install openssl å®‰è£… Nginxåœ¨ç½‘ä¸Šä¸‹è½½äº† nginx-1.8.1.tar.gz ç‰ˆæœ¬ã€‚ 1234567891011121314151617#è§£å‹ï¼štar -zxvf nginx-1.8.1.tar.gz#è¿›å…¥è§£å‹ç›®å½•ï¼šcd nginx-1.8.1#é…ç½®ï¼š./configure --prefix=/usr/local/nginx#ç¼–è¾‘nginxï¼šmakeæ³¨æ„ï¼šè¿™é‡Œå¯èƒ½ä¼šæŠ¥é”™ï¼Œæç¤ºâ€œpcre.h No such file or directoryâ€,å…·ä½“è¯¦è§ï¼šhttp://stackoverflow.com/questions/22555561/error-building-fatal-error-pcre-h-no-such-file-or-directoryéœ€è¦å®‰è£… libpcre3-dev,å‘½ä»¤ä¸ºï¼šsudo apt-get install libpcre3-dev#å®‰è£…nginxï¼šsudo make install#å¯åŠ¨nginxï¼šsudo /usr/local/nginx/sbin/nginx -c /usr/local/nginx/conf/nginx.confæ³¨æ„ï¼š-c æŒ‡å®šé…ç½®æ–‡ä»¶çš„è·¯å¾„ï¼Œä¸åŠ çš„è¯ï¼Œnginxä¼šè‡ªåŠ¨åŠ è½½é»˜è®¤è·¯å¾„çš„é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥é€šè¿‡ -hæŸ¥çœ‹å¸®åŠ©å‘½ä»¤ã€‚#æŸ¥çœ‹nginxè¿›ç¨‹ï¼šps -ef|grep nginx Nginx å¸¸ç”¨å‘½ä»¤å¯åŠ¨ Nginxåˆ‡æ¢åˆ° /usr/local/nginx/sbin/ ç›®å½•ä¸‹ï¼Œæ‰§è¡Œå‘½ä»¤ 1./nginx æŸ¥çœ‹æ•ˆæœï¼š åœæ­¢ Nginx12./nginx -s stop./nginx -s quit -s éƒ½æ˜¯é‡‡ç”¨å‘ Nginx å‘é€ä¿¡å·çš„æ–¹å¼ã€‚ Nginx é‡æ–°åŠ è½½é…ç½®æ–‡ä»¶1./nginx -s reload æŒ‡å®šé…ç½®æ–‡ä»¶1./nginx -c /usr/local/nginx/conf/nginx.conf -c è¡¨ç¤º configurationï¼ŒæŒ‡å®šé…ç½®æ–‡ä»¶ æŸ¥çœ‹ Nginx ç‰ˆæœ¬12./nginx -v //æŸ¥çœ‹ Nginx ç‰ˆæœ¬ä¿¡æ¯çš„å‚æ•°./nginx -V //æŸ¥çœ‹ Nginx è¯¦ç»†çš„ç‰ˆæœ¬ä¿¡æ¯ æ£€æŸ¥é…ç½®æ–‡ä»¶æ˜¯å¦æ­£ç¡®1./nginx -t å¦‚æœå‡ºç°æµ‹è¯•å¤±è´¥ï¼Œè¡¨ç¤ºæ²¡æœ‰è®¿é—®é”™è¯¯æ—¥å¿—æ–‡ä»¶å’Œè¿›ç¨‹ï¼Œå¯ä»¥ sudo ä¸€ä¸‹ã€‚é…ç½®æ­£ç¡®çš„è¯ä¼šæœ‰ç›¸å…³çš„æç¤ºã€‚ æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯123./nginx -hæˆ–è€…./nginx -? Nginx çš„ç‰¹ç‚¹å’Œåº”ç”¨åœºåˆè§æ–‡ç« ï¼šNginx åŸºæœ¬çŸ¥è¯†å¿«é€Ÿå…¥é—¨ æœ€åæ–‡ç« é¦–å‘åœ°å€ï¼šzhishengçš„åšå®¢ ï¼Œè½¬è½½è¯·æ³¨æ˜åœ°å€ http://www.54tianzhisheng.cn/2017/08/18/Ubuntu-install-Nginx/","tags":[{"name":"Nginx","slug":"Nginx","permalink":"http://yoursite.com/tags/Nginx/"}]},{"title":"é©¬äº‘çƒ­è¡€åŠ±å¿—æ¼”è®²ã€Šæœ€ä¼Ÿå¤§çš„æˆåŠŸã€‹","date":"2017-08-10T16:00:00.000Z","path":"2017/08/11/most-success/","text":"å½“ä½ ä¹è§‚çš„æ—¶å€™ï¼Œæ€»æ˜¯ä¼šæœ‰æœºä¼šçš„ã€‚é‚£ä¹ˆä½ å¯èƒ½è¦é—®äº†â€œæœºä¼šåœ¨å“ªå‘¢ï¼Ÿâ€ä½ å¯èƒ½æ²¡æœ‰ç‰¹åˆ«æƒ³å®ç°çš„äº‹ï¼Œæ²¡æœ‰è¿«åˆ‡è¦æˆåŠŸçš„æ¬²æœ›ï¼Œæ²¡æœ‰å‹‡æ”€é«˜å³°çš„å†³å¿ƒï¼Œæ²¡æœ‰æ°´æ»´çŸ³ç©¿çš„æ¯…åŠ›ï¼Œä¹Ÿæ²¡æœ‰ä¸€é¢—æ‰€å‘æŠ«é¡çš„å¼ºå¤§å¿ƒè„ã€‚é‚£ä¹ˆï¼Œè®©æ¥è‡ªé©¬äº‘çš„è¿™æ®µæ¼”è®²æ¥å‘Šè¯‰ä½ ï¼Œä½ æœ‰ä»€ä¹ˆã€‚ä½ æœ‰å¹´è½»çš„èº«ä½“ï¼Œä½ æœ‰å¥‡å¦™çš„æƒ³æ³•ï¼Œä½ æœ‰ä¹è§‚çš„å¿ƒæ€ï¼Œä½ æœ‰æ— é™çš„å¯èƒ½æ€§ã€‚ æˆ‘æƒ³ï¼Œé©¬äº‘çš„è¿™æ®µåŠ±å¿—æ¼”è®²ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€é¢é•œå­å¯ä»¥ç”¨äºè‡ªç…§ã€‚ä¸Šé¢â€œä½ æœ‰ä»€ä¹ˆâ€è¯´å®Œäº†ï¼Œæ¥ä¸‹æ¥è®©æˆ‘è®¨è®ºä¸€ä¸‹â€œä½ å¯èƒ½æ²¡æœ‰ä»€ä¹ˆâ€ã€‚ ä½ æ€»çˆ±æŠ±æ€¨ï¼Œæœºä¼šå´æ€»æ˜¯èº²åœ¨äººä»¬æŠ±æ€¨çš„åœ°æ–¹ã€‚ä½ æ²¡æœ‰ä»”ç»†æƒ³æƒ³æ€ä¹ˆèƒ½æŠŠäº‹æƒ…åšå¾—ä¸ä¸€æ ·ã€‚ä½ æ²¡æœ‰è¡ŒåŠ¨åŠ›ï¼Œä½ ç¼ºå°‘åšæŒä¸‹å»çš„é•¿åŠ²å„¿ã€‚ä½ æŠ—å‹èƒ½åŠ›å·®ï¼Œä½ åŠ¨ä¸åŠ¨å°±ç»ç’ƒå¿ƒã€‚ä½ ä¸ç›¸ä¿¡è‡ªå·±ä¹Ÿä¸ç›¸ä¿¡åˆ«äººï¼Œä½ æ€•çŠ¯é”™ã€‚ç°åœ¨æ˜¯ä¸æ˜¯è§‰å¾—è¿™ç¢—é¸¡æ±¤æœ‰ç‚¹éš¾ä»¥ä¸‹å’½äº†ï¼Ÿå¦‚æœè®¤è¯†åˆ°å·®è·ï¼Œä¸å¦‚ä»ä»Šå¤©å¼€å§‹æ”¹å˜ã€‚æ˜å¤©çš„ä½ åªè¦æ¯”ä»Šå¤©çš„ä½ å¤šè¿ˆå‡º0.1æ­¥ï¼Œä¹Ÿæ˜¯è¿›æ­¥ã€‚ ä¸ºè‡ªå·±è€Œå·¥ä½œã€‚åœæ­¢æŠ±æ€¨ï¼Œç”¨æŠ±æ€¨çš„æ—¶é—´å¤šåšäº‹ã€‚æŠŠé‚£äº›å¤œé‡Œå†’å‡ºæ¥çš„å¥½ç‚¹å­åœ¨ç™½å¤©ä»˜è¯¸è¡ŒåŠ¨ï¼Œæ—¢ç„¶æœ‰äº†è®¾æƒ³ï¼Œé‚£å°±è¡ŒåŠ¨èµ·æ¥ã€‚è¡ŒåŠ¨æ˜¯ä½ è¿ˆå‡ºçš„ç¬¬ä¸€æ­¥ï¼Œåé¢å¯èƒ½ä¼šæ›´éš¾ï¼Œå†ç»æ— æ•°æ¬¡åŠ¨æ‘‡ï¼Œé¢ä¸´æ— æ•°æ¬¡è¯±æƒ‘ï¼Œæ„Ÿå—æ— æ•°æ¬¡å¤±è´¥çš„è‹¦å‘³å’Œéš¾ä»¥ä¸ºç»§çš„è¾›é…¸ã€‚é¡¶ä½è¿™ä¸€åˆ‡ï¼Œæ¯”å¸¸äººæ›´å‹‡æ•¢åœ°å»é¢å¯¹ï¼Œå¹¶ä¸”åšæŒä¸‹å»ã€‚æ’é™¤ä¸‡éš¾ï¼Œåˆ«è¢«æ¥è‡ªä¸–äººçš„éè®®å’Œè´¨ç–‘å½±å“ã€‚ç›¸ä¿¡ä½ è‡ªå·±ï¼Œç›¸ä¿¡ä½ çš„å›¢é˜Ÿã€‚æœåŠ¡å¥½ä½ çš„å®¢æˆ·ï¼Œä¹‹åå†æƒ³æ€ä¹ˆå›é¦ˆç¤¾ä¼šã€‚çŠ¯è¶³å¤Ÿå¤šçš„é”™ï¼Œå¹´è½»æ—¶èµ°è¿‡çš„å¼¯è·¯æ˜¯æœ€æ£’çš„æ”¶è·ã€‚ é©¬äº‘è¿˜æ›¾ç»è¯´è¿‡â€œä»Šå¤©å¾ˆè‰°éš¾ï¼Œæ˜å¤©æ¯”ä»Šå¤©æ›´éš¾ï¼Œåå¤©å¯èƒ½æ˜¯ç¾å¥½çš„ï¼Œä½†æ›´å¤šçš„äººæ­»åœ¨äº†æ˜å¤©â€ã€‚æ˜¯ä¸æ˜¯æ„Ÿåˆ°è†ç›–ä¸­ç®­äº†ï¼Ÿä¸å¦¨å¹²äº†è¿™ç¢—â€œæ¯’é¸¡æ±¤â€ã€‚æˆåŠŸçš„æ³•åˆ™æœ¬å°±å¹¶éåƒç¯‡ä¸€å¾‹ï¼Œä½ ä¼šæœ‰ä½ è‡ªå·±å‘ä¸Šçš„å­¦é—®ã€‚é‚£ä¸å¦‚ä»æ˜å¤©å¼€å§‹ï¼Œå»æ‘¸ç´¢ï¼Œå»è·µè¡Œï¼Œå“ªæ€•åªæ¯”æ˜¨å¤©çš„ä½ å¤šè¿ˆå‡º0.01æ­¥ã€‚ é€ç»™æ­£åœ¨æ‰¾å®ä¹ å·¥ä½œçš„è‡ªå·±ï¼åŠ æ²¹ï¼ï¼ï¼","tags":[{"name":"åŠ±å¿—","slug":"åŠ±å¿—","permalink":"http://yoursite.com/tags/åŠ±å¿—/"}]},{"title":"æºç å¤§æ‹›ï¼šä¸æœæ¥æˆ˜ï¼æ’¸è¿™äº›å®Œæ•´é¡¹ç›®ï¼Œä½ ä¸ç‰›é€¼éƒ½éš¾ï¼","date":"2017-08-07T16:00:00.000Z","path":"2017/08/08/android-projects/","text":"ç»å¸¸æœ‰äººé—®æˆ‘æœ‰æ²¡æœ‰ä»€ä¹ˆé¡¹ç›®ä»£ç ï¼Œæˆ‘å›å¤è¯´å» Github æ‰¾ï¼Œä½†æ˜¯è¿˜æ˜¯å¥½å¤šäººä¸çŸ¥é“å¦‚ä½•æ‰¾åˆ°é‚£äº›æ¯”è¾ƒå¥½çš„é¡¹ç›®ã€‚ ä»Šå¤©èŠ±äº†ç‚¹æ—¶é—´æ‰¾äº†äº›å®‰å“çš„é¡¹ç›®ï¼Œè§‰å¾—è¿˜æ˜¯ä¸é”™çš„ï¼Œå‡ ä¹å°±æ˜¯è‡ªå·±ç”Ÿæ´»å¸¸ç”¨çš„ä¸€äº› app ï¼Œå¦‚æœä½ æ˜¯ä¸€ä¸ª Android å¼€å‘è€…ï¼Œæˆ‘è§‰å¾—æ’¸å®Œè¿™äº›é¡¹ç›®ï¼Œä½ æƒ³ä¸ç‰›é€¼éƒ½éš¾ã€‚ å…³æ³¨æˆ‘ èœé¸Ÿæ–°é—»èœé¸Ÿæ–°é—» å®¢æˆ·ç«¯æ˜¯ä¸€ä¸ªä»¿ç…§36Krå®˜æ–¹,å® æ—¶æŠ“å–36Krå®˜ç½‘æ•°æ®çš„èµ„è®¯ç±»æ–°é—»å®¢æˆ·ç«¯ã€‚ åŒ…æ‹¬é¦–é¡µæ–°é—»,è¯¦æƒ…,å‘ç°,æ´»åŠ¨,å®æ—¶æ•°æ®æŠ“å–,ä¾§æ»‘æ•ˆæœ,ç¬¬ä¸‰æ–¹ç™»å½•ä»¥åŠåˆ†äº«,æ¶ˆæ¯æ¨é€ç­‰ç›¸å…³åŠŸèƒ½å®¢æˆ·ç«¯ã€‚ è¯¾ç¨‹åœ°å€ï¼š http://www.cniao5.com/clazz/view/10076.htmlè§†é¢‘ä¸‹è½½é“¾æ¥ï¼š http://pan.baidu.com/s/1eQLyQxc å¯†ç ï¼š3ts1 é¡¹ç›®æºç ä¸‹è½½åœ°å€ï¼šhttps://github.com/yxs666/cniao5-news è¿è¡Œæˆªå›¾: .gif) KuaiChuanä»¿èŒ„å­å¿«ä¼ çš„ä¸€æ¬¾æ–‡ä»¶ä¼ è¾“åº”ç”¨ï¼Œ æ¶‰åŠåˆ°Socketé€šä¿¡ï¼ŒåŒ…æ‹¬TCPï¼ŒUDPé€šä¿¡ é¡¹ç›®æºç ï¼šhttps://github.com/mayubao/KuaiChuan è¿è¡Œæˆªå›¾ï¼š CoolShoppingä¸€ä¸ªä»¿æ‹‰æ‰‹å›¢è´­çš„è´­ç‰©Appï¼Œé‡‡ç”¨Bmobåå°å®ç°çŸ­ä¿¡éªŒè¯ç æ³¨å†Œã€ç™»å½•ã€æ”¶è—ã€è®¢å•ç®¡ç†ã€è‡ªåŠ¨æ›´æ–°ç­‰åŠŸèƒ½ï¼Œæ•°æ®æŠ“å–è‡ªæ‹‰æ‰‹å›¢è´­ é¡¹ç›®åœ°å€ï¼šhttps://github.com/myxh/CoolShopping è¿è¡Œæˆªå›¾ï¼š RNPolymerPoRNPolymerPo æ˜¯ä¸€ä¸ªåŸºäº React Native çš„ç”Ÿæ´»ç±»èšåˆå®æˆ˜é¡¹ç›®ï¼Œç›®å‰ç”±äºæ²¡æœ‰ MAC è®¾å¤‡ï¼Œæ‰€ä»¥æ²¡æœ‰é€‚é… iOSï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥è‡ªè¡Œé€‚é… app ç›®å½•ä¸‹ç›¸å…³ JS ä»£ç å³å¯ã€‚ é¡¹ç›®åœ°å€ï¼šhttps://github.com/yanbober/RNPolymerPo è¿è¡Œæˆªå›¾ï¼š bilibiliä»¿ bilibili çš„å®¢æˆ·ç«¯ é¡¹ç›®åœ°å€ï¼šhttps://github.com/HotBitmapGG/bilibili-android-client è¿è¡Œæˆªå›¾ï¼š StockCharté‡‡ç”¨ä¸»æµrxjava+retrofit+dagger2æ¡†æ¶ï¼ŒStockChartçœ‹è‚¡ç¥¨çš„åˆ†æ—¶å›¾ï¼Œkçº¿å›¾ã€‚ é¡¹ç›®åœ°å€ï¼šhttps://github.com/AndroidJiang/StockChart Androidç²¾å‡†è®¡æ­¥å™¨é¡¹ç›®åœ°å€ï¼šhttps://github.com/linglongxin24/DylanStepCount è¿è¡Œæˆªå›¾ï¼š èœé¸Ÿå¾®åšèœé¸Ÿå¾®åšã€Šé€šè¿‡å¯¹æ–°æµªå¾®åšå¼€å‘æ¡ˆä¾‹çš„è¯¦ç»†è§£æï¼Œè®²è§£äº†ä¸€ä¸ªå®Œæ•´çš„ Android å®é™…é¡¹ç›®çš„å¼€å‘è¿‡ç¨‹ã€‚ æœ‰æ–°æµªå¾®åšçš„ä¸»è¦åŠŸèƒ½ï¼Œæœ‰Toolbar,RecyclerViewç­‰æœ€æ–°æ§ä»¶çš„ç”¨æ³•ï¼›å„ç§å¿«é€Ÿå¼€å‘æ¡†æ¶çš„ä½¿ç”¨ï¼Œæ¯”å¦‚ Glide,PhotoView ï¼ŒEventBus ï¼ŒOKHttpï¼ŒpullToRefreshç­‰ã€‚ å­¦ä¹ è§†é¢‘+æºç  è§†é¢‘ä¸­è¿˜ä¼šè®²åˆ°MVPè®¾è®¡æ¨¡å¼ä»¥åŠä¸€äº›æ¶æ„å¸ˆçš„å…¥é—¨çŸ¥è¯†ã€‚ è¯¾ç¨‹åœ°å€ï¼š http://www.cniao5.com/clazz/view/10075.htmlè§†é¢‘ä¸‹è½½é“¾æ¥ï¼š http://pan.baidu.com/s/1gexq3VP å¯†ç ï¼šf0t9 é¡¹ç›®åœ°å€ï¼šhttps://github.com/yxs666/cniao5-weibo è¿è¡Œæˆªå›¾ï¼š åœ¨çº¿äº‘æ‰“å°å¹³å°ä¸€ä¸ªåœ¨çº¿äº‘æ‰“å°å¹³å°ï¼ˆandroidéƒ¨åˆ†ï¼‰å«è®¢å•ç®¡ç†ã€ç™¾åº¦åœ°å›¾ã€äºŒç»´ç ç­‰ç­‰ é¡¹ç›®åœ°å€ï¼šhttps://github.com/LehmanHe/A4print è¿è¡Œæˆªå›¾ï¼š é“œæ¿è¡—é¡¹ç›®åœ°å€ï¼šhttps://github.com/robotlife/TongBanJie è¿è¡Œæˆªå›¾ï¼š ç¤¼ç‰©è¯´é¡¹ç›®åœ°å€ï¼šhttps://github.com/Orangelittle/Liwusuo IotXmppæœ¬é¡¹ç›®æ˜¯åŸºäºXMPPçš„ç‰©è”ç½‘å®¢æˆ·ç«¯è½¯ä»¶çš„å®ç°ï¼Œå…¶å®ç°çš„ä¸»è¦åŠŸèƒ½æ˜¯ä¸€æ¬¾èƒ½å’Œç‰©è”ç½‘èŠ‚ç‚¹äº¤äº’çš„å³æ—¶é€šè®¯è½¯ä»¶ã€‚ç›®å‰æ”¯æŒä¹ç±»ä¼ æ„Ÿå™¨èŠ‚ç‚¹äº¤äº’ï¼Œä¸»è¦æœ‰ï¼šæ¸©æ¹¿åº¦ã€é£æ‰‡ã€ç›´æµç”µæœºã€LEDç¯ã€æ­¥è¿›ç”µæœºã€é—¨ç£ã€å…‰ç”µæ¥è¿‘ã€çƒŸé›¾å’Œå…‰ç…§ã€‚æœ¬è½¯ä»¶ä¸ä»…èƒ½å’Œè¿™äº›ä¼ æ„Ÿå™¨èŠ‚ç‚¹äº¤äº’ï¼Œè¿˜å®ç°äº†ç±»ä¼¼å¾®ä¿¡çš„è®¢é˜…å’Œå–æ¶ˆè®¢é˜…åŠŸèƒ½ã€‚å½“è®¢é˜…ä¸€ä¸ªèŠ‚ç‚¹åèŠ‚ç‚¹å°±ä¼šæŒ‰ç…§è®¾å®šå¥½çš„å‘¨æœŸå‘å®¢æˆ·ç«¯æ±‡æŠ¥æ•°æ®ï¼Œå®¢æˆ·ç«¯ä¹Ÿèƒ½è®¾ç½®å‘¨æœŸã€è®¾ç½®æŠ¥è­¦ä¸Šä¸‹é™ç­‰ã€‚è¿™äº›åŠŸèƒ½çš„å®ç°æå¤§çš„æ–¹ä¾¿äº†æˆ‘ä»¬å’Œç‰©è”ç½‘èŠ‚ç‚¹çš„äº¤äº’ã€‚ é¡¹ç›®åœ°å€ï¼šhttps://github.com/tiandawu/IotXmpp é¡¹ç›®æˆªå›¾ï¼š Livesç”Ÿæ´»å¨±ä¹ç»“åˆçš„APP, ç°æœ‰ä¸»è¦åŠŸèƒ½ï¼š å›¾ä¹¦ ç¿»è¯‘ éŸ³ä¹ è§†é¢‘ é¡¹ç›®åœ°å€ï¼šhttps://github.com/Allyns/Lives é¡¹ç›®æˆªå›¾ï¼š CoCoinä¸€æ¬¾å¤šè§†å›¾è®°è´¦APP é¡¹ç›®åœ°å€ï¼šhttps://github.com/Nightonke/CoCoin è¿è¡Œæˆªå›¾ï¼š AppLockAppLockåº”ç”¨é”ï¼Œä¿æŠ¤ä½ çš„éšç§ é¡¹ç›®åœ°å€ï¼šhttps://github.com/lizixian18/AppLock è¿è¡Œæˆªå›¾ï¼š jianshi ç®€è¯—ä¸€æ¬¾ä¼˜é›…çš„ä¸­å›½é£Android Appï¼ŒåŒ…æ‹¬Androidç«¯å’ŒServerç«¯ï¼Œæ”¯æŒç™»å½•æ³¨å†Œï¼Œæ•°æ®äº‘ç«¯åŒæ­¥ï¼Œç¦»çº¿æ•°æ®å­˜å‚¨å’Œæˆªå±åˆ†äº«ç­‰åŠŸèƒ½ã€‚ é¡¹ç›®åœ°å€ï¼š è¿è¡Œæˆªå›¾ï¼š storage-chooserä¸€æ¬¾æ–‡ä»¶ç®¡ç†å™¨app é¡¹ç›®åœ°å€ï¼šhttps://github.com/codekidX/storage-chooser è¿è¡Œæˆªå›¾ï¼š LQRWeChatä»¿æœ€æ–°ç‰ˆå¾®ä¿¡6.5.7ï¼ˆé™¤å›¾ç‰‡é€‰æ‹©å™¨å¤–ï¼‰ã€‚æœ¬é¡¹ç›®åŸºäºèäº‘SDKï¼Œä½¿ç”¨ç›®å‰è¾ƒç«çš„ Rxjava+Retrofit+MVP+Glide æŠ€æœ¯å¼€å‘ã€‚ç›¸æ¯”ä¸Šä¸ªç‰ˆæœ¬ï¼ŒåŠ å…¥å‘é€ä½ç½®æ¶ˆæ¯ï¼Œçº¢åŒ…æ¶ˆæ¯ç­‰åŠŸèƒ½ã€‚ é¡¹ç›®åœ°å€ï¼šhttps://github.com/GitLqr/LQRWeChat è¿è¡Œæˆªå›¾ï¼š PonyExpress å°é©¬å¿«é€’å°é©¬å¿«é€’ï¼Œæ‚¨çš„å¥½å¸®æ‰‹ã€‚æŸ¥è¯¢å¹¶è·Ÿè¸ªå¿«é€’ï¼Œå¿«é€’ä¿¡æ¯åŠæ—¶æŒæ¡ã€‚æ”¯æŒå…¨å›½100å¤šå®¶å¿«é€’å…¬å¸ï¼Œæ”¯æŒæ‰«ç æŸ¥è¯¢ï¼Œæ™ºèƒ½è¯†åˆ«å¿«é€’å…¬å¸ã€‚é™„å¸¦ç”ŸæˆäºŒç»´ç å°å·¥å…·ï¼Œæ–¹ä¾¿å®ç”¨ã€‚ä½“ç§¯å°å·§ï¼Œæ— å¹¿å‘Šï¼Œæ— å¤šä½™æƒé™ã€‚ é¡¹ç›®åœ°å€ï¼šhttps://github.com/wangchenyan/PonyExpress è¿è¡Œæˆªå›¾ï¼š CloudReader äº‘é˜…ä¸€æ¬¾åŸºäºç½‘æ˜“äº‘éŸ³ä¹UIï¼Œä½¿ç”¨Gank.IoåŠè±†ç“£apiå¼€å‘çš„ç¬¦åˆGoogle Material Designçš„Androidå®¢æˆ·ç«¯ã€‚é¡¹ç›®é‡‡å–çš„æ˜¯MVVM-DataBindingæ¶æ„å¼€å‘ï¼Œç°ä¸»è¦åŒ…æ‹¬ï¼šå¹²è´§åŒºã€ç”µå½±åŒºå’Œä¹¦ç±åŒºä¸‰ä¸ªå­æ¨¡å—ã€‚DIYç½‘æ˜“äº‘éŸ³ä¹åŸæ¥æ˜¯å¦‚æ­¤Cool é¡¹ç›®åœ°å€ï¼šhttps://github.com/youlookwhat/CloudReader è¿è¡Œæˆªå›¾ï¼š ç¡…è°·å•†åŸæ˜¯ä¸€æ¬¾æŒ‰ç…§ä¼ä¸šçº§æ ‡å‡†ç ”å‘çš„é¡¹ç›®ã€‚æœ¬å¥—ä»£ç æ˜¯ç›®å‰å›½å†…å¸‚åœºç¬¬ä¸€å¥—è¯¦ç»†è®²è§£å•†åŸç±»é¡¹ç›®çš„å…è´¹ä»£ç ã€‚è¯¥ä»£ç ä¸­çš„å†…å®¹åŒ…æ‹¬ä½†ä¸ä»…é™äºï¼Œæ¡†æ¶çš„æ­å»º ã€ä¸»é¡µæ¨¡å—ã€åˆ†ç±»æ¨¡å—ã€å‘ç°æ¨¡å—ã€è´­ç‰©è½¦æ¨¡å—å’Œä¸ªäººä¸­å¿ƒæ¨¡å—ã€‚é¡¹ç›®ä¸­è®²è§£çš„ä¸»æµæŠ€æœ¯åŒ…æ‹¬ä¸”ä¸é™äºRadioGroup + Fragmentã€OKHttpã€FastJsonã€RecyclerViewã€ ScrollViewContainerã€Bannerã€å€’è®¡æ—¶ç§’æ€ã€è‡ªå®šä¹‰è´­ç‰©è½¦ã€æ”¯ä»˜å®ç­‰æŠ€æœ¯ã€‚è¯¥é¡¹ç›®ä¸­è®²è§£çš„æŠ€æœ¯å¯åº”ç”¨åœ¨ç”µå•†ã€æ–°é—»ã€æ—…æ¸¸ã€åŒ»ç–—ã€åœ¨çº¿æ•™è‚²ç­‰é¢†åŸŸã€‚ é¡¹ç›®åœ°å€ï¼šhttps://github.com/atguigu01/Shopping è¿è¡Œæˆªå›¾ï¼š è§‰å¾—æ£’çš„ï¼Œæ¬¢è¿ç‚¹èµå’Œè½¬å‘åˆ†äº«ï¼Œè°¢è°¢å¤§å®¶ï¼è½¬è½½çš„è¯æ³¨æ˜æ¥æºåœ°å€ä¸º www.54tianzhisheng.cn/2017/05/13/android-projects/ å³å¯ã€‚","tags":[{"name":"Android","slug":"Android","permalink":"http://yoursite.com/tags/Android/"}]},{"title":"Nginx åŸºæœ¬çŸ¥è¯†å¿«é€Ÿå…¥é—¨","date":"2017-08-04T16:00:00.000Z","path":"2017/08/05/Nginx/","text":"ä»€ä¹ˆæ˜¯ Nginxï¼ŸNginx æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„ HTTP å’Œåå‘ä»£ç†æœåŠ¡å™¨ï¼Œä»¥é«˜ç¨³å®šæ€§ã€ä¸°å¯Œçš„åŠŸèƒ½é›†ã€ç¤ºä¾‹é…ç½®æ–‡ä»¶å’Œä½ç³»ç»Ÿèµ„æºçš„æ¶ˆè€—è€Œé—»åã€‚ Nginx ç‰¹ç‚¹ å¤„ç†é™æ€æ–‡ä»¶ï¼Œç´¢å¼•æ–‡ä»¶ä»¥åŠè‡ªåŠ¨ç´¢å¼•ï¼›æ‰“å¼€æ–‡ä»¶æè¿°ç¬¦ç¼“å†²ï¼ æ— ç¼“å­˜çš„åå‘ä»£ç†åŠ é€Ÿï¼Œç®€å•çš„è´Ÿè½½å‡è¡¡å’Œå®¹é”™ï¼ FastCGIï¼Œç®€å•çš„è´Ÿè½½å‡è¡¡å’Œå®¹é”™ï¼ æ¨¡å—åŒ–çš„ç»“æ„ã€‚åŒ…æ‹¬ gzipping, byte ranges, chunked responses,ä»¥åŠ SSI-filter ç­‰ filterã€‚å¦‚æœç”± FastCGI æˆ–å…¶å®ƒä»£ç†æœåŠ¡å™¨å¤„ç†å•é¡µä¸­å­˜åœ¨çš„å¤šä¸ª SSIï¼Œåˆ™è¿™é¡¹å¤„ç†å¯ä»¥å¹¶è¡Œè¿è¡Œï¼Œè€Œä¸éœ€è¦ç›¸äº’ç­‰å¾…ã€‚ æ”¯æŒ SSL å’Œ TLSSNIï¼ ä¸»è¦åº”ç”¨åœºåˆ1ã€é™æ€ HTTP æœåŠ¡å™¨é¦–å…ˆï¼ŒNginxæ˜¯ä¸€ä¸ª HTTP æœåŠ¡å™¨ï¼Œå¯ä»¥å°†æœåŠ¡å™¨ä¸Šçš„é™æ€æ–‡ä»¶ï¼ˆå¦‚ HTMLã€å›¾ç‰‡ï¼‰é€šè¿‡ HTTP åè®®å±•ç°ç»™å®¢æˆ·ç«¯ã€‚ é…ç½®ï¼š 123456server &#123; listen 80; # ç«¯å£å· location / &#123; root /usr/share/nginx/html; # é™æ€æ–‡ä»¶è·¯å¾„ &#125;&#125; 2ã€åå‘ä»£ç†æœåŠ¡å™¨ä»€ä¹ˆæ˜¯åå‘ä»£ç†ï¼Ÿ å®¢æˆ·ç«¯æœ¬æ¥å¯ä»¥ç›´æ¥é€šè¿‡ HTTP åè®®è®¿é—®æŸç½‘ç«™åº”ç”¨æœåŠ¡å™¨ï¼Œå¦‚æœç½‘ç«™ç®¡ç†å‘˜åœ¨ä¸­é—´åŠ ä¸Šä¸€ä¸ª Nginxï¼Œå®¢æˆ·ç«¯è¯·æ±‚Nginxï¼ŒNginx è¯·æ±‚åº”ç”¨æœåŠ¡å™¨ï¼Œç„¶åå°†ç»“æœè¿”å›ç»™å®¢æˆ·ç«¯ï¼Œæ­¤æ—¶ Nginx å°±æ˜¯åå‘ä»£ç†æœåŠ¡å™¨ã€‚ é…ç½®ï¼š 123456server &#123; listen 80; location / &#123; proxy_pass http://192.168.20.1:8080; # åº”ç”¨æœåŠ¡å™¨HTTPåœ°å€ &#125;&#125; æ—¢ç„¶æœåŠ¡å™¨å¯ä»¥ç›´æ¥ HTTP è®¿é—®ï¼Œä¸ºä»€ä¹ˆè¦åœ¨ä¸­é—´åŠ ä¸Šä¸€ä¸ªåå‘ä»£ç†ï¼Œä¸æ˜¯å¤šæ­¤ä¸€ä¸¾å—ï¼Ÿåå‘ä»£ç†æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿç»§ç»­å¾€ä¸‹çœ‹ï¼Œä¸‹é¢çš„è´Ÿè½½å‡è¡¡ã€è™šæ‹Ÿä¸»æœºï¼Œéƒ½åŸºäºåå‘ä»£ç†å®ç°ï¼Œå½“ç„¶åå‘ä»£ç†çš„åŠŸèƒ½ä¹Ÿä¸ä»…ä»…æ˜¯è¿™äº›ã€‚ 3ã€è´Ÿè½½å‡è¡¡å½“ç½‘ç«™è®¿é—®é‡éå¸¸å¤§ï¼Œç½‘ç«™ç«™é•¿å¼€å¿ƒèµšé’±çš„åŒæ—¶ï¼Œä¹Ÿæ‘Šä¸Šäº‹å„¿äº†ã€‚å› ä¸ºç½‘ç«™è¶Šæ¥è¶Šæ…¢ï¼Œä¸€å°æœåŠ¡å™¨å·²ç»ä¸å¤Ÿç”¨äº†ã€‚äºæ˜¯å°†ç›¸åŒçš„åº”ç”¨éƒ¨ç½²åœ¨å¤šå°æœåŠ¡å™¨ä¸Šï¼Œå°†å¤§é‡ç”¨æˆ·çš„è¯·æ±‚åˆ†é…ç»™å¤šå°æœºå™¨å¤„ç†ã€‚åŒæ—¶å¸¦æ¥çš„å¥½å¤„æ˜¯ï¼Œå…¶ä¸­ä¸€å°æœåŠ¡å™¨ä¸‡ä¸€æŒ‚äº†ï¼Œåªè¦è¿˜æœ‰å…¶ä»–æœåŠ¡å™¨æ­£å¸¸è¿è¡Œï¼Œå°±ä¸ä¼šå½±å“ç”¨æˆ·ä½¿ç”¨ã€‚ å½“æˆ‘ä»¬ç½‘ç«™è¿›è¡Œå¤§çš„å‡çº§æ›´æ–°æ—¶ï¼Œæˆ‘ä»¬ä¸å¯èƒ½ç›´æ¥å°†æ‰€æœ‰çš„æœåŠ¡å™¨éƒ½å…³æ‰ï¼Œç„¶åå†å‡çº§çš„ã€‚é€šå¸¸æˆ‘ä»¬éƒ½æ˜¯æ‰¹é‡çš„å…³æ‰ä¸€äº›æœåŠ¡å™¨ï¼Œå»å‡çº§ç½‘ç«™ï¼Œå½“æœ‰ç”¨æˆ·çš„è¯·æ±‚æ—¶åˆ™åˆ†é…ç»™å…¶ä»–è¿˜åœ¨è¿ä½œçš„æœºå™¨å¤„ç†ã€‚å½“ä¹‹å‰å…³æ‰çš„æœºå™¨æ›´æ–°å®Œæˆåï¼Œå†æ¬¡å¼€å¯ï¼Œç„¶ååˆæ‰¹é‡å…³æ‰éƒ¨åˆ†æœºå™¨ï¼Œå¦‚ä¸Šå¾ªç¯ï¼Œç›´åˆ°æœ€åå…¨éƒ¨æœºå™¨éƒ½æ›´æ–°å®Œæˆã€‚è¿™æ ·å°±ä¸ä¼šå½±å“ç”¨æˆ·ä½¿ç”¨ã€‚ Nginx å¯ä»¥é€šè¿‡åå‘ä»£ç†æ¥å®ç°è´Ÿè½½å‡è¡¡ã€‚ é…ç½®ï¼š 12345678910upstream myapp &#123; server 192.168.20.1:8080; # åº”ç”¨æœåŠ¡å™¨1 server 192.168.20.2:8080; # åº”ç”¨æœåŠ¡å™¨2&#125;server &#123; listen 80; location / &#123; proxy_pass http://myapp; &#125;&#125; 4ã€è™šæ‹Ÿä¸»æœºç½‘ç«™è®¿é—®é‡å¤§ï¼Œéœ€è¦è´Ÿè½½å‡è¡¡ã€‚ç„¶è€Œå¹¶ä¸æ˜¯æ‰€æœ‰ç½‘ç«™éƒ½å¦‚æ­¤å‡ºè‰²ï¼Œæœ‰çš„ç½‘ç«™ï¼Œç”±äºè®¿é—®é‡å¤ªå°ï¼Œéœ€è¦èŠ‚çœæˆæœ¬ï¼Œå°†å¤šä¸ªç½‘ç«™éƒ¨ç½²åœ¨åŒä¸€å°æœåŠ¡å™¨ä¸Šã€‚ ä¾‹å¦‚å°† www.aaa.com å’Œ www.bbb.com ä¸¤ä¸ªç½‘ç«™éƒ¨ç½²åœ¨åŒä¸€å°æœåŠ¡å™¨ä¸Šï¼Œä¸¤ä¸ªåŸŸåè§£æåˆ°åŒä¸€ä¸ª IP åœ°å€ï¼Œä½†æ˜¯ç”¨æˆ·é€šè¿‡ä¸¤ä¸ªåŸŸåå´å¯ä»¥æ‰“å¼€ä¸¤ä¸ªå®Œå…¨ä¸åŒçš„ç½‘ç«™ï¼Œäº’ç›¸ä¸å½±å“ï¼Œå°±åƒè®¿é—®ä¸¤ä¸ªæœåŠ¡å™¨ä¸€æ ·ï¼Œæ‰€ä»¥å«ä¸¤ä¸ªè™šæ‹Ÿä¸»æœºã€‚ é…ç½®ï¼š 12345678910111213141516171819server &#123; listen 80 default_server; server_name _; return 444; # è¿‡æ»¤å…¶ä»–åŸŸåçš„è¯·æ±‚ï¼Œè¿”å›444çŠ¶æ€ç &#125;server &#123; listen 80; server_name www.aaa.com; # www.aaa.comåŸŸå location / &#123; proxy_pass http://localhost:8080; # å¯¹åº”ç«¯å£å·8080 &#125;&#125;server &#123; listen 80; server_name www.bbb.com; # www.bbb.comåŸŸå location / &#123; proxy_pass http://localhost:8081; # å¯¹åº”ç«¯å£å·8081 &#125;&#125; åœ¨æœåŠ¡å™¨ 8080 å’Œ 8081 ä¸¤ä¸ªç«¯å£åˆ†åˆ«å¼€äº†ä¸€ä¸ªåº”ç”¨ï¼Œå®¢æˆ·ç«¯é€šè¿‡ä¸åŒçš„åŸŸåè®¿é—®ï¼Œæ ¹æ® server_name å¯ä»¥åå‘ä»£ç†åˆ°å¯¹åº”çš„åº”ç”¨æœåŠ¡å™¨ã€‚ è™šæ‹Ÿä¸»æœºçš„åŸç†æ˜¯é€šè¿‡ HTTP è¯·æ±‚å¤´ä¸­çš„ Host æ˜¯å¦åŒ¹é… server_name æ¥å®ç°çš„ï¼Œæœ‰å…´è¶£çš„åŒå­¦å¯ä»¥ç ”ç©¶ä¸€ä¸‹ HTTP åè®®ã€‚ å¦å¤–ï¼Œserver_name é…ç½®è¿˜å¯ä»¥è¿‡æ»¤æœ‰äººæ¶æ„å°†æŸäº›åŸŸåæŒ‡å‘ä½ çš„ä¸»æœºæœåŠ¡å™¨ã€‚ 5ã€FastCGINginx æœ¬èº«ä¸æ”¯æŒ PHP ç­‰è¯­è¨€ï¼Œä½†æ˜¯å®ƒå¯ä»¥é€šè¿‡ FastCGI æ¥å°†è¯·æ±‚æ‰”ç»™æŸäº›è¯­è¨€æˆ–æ¡†æ¶å¤„ç†ï¼ˆä¾‹å¦‚ PHPã€Pythonã€Perlï¼‰ã€‚ 123456789server &#123; listen 80; location ~ \\.php$ &#123; include fastcgi_params; fastcgi_param SCRIPT_FILENAME /PHPæ–‡ä»¶è·¯å¾„$fastcgi_script_name; # PHPæ–‡ä»¶è·¯å¾„ fastcgi_pass 127.0.0.1:9000; # PHP-FPMåœ°å€å’Œç«¯å£å· # å¦ä¸€ç§æ–¹å¼ï¼šfastcgi_pass unix:/var/run/php5-fpm.sock; &#125;&#125; é…ç½®ä¸­å°† .php ç»“å°¾çš„è¯·æ±‚é€šè¿‡ FashCGI äº¤ç»™ PHP-FPM å¤„ç†ï¼ŒPHP-FPM æ˜¯ PHP çš„ä¸€ä¸ª FastCGI ç®¡ç†å™¨ã€‚æœ‰å…³FashCGI å¯ä»¥æŸ¥é˜…å…¶ä»–èµ„æ–™ï¼Œæœ¬æ–‡ä¸å†ä»‹ç»ã€‚ fastcgi_pass å’Œ proxy_pass æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿä¸‹é¢ä¸€å¼ å›¾å¸¦ä½ çœ‹æ˜ç™½ï¼š å‚è€ƒèµ„æ–™1ã€NginxåŸºæœ¬åŠŸèƒ½æé€Ÿå…¥é—¨ 2ã€Nginx å­¦ä¹ ç¬”è®°","tags":[{"name":"Nginx","slug":"Nginx","permalink":"http://yoursite.com/tags/Nginx/"}]},{"title":"ç§‹æ‹›ç¬¬ä¸€ç«™ â€”â€” äºšä¿¡ç§‘æŠ€","date":"2017-08-03T16:00:00.000Z","path":"2017/08/04/yaxin/","text":"ç¬¬ 1 ç«™ã€äºšä¿¡ç§‘æŠ€ Java å¼€å‘1ï¼‰è‡ªæˆ‘ä»‹ç»ï¼ˆè¯´åˆ°ä¸€ä¸ªäº®ç‚¹ï¼šé•¿æœŸåšæŒå†™åšå®¢ï¼Œé¢è¯•å®˜è§‰å¾—è¿™ä¸ªä¹ æƒ¯å¾ˆå¥½ï¼Œç®—åŠ åˆ†é¡¹å§ï¼‰ 2ï¼‰çœ‹åˆ°ç®€å†é¡¹ç›®ä¸­ç”¨åˆ° Solrï¼Œè¯¦ç»†çš„é—®äº†ä¸‹ Solrï¼ˆè‡ªå·±ä»‹ç»äº†ä¸‹ Solr çš„ä½¿ç”¨åœºæ™¯å’Œå»ºç«‹ç´¢å¼•ç­‰ä¸œè¥¿ï¼‰3ï¼‰é¡¹ç›®é‡Œé¢å†™äº†ä¸€ä¸ª â€œ æ•æ„Ÿè¯å’Œ JS æ ‡ç­¾è¿‡æ»¤é˜² XSS æ”»å‡»â€ï¼Œé¢è¯•å®˜è®©æˆ‘è®²äº†ä¸‹è¿™ä¸ª XSS æ”»å‡»ï¼Œå¹¶ä¸”æ˜¯æ€æ ·å®ç°çš„ 4ï¼‰é¡¹ç›®é‡Œå†™äº†æ”¯æŒ Markdownï¼Œé—®æ˜¯ä¸æ˜¯è‡ªå·±å†™çš„è§£æä»£ç ï¼Œï¼ˆå›ç­”ä¸æ˜¯ï¼Œè‡ªå·±å¼•ç”¨çš„æ˜¯ GitHubä¸Šçš„ä¸€ä¸ªå¼€æºé¡¹ç›®è§£æçš„ï¼‰ 5ï¼‰æƒ³é—®æˆ‘å‰ç«¯çš„çŸ¥è¯†ï¼Œæˆ‘å›å¤åˆ°ï¼šè‡ªå·±ååç«¯å¼€å‘ï¼Œå‰ç«¯åªæ˜¯äº†è§£ï¼Œç„¶åé¢è¯•å®˜å°±ä¸é—®äº† 6ï¼‰é—®æˆ‘è€ƒä¸è€ƒç ”ï¼Ÿ 7ï¼‰è§‰å¾—æ­å·æ€ä¹ˆæ ·ï¼Ÿæ˜¯æ‰“ç®—å°±å‘†åœ¨æ­å·è¿˜æ˜¯æŠŠæ­å·ä½œä¸ºä¸€ä¸ªè·³æ¿ï¼Ÿ 8ï¼‰æœ‰å•¥å°ç›®æ ‡ï¼Ÿä»¥åæ˜¯æ‰“ç®—ç»§ç»­æŠ€æœ¯æ–¹å‘ï¼Œè¿˜æ˜¯å…ˆæŠ€æœ¯åç®¡ç†ï¼ˆè¿˜å¼€ç©ç¬‘çš„è¯´ï¼šæ˜¯ä¸æ˜¯èµšä»–å‡ ä¸ªäº¿ï¼Œå½“æ—¶æˆ‘ç¬‘äº†ç¬‘ï¼‰ 9ï¼‰æœ‰å•¥å…´è¶£çˆ±å¥½ï¼Ÿ å¤§æ¦‚å°±è®°å¾—è¿™ä¹ˆå¤šäº†ï¼Œç›®å‰å·²ç»æ‹¿åˆ° Offer äº†ã€‚ æ€»ç»“ï¼šé¢è¯•é—®çš„é—®é¢˜ä¸ç®—å¤šï¼Œä¸»è¦æ˜¯é€šè¿‡ç®€å†ä¸Šé¡¹ç›®æ‰€æ¶‰åŠçš„ä¸œè¥¿æé—®çš„ï¼Œå¦‚æœè‡ªå·±ä¸å¤ªä¼šçš„åˆ‡è®°ä¸è¦å†™ä¸Šå»ã€‚é¢è¯•ä¸»è¦è€ƒå¯Ÿä½ å›ç­”é—®é¢˜æ¥åˆ¤æ–­ä½ çš„é€»è¾‘æ˜¯å¦å¾ˆæ¸…æ¥šã€‚","tags":[{"name":"é¢ç»","slug":"é¢ç»","permalink":"http://yoursite.com/tags/é¢ç»/"}]},{"title":"ç§‹æ‹›ç¬¬äºŒç«™ â€”â€” å†…æ¨çˆ±å¥‡è‰ºï¼ˆä¸€é¢äºŒé¢ï¼‰","date":"2017-08-03T16:00:00.000Z","path":"2017/08/04/iqiyi/","text":"ç¬¬ 2 ç«™ ã€çˆ±å¥‡è‰º åç«¯ Java å¼€å‘å®ä¹ ç”Ÿç¬”è¯•ï¼ˆåŠä¸ªå°æ—¶ï¼‰é¢˜ç›®ï¼šï¼ˆè®°å¾—ä¸€äº›ï¼‰ 1ã€é‡è½½é‡å†™çš„åŒºåˆ«ï¼Ÿ 2ã€è½¬å‘å’Œé‡å®šå‘çš„åŒºåˆ«ï¼Ÿ3ã€ç”»ä¸‹ HashMap çš„ç»“æ„å›¾ï¼ŸHashMap ã€ HashTable å’Œ ConcurrentHashMap çš„åŒºåˆ«ï¼Ÿ 4ã€statement å’Œ preparedstatement åŒºåˆ«ï¼Ÿ 5ã€JSP ä¸­ä¸€ä¸ª ä¸­å–å€¼ä¸ç›´æ¥å–å€¼çš„åŒºåˆ«ï¼Ÿä¼šæœ‰ä»€ä¹ˆå®‰å…¨é—®é¢˜ï¼Ÿ 6ã€å®ç°ä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„å•ä¾‹æ¨¡å¼ 7ã€ä¸€ä¸ªå†™ sql è¯­å¥çš„é¢˜ç›® 8ã€è‡ªå·±å®ç°ä¸€ä¸ª Listï¼Œï¼ˆä¸»è¦å®ç° addç­‰å¸¸ç”¨æ–¹æ³•ï¼‰ 9ã€Spring ä¸­ IOC å’Œ AOP çš„ç†è§£ï¼Ÿ 10ã€ä¸¤ä¸ªå¯¹è±¡çš„ hashcode ç›¸åŒï¼Œæ˜¯å¦å¯¹è±¡ç›¸åŒï¼Ÿequal() ç›¸åŒå‘¢ï¼Ÿ 11ã€@RequestBody å’Œ @ResponseBody åŒºåˆ«ï¼Ÿ 12ã€JVM ä¸€ä¸ªé”™è¯¯ï¼Œä»€ä¹ˆæƒ…å†µä¸‹ä¼šå‘ç”Ÿï¼Ÿ 13ã€å¸¸ç”¨çš„ Linux å‘½ä»¤ï¼Ÿ ç¬¬ä¸€è½®é¢è¯•ï¼ˆ80 åˆ†é’Ÿï¼‰1ã€è‡ªæˆ‘ä»‹ç» 2ã€ä»‹ç»ä½ æœ€ç†Ÿæ‚‰çš„ä¸€ä¸ªé¡¹ç›® 3ã€è®²ä¸‹è¿™ä¸ª XSS æ”»å‡» 4ã€HashMap çš„ç»“æ„ï¼ŸHashMap ã€ HashTable å’Œ ConcurrentHashMap çš„åŒºåˆ«ï¼Ÿ 5ã€HashMap ä¸­æ€ä¹ˆè§£å†³å†²çªçš„ï¼Ÿï¼ˆè¦æˆ‘è¯¦ç»†è®²ä¸‹ï¼‰ 6ã€ConcurrentHashMap å’Œ HashTable ä¸­çº¿ç¨‹å®‰å…¨çš„åŒºåˆ«ï¼Ÿä¸ºå•¥å»ºè®®ç”¨ ConcurrentHashMap ï¼Ÿèƒ½æŠŠ ConcurrentHashMap é‡Œé¢çš„å®ç°è¯¦ç»†çš„è®²ä¸‹å—ï¼Ÿ 7ã€Session å’Œ Cookie çš„åŒºåˆ«ï¼Ÿ 8ã€ä½ é¡¹ç›®ä¸­ç™»å½•æ˜¯æ€æ ·åšçš„ï¼Œç”¨çš„ Cookie å’Œ Sessionï¼Ÿ 9ã€è®²è®²ä½ å¯¹ Spring ä¸­çš„ IOC å’Œ AOP çš„ç†è§£ï¼Ÿ 10ã€é—®äº†å¥½å‡ ä¸ªæ³¨è§£çš„ä½œç”¨ï¼Ÿ 11ã€statement å’Œ preparedstatement åŒºåˆ«ï¼Ÿ 12ã€$ å’Œ # çš„åŒºåˆ«ï¼Ÿä»¥åŠè¿™ä¸¤ä¸ªåœ¨å“ªäº›åœ°æ–¹ç”¨ï¼Ÿ 13ã€å‰é¢é¡¹ç›®ä»‹ç»äº†æ•°æ®æ˜¯çˆ¬è™«çˆ¬å–è¿‡æ¥çš„ï¼Œé‚£ä½ è®²è®²ä½ çš„çˆ¬è™«æ˜¯å¤šçº¿ç¨‹çš„å§ï¼Ÿ 14ã€è®²è®² Python ä¸­çš„å¤šçº¿ç¨‹å’Œ Java ä¸­çš„å¤šçº¿ç¨‹åŒºåˆ«ï¼Ÿ 15ã€è‡ªå·±åˆšå¥½å‰å‡ å¤©åœ¨çœ‹çº¿ç¨‹æ± ï¼Œç«‹é©¬å°±æŠŠé¢è¯•å®˜å¸¦åˆ°æˆ‘ç†Ÿæ‚‰çš„çº¿ç¨‹æ± ï¼Œå’Œé¢è¯•å®˜è®²äº†ä¸‹ JDK è‡ªå¸¦çš„å››ç§çº¿ç¨‹æ± ã€ThreadPoolExecutor ç±»ä¸­çš„æœ€é‡è¦çš„æ„é€ å™¨é‡Œé¢çš„ä¸ƒä¸ªå‚æ•°ï¼Œç„¶åå†è®²äº†ä¸‹çº¿ç¨‹ä»»åŠ¡è¿›å…¥çº¿ç¨‹æ± å’Œæ ¸å¿ƒçº¿ç¨‹æ•°ã€ç¼“å†²é˜Ÿåˆ—ã€æœ€å¤§çº¿ç¨‹æ•°é‡æ¯”è¾ƒã€‚ 16ã€çº¿ç¨‹åŒæ­¥ï¼Œä½ äº†è§£å“ªå‡ ç§æ–¹å¼ï¼Ÿ 17ã€è®²ä¸‹ Synchronizedï¼Ÿ 18ã€è®²ä¸‹ RecentLock å¯é‡å…¥é”ï¼Ÿ ä»€ä¹ˆæ˜¯å¯é‡å…¥é”ï¼Ÿä¸ºä»€ä¹ˆè¦è®¾è®¡å¯é‡å…¥é”ï¼Ÿ 19ã€è®²ä¸‹ Volatile å§ï¼Ÿä»–æ˜¯æ€æ ·åšåˆ°åŒæ­¥çš„ï¼Ÿ 20ã€Volatile ä¸ºä»€ä¹ˆä¸æ”¯æŒåŸå­æ€§ï¼Ÿä¸¾ä¸ªä¾‹å­ 21ã€Atomic æ€ä¹ˆè®¾è®¡çš„ï¼Ÿï¼ˆæ²¡çœ‹è¿‡æºç ï¼Œå½“æ—¶å›ç­”é”™äº†ï¼Œåæ¥æ‰å‘ç°é‡Œé¢å…¨éƒ¨ç”¨ final ä¿®é¥°çš„å±æ€§å’Œæ–¹æ³•ï¼‰ 22ã€é—®å‡ ä¸ªå‰ç«¯çš„æ ‡ç­¾å§ï¼Ÿï¼ˆé—®äº†ä¸€ä¸ªä¸ä¼šï¼Œç›´æ¥è¯´æ˜æˆ‘ååç«¯ï¼Œå‰ç«¯åªæ˜¯äº†è§£ï¼Œåé¢å°±ä¸é—®äº†ï¼‰ 23ã€SpringBoot çš„äº†è§£ï¼Ÿ 24ã€Linux å¸¸ç”¨å‘½ä»¤ï¼Ÿ 25ã€JVM é‡Œçš„å‡ ä¸ªé—®é¢˜ï¼Ÿ 26ã€äº‹åŠ¡çš„ç‰¹æ€§ï¼Ÿ 27ã€éš”ç¦»çº§åˆ«ï¼Ÿ 28ã€ç½‘ç»œçŠ¶æ€ç ï¼Ÿä»¥ 2ã€3ã€4ã€5 å¼€å¤´çš„ä»£è¡¨ä»€ä¹ˆæ„æ€ã€‚ 29ã€å¹¶å‘å’Œå¹¶è¡Œçš„åŒºåˆ«ï¼Ÿ 30ã€ä½ æœ‰ä»€ä¹ˆé—®é¢˜æƒ³é—®æˆ‘çš„ï¼Ÿ ä¸€é¢é¢å®Œåé¢è¯•å®˜å’Œè¯´è¿™ä»½è¯•å·æ˜¯ç”¨æ¥è€ƒ 1~3 å¹´å¼€å‘å·¥ä½œç»éªŒçš„ï¼Œè®©æˆ‘å‡†å¤‡ä¸€ä¸‹ï¼Œæ¥ä¸‹æ¥çš„äºŒé¢ã€‚ ç¬¬äºŒè½®é¢è¯•ï¼ˆåŠä¸ªå°æ—¶ï¼‰1ã€ä¸€ä¸Šæ¥å°±é—®æ€ä¹ˆç®€å†åå­—éƒ½æ²¡æœ‰ï¼Œæˆ‘æŒ‡äº†ç®€å†ç¬¬ä¸€è¡Œçš„æˆ‘çš„åå­—ï¼Œè¿˜ç‰¹æ„å¤§å†™äº†ï¼Œç„¶åå°±é—®å­¦æ ¡æ˜¯ä¸æ˜¯åœ¨ä¸Šæµ·ï¼Œæˆ‘å›ç­”åœ¨å—æ˜Œï¼ˆæ„Ÿè§‰è¢«é„™è§†äº†ä¸€æ³¢ï¼Œåé¢æˆ‘åœ¨å›ç­”é—®é¢˜çš„æ—¶å€™é¢è¯•å®˜å°±ä¸€ç›´åœ¨ç©æ‰‹æœºï¼Œä¼°è®¡åé¢å¯¹æˆ‘çš„å°è±¡å°±ä¸æ˜¯å¾ˆå¥½äº†ï¼‰ 2ã€è‡ªæˆ‘ä»‹ç» 3ã€è¯´ä¸€è¯´æ•°æ®åº“å»ºè¡¨å§ï¼ˆä»èŒƒå¼è®²ï¼‰ 4ã€è®²è®²å¤šæ€ï¼Ÿï¼ˆè¿™ä¸ªæˆ‘ç­”å‡ºæ¥äº†ï¼Œå¯æ˜¯é¢è¯•å®˜ç«Ÿç„¶è¯´ä¸æ˜¯è¿™æ ·å§ï¼Œå¯èƒ½é¢è¯•å®˜æ²¡å¬è¯·ï¼Œåé¢è¿˜è¯´æˆ‘æ˜¯ä¸æ˜¯å¹³æ—¶å†™å¤šæ€æ¯”è¾ƒå°‘ï¼Œæ„Ÿè§‰è¿™ä¸ªä¹Ÿè®©é¢è¯•å®˜å¯¹æˆ‘å°è±¡å‡åˆ†ï¼‰ 5ã€å°†ä¸¤ä¸ªæ•°è½¬æ¢ï¼ˆä¸å€ŸåŠ©ç¬¬ä¸‰ä¸ªå‚æ•°ï¼‰ 6ã€æ‰‹å†™ä¸ªæ’å…¥æ’åºå§ï¼ˆå†™å®Œäº†å’Œé¢è¯•å®˜è®²äº†ä¸‹æ‰§è¡Œæµç¨‹ï¼‰ 7ã€è®²è®²ä½ å¯¹ Spring ä¸­çš„ IOC å’Œ AOP çš„ç†è§£ï¼Ÿ 8ã€é—®äº†å‡ ä¸ªå¸¸ç”¨çš„ Linux å‘½ä»¤ï¼Ÿ 9ã€ä¹Ÿé—®åˆ°å¤šçº¿ç¨‹ï¼Ÿå’Œä¸€é¢ä¸€æ ·æŠŠè‡ªå·±æœ€è¿‘çœ‹çš„çº¿ç¨‹æ± ä¹Ÿè®²äº†ä¸€é 10ã€å­¦ Java å¤šä¹…äº†ï¼Ÿ 11ã€ä½ æœ‰ä»€ä¹ˆæƒ³é—®çš„ï¼Ÿ æ€»ç»“ï¼šé¢è¯•é¢˜ç›®å¤§æ¦‚å°±æ˜¯è¿™ä¹ˆå¤šäº†ï¼Œæœ‰äº›é—®é¢˜è‡ªå·±ä¹Ÿå¿˜è®°äº†ï¼Œé¢è¯•é¢˜ç›®é¡ºåºä¸ä¸€å®šæ˜¯æŒ‰ç…§ä¸Šé¢æ‰€å†™çš„ã€‚å†æ¬¡æ„Ÿè°¢çˆ±å¥‡è‰ºçš„ç¬¬ä¸€é¢é¢è¯•å®˜äº†ï¼Œè¦ä¸æ˜¯ä»–å¸®å¿™å†…æ¨çš„ï¼Œæˆ‘å¯èƒ½è¿˜æ²¡æœ‰æœºä¼šæ”¶åˆ°é¢è¯•æœºä¼šã€‚è‡ªå·±æ¥åˆ°çˆ±å¥‡è‰ºé¢è¯•é‚€è¯·ç”µè¯æ˜¯æ˜ŸæœŸä¸€æ™šä¸Šå¿«7ç‚¹ä¸­çš„ï¼Œä¹‹ååŠ äº†é¢è¯•å®˜å¾®ä¿¡çº¦å¥½äº†æ˜ŸæœŸå››é¢è¯•çš„ï¼ˆæ—¶é—´å‡†å¤‡è¾ƒçŸ­ï¼Œä¹‹å‰æ²¡ç³»ç»Ÿçš„å¤ä¹ è¿‡ï¼‰ã€‚æ˜ŸæœŸå››ä¸€å¤§æ—©ï¼ˆ5ç‚¹å°±èµ·åºŠäº†ï¼‰ï¼Œç„¶åå°±æ”¶æ‹¾äº†ä¸‹ï¼Œå»ç­‰å…¬äº¤è½¦ï¼Œè½¬äº†ä¸¤æ¬¡è½¦ï¼Œç„¶åå†åšåœ°é“å»çˆ±å¥‡è‰ºå…¬å¸çš„ï¼Œæ€»å…±è·¯ä¸ŠèŠ±è´¹æ—¶é—´å››ä¸ªå¤šå°æ—¶ã€‚æ€»çš„æ¥è¯´ï¼Œè¿™æ¬¡é¢è¯•å‡†å¤‡çš„æ—¶é—´ä¸æ˜¯å¾ˆå……è£•ï¼Œæ‰€ä»¥å‡†å¤‡çš„ä¸ªäººè§‰å¾—ä¸æ˜¯å¾ˆå¥½ï¼Œé€šè¿‡è¿™æ¬¡çš„é¢è¯•ï¼Œå‘ç°é¢è¯•è¿˜æ˜¯æ¯”è¾ƒæ³¨é‡åŸºç¡€å’Œæ·±åº¦çš„ï¼Œæˆ‘ä¹ŸçŸ¥é“äº†è‡ªå·±çš„ä¸€äº›å¼±å¤„ï¼Œè¿˜éœ€è¦åœ¨å“ªé‡ŒåŠ å¼ºï¼Œé¢è¯•æŠ€å·§ä¸Šä¹Ÿè¦æŒæ¡äº›ã€‚ä¸ºåé¢çš„å…¶ä»–å…¬å¸ç»§ç»­åšå¥½å……è¶³çš„å‡†å¤‡ã€‚åŠ æ²¹ï¼ï¼ï¼","tags":[{"name":"é¢ç»","slug":"é¢ç»","permalink":"http://yoursite.com/tags/é¢ç»/"}]},{"title":"ç§‹æ‹›ç¬¬ä¸‰ç«™ â€”â€” å†…æ¨é˜¿é‡Œï¼ˆä¸€é¢ï¼‰","date":"2017-08-03T16:00:00.000Z","path":"2017/08/04/alibaba/","text":"3ã€é˜¿é‡Œå·´å·´ï¼ˆèœé¸Ÿç½‘ç»œéƒ¨é—¨ï¼‰ï¼ˆä¸€é¢ 49 åˆ†é’Ÿï¼‰2017.08.02 æ™šä¸Š9ç‚¹21æ‰“ç”µè¯è¿‡æ¥ï¼Œé¢„çº¦æ˜å¤©ä»€ä¹ˆæ—¶å€™æœ‰ç©ºé¢è¯•ï¼Œçº¦å¥½ç¬¬äºŒå¤©ä¸‹åˆä¸¤ç‚¹ã€‚ 2017.08.03 ä¸‹åˆä¸¤ç‚¹10åˆ†æ‰“è¿‡æ¥äº†ã€‚ è¯´çœ‹äº†æˆ‘çš„åšå®¢å’Œ GitHubï¼Œè§‰å¾—æˆ‘å­¦çš„è¿˜è¡Œï¼ŒçŸ¥è¯†å¹¿åº¦éƒ½è¿˜ä¸é”™ï¼Œä½†æ˜¯è¿˜æ˜¯è¦é—®é—®å…·ä½“æƒ…å†µï¼Œä¸ºä»€ä¹ˆæ²¡çœ‹åˆ°ä½ æ˜¥æ‹›çš„è®°å½•ï¼Œä»€ä¹ˆåŸå› æ²¡æŠ•é˜¿é‡Œï¼Ÿéå¾—è¯´ä¸€ä¸ªåŸå› ï¼Œé‚£å°±æ˜¯ï¼šæˆ‘è‡ªå·±å¤ªèœäº†ï¼Œä¸æ•¢æŠ•ã€‚1ã€å…ˆè‡ªæˆ‘ä»‹ç» 2ã€ä»€ä¹ˆæ˜¯å¤šæ€ï¼Ÿå“ªé‡Œä½“ç°äº†å¤šæ€çš„æ¦‚å¿µï¼Ÿ 3ã€HashMap æºç åˆ†æï¼ŒæŠŠé‡Œé¢çš„ä¸œè¥¿é—®äº†ä¸ªéï¼Ÿæœ€åé—®æ˜¯ä¸æ˜¯çº¿ç¨‹å®‰å…¨ï¼Ÿå¼•å‡º ConcurrentHashMap 4ã€ConcurrentHashMap æºç åˆ†æ 5ã€ç±»åŠ è½½ï¼ŒåŒäº²å§”æ‰˜æœºåˆ¶ 6ã€Javaå†…å­˜æ¨¡å‹ï¼ˆä¸€å¼€å§‹è¯´çš„ä¸æ˜¯ä»–æƒ³è¦çš„ï¼Œä¸»è¦æƒ³é—®æˆ‘å †å’Œæ ˆçš„ç»†èŠ‚ï¼‰ 7ã€åƒåœ¾å›æ”¶ç®—æ³• 8ã€çº¿ç¨‹æ± ï¼Œè‡ªå·±ä¹‹å‰çœ‹è¿‡ï¼Œæ‰€ä»¥è¯´çš„æ¯”è¾ƒå¤šï¼Œæœ€åé¢è¯•å®˜è¯´äº†å¥ï¼šçœ‹ä½ å¯¹çº¿ç¨‹æ± äº†è§£è¿˜æ˜¯å¾ˆæ·±äº† 9ã€äº‹åŠ¡çš„å››ç§ç‰¹æ€§ 10ã€ä»€ä¹ˆæ˜¯æ­»é”ï¼Ÿ 11ã€ä¹è§‚é”å’Œæ‚²è§‚é”çš„ç­–ç•¥ 12ã€é«˜å¯ç”¨ç½‘ç«™çš„è®¾è®¡ï¼ˆæœ‰ä»€ä¹ˆæŠ€æœ¯å®ç°ï¼‰ 13ã€ä½è€¦åˆé«˜å†…èš 14ã€è®¾è®¡æ¨¡å¼äº†è§£ä¸ï¼Ÿä½ ç”¨è¿‡å“ªå‡ ç§ï¼Œä¸ºä»€ä¹ˆç”¨ï¼Œå•ä¾‹æ¨¡å¼å¸®æˆ‘ä»¬åšä»€ä¹ˆä¸œè¥¿ï¼Ÿæœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ 15ã€ä½ å‚ä¸ä»€ä¹ˆé¡¹ç›®ä¸­æˆé•¿æ¯”è¾ƒå¿«ï¼Ÿå­¦åˆ°äº†ä»€ä¹ˆä¸œè¥¿ï¼Œä»¥å‰æ˜¯æ²¡æœ‰å­¦è¿‡çš„ï¼Ÿ 16ã€é¡¹ç›®ä¸­é‡åˆ°çš„æœ€å¤§å›°éš¾æ˜¯æ€æ ·çš„ï¼Ÿæ˜¯æ€ä¹ˆè§£å†³çš„ï¼Ÿ 17ã€æ™ºåŠ›é¢˜ï¼ˆä¸¤æ ¹ä¸å‡åŒ€çš„é¦™ï¼Œç‚¹ä¸€å¤´çƒ§å®Œè¦ä¸€ä¸ªå°æ—¶ï¼Œæ€ä¹ˆç¡®å®š15åˆ†é’Ÿï¼‰ 18ã€ä½ æœ‰ä»€ä¹ˆé—®é¢˜æƒ³è¦é—®æˆ‘çš„ï¼Ÿ 19ã€é—®äº†èœé¸Ÿç½‘ç»œä»–ä»¬éƒ¨é—¨ä¸»è¦åšä»€ä¹ˆï¼Ÿ 20ã€å¯¹æˆ‘è¿™æ¬¡é¢è¯•åšä¸ªè¯„ä»·ï¼šçœ‹äº†ä½ åšå®¢å’Œ GitHubï¼ŒçŸ¥é“ä½ å¯¹å­¦ä¹ çš„çƒ­æƒ…è¿˜æ˜¯å¾ˆé«˜çš„ï¼ŒèŠ±äº†ä¸å°‘åŠŸå¤«ï¼Œä½†æ˜¯æœ‰äº›ä¸œè¥¿è¿˜æ˜¯éœ€è¦åŠ å¼ºæ·±åº¦ï¼Œé˜¿é‡Œéœ€è¦é‚£ç§å¯¹æŠ€æœ¯æœ‰æ·±åº¦ï¼Œæœ‰è‡ªå·±ç‹¬åˆ°è§è§£çš„äººæ‰ã€‚æ„æ€å°±æ˜¯ GG äº†ã€‚ æ€»ç»“ï¼šé¢è¯•æ€»çš„æ¥è¯´ï¼Œç¬¬ä¸€æ¬¡ç”µè¯é¢è¯•ï¼Œæ„Ÿè§‰å¥½ç´§å¼ ï¼Œå¥½å¤šé—®é¢˜è‡ªå·±ä¼šç‚¹ï¼Œä½†æ˜¯å…¶ä¸­çš„ç»†èŠ‚æ²¡å¼„æ¸…æ¥šï¼Œè‡ªå·±å‡†å¤‡çš„ä¹Ÿä¸å¤Ÿå……åˆ†ã€‚é¢è¯•å®˜å¾ˆå‹å¥½ï¼Œçœ‹åˆ°æˆ‘ç´§å¼ ï¼Œä¹Ÿå®‰æ…°æˆ‘è¯´ä¸è¦ç´§ï¼Œä¸ç®¡ä»¥åå‡ºå»é¢è¯•å•¥çš„ï¼Œä¸éœ€è¦ç´§å¼ ï¼Œå…¬å¸é—®çš„é—®é¢˜å¯èƒ½å¾ˆå¹¿ï¼Œä½ åªéœ€è¦æŠŠä½ çŸ¥é“çš„è¯´å‡ºæ¥å°±è¡Œï¼Œä¸ä¼šçš„ç›´æ¥è¯´ä¸ä¼šå°±è¡Œã€‚ä¹‹å‰ä¸€ç›´ä¸æ•¢æŠ•é˜¿é‡Œï¼Œå› ä¸ºè‡ªå·±å‡†å¤‡çš„å®Œå…¨ä¸å¤Ÿå……åˆ†ï¼Œä½†æ˜¯åœ¨æœ‹å‹ç£Šå“¥çš„å¸®åŠ©ä¸‹ï¼Œè¿˜æ˜¯è¯•äº†ä¸‹ï¼Œä¸ç®¡ç»“æœæ€ä¹ˆæ ·ï¼Œç»å†è¿‡æ€»æ¯”æ²¡æœ‰çš„å¥½ã€‚","tags":[{"name":"é¢ç»","slug":"é¢ç»","permalink":"http://yoursite.com/tags/é¢ç»/"}]},{"title":"Java çº¿ç¨‹æ± è‰ºæœ¯æ¢ç´¢","date":"2017-07-28T16:00:00.000Z","path":"2017/07/29/ThreadPool/","text":"çº¿ç¨‹æ± Wiki ä¸Šæ˜¯è¿™æ ·è§£é‡Šçš„ï¼šThread Pool ä½œç”¨ï¼šåˆ©ç”¨çº¿ç¨‹æ± å¯ä»¥å¤§å¤§å‡å°‘åœ¨åˆ›å»ºå’Œé”€æ¯çº¿ç¨‹ä¸Šæ‰€èŠ±çš„æ—¶é—´ä»¥åŠç³»ç»Ÿèµ„æºçš„å¼€é”€ï¼ ä¸‹é¢ä¸»è¦è®²ä¸‹çº¿ç¨‹æ± ä¸­æœ€é‡è¦çš„ä¸€ä¸ªç±» ThreadPoolExecutor ã€‚ ThreadPoolExecutor ThreadPoolExecutor æ„é€ å™¨ï¼š æœ‰å››ä¸ªæ„é€ å™¨çš„ï¼ŒæŒ‘äº†å‚æ•°æœ€é•¿çš„ä¸€ä¸ªè¿›è¡Œè®²è§£ã€‚ ä¸ƒä¸ªå‚æ•°ï¼š corePoolSizeï¼šæ ¸å¿ƒæ± çš„å¤§å°ï¼Œåœ¨åˆ›å»ºäº†çº¿ç¨‹æ± åï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œçº¿ç¨‹æ± ä¸­å¹¶æ²¡æœ‰ä»»ä½•çº¿ç¨‹ï¼Œè€Œæ˜¯ç­‰å¾…æœ‰ä»»åŠ¡åˆ°æ¥æ‰åˆ›å»ºçº¿ç¨‹å»æ‰§è¡Œä»»åŠ¡ï¼Œå½“æœ‰ä»»åŠ¡æ¥ä¹‹åï¼Œå°±ä¼šåˆ›å»ºä¸€ä¸ªçº¿ç¨‹å»æ‰§è¡Œä»»åŠ¡ï¼Œå½“çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ•°ç›®è¾¾åˆ°corePoolSizeåï¼Œå°±ä¼šæŠŠåˆ°è¾¾çš„ä»»åŠ¡æ”¾åˆ°ç¼“å­˜é˜Ÿåˆ—å½“ä¸­ï¼› maximumPoolSizeï¼šçº¿ç¨‹æ± æœ€å¤§çº¿ç¨‹æ•°ï¼› keepAliveTimeï¼šè¡¨ç¤ºçº¿ç¨‹æ²¡æœ‰ä»»åŠ¡æ‰§è¡Œæ—¶æœ€å¤šä¿æŒå¤šä¹…æ—¶é—´ä¼šç»ˆæ­¢ï¼› unitï¼šå‚æ•°keepAliveTimeçš„æ—¶é—´å•ä½ï¼ˆDAYSã€HOURSã€MINUTESã€SECONDS ç­‰ï¼‰ï¼› workQueueï¼šé˜»å¡é˜Ÿåˆ—ï¼Œç”¨æ¥å­˜å‚¨ç­‰å¾…æ‰§è¡Œçš„ä»»åŠ¡ï¼› ArrayBlockingQueue ï¼ˆæœ‰ç•Œé˜Ÿåˆ—ï¼‰ LinkedBlockingQueue ï¼ˆæ— ç•Œé˜Ÿåˆ—ï¼‰ SynchronousQueue threadFactoryï¼šçº¿ç¨‹å·¥å‚ï¼Œä¸»è¦ç”¨æ¥åˆ›å»ºçº¿ç¨‹ handlerï¼šæ‹’ç»å¤„ç†ä»»åŠ¡çš„ç­–ç•¥ AbortPolicyï¼šä¸¢å¼ƒä»»åŠ¡å¹¶æŠ›å‡º RejectedExecutionException å¼‚å¸¸ã€‚ï¼ˆé»˜è®¤è¿™ç§ï¼‰ DiscardPolicyï¼šä¹Ÿæ˜¯ä¸¢å¼ƒä»»åŠ¡ï¼Œä½†æ˜¯ä¸æŠ›å‡ºå¼‚å¸¸ DiscardOldestPolicyï¼šä¸¢å¼ƒé˜Ÿåˆ—æœ€å‰é¢çš„ä»»åŠ¡ï¼Œç„¶åé‡æ–°å°è¯•æ‰§è¡Œä»»åŠ¡ï¼ˆé‡å¤æ­¤è¿‡ç¨‹ï¼‰ CallerRunsPolicyï¼šç”±è°ƒç”¨çº¿ç¨‹å¤„ç†è¯¥ä»»åŠ¡ é‡è¦æ–¹æ³•ï¼š execute()ï¼šé€šè¿‡è¿™ä¸ªæ–¹æ³•å¯ä»¥å‘çº¿ç¨‹æ± æäº¤ä¸€ä¸ªä»»åŠ¡ï¼Œäº¤ç”±çº¿ç¨‹æ± å»æ‰§è¡Œï¼› shutdown()ï¼šå…³é—­çº¿ç¨‹æ± ï¼› execute() æ–¹æ³•ï¼š æ³¨ï¼šJDK 1.7 å’Œ 1.8 è¿™ä¸ªæ–¹æ³•æœ‰ç‚¹åŒºåˆ«ï¼Œä¸‹é¢ä»£ç æ˜¯ 1.8 ä¸­çš„ã€‚ 1234567891011121314151617181920212223public void execute(Runnable command) &#123; if (command == null) throw new NullPointerException(); int c = ctl.get(); //1ã€å¦‚æœå½“å‰çš„çº¿ç¨‹æ•°å°äºæ ¸å¿ƒçº¿ç¨‹æ± çš„å¤§å°ï¼Œæ ¹æ®ç°æœ‰çš„çº¿ç¨‹ä½œä¸ºç¬¬ä¸€ä¸ª Worker è¿è¡Œçš„çº¿ç¨‹ï¼Œæ–°å»ºä¸€ä¸ª Workerï¼ŒaddWorker è‡ªåŠ¨çš„æ£€æŸ¥å½“å‰çº¿ç¨‹æ± çš„çŠ¶æ€å’Œ Worker çš„æ•°é‡ï¼Œé˜²æ­¢çº¿ç¨‹æ± åœ¨ä¸èƒ½æ·»åŠ çº¿ç¨‹çš„çŠ¶æ€ä¸‹æ·»åŠ çº¿ç¨‹ if (workerCountOf(c) &lt; corePoolSize) &#123; if (addWorker(command, true)) return; c = ctl.get(); &#125; //2ã€å¦‚æœçº¿ç¨‹å…¥é˜ŸæˆåŠŸï¼Œç„¶åè¿˜æ˜¯è¦è¿›è¡Œ double-check çš„ï¼Œå› ä¸ºçº¿ç¨‹åœ¨å…¥é˜Ÿä¹‹åçŠ¶æ€æ˜¯å¯èƒ½ä¼šå‘ç”Ÿå˜åŒ–çš„ if (isRunning(c) &amp;&amp; workQueue.offer(command)) &#123; int recheck = ctl.get(); // recheck é˜²æ­¢çº¿ç¨‹æ± çŠ¶æ€çš„çªå˜ï¼Œå¦‚æœçªå˜ï¼Œé‚£ä¹ˆå°† reject çº¿ç¨‹ï¼Œé˜²æ­¢ workQueue ä¸­å¢åŠ æ–°çº¿ç¨‹ if (! isRunning(recheck) &amp;&amp; remove(command)) reject(command); else if (workerCountOf(recheck) == 0)//ä¸Šä¸‹ä¸¤ä¸ªæ“ä½œéƒ½æœ‰ addWorker çš„æ“ä½œï¼Œä½†æ˜¯å¦‚æœåœ¨workQueue.offer çš„æ—¶å€™ Worker å˜ä¸º 0ï¼Œé‚£ä¹ˆå°†æ²¡æœ‰ Worker æ‰§è¡Œæ–°çš„ taskï¼Œæ‰€ä»¥å¢åŠ ä¸€ä¸ª Worker. addWorker(null, false); &#125; //3ã€å¦‚æœ task ä¸èƒ½å…¥é˜Ÿ(é˜Ÿåˆ—æ»¡äº†)ï¼Œè¿™æ—¶å€™å°è¯•å¢åŠ ä¸€ä¸ªæ–°çº¿ç¨‹ï¼Œå¦‚æœå¢åŠ å¤±è´¥é‚£ä¹ˆå½“å‰çš„çº¿ç¨‹æ± çŠ¶æ€å˜åŒ–äº†æˆ–è€…çº¿ç¨‹æ± å·²ç»æ»¡äº†ç„¶åæ‹’ç»task else if (!addWorker(command, false)) reject(command); &#125; å…¶ä¸­è°ƒç”¨äº† addWorker() æ–¹æ³•ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768private boolean addWorker(Runnable firstTask, boolean core) &#123;// firstTask: æ–°å¢ä¸€ä¸ªçº¿ç¨‹å¹¶æ‰§è¡Œè¿™ä¸ªä»»åŠ¡ï¼Œå¯ç©ºï¼Œå¢åŠ çš„çº¿ç¨‹ä»é˜Ÿåˆ—è·å–ä»»åŠ¡ï¼›coreï¼šæ˜¯å¦ä½¿ç”¨ corePoolSize ä½œä¸ºä¸Šé™ï¼Œå¦åˆ™ä½¿ç”¨ maxmunPoolSize retry: for (;;) &#123; int c = ctl.get(); int rs = runStateOf(c); // Check if queue empty only if necessary. /** * rs!=Shutdown || fistTaskï¼=null || workQueue.isEmpty * å¦‚æœå½“å‰çš„çº¿ç¨‹æ± çš„çŠ¶æ€ &gt; SHUTDOWN é‚£ä¹ˆæ‹’ç» Worker çš„ add å¦‚æœ =SHUTDOWN * é‚£ä¹ˆæ­¤æ—¶ä¸èƒ½æ–°åŠ å…¥ä¸ä¸º null çš„ Taskï¼Œå¦‚æœåœ¨ workQueue ä¸º empty çš„æ—¶å€™ä¸èƒ½åŠ å…¥ä»»ä½•ç±»å‹çš„ Workerï¼Œ * å¦‚æœä¸ä¸º empty å¯ä»¥åŠ å…¥ task ä¸º null çš„ Worker, å¢åŠ æ¶ˆè´¹çš„ Worker */ if (rs &gt;= SHUTDOWN &amp;&amp; ! (rs == SHUTDOWN &amp;&amp; firstTask == null &amp;&amp;! workQueue.isEmpty())) return false; for (;;) &#123; int wc = workerCountOf(c); //å¦‚æœå½“å‰çš„æ•°é‡è¶…è¿‡äº† CAPACITYï¼Œæˆ–è€…è¶…è¿‡äº† corePoolSize å’Œ maximumPoolSizeï¼ˆè¯• core è€Œå®šï¼‰ if (wc &gt;= CAPACITY || wc &gt;= (core ? corePoolSize : maximumPoolSize)) return false; //CAS å°è¯•å¢åŠ çº¿ç¨‹æ•°ï¼Œå¦‚æœå¤±è´¥ï¼Œè¯æ˜æœ‰ç«äº‰ï¼Œé‚£ä¹ˆé‡æ–°åˆ° retryã€‚ if (compareAndIncrementWorkerCount(c))// AtomicInteger çš„ CAS æ“ä½œ; break retry; c = ctl.get(); // Re-read ctl //åˆ¤æ–­å½“å‰çº¿ç¨‹æ± çš„è¿è¡ŒçŠ¶æ€,çŠ¶æ€å‘ç”Ÿæ”¹å˜ï¼Œé‡è¯• retry; if (runStateOf(c) != rs) continue retry; // else CAS failed due to workerCount change; retry inner loop &#125; &#125; boolean workerStarted = false; boolean workerAdded = false; Worker w = null; try &#123; w = new Worker(firstTask);// Worker ä¸ºå†…éƒ¨ç±»ï¼Œå°è£…äº†çº¿ç¨‹å’Œä»»åŠ¡ï¼Œé€šè¿‡ ThreadFactory åˆ›å»ºçº¿ç¨‹ï¼Œå¯èƒ½å¤±è´¥æŠ›å¼‚å¸¸æˆ–è€…è¿”å› null final Thread t = w.thread; if (t != null) &#123; final ReentrantLock mainLock = this.mainLock; mainLock.lock(); try &#123; // Recheck while holding lock. // Back out on ThreadFactory failure or if // shut down before lock acquired. int rs = runStateOf(ctl.get()); if (rs &lt; SHUTDOWN || (rs == SHUTDOWN &amp;&amp; firstTask == null)) &#123; if (t.isAlive()) // precheck that t is startable // SHUTDOWN ä»¥åçš„çŠ¶æ€å’Œ SHUTDOWN çŠ¶æ€ä¸‹ firstTask ä¸º nullï¼Œä¸å¯æ–°å¢çº¿ç¨‹ throw new IllegalThreadStateException(); workers.add(w); int s = workers.size(); if (s &gt; largestPoolSize) largestPoolSize = s;//è®°å½•æœ€å¤§çº¿ç¨‹æ•° workerAdded = true; &#125; &#125; finally &#123; mainLock.unlock(); &#125; if (workerAdded) &#123; t.start(); workerStarted = true; &#125; &#125; &#125; finally &#123; if (! workerStarted) addWorkerFailed(w);//å¤±è´¥å›é€€,ä» wokers ç§»é™¤ w, çº¿ç¨‹æ•°å‡ä¸€ï¼Œå°è¯•ç»“æŸçº¿ç¨‹æ± (è°ƒç”¨tryTerminate æ–¹æ³•) &#125; return workerStarted; &#125; ç¤ºæ„å›¾ï¼š æ‰§è¡Œæµç¨‹ï¼š 1ã€å½“æœ‰ä»»åŠ¡è¿›å…¥æ—¶ï¼Œçº¿ç¨‹æ± åˆ›å»ºçº¿ç¨‹å»æ‰§è¡Œä»»åŠ¡ï¼Œç›´åˆ°æ ¸å¿ƒçº¿ç¨‹æ•°æ»¡ä¸ºæ­¢ 2ã€æ ¸å¿ƒçº¿ç¨‹æ•°é‡æ»¡äº†ä¹‹åï¼Œä»»åŠ¡å°±ä¼šè¿›å…¥ä¸€ä¸ªç¼“å†²çš„ä»»åŠ¡é˜Ÿåˆ—ä¸­ å½“ä»»åŠ¡é˜Ÿåˆ—ä¸ºæ— ç•Œé˜Ÿåˆ—æ—¶ï¼Œä»»åŠ¡å°±ä¼šä¸€ç›´æ”¾å…¥ç¼“å†²çš„ä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼Œä¸ä¼šå’Œæœ€å¤§çº¿ç¨‹æ•°é‡è¿›è¡Œæ¯”è¾ƒ å½“ä»»åŠ¡é˜Ÿåˆ—ä¸ºæœ‰ç•Œé˜Ÿåˆ—æ—¶ï¼Œä»»åŠ¡å…ˆæ”¾å…¥ç¼“å†²çš„ä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼Œå½“ä»»åŠ¡é˜Ÿåˆ—æ»¡äº†ä¹‹åï¼Œæ‰ä¼šå°†ä»»åŠ¡æ”¾å…¥çº¿ç¨‹æ± ï¼Œæ­¤æ—¶ä¼šä¸çº¿ç¨‹æ± ä¸­æœ€å¤§çš„çº¿ç¨‹æ•°é‡è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœè¶…å‡ºäº†ï¼Œåˆ™é»˜è®¤ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚ç„¶åçº¿ç¨‹æ± æ‰ä¼šæ‰§è¡Œä»»åŠ¡ï¼Œå½“ä»»åŠ¡æ‰§è¡Œå®Œï¼Œåˆä¼šå°†ç¼“å†²é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡æ”¾å…¥çº¿ç¨‹æ± ä¸­ï¼Œç„¶åé‡å¤æ­¤æ“ä½œã€‚ shutdown() æ–¹æ³•ï¼š 1234567891011121314151617public void shutdown() &#123; final ReentrantLock mainLock = this.mainLock; mainLock.lock(); try &#123; //åˆ¤æ–­æ˜¯å¦å¯ä»¥æ“ä½œç›®æ ‡çº¿ç¨‹ checkShutdownAccess(); //è®¾ç½®çº¿ç¨‹æ± çŠ¶æ€ä¸º SHUTDOWN, æ­¤å¤„ä¹‹åï¼Œçº¿ç¨‹æ± ä¸­ä¸ä¼šå¢åŠ æ–° Task advanceRunState(SHUTDOWN); //ä¸­æ–­æ‰€æœ‰çš„ç©ºé—²çº¿ç¨‹ interruptIdleWorkers(); onShutdown(); // hook for ScheduledThreadPoolExecutor &#125; finally &#123; mainLock.unlock(); &#125; //è½¬åˆ° Terminate tryTerminate(); &#125; å‚è€ƒèµ„æ–™ï¼šæ·±å…¥ç†è§£javaçº¿ç¨‹æ± â€”ThreadPoolExecutor JDK è‡ªå¸¦å››ç§çº¿ç¨‹æ± åˆ†æä¸æ¯”è¾ƒ 1ã€newFixedThreadPoolåˆ›å»ºä¸€ä¸ªå®šé•¿çº¿ç¨‹æ± ï¼Œå¯æ§åˆ¶çº¿ç¨‹æœ€å¤§å¹¶å‘æ•°ï¼Œè¶…å‡ºçš„çº¿ç¨‹ä¼šåœ¨é˜Ÿåˆ—ä¸­ç­‰å¾…ã€‚ 2ã€newSingleThreadExecutoråˆ›å»ºä¸€ä¸ªå•çº¿ç¨‹åŒ–çš„çº¿ç¨‹æ± ï¼Œå®ƒåªä¼šç”¨å”¯ä¸€çš„å·¥ä½œçº¿ç¨‹æ¥æ‰§è¡Œä»»åŠ¡ï¼Œä¿è¯æ‰€æœ‰ä»»åŠ¡æŒ‰ç…§æŒ‡å®šé¡ºåº(FIFO, LIFO, ä¼˜å…ˆçº§)æ‰§è¡Œã€‚ 3ã€newCachedThreadPoolåˆ›å»ºä¸€ä¸ªå¯ç¼“å­˜çº¿ç¨‹æ± ï¼Œå¦‚æœçº¿ç¨‹æ± é•¿åº¦è¶…è¿‡å¤„ç†éœ€è¦ï¼Œå¯çµæ´»å›æ”¶ç©ºé—²çº¿ç¨‹ï¼Œè‹¥æ— å¯å›æ”¶ï¼Œåˆ™æ–°å»ºçº¿ç¨‹ã€‚ 4ã€newScheduledThreadPoolåˆ›å»ºä¸€ä¸ªå®šé•¿çº¿ç¨‹æ± ï¼Œæ”¯æŒå®šæ—¶åŠå‘¨æœŸæ€§ä»»åŠ¡æ‰§è¡Œã€‚ å››ç§çº¿ç¨‹æ± å…¶å®å†…éƒ¨æ–¹æ³•éƒ½æ˜¯è°ƒç”¨çš„ ThreadPoolExecutor ç±»ï¼Œåªä¸è¿‡åˆ©ç”¨äº†å…¶ä¸åŒçš„æ„é€ å™¨æ–¹æ³•è€Œå·²ï¼ˆä¼ å…¥è‡ªå·±éœ€è¦ä¼ å…¥çš„å‚æ•°ï¼‰ï¼Œé‚£ä¹ˆåˆ©ç”¨è¿™ä¸ªç‰¹æ€§ï¼Œæˆ‘ä»¬è‡ªå·±ä¹Ÿæ˜¯å¯ä»¥å®ç°è‡ªå·±å®šä¹‰çš„çº¿ç¨‹æ± çš„ã€‚ è‡ªå®šä¹‰çº¿ç¨‹æ± 1ã€åˆ›å»ºä»»åŠ¡ç±» 12345678910111213141516171819202122232425262728293031323334353637package com.zhisheng.thread.threadpool.demo;/** * Created by 10412 on 2017/7/24. * ä»»åŠ¡ */public class MyTask implements Runnable&#123; private int taskId; //ä»»åŠ¡ id private String taskName; //ä»»åŠ¡åå­— public int getTaskId() &#123; return taskId; &#125; public void setTaskId(int taskId) &#123; this.taskId = taskId; &#125; public String getTaskName() &#123; return taskName; &#125; public void setTaskName(String taskName) &#123; this.taskName = taskName; &#125; public MyTask(int taskId, String taskName) &#123; this.taskId = taskId; this.taskName = taskName; &#125; @Override public void run() &#123; System.out.println(\"å½“å‰æ­£åœ¨æ‰§è¡Œ ****** çº¿ç¨‹Id--&gt;\" + taskId + \",ä»»åŠ¡åç§°--&gt;\" + taskName); try &#123; Thread.currentThread().sleep(5 * 1000); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; System.out.println(\"çº¿ç¨‹Id--&gt;\" + taskId + \",ä»»åŠ¡åç§°--&gt;\" + taskName + \" ----------- æ‰§è¡Œå®Œæ¯•ï¼\"); &#125;&#125; 2ã€è‡ªå®šä¹‰æ‹’ç»ç­–ç•¥ï¼Œå®ç° RejectedExecutionHandler æ¥å£ï¼Œé‡å†™ rejectedExecution æ–¹æ³• 12345678910111213141516package com.zhisheng.thread.threadpool.demo;import java.util.concurrent.RejectedExecutionHandler;import java.util.concurrent.ThreadPoolExecutor;/** * Created by 10412 on 2017/7/24. * è‡ªå®šä¹‰æ‹’ç»ç­–ç•¥ï¼Œå®ç° RejectedExecutionHandler æ¥å£ */public class RejectedThreadPoolHandler implements RejectedExecutionHandler&#123; public RejectedThreadPoolHandler() &#123; &#125; @Override public void rejectedExecution(Runnable r, ThreadPoolExecutor executor) &#123; System.out.println(\"WARNING è‡ªå®šä¹‰æ‹’ç»ç­–ç•¥: Task \" + r.toString() + \" rejected from \" + executor.toString()); &#125;&#125; 3ã€åˆ›å»ºçº¿ç¨‹æ±  1234567891011121314151617181920212223242526272829303132package com.zhisheng.thread.threadpool.demo;import java.util.concurrent.ArrayBlockingQueue;import java.util.concurrent.ThreadPoolExecutor;import java.util.concurrent.TimeUnit;/** * Created by 10412 on 2017/7/24. */public class ThreadPool&#123; public static void main(String[] args) &#123; //æ ¸å¿ƒçº¿ç¨‹æ•°é‡ä¸º 2ï¼Œæœ€å¤§çº¿ç¨‹æ•°é‡ 4ï¼Œç©ºé—²çº¿ç¨‹å­˜æ´»çš„æ—¶é—´ 60sï¼Œæœ‰ç•Œé˜Ÿåˆ—é•¿åº¦ä¸º 3, //ThreadPoolExecutor pool = new ThreadPoolExecutor(2, 4, 60, TimeUnit.SECONDS, new ArrayBlockingQueue&lt;&gt;(3)); //æ ¸å¿ƒçº¿ç¨‹æ•°é‡ä¸º 2ï¼Œæœ€å¤§çº¿ç¨‹æ•°é‡ 4ï¼Œç©ºé—²çº¿ç¨‹å­˜æ´»çš„æ—¶é—´ 60sï¼Œ æ— ç•Œé˜Ÿåˆ—, //ThreadPoolExecutor pool = new ThreadPoolExecutor(2, 4, 60L, TimeUnit.SECONDS, new LinkedBlockingDeque&lt;&gt;()); //æ ¸å¿ƒçº¿ç¨‹æ•°é‡ä¸º 2ï¼Œæœ€å¤§çº¿ç¨‹æ•°é‡ 4ï¼Œç©ºé—²çº¿ç¨‹å­˜æ´»çš„æ—¶é—´ 60sï¼Œæœ‰ç•Œé˜Ÿåˆ—é•¿åº¦ä¸º 3, ä½¿ç”¨è‡ªå®šä¹‰æ‹’ç»ç­–ç•¥ ThreadPoolExecutor pool = new ThreadPoolExecutor(2, 4, 60, TimeUnit.SECONDS, new ArrayBlockingQueue&lt;Runnable&gt;(3), new RejectedThreadPoolHandler()); for (int i = 1; i &lt;= 10; i++) &#123; //åˆ›å»º 10 ä¸ªä»»åŠ¡ MyTask task = new MyTask(i, \"ä»»åŠ¡\" + i); //è¿è¡Œ pool.execute(task); System.out.println(\"æ´»è·ƒçš„çº¿ç¨‹æ•°ï¼š\"+pool.getActiveCount() + \",æ ¸å¿ƒçº¿ç¨‹æ•°ï¼š\" + pool.getCorePoolSize() + \",çº¿ç¨‹æ± å¤§å°ï¼š\" + pool.getPoolSize() + \",é˜Ÿåˆ—çš„å¤§å°\" + pool.getQueue().size()); &#125; //å…³é—­çº¿ç¨‹æ±  pool.shutdown(); &#125;&#125; è¿™é‡Œè¿è¡Œç»“æœå°±ä¸æˆªå›¾äº†ï¼Œæˆ‘åœ¨æœ¬åœ°æµ‹è¯•äº†ä»£ç æ˜¯æ²¡é—®é¢˜çš„ï¼Œæ„Ÿå…´è¶£çš„å»ºè®®è¿˜æ˜¯è‡ªå·±è·‘ä¸€ä¸‹ï¼Œç„¶ååˆ†æä¸‹ç»“æœæ˜¯ä¸æ˜¯å’Œå‰é¢åˆ†æçš„ä¸€æ ·ï¼Œå¦‚æœ‰é—®é¢˜ï¼Œè¯·åœ¨æˆ‘åšå®¢ä¸‹é¢è¯„è®ºï¼ æ€»ç»“æœ¬æ–‡ä¸€å¼€å§‹è®²äº†çº¿ç¨‹æ± çš„ä»‹ç»å’Œå¥½å¤„ï¼Œç„¶ååˆ†æäº†çº¿ç¨‹æ± ä¸­æœ€æ ¸å¿ƒçš„ ThreadPoolExecutor ç±»ä¸­æ„é€ å™¨çš„ä¸ƒä¸ªå‚æ•°çš„ä½œç”¨ã€ç±»ä¸­ä¸¤ä¸ªé‡è¦çš„æ–¹æ³•ï¼Œç„¶ååœ¨å¯¹æ¯”ç ”ç©¶äº†ä¸‹ JDK ä¸­è‡ªå¸¦çš„å››ç§çº¿ç¨‹æ± çš„ç”¨æ³•å’Œå†…éƒ¨ä»£ç ç»†èŠ‚ï¼Œæœ€åå†™äº†ä¸€ä¸ªè‡ªå®šä¹‰çš„çº¿ç¨‹æ± ã€‚","tags":[{"name":"Java","slug":"Java","permalink":"http://yoursite.com/tags/Java/"},{"name":"å¤šçº¿ç¨‹","slug":"å¤šçº¿ç¨‹","permalink":"http://yoursite.com/tags/å¤šçº¿ç¨‹/"},{"name":"çº¿ç¨‹æ± ","slug":"çº¿ç¨‹æ± ","permalink":"http://yoursite.com/tags/çº¿ç¨‹æ± /"}]},{"title":"Java æ€§èƒ½è°ƒä¼˜éœ€è¦æ ¼å¤–æ³¨æ„çš„ç»†èŠ‚","date":"2017-07-24T16:00:00.000Z","path":"2017/07/25/Java-performance-tuning/","text":"æ˜¨å¤©å†™äº†ç¯‡æ–‡ç«  ã€ŠMySQL å¤„ç†æµ·é‡æ•°æ®æ—¶çš„ä¸€äº›ä¼˜åŒ–æŸ¥è¯¢é€Ÿåº¦æ–¹æ³•ã€‹ ï¼Œå…¶å®å¼€å‘ä¸­ä¸æ­¢æ•°æ®åº“è¦ä¼˜åŒ–ï¼Œè¿˜æœ‰æˆ‘ä»¬æœ¬èº«çš„å¼€å‘ä»£ç ä¹Ÿéœ€è¦ä¼˜åŒ–ï¼Œè¿™æ ·æˆ‘ä»¬å¼€å‘çš„äº§å“æ‰èƒ½å¤Ÿå¾—åˆ°æè‡´çš„ä½“éªŒã€‚ä¹Ÿè®¸æœ‰äº›äººè®¤ä¸ºè¿™äº›ç»†å°çš„åœ°æ–¹æ²¡æœ‰å•¥å¥½ä¿®æ”¹çš„ï¼Œæ”¹ä¸ä¸æ”¹å¯¹è¿è¡Œæ•ˆç‡æ²¡å•¥å¤§çš„å½±å“ï¼Ÿé¦–å…ˆåœ¨æˆ‘ä»¬æœ¬åœ°ä¸€ä¸ªäººæµ‹è¯•ä¸‹æ•ˆç‡æ˜¯ä¸æ€ä¹ˆæ˜æ˜¾ï¼Œä½†æ˜¯å¦‚æœåˆ°å‘å¸ƒä¸Šçº¿åï¼Œä½ çš„ç”¨æˆ·æœ‰å‡ ç™¾ä¸‡ï¼Œç”šè‡³ä¸Šåƒä¸‡ï¼Œè¿™äº›ç”¨æˆ·åŒæ—¶è®¿é—®ä½ çš„ç½‘ç«™ï¼Œé‚£ä¹ˆä½ çš„ç½‘ç«™æ˜¯å¦ç»å¾—ä½è€ƒéªŒå‘¢ï¼Œæ•ˆç‡é‚£é«˜ä¸é«˜å‘¢ï¼Œå¦‚æœæ•ˆç‡ä¸é«˜ï¼Œé‚£ä¹ˆéœ€è¦å¤šå‡ºå¾ˆå¤šä¹°æœåŠ¡å™¨çš„ç»è´¹å‘¢ï¼Œæ‰€ä»¥æƒ³æƒ³è¿˜æ˜¯å¾ˆæœ‰å¿…è¦æ³¨æ„è¿™äº›å°çš„ç»†èŠ‚ã€‚ä»Šå¤©å°±è®²è®²ä¸€äº› Java æ€§èƒ½è°ƒä¼˜éœ€è¦æ ¼å¤–æ³¨æ„çš„ä¸€äº›ç»†èŠ‚ã€‚ ä»£ç ä¼˜åŒ–çš„ç›®æ ‡ï¼š å‡å°‘ä»£ç çš„ä½“ç§¯ æé«˜ä»£ç çš„è¿è¡Œæ•ˆç‡ ä»£ç ä¼˜åŒ–ç»†èŠ‚1ã€å°½é‡æŒ‡å®šç±»ã€æ–¹æ³•çš„finalä¿®é¥°ç¬¦ å¸¦æœ‰finalä¿®é¥°ç¬¦çš„ç±»æ˜¯ä¸å¯æ´¾ç”Ÿçš„ã€‚åœ¨Javaæ ¸å¿ƒAPIä¸­ï¼Œæœ‰è®¸å¤šåº”ç”¨finalçš„ä¾‹å­ï¼Œä¾‹å¦‚java.lang.Stringï¼Œæ•´ä¸ªç±»éƒ½æ˜¯finalçš„ã€‚ä¸ºç±»æŒ‡å®šfinalä¿®é¥°ç¬¦å¯ä»¥è®©ç±»ä¸å¯ä»¥è¢«ç»§æ‰¿ï¼Œä¸ºæ–¹æ³•æŒ‡å®šfinalä¿®é¥°ç¬¦å¯ä»¥è®©æ–¹æ³•ä¸å¯ä»¥è¢«é‡å†™ã€‚å¦‚æœæŒ‡å®šäº†ä¸€ä¸ªç±»ä¸ºfinalã€‚Javaç¼–è¯‘å™¨ä¼šå¯»æ‰¾æœºä¼šå†…è”æ‰€æœ‰çš„finalæ–¹æ³•ï¼Œå†…è”å¯¹äºæå‡Javaè¿è¡Œæ•ˆç‡ä½œç”¨é‡å¤§ï¼Œå…·ä½“å‚è§Javaè¿è¡ŒæœŸä¼˜åŒ–ã€‚ æ­¤ä¸¾èƒ½å¤Ÿä½¿æ€§èƒ½å¹³å‡æé«˜50% ã€‚ 2ã€å°½é‡é‡ç”¨å¯¹è±¡ ç‰¹åˆ«æ˜¯Stringå¯¹è±¡çš„ä½¿ç”¨ï¼Œå‡ºç°å­—ç¬¦ä¸²è¿æ¥æ—¶åº”è¯¥ä½¿ç”¨StringBuilder/StringBufferä»£æ›¿ã€‚ç”±äºJavaè™šæ‹Ÿæœºä¸ä»…è¦èŠ±æ—¶é—´ç”Ÿæˆå¯¹è±¡ï¼Œä»¥åå¯èƒ½è¿˜éœ€è¦èŠ±æ—¶é—´å¯¹è¿™äº›å¯¹è±¡è¿›è¡Œåƒåœ¾å›æ”¶å’Œå¤„ç†ï¼Œå› æ­¤ï¼Œç”Ÿæˆè¿‡å¤šçš„å¯¹è±¡å°†ä¼šç»™ç¨‹åºçš„æ€§èƒ½å¸¦æ¥å¾ˆå¤§çš„å½±å“ã€‚ 3ã€å°½å¯èƒ½ä½¿ç”¨å±€éƒ¨å˜é‡ è°ƒç”¨æ–¹æ³•æ—¶ä¼ é€’çš„å‚æ•°ä»¥åŠåœ¨è°ƒç”¨ä¸­åˆ›å»ºçš„ä¸´æ—¶å˜é‡éƒ½ä¿å­˜åœ¨æ ˆä¸­é€Ÿåº¦è¾ƒå¿«ï¼Œå…¶ä»–å˜é‡ï¼Œå¦‚é™æ€å˜é‡ã€å®ä¾‹å˜é‡ç­‰ï¼Œéƒ½åœ¨å †ä¸­åˆ›å»ºï¼Œé€Ÿåº¦è¾ƒæ…¢ã€‚å¦å¤–ï¼Œæ ˆä¸­åˆ›å»ºçš„å˜é‡ï¼Œéšç€æ–¹æ³•çš„è¿è¡Œç»“æŸï¼Œè¿™äº›å†…å®¹å°±æ²¡äº†ï¼Œä¸éœ€è¦é¢å¤–çš„åƒåœ¾å›æ”¶ã€‚ 4ã€åŠæ—¶å…³é—­æµ Javaç¼–ç¨‹è¿‡ç¨‹ä¸­ï¼Œè¿›è¡Œæ•°æ®åº“è¿æ¥ã€I/Oæµæ“ä½œæ—¶åŠ¡å¿…å°å¿ƒï¼Œåœ¨ä½¿ç”¨å®Œæ¯•åï¼ŒåŠæ—¶å…³é—­ä»¥é‡Šæ”¾èµ„æºã€‚å› ä¸ºå¯¹è¿™äº›å¤§å¯¹è±¡çš„æ“ä½œä¼šé€ æˆç³»ç»Ÿå¤§çš„å¼€é”€ï¼Œç¨æœ‰ä¸æ…ï¼Œå°†ä¼šå¯¼è‡´ä¸¥é‡çš„åæœã€‚ 5ã€å°½é‡å‡å°‘å¯¹å˜é‡çš„é‡å¤è®¡ç®— æ˜ç¡®ä¸€ä¸ªæ¦‚å¿µï¼Œå¯¹æ–¹æ³•çš„è°ƒç”¨ï¼Œå³ä½¿æ–¹æ³•ä¸­åªæœ‰ä¸€å¥è¯­å¥ï¼Œä¹Ÿæ˜¯æœ‰æ¶ˆè€—çš„ï¼ŒåŒ…æ‹¬åˆ›å»ºæ ˆå¸§ã€è°ƒç”¨æ–¹æ³•æ—¶ä¿æŠ¤ç°åœºã€è°ƒç”¨æ–¹æ³•å®Œæ¯•æ—¶æ¢å¤ç°åœºç­‰ã€‚æ‰€ä»¥ä¾‹å¦‚ä¸‹é¢çš„æ“ä½œï¼š 12for (int i = 0; i &lt; list.size(); i++)&#123;...&#125; å»ºè®®æ›¿æ¢ä¸ºï¼š 12for (int i = 0, int length = list.size(); i &lt; length; i++)&#123;...&#125; è¿™æ ·ï¼Œåœ¨list.size()å¾ˆå¤§çš„æ—¶å€™ï¼Œå°±å‡å°‘äº†å¾ˆå¤šçš„æ¶ˆè€— 6ã€å°½é‡é‡‡ç”¨æ‡’åŠ è½½çš„ç­–ç•¥ï¼Œå³åœ¨éœ€è¦çš„æ—¶å€™æ‰åˆ›å»º ä¾‹å¦‚ï¼š 1234String str = \"aaa\";if (i == 1)&#123; list.add(str);&#125; å»ºè®®æ›¿æ¢ä¸ºï¼š 12345if (i == 1)&#123; String str = \"aaa\"; list.add(str);&#125; 7ã€æ…ç”¨å¼‚å¸¸ å¼‚å¸¸å¯¹æ€§èƒ½ä¸åˆ©ã€‚æŠ›å‡ºå¼‚å¸¸é¦–å…ˆè¦åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼ŒThrowableæ¥å£çš„æ„é€ å‡½æ•°è°ƒç”¨åä¸º fillInStackTrace() çš„æœ¬åœ°åŒæ­¥æ–¹æ³•ï¼ŒfillInStackTrace() æ–¹æ³•æ£€æŸ¥å †æ ˆï¼Œæ”¶é›†è°ƒç”¨è·Ÿè¸ªä¿¡æ¯ã€‚åªè¦æœ‰å¼‚å¸¸è¢«æŠ›å‡ºï¼ŒJavaè™šæ‹Ÿæœºå°±å¿…é¡»è°ƒæ•´è°ƒç”¨å †æ ˆï¼Œå› ä¸ºåœ¨å¤„ç†è¿‡ç¨‹ä¸­åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„å¯¹è±¡ã€‚å¼‚å¸¸åªèƒ½ç”¨äºé”™è¯¯å¤„ç†ï¼Œä¸åº”è¯¥ç”¨æ¥æ§åˆ¶ç¨‹åºæµç¨‹ã€‚ 8ã€ä¸è¦åœ¨å¾ªç¯ä¸­ä½¿ç”¨ tryâ€¦catchâ€¦ï¼Œåº”è¯¥æŠŠå…¶æ”¾åœ¨æœ€å¤–å±‚ é™¤éä¸å¾—å·²ã€‚å¦‚æœæ¯«æ— ç†ç”±åœ°è¿™ä¹ˆå†™äº†ï¼Œåªè¦ä½ çš„é¢†å¯¼èµ„æ·±ä¸€ç‚¹ã€æœ‰å¼ºè¿«ç—‡ä¸€ç‚¹ï¼Œå…«æˆå°±è¦éª‚ä½ ä¸ºä»€ä¹ˆå†™å‡ºè¿™ç§åƒåœ¾ä»£ç æ¥äº†ã€‚ 9ã€å¦‚æœèƒ½ä¼°è®¡åˆ°å¾…æ·»åŠ çš„å†…å®¹é•¿åº¦ï¼Œä¸ºåº•å±‚ä»¥æ•°ç»„æ–¹å¼å®ç°çš„é›†åˆã€å·¥å…·ç±»æŒ‡å®šåˆå§‹é•¿åº¦ æ¯”å¦‚ ArrayListã€LinkedLlistã€StringBuilderã€StringBufferã€HashMapã€HashSet ç­‰ç­‰ï¼Œä»¥ StringBuilder ä¸ºä¾‹ï¼š ï¼ˆ1ï¼‰StringBuilder() // é»˜è®¤åˆ†é…16ä¸ªå­—ç¬¦çš„ç©ºé—´ ï¼ˆ2ï¼‰StringBuilder(int size) // é»˜è®¤åˆ†é…sizeä¸ªå­—ç¬¦çš„ç©ºé—´ ï¼ˆ3ï¼‰StringBuilder(String str) // é»˜è®¤åˆ†é…16ä¸ªå­—ç¬¦+str.length()ä¸ªå­—ç¬¦ç©ºé—´ å¯ä»¥é€šè¿‡ç±»ï¼ˆè¿™é‡ŒæŒ‡çš„ä¸ä»…ä»…æ˜¯ä¸Šé¢çš„ StringBuilder ï¼‰çš„æ¥è®¾å®šå®ƒçš„åˆå§‹åŒ–å®¹é‡ï¼Œè¿™æ ·å¯ä»¥æ˜æ˜¾åœ°æå‡æ€§èƒ½ã€‚æ¯”å¦‚ StringBuilder å§ï¼Œlength è¡¨ç¤ºå½“å‰çš„ StringBuilder èƒ½ä¿æŒçš„å­—ç¬¦æ•°é‡ã€‚å› ä¸ºå½“ StringBuilder è¾¾åˆ°æœ€å¤§å®¹é‡çš„æ—¶å€™ï¼Œå®ƒä¼šå°†è‡ªèº«å®¹é‡å¢åŠ åˆ°å½“å‰çš„2å€å†åŠ 2ï¼Œæ— è®ºä½•æ—¶åªè¦ StringBuilder è¾¾åˆ°å®ƒçš„æœ€å¤§å®¹é‡ï¼Œå®ƒå°±ä¸å¾—ä¸åˆ›å»ºä¸€ä¸ªæ–°çš„å­—ç¬¦æ•°ç»„ç„¶åå°†æ—§çš„å­—ç¬¦æ•°ç»„å†…å®¹æ‹·è´åˆ°æ–°å­—ç¬¦æ•°ç»„ä¸­â€”-è¿™æ˜¯ååˆ†è€—è´¹æ€§èƒ½çš„ä¸€ä¸ªæ“ä½œã€‚è¯•æƒ³ï¼Œå¦‚æœèƒ½é¢„ä¼°åˆ°å­—ç¬¦æ•°ç»„ä¸­å¤§æ¦‚è¦å­˜æ”¾5000ä¸ªå­—ç¬¦è€Œä¸æŒ‡å®šé•¿åº¦ï¼Œæœ€æ¥è¿‘5000çš„2æ¬¡å¹‚æ˜¯4096ï¼Œæ¯æ¬¡æ‰©å®¹åŠ çš„2ä¸ç®¡ï¼Œé‚£ä¹ˆï¼š ï¼ˆ1ï¼‰åœ¨4096 çš„åŸºç¡€ä¸Šï¼Œå†ç”³è¯·8194ä¸ªå¤§å°çš„å­—ç¬¦æ•°ç»„ï¼ŒåŠ èµ·æ¥ç›¸å½“äºä¸€æ¬¡ç”³è¯·äº†12290ä¸ªå¤§å°çš„å­—ç¬¦æ•°ç»„ï¼Œå¦‚æœä¸€å¼€å§‹èƒ½æŒ‡å®š5000ä¸ªå¤§å°çš„å­—ç¬¦æ•°ç»„ï¼Œå°±èŠ‚çœäº†ä¸€å€ä»¥ä¸Šçš„ç©ºé—´ï¼› ï¼ˆ2ï¼‰æŠŠåŸæ¥çš„4096ä¸ªå­—ç¬¦æ‹·è´åˆ°æ–°çš„çš„å­—ç¬¦æ•°ç»„ä¸­å»ã€‚ è¿™æ ·ï¼Œæ—¢æµªè´¹å†…å­˜ç©ºé—´åˆé™ä½ä»£ç è¿è¡Œæ•ˆç‡ã€‚æ‰€ä»¥ï¼Œç»™åº•å±‚ä»¥æ•°ç»„å®ç°çš„é›†åˆã€å·¥å…·ç±»è®¾ç½®ä¸€ä¸ªåˆç†çš„åˆå§‹åŒ–å®¹é‡æ˜¯é”™ä¸äº†çš„ï¼Œè¿™ä¼šå¸¦æ¥ç«‹ç«¿è§å½±çš„æ•ˆæœã€‚ä½†æ˜¯ï¼Œæ³¨æ„ï¼ŒåƒHashMapè¿™ç§æ˜¯ä»¥æ•°ç»„+é“¾è¡¨å®ç°çš„é›†åˆï¼Œåˆ«æŠŠåˆå§‹å¤§å°å’Œä½ ä¼°è®¡çš„å¤§å°è®¾ç½®å¾—ä¸€æ ·ï¼Œå› ä¸ºä¸€ä¸ªtableä¸Šåªè¿æ¥ä¸€ä¸ªå¯¹è±¡çš„å¯èƒ½æ€§å‡ ä¹ä¸º0ã€‚åˆå§‹å¤§å°å»ºè®®è®¾ç½®ä¸º2çš„Næ¬¡å¹‚ï¼Œå¦‚æœèƒ½ä¼°è®¡åˆ°æœ‰2000ä¸ªå…ƒç´ ï¼Œè®¾ç½®æˆ new HashMap(128)ã€new HashMap(256) éƒ½å¯ä»¥ã€‚ 10ã€å½“å¤åˆ¶å¤§é‡æ•°æ®æ—¶ï¼Œä½¿ç”¨ System.arraycopy() å‘½ä»¤ 11ã€ä¹˜æ³•å’Œé™¤æ³•ä½¿ç”¨ç§»ä½æ“ä½œ ä¾‹å¦‚ï¼š 12345for (val = 0; val &lt; 100000; val += 5)&#123; a = val * 8; b = val / 2;&#125; ç”¨ç§»ä½æ“ä½œå¯ä»¥æå¤§åœ°æé«˜æ€§èƒ½ï¼Œå› ä¸ºåœ¨è®¡ç®—æœºåº•å±‚ï¼Œå¯¹ä½çš„æ“ä½œæ˜¯æœ€æ–¹ä¾¿ã€æœ€å¿«çš„ï¼Œå› æ­¤å»ºè®®ä¿®æ”¹ä¸ºï¼š 12345for (val = 0; val &lt; 100000; val += 5)&#123; a = val &lt;&lt; 3; b = val &gt;&gt; 1;&#125; ç§»ä½æ“ä½œè™½ç„¶å¿«ï¼Œä½†æ˜¯å¯èƒ½ä¼šä½¿ä»£ç ä¸å¤ªå¥½ç†è§£ï¼Œå› æ­¤æœ€å¥½åŠ ä¸Šç›¸åº”çš„æ³¨é‡Šã€‚ 12ã€å¾ªç¯å†…ä¸è¦ä¸æ–­åˆ›å»ºå¯¹è±¡å¼•ç”¨ ä¾‹å¦‚ï¼š 1234for (int i = 1; i &lt;= count; i++)&#123; Object obj = new Object();&#125; è¿™ç§åšæ³•ä¼šå¯¼è‡´å†…å­˜ä¸­æœ‰countä»½Objectå¯¹è±¡å¼•ç”¨å­˜åœ¨ï¼Œcountå¾ˆå¤§çš„è¯ï¼Œå°±è€—è´¹å†…å­˜äº†ï¼Œå»ºè®®ä¸ºæ”¹ä¸ºï¼š 12345Object obj = null;for (int i = 0; i &lt;= count; i++) &#123; obj = new Object(); &#125; è¿™æ ·çš„è¯ï¼Œå†…å­˜ä¸­åªæœ‰ä¸€ä»½ Object å¯¹è±¡å¼•ç”¨ï¼Œæ¯æ¬¡ new Object() çš„æ—¶å€™ï¼ŒObject å¯¹è±¡å¼•ç”¨æŒ‡å‘ä¸åŒçš„Objectç½¢äº†ï¼Œä½†æ˜¯å†…å­˜ä¸­åªæœ‰ä¸€ä»½ï¼Œè¿™æ ·å°±å¤§å¤§èŠ‚çœäº†å†…å­˜ç©ºé—´äº†ã€‚ 13ã€åŸºäºæ•ˆç‡å’Œç±»å‹æ£€æŸ¥çš„è€ƒè™‘ï¼Œåº”è¯¥å°½å¯èƒ½ä½¿ç”¨arrayï¼Œæ— æ³•ç¡®å®šæ•°ç»„å¤§å°æ—¶æ‰ä½¿ç”¨ ArrayList 14ã€å°½é‡ä½¿ç”¨ HashMapã€ArrayListã€StringBuilderï¼Œé™¤éçº¿ç¨‹å®‰å…¨éœ€è¦ï¼Œå¦åˆ™ä¸æ¨èä½¿ç”¨ Hashtableã€Vectorã€StringBufferï¼Œåä¸‰è€…ç”±äºä½¿ç”¨åŒæ­¥æœºåˆ¶è€Œå¯¼è‡´äº†æ€§èƒ½å¼€é”€ 15ã€ä¸è¦å°†æ•°ç»„å£°æ˜ä¸º public static final å› ä¸ºè¿™æ¯«æ— æ„ä¹‰ï¼Œè¿™æ ·åªæ˜¯å®šä¹‰äº†å¼•ç”¨ä¸º static finalï¼Œæ•°ç»„çš„å†…å®¹è¿˜æ˜¯å¯ä»¥éšæ„æ”¹å˜çš„ï¼Œå°†æ•°ç»„å£°æ˜ä¸º public æ›´æ˜¯ä¸€ä¸ªå®‰å…¨æ¼æ´ï¼Œè¿™æ„å‘³ç€è¿™ä¸ªæ•°ç»„å¯ä»¥è¢«å¤–éƒ¨ç±»æ‰€æ”¹å˜ã€‚ 16ã€å°½é‡åœ¨åˆé€‚çš„åœºåˆä½¿ç”¨å•ä¾‹ ä½¿ç”¨å•ä¾‹å¯ä»¥å‡è½»åŠ è½½çš„è´Ÿæ‹…ã€ç¼©çŸ­åŠ è½½çš„æ—¶é—´ã€æé«˜åŠ è½½çš„æ•ˆç‡ï¼Œä½†å¹¶ä¸æ˜¯æ‰€æœ‰åœ°æ–¹éƒ½é€‚ç”¨äºå•ä¾‹ï¼Œç®€å•æ¥è¯´ï¼Œå•ä¾‹ä¸»è¦é€‚ç”¨äºä»¥ä¸‹ä¸‰ä¸ªæ–¹é¢ï¼š ï¼ˆ1ï¼‰æ§åˆ¶èµ„æºçš„ä½¿ç”¨ï¼Œé€šè¿‡çº¿ç¨‹åŒæ­¥æ¥æ§åˆ¶èµ„æºçš„å¹¶å‘è®¿é—® ï¼ˆ2ï¼‰æ§åˆ¶å®ä¾‹çš„äº§ç”Ÿï¼Œä»¥è¾¾åˆ°èŠ‚çº¦èµ„æºçš„ç›®çš„ ï¼ˆ3ï¼‰æ§åˆ¶æ•°æ®çš„å…±äº«ï¼Œåœ¨ä¸å»ºç«‹ç›´æ¥å…³è”çš„æ¡ä»¶ä¸‹ï¼Œè®©å¤šä¸ªä¸ç›¸å…³çš„è¿›ç¨‹æˆ–çº¿ç¨‹ä¹‹é—´å®ç°é€šä¿¡ 17ã€å°½é‡é¿å…éšæ„ä½¿ç”¨é™æ€å˜é‡ è¦çŸ¥é“ï¼Œå½“æŸä¸ªå¯¹è±¡è¢«å®šä¹‰ä¸ºstaticçš„å˜é‡æ‰€å¼•ç”¨ï¼Œé‚£ä¹ˆgcé€šå¸¸æ˜¯ä¸ä¼šå›æ”¶è¿™ä¸ªå¯¹è±¡æ‰€å æœ‰çš„å †å†…å­˜çš„ï¼Œå¦‚ï¼š 1234public class A&#123; private static B b = new B();&#125; æ­¤æ—¶é™æ€å˜é‡bçš„ç”Ÿå‘½å‘¨æœŸä¸Aç±»ç›¸åŒï¼Œå¦‚æœAç±»ä¸è¢«å¸è½½ï¼Œé‚£ä¹ˆå¼•ç”¨BæŒ‡å‘çš„Bå¯¹è±¡ä¼šå¸¸é©»å†…å­˜ï¼Œç›´åˆ°ç¨‹åºç»ˆæ­¢ 18ã€åŠæ—¶æ¸…é™¤ä¸å†éœ€è¦çš„ä¼šè¯ ä¸ºäº†æ¸…é™¤ä¸å†æ´»åŠ¨çš„ä¼šè¯ï¼Œè®¸å¤šåº”ç”¨æœåŠ¡å™¨éƒ½æœ‰é»˜è®¤çš„ä¼šè¯è¶…æ—¶æ—¶é—´ï¼Œä¸€èˆ¬ä¸º30åˆ†é’Ÿã€‚å½“åº”ç”¨æœåŠ¡å™¨éœ€è¦ä¿å­˜æ›´å¤šçš„ä¼šè¯æ—¶ï¼Œå¦‚æœå†…å­˜ä¸è¶³ï¼Œé‚£ä¹ˆæ“ä½œç³»ç»Ÿä¼šæŠŠéƒ¨åˆ†æ•°æ®è½¬ç§»åˆ°ç£ç›˜ï¼Œåº”ç”¨æœåŠ¡å™¨ä¹Ÿå¯èƒ½æ ¹æ®MRUï¼ˆæœ€è¿‘æœ€é¢‘ç¹ä½¿ç”¨ï¼‰ç®—æ³•æŠŠéƒ¨åˆ†ä¸æ´»è·ƒçš„ä¼šè¯è½¬å‚¨åˆ°ç£ç›˜ï¼Œç”šè‡³å¯èƒ½æŠ›å‡ºå†…å­˜ä¸è¶³çš„å¼‚å¸¸ã€‚å¦‚æœä¼šè¯è¦è¢«è½¬å‚¨åˆ°ç£ç›˜ï¼Œé‚£ä¹ˆå¿…é¡»è¦å…ˆè¢«åºåˆ—åŒ–ï¼Œåœ¨å¤§è§„æ¨¡é›†ç¾¤ä¸­ï¼Œå¯¹å¯¹è±¡è¿›è¡Œåºåˆ—åŒ–çš„ä»£ä»·æ˜¯å¾ˆæ˜‚è´µçš„ã€‚å› æ­¤ï¼Œå½“ä¼šè¯ä¸å†éœ€è¦æ—¶ï¼Œåº”å½“åŠæ—¶è°ƒç”¨ HttpSession çš„ invalidate() æ–¹æ³•æ¸…é™¤ä¼šè¯ã€‚ 19ã€å®ç° RandomAccess æ¥å£çš„é›†åˆæ¯”å¦‚ ArrayListï¼Œåº”å½“ä½¿ç”¨æœ€æ™®é€šçš„ for å¾ªç¯è€Œä¸æ˜¯ foreach å¾ªç¯æ¥éå† è¿™æ˜¯JDKæ¨èç»™ç”¨æˆ·çš„ã€‚JDK APIå¯¹äº RandomAccess æ¥å£çš„è§£é‡Šæ˜¯ï¼šå®ç° RandomAccess æ¥å£ç”¨æ¥è¡¨æ˜å…¶æ”¯æŒå¿«é€Ÿéšæœºè®¿é—®ï¼Œæ­¤æ¥å£çš„ä¸»è¦ç›®çš„æ˜¯å…è®¸ä¸€èˆ¬çš„ç®—æ³•æ›´æ”¹å…¶è¡Œä¸ºï¼Œä»è€Œå°†å…¶åº”ç”¨åˆ°éšæœºæˆ–è¿ç»­è®¿é—®åˆ—è¡¨æ—¶èƒ½æä¾›è‰¯å¥½çš„æ€§èƒ½ã€‚å®é™…ç»éªŒè¡¨æ˜ï¼Œå®ç° RandomAccess æ¥å£çš„ç±»å®ä¾‹ï¼Œå‡å¦‚æ˜¯éšæœºè®¿é—®çš„ï¼Œä½¿ç”¨æ™®é€š for å¾ªç¯æ•ˆç‡å°†é«˜äºä½¿ç”¨ foreach å¾ªç¯ï¼›åè¿‡æ¥ï¼Œå¦‚æœæ˜¯é¡ºåºè®¿é—®çš„ï¼Œåˆ™ä½¿ç”¨ Iterator ä¼šæ•ˆç‡æ›´é«˜ã€‚å¯ä»¥ä½¿ç”¨ç±»ä¼¼å¦‚ä¸‹çš„ä»£ç ä½œåˆ¤æ–­ï¼š 12345678910if (list instanceof RandomAccess)&#123; for (int i = 0; i &lt; list.size(); i++)&#123;&#125;&#125;else&#123; Iterator&lt;?&gt; iterator = list.iterable(); while (iterator.hasNext()) &#123; iterator.next(); &#125;&#125; foreach å¾ªç¯çš„åº•å±‚å®ç°åŸç†å°±æ˜¯è¿­ä»£å™¨ Iteratorï¼Œå‚è§Javaè¯­æ³•ç³–1ï¼šå¯å˜é•¿åº¦å‚æ•°ä»¥åŠ foreach å¾ªç¯åŸç†ã€‚æ‰€ä»¥ååŠå¥â€åè¿‡æ¥ï¼Œå¦‚æœæ˜¯é¡ºåºè®¿é—®çš„ï¼Œåˆ™ä½¿ç”¨ Iterator ä¼šæ•ˆç‡æ›´é«˜â€çš„æ„æ€å°±æ˜¯é¡ºåºè®¿é—®çš„é‚£äº›ç±»å®ä¾‹ï¼Œä½¿ç”¨ foreach å¾ªç¯å»éå†ã€‚ 20ã€ä½¿ç”¨åŒæ­¥ä»£ç å—æ›¿ä»£åŒæ­¥æ–¹æ³• è¿™ç‚¹åœ¨å¤šçº¿ç¨‹æ¨¡å—ä¸­çš„ synchronized é”æ–¹æ³•å—ä¸€æ–‡ä¸­å·²ç»è®²å¾—å¾ˆæ¸…æ¥šäº†ï¼Œé™¤éèƒ½ç¡®å®šä¸€æ•´ä¸ªæ–¹æ³•éƒ½æ˜¯éœ€è¦è¿›è¡ŒåŒæ­¥çš„ï¼Œå¦åˆ™å°½é‡ä½¿ç”¨åŒæ­¥ä»£ç å—ï¼Œé¿å…å¯¹é‚£äº›ä¸éœ€è¦è¿›è¡ŒåŒæ­¥çš„ä»£ç ä¹Ÿè¿›è¡Œäº†åŒæ­¥ï¼Œå½±å“äº†ä»£ç æ‰§è¡Œæ•ˆç‡ã€‚ 21ã€å°†å¸¸é‡å£°æ˜ä¸º static finalï¼Œå¹¶ä»¥å¤§å†™å‘½å è¿™æ ·åœ¨ç¼–è¯‘æœŸé—´å°±å¯ä»¥æŠŠè¿™äº›å†…å®¹æ”¾å…¥å¸¸é‡æ± ä¸­ï¼Œé¿å…è¿è¡ŒæœŸé—´è®¡ç®—ç”Ÿæˆå¸¸é‡çš„å€¼ã€‚å¦å¤–ï¼Œå°†å¸¸é‡çš„åå­—ä»¥å¤§å†™å‘½åä¹Ÿå¯ä»¥æ–¹ä¾¿åŒºåˆ†å‡ºå¸¸é‡ä¸å˜é‡ 22ã€ä¸è¦åˆ›å»ºä¸€äº›ä¸ä½¿ç”¨çš„å¯¹è±¡ï¼Œä¸è¦å¯¼å…¥ä¸€äº›ä¸ä½¿ç”¨çš„ç±» è¿™æ¯«æ— æ„ä¹‰ï¼Œå¦‚æœä»£ç ä¸­å‡ºç°â€The value of the local variable i is not usedâ€ã€â€The import java.util is never usedâ€ï¼Œé‚£ä¹ˆè¯·åˆ é™¤è¿™äº›æ— ç”¨çš„å†…å®¹ 23ã€ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­é¿å…ä½¿ç”¨åå°„ å…³äºï¼Œè¯·å‚è§åå°„ã€‚åå°„æ˜¯Javaæä¾›ç»™ç”¨æˆ·ä¸€ä¸ªå¾ˆå¼ºå¤§çš„åŠŸèƒ½ï¼ŒåŠŸèƒ½å¼ºå¤§å¾€å¾€æ„å‘³ç€æ•ˆç‡ä¸é«˜ã€‚ä¸å»ºè®®åœ¨ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­ä½¿ç”¨å°¤å…¶æ˜¯é¢‘ç¹ä½¿ç”¨åå°„æœºåˆ¶ï¼Œç‰¹åˆ«æ˜¯Methodçš„invokeæ–¹æ³•ï¼Œå¦‚æœç¡®å®æœ‰å¿…è¦ï¼Œä¸€ç§å»ºè®®æ€§çš„åšæ³•æ˜¯å°†é‚£äº›éœ€è¦é€šè¿‡åå°„åŠ è½½çš„ç±»åœ¨é¡¹ç›®å¯åŠ¨çš„æ—¶å€™é€šè¿‡åå°„å®ä¾‹åŒ–å‡ºä¸€ä¸ªå¯¹è±¡å¹¶æ”¾å…¥å†…å­˜â€”-ç”¨æˆ·åªå…³å¿ƒå’Œå¯¹ç«¯äº¤äº’çš„æ—¶å€™è·å–æœ€å¿«çš„å“åº”é€Ÿåº¦ï¼Œå¹¶ä¸å…³å¿ƒå¯¹ç«¯çš„é¡¹ç›®å¯åŠ¨èŠ±å¤šä¹…æ—¶é—´ã€‚ 24ã€ä½¿ç”¨æ•°æ®åº“è¿æ¥æ± å’Œçº¿ç¨‹æ±  è¿™ä¸¤ä¸ªæ± éƒ½æ˜¯ç”¨äºé‡ç”¨å¯¹è±¡çš„ï¼Œå‰è€…å¯ä»¥é¿å…é¢‘ç¹åœ°æ‰“å¼€å’Œå…³é—­è¿æ¥ï¼Œåè€…å¯ä»¥é¿å…é¢‘ç¹åœ°åˆ›å»ºå’Œé”€æ¯çº¿ç¨‹ 25ã€ä½¿ç”¨å¸¦ç¼“å†²çš„è¾“å…¥è¾“å‡ºæµè¿›è¡ŒIOæ“ä½œ å¸¦ç¼“å†²çš„è¾“å…¥è¾“å‡ºæµï¼Œå³BufferedReaderã€BufferedWriterã€BufferedInputStreamã€BufferedOutputStreamï¼Œè¿™å¯ä»¥æå¤§åœ°æå‡IOæ•ˆç‡ 26ã€é¡ºåºæ’å…¥å’Œéšæœºè®¿é—®æ¯”è¾ƒå¤šçš„åœºæ™¯ä½¿ç”¨ArrayListï¼Œå…ƒç´ åˆ é™¤å’Œä¸­é—´æ’å…¥æ¯”è¾ƒå¤šçš„åœºæ™¯ä½¿ç”¨LinkedListè¿™ä¸ªï¼Œç†è§£ArrayListå’ŒLinkedListçš„åŸç†å°±çŸ¥é“äº† 27ã€ä¸è¦è®©publicæ–¹æ³•ä¸­æœ‰å¤ªå¤šçš„å½¢å‚ publicæ–¹æ³•å³å¯¹å¤–æä¾›çš„æ–¹æ³•ï¼Œå¦‚æœç»™è¿™äº›æ–¹æ³•å¤ªå¤šå½¢å‚çš„è¯ä¸»è¦æœ‰ä¸¤ç‚¹åå¤„ï¼š 1ã€è¿åäº†é¢å‘å¯¹è±¡çš„ç¼–ç¨‹æ€æƒ³ï¼ŒJavaè®²æ±‚ä¸€åˆ‡éƒ½æ˜¯å¯¹è±¡ï¼Œå¤ªå¤šçš„å½¢å‚ï¼Œå’Œé¢å‘å¯¹è±¡çš„ç¼–ç¨‹æ€æƒ³å¹¶ä¸å¥‘åˆ 2ã€å‚æ•°å¤ªå¤šåŠ¿å¿…å¯¼è‡´æ–¹æ³•è°ƒç”¨çš„å‡ºé”™æ¦‚ç‡å¢åŠ  è‡³äºè¿™ä¸ªâ€å¤ªå¤šâ€æŒ‡çš„æ˜¯å¤šå°‘ä¸ªï¼Œ3ã€4ä¸ªå§ã€‚æ¯”å¦‚æˆ‘ä»¬ç”¨JDBCå†™ä¸€ä¸ªinsertStudentInfoæ–¹æ³•ï¼Œæœ‰10ä¸ªå­¦ç”Ÿä¿¡æ¯å­—æ®µè¦æ’å¦‚Studentè¡¨ä¸­ï¼Œå¯ä»¥æŠŠè¿™10ä¸ªå‚æ•°å°è£…åœ¨ä¸€ä¸ªå®ä½“ç±»ä¸­ï¼Œä½œä¸ºinsertæ–¹æ³•çš„å½¢å‚ã€‚ 28ã€å­—ç¬¦ä¸²å˜é‡å’Œå­—ç¬¦ä¸²å¸¸é‡equalsçš„æ—¶å€™å°†å­—ç¬¦ä¸²å¸¸é‡å†™åœ¨å‰é¢ è¿™æ˜¯ä¸€ä¸ªæ¯”è¾ƒå¸¸è§çš„å°æŠ€å·§äº†ï¼Œå¦‚æœæœ‰ä»¥ä¸‹ä»£ç ï¼š 12String str = \"123\";if (str.equals(\"123\")) &#123;...&#125; å»ºè®®ä¿®æ”¹ä¸ºï¼š 12345String str = \"123\";if (\"123\".equals(str))&#123;...&#125; è¿™ä¹ˆåšä¸»è¦æ˜¯å¯ä»¥é¿å…ç©ºæŒ‡é’ˆå¼‚å¸¸ 29ã€è¯·çŸ¥é“ï¼Œåœ¨javaä¸­if (i == 1)å’Œif (1 == i)æ˜¯æ²¡æœ‰åŒºåˆ«çš„ï¼Œä½†ä»é˜…è¯»ä¹ æƒ¯ä¸Šè®²ï¼Œå»ºè®®ä½¿ç”¨å‰è€… å¹³æ—¶æœ‰äººé—®ï¼Œâ€if (i == 1)â€å’Œâ€if (1== i)â€æœ‰æ²¡æœ‰åŒºåˆ«ï¼Œè¿™å°±è¦ä»C/C++è®²èµ·ã€‚ åœ¨C/C++ä¸­ï¼Œâ€if (i == 1)â€åˆ¤æ–­æ¡ä»¶æˆç«‹ï¼Œæ˜¯ä»¥0ä¸é0ä¸ºåŸºå‡†çš„ï¼Œ0è¡¨ç¤ºfalseï¼Œé0è¡¨ç¤ºtrueï¼Œå¦‚æœæœ‰è¿™ä¹ˆä¸€æ®µä»£ç ï¼š 123456int i = 2;if (i == 1)&#123;...&#125;else&#123;...&#125; C/C++åˆ¤æ–­â€i==1â€³ä¸æˆç«‹ï¼Œæ‰€ä»¥ä»¥0è¡¨ç¤ºï¼Œå³falseã€‚ä½†æ˜¯å¦‚æœï¼š 1234567int i = 2;if (i = 1)&#123; ... &#125;else&#123;... &#125; ä¸‡ä¸€ç¨‹åºå‘˜ä¸€ä¸ªä¸å°å¿ƒï¼ŒæŠŠâ€if (i == 1)â€å†™æˆâ€if (i = 1)â€ï¼Œè¿™æ ·å°±æœ‰é—®é¢˜äº†ã€‚åœ¨ifä¹‹å†…å°†ièµ‹å€¼ä¸º1ï¼Œifåˆ¤æ–­é‡Œé¢çš„å†…å®¹é0ï¼Œè¿”å›çš„å°±æ˜¯trueäº†ï¼Œä½†æ˜¯æ˜æ˜iä¸º2ï¼Œæ¯”è¾ƒçš„å€¼æ˜¯1ï¼Œåº”è¯¥è¿”å›çš„falseã€‚è¿™ç§æƒ…å†µåœ¨C/C++çš„å¼€å‘ä¸­æ˜¯å¾ˆå¯èƒ½å‘ç”Ÿçš„å¹¶ä¸”ä¼šå¯¼è‡´ä¸€äº›éš¾ä»¥ç†è§£çš„é”™è¯¯äº§ç”Ÿï¼Œæ‰€ä»¥ï¼Œä¸ºäº†é¿å…å¼€å‘è€…åœ¨ifè¯­å¥ä¸­ä¸æ­£ç¡®çš„èµ‹å€¼æ“ä½œï¼Œå»ºè®®å°†ifè¯­å¥å†™ä¸ºï¼š 123456int i = 2;if (1 == i) &#123;... &#125;else&#123;... &#125; è¿™æ ·ï¼Œå³ä½¿å¼€å‘è€…ä¸å°å¿ƒå†™æˆäº†â€1 = iâ€ï¼ŒC/C++ç¼–è¯‘å™¨ä¹Ÿå¯ä»¥ç¬¬ä¸€æ—¶é—´æ£€æŸ¥å‡ºæ¥ï¼Œå› ä¸ºæˆ‘ä»¬å¯ä»¥å¯¹ä¸€ä¸ªå˜é‡èµ‹å€¼iä¸º1ï¼Œä½†æ˜¯ä¸èƒ½å¯¹ä¸€ä¸ªå¸¸é‡èµ‹å€¼1ä¸ºiã€‚ ä½†æ˜¯ï¼Œåœ¨Javaä¸­ï¼ŒC/C++è¿™ç§â€if (i = 1)â€çš„è¯­æ³•æ˜¯ä¸å¯èƒ½å‡ºç°çš„ï¼Œå› ä¸ºä¸€æ—¦å†™äº†è¿™ç§è¯­æ³•ï¼ŒJavaå°±ä¼šç¼–è¯‘æŠ¥é”™â€Type mismatch: cannot convert from int to booleanâ€ã€‚ä½†æ˜¯ï¼Œå°½ç®¡Javaçš„â€if (i == 1)â€å’Œâ€if (1 == i)â€åœ¨è¯­ä¹‰ä¸Šæ²¡æœ‰ä»»ä½•åŒºåˆ«ï¼Œä½†æ˜¯ä»é˜…è¯»ä¹ æƒ¯ä¸Šè®²ï¼Œå»ºè®®ä½¿ç”¨å‰è€…ä¼šæ›´å¥½äº›ã€‚ 30ã€ä¸è¦å¯¹æ•°ç»„ä½¿ç”¨toString()æ–¹æ³• çœ‹ä¸€ä¸‹å¯¹æ•°ç»„ä½¿ç”¨toString()æ‰“å°å‡ºæ¥çš„æ˜¯ä»€ä¹ˆï¼š 12345public static void main(String[] args)&#123; int[] is = new int[]&#123;1, 2, 3&#125;; System.out.println(is.toString());&#125; ç»“æœæ˜¯ï¼š 1[I@18a992f æœ¬æ„æ˜¯æƒ³æ‰“å°å‡ºæ•°ç»„å†…å®¹ï¼Œå´æœ‰å¯èƒ½å› ä¸ºæ•°ç»„å¼•ç”¨isä¸ºç©ºè€Œå¯¼è‡´ç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚ä¸è¿‡è™½ç„¶å¯¹æ•°ç»„toString()æ²¡æœ‰æ„ä¹‰ï¼Œä½†æ˜¯å¯¹é›†åˆtoString()æ˜¯å¯ä»¥æ‰“å°å‡ºé›†åˆé‡Œé¢çš„å†…å®¹çš„ï¼Œå› ä¸ºé›†åˆçš„çˆ¶ç±»AbstractCollectionsé‡å†™äº†Objectçš„toString()æ–¹æ³•ã€‚ 31ã€ä¸è¦å¯¹è¶…å‡ºèŒƒå›´çš„åŸºæœ¬æ•°æ®ç±»å‹åšå‘ä¸‹å¼ºåˆ¶è½¬å‹ è¿™ç»ä¸ä¼šå¾—åˆ°æƒ³è¦çš„ç»“æœï¼š 12345public static void main(String[] args)&#123; long l = 12345678901234L;int i = (int)l; System.out.println(i);&#125; æˆ‘ä»¬å¯èƒ½æœŸæœ›å¾—åˆ°å…¶ä¸­çš„æŸå‡ ä½ï¼Œä½†æ˜¯ç»“æœå´æ˜¯ï¼š 1942892530 è§£é‡Šä¸€ä¸‹ã€‚Javaä¸­longæ˜¯8ä¸ªå­—èŠ‚64ä½çš„ï¼Œæ‰€ä»¥12345678901234åœ¨è®¡ç®—æœºä¸­çš„è¡¨ç¤ºåº”è¯¥æ˜¯ï¼š 0000 0000 0000 0000 0000 1011 0011 1010 0111 0011 1100 1110 0010 1111 1111 0010 ä¸€ä¸ªintå‹æ•°æ®æ˜¯4ä¸ªå­—èŠ‚32ä½çš„ï¼Œä»ä½ä½å–å‡ºä¸Šé¢è¿™ä¸²äºŒè¿›åˆ¶æ•°æ®çš„å‰32ä½æ˜¯ï¼š 0111 0011 1100 1110 0010 1111 1111 0010 è¿™ä¸²äºŒè¿›åˆ¶è¡¨ç¤ºä¸ºåè¿›åˆ¶1942892530ï¼Œæ‰€ä»¥å°±æ˜¯æˆ‘ä»¬ä¸Šé¢çš„æ§åˆ¶å°ä¸Šè¾“å‡ºçš„å†…å®¹ã€‚ä»è¿™ä¸ªä¾‹å­ä¸Šè¿˜èƒ½é¡ºä¾¿å¾—åˆ°ä¸¤ä¸ªç»“è®ºï¼š 1ã€æ•´å‹é»˜è®¤çš„æ•°æ®ç±»å‹æ˜¯intï¼Œlong l = 12345678901234Lï¼Œè¿™ä¸ªæ•°å­—å·²ç»è¶…å‡ºäº†intçš„èŒƒå›´äº†ï¼Œæ‰€ä»¥æœ€åæœ‰ä¸€ä¸ªLï¼Œè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªlongå‹æ•°ã€‚é¡ºä¾¿ï¼Œæµ®ç‚¹å‹çš„é»˜è®¤ç±»å‹æ˜¯doubleï¼Œæ‰€ä»¥å®šä¹‰floatçš„æ—¶å€™è¦å†™æˆâ€â€float f = 3.5fâ€ 2ã€æ¥ä¸‹æ¥å†å†™ä¸€å¥â€int ii = l + i;â€ä¼šæŠ¥é”™ï¼Œå› ä¸ºlong + intæ˜¯ä¸€ä¸ªlongï¼Œä¸èƒ½èµ‹å€¼ç»™int 32ã€å…¬ç”¨çš„é›†åˆç±»ä¸­ä¸ä½¿ç”¨çš„æ•°æ®ä¸€å®šè¦åŠæ—¶removeæ‰ å¦‚æœä¸€ä¸ªé›†åˆç±»æ˜¯å…¬ç”¨çš„ï¼ˆä¹Ÿå°±æ˜¯è¯´ä¸æ˜¯æ–¹æ³•é‡Œé¢çš„å±æ€§ï¼‰ï¼Œé‚£ä¹ˆè¿™ä¸ªé›†åˆé‡Œé¢çš„å…ƒç´ æ˜¯ä¸ä¼šè‡ªåŠ¨é‡Šæ”¾çš„ï¼Œå› ä¸ºå§‹ç»ˆæœ‰å¼•ç”¨æŒ‡å‘å®ƒä»¬ã€‚æ‰€ä»¥ï¼Œå¦‚æœå…¬ç”¨é›†åˆé‡Œé¢çš„æŸäº›æ•°æ®ä¸ä½¿ç”¨è€Œä¸å»removeæ‰å®ƒä»¬ï¼Œé‚£ä¹ˆå°†ä¼šé€ æˆè¿™ä¸ªå…¬ç”¨é›†åˆä¸æ–­å¢å¤§ï¼Œä½¿å¾—ç³»ç»Ÿæœ‰å†…å­˜æ³„éœ²çš„éšæ‚£ã€‚ 33ã€æŠŠä¸€ä¸ªåŸºæœ¬æ•°æ®ç±»å‹è½¬ä¸ºå­—ç¬¦ä¸²ï¼ŒåŸºæœ¬æ•°æ®ç±»å‹.toString()æ˜¯æœ€å¿«çš„æ–¹å¼ã€String.valueOf(æ•°æ®)æ¬¡ä¹‹ã€æ•°æ®+â€â€æœ€æ…¢ æŠŠä¸€ä¸ªåŸºæœ¬æ•°æ®ç±»å‹è½¬ä¸ºä¸€èˆ¬æœ‰ä¸‰ç§æ–¹å¼ï¼Œæˆ‘æœ‰ä¸€ä¸ªIntegerå‹æ•°æ®iï¼Œå¯ä»¥ä½¿ç”¨i.toString()ã€String.valueOf(i)ã€i+â€â€ä¸‰ç§æ–¹å¼ï¼Œä¸‰ç§æ–¹å¼çš„æ•ˆç‡å¦‚ä½•ï¼Œçœ‹ä¸€ä¸ªæµ‹è¯•ï¼š 1234567891011121314151617181920212223public static void main(String[] args)&#123; int loopTime = 50000; Integer i = 0; long startTime = System.currentTimeMillis(); for (int j = 0; j &lt; loopTime; j++) &#123; String str = String.valueOf(i); &#125;System.out.println(\"String.valueOf()ï¼š\" + (System.currentTimeMillis() - startTime) + \"ms\"); startTime = System.currentTimeMillis(); for (int j = 0; j &lt; loopTime; j++) &#123; String str = i.toString(); &#125;System.out.println(\"Integer.toString()ï¼š\" + (System.currentTimeMillis() - startTime) + \"ms\");startTime = System.currentTimeMillis(); for (int j = 0; j &lt; loopTime; j++)&#123; String str = i + \"\";&#125;System.out.println(\"i + \\\"\\\"ï¼š\" + (System.currentTimeMillis() - startTime) + \"ms\");&#125; è¿è¡Œç»“æœä¸ºï¼š 1String.valueOf()ï¼š11ms Integer.toString()ï¼š5ms i + &quot;&quot;ï¼š25ms æ‰€ä»¥ä»¥åé‡åˆ°æŠŠä¸€ä¸ªåŸºæœ¬æ•°æ®ç±»å‹è½¬ä¸ºStringçš„æ—¶å€™ï¼Œä¼˜å…ˆè€ƒè™‘ä½¿ç”¨toString()æ–¹æ³•ã€‚è‡³äºä¸ºä»€ä¹ˆï¼Œå¾ˆç®€å•ï¼š 1ã€String.valueOf()æ–¹æ³•åº•å±‚è°ƒç”¨äº†Integer.toString()æ–¹æ³•ï¼Œä½†æ˜¯ä¼šåœ¨è°ƒç”¨å‰åšç©ºåˆ¤æ–­ 2ã€Integer.toString()æ–¹æ³•å°±ä¸è¯´äº†ï¼Œç›´æ¥è°ƒç”¨äº† 3ã€i + â€œâ€åº•å±‚ä½¿ç”¨äº†StringBuilderå®ç°ï¼Œå…ˆç”¨appendæ–¹æ³•æ‹¼æ¥ï¼Œå†ç”¨toString()æ–¹æ³•è·å–å­—ç¬¦ä¸² ä¸‰è€…å¯¹æ¯”ä¸‹æ¥ï¼Œæ˜æ˜¾æ˜¯2æœ€å¿«ã€1æ¬¡ä¹‹ã€3æœ€æ…¢ 34ã€ä½¿ç”¨æœ€æœ‰æ•ˆç‡çš„æ–¹å¼å»éå†Map éå†Mapçš„æ–¹å¼æœ‰å¾ˆå¤šï¼Œé€šå¸¸åœºæ™¯ä¸‹æˆ‘ä»¬éœ€è¦çš„æ˜¯éå†Mapä¸­çš„Keyå’ŒValueï¼Œé‚£ä¹ˆæ¨èä½¿ç”¨çš„ã€æ•ˆç‡æœ€é«˜çš„æ–¹å¼æ˜¯ï¼š 123456789101112public static void main(String[] args)&#123;HashMap&lt;String, String&gt; hm = new HashMap&lt;String, String&gt;();hm.put(\"111\", \"222\");Set&lt;Map.Entry&lt;String, String&gt;&gt; entrySet = hm.entrySet();Iterator&lt;Map.Entry&lt;String, String&gt;&gt; iter = entrySet.iterator(); while (iter.hasNext())&#123;Map.Entry&lt;String, String&gt; entry = iter.next();System.out.println(entry.getKey() + \"\\t\" + entry.getValue());&#125;&#125; å¦‚æœä½ åªæ˜¯æƒ³éå†ä¸€ä¸‹è¿™ä¸ªMapçš„keyå€¼ï¼Œé‚£ç”¨â€Set keySet = hm.keySet();â€ä¼šæ¯”è¾ƒåˆé€‚ä¸€äº› 35ã€å¯¹èµ„æºçš„close()å»ºè®®åˆ†å¼€æ“ä½œ æ„æ€æ˜¯ï¼Œæ¯”å¦‚æˆ‘æœ‰è¿™ä¹ˆä¸€æ®µä»£ç ï¼š 12345try&#123;XXX.close();YYY.close();&#125;catch (Exception e)&#123;...&#125; å»ºè®®ä¿®æ”¹ä¸ºï¼š 123456789try&#123; XXX.close(); &#125;catch (Exception e) &#123; ... &#125;try&#123; YYY.close(); &#125;catch (Exception e) &#123; ... &#125; è™½ç„¶æœ‰äº›éº»çƒ¦ï¼Œå´èƒ½é¿å…èµ„æºæ³„éœ²ã€‚æˆ‘æƒ³ï¼Œå¦‚æœæ²¡æœ‰ä¿®æ”¹è¿‡çš„ä»£ç ï¼Œä¸‡ä¸€XXX.close()æŠ›å¼‚å¸¸äº†ï¼Œé‚£ä¹ˆå°±è¿›å…¥äº†cathå—ä¸­äº†ï¼ŒYYY.close()ä¸ä¼šæ‰§è¡Œï¼ŒYYYè¿™å—èµ„æºå°±ä¸ä¼šå›æ”¶äº†ï¼Œä¸€ç›´å ç”¨ç€ï¼Œè¿™æ ·çš„ä»£ç ä¸€å¤šï¼Œæ˜¯å¯èƒ½å¼•èµ·èµ„æºå¥æŸ„æ³„éœ²çš„ã€‚è€Œæ”¹ä¸ºä¸Šé¢çš„å†™æ³•ä¹‹åï¼Œå°±ä¿è¯äº†æ— è®ºå¦‚ä½•XXXå’ŒYYYéƒ½ä¼šè¢«closeæ‰ã€‚ ä»¥ä¸Šå°±æ˜¯ Java å¼€å‘ç¼–ç¨‹æ³¨æ„ç»†èŠ‚çš„å…¨éƒ¨å†…å®¹äº†ï¼Œæ„Ÿè°¢å¤§å®¶çš„é˜…è¯»ï¼","tags":[{"name":"Java","slug":"Java","permalink":"http://yoursite.com/tags/Java/"}]},{"title":"Spring MVCç³»åˆ—æ–‡ç« ï¼ˆäº”ï¼‰ï¼šçœ‹é€ Spring MVC æºä»£ç åˆ†æä¸å®è·µ â€”â€”  Spring MVC ç»„ä»¶åˆ†æ","date":"2017-07-20T16:00:00.000Z","path":"2017/07/21/Spring-MVC03/","text":"ç”±äºæ˜ŸæœŸä¸€æ¥åˆ°é¢è¯•é€šçŸ¥ï¼Œå’Œé¢è¯•å®˜çº¦å¥½äº†æ˜ŸæœŸå››é¢è¯•ï¼Œæ‰€ä»¥è¿™å‡ å¤©æ²¡æ›´æ–°å®Œè¿™ç³»åˆ—çš„æ–‡ç« ï¼Œé¢å®Œè¯•åç«‹é©¬å°±æŠŠè¿™ä¸ªè§£å†³æ‰ã€‚é€šè¿‡è¿™æ¬¡é¢è¯•ï¼Œä¹Ÿè®©æˆ‘æ‡‚å¾—äº†å¾ˆå¤šï¼ŒçŸ¥é“äº†è‡ªå·±çš„ä¸€äº›ä¸è¶³ä¹‹å¤„ï¼Œåé¢è¿˜è¦ç»§ç»­ä¸‹åŠŸå¤«å¥½å¥½çš„æ·±å…¥å¤ä¹ ä¸‹å»ã€‚è¿™å‡ ç¯‡æ–‡ç« å†™çš„æˆ‘è§‰å¾—è¿˜æ˜¯ä¸å¤Ÿä»”ç»†ï¼Œæ„Ÿå…´è¶£çš„è¿˜æ˜¯å»ºè®®è‡ªå·±å»çœ‹çœ‹æºç ã€‚ ç¬¬ 11 ç«  â€”â€” ç»„ä»¶æ¦‚è§ˆHandlerMapping æ ¹æ® request æ‰¾åˆ°å¯¹åº”çš„å¤„ç†å™¨ Handler å’Œ Interceptorsã€‚å†…éƒ¨åªæœ‰ä¸€ä¸ªæ–¹æ³•1HandlerExecutionChain getHandler(HttpServletRequest request) throws Exception; HandlerAdapter Handler é€‚é…å™¨ï¼Œå†…éƒ¨æ–¹æ³•å¦‚ä¸‹ï¼š 123boolean supports(Object handler);//åˆ¤æ–­æ˜¯å¦å¯ä»¥ä½¿ç”¨æŸä¸ª HandlerModelAndView handle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception; //å…·ä½“ä½¿ç”¨long getLastModified(HttpServletRequest request, Object handler);//è·å–èµ„æºä¸Šä¸€æ¬¡ä¿®æ”¹çš„æ—¶é—´ HandlerExceptionResolver æ ¹æ®å¼‚å¸¸è®¾ç½® ModelAndView ï¼Œå†äº¤ç»™ render æ–¹æ³•è¿›è¡Œæ¸²æŸ“ã€‚ 12ModelAndView resolveException( HttpServletRequest request, HttpServletResponse response, @Nullable Object handler, Exception ex) ViewResolver ç”¨æ¥å°† String ç±»å‹çš„è§†å›¾åå’Œ Locale è§£æä¸º View ç±»å‹çš„è§†å›¾ã€‚ 1View resolveViewName(String viewName, Locale locale) throws Exception; å®ƒçš„ä¸€ä¸ªå®ç°ç±» BeanNameViewResolverï¼Œå®ƒé‡å†™ resolveViewName æ–¹æ³•å¦‚ä¸‹: 1234567891011121314151617181920212223public View resolveViewName(String viewName, Locale locale) throws BeansException &#123; ApplicationContext context = getApplicationContext(); //å¦‚æœåº”ç”¨ä¸Šä¸‹æ–‡æ²¡æœ‰æ‰¾åˆ°è§†å›¾ï¼Œè¿”å› null if (!context.containsBean(viewName)) &#123; if (logger.isDebugEnabled()) &#123; logger.debug(\"No matching bean found for view name '\" + viewName + \"'\"); &#125; // Allow for ViewResolver chaining... return null; &#125; //å¦‚æœæ‰¾åˆ°çš„è§†å›¾ç±»å‹ä¸åŒ¹é…ï¼Œä¹Ÿè¿”å› null if (!context.isTypeMatch(viewName, View.class)) &#123; if (logger.isDebugEnabled()) &#123; logger.debug(\"Found matching bean for view name '\" + viewName + \"' - to be ignored since it does not implement View\"); &#125; // Since we're looking into the general ApplicationContext here, // let's accept this as a non-match and allow for chaining as well... return null; &#125; //æ ¹æ®è§†å›¾åç§°ä» Spring å®¹å™¨ä¸­æŸ¥æ‰¾ Beanï¼Œè¿”å›æ‰¾åˆ°çš„ bean return context.getBean(viewName, View.class); &#125; RequestToViewNameTranslator è·å– request ä¸­çš„è§†å›¾åã€‚æ¥å£é‡Œé¢ä¹Ÿæ˜¯åªæœ‰ä¸€ä¸ªæ–¹æ³•ï¼š 1String getViewName(HttpServletRequest request) throws Exception; //æ ¹æ® request æŸ¥æ‰¾è§†å›¾å LocaleResolver ç”¨äºä» request è§£æå‡º Localeã€‚ 123456public interface LocaleResolver &#123; //ä» request è§£æå‡º Locale Locale resolveLocale(HttpServletRequest request); //æ ¹æ® request è®¾ç½® locale void setLocale(HttpServletRequest request, HttpServletResponse response, @Nullable Locale locale);&#125; ThemeResolver è§£æä¸»é¢˜ 123456public interface ThemeResolver &#123; //é€šè¿‡ç»™å®šçš„ request æŸ¥æ‰¾ä¸»é¢˜å String resolveThemeName(HttpServletRequest request); //æ ¹æ®ç»™å®šçš„ request è®¾ç½®ä¸»é¢˜å void setThemeName(HttpServletRequest request, HttpServletResponse response, String themeName);&#125; åœ¨ RequestContext.java æ–‡ä»¶ä¸­å¯ä»¥è·å–ä¸»é¢˜ï¼š 1234567891011121314151617public String getThemeMessage(String code, String defaultMessage) &#123; //è·å–ä¸»é¢˜çš„ä¿¡æ¯ return getTheme().getMessageSource().getMessage(code, null, defaultMessage, this.locale); &#125;public Theme getTheme() &#123; //åˆ¤æ–­ä¸»é¢˜æ˜¯å¦ä¸ºç©º if (this.theme == null) &#123; // é€šè¿‡ RequestContextUtils è·å– request ä¸­çš„ä¸»é¢˜å this.theme = RequestContextUtils.getTheme(this.request); if (this.theme == null) &#123; //å¦‚æœè¿˜æ˜¯ä¸ºç©ºçš„è¯ //é‚£å°±æ˜¯æ²¡æœ‰æœ‰æ•ˆçš„ä¸»é¢˜è§£æå™¨å’Œä¸»é¢˜ this.theme = getFallbackTheme(); &#125; &#125; return this.theme; &#125; RequestContextUtils.getTheme() æ–¹æ³•ï¼š 1234567891011public static Theme getTheme(HttpServletRequest request) &#123; ThemeResolver themeResolver = getThemeResolver(request); ThemeSource themeSource = getThemeSource(request); if (themeResolver != null &amp;&amp; themeSource != null) &#123; String themeName = themeResolver.resolveThemeName(request); return themeSource.getTheme(themeName); &#125; else &#123; return null; &#125; &#125; MultipartResolver ç”¨äºå¤„ç†ä¸Šä¼ è¯·æ±‚ï¼Œå¤„ç†æ–¹æ³•ï¼šå°†æ™®é€šçš„ request åŒ…è£…æˆ MultipartHttpServletRequest 12345678public interface MultipartResolver &#123; //æ ¹æ® request åˆ¤æ–­æ˜¯å¦æ˜¯ä¸Šä¼ è¯·æ±‚ boolean isMultipart(HttpServletRequest request); //å°† request åŒ…è£…æˆ MultipartHttpServletRequest MultipartHttpServletRequest resolveMultipart(HttpServletRequest request) throws MultipartException; //æ¸…ç†ä¸Šä¼ è¿‡ç¨‹ä¸­äº§ç”Ÿçš„ä¸´æ—¶èµ„æº void cleanupMultipart(MultipartHttpServletRequest request);&#125; FlashMapManager FlashMap ä¸»è¦åœ¨ redirect ä¸­ä¼ é€’å‚æ•°ï¼ŒFlashMapManager ç”¨æ¥ç®¡ç† FlashMap çš„ã€‚ 1234567public interface FlashMapManager &#123; //æ¢å¤å‚æ•°ï¼Œå¹¶å°†æ¢å¤è¿‡çš„å’Œè¶…æ—¶çš„å‚æ•°ä»ä¿å­˜ä»‹è´¨ä¸­åˆ é™¤ @Nullable FlashMap retrieveAndUpdate(HttpServletRequest request, HttpServletResponse response); //å°†å‚æ•°ä¿å­˜èµ·æ¥ void saveOutputFlashMap(FlashMap flashMap, HttpServletRequest request, HttpServletResponse response);&#125; å°ç»“ä»‹ç» Spring MVC ä¸­ä¹å¤§ç»„ä»¶çš„æ¥å£ã€ä½œç”¨ã€å†…éƒ¨æ–¹æ³•å®ç°åŠä½œç”¨è¿›è¡Œäº†ç®€å•çš„ä»‹ç»ï¼Œè¯¦ç»†çš„è¿˜éœ€å¤§å®¶è‡ªå·±å»çœ‹æºç ã€‚ æ€»ç»“Spring MVC åŸç†æ€»ç»“æœ¬è´¨æ˜¯ä¸€ä¸ª Servletï¼Œè¿™ä¸ª Servlet ç»§æ‰¿è‡ª HttpServletã€‚Spring MVC ä¸­æä¾›äº†ä¸‰ä¸ªå±‚æ¬¡çš„ Servletï¼šHttpServletBeanã€FrameworkServlet å’Œ DispatcherServletã€‚ä»–ä»¬ç›¸äº’ç»§æ‰¿ï¼Œ HttpServletBean ç›´æ¥ç»§æ‰¿è‡ª Java çš„ HttpServletã€‚HttpServletBean ç”¨äºå°† Servlet ä¸­çš„ Servlet ä¸­é…ç½®çš„å‚æ•°è®¾ç½®åˆ°ç›¸åº”çš„å±æ€§ä¸­ï¼ŒFrameworkServlet åˆå§‹åŒ–äº† Spring MVC ä¸­æ‰€ä½¿ç”¨çš„ WebApplicationContextï¼Œå…·ä½“å¤„ç†è¯·æ±‚çš„ 9 å¤§ç»„ä»¶æ˜¯åœ¨ DispatcherServlet ä¸­åˆå§‹åŒ–çš„ï¼Œæ•´ä¸ªç»§æ‰¿å›¾å¦‚ä¸‹ï¼š æœ€åæ–‡ç« å¯è½¬å‘ï¼Œä½†è¯·æ³¨æ˜åŸåˆ›åœ°å€ï¼Œè°¢è°¢æ”¯æŒã€‚","tags":[{"name":"Spring MVC","slug":"Spring-MVC","permalink":"http://yoursite.com/tags/Spring-MVC/"}]},{"title":"Spring MVCç³»åˆ—æ–‡ç« ï¼ˆå››ï¼‰ï¼šçœ‹é€ Spring MVC æºä»£ç åˆ†æä¸å®è·µ â€”â€”  ä¿¯è§† Spring MVC","date":"2017-07-13T16:00:00.000Z","path":"2017/07/14/Spring-MVC02/","text":"Spring MVC Spring MVC ä¹‹åˆä½“éªŒç¯å¢ƒæ­å»ºåœ¨ IDEA ä¸­æ–°å»ºä¸€ä¸ª web é¡¹ç›®ï¼Œç”¨ Maven ç®¡ç†é¡¹ç›®çš„è¯ï¼Œåœ¨ pom.xml ä¸­åŠ å…¥ Spring MVC å’Œ Servlet ä¾èµ–å³å¯ã€‚ 12345678910111213&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-webmvc --&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt; &lt;version&gt;4.3.9.RELEASE&lt;/version&gt;&lt;/dependency&gt;&lt;!-- https://mvnrepository.com/artifact/javax.servlet/javax.servlet-api --&gt;&lt;dependency&gt; &lt;groupId&gt;javax.servlet&lt;/groupId&gt; &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt; &lt;version&gt;3.1.0&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt;&lt;/dependency&gt; Spring MVC ç®€å•é…ç½® åœ¨ web.xml ä¸­é…ç½® Servlet åˆ›å»º Spring MVC çš„ xml é…ç½®æ–‡ä»¶ åˆ›å»º Controller å’Œ View 1ã€web.xml 12345678910111213141516171819202122232425262728293031323334&lt;!-- Spring MVCé…ç½® --&gt;&lt;!-- ====================================== --&gt;&lt;servlet&gt; &lt;servlet-name&gt;spring&lt;/servlet-name&gt; &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt; &lt;!-- å¯ä»¥è‡ªå®šä¹‰servlet.xmlé…ç½®æ–‡ä»¶çš„ä½ç½®å’Œåç§°ï¼Œé»˜è®¤ä¸ºWEB-INFç›®å½•ä¸‹ï¼Œåç§°ä¸º[&lt;servlet-name&gt;]-servlet.xmlï¼Œå¦‚spring-servlet.xml &lt;init-param&gt; &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt; &lt;param-value&gt;/WEB-INF/spring-servlet.xml&lt;/param-value&gt;&amp;nbsp; é»˜è®¤ &lt;/init-param&gt; --&gt; &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;&lt;/servlet&gt;&lt;servlet-mapping&gt; &lt;servlet-name&gt;spring&lt;/servlet-name&gt; &lt;url-pattern&gt;*.do&lt;/url-pattern&gt;&lt;/servlet-mapping&gt;&lt;!-- Springé…ç½® --&gt;&lt;!-- ====================================== --&gt;&lt;listener&gt; &lt;listenerclass&gt; org.springframework.web.context.ContextLoaderListener &lt;/listener-class&gt;&lt;/listener&gt;&lt;!-- æŒ‡å®šSpring Beançš„é…ç½®æ–‡ä»¶æ‰€åœ¨ç›®å½•ã€‚é»˜è®¤é…ç½®åœ¨WEB-INFç›®å½•ä¸‹ --&gt;&lt;context-param&gt; &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt; &lt;param-value&gt;classpath:config/applicationContext.xml&lt;/param-value&gt;&lt;/context-param&gt; 2ã€spring-servlet.xml 123456789101112131415161718192021&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;beans xmlns=\"http://www.springframework.org/schema/beans\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:p=\"http://www.springframework.org/schema/p\" xmlns:context=\"http://www.springframework.org/schema/context\" xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.0.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd http://www.springframework.org/schema/context &lt;a href=\"http://www.springframework.org/schema/context/spring-context-3.0.xsd\"&gt;http://www.springframework.org/schema/context/spring-context-3.0.xsd&lt;/a&gt;\"&gt; &lt;!-- å¯ç”¨spring mvc æ³¨è§£ --&gt; &lt;context:annotation-config /&gt; &lt;!-- è®¾ç½®ä½¿ç”¨æ³¨è§£çš„ç±»æ‰€åœ¨çš„jaråŒ… --&gt; &lt;context:component-scan base-package=\"controller\"&gt;&lt;/context:component-scan&gt; &lt;!-- å®Œæˆè¯·æ±‚å’Œæ³¨è§£POJOçš„æ˜ å°„ --&gt; &lt;bean class=\"org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter\" /&gt; &lt;!-- å¯¹è½¬å‘é¡µé¢çš„è·¯å¾„è§£æã€‚prefixï¼šå‰ç¼€ï¼Œ suffixï¼šåç¼€ --&gt; &lt;bean class=\"org.springframework.web.servlet.view.InternalResourceViewResolver\" p:prefix=\"/jsp/\" p:suffix=\".jsp\" /&gt;&lt;/beans&gt; 3ã€Controller 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061package controller;import javax.servlet.http.HttpServletRequest;import org.springframework.stereotype.Controller;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.RequestParam;import entity.User;@Controller //ç±»ä¼¼Strutsçš„Actionpublic class TestController &#123; @RequestMapping(\"/test/login.do\") // è¯·æ±‚urlåœ°å€æ˜ å°„ï¼Œç±»ä¼¼Strutsçš„action-mapping public String testLogin(@RequestParam(value=\"username\")String username, String password, HttpServletRequest request) &#123; // @RequestParamæ˜¯æŒ‡è¯·æ±‚urlåœ°å€æ˜ å°„ä¸­å¿…é¡»å«æœ‰çš„å‚æ•°(é™¤éå±æ€§ required=false, é»˜è®¤ä¸º true) // @RequestParamå¯ç®€å†™ä¸ºï¼š@RequestParam(\"username\") if (!\"admin\".equals(username) || !\"admin\".equals(password)) &#123; return \"loginError\"; // è·³è½¬é¡µé¢è·¯å¾„ï¼ˆé»˜è®¤ä¸ºè½¬å‘ï¼‰ï¼Œè¯¥è·¯å¾„ä¸éœ€è¦åŒ…å«spring-servleté…ç½®æ–‡ä»¶ä¸­é…ç½®çš„å‰ç¼€å’Œåç¼€ &#125; return \"loginSuccess\"; &#125; @RequestMapping(\"/test/login2.do\") public ModelAndView testLogin2(String username, String password, int age)&#123; // requestå’Œresponseä¸å¿…éè¦å‡ºç°åœ¨æ–¹æ³•ä¸­ï¼Œå¦‚æœç”¨ä¸ä¸Šçš„è¯å¯ä»¥å»æ‰ // å‚æ•°çš„åç§°æ˜¯ä¸é¡µé¢æ§ä»¶çš„nameç›¸åŒ¹é…ï¼Œå‚æ•°ç±»å‹ä¼šè‡ªåŠ¨è¢«è½¬æ¢ if (!\"admin\".equals(username) || !\"admin\".equals(password) || age &lt; 5) &#123; return new ModelAndView(\"loginError\"); // æ‰‹åŠ¨å®ä¾‹åŒ–ModelAndViewå®Œæˆè·³è½¬é¡µé¢ï¼ˆè½¬å‘ï¼‰ï¼Œæ•ˆæœç­‰åŒäºä¸Šé¢çš„æ–¹æ³•è¿”å›å­—ç¬¦ä¸² &#125; return new ModelAndView(new RedirectView(\"../index.jsp\")); // é‡‡ç”¨é‡å®šå‘æ–¹å¼è·³è½¬é¡µé¢ // é‡å®šå‘è¿˜æœ‰ä¸€ç§ç®€å•å†™æ³• // return new ModelAndView(\"redirect:../index.jsp\"); &#125; @RequestMapping(\"/test/login3.do\") public ModelAndView testLogin3(User user) &#123; // åŒæ ·æ”¯æŒå‚æ•°ä¸ºè¡¨å•å¯¹è±¡ï¼Œç±»ä¼¼äºStrutsçš„ActionFormï¼ŒUserä¸éœ€è¦ä»»ä½•é…ç½®ï¼Œç›´æ¥å†™å³å¯ String username = user.getUsername(); String password = user.getPassword(); int age = user.getAge(); if (!\"admin\".equals(username) || !\"admin\".equals(password) || age &lt; 5) &#123; return new ModelAndView(\"loginError\"); &#125; return new ModelAndView(\"loginSuccess\"); &#125; @Resource(name = \"loginService\") // è·å–applicationContext.xmlä¸­beançš„idä¸ºloginServiceçš„ï¼Œå¹¶æ³¨å…¥ private LoginService loginService; //ç­‰ä»·äºspringä¼ ç»Ÿæ³¨å…¥æ–¹å¼å†™getå’Œsetæ–¹æ³•ï¼Œè¿™æ ·çš„å¥½å¤„æ˜¯ç®€æ´å·¥æ•´ï¼Œçœå»äº†ä¸å¿…è¦å¾—ä»£ç  @RequestMapping(\"/test/login4.do\") public String testLogin4(User user) &#123; if (loginService.login(user) == false) &#123; return \"loginError\"; &#125; return \"loginSuccess\"; &#125;&#125; @RequestMapping å¯ä»¥å†™åœ¨æ–¹æ³•ä¸Šï¼Œä¹Ÿå¯ä»¥å†™åœ¨ç±»ä¸Šï¼Œä¸Šé¢ä»£ç æ–¹æ³•ä¸Šçš„ RequestMapping éƒ½å«æœ‰ /test ï¼Œ é‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥å°†å…¶æŠ½å‡ºç›´æ¥å†™åœ¨ç±»ä¸Šï¼Œé‚£ä¹ˆæ–¹æ³•é‡Œé¢å°±ä¸éœ€è¦å†™ /test äº†ã€‚ å¦‚ä¸‹å³å¯ï¼š 12345678910111213141516@Controller@RequestMapping(\"/test\")public class TestController &#123; @RequestMapping(\"/login.do\") // è¯·æ±‚urlåœ°å€æ˜ å°„ï¼Œç±»ä¼¼Strutsçš„action-mapping public String testLogin(@RequestParam(value=\"username\")String username, String password, HttpServletRequest request) &#123; // @RequestParamæ˜¯æŒ‡è¯·æ±‚urlåœ°å€æ˜ å°„ä¸­å¿…é¡»å«æœ‰çš„å‚æ•°(é™¤éå±æ€§ required=false, é»˜è®¤ä¸º true) // @RequestParamå¯ç®€å†™ä¸ºï¼š@RequestParam(\"username\") if (!\"admin\".equals(username) || !\"admin\".equals(password)) &#123; return \"loginError\"; // è·³è½¬é¡µé¢è·¯å¾„ï¼ˆé»˜è®¤ä¸ºè½¬å‘ï¼‰ï¼Œè¯¥è·¯å¾„ä¸éœ€è¦åŒ…å«spring-servleté…ç½®æ–‡ä»¶ä¸­é…ç½®çš„å‰ç¼€å’Œåç¼€ &#125; return \"loginSuccess\"; &#125; //çœç•¥å…¶ä»–çš„&#125; ä¸Šé¢çš„ä»£ç æ–¹æ³•çš„å‚æ•°ä¸­å¯ä»¥çœ‹åˆ°æœ‰ä¸€ä¸ª @RequestParam æ³¨è§£ï¼Œå…¶å®è¿˜æœ‰ @PathVariable ã€‚è¿™ä¸¤ä¸ªçš„åŒºåˆ«æ˜¯å•¥å‘¢ï¼Ÿ @PathVariable æ ‡è®°åœ¨æ–¹æ³•çš„å‚æ•°ä¸Šï¼Œåˆ©ç”¨å®ƒæ ‡è®°çš„å‚æ•°å¯ä»¥åˆ©ç”¨è¯·æ±‚è·¯å¾„ä¼ å€¼ã€‚ @RequestParamæ˜¯æŒ‡è¯·æ±‚urlåœ°å€æ˜ å°„ä¸­å¿…é¡»å«æœ‰çš„å‚æ•°(é™¤éå±æ€§ required=false, é»˜è®¤ä¸º true) çœ‹å¦‚ä¸‹ä¾‹å­ï¼š 123456789101112@RequestMapping(\"/user/&#123;userId&#125;\") // è¯·æ±‚urlåœ°å€æ˜ å°„public String userinfo(Model model, @PathVariable(\"userId\") int userId, HttpSession session) &#123; System.out.println(\"è¿›å…¥ userinfo é¡µé¢\"); //åˆ¤æ–­æ˜¯å¦æœ‰ç”¨æˆ·ç™»å½• User user1 = (User) session.getAttribute(\"user\"); if (user1 == null) &#123; return \"login\"; &#125; User user = userService.selectUserById(userId); model.addAttribute(\"user\", user); return \"userinfo\"; &#125; ä¸Šé¢ä¾‹å­ä¸­å¦‚æœæµè§ˆå™¨è¯·æ±‚çš„æ˜¯ /user/1 çš„æ—¶å€™ï¼Œå°±è¡¨ç¤ºæ­¤æ—¶çš„ç”¨æˆ· id ä¸º 1ï¼Œæ­¤æ—¶å°±ä¼šå…ˆä» session ä¸­æŸ¥æ‰¾æ˜¯å¦æœ‰ â€œuserâ€ å±æ€§ï¼Œå¦‚æœæœ‰çš„è¯ï¼Œå°±ä»£è¡¨ç”¨æˆ·æ­¤æ—¶å¤„äºç™»å½•çš„çŠ¶æ€ï¼Œå¦‚æœæ²¡æœ‰çš„è¯ï¼Œå°±ä¼šè®©ç”¨æˆ·è¿”å›åˆ°ç™»å½•é¡µé¢ï¼Œè¿™ç§æœºåˆ¶åœ¨å„ç§ç½‘ç«™ç»å¸¸ä¼šä½¿ç”¨çš„ï¼Œç„¶åæ ¹æ®è¿™ä¸ª id = 1 ï¼Œå»æŸ¥æ‰¾ç”¨æˆ·çš„ä¿¡æ¯ï¼Œç„¶åæŠŠæŸ¥æ‰¾çš„ â€œuserâ€ æ”¾åœ¨ model ä¸­ï¼Œç„¶åè¿”å›ç”¨æˆ·è¯¦æƒ…é¡µé¢ï¼Œæœ€ååœ¨é¡µé¢ä¸­ç”¨ $!{user.name} è·å–ç”¨æˆ·çš„åå­—ï¼ŒåŒæ ·çš„æ–¹å¼å¯ä»¥è·å–ç”¨æˆ·çš„å…¶ä»–ä¿¡æ¯ï¼ŒæŠŠæ‰€æœ‰çš„ç”¨æˆ·è¯¦æƒ…ä¿¡æ¯å±•ç¤ºå‡ºæ¥ã€‚ åˆ›å»º Spring MVC ä¹‹å™¨Spring MVC æ ¸å¿ƒ Servlet æ¶æ„å›¾å¦‚ä¸‹ï¼š Java ä¸­å¸¸ç”¨çš„ Servlet æˆ‘åœ¨å¦å¤–ä¸€ç¯‡æ–‡ç« å†™çš„å¾ˆæ¸…æ¥šäº†ï¼Œæœ‰å…´è¶£çš„è¯·çœ‹ï¼šé€šè¿‡æºç è¯¦è§£ Servlet ï¼Œè¿™é‡Œæˆ‘å°±ä¸å†è§£é‡Šäº†ã€‚ è¿™é‡Œä¸»è¦è®² Spring ä¸­çš„ HttpServletBeanã€FrameworkServletã€DispatcherServlet è¿™ä¸‰ä¸ªç±»çš„åˆ›å»ºè¿‡ç¨‹ã€‚ é€šè¿‡ä¸Šé¢çš„å›¾ï¼Œå¯ä»¥çœ‹åˆ°è¿™ä¸‰ä¸ªç±»ç›´æ¥å®ç°ä¸‰ä¸ªæ¥å£ï¼šEnvironmentCapableã€EnvironmentAwareã€ApplicationContextAwareã€‚ä¸‹é¢æˆ‘ä»¬ç›´æ¥çœ‹ä¸‹è¿™ä¸‰ä¸ªæ¥å£çš„å†…éƒ¨æ˜¯æ€æ ·å†™çš„ã€‚ EnvironmentCapable.java 12345public interface EnvironmentCapable &#123; //è¿”å›ç»„ä»¶çš„ç¯å¢ƒï¼Œå¯èƒ½è¿”å› null æˆ–è€…é»˜è®¤ç¯å¢ƒ @Nullable Environment getEnvironment();&#125; EnvironmentAware.java 1234public interface EnvironmentAware extends Aware &#123; //è®¾ç½®ç»„ä»¶çš„è¿è¡Œç¯å¢ƒ void setEnvironment(Environment environment);&#125; ApplicationContextAware.java 12345public interface ApplicationContextAware extends Aware &#123; //è®¾ç½®è¿è¡Œå¯¹è±¡çš„åº”ç”¨ä¸Šä¸‹æ–‡ //å½“ç±»å®ç°è¿™ä¸ªæ¥å£åï¼Œè¿™ä¸ªç±»å¯ä»¥è·å–ApplicationContextä¸­æ‰€æœ‰çš„beanï¼Œä¹Ÿå°±æ˜¯è¯´è¿™ä¸ªç±»å¯ä»¥ç›´æ¥è·å–Springé…ç½®æ–‡ä»¶ä¸­æ‰€æœ‰æœ‰å¼•ç”¨åˆ°çš„beanå¯¹è±¡ void setApplicationContext(ApplicationContext applicationContext) throws BeansException;&#125; æ€ä¹ˆä½¿ç”¨è¿™ä¸ªè¿™ä¸ªæ¥å£å‘¢ï¼Ÿ å‚è€ƒæ–‡ç« ï¼šorg.springframework.context.ApplicationContextAwareä½¿ç”¨ç†è§£ HttpServletBean è¿™é‡Œå°±ç›´æ¥çœ‹å…¶ä¸­æœ€é‡è¦çš„ init() æ–¹æ³•çš„ä»£ç äº†ï¼š 12345678910111213141516171819202122232425262728293031323334/** * å°†é…ç½®å‚æ•°æ˜ å°„åˆ°æ­¤servletçš„beanå±æ€§ï¼Œå¹¶è°ƒç”¨å­ç±»åˆå§‹åŒ–ã€‚ * å¦‚æœ bean é…ç½®ä¸åˆæ³•ï¼ˆæˆ–è€…éœ€è¦çš„å‚æ•°ä¸¢å¤±ï¼‰æˆ–è€…å­ç±»åˆå§‹åŒ–å‘ç”Ÿé”™è¯¯ï¼Œé‚£ä¹ˆå°±ä¼šæŠ›å‡º ServletException å¼‚å¸¸ */@Overridepublic final void init() throws ServletException &#123; //æ—¥å¿—ä»£ç åˆ é™¤äº† // ä»initå‚æ•°è®¾ç½®beanå±æ€§ã€‚ //è·å¾—web.xmlä¸­çš„contextConfigLocationé…ç½®å±æ€§ï¼Œå°±æ˜¯spring MVCçš„é…ç½®æ–‡ä»¶ PropertyValues pvs = new ServletConfigPropertyValues(getServletConfig(), this.requiredProperties); if (!pvs.isEmpty()) &#123; try &#123; BeanWrapper bw = PropertyAccessorFactory.forBeanPropertyAccess(this); //è·å–æœåŠ¡å™¨çš„å„ç§ä¿¡æ¯ ResourceLoader resourceLoader = new ServletContextResourceLoader(getServletContext()); bw.registerCustomEditor(Resource.class, new ResourceEditor(resourceLoader, getEnvironment())); //æ¨¡æ¿æ–¹æ³•ï¼Œå¯ä»¥åœ¨å­ç±»ä¸­è°ƒç”¨ï¼Œåšä¸€äº›åˆå§‹åŒ–å·¥ä½œï¼Œbwä»£è¡¨DispatcherServelt initBeanWrapper(bw); //å°†é…ç½®çš„åˆå§‹åŒ–å€¼è®¾ç½®åˆ°DispatcherServletä¸­ bw.setPropertyValues(pvs, true); &#125; catch (BeansException ex) &#123; //æ—¥å¿—ä»£ç  throw ex; &#125; &#125; // Let subclasses do whatever initialization they like. //æ¨¡æ¿æ–¹æ³•ï¼Œå­ç±»åˆå§‹åŒ–çš„å…¥å£æ–¹æ³• initServletBean(); //æ—¥å¿—ä»£ç åˆ é™¤äº†&#125; FrameworkServlet å…¶ä¸­é‡è¦æ–¹æ³•å¦‚ä¸‹ï¼šé‡Œé¢ä¹Ÿå°±ä¸¤å¥å…³é”®ä»£ç ï¼Œæ—¥å¿—ä»£ç æˆ‘ç›´æ¥åˆ æ‰äº† 12345678910111213141516171819202122protected final void initServletBean() throws ServletException &#123; //æ—¥å¿—ä»£ç åˆ é™¤äº† long startTime = System.currentTimeMillis(); //å°±æ˜¯ try è¯­å¥é‡Œé¢æœ‰ä¸¤å¥å…³é”®ä»£ç  try &#123; //åˆå§‹åŒ– webApplicationContext this.webApplicationContext = initWebApplicationContext(); //æ¨¡æ¿æ–¹æ³•ï¼Œ initFrameworkServlet(); &#125; catch (ServletException ex) &#123; this.logger.error(\"Context initialization failed\", ex); throw ex; &#125; catch (RuntimeException ex) &#123; this.logger.error(\"Context initialization failed\", ex); throw ex; &#125; //æ—¥å¿—ä»£ç åˆ é™¤äº† &#125; å†æ¥çœ‹çœ‹ä¸Šé¢ä»£ç ä¸­è°ƒç”¨çš„ initWebApplicationContext() æ–¹æ³• 1234567891011121314151617181920212223242526272829303132333435363738394041424344protected WebApplicationContext initWebApplicationContext() &#123; //è·å– rootContext WebApplicationContext rootContext = WebApplicationContextUtils.getWebApplicationContext(getServletContext()); WebApplicationContext wac = null; if (this.webApplicationContext != null) &#123; // ä¸Šä¸‹æ–‡å®ä¾‹åœ¨æ„é€ æ—¶æ³¨å…¥ - &gt;ä½¿ç”¨å®ƒ wac = this.webApplicationContext; if (wac instanceof ConfigurableWebApplicationContext) &#123; ConfigurableWebApplicationContext cwac = (ConfigurableWebApplicationContext) wac; if (!cwac.isActive()) &#123; // å¦‚æœä¸Šä¸‹æ–‡å°šæœªåˆ·æ–° -&gt; æä¾›è¯¸å¦‚è®¾ç½®çˆ¶ä¸Šä¸‹æ–‡ï¼Œè®¾ç½®åº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡IDç­‰æœåŠ¡ if (cwac.getParent() == null) &#123; // ä¸Šä¸‹æ–‡å®ä¾‹è¢«æ³¨å…¥æ²¡æœ‰æ˜¾å¼çš„çˆ¶ç±» -&gt; å°†æ ¹åº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡ï¼ˆå¦‚æœæœ‰çš„è¯å¯èƒ½ä¸ºnullï¼‰è®¾ç½®ä¸ºçˆ¶çº§ cwac.setParent(rootContext); &#125; configureAndRefreshWebApplicationContext(cwac); &#125; &#125; &#125; if (wac == null) &#123; // å½“ WebApplicationContext å·²ç»å­˜åœ¨ ServletContext ä¸­æ—¶ï¼Œé€šè¿‡é…ç½®åœ¨ servlet ä¸­çš„ ContextAttribute å‚æ•°è·å– wac = findWebApplicationContext(); &#125; if (wac == null) &#123; // å¦‚æœ WebApplicationContext è¿˜æ²¡æœ‰åˆ›å»ºï¼Œåˆ™åˆ›å»ºä¸€ä¸ª wac = createWebApplicationContext(rootContext); &#125; if (!this.refreshEventReceived) &#123; // å½“ ContextRefreshedEvent äº‹ä»¶æ²¡æœ‰è§¦å‘æ—¶è°ƒç”¨æ­¤æ–¹æ³•ï¼Œæ¨¡æ¿æ–¹æ³•ï¼Œå¯ä»¥åœ¨å­ç±»é‡å†™ onRefresh(wac); &#125; if (this.publishContext) &#123; // å°† ApplicationContext ä¿å­˜åˆ° ServletContext ä¸­å» String attrName = getServletContextAttributeName(); getServletContext().setAttribute(attrName, wac); if (this.logger.isDebugEnabled()) &#123; this.logger.debug(\"Published WebApplicationContext of servlet '\" + getServletName() + \"' as ServletContext attribute with name [\" + attrName + \"]\"); &#125; &#125; return wac; &#125; initWebApplicationContext æ–¹æ³•åšäº†ä¸‰ä»¶äº‹ï¼š è·å– Spring çš„æ ¹å®¹å™¨ rootContext è®¾ç½® webApplicationContext å¹¶æ ¹æ®æƒ…å†µè°ƒç”¨ onRefresh æ–¹æ³• å°† webApplicationContext è®¾ç½®åˆ° ServletContext ä¸­ è¿™é‡Œåœ¨è®²è®²ä¸Šé¢ä»£ç ä¸­çš„ wac == null çš„å‡ ç§æƒ…å†µï¼š 1ï¼‰ã€å½“ WebApplicationContext å·²ç»å­˜åœ¨ ServletContext ä¸­æ—¶ï¼Œé€šè¿‡é…ç½®åœ¨ servlet ä¸­çš„ ContextAttribute å‚æ•°è·å–ï¼Œè°ƒç”¨çš„æ˜¯ findWebApplicationContext() æ–¹æ³• 123456789101112protected WebApplicationContext findWebApplicationContext() &#123; String attrName = getContextAttribute(); if (attrName == null) &#123; return null; &#125; WebApplicationContext wac = WebApplicationContextUtils.getWebApplicationContext(getServletContext(), attrName); if (wac == null) &#123; throw new IllegalStateException(\"No WebApplicationContext found: initializer not registered?\"); &#125; return wac; &#125; 2)ã€å¦‚æœ WebApplicationContext è¿˜æ²¡æœ‰åˆ›å»ºï¼Œè°ƒç”¨çš„æ˜¯ createWebApplicationContext æ–¹æ³• 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758protected WebApplicationContext createWebApplicationContext(@Nullable ApplicationContext parent) &#123; //è·å–åˆ›å»ºç±»å‹ Class&lt;?&gt; contextClass = getContextClass(); //åˆ é™¤äº†æ‰“å°æ—¥å¿—ä»£ç  //æ£€æŸ¥åˆ›å»ºç±»å‹ if (!ConfigurableWebApplicationContext.class.isAssignableFrom(contextClass)) &#123; throw new ApplicationContextException( \"Fatal initialization error in servlet with name '\" + getServletName() + \"': custom WebApplicationContext class [\" + contextClass.getName() + \"] is not of type ConfigurableWebApplicationContext\"); &#125; //å…·ä½“åˆ›å»º ConfigurableWebApplicationContext wac = (ConfigurableWebApplicationContext) BeanUtils.instantiateClass(contextClass); wac.setEnvironment(getEnvironment()); wac.setParent(parent); //å¹¶è®¾ç½®çš„ contextConfigLocation å‚æ•°ä¼ ç»™ wacï¼Œé»˜è®¤æ˜¯ WEB-INFO/[ServletName]-Servlet.xml wac.setConfigLocation(getContextConfigLocation()); //è°ƒç”¨çš„æ˜¯ä¸‹é¢çš„æ–¹æ³• configureAndRefreshWebApplicationContext(wac); return wac; &#125;protected void configureAndRefreshWebApplicationContext(ConfigurableWebApplicationContext wac) &#123; if (ObjectUtils.identityToString(wac).equals(wac.getId())) &#123; // The application context id is still set to its original default value // -&gt; assign a more useful id based on available information if (this.contextId != null) &#123; wac.setId(this.contextId); &#125; else &#123; // Generate default id... wac.setId(ConfigurableWebApplicationContext.APPLICATION_CONTEXT_ID_PREFIX + ObjectUtils.getDisplayString(getServletContext().getContextPath()) + '/' + getServletName()); &#125; &#125; wac.setServletContext(getServletContext()); wac.setServletConfig(getServletConfig()); wac.setNamespace(getNamespace()); wac.addApplicationListener(new SourceFilteringListener(wac, new ContextRefreshListener())); // The wac environment's #initPropertySources will be called in any case when the context // is refreshed; do it eagerly here to ensure servlet property sources are in place for // use in any post-processing or initialization that occurs below prior to #refresh ConfigurableEnvironment env = wac.getEnvironment(); if (env instanceof ConfigurableWebEnvironment) &#123; ((ConfigurableWebEnvironment) env).initPropertySources(getServletContext(), getServletConfig()); &#125; postProcessWebApplicationContext(wac); applyInitializers(wac); wac.refresh(); &#125; é‡Œé¢è¿˜æœ‰ doXXX() æ–¹æ³•ï¼Œå¤§å®¶æ„Ÿå…´è¶£çš„å¯ä»¥å»çœ‹çœ‹ã€‚ DispatcherServlet DispatcherServlet ç»§æ‰¿è‡ª FrameworkServletï¼ŒonRefresh æ–¹æ³•æ˜¯ DispatcherServlet çš„å…¥å£æ–¹æ³•ï¼Œåœ¨ initStrategies æ–¹æ³•ä¸­è°ƒç”¨äº† 9 ä¸ªåˆå§‹åŒ–çš„æ–¹æ³•ã€‚ è¿™é‡Œåˆ†æå…¶ä¸­ä¸€ä¸ªåˆå§‹åŒ–æ–¹æ³•ï¼šinitLocaleResolver() æ–¹æ³• 123456789101112private void initLocaleResolver(ApplicationContext context) &#123; try &#123; //åœ¨ context ä¸­è·å– this.localeResolver = context.getBean(LOCALE_RESOLVER_BEAN_NAME, LocaleResolver.class); //åˆ é™¤äº†æ‰“å°æ—¥å¿—çš„ä»£ç  &#125; catch (NoSuchBeanDefinitionException ex) &#123; //ä½¿ç”¨é»˜è®¤çš„ç­–ç•¥ this.localeResolver = getDefaultStrategy(context, LocaleResolver.class); //åˆ é™¤äº†æ‰“å°æ—¥å¿—çš„ä»£ç  &#125; &#125; æŸ¥çœ‹é»˜è®¤ç­–ç•¥ä»£ç ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647protected &lt;T&gt; T getDefaultStrategy(ApplicationContext context, Class&lt;T&gt; strategyInterface) &#123; //è°ƒç”¨ getDefaultStrategies æ–¹æ³• List&lt;T&gt; strategies = getDefaultStrategies(context, strategyInterface); if (strategies.size() != 1) &#123; throw new BeanInitializationException( \"DispatcherServlet needs exactly 1 strategy for interface [\" + strategyInterface.getName() + \"]\"); &#125; return strategies.get(0); &#125; /** * Create a List of default strategy objects for the given strategy interface. * &lt;p&gt;The default implementation uses the \"DispatcherServlet.properties\" file (in the same * package as the DispatcherServlet class) to determine the class names. It instantiates * the strategy objects through the context's BeanFactory. */ @SuppressWarnings(\"unchecked\") protected &lt;T&gt; List&lt;T&gt; getDefaultStrategies(ApplicationContext context, Class&lt;T&gt; strategyInterface) &#123; String key = strategyInterface.getName(); //æ ¹æ®ç­–ç•¥æ¥å£çš„åå­—ä» defaultStrategies è·å–æ‰€éœ€ç­–ç•¥çš„ç±»å‹ String value = defaultStrategies.getProperty(key); if (value != null) &#123; //å¦‚æœæœ‰å¤šä¸ªé»˜è®¤å€¼çš„è¯ï¼Œå°±ä»¥é€—å·åˆ†éš”ä¸ºæ•°ç»„ String[] classNames = StringUtils.commaDelimitedListToStringArray(value); List&lt;T&gt; strategies = new ArrayList&lt;&gt;(classNames.length); //æŒ‰è·å–åˆ°çš„ç±»å‹åˆå§‹åŒ–ç­–ç•¥ for (String className : classNames) &#123; try &#123; Class&lt;?&gt; clazz = ClassUtils.forName(className, DispatcherServlet.class.getClassLoader()); Object strategy = createDefaultStrategy(context, clazz); strategies.add((T) strategy); &#125; catch (ClassNotFoundException ex) &#123; throw new BeanInitializationException( \"Could not find DispatcherServlet's default strategy class [\" + className + \"] for interface [\" + key + \"]\", ex); &#125; catch (LinkageError err) &#123; throw new BeanInitializationException( \"Error loading DispatcherServlet's default strategy class [\" + className + \"] for interface [\" + key + \"]: problem with class file or dependent class\", err); &#125; &#125; return strategies; &#125; else &#123; return new LinkedList&lt;&gt;(); &#125; &#125; å…¶ä»–å‡ ä¸ªæ–¹æ³•å¤§æ¦‚ä¹Ÿç±»ä¼¼ï¼Œæˆ‘å°±ä¸å†å†™äº†ã€‚ å°ç»“ä¸»è¦è®²äº† Spring MVC è‡ªèº«åˆ›å»ºè¿‡ç¨‹ï¼Œåˆ†æäº† Spring MVC ä¸­ Servlet çš„ä¸‰ä¸ªå±‚æ¬¡ï¼šHttpServletBeanã€FrameworkServlet å’Œ DispatcherServletã€‚HttpServletBean ç»§æ‰¿è‡ª Java çš„ HttpServletï¼Œå…¶ä½œç”¨æ˜¯å°†é…ç½®çš„å‚æ•°è®¾ç½®åˆ°ç›¸åº”çš„å±æ€§ä¸Šï¼›FrameworkServlet åˆå§‹åŒ–äº† WebApplicationContextï¼›DispatcherServlet åˆå§‹åŒ–äº†è‡ªèº«çš„ 9 ä¸ªç»„ä»¶ã€‚ Spring MVC ä¹‹ç”¨åˆ†æ Spring MVC æ˜¯æ€ä¹ˆå¤„ç†è¯·æ±‚çš„ã€‚é¦–å…ˆåˆ†æ HttpServletBeanã€FrameworkServlet å’Œ DispatcherServlet è¿™ä¸‰ä¸ª Servlet çš„å¤„ç†è¿‡ç¨‹ï¼Œæœ€ååˆ†æ doDispatcher çš„ç»“æ„ã€‚ HttpServletBean å‚ä¸äº†åˆ›å»ºå·¥ä½œï¼Œå¹¶æ²¡æœ‰æ¶‰åŠè¯·æ±‚çš„å¤„ç†ã€‚ FrameworkServlet åœ¨ç±»ä¸­çš„ service() ã€doGet()ã€doPost()ã€doPut()ã€doDelete()ã€doOptions()ã€doTrace() è¿™äº›æ–¹æ³•ä¸­å¯ä»¥çœ‹åˆ°éƒ½è°ƒç”¨äº†ä¸€ä¸ªå…±åŒçš„æ–¹æ³• processRequest() ï¼Œå®ƒæ˜¯ç±»åœ¨å¤„ç†è¯·æ±‚ä¸­æœ€æ ¸å¿ƒçš„æ–¹æ³•ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142protected final void processRequest(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException &#123; long startTime = System.currentTimeMillis(); Throwable failureCause = null; //è·å– LocaleContextHolder ä¸­åŸæ¥ä¿å­˜çš„ LocaleContext LocaleContext previousLocaleContext = LocaleContextHolder.getLocaleContext(); //è·å–å½“å‰è¯·æ±‚çš„ LocaleContext LocaleContext localeContext = buildLocaleContext(request); //è·å– RequestContextHolder ä¸­åŸæ¥ä¿å­˜çš„ RequestAttributes RequestAttributes previousAttributes = RequestContextHolder.getRequestAttributes(); //è·å–å½“å‰è¯·æ±‚çš„ ServletRequestAttributes ServletRequestAttributes requestAttributes = buildRequestAttributes(request, response, previousAttributes); WebAsyncManager asyncManager = WebAsyncUtils.getAsyncManager(request); asyncManager.registerCallableInterceptor(FrameworkServlet.class.getName(), new RequestBindingInterceptor());//å°†å½“å‰è¯·æ±‚çš„ LocaleContext å’Œ ServletRequestAttributes è®¾ç½®åˆ° LocaleContextHolder å’Œ RequestContextHolder initContextHolders(request, localeContext, requestAttributes); try &#123; //å®é™…å¤„ç†è¯·æ±‚çš„å…¥å£ï¼Œè¿™æ˜¯ä¸€ä¸ªæ¨¡æ¿æ–¹æ³•ï¼Œåœ¨ Dispatcher ç±»ä¸­æ‰æœ‰å…·ä½“å®ç° doService(request, response); &#125;catch (ServletException ex) &#123; failureCause = ex; throw ex; &#125;catch (IOException ex) &#123; failureCause = ex; throw ex; &#125;catch (Throwable ex) &#123; failureCause = ex; throw new NestedServletException(\"Request processing failed\", ex); &#125;finally &#123; //å°† previousLocaleContextï¼ŒpreviousAttributes æ¢å¤åˆ° LocaleContextHolder å’Œ RequestContextHolder ä¸­ resetContextHolders(request, previousLocaleContext, previousAttributes); if (requestAttributes != null) &#123; requestAttributes.requestCompleted(); &#125; //åˆ é™¤äº†æ—¥å¿—æ‰“å°ä»£ç  //å‘å¸ƒäº†ä¸€ä¸ª ServletRequestHandledEvent ç±»å‹çš„æ¶ˆæ¯ publishRequestHandledEvent(request, response, startTime, failureCause); &#125; &#125; DispatcherServlet ä¸Šä¸€ç« ä¸­å…¶å®è¿˜æ²¡æŠŠè¯¥ç±»è®²æ¸…æ¥šï¼Œåœ¨è¿™ä¸ªç±»ä¸­ï¼Œé‡Œé¢çš„æ™ºè¡Œå¤„ç†çš„å…¥å£æ–¹æ³•åº”è¯¥æ˜¯ doService æ–¹æ³•ï¼Œæ–¹æ³•é‡Œé¢è°ƒç”¨äº† doDispatch è¿›è¡Œå…·ä½“çš„å¤„ç†ï¼Œåœ¨è°ƒç”¨ doDispatch æ–¹æ³•ä¹‹å‰ doService åšäº†ä¸€äº›äº‹æƒ…ï¼šé¦–å…ˆåˆ¤æ–­æ˜¯ä¸æ˜¯ include è¯·æ±‚ï¼Œå¦‚æœæ˜¯åˆ™å¯¹ request çš„ Attribute åšä¸ªå¿«ç…§å¤‡ä»½ï¼Œç­‰ doDispatcher å¤„ç†å®Œä¹‹åï¼ˆå¦‚æœä¸æ˜¯å¼‚æ­¥è°ƒç”¨ä¸”æœªå®Œæˆï¼‰è¿›è¡Œè¿˜åŸ ï¼Œåœ¨åšå®Œå¿«ç…§ååˆå¯¹ request è®¾ç½®äº†ä¸€äº›å±æ€§ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839protected void doService(HttpServletRequest request, HttpServletResponse response) throws Exception &#123; // Keep a snapshot of the request attributes in case of an include, // to be able to restore the original attributes after the include. Map&lt;String, Object&gt; attributesSnapshot = null; if (WebUtils.isIncludeRequest(request)) &#123; attributesSnapshot = new HashMap&lt;&gt;(); Enumeration&lt;?&gt; attrNames = request.getAttributeNames(); while (attrNames.hasMoreElements()) &#123; String attrName = (String) attrNames.nextElement(); if (this.cleanupAfterInclude || attrName.startsWith(DEFAULT_STRATEGIES_PREFIX))&#123; attributesSnapshot.put(attrName, request.getAttribute(attrName)); &#125; &#125; &#125; // Make framework objects available to handlers and view objects. request.setAttribute(WEB_APPLICATION_CONTEXT_ATTRIBUTE, getWebApplicationContext()); request.setAttribute(LOCALE_RESOLVER_ATTRIBUTE, this.localeResolver); request.setAttribute(THEME_RESOLVER_ATTRIBUTE, this.themeResolver); request.setAttribute(THEME_SOURCE_ATTRIBUTE, getThemeSource()); FlashMap inputFlashMap = this.flashMapManager.retrieveAndUpdate(request, response); if (inputFlashMap != null) &#123; request.setAttribute(INPUT_FLASH_MAP_ATTRIBUTE, Collections.unmodifiableMap(inputFlashMap)); &#125; request.setAttribute(OUTPUT_FLASH_MAP_ATTRIBUTE, new FlashMap()); request.setAttribute(FLASH_MAP_MANAGER_ATTRIBUTE, this.flashMapManager); try &#123; //è°ƒç”¨ doDispatch æ–¹æ³• doDispatch(request, response); &#125;finally &#123; if (!WebAsyncUtils.getAsyncManager(request).isConcurrentHandlingStarted()) &#123; // Restore the original attribute snapshot, in case of an include. if (attributesSnapshot != null) &#123; restoreAttributesAfterInclude(request, attributesSnapshot); &#125; &#125; &#125; &#125; doDispatch() æ–¹æ³•ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879protected void doDispatch(HttpServletRequest request, HttpServletResponse response) throws Exception &#123; HttpServletRequest processedRequest = request; HandlerExecutionChain mappedHandler = null; boolean multipartRequestParsed = false; WebAsyncManager asyncManager = WebAsyncUtils.getAsyncManager(request); try &#123; ModelAndView mv = null; Exception dispatchException = null; try &#123; //æ£€æŸ¥æ˜¯ä¸æ˜¯ä¸Šä¼ è¯·æ±‚ processedRequest = checkMultipart(request); multipartRequestParsed = (processedRequest != request); // Determine handler for the current request. æ ¹æ® request æ‰¾åˆ° Handler mappedHandler = getHandler(processedRequest); if (mappedHandler == null || mappedHandler.getHandler() == null) &#123; noHandlerFound(processedRequest, response); return; &#125; // Determine handler adapter for the current request.æ ¹æ® Handler æ‰¾åˆ°å¯¹åº”çš„ HandlerAdapter HandlerAdapter ha = getHandlerAdapter(mappedHandler.getHandler()); // Process last-modified header, if supported by the handler. //å¤„ç† GET ã€ HEAD è¯·æ±‚çš„ LastModified String method = request.getMethod(); boolean isGet = \"GET\".equals(method); if (isGet || \"HEAD\".equals(method)) &#123; long lastModified = ha.getLastModified(request, mappedHandler.getHandler()); if (logger.isDebugEnabled()) &#123; logger.debug(\"Last-Modified value for [\" + getRequestUri(request) + \"] is: \" + lastModified); &#125; if (new ServletWebRequest(request, response).checkNotModified(lastModified) &amp;&amp; isGet) &#123; return; &#125; &#125; //æ‰§è¡Œç›¸åº”çš„ Interceptor çš„ preHandle if (!mappedHandler.applyPreHandle(processedRequest, response)) &#123; return; &#125; // Actually invoke the handler. HandlerAdapter ä½¿ç”¨ Handler å¤„ç†è¯·æ±‚ mv = ha.handle(processedRequest, response, mappedHandler.getHandler()); //å¦‚æœéœ€è¦å¼‚æ­¥å¤„ç†ï¼Œç›´æ¥è¿”å› if (asyncManager.isConcurrentHandlingStarted()) &#123; return; &#125; //å½“ view ä¸ºç©ºæ—¶ï¼Œæ ¹æ® request è®¾ç½®é»˜è®¤ view applyDefaultViewName(processedRequest, mv); //æ‰§è¡Œç›¸åº” Interceptor çš„ postHandler mappedHandler.applyPostHandle(processedRequest, response, mv); &#125;catch (Exception ex) &#123; dispatchException = ex; &#125;catch (Throwable err) &#123; // As of 4.3, we're processing Errors thrown from handler methods as well, // making them available for @ExceptionHandler methods and other scenarios. dispatchException = new NestedServletException(\"Handler dispatch failed\", err); &#125; //è°ƒç”¨ processDispatchResult æ–¹æ³•å¤„ç†ä¸Šé¢å¤„ç†ä¹‹åçš„ç»“æœï¼ˆåŒ…æ‹¬å¤„ç†å¼‚å¸¸ï¼Œæ¸²æŸ“é¡µé¢ï¼Œå‘å‡ºå®Œæˆé€šçŸ¥è§¦å‘ Interceptor çš„ afterCompletionï¼‰ processDispatchResult(processedRequest, response, mappedHandler, mv, dispatchException); &#125;catch (Exception ex) &#123; triggerAfterCompletion(processedRequest, response, mappedHandler, ex); &#125;catch (Throwable err) &#123; triggerAfterCompletion(processedRequest, response, mappedHandler, new NestedServletException(\"Handler processing failed\", err)); &#125;finally &#123; //åˆ¤æ–­æ˜¯å¦æ‰§è¡Œå¼‚æ­¥è¯·æ±‚ if (asyncManager.isConcurrentHandlingStarted()) &#123; // Instead of postHandle and afterCompletion if (mappedHandler != null) &#123; mappedHandler.applyAfterConcurrentHandlingStarted(processedRequest, response); &#125; &#125;else &#123; // Clean up any resources used by a multipart request. åˆ é™¤ä¸Šä¼ è¯·æ±‚çš„èµ„æº if (multipartRequestParsed) &#123; cleanupMultipart(processedRequest); &#125; &#125; &#125; &#125; Handlerï¼ŒHandlerMappingï¼ŒHandlerAdapter ä¸‰ä¸ªåŒºåˆ«ï¼š Handlerï¼šå¤„ç†å™¨ï¼Œå¯¹åº” MVC çš„ Cå±‚ï¼Œä¹Ÿå°±æ˜¯ Controller å±‚ï¼Œå…·ä½“è¡¨ç°å½¢å¼æœ‰å¾ˆå¤šç§ï¼Œå¯ä»¥æ˜¯ç±»ï¼Œæ–¹æ³•ï¼Œå®ƒçš„ç±»å‹æ˜¯ Objectï¼Œåªè¦å¯ä»¥å¤„ç†å®é™…è¯·æ±‚å°±å¯ä»¥æ˜¯ Handlerã€‚ HandlerMappingï¼šç”¨æ¥æŸ¥æ‰¾ Handler çš„ã€‚ HandlerAdapter ï¼šHandler é€‚é…å™¨ï¼Œ å¦å¤– View å’Œ ViewResolver çš„åŸç†ä¸ Handler å’Œ HandlerMapping çš„åŸç†ç±»ä¼¼ã€‚ å°ç»“æœ¬ç« åˆ†æäº† Spring MVC çš„è¯·æ±‚å¤„ç†çš„è¿‡ç¨‹ã€‚","tags":[{"name":"Spring MVC","slug":"Spring-MVC","permalink":"http://yoursite.com/tags/Spring-MVC/"}]},{"title":"Spring MVCç³»åˆ—æ–‡ç« ï¼ˆä¸‰ï¼‰ï¼šçœ‹é€ Spring MVC æºä»£ç åˆ†æä¸å®è·µ â€”â€”  ç½‘ç«™åŸºç¡€çŸ¥è¯†","date":"2017-07-13T16:00:00.000Z","path":"2017/07/14/Spring-MVC01/","text":"ç½‘ç«™æ¶æ„åŠå…¶æ¼”å˜è¿‡ç¨‹åŸºç¡€ç»“æ„ç½‘ç»œä¼ è¾“åˆ†è§£æ–¹å¼ï¼š æ ‡å‡†çš„ OSI å‚è€ƒæ¨¡å‹ TCP/IP å‚è€ƒæ¨¡å‹ æµ·é‡æ•°æ®çš„è§£å†³æ–¹æ¡ˆ ç¼“å­˜å’Œé¡µé¢é™æ€åŒ– ç¼“å­˜ é€šè¿‡ç¨‹åºç›´æ¥ä¿å­˜åœ¨å†…å­˜ä¸­ ä½¿ç”¨ç¼“å­˜æ¡†æ¶ ï¼ˆEncacheã€Redisã€Memcacheï¼‰ é¡µé¢é™æ€åŒ– ä½¿ç”¨æ¨¡æ¿æŠ€æœ¯ç”Ÿæˆï¼ˆVelocityã€FreeMakerç­‰ï¼‰ æ•°æ®åº“ä¼˜åŒ– è¡¨ç»“æ„ä¼˜åŒ– SQL è¯­å¥ä¼˜åŒ– åˆ†åŒº åˆ†è¡¨ ç´¢å¼•ä¼˜åŒ– ä½¿ç”¨å­˜å‚¨è¿‡ç¨‹ä»£æ›¿ç›´æ¥æ“ä½œè¿‡ç¨‹ åˆ†ç¦»æ´»è·ƒæ•°æ® æ‰¹é‡è¯»å–å’Œå»¶è¿Ÿä¿®æ”¹ è¯»å†™åˆ†ç¦» åˆ†å¸ƒå¼æ•°æ®åº“ NoSQL å’Œ Hadoop é«˜å¹¶å‘çš„è§£å†³æ–¹æ¡ˆ åº”ç”¨å’Œé™æ€èµ„æºçš„åˆ†ç¦»ï¼šé™æ€æ–‡ä»¶ï¼ˆå›¾ç‰‡ã€è§†é¢‘ã€JSã€CSSç­‰ï¼‰æ”¾åœ¨ä¸“é—¨çš„æœåŠ¡å™¨ä¸Š é¡µé¢ç¼“å­˜ï¼ˆNginx æœåŠ¡å™¨ã€Squid æœåŠ¡å™¨ï¼‰ é›†ç¾¤ä¸åˆ†å¸ƒå¼ åå‘ä»£ç† CDN åº•å±‚ä¼˜åŒ–ï¼šç½‘ç»œä¼ è¾“åè®® å¸¸è§åè®®å’Œæ ‡å‡†TCP/IP åè®®IPï¼šæŸ¥æ‰¾åœ°å€ï¼Œå¯¹åº”ç€å›½é™…äº’è”ç½‘ TCPï¼šè§„èŒƒä¼ è¾“è§„åˆ™ï¼Œå¯¹åº”ç€ä¼ è¾“å±‚ TCP åœ¨ä¼ è¾“ä¹‹å‰ä¼šè¿›è¡Œä¸‰æ¬¡æ²Ÿé€šï¼Œç§° â€œä¸‰æ¬¡æ¡æ‰‹â€ï¼Œä¼ å®Œæ•°æ®æ–­å¼€çš„æ—¶å€™è¦è¿›è¡Œå››æ¬¡æ²Ÿé€šï¼Œç§° â€œå››æ¬¡æŒ¥æ‰‹â€ã€‚ TCP ä¸¤ä¸ªåºå·ï¼Œä¸‰ä¸ªæ ‡å¿—ä½å«ä¹‰ï¼š seqï¼šè¡¨ç¤ºæ‰€ä¼ æ•°æ®çš„åºå·ã€‚TCP ä¼ è¾“æ—¶æ¯ä¸€ä¸ªå­—èŠ‚éƒ½æœ‰ä¸€ä¸ªåºå·ï¼Œå‘é€æ•°æ®çš„æ—¶å€™ä¼šå°†æ•°æ®çš„ç¬¬ä¸€ä¸ªåºå·å‘é€ç»™å¯¹æ–¹ï¼Œæ¥æ”¶æ–¹ä¼šæŒ‰åºå·æ£€æŸ¥æ˜¯å¦æ¥æ”¶å®Œæ•´äº†ï¼Œå¦‚æœæ²¡æ¥æ”¶å®Œæ•´å°±éœ€è¦é‡æ–°ä¼ é€ï¼Œè¿™æ ·å°±å¯ä»¥ä¿è¯æ•°æ®çš„å®Œæ•´æ€§ã€‚ ackï¼šè¡¨ç¤ºç¡®è®¤å·ã€‚æ¥æ”¶ç«¯ç”¨å®ƒæ¥ç»™å‘é€ç«¯åé¦ˆå·²ç»æˆåŠŸæ¥æ”¶åˆ°çš„æ•°æ®ä¿¡æ¯ï¼Œå®ƒçš„å€¼ä¸ºå¸Œæœ›æ¥æ”¶çš„ä¸‹ä¸€ä¸ªæ•°æ®åŒ…èµ·å§‹åºå·ã€‚ ACKï¼šç¡®è®¤ä½ï¼Œåªæœ‰ ACK = 1 çš„æ—¶å€™ ack æ‰èµ·ä½œç”¨ã€‚æ­£å¸¸é€šä¿¡æ—¶ ACK ä¸º 1ï¼Œç¬¬ä¸€æ¬¡å‘èµ·è¯·æ±‚æ—¶å› ä¸ºæ²¡æœ‰éœ€è¦ç¡®è®¤æ¥æ”¶çš„æ•°æ®æ‰€ä»¥ ACK ä¸º 0ã€‚ SYNï¼šåŒæ­¥ä½ï¼Œç”¨äºåœ¨å»ºç«‹è¿æ¥æ—¶åŒæ­¥åºå·ã€‚åˆšå¼€å§‹å»ºç«‹è¿æ¥æ—¶å¹¶æ²¡æœ‰å†å²æ¥æ”¶çš„æ•°æ®ï¼Œæ‰€ä»¥ ack ä¹Ÿå°±æ²¡æœ‰åŠæ³•è®¾ç½®ï¼Œè¿™æ˜¯æŒ‰ç…§æ­£å¸¸çš„æœºåˆ¶å°±æ— æ³•è¿è¡Œäº†ï¼ŒSYN çš„ä½œç”¨å°±æ˜¯è§£å†³è¿™ä¸ªé—®é¢˜çš„ï¼Œå½“æ¥æ”¶ç«¯æ¥æ”¶åˆ° SYN = 1 çš„æŠ¥æ–‡æ—¶å°±ä¼šç›´æ¥å°† ack è®¾ç½®ä¸ºæ¥æ”¶åˆ°çš„ seq + 1 çš„å€¼ï¼Œæ³¨æ„è¿™é‡Œçš„å€¼å¹¶ä¸æ˜¯æ£€éªŒåè®¾ç½®çš„ï¼Œè€Œæ˜¯æ ¹æ® SYN ç›´æ¥è®¾ç½®çš„ï¼Œè¿™æ ·æ­£å¸¸çš„æœºåˆ¶å°±å¯ä»¥è¿è¡Œäº†ï¼Œæ‰€ä»¥ SYN å«åŒæ­¥ä½ã€‚SYN ä¼šåœ¨å‰ä¸¤æ¬¡æ¡æ‰‹æ—¶éƒ½ä¸º 1ï¼Œè¿™æ˜¯å› ä¸ºé€šä¿¡çš„åŒæ–¹çš„ ack éƒ½éœ€è¦è®¾ç½®ä¸€ä¸ªåˆå§‹å€¼ã€‚ FINï¼šç»ˆæ­¢ä½ï¼Œç”¨æ¥åœ¨æ•°æ®ä¼ è¾“å®Œæ¯•åé‡Šæ”¾è¿æ¥ã€‚ DNS çš„è®¾ç½®DNS è§£æå‚è€ƒåŸŸåè®¾ç½®ï¼Œå¦‚ä¸‹æ˜¯æˆ‘åœ¨è…¾è®¯äº‘åŸŸåçš„è®¾ç½® è®°å½•ç±»å‹ï¼š Aè®°å½•ï¼š å°†åŸŸåæŒ‡å‘ä¸€ä¸ªIPv4åœ°å€ï¼ˆä¾‹å¦‚ï¼š8.8.8.8ï¼‰CNAMEï¼šå°†åŸŸåæŒ‡å‘å¦ä¸€ä¸ªåŸŸåï¼ˆä¾‹å¦‚ www.54tianzhisheng.cnï¼‰MXï¼š å°†åŸŸåæŒ‡å‘é‚®ä»¶æœåŠ¡å™¨åœ°å€TXTï¼š å¯ä»»æ„å¡«å†™ï¼Œé•¿åº¦é™åˆ¶255ï¼Œé€šå¸¸åšSPFè®°å½•ï¼ˆååƒåœ¾é‚®ä»¶ï¼‰NSï¼š åŸŸåæœåŠ¡å™¨è®°å½•ï¼Œå°†å­åŸŸåæŒ‡å®šå…¶ä»–DNSæœåŠ¡å™¨è§£æAAAAï¼šå°†åŸŸåæŒ‡å‘ä¸€ä¸ªiPv6åœ°å€ï¼ˆä¾‹å¦‚ï¼šff06:0:0:0:0:0:0:c3ï¼‰SRVï¼šè®°å½•æä¾›ç‰¹å®šæœåŠ¡çš„æœåŠ¡å™¨ï¼ˆä¾‹å¦‚_xmpp-server._tcpï¼‰æ˜¾æ€§URLï¼šå°†åŸŸå301é‡å®šå‘åˆ°å¦ä¸€ä¸ªåœ°å€éšæ€§URLï¼šç±»ä¼¼æ˜¾æ€§URLï¼Œä½†æ˜¯ä¼šéšè—çœŸå®ç›®æ ‡åœ°å€ ä¸»æœºè®°å½•ï¼š è¦è§£æ www.54tianzhisheng.cnï¼Œè¯·å¡«å†™ wwwã€‚ä¸»æœºè®°å½•å°±æ˜¯åŸŸåå‰ç¼€ï¼Œå¸¸è§ç”¨æ³•æœ‰ï¼š www: è§£æåçš„åŸŸåä¸º www.54tianzhisheng.cnã€‚@: ç›´æ¥è§£æä¸»åŸŸå 54tianzhisheng.cnã€‚*: æ³›è§£æï¼ŒåŒ¹é…å…¶ä»–æ‰€æœ‰åŸŸå .54tianzhisheng.cnã€‚mail: å°†åŸŸåè§£æä¸º mail.54tianzhisheng.cnï¼Œé€šå¸¸ç”¨äºè§£æé‚®ç®±æœåŠ¡å™¨ã€‚äºŒçº§åŸŸå: å¦‚ï¼šabc.54tianzhisheng.cnï¼Œå¡«å†™abcã€‚*æ‰‹æœºç½‘ç«™: å¦‚ï¼šm.54tianzhisheng.cnï¼Œå¡«å†™mã€‚ Java ä¸­ Socket çš„ç”¨æ³•æ™®é€š Soket çš„ç”¨æ³•Socket åˆ†ä¸º ServerSocket å’Œ Socket ä¸¤å¤§ç±»ã€‚ ServerSocket ç”¨äºæœåŠ¡å™¨ç«¯ï¼Œå¯ä»¥é€šè¿‡ accept æ–¹æ³•ç›‘å¬è¯·æ±‚ï¼Œç›‘å¬åˆ°è¯·æ±‚åè¿”å› Socketï¼› Socket ç”¨æˆ·å…·ä½“å®Œæˆæ•°æ®ä¼ è¾“ï¼Œå®¢æˆ·ç«¯ç›´æ¥ä½¿ç”¨ Socket å‘é€è¯·æ±‚å¹¶ä¼ è¾“æ•°æ®ã€‚ éšä¾¿å†™äº†ä¸ªå•æ–¹é¢å‘é€æ¶ˆæ¯çš„ demoï¼š å®¢æˆ·ç«¯ï¼š 12345678910111213141516171819202122232425import java.io.IOException;import java.io.OutputStream;import java.net.Socket;/** * Created by 10412 on 2017/5/2. * TCPå®¢æˆ·ç«¯ï¼š â‘ ï¼šå»ºç«‹tcpçš„socketæœåŠ¡ï¼Œæœ€å¥½æ˜ç¡®å…·ä½“çš„åœ°å€å’Œç«¯å£ã€‚è¿™ä¸ªå¯¹è±¡åœ¨åˆ›å»ºæ—¶ï¼Œå°±å·²ç»å¯ä»¥å¯¹æŒ‡å®šipå’Œç«¯å£è¿›è¡Œè¿æ¥(ä¸‰æ¬¡æ¡æ‰‹)ã€‚ â‘¡ï¼šå¦‚æœè¿æ¥æˆåŠŸï¼Œå°±æ„å‘³ç€é€šé“å»ºç«‹äº†ï¼Œsocketæµå°±å·²ç»äº§ç”Ÿäº†ã€‚åªè¦è·å–åˆ°socketæµä¸­çš„è¯»å–æµå’Œå†™å…¥æµå³å¯ï¼Œåªè¦é€šè¿‡getInputStreamå’ŒgetOutputStreamå°±å¯ä»¥è·å–ä¸¤ä¸ªæµå¯¹è±¡ã€‚ â‘¢ï¼šå…³é—­èµ„æºã€‚ *///å•æ–¹é¢çš„è¾“å…¥ï¼public class TcpClient&#123; public static void main(String[] args) &#123; try &#123; Socket s = new Socket(\"127.0.0.1\", 9999); OutputStream o = s.getOutputStream(); o.write(\"tcp sssss\".getBytes()); s.close(); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125;&#125; æœåŠ¡å™¨ç«¯ï¼š 1234567891011121314151617181920212223242526272829303132import java.io.IOException;import java.io.InputStream;import java.net.ServerSocket;import java.net.Socket;/** * Created by 10412 on 2017/5/2. */public class TcpServer&#123; public static void main(String[] args) &#123; try &#123; ServerSocket ss = new ServerSocket(9999);//å»ºç«‹æœåŠ¡ç«¯çš„socketæœåŠ¡ Socket s = ss.accept();//è·å–å®¢æˆ·ç«¯å¯¹è±¡ String ip = s.getInetAddress().getHostAddress(); int port = s.getPort(); System.out.println(ip + \" : \" + port + \" connected\"); // å¯ä»¥é€šè¿‡è·å–åˆ°çš„socketå¯¹è±¡ä¸­çš„socketæµå’Œå…·ä½“çš„å®¢æˆ·ç«¯è¿›è¡Œé€šè®¯ã€‚ InputStream ins = s.getInputStream();//è¯»å–å®¢æˆ·ç«¯çš„æ•°æ®ï¼Œä½¿ç”¨å®¢æˆ·ç«¯å¯¹è±¡çš„socketè¯»å–æµ byte[] bytes = new byte[1024]; int len = ins.read(bytes); String text = new String(bytes, 0, len); System.out.println(text); //å…³é—­èµ„æº s.close(); ss.close(); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125;&#125; NioSocket çš„ç”¨æ³•è§ä»¥å‰çš„ä¸€ç¯‡æ–‡ç« ï¼šJava NIO ç³»åˆ—æ•™ç¨‹ ä¹¦ä¸­ç¬¬äº”ç« ç®€å•çš„è®²äº†ä¸‹å®ç° HTTP åè®®ã€‚ç¬¬å…­ç« ä¸»è¦è®² Servletï¼Œå†™äº† Servlet æ¥å£å’Œå…¶å®ç°ç±»ã€‚ç¬¬ä¸ƒç« æŠŠ Tomcat åˆ†æçš„å¾ˆä¸é”™ï¼Œå¦‚æœæœ‰è¯»è€…æ„Ÿå…´è¶£çš„è¯ï¼Œå¯ä»¥å»çœ‹çœ‹ã€‚","tags":[{"name":"Spring MVC","slug":"Spring-MVC","permalink":"http://yoursite.com/tags/Spring-MVC/"}]},{"title":"é€šè¿‡æºç è¯¦è§£ Servlet","date":"2017-07-08T16:00:00.000Z","path":"2017/07/09/servlet/","text":"Servlet ç»“æ„ 1ã€ServletServlet è¯¥æ¥å£å®šä¹‰äº†5ä¸ªæ–¹æ³•ã€‚ init()ï¼Œåˆå§‹åŒ– servlet å¯¹è±¡ï¼Œå®Œæˆä¸€äº›åˆå§‹åŒ–å·¥ä½œã€‚å®ƒæ˜¯ç”± servlet å®¹å™¨æ§åˆ¶çš„ï¼Œè¯¥æ–¹æ³•åªèƒ½è¢«è°ƒç”¨ä¸€æ¬¡ service()ï¼Œæ¥å—å®¢æˆ·ç«¯è¯·æ±‚å¯¹è±¡ï¼Œæ‰§è¡Œä¸šåŠ¡æ“ä½œï¼Œåˆ©ç”¨å“åº”å¯¹è±¡å“åº”å®¢æˆ·ç«¯è¯·æ±‚ã€‚ destroy()ï¼Œå½“å®¹å™¨ç›‘æµ‹åˆ°ä¸€ä¸ªservletä»æœåŠ¡ä¸­è¢«ç§»é™¤æ—¶ï¼Œå®¹å™¨è°ƒç”¨è¯¥æ–¹æ³•ï¼Œé‡Šæ”¾èµ„æºï¼Œè¯¥æ–¹æ³•åªèƒ½è¢«è°ƒç”¨ä¸€æ¬¡ã€‚ getServletConfig()ï¼ŒServletConfig æ˜¯å®¹å™¨å‘ servlet ä¼ é€’å‚æ•°çš„è½½ä½“ã€‚ getServletInfo()ï¼Œè·å– servlet ç›¸å…³ä¿¡æ¯ã€‚ Servlet çš„ç”Ÿå‘½å‘¨æœŸï¼š 1ï¼Œåˆå§‹åŒ–é˜¶æ®µ è°ƒç”¨ init() æ–¹æ³• 2ï¼Œå“åº”å®¢æˆ·è¯·æ±‚é˜¶æ®µ è°ƒç”¨ service() æ–¹æ³• 3ï¼Œç»ˆæ­¢é˜¶æ®µ è°ƒç”¨ destroy() æ–¹æ³• åœ¨ Servlet æ¥å£ä¸­çš„äº”ä¸ªæ–¹æ³•ä¸­æ¶‰åŠçš„æ¥å£æœ‰ä¸‰ä¸ªï¼šServletConfig ã€ ServletRequestã€ ServletResponse è¿™é‡Œå…ˆè®²è®² ServletRequest å’Œ ServletResponseã€‚ 1ï¼‰ServletRequest ç”± Servlet å®¹å™¨æ¥ç®¡ç†ï¼Œå½“å®¢æˆ·è¯·æ±‚åˆ°æ¥æ—¶ï¼Œå®¹å™¨åˆ›å»ºä¸€ä¸ª ServletRequest å¯¹è±¡ï¼Œå°è£…è¯·æ±‚æ•°æ®ï¼ŒåŒæ—¶åˆ›å»ºä¸€ä¸ª ServletResponse å¯¹è±¡ï¼Œå°è£…å“åº”æ•°æ®ã€‚è¿™ä¸¤ä¸ªå¯¹è±¡å°†è¢«å®¹å™¨ä½œä¸º serviceï¼ˆï¼‰æ–¹æ³•çš„å‚æ•°ä¼ é€’ç»™ Servletï¼ŒSerlvet åˆ©ç”¨ ServletRequest å¯¹è±¡è·å–å®¢æˆ·ç«¯å‘æ¥çš„è¯·æ±‚æ•°æ®ï¼Œåˆ©ç”¨ ServletResponse å¯¹è±¡å‘é€å“åº”æ•°æ®ã€‚ ä¸‹é¢æ˜¯ ServletRequest ä¸­æ‰€æœ‰çš„æ–¹æ³•ï¼Œæ ¹æ®æ–¹æ³•åå¤§æ¦‚å°±å¯ä»¥çŒœåˆ°è¿™äº›æ–¹æ³•åˆ°åº•æ˜¯å¹²å•¥ç”¨çš„ã€‚ 2ï¼‰ServletResponse å‘é€å“åº”æ•°æ® 2ã€ServletConfigServletConfig æ˜¯å®¹å™¨å‘ servlet ä¼ é€’å‚æ•°çš„è½½ä½“ã€‚ ServletConfigçš„4ä¸ªå¸¸ç”¨æ–¹æ³•ï¼š 1ï¼‰public String getInitParameterï¼ˆString nameï¼‰ï¼šè¿”å›æŒ‡å®šåç§°çš„åˆå§‹åŒ–å‚æ•°å€¼ï¼› 2ï¼‰public Enumeration getInitParameterNamesï¼ˆï¼‰ï¼šè¿”å›ä¸€ä¸ªåŒ…å«æ‰€æœ‰åˆå§‹åŒ–å‚æ•°åçš„ Enumeration å¯¹è±¡ï¼› 3ï¼‰public String getServletName()ï¼šè¿”å›åœ¨ DD æ–‡ä»¶ä¸­&lt;servlet-name&gt;å…ƒç´ æŒ‡å®šçš„ Servlet åç§°ï¼› 4ï¼‰public ServletContext getServletContextï¼ˆï¼‰ï¼šè¿”å›è¯¥ Servlet æ‰€åœ¨çš„ä¸Šä¸‹æ–‡å¯¹è±¡ï¼› è¿™é‡Œè¯¦ç»†è®²ä¸‹ ServletContext ï¼š Servlet ä¸Šä¸‹æ–‡å¯¹è±¡ï¼ˆServletContextï¼‰ï¼šæ¯ä¸ªWebåº”ç”¨ç¨‹åºåœ¨è¢«å¯åŠ¨æ—¶éƒ½ä¼šåˆ›å»ºä¸€ä¸ªå”¯ä¸€çš„ä¸Šä¸‹æ–‡å¯¹è±¡ï¼ŒServlet å¯é€šè¿‡å…¶è·å¾— Web åº”ç”¨ç¨‹åºçš„åˆå§‹åŒ–å‚æ•°æˆ– Servlet å®¹å™¨çš„ç‰ˆæœ¬ç­‰ä¿¡æ¯ï¼Œä¹Ÿå¯è¢« Servlet ç”¨æ¥ä¸å…¶ä»– Servlet å…±äº«æ•°æ®ã€‚ 1ã€è·å¾— ServletContext åº”ç”¨ï¼š ï¼ˆ1ï¼‰ã€ç›´æ¥è°ƒç”¨ getServletContextï¼ˆï¼‰æ–¹æ³• ServletContext context = getServletContextï¼ˆï¼‰; ï¼ˆ2ï¼‰ã€ä½¿ç”¨ ServletConfig åº”ç”¨ï¼Œå†è°ƒç”¨å®ƒçš„ getServletContextï¼ˆï¼‰æ–¹æ³• ServletContext context = getServletConfig.getServletContext(); 2ã€è·å¾—åº”ç”¨ç¨‹åºçš„åˆå§‹åŒ–å‚æ•°ï¼š ï¼ˆ1ï¼‰ã€public String getInitParameterï¼ˆString nameï¼‰ï¼šè¿”å›æŒ‡å®šå‚æ•°åçš„å­—ç¬¦ä¸²å‚æ•°å€¼ï¼Œæ²¡æœ‰åˆ™è¿”å› nullï¼› ï¼ˆ2ï¼‰ã€public Enumeration getInitParameterNames()ï¼šè¿”å›ä¸€ä¸ªåŒ…å«å¤šæœ‰åˆå§‹åŒ–å‚æ•°åçš„ Enumeration å¯¹è±¡ï¼› 3ã€é€šè¿‡ ServletContext å¯¹è±¡è·å¾—èµ„æº ï¼ˆ1ï¼‰ã€public URl getResourceï¼ˆString pathï¼‰:è¿”å›ç”±ç»™å®šè·¯å¾„çš„èµ„æºçš„ URL å¯¹è±¡ï¼Œä»¥ â€œ/â€ å¼€å¤´ï¼Œä¸ºç›¸å¯¹è·¯å¾„ï¼Œç›¸å¯¹äºWeb åº”ç”¨ç¨‹åºçš„æ–‡æ¡£æ ¹ç›®å½•ï¼› ï¼ˆ2ï¼‰ã€public InputStream getResourceAsStreamï¼ˆString pathï¼‰ï¼šä»èµ„æºä¸Šè·å¾—ä¸€ä¸ª InputStream å¯¹è±¡ï¼Œç­‰ä»·äºgetResourceï¼ˆpathï¼‰.oprenStream(); ï¼ˆ3ï¼‰ã€public String getRealPath(String path)ï¼šè¿”å›ç»™å®šçš„è™šæ‹Ÿè·¯å¾„çš„çœŸå®è·¯å¾„ï¼› 4ã€ç™»é™†æ—¥å¿—ï¼šä½¿ç”¨ logï¼ˆï¼‰æ–¹æ³•å¯ä»¥å°†æŒ‡å®šçš„æ¶ˆæ¯å†™åˆ°æœåŠ¡å™¨çš„æ—¥å¿—æ–‡ä»¶ä¸­ ï¼ˆ1ï¼‰ã€public void logï¼ˆString msgï¼‰ï¼šå‚æ•° msg ä¸ºå†™å…¥æ—¥å¿—æ–‡ä»¶æ¶ˆæ¯ ï¼ˆ2ï¼‰ã€public void logï¼ˆString msgï¼ŒThrowable throwableï¼‰ï¼šå°† msg æŒ‡å®šçš„æ¶ˆæ¯å’Œå¼‚å¸¸çš„æ ˆè·Ÿè¸ªä¿¡æ¯å†™å…¥æ—¥å¿—æ–‡ä»¶ 5ã€ä½¿ç”¨ RequestDispatcher å®ç°è¯·æ±‚è½¬å‘ ï¼ˆ1ï¼‰ã€RequestDispatcher getRequestDiapatcher(String path)ï¼šå¿…é¡»ä»¥ â€œ/â€œ å¼€å¤´ç›¸å¯¹äºåº”ç”¨ç¨‹åºæ ¹ç›®å½•ï¼Œè€ŒServletRequest å¯ä»¥ä¼ é€’ä¸€ä¸ªç›¸å¯¹è·¯å¾„ ï¼ˆ2ï¼‰ã€RequestDipatcher getNamedDiapatcherï¼ˆString nameï¼‰ï¼šå‚æ•° name ä¸ºä¸€ä¸ªå‘½åçš„ Servlet å¯¹è±¡ 6ã€ä½¿ç”¨ ServletContext å¯¹è±¡å­˜å‚¨æ•°æ® ï¼ˆ1ï¼‰ã€public void serAttributeï¼ˆString nameï¼ŒObject objectï¼‰ï¼šå°†ç»™å®šåç§°çš„å±æ€§å€¼å¯¹è±¡ç»‘å®šåˆ°ä¸Šä¸‹æ–‡å¯¹è±¡ä¸Šï¼› ï¼ˆ2ï¼‰ã€public Object getAttributeï¼ˆString nameï¼‰ï¼šè¿”å›ç»‘å®šåˆ°ä¸Šä¸‹æ–‡å¯¹è±¡çš„ç»™å®šåç§°çš„å±æ€§å€¼ï¼› ï¼ˆ3ï¼‰ã€public Enumeration getAttributeNames()ï¼šè¿”å›ç»‘å®šåˆ°ä¸Šä¸‹æ–‡å¯¹è±¡ä¸Šçš„æ‰€æœ‰å±æ€§åçš„ Enumeration å¯¹è±¡ï¼› ï¼ˆ4ï¼‰ã€public void removeAttributeï¼ˆString nameï¼‰ï¼šåˆ é™¤ç»‘å®šåˆ°ä¸Šä¸‹æ–‡å¯¹è±¡æŒ‡å®šåç§°çš„å±æ€§ï¼› ServletRequest å…±äº«çš„å¯¹è±¡ä»…åœ¨è¯·æ±‚çš„ç”Ÿå­˜å‘¨æœŸä¸­å¯ä»¥è¢«è®¿é—®ï¼› HttpSession å…±äº«çš„å¯¹è±¡ä»…åœ¨ä¼šè¯çš„ç”Ÿå­˜å‘¨æœŸä¸­å¯ä»¥è¢«è®¿é—®ï¼› ServletContext å…±äº«çš„å¯¹è±¡åœ¨æ•´ä¸ª Web åº”ç”¨ç¨‹åºå¯åŠ¨çš„ç”Ÿå­˜å‘¨æœŸä¸­å¯ä»¥è¢«è®¿é—®ï¼› 7ã€æ£€ç´¢ Servlet å®¹å™¨çš„ä¿¡æ¯ ï¼ˆ1ï¼‰ã€public String getServletInfo()ï¼šè¿”å› Servlet æ‰€è¿è¡Œå®¹å™¨çš„åç§°å’Œç‰ˆæœ¬ï¼› ï¼ˆ2ï¼‰ã€public int getMajorVersionï¼ˆï¼‰ï¼šè¿”å›å®¹å™¨æ‰€æ”¯æŒçš„ Servlet API çš„ä¸»ç‰ˆæœ¬å·ï¼› ï¼ˆ3ï¼‰ã€public int getMinorVersionï¼ˆï¼‰ï¼šè¿”å›å®¹å™¨æ‰€æ”¯æŒçš„ Servlet API çš„æ¬¡ç‰ˆæœ¬å·ï¼› ï¼ˆ4ï¼‰ã€public String getServletContextï¼ˆï¼‰ï¼šè¿”å› ServletContext å¯¹åº”çš„ web åº”ç”¨ç¨‹åºåç§° &lt;display-name&gt;å…ƒç´ å®šä¹‰çš„åç§°ï¼› 3ã€GenericServlet æŠ½è±¡ç±»GenericServlet å®šä¹‰äº†ä¸€ä¸ªé€šç”¨çš„ï¼Œä¸ä¾èµ–å…·ä½“åè®®çš„ Servletï¼Œå®ƒå®ç°äº† Servlet æ¥å£å’Œ ServletConfig æ¥å£ï¼Œå®ƒçš„æ–¹æ³•åœ¨æ–‡ç« çš„ç¬¬ä¸€å¼ å›¾å°±ç»™å‡ºäº†ã€‚ 4ã€HttpServlet æŠ½è±¡ç±»4.1ã€HTTP è¯·æ±‚æ–¹å¼ GET : è·å–ç”±è¯·æ±‚ URL æ ‡è¯†çš„èµ„æº POST : å‘ Web æœåŠ¡å™¨å‘é€æ— é™åˆ¶é•¿åº¦çš„æ•°æ® PUT : å­˜å‚¨ä¸€ä¸ªèµ„æºåˆ°è¯·æ±‚çš„ URL DELETE : åˆ é™¤ç”± URL æ ‡è¯†çš„èµ„æº HEAD : è¿”å› URL æ ‡è¯†çš„å¤´ä¿¡æ¯ OPTIONS : è¿”å›æœåŠ¡å™¨æ”¯æŒçš„ HTTP æ–¹æ³• TRACE : è¿”å› TRACE è¯·æ±‚é™„å¸¦çš„å¤´å­—æ®µ 4.2ã€å¯¹åº”çš„æœåŠ¡æ–¹æ³•ï¼š doGet() : è°ƒç”¨æœåŠ¡å™¨çš„èµ„æº, å¹¶å°†å…¶ä½œä¸ºå“åº”è¿”å›ç»™å®¢æˆ·ç«¯. doGet() è°ƒç”¨åœ¨ URL é‡Œæ˜¾ç¤ºæ­£åœ¨ä¼ é€ç»™ Servlet çš„æ•°æ®,è¿™åœ¨ç³»ç»Ÿçš„å®‰å…¨æ–¹é¢å¯èƒ½å¸¦æ¥ä¸€äº›é—®é¢˜, æ¯”å¦‚è¯´, ç”¨æˆ·ç™»å½•æ—¶, è¡¨å•é‡Œçš„ç”¨æˆ·åå’Œå¯†ç éœ€è¦å‘é€åˆ°æœåŠ¡å™¨ç«¯, doGet() è°ƒç”¨ä¼šåœ¨æµè§ˆå™¨çš„ URL é‡Œæ˜¾ç¤ºç”¨æˆ·åå’Œå¯†ç . doPost() : å®ƒç”¨äºæŠŠå®¢æˆ·ç«¯çš„æ•°æ®ä¼ ç»™æœåŠ¡ç«¯, ä½¿ç”¨å®ƒå¯ä»¥ä»¥éšè—æ–¹å¼ç»™æœåŠ¡å™¨ç«¯å‘é€æ•°æ®. Post é€‚åˆå‘é€å¤§é‡æ•°æ®. doPut() : è°ƒç”¨å’Œ doPost() ç›¸ä¼¼, å¹¶ä¸”å®ƒå…è®¸å®¢æˆ·ç«¯æŠŠçœŸæ­£çš„æ–‡ä»¶å­˜æ”¾åœ¨æœåŠ¡å™¨ä¸Š, è€Œä¸ä»…ä»…æ˜¯ä¼ é€æ•°æ®. doDelete() : å®ƒå…è®¸å®¢æˆ·ç«¯åˆ é™¤æœåŠ¡å™¨ç«¯çš„æ–‡ä»¶æˆ–è€… Web é¡µé¢ï¼å®ƒçš„ä½¿ç”¨éå¸¸å°‘ï¼ doHead() : å®ƒç”¨äºå¤„ç†å®¢æˆ·ç«¯çš„ Head è°ƒç”¨,å¹¶ä¸”è¿”å›ä¸€ä¸ª response. å½“å®¢æˆ·ç«¯åªéœ€è¦å“åº”çš„ Header æ—¶,å®ƒå°±å‘å‡ºä¸€ä¸ªHeader è¯·æ±‚.è¿™ç§æƒ…å†µä¸‹å®¢æˆ·ç«¯å¾€å¾€å…³å¿ƒå“åº”çš„é•¿åº¦å’Œå“åº”çš„ MIME ç±»å‹. doOptions(): å®ƒç”¨äºå¤„ç†å®¢æˆ·ç«¯çš„ Options è°ƒç”¨,é€šè¿‡è¿™ä¸ªè°ƒç”¨, å®¢æˆ·ç«¯å¯ä»¥è·å¾—æ­¤ Servlet æ”¯æŒçš„æ–¹æ³•.å¦‚æœ Servlet è¦†ç›–äº† doPost() æ–¹æ³•, é‚£ä¹ˆå°†è¿”å›: Allow: POST, TRACE, OPTIONS, HEAD doTraceï¼šå¤„ç† TRACE è¯·æ±‚ 4.3ã€Servlet Service æ–¹æ³•è¯¦è§£12345678910111213141516public void service(ServletRequest req, ServletResponse res) throws ServletException, IOException &#123; HttpServletRequest request; HttpServletResponse response; // å¦‚æœä¼ å…¥çš„ HTTP è¯·æ±‚å’Œ HTTP å“åº”ä¸æ˜¯ HTTP çš„é¢†åŸŸæ¨¡å‹ï¼Œåˆ™æŠ›å‡º Servlet å¼‚å¸¸ï¼Œè¿™ä¸ªå¼‚å¸¸ä¼šè¢« Servlet å®¹å™¨æ‰€å¤„ç† if (!(req instanceof HttpServletRequest &amp;&amp; res instanceof HttpServletResponse)) &#123; throw new ServletException(\"non-HTTP request or response\"); &#125; // æ—¢ç„¶æ˜¯ HTTP åè®®ç»‘å®šçš„ Serlvet, å¼ºåˆ¶è½¬æ¢åˆ° HTTP çš„é¢†åŸŸæ¨¡å‹ request = (HttpServletRequest) req; response = (HttpServletResponse) res; // å¦‚æœä¼ å…¥çš„è¯·æ±‚å’Œå“åº”æ˜¯é¢„æœŸçš„ HTTP è¯·æ±‚å’Œ HTTP å“åº”ï¼Œåˆ™è°ƒç”¨ HttpServlet çš„ service() æ–¹æ³•ã€‚ service(request, response); &#125; 4.4ã€HttpServlet service æ–¹æ³•è¯¦è§£1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071protected void service(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException &#123; // ä» HTTP è¯·æ±‚ä¸­å–å¾—è¿™æ¬¡è¯·æ±‚æ‰€ä½¿ç”¨çš„ HTTT æ–¹æ³• String method = req.getMethod(); // å¦‚æœè¿™æ¬¡è¯·æ±‚ä½¿ç”¨ GET æ–¹æ³• if (method.equals(METHOD_GET)) &#123; // å–å¾—è¿™ä¸ª Servlet çš„æœ€åä¿®æ”¹çš„æ—¶é—´ long lastModified = getLastModified(req); if (lastModified == -1) &#123; // servlet doesn't support if-modified-since, no reason // to go through further expensive logic //-1 ä»£è¡¨è¿™ä¸ª Servlet ä¸æ”¯æŒæœ€åä¿®æ”¹æ“ä½œï¼Œç›´æ¥è°ƒç”¨ doGet() è¿›è¡Œå¤„ç† HTTP GET è¯·æ±‚ doGet(req, resp); &#125; else &#123; // å¦‚æœè¿™ä¸ª Servlet æ”¯æŒæœ€åä¿®æ”¹æ“ä½œï¼Œå–å¾—è¯·æ±‚å¤´ä¸­åŒ…å«çš„è¯·æ±‚çš„æœ€åä¿®æ”¹æ—¶é—´ long ifModifiedSince = req.getDateHeader(HEADER_IFMODSINCE); if (ifModifiedSince &lt; lastModified) &#123; // If the servlet mod time is later, call doGet() // Round down to the nearest second for a proper compare // A ifModifiedSince of -1 will always be less // å¦‚æœè¯·æ±‚å¤´ä¸­åŒ…å«çš„ä¿®æ”¹æ—¶é—´æ—©äºè¿™ä¸ª Servlet çš„æœ€åä¿®æ”¹æ—¶é—´ï¼Œè¯´æ˜è¿™ä¸ª Servlet è‡ªä»å®¢æˆ·ä¸Šä¸€æ¬¡ HTTP è¯·æ±‚å·²ç»è¢«ä¿®æ”¹äº† , è®¾ç½®æœ€æ–°ä¿®æ”¹æ—¶é—´åˆ°å“åº”å¤´ä¸­ maybeSetLastModified(resp, lastModified); // è°ƒç”¨ doGet è¿›è¡Œè¿›è¡Œå¤„ç† HTTP GET è¯·æ±‚ doGet(req, resp); &#125; else &#123; // å¦‚æœè¯·æ±‚å¤´ä¸­åŒ…å«ä¿®æ”¹æ—¶é—´æ™šäºè¿™ä¸ª Servlet çš„æœ€åä¿®æ”¹æ—¶é—´ï¼Œè¯´æ˜è¿™ä¸ª Servlet è‡ªä»è¯·æ±‚çš„æœ€åä¿®æ”¹æ—¶é—´åæ²¡æœ‰æ›´æ”¹è¿‡ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œä»…ä»…è¿”å›ä¸€ä¸ª HTTP å“åº”çŠ¶æ€ SC_NOT_MODIFIED resp.setStatus(HttpServletResponse.SC_NOT_MODIFIED); &#125; &#125; &#125; else if (method.equals(METHOD_HEAD)) &#123; // å¦‚æœè¿™æ¬¡è¯·æ±‚ä½¿ç”¨ HEAD æ–¹æ³• // å¦‚æœè¿™ä¸ª Servlet æ”¯æŒæœ€åä¿®æ”¹æ“ä½œï¼Œåˆ™è®¾ç½®è¿™ä¸ª Servlet çš„æœ€åä¿®æ”¹æ—¶é—´åˆ°å“åº”å¤´ä¸­ long lastModified = getLastModified(req); maybeSetLastModified(resp, lastModified); // å’Œå¯¹ HTTP GET æ–¹æ³•å¤„ç†ä¸åŒçš„æ˜¯ï¼Œæ— è®ºè¯·æ±‚å¤´ä¸­çš„ä¿®æ”¹æ—¶é—´æ˜¯ä¸æ˜¯æ—©äºè¿™ä¸ª Sevlet çš„æœ€åä¿®æ”¹æ—¶é—´ï¼Œéƒ½ä¼šå‘ HEAD å“åº”ç»™å®¢æˆ·ï¼Œå› ä¸º HTTP HEAD å“åº”æ˜¯ç”¨æ¥æŸ¥è¯¢ Servlet å¤´ä¿¡æ¯çš„æ“ä½œ doHead(req, resp); &#125; else if (method.equals(METHOD_POST)) &#123; // å¦‚æœè¿™æ¬¡è¯·æ±‚ä½¿ç”¨ POST æ–¹æ³• doPost(req, resp); &#125; else if (method.equals(METHOD_PUT)) &#123; // å¦‚æœè¿™æ¬¡è¯·æ±‚ä½¿ç”¨ PUT æ–¹æ³• doPut(req, resp); &#125; else if (method.equals(METHOD_DELETE)) &#123; // å¦‚æœè¿™æ¬¡è¯·æ±‚ä½¿ç”¨ DELETE æ–¹æ³• doDelete(req, resp); &#125; else if (method.equals(METHOD_OPTIONS)) &#123; // å¦‚æœè¿™æ¬¡è¯·æ±‚ä½¿ç”¨ OPTIONS æ–¹æ³• doOptions(req,resp); &#125; else if (method.equals(METHOD_TRACE)) &#123; // å¦‚æœè¿™æ¬¡è¯·æ±‚ä½¿ç”¨ TRACE æ–¹æ³• doTrace(req,resp); &#125; else &#123; // Note that this means NO servlet supports whatever // method was requested, anywhere on this server. // å¦‚æœè¿™æ¬¡è¯·æ±‚æ˜¯å…¶ä»–æœªçŸ¥æ–¹æ³•ï¼Œè¿”å›é”™è¯¯ä»£ç  SC_NOT_IMPLEMENTED ç»™ HTTP å“åº”ï¼Œå¹¶ä¸”æ˜¾ç¤ºä¸€ä¸ªé”™è¯¯æ¶ˆæ¯ï¼Œè¯´æ˜è¿™ä¸ªæ“ä½œæ˜¯æ²¡æœ‰å®ç°çš„ String errMsg = lStrings.getString(\"http.method_not_implemented\"); Object[] errArgs = new Object[1]; errArgs[0] = method; errMsg = MessageFormat.format(errMsg, errArgs); resp.sendError(HttpServletResponse.SC_NOT_IMPLEMENTED, errMsg); &#125; &#125; 5ã€Servlet çš„å¤šçº¿ç¨‹é—®é¢˜1ã€å½“æ¶‰åŠåˆ° Servlet éœ€è¦å…±äº«èµ„æºæ˜¯ï¼Œéœ€ä¿è¯ Servlet æ˜¯çº¿ç¨‹å®‰å…¨çš„ 2ã€æ³¨æ„äº‹é¡¹ï¼š ï¼ˆ1ï¼‰ã€ç”¨æ–¹æ³•çš„å±€éƒ¨å˜é‡ä¿æŒè¯·æ±‚ä¸­çš„ä¸“æœ‰æ•°æ®ï¼› ï¼ˆ2ï¼‰ã€åªç”¨ Servlet çš„æˆå‘˜å˜é‡æ¥å­˜æ”¾é‚£äº›ä¸ä¼šæ”¹å˜çš„æ•°æ®ï¼› ï¼ˆ3ï¼‰ã€å¯¹å¯èƒ½è¢«è¯·æ±‚ä¿®æ”¹çš„æˆå‘˜å˜é‡åŒæ­¥ï¼ˆç”¨ Synchronized å…³é”®å­—ä¿®é¥°ï¼‰ï¼› ï¼ˆ4ï¼‰ã€å¦‚æœ Servlet è®¿é—®å¤–éƒ¨èµ„æºï¼Œé‚£ä¹ˆéœ€è¦åŒæ­¥è®¿é—®è¿™äº›èµ„æºï¼› 3ã€å®ç° SingleThreadModel æ¥å£çš„ Servlet åœ¨è¢«å¤šä¸ªå®¢æˆ·è¯·æ±‚æ—¶ä¸€ä¸ªæ—¶åˆ»åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹è¿è¡Œï¼Œä¸æ¨èä½¿ç”¨ã€‚ 4ã€å¦‚æœå¿…é¡»åœ¨ servlet ä½¿ç”¨åŒæ­¥ä»£ç ï¼Œåº”å°½é‡åœ¨æœ€å°çš„èŒƒå›´ä¸Šï¼ˆä»£ç å—ï¼‰è¿›è¡ŒåŒæ­¥ï¼ŒåŒæ­¥ä»£ç è¶Šå°‘ï¼ŒServlet æ‰§è¡Œæ‰èƒ½è¶Šå¥½ï¼Œé¿å…å¯¹ doGet() æˆ– doPost() æ–¹æ³•åŒæ­¥ã€‚ æ€»ç»“å…¨æ–‡é¦–å…ˆé€šè¿‡ä¸€å¼  Servlet ä¸­çš„æ ¸å¿ƒ Servlet ç±»å›¾å…³ç³»ï¼Œäº†è§£äº†å‡ ç§ Servlet ä¹‹é—´çš„å…³ç³»åŠå…¶å†…éƒ¨æ–¹æ³•ã€‚ç„¶ååœ¨åˆ†åˆ«ä»‹ç»è¿™å‡ ç§ Servletï¼Œé€šè¿‡åˆ†æéƒ¨åˆ†é‡è¦æ–¹æ³•çš„æºç æ¥äº†è§£ï¼Œè¿˜ä»‹ç»äº† Servlet ä¸­å¤šçº¿ç¨‹çš„é—®é¢˜çš„è§£å†³æ–¹æ³•ã€‚ æ³¨ï¼šæ–‡ç« åŸåˆ›ï¼Œé¦–å‘äºï¼šzhisheng çš„åšå®¢ï¼Œæ–‡ç« å¯è½¬è½½ä½†è¯·æ³¨æ˜åœ°å€ä¸ºï¼šhttp://www.54tianzhisheng.cn/2017/07/09/servlet/","tags":[{"name":"Java","slug":"Java","permalink":"http://yoursite.com/tags/Java/"},{"name":"Servlet","slug":"Servlet","permalink":"http://yoursite.com/tags/Servlet/"}]},{"title":"Velocity å¾ªç¯æŒ‡ä»¤ä¸€ç§å¥½çš„è§£å†³æ–¹æ³•","date":"2017-06-27T16:00:00.000Z","path":"2017/06/28/Velocity-foreach/","text":"å‰æå‰å°çš„æ•°æ®ç»å¸¸æ˜¯ç”±éœ€è¦é€šè¿‡ foreach å¾ªç¯è·å–ã€‚ å¥½çš„è§£å†³æ–¹æ¡ˆï¼šï¼ˆæ‹¿æˆ‘æœ€è¿‘åšçš„ä¸€ä¸ªé¡¹ç›®åšä¾‹å­ï¼‰è´­ç‰©å•†åŸå·¦è¾¹çš„å¯¼èˆªæ ï¼Œå•†å“å¤§åˆ†ç±»å’Œå°åˆ†ç±»ï¼ˆCategoryï¼‰ 1ã€åœ¨ model åŒ…ä¸‹åˆ›å»ºä¸€ä¸ª ViewObject ç±» 1234567891011public class ViewObject&#123; private Map&lt;String, Object&gt; objs = new HashMap&lt;&gt;(); public void set(String key, Object value) &#123; objs.put(key, value); &#125; public Object get(String key) &#123; return objs.get(key); &#125;&#125; 2ã€åœ¨ controller åŒ…ä¸‹åˆ›å»ºä¸ª BaseController ç±» 12345678910111213141516171819202122232425262728293031323334/** * åœ¨æ¯ä¸ªé¡µé¢æ˜¾ç¤ºå›¾ä¹¦å¤§åˆ†ç±»ï¼ŒæŠ½ç¦»å‡ºæ¥ * @return */ public List&lt;ViewObject&gt; selectAllCategory() &#123; List&lt;Category&gt; categories = categoryService.selectAllCategory(); List&lt;ViewObject&gt; vos = new ArrayList&lt;&gt;(); for (Category category : categories) &#123; ViewObject vo = new ViewObject(); vo.set(\"category\", category); vo.set(\"id\", category.getId()); //System.out.println(\"category ä¸­çš„ id æ˜¯ \"+category.getId()); vos.add(vo); &#125; return vos; &#125; /** * è·å–å›¾ä¹¦çš„å°åˆ†ç±»ï¼Œåœ¨è¿™é‡Œå°†å°åˆ†ç±»ä¸­çš„å¤§åˆ†ç±»idæŸ¥æ‰¾å‡ºæ¥ï¼Œä¿å­˜åœ¨ cds.id ä¸­ï¼Œ * ç„¶ååœ¨æ¨¡æ¿å¼•æ“ä¸­é€šè¿‡å°† vos.id å’Œ cds.id ç›¸æ¯”è¾ƒã€‚ç„¶åå¦‚æœç›¸åŒçš„è¯ï¼Œå°±å–å‡ºæ¥æ”¾åœ¨å¯¹åº”çš„å¤§åˆ†ç±»ä¸‹ * @return */ public List&lt;ViewObject&gt; selectAllCategoryDetail() &#123; List&lt;CategoryDetail&gt; categoryDetails = categoryDetailService.selectAllCategoryDetail(); List&lt;ViewObject&gt; cds = new ArrayList&lt;&gt;(); for (CategoryDetail categoryDetail : categoryDetails) &#123; ViewObject vo = new ViewObject(); vo.set(\"categoryDetail\", categoryDetail); //System.out.println(\"categoryDetail ä¸­çš„ categoryDetail id =\" + categoryDetail.getId() + \"category id = \" + categoryDetail.getCategory_id() + \" name = \" + categoryDetail.getName()); vo.set(\"id\", categoryDetail.getCategory_id()); cds.add(vo); &#125; return cds; &#125; 3ã€åœ¨ IndexController ç±»ä¸‹ï¼Œéœ€è¦ç»§æ‰¿ BaseController.java ç±» 12345678910111213/** * è¿”å›é¦–é¡µ * @param model * @return */ @RequestMapping(path = &#123;\"/\", \"/index\"&#125;) public String index(Model model) &#123; //æ¨¡æ¿å¼•æ“è®¾ç½®å›¾ä¹¦åˆ†ç±»å·¦è¾¹å¯¼èˆªæ  model.addAttribute(\"vos\", selectAllCategory()); model.addAttribute(\"cds\", selectAllCategoryDetail()); //è¿”å›ä¸»é¡µ return \"index\"; &#125; 4ã€æŠ½ç¦»å¯¼èˆªéƒ¨åˆ†çš„ä»£ç  left.html 1234567891011121314151617&lt;!--å·¦è¾¹å›¾ä¹¦åˆ†ç±»å¯¼èˆªæ --&gt;&lt;div class=\"c3_b1_left\"&gt; &lt;dl&gt; #foreach($vo in $vos) &lt;dd&gt; &lt;h1&gt;$!&#123;vo.category.name&#125;&lt;/h1&gt; &lt;p&gt; #foreach($cd in $cds) #if($vo.id == $cd.id) &lt;a href=\"/list\"&gt;$!&#123;cd.categoryDetail.name&#125;&lt;/a&gt; #end #end &lt;/p&gt; &lt;/dd&gt; #end &lt;/dl&gt;&lt;/div&gt; 5ã€é¦–é¡µä¸­ç›¸åº”çš„ä½ç½®å¼•å…¥ left.html 1#parse(\"left.html\") è¿™æ ·å°±å¯ä»¥è§£å†³é—®é¢˜äº†ï¼Œå¯æ˜¯æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦æ§åˆ¶å¾ªç¯çš„ä¸ªæ•°ï¼Œå› ä¸ºæˆ‘ä»¬ç½‘é¡µç«¯å¯èƒ½åªéœ€è¦ç‰¹å®šçš„æ•°æ®é‡ é‚£ä¹ˆå°±éœ€è¦ä¸­æ–­ foreachï¼Œå¯ä»¥ä½¿ç”¨ #break æŒ‡ä»¤ç»ˆæ­¢å¾ªç¯ 123456#foreach( $vo in $vos ) #if( $foreach.count &gt; 5 ) #break #end $!&#123;vo.customer.Name&#125;#end å‚è€ƒVelocityå…¥é—¨æŒ‡å—â€”â€”ç¬¬ä¸ƒç«  å¾ªç¯æŒ‡ä»¤","tags":[{"name":"Velocity","slug":"Velocity","permalink":"http://yoursite.com/tags/Velocity/"}]},{"title":"Java IOæµå­¦ä¹ è¶…è¯¦ç»†æ€»ç»“ï¼ˆå›¾æ–‡å¹¶èŒ‚ï¼‰","date":"2017-06-22T16:00:00.000Z","path":"2017/06/23/java-io/","text":"Javaæµæ“ä½œæœ‰å…³çš„ç±»æˆ–æ¥å£ï¼šJavaæµç±»å›¾ç»“æ„ï¼š æµçš„æ¦‚å¿µå’Œä½œç”¨æµæ˜¯ä¸€ç»„æœ‰é¡ºåºçš„ï¼Œæœ‰èµ·ç‚¹å’Œç»ˆç‚¹çš„å­—èŠ‚é›†åˆï¼Œæ˜¯å¯¹æ•°æ®ä¼ è¾“çš„æ€»ç§°æˆ–æŠ½è±¡ã€‚å³æ•°æ®åœ¨ä¸¤è®¾å¤‡é—´çš„ä¼ è¾“ç§°ä¸ºæµï¼Œæµçš„æœ¬è´¨æ˜¯æ•°æ®ä¼ è¾“ï¼Œæ ¹æ®æ•°æ®ä¼ è¾“ç‰¹æ€§å°†æµæŠ½è±¡ä¸ºå„ç§ç±»ï¼Œæ–¹ä¾¿æ›´ç›´è§‚çš„è¿›è¡Œæ•°æ®æ“ä½œã€‚ IOæµçš„åˆ†ç±» æ ¹æ®å¤„ç†æ•°æ®ç±»å‹çš„ä¸åŒåˆ†ä¸ºï¼šå­—ç¬¦æµå’Œå­—èŠ‚æµ æ ¹æ®æ•°æ®æµå‘ä¸åŒåˆ†ä¸ºï¼šè¾“å…¥æµå’Œè¾“å‡ºæµ å­—ç¬¦æµå’Œå­—èŠ‚æµå­—ç¬¦æµçš„ç”±æ¥ï¼š å› ä¸ºæ•°æ®ç¼–ç çš„ä¸åŒï¼Œè€Œæœ‰äº†å¯¹å­—ç¬¦è¿›è¡Œé«˜æ•ˆæ“ä½œçš„æµå¯¹è±¡ã€‚æœ¬è´¨å…¶å®å°±æ˜¯åŸºäºå­—èŠ‚æµè¯»å–æ—¶ï¼Œå»æŸ¥äº†æŒ‡å®šçš„ç è¡¨ã€‚ å­—èŠ‚æµå’Œå­—ç¬¦æµçš„åŒºåˆ«ï¼š è¯»å†™å•ä½ä¸åŒï¼šå­—èŠ‚æµä»¥å­—èŠ‚ï¼ˆ8bitï¼‰ä¸ºå•ä½ï¼Œå­—ç¬¦æµä»¥å­—ç¬¦ä¸ºå•ä½ï¼Œæ ¹æ®ç è¡¨æ˜ å°„å­—ç¬¦ï¼Œä¸€æ¬¡å¯èƒ½è¯»å¤šä¸ªå­—èŠ‚ã€‚ å¤„ç†å¯¹è±¡ä¸åŒï¼šå­—èŠ‚æµèƒ½å¤„ç†æ‰€æœ‰ç±»å‹çš„æ•°æ®ï¼ˆå¦‚å›¾ç‰‡ã€aviç­‰ï¼‰ï¼Œè€Œå­—ç¬¦æµåªèƒ½å¤„ç†å­—ç¬¦ç±»å‹çš„æ•°æ®ã€‚ ç»“è®ºï¼šåªè¦æ˜¯å¤„ç†çº¯æ–‡æœ¬æ•°æ®ï¼Œå°±ä¼˜å…ˆè€ƒè™‘ä½¿ç”¨å­—ç¬¦æµã€‚ é™¤æ­¤ä¹‹å¤–éƒ½ä½¿ç”¨å­—èŠ‚æµã€‚ è¾“å…¥æµå’Œè¾“å‡ºæµå¯¹è¾“å…¥æµåªèƒ½è¿›è¡Œè¯»æ“ä½œï¼Œå¯¹è¾“å‡ºæµåªèƒ½è¿›è¡Œå†™æ“ä½œï¼Œç¨‹åºä¸­éœ€è¦æ ¹æ®å¾…ä¼ è¾“æ•°æ®çš„ä¸åŒç‰¹æ€§è€Œä½¿ç”¨ä¸åŒçš„æµã€‚ Java IOæµå¯¹è±¡1.è¾“å…¥å­—èŠ‚æµInputStreamIO ä¸­è¾“å…¥å­—èŠ‚æµçš„ç»§æ‰¿å›¾å¯è§ä¸Šå›¾ï¼Œå¯ä»¥çœ‹å‡ºï¼š InputStream æ˜¯æ‰€æœ‰çš„è¾“å…¥å­—èŠ‚æµçš„çˆ¶ç±»ï¼Œå®ƒæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ã€‚ ByteArrayInputStreamã€StringBufferInputStreamã€FileInputStream æ˜¯ä¸‰ç§åŸºæœ¬çš„ä»‹è´¨æµï¼Œå®ƒä»¬åˆ†åˆ«ä»Byte æ•°ç»„ã€StringBufferã€å’Œæœ¬åœ°æ–‡ä»¶ä¸­è¯»å–æ•°æ®ã€‚PipedInputStream æ˜¯ä»ä¸å…¶å®ƒçº¿ç¨‹å…±ç”¨çš„ç®¡é“ä¸­è¯»å–æ•°æ®ï¼Œä¸Piped ç›¸å…³çš„çŸ¥è¯†åç»­å•ç‹¬ä»‹ç»ã€‚ ObjectInputStream å’Œæ‰€æœ‰FilterInputStream çš„å­ç±»éƒ½æ˜¯è£…é¥°æµï¼ˆè£…é¥°å™¨æ¨¡å¼çš„ä¸»è§’ï¼‰ã€‚ 2.è¾“å‡ºå­—èŠ‚æµOutputStreamIO ä¸­è¾“å‡ºå­—èŠ‚æµçš„ç»§æ‰¿å›¾å¯è§ä¸Šå›¾ï¼Œå¯ä»¥çœ‹å‡ºï¼š OutputStream æ˜¯æ‰€æœ‰çš„è¾“å‡ºå­—èŠ‚æµçš„çˆ¶ç±»ï¼Œå®ƒæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ã€‚ ByteArrayOutputStreamã€FileOutputStream æ˜¯ä¸¤ç§åŸºæœ¬çš„ä»‹è´¨æµï¼Œå®ƒä»¬åˆ†åˆ«å‘Byte æ•°ç»„ã€å’Œæœ¬åœ°æ–‡ä»¶ä¸­å†™å…¥æ•°æ®ã€‚PipedOutputStream æ˜¯å‘ä¸å…¶å®ƒçº¿ç¨‹å…±ç”¨çš„ç®¡é“ä¸­å†™å…¥æ•°æ®ï¼Œ ObjectOutputStream å’Œæ‰€æœ‰FilterOutputStream çš„å­ç±»éƒ½æ˜¯è£…é¥°æµã€‚ 3.å­—èŠ‚æµçš„è¾“å…¥ä¸è¾“å‡ºçš„å¯¹åº” å›¾ä¸­è“è‰²çš„ä¸ºä¸»è¦çš„å¯¹åº”éƒ¨åˆ†ï¼Œçº¢è‰²çš„éƒ¨åˆ†å°±æ˜¯ä¸å¯¹åº”éƒ¨åˆ†ã€‚ç´«è‰²çš„è™šçº¿éƒ¨åˆ†ä»£è¡¨è¿™äº›æµä¸€èˆ¬è¦æ­é…ä½¿ç”¨ã€‚ä»ä¸Šé¢çš„å›¾ä¸­å¯ä»¥çœ‹å‡ºJava IO ä¸­çš„å­—èŠ‚æµæ˜¯æå…¶å¯¹ç§°çš„ã€‚â€œå­˜åœ¨åŠåˆç†â€æˆ‘ä»¬çœ‹çœ‹è¿™äº›å­—èŠ‚æµä¸­ä¸å¤ªå¯¹ç§°çš„å‡ ä¸ªç±»å§ï¼ LineNumberInputStream ä¸»è¦å®Œæˆä»æµä¸­è¯»å–æ•°æ®æ—¶ï¼Œä¼šå¾—åˆ°ç›¸åº”çš„è¡Œå·ï¼Œè‡³äºä»€ä¹ˆæ—¶å€™åˆ†è¡Œã€åœ¨å“ªé‡Œåˆ†è¡Œæ˜¯ç”±æ”¹ç±»ä¸»åŠ¨ç¡®å®šçš„ï¼Œå¹¶ä¸æ˜¯åœ¨åŸå§‹ä¸­æœ‰è¿™æ ·ä¸€ä¸ªè¡Œå·ã€‚åœ¨è¾“å‡ºéƒ¨åˆ†æ²¡æœ‰å¯¹åº”çš„éƒ¨åˆ†ï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥è‡ªå·±å»ºç«‹ä¸€ä¸ªLineNumberOutputStreamï¼Œåœ¨æœ€åˆå†™å…¥æ—¶ä¼šæœ‰ä¸€ä¸ªåŸºå‡†çš„è¡Œå·ï¼Œä»¥åæ¯æ¬¡é‡åˆ°æ¢è¡Œæ—¶ä¼šåœ¨ä¸‹ä¸€è¡Œæ·»åŠ ä¸€ä¸ªè¡Œå·ï¼Œçœ‹èµ·æ¥ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚å¥½åƒæ›´ä¸å…¥æµäº†ã€‚ PushbackInputStream çš„åŠŸèƒ½æ˜¯æŸ¥çœ‹æœ€åä¸€ä¸ªå­—èŠ‚ï¼Œä¸æ»¡æ„å°±æ”¾å…¥ç¼“å†²åŒºã€‚ä¸»è¦ç”¨åœ¨ç¼–è¯‘å™¨çš„è¯­æ³•ã€è¯æ³•åˆ†æéƒ¨åˆ†ã€‚è¾“å‡ºéƒ¨åˆ†çš„BufferedOutputStream å‡ ä¹å®ç°ç›¸è¿‘çš„åŠŸèƒ½ã€‚ StringBufferInputStream å·²ç»è¢«Deprecatedï¼Œæœ¬èº«å°±ä¸åº”è¯¥å‡ºç°åœ¨InputStream éƒ¨åˆ†ï¼Œä¸»è¦å› ä¸ºString åº”è¯¥å±äºå­—ç¬¦æµçš„èŒƒå›´ã€‚å·²ç»è¢«åºŸå¼ƒäº†ï¼Œå½“ç„¶è¾“å‡ºéƒ¨åˆ†ä¹Ÿæ²¡æœ‰å¿…è¦éœ€è¦å®ƒäº†ï¼è¿˜å…è®¸å®ƒå­˜åœ¨åªæ˜¯ä¸ºäº†ä¿æŒç‰ˆæœ¬çš„å‘ä¸‹å…¼å®¹è€Œå·²ã€‚ SequenceInputStream å¯ä»¥è®¤ä¸ºæ˜¯ä¸€ä¸ªå·¥å…·ç±»ï¼Œå°†ä¸¤ä¸ªæˆ–è€…å¤šä¸ªè¾“å…¥æµå½“æˆä¸€ä¸ªè¾“å…¥æµä¾æ¬¡è¯»å–ã€‚å®Œå…¨å¯ä»¥ä»IO åŒ…ä¸­å»é™¤ï¼Œè¿˜å®Œå…¨ä¸å½±å“IO åŒ…çš„ç»“æ„ï¼Œå´è®©å…¶æ›´â€œçº¯æ´â€â€•â€•çº¯æ´çš„Decorator æ¨¡å¼ã€‚ PrintStream ä¹Ÿå¯ä»¥è®¤ä¸ºæ˜¯ä¸€ä¸ªè¾…åŠ©å·¥å…·ã€‚ä¸»è¦å¯ä»¥å‘å…¶ä»–è¾“å‡ºæµï¼Œæˆ–è€…FileInputStream å†™å…¥æ•°æ®ï¼Œæœ¬èº«å†…éƒ¨å®ç°è¿˜æ˜¯å¸¦ç¼“å†²çš„ã€‚æœ¬è´¨ä¸Šæ˜¯å¯¹å…¶å®ƒæµçš„ç»¼åˆè¿ç”¨çš„ä¸€ä¸ªå·¥å…·è€Œå·²ã€‚ä¸€æ ·å¯ä»¥è¸¢å‡ºIO åŒ…ï¼System.out å’ŒSystem.out å°±æ˜¯PrintStream çš„å®ä¾‹ï¼ 4.å­—ç¬¦è¾“å…¥æµReaderåœ¨ä¸Šé¢çš„ç»§æ‰¿å…³ç³»å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼š Reader æ˜¯æ‰€æœ‰çš„è¾“å…¥å­—ç¬¦æµçš„çˆ¶ç±»ï¼Œå®ƒæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ã€‚ CharReaderã€StringReader æ˜¯ä¸¤ç§åŸºæœ¬çš„ä»‹è´¨æµï¼Œå®ƒä»¬åˆ†åˆ«å°†Char æ•°ç»„ã€Stringä¸­è¯»å–æ•°æ®ã€‚PipedReader æ˜¯ä»ä¸å…¶å®ƒçº¿ç¨‹å…±ç”¨çš„ç®¡é“ä¸­è¯»å–æ•°æ®ã€‚ BufferedReader å¾ˆæ˜æ˜¾å°±æ˜¯ä¸€ä¸ªè£…é¥°å™¨ï¼Œå®ƒå’Œå…¶å­ç±»è´Ÿè´£è£…é¥°å…¶å®ƒReader å¯¹è±¡ã€‚ FilterReader æ˜¯æ‰€æœ‰è‡ªå®šä¹‰å…·ä½“è£…é¥°æµçš„çˆ¶ç±»ï¼Œå…¶å­ç±»PushbackReader å¯¹Reader å¯¹è±¡è¿›è¡Œè£…é¥°ï¼Œä¼šå¢åŠ ä¸€ä¸ªè¡Œå·ã€‚ InputStreamReader æ˜¯ä¸€ä¸ªè¿æ¥å­—èŠ‚æµå’Œå­—ç¬¦æµçš„æ¡¥æ¢ï¼Œå®ƒå°†å­—èŠ‚æµè½¬å˜ä¸ºå­—ç¬¦æµã€‚FileReader å¯ä»¥è¯´æ˜¯ä¸€ä¸ªè¾¾åˆ°æ­¤åŠŸèƒ½ã€å¸¸ç”¨çš„å·¥å…·ç±»ï¼Œåœ¨å…¶æºä»£ç ä¸­æ˜æ˜¾ä½¿ç”¨äº†å°†FileInputStream è½¬å˜ä¸ºReader çš„æ–¹æ³•ã€‚æˆ‘ä»¬å¯ä»¥ä»è¿™ä¸ªç±»ä¸­å¾—åˆ°ä¸€å®šçš„æŠ€å·§ã€‚Reader ä¸­å„ä¸ªç±»çš„ç”¨é€”å’Œä½¿ç”¨æ–¹æ³•åŸºæœ¬å’ŒInputStream ä¸­çš„ç±»ä½¿ç”¨ä¸€è‡´ã€‚åé¢ä¼šæœ‰Reader ä¸InputStream çš„å¯¹åº”å…³ç³»ã€‚ 5.å­—ç¬¦è¾“å‡ºæµWriteråœ¨ä¸Šé¢çš„å…³ç³»å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼š Writer æ˜¯æ‰€æœ‰çš„è¾“å‡ºå­—ç¬¦æµçš„çˆ¶ç±»ï¼Œå®ƒæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ã€‚ CharArrayWriterã€StringWriter æ˜¯ä¸¤ç§åŸºæœ¬çš„ä»‹è´¨æµï¼Œå®ƒä»¬åˆ†åˆ«å‘Char æ•°ç»„ã€String ä¸­å†™å…¥æ•°æ®ã€‚PipedWriter æ˜¯å‘ä¸å…¶å®ƒçº¿ç¨‹å…±ç”¨çš„ç®¡é“ä¸­å†™å…¥æ•°æ®ï¼Œ BufferedWriter æ˜¯ä¸€ä¸ªè£…é¥°å™¨ä¸ºWriter æä¾›ç¼“å†²åŠŸèƒ½ã€‚ PrintWriter å’ŒPrintStream æå…¶ç±»ä¼¼ï¼ŒåŠŸèƒ½å’Œä½¿ç”¨ä¹Ÿéå¸¸ç›¸ä¼¼ã€‚ OutputStreamWriter æ˜¯OutputStream åˆ°Writer è½¬æ¢çš„æ¡¥æ¢ï¼Œå®ƒçš„å­ç±»FileWriter å…¶å®å°±æ˜¯ä¸€ä¸ªå®ç°æ­¤åŠŸèƒ½çš„å…·ä½“ç±»ï¼ˆå…·ä½“å¯ä»¥ç ”ç©¶ä¸€SourceCodeï¼‰ã€‚åŠŸèƒ½å’Œä½¿ç”¨å’ŒOutputStream æå…¶ç±»ä¼¼ï¼Œåé¢ä¼šæœ‰å®ƒä»¬çš„å¯¹åº”å›¾ã€‚ 6.å­—ç¬¦æµçš„è¾“å…¥ä¸è¾“å‡ºçš„å¯¹åº” 7.å­—ç¬¦æµä¸å­—èŠ‚æµè½¬æ¢è½¬æ¢æµçš„ç‰¹ç‚¹ï¼š å…¶æ˜¯å­—ç¬¦æµå’Œå­—èŠ‚æµä¹‹é—´çš„æ¡¥æ¢ å¯å¯¹è¯»å–åˆ°çš„å­—èŠ‚æ•°æ®ç»è¿‡æŒ‡å®šç¼–ç è½¬æ¢æˆå­—ç¬¦ å¯å¯¹è¯»å–åˆ°çš„å­—ç¬¦æ•°æ®ç»è¿‡æŒ‡å®šç¼–ç è½¬æ¢æˆå­—èŠ‚ ä½•æ—¶ä½¿ç”¨è½¬æ¢æµï¼Ÿ å½“å­—èŠ‚å’Œå­—ç¬¦ä¹‹é—´æœ‰è½¬æ¢åŠ¨ä½œæ—¶ï¼› æµæ“ä½œçš„æ•°æ®éœ€è¦ç¼–ç æˆ–è§£ç æ—¶ã€‚ å…·ä½“çš„å¯¹è±¡ä½“ç°ï¼š InputStreamReader:å­—èŠ‚åˆ°å­—ç¬¦çš„æ¡¥æ¢ OutputStreamWriter:å­—ç¬¦åˆ°å­—èŠ‚çš„æ¡¥æ¢ è¿™ä¸¤ä¸ªæµå¯¹è±¡æ˜¯å­—ç¬¦ä½“ç³»ä¸­çš„æˆå‘˜ï¼Œå®ƒä»¬æœ‰è½¬æ¢ä½œç”¨ï¼Œæœ¬èº«åˆæ˜¯å­—ç¬¦æµï¼Œæ‰€ä»¥åœ¨æ„é€ çš„æ—¶å€™éœ€è¦ä¼ å…¥å­—èŠ‚æµå¯¹è±¡è¿›æ¥ã€‚ 8.Fileç±»Fileç±»æ˜¯å¯¹æ–‡ä»¶ç³»ç»Ÿä¸­æ–‡ä»¶ä»¥åŠæ–‡ä»¶å¤¹è¿›è¡Œå°è£…çš„å¯¹è±¡ï¼Œå¯ä»¥é€šè¿‡å¯¹è±¡çš„æ€æƒ³æ¥æ“ä½œæ–‡ä»¶å’Œæ–‡ä»¶å¤¹ã€‚ Fileç±»ä¿å­˜æ–‡ä»¶æˆ–ç›®å½•çš„å„ç§å…ƒæ•°æ®ä¿¡æ¯ï¼ŒåŒ…æ‹¬æ–‡ä»¶åã€æ–‡ä»¶é•¿åº¦ã€æœ€åä¿®æ”¹æ—¶é—´ã€æ˜¯å¦å¯è¯»ã€è·å–å½“å‰æ–‡ä»¶çš„è·¯å¾„åï¼Œåˆ¤æ–­æŒ‡å®šæ–‡ä»¶æ˜¯å¦å­˜åœ¨ã€è·å¾—å½“å‰ç›®å½•ä¸­çš„æ–‡ä»¶åˆ—è¡¨ï¼Œåˆ›å»ºã€åˆ é™¤æ–‡ä»¶å’Œç›®å½•ç­‰æ–¹æ³•ã€‚ 9.RandomAccessFileç±»è¯¥å¯¹è±¡å¹¶ä¸æ˜¯æµä½“ç³»ä¸­çš„ä¸€å‘˜ï¼Œå…¶å°è£…äº†å­—èŠ‚æµï¼ŒåŒæ—¶è¿˜å°è£…äº†ä¸€ä¸ªç¼“å†²åŒºï¼ˆå­—ç¬¦æ•°ç»„ï¼‰ï¼Œé€šè¿‡å†…éƒ¨çš„æŒ‡é’ˆæ¥æ“ä½œå­—ç¬¦æ•°ç»„ä¸­çš„æ•°æ®ã€‚ è¯¥å¯¹è±¡ç‰¹ç‚¹ï¼š è¯¥å¯¹è±¡åªèƒ½æ“ä½œæ–‡ä»¶ï¼Œæ‰€ä»¥æ„é€ å‡½æ•°æ¥æ”¶ä¸¤ç§ç±»å‹çš„å‚æ•°ï¼ša.å­—ç¬¦ä¸²æ–‡ä»¶è·¯å¾„ï¼›b.Fileå¯¹è±¡ã€‚ è¯¥å¯¹è±¡æ—¢å¯ä»¥å¯¹æ–‡ä»¶è¿›è¡Œè¯»æ“ä½œï¼Œä¹Ÿèƒ½è¿›è¡Œå†™æ“ä½œï¼Œåœ¨è¿›è¡Œå¯¹è±¡å®ä¾‹åŒ–æ—¶å¯æŒ‡å®šæ“ä½œæ¨¡å¼(r,rw) æ³¨æ„ï¼šè¯¥å¯¹è±¡åœ¨å®ä¾‹åŒ–æ—¶ï¼Œå¦‚æœè¦æ“ä½œçš„æ–‡ä»¶ä¸å­˜åœ¨ï¼Œä¼šè‡ªåŠ¨åˆ›å»ºï¼›å¦‚æœæ–‡ä»¶å­˜åœ¨ï¼Œå†™æ•°æ®æœªæŒ‡å®šä½ç½®ï¼Œä¼šä»å¤´å¼€å§‹å†™ï¼Œå³è¦†ç›–åŸæœ‰çš„å†…å®¹ã€‚ å¯ä»¥ç”¨äºå¤šçº¿ç¨‹ä¸‹è½½æˆ–å¤šä¸ªçº¿ç¨‹åŒæ—¶å†™æ•°æ®åˆ°æ–‡ä»¶ã€‚ æ›´å¤šç²¾å½©æ–‡ç« è¯·è§æˆ‘çš„ä¸ªäººåšå®¢åœ°å€ï¼šhttp://www.54tianzhisheng.cn","tags":[{"name":"Java","slug":"Java","permalink":"http://yoursite.com/tags/Java/"},{"name":"IO","slug":"IO","permalink":"http://yoursite.com/tags/IO/"}]},{"title":"AJAX å­¦ä¹ ","date":"2017-06-22T16:00:00.000Z","path":"2017/06/23/AJAX/","text":"èƒŒæ™¯æœ€è¿‘çš„é¡¹ç›®ä¸­å¤§é‡åœ°æ–¹éœ€è¦ä½¿ç”¨ AJAXï¼Œæ— å¥ˆï¼Œè°å«æˆ‘æ—¢è¦å†™å‰å°åˆè¦å†™åå°å‘¢ï¼Œåªå¥½å­¦ä¹ ä¸‹è¿™ä¸ªæŠ€æœ¯ç‚¹ï¼Œä¸»è¦å‚è€ƒ W3school æ–‡æ¡£ï¼Œä¸‹é¢è®°å½•ä¸‹è¿™äº›çŸ¥è¯†ç‚¹ï¼Œä¾¿äºæ—¥åè‡ªå·±æŸ¥é˜…ï¼Œä¸‹é¢çš„ä¸€äº›æµ‹è¯•ä»£ç å»ºè®®åœ¨ W3school ä¸­æµ‹è¯•ã€‚ AJAX åŸºç¡€ï¼š AJAX = Asynchronous JavaScript and XMLï¼ˆå¼‚æ­¥çš„ JavaScript å’Œ XMLï¼‰ã€‚ AJAX æ˜¯ä¸€ç§åœ¨æ— éœ€é‡æ–°åŠ è½½æ•´ä¸ªç½‘é¡µçš„æƒ…å†µä¸‹ï¼Œèƒ½å¤Ÿæ›´æ–°éƒ¨åˆ†ç½‘é¡µçš„æŠ€æœ¯ã€‚ åœ¨å¾ˆå¤šç½‘ç«™å¯ä»¥è§åˆ°ä½¿ç”¨è¿™ç§æŠ€æœ¯ã€‚ AJAX - XMLHttpRequest åˆ›å»º XMLHttpRequest å¯¹è±¡ XMLHttpRequest æ˜¯ AJAX çš„åŸºç¡€ã€‚XMLHttpRequest ç”¨äºåœ¨åå°ä¸æœåŠ¡å™¨äº¤æ¢æ•°æ®ã€‚è¿™æ„å‘³ç€å¯ä»¥åœ¨ä¸é‡æ–°åŠ è½½æ•´ä¸ªç½‘é¡µçš„æƒ…å†µä¸‹ï¼Œå¯¹ç½‘é¡µçš„æŸéƒ¨åˆ†è¿›è¡Œæ›´æ–°ã€‚ åˆ›å»º XMLHttpRequest å¯¹è±¡çš„è¯­æ³•ï¼š 1variable = new XMLHttpRequest(); ä½†æ˜¯å¯¹äºè€ç‰ˆæœ¬çš„ Internet Explorer ï¼ˆIE5 å’Œ IE6ï¼‰å´æ˜¯ä½¿ç”¨ ActiveX å¯¹è±¡ï¼Œæ‰€ä»¥åœ¨å¼€å‘ä¸­ä¸ºäº†é€‚åº”å¤§å¤šæ•°çš„æµè§ˆå™¨ï¼Œå¸¸ä½¿ç”¨å¦‚ä¸‹ï¼š 123456789var xmlhttp;if (window.XMLHttpRequest) &#123;// code for IE7+, Firefox, Chrome, Opera, Safari xmlhttp = new XMLHttpRequest(); &#125;else &#123;// code for IE6, IE5 xmlhttp = new ActiveXObject(\"Microsoft.XMLHTTP\"); &#125; å‘æœåŠ¡å™¨å‘é€è¯·æ±‚ ä½¿ç”¨ XMLHttpRequest å¯¹è±¡çš„ open() å’Œ send() æ–¹æ³•ï¼š 12xmlhttp.open(\"GET\",\"test1.txt\",true);xmlhttp.send(); method description open(method, url, async) è§„å®šè¯·æ±‚çš„ç±»å‹ã€URL ä»¥åŠæ˜¯å¦å¼‚æ­¥å¤„ç†è¯·æ±‚ã€‚methodï¼šè¯·æ±‚çš„ç±»å‹ï¼›GET æˆ– POST urlï¼šæ–‡ä»¶åœ¨æœåŠ¡å™¨ä¸Šçš„ä½ç½® asyncï¼štrueï¼ˆå¼‚æ­¥ï¼‰æˆ– falseï¼ˆåŒæ­¥ï¼‰ send(string) å°†è¯·æ±‚å‘é€åˆ°æœåŠ¡å™¨ã€‚stringï¼šä»…ç”¨äº POST è¯·æ±‚ GET è¿˜æ˜¯ POSTï¼Ÿ ä¸ POST ç›¸æ¯”ï¼ŒGET æ›´ç®€å•ä¹Ÿæ›´å¿«ï¼Œå¹¶ä¸”åœ¨å¤§éƒ¨åˆ†æƒ…å†µä¸‹éƒ½èƒ½ç”¨ã€‚ ç„¶è€Œï¼Œåœ¨ä»¥ä¸‹æƒ…å†µä¸­ï¼Œè¯·ä½¿ç”¨ POST è¯·æ±‚ï¼š æ— æ³•ä½¿ç”¨ç¼“å­˜æ–‡ä»¶ï¼ˆæ›´æ–°æœåŠ¡å™¨ä¸Šçš„æ–‡ä»¶æˆ–æ•°æ®åº“ï¼‰ å‘æœåŠ¡å™¨å‘é€å¤§é‡æ•°æ®ï¼ˆPOST æ²¡æœ‰æ•°æ®é‡é™åˆ¶ï¼‰ å‘é€åŒ…å«æœªçŸ¥å­—ç¬¦çš„ç”¨æˆ·è¾“å…¥æ—¶ï¼ŒPOST æ¯” GET æ›´ç¨³å®šä¹Ÿæ›´å¯é  ç¤ºä¾‹ï¼šGET è¯·æ±‚ 1ã€ç®€å•çš„ GET è¯·æ±‚ 12345678910111213141516171819202122232425262728293031323334&lt;html&gt;&lt;head&gt;&lt;script type=\"text/javascript\"&gt;function loadXMLDoc()&#123;var xmlhttp;if (window.XMLHttpRequest) &#123;// code for IE7+, Firefox, Chrome, Opera, Safari xmlhttp=new XMLHttpRequest(); &#125;else &#123;// code for IE6, IE5 xmlhttp=new ActiveXObject(\"Microsoft.XMLHTTP\"); &#125;xmlhttp.onreadystatechange=function() &#123; if (xmlhttp.readyState==4 &amp;&amp; xmlhttp.status==200) &#123; document.getElementById(\"myDiv\").innerHTML=xmlhttp.responseText; &#125; &#125;xmlhttp.open(\"GET\",\"/ajax/demo_get.asp?t=\" + Math.random(),true);xmlhttp.send();&#125;&lt;/script&gt;&lt;/head&gt;&lt;body&gt;&lt;h2&gt;AJAX&lt;/h2&gt;&lt;button type=\"button\" onclick=\"loadXMLDoc()\"&gt;è¯·æ±‚æ•°æ®&lt;/button&gt;&lt;div id=\"myDiv\"&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt; 2ã€é€šè¿‡ GET æ–¹æ³•å‘é€ä¿¡æ¯ 12345678910111213141516171819202122232425262728293031323334&lt;html&gt;&lt;head&gt;&lt;script type=\"text/javascript\"&gt;function loadXMLDoc()&#123;var xmlhttp;if (window.XMLHttpRequest) &#123;// code for IE7+, Firefox, Chrome, Opera, Safari xmlhttp=new XMLHttpRequest(); &#125;else &#123;// code for IE6, IE5 xmlhttp=new ActiveXObject(\"Microsoft.XMLHTTP\"); &#125;xmlhttp.onreadystatechange=function() &#123; if (xmlhttp.readyState==4 &amp;&amp; xmlhttp.status==200) &#123; document.getElementById(\"myDiv\").innerHTML=xmlhttp.responseText; &#125; &#125;xmlhttp.open(\"GET\",\"/ajax/demo_get2.asp?fname=Bill&amp;lname=Gates\",true);xmlhttp.send();&#125;&lt;/script&gt;&lt;/head&gt;&lt;body&gt;&lt;h2&gt;AJAX&lt;/h2&gt;&lt;button type=\"button\" onclick=\"loadXMLDoc()\"&gt;è¯·æ±‚æ•°æ®&lt;/button&gt;&lt;div id=\"myDiv\"&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt; ç¤ºä¾‹ï¼šPOST è¯·æ±‚ 1ã€ç®€å• POST è¯·æ±‚ 12345678910111213141516171819202122232425262728293031323334&lt;html&gt;&lt;head&gt;&lt;script type=\"text/javascript\"&gt;function loadXMLDoc()&#123;var xmlhttp;if (window.XMLHttpRequest) &#123;// code for IE7+, Firefox, Chrome, Opera, Safari xmlhttp=new XMLHttpRequest(); &#125;else &#123;// code for IE6, IE5 xmlhttp=new ActiveXObject(\"Microsoft.XMLHTTP\"); &#125;xmlhttp.onreadystatechange=function() &#123; if (xmlhttp.readyState==4 &amp;&amp; xmlhttp.status==200) &#123; document.getElementById(\"myDiv\").innerHTML=xmlhttp.responseText; &#125; &#125;xmlhttp.open(\"POST\",\"/ajax/demo_post.asp\",true);xmlhttp.send();&#125;&lt;/script&gt;&lt;/head&gt;&lt;body&gt;&lt;h2&gt;AJAX&lt;/h2&gt;&lt;button type=\"button\" onclick=\"loadXMLDoc()\"&gt;è¯·æ±‚æ•°æ®&lt;/button&gt;&lt;div id=\"myDiv\"&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt; 2ã€åƒ HTML è¡¨å•é‚£æ · POST æ•°æ®ï¼Œè¯·ä½¿ç”¨ setRequestHeader() æ¥æ·»åŠ  HTTP å¤´ã€‚ç„¶ååœ¨ send() æ–¹æ³•ä¸­è§„å®šæ‚¨å¸Œæœ›å‘é€çš„æ•°æ® 123456789101112131415161718192021222324252627282930313233343536&lt;html&gt;&lt;head&gt;&lt;script type=\"text/javascript\"&gt;function loadXMLDoc()&#123;var xmlhttp;if (window.XMLHttpRequest) &#123;// code for IE7+, Firefox, Chrome, Opera, Safari xmlhttp=new XMLHttpRequest(); &#125;else &#123;// code for IE6, IE5 xmlhttp=new ActiveXObject(\"Microsoft.XMLHTTP\"); &#125;xmlhttp.onreadystatechange=function() &#123; if (xmlhttp.readyState==4 &amp;&amp; xmlhttp.status==200) &#123; document.getElementById(\"myDiv\").innerHTML=xmlhttp.responseText; &#125; &#125;xmlhttp.open(\"POST\",\"/ajax/demo_post2.asp\",true);xmlhttp.setRequestHeader(\"Content-type\",\"application/x-www-form-urlencoded\");xmlhttp.send(\"fname=Bill&amp;lname=Gates\");&#125;&lt;/script&gt;&lt;/head&gt;&lt;body&gt;&lt;h2&gt;AJAX&lt;/h2&gt;&lt;button type=\"button\" onclick=\"loadXMLDoc()\"&gt;è¯·æ±‚æ•°æ®&lt;/button&gt;&lt;div id=\"myDiv\"&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt; æ³¨æ„ï¼šsetRequestHeader(header, value) å‘è¯·æ±‚æ·»åŠ  HTTP å¤´ï¼Œheader: è§„å®šå¤´çš„åç§°, value: è§„å®šå¤´çš„å€¼ã€‚ url - æœåŠ¡å™¨ä¸Šçš„æ–‡ä»¶ open() æ–¹æ³•çš„ url å‚æ•°æ˜¯æœåŠ¡å™¨ä¸Šæ–‡ä»¶çš„åœ°å€ï¼š 1xmlhttp.open(\"GET\",\"ajax_test.asp\",true); è¯¥æ–‡ä»¶å¯ä»¥æ˜¯ä»»ä½•ç±»å‹çš„æ–‡ä»¶ï¼Œæ¯”å¦‚ .txt å’Œ .xmlï¼Œæˆ–è€…æœåŠ¡å™¨è„šæœ¬æ–‡ä»¶ï¼Œæ¯”å¦‚ .asp å’Œ .php ï¼ˆåœ¨ä¼ å›å“åº”ä¹‹å‰ï¼Œèƒ½å¤Ÿåœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œä»»åŠ¡ï¼‰ã€‚ å¼‚æ­¥ - True or False ï¼Ÿ XMLHttpRequest å¯¹è±¡å¦‚æœè¦ç”¨äº AJAX çš„è¯ï¼Œå…¶ open() æ–¹æ³•çš„ async å‚æ•°å¿…é¡»è®¾ç½®ä¸º trueï¼Œå¯¹äº web å¼€å‘äººå‘˜æ¥è¯´ï¼Œå‘é€å¼‚æ­¥è¯·æ±‚æ˜¯ä¸€ä¸ªå·¨å¤§çš„è¿›æ­¥ã€‚å¾ˆå¤šåœ¨æœåŠ¡å™¨æ‰§è¡Œçš„ä»»åŠ¡éƒ½ç›¸å½“è´¹æ—¶ã€‚AJAX å‡ºç°ä¹‹å‰ï¼Œè¿™å¯èƒ½ä¼šå¼•èµ·åº”ç”¨ç¨‹åºæŒ‚èµ·æˆ–åœæ­¢ã€‚ é€šè¿‡ AJAXï¼ŒJavaScript æ— éœ€ç­‰å¾…æœåŠ¡å™¨çš„å“åº”ï¼Œè€Œæ˜¯ï¼š åœ¨ç­‰å¾…æœåŠ¡å™¨å“åº”æ—¶æ‰§è¡Œå…¶ä»–è„šæœ¬ å½“å“åº”å°±ç»ªåå¯¹å“åº”è¿›è¡Œå¤„ç† Async = true å½“ä½¿ç”¨ async = true æ—¶ï¼Œè¯·è§„å®šåœ¨å“åº”å¤„äº onreadystatechange äº‹ä»¶ä¸­çš„å°±ç»ªçŠ¶æ€æ—¶æ‰§è¡Œçš„å‡½æ•° 123456789101112131415161718192021222324252627282930313233&lt;html&gt;&lt;head&gt;&lt;script type=\"text/javascript\"&gt;function loadXMLDoc()&#123;var xmlhttp;if (window.XMLHttpRequest) &#123;// code for IE7+, Firefox, Chrome, Opera, Safari xmlhttp=new XMLHttpRequest(); &#125;else &#123;// code for IE6, IE5 xmlhttp=new ActiveXObject(\"Microsoft.XMLHTTP\"); &#125;xmlhttp.onreadystatechange=function() &#123; if (xmlhttp.readyState==4 &amp;&amp; xmlhttp.status==200) &#123; document.getElementById(\"myDiv\").innerHTML=xmlhttp.responseText; &#125; &#125;xmlhttp.open(\"GET\",\"/ajax/test1.txt\",true);xmlhttp.send();&#125;&lt;/script&gt;&lt;/head&gt;&lt;body&gt;&lt;div id=\"myDiv\"&gt;&lt;h2&gt;Let AJAX change this text&lt;/h2&gt;&lt;/div&gt;&lt;button type=\"button\" onclick=\"loadXMLDoc()\"&gt;é€šè¿‡ AJAX æ”¹å˜å†…å®¹&lt;/button&gt;&lt;/body&gt;&lt;/html&gt; Async = false å¦‚éœ€ä½¿ç”¨ async = falseï¼Œè¯·å°† open() æ–¹æ³•ä¸­çš„ç¬¬ä¸‰ä¸ªå‚æ•°æ”¹ä¸º false ä¸æ¨èä½¿ç”¨ async = falseï¼Œä½†æ˜¯å¯¹äºä¸€äº›å°å‹çš„è¯·æ±‚ï¼Œä¹Ÿæ˜¯å¯ä»¥çš„ã€‚ è¯·è®°ä½ï¼ŒJavaScript ä¼šç­‰åˆ°æœåŠ¡å™¨å“åº”å°±ç»ªæ‰ç»§ç»­æ‰§è¡Œã€‚å¦‚æœæœåŠ¡å™¨ç¹å¿™æˆ–ç¼“æ…¢ï¼Œåº”ç”¨ç¨‹åºä¼šæŒ‚èµ·æˆ–åœæ­¢ã€‚ æ³¨é‡Šï¼šå½“æ‚¨ä½¿ç”¨ async=false æ—¶ï¼Œè¯·ä¸è¦ç¼–å†™ onreadystatechange å‡½æ•° - æŠŠä»£ç æ”¾åˆ° send() è¯­å¥åé¢å³å¯ï¼š 123456789101112131415161718192021222324252627&lt;html&gt;&lt;head&gt;&lt;script type=\"text/javascript\"&gt;function loadXMLDoc()&#123;var xmlhttp;if (window.XMLHttpRequest) &#123;// code for IE7+, Firefox, Chrome, Opera, Safari xmlhttp=new XMLHttpRequest(); &#125;else &#123;// code for IE6, IE5 xmlhttp=new ActiveXObject(\"Microsoft.XMLHTTP\"); &#125;xmlhttp.open(\"GET\",\"/ajax/test1.txt\",false);xmlhttp.send();document.getElementById(\"myDiv\").innerHTML=xmlhttp.responseText;&#125;&lt;/script&gt;&lt;/head&gt;&lt;body&gt;&lt;div id=\"myDiv\"&gt;&lt;h2&gt;Let AJAX change this text&lt;/h2&gt;&lt;/div&gt;&lt;button type=\"button\" onclick=\"loadXMLDoc()\"&gt;é€šè¿‡ AJAX æ”¹å˜å†…å®¹&lt;/button&gt;&lt;/body&gt;&lt;/html&gt; æœåŠ¡å™¨å“åº” ä½¿ç”¨ XMLHttpRequest å¯¹è±¡çš„ responseText æˆ– responseXML å±æ€§ã€‚ responseText è·å¾—å­—ç¬¦ä¸²å½¢å¼çš„å“åº”æ•°æ®ã€‚ responseXML è·å¾— XML å½¢å¼çš„å“åº”æ•°æ®ã€‚ 1ã€responseText å±æ€§ å¦‚æœæ¥è‡ªæœåŠ¡å™¨çš„å“åº”å¹¶é XMLï¼Œè¯·ä½¿ç”¨ responseText å±æ€§ã€‚ responseText å±æ€§è¿”å›å­—ç¬¦ä¸²å½¢å¼çš„å“åº”ï¼Œå› æ­¤æ‚¨å¯ä»¥è¿™æ ·ä½¿ç”¨ï¼š 1document.getElementById(\"myDiv\").innerHTML=xmlhttp.responseText; 2ã€responseXML å±æ€§ å¦‚æœæ¥è‡ªæœåŠ¡å™¨çš„å“åº”æ˜¯ XMLï¼Œè€Œä¸”éœ€è¦ä½œä¸º XML å¯¹è±¡è¿›è¡Œè§£æï¼Œè¯·ä½¿ç”¨ responseXML å±æ€§ï¼š è¯·æ±‚ books.xml æ–‡ä»¶ï¼Œå¹¶è§£æå“åº”ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243&lt;html&gt;&lt;head&gt;&lt;script type=\"text/javascript\"&gt;function loadXMLDoc()&#123;var xmlhttp;var txt,x,i;if (window.XMLHttpRequest) &#123;// code for IE7+, Firefox, Chrome, Opera, Safari xmlhttp=new XMLHttpRequest(); &#125;else &#123;// code for IE6, IE5 xmlhttp=new ActiveXObject(\"Microsoft.XMLHTTP\"); &#125;xmlhttp.onreadystatechange=function() &#123; if (xmlhttp.readyState==4 &amp;&amp; xmlhttp.status==200) &#123; xmlDoc=xmlhttp.responseXML; txt=\"\"; x=xmlDoc.getElementsByTagName(\"title\"); for (i=0;i&lt;x.length;i++) &#123; txt=txt + x[i].childNodes[0].nodeValue + \"&lt;br /&gt;\"; &#125; document.getElementById(\"myDiv\").innerHTML=txt; &#125; &#125;xmlhttp.open(\"GET\",\"/example/xmle/books.xml\",true);xmlhttp.send();&#125;&lt;/script&gt;&lt;/head&gt;&lt;body&gt;&lt;h2&gt;My Book Collection:&lt;/h2&gt;&lt;div id=\"myDiv\"&gt;&lt;/div&gt;&lt;button type=\"button\" onclick=\"loadXMLDoc()\"&gt;è·å¾—æˆ‘çš„å›¾ä¹¦æ”¶è—åˆ—è¡¨&lt;/button&gt;&lt;/body&gt;&lt;/html&gt; onreadystatechange äº‹ä»¶ å½“è¯·æ±‚è¢«å‘é€åˆ°æœåŠ¡å™¨æ—¶ï¼Œæˆ‘ä»¬éœ€è¦æ‰§è¡Œä¸€äº›åŸºäºå“åº”çš„ä»»åŠ¡ã€‚æ¯å½“ readyState æ”¹å˜æ—¶ï¼Œå°±ä¼šè§¦å‘ onreadystatechange äº‹ä»¶ã€‚readyState å±æ€§å­˜æœ‰ XMLHttpRequest çš„çŠ¶æ€ä¿¡æ¯ã€‚ ä¸‹é¢æ˜¯ XMLHttpRequest å¯¹è±¡çš„ä¸‰ä¸ªé‡è¦çš„å±æ€§ï¼š onreadystatechange å­˜å‚¨å‡½æ•°ï¼ˆæˆ–å‡½æ•°åï¼‰ï¼Œæ¯å½“ readyState å±æ€§æ”¹å˜æ—¶ï¼Œå°±ä¼šè°ƒç”¨è¯¥å‡½æ•° readyState å­˜æœ‰ XMLHttpRequest çš„çŠ¶æ€ã€‚ä» 0 åˆ° 4 å‘ç”Ÿå˜åŒ–ã€‚ 0: è¯·æ±‚æœªåˆå§‹åŒ– 1: æœåŠ¡å™¨è¿æ¥å·²å»ºç«‹ 2: è¯·æ±‚å·²æ¥æ”¶ 3: è¯·æ±‚å¤„ç†ä¸­ 4: è¯·æ±‚å·²å®Œæˆï¼Œä¸”å“åº”å·²å°±ç»ª status 200: â€œOKâ€ 404: æœªæ‰¾åˆ°é¡µé¢ åœ¨ onreadystatechange äº‹ä»¶ä¸­ï¼Œæˆ‘ä»¬è§„å®šå½“æœåŠ¡å™¨å“åº”å·²åšå¥½è¢«å¤„ç†çš„å‡†å¤‡æ—¶æ‰€æ‰§è¡Œçš„ä»»åŠ¡ã€‚ å½“ readyState ç­‰äº 4 ä¸”çŠ¶æ€ä¸º 200 æ—¶ï¼Œè¡¨ç¤ºå“åº”å·²å°±ç»ªï¼š 1234567xmlhttp.onreadystatechange=function() &#123; if (xmlhttp.readyState==4 &amp;&amp; xmlhttp.status==200) &#123; document.getElementById(\"myDiv\").innerHTML=xmlhttp.responseText; &#125; &#125; ä½¿ç”¨ Callback å‡½æ•° callback å‡½æ•°æ˜¯ä¸€ç§ä»¥å‚æ•°å½¢å¼ä¼ é€’ç»™å¦ä¸€ä¸ªå‡½æ•°çš„å‡½æ•°ã€‚ å¦‚æœæ‚¨çš„ç½‘ç«™ä¸Šå­˜åœ¨å¤šä¸ª AJAX ä»»åŠ¡ï¼Œé‚£ä¹ˆæ‚¨åº”è¯¥ä¸ºåˆ›å»º XMLHttpRequest å¯¹è±¡ç¼–å†™ä¸€ä¸ªæ ‡å‡† çš„å‡½æ•°ï¼Œå¹¶ä¸ºæ¯ä¸ª AJAX ä»»åŠ¡è°ƒç”¨è¯¥å‡½æ•°ã€‚ è¯¥å‡½æ•°è°ƒç”¨åº”è¯¥åŒ…å« URL ä»¥åŠå‘ç”Ÿ onreadystatechange äº‹ä»¶æ—¶æ‰§è¡Œçš„ä»»åŠ¡ï¼ˆæ¯æ¬¡è°ƒç”¨å¯èƒ½ä¸å°½ç›¸åŒï¼‰ï¼š 12345678910function myFunction()&#123;loadXMLDoc(\"ajax_info.txt\",function() &#123; if (xmlhttp.readyState==4 &amp;&amp; xmlhttp.status==200) &#123; document.getElementById(\"myDiv\").innerHTML=xmlhttp.responseText; &#125; &#125;);&#125; AJAX - é«˜çº§ASP/PHP è¯·æ±‚å®ä¾‹ - AJAX ç”¨äºåˆ›é€ åŠ¨æ€æ€§æ›´å¼ºçš„åº”ç”¨ç¨‹åºã€‚ AJAX å¯ç”¨æ¥ä¸æ•°æ®åº“è¿›è¡ŒåŠ¨æ€é€šä¿¡ã€‚ AJAX å¯ç”¨æ¥ä¸ XML æ–‡ä»¶è¿›è¡Œäº¤äº’å¼é€šä¿¡ã€‚ AJAX å®ä¾‹ä½¿ç”¨ XMLHttpRequest å¯¹è±¡çš„å®ä¾‹","tags":[{"name":"AJAX","slug":"AJAX","permalink":"http://yoursite.com/tags/AJAX/"}]},{"title":"java.sql.SQLException Field 'id' doesn't have a default value","date":"2017-06-19T16:00:00.000Z","path":"2017/06/20/Java-error1/","text":"1ã€é”™è¯¯æè¿° åœ¨åšä¸€ä¸ªç”µå•†ç½‘ç«™é¡¹ç›®æ—¶ï¼Œä½¿ç”¨ Mybatis + MySQL æ—¶å‡ºç°é—®é¢˜ Caused by: java.sql.SQLException: Field &#39;id&#39; doesn&#39;t have a default value ï¼Œç½‘ä¸Šå¾ˆå¤šäººè¯´æ˜¯ MyBatis æ’å…¥æ•°æ®è¡Œ ID æ²¡ç”Ÿæˆè‡ªå¢ã€‚ä½†æ˜¯æˆ‘å°è¯•å¥½ä¹…ï¼Œæ²¡è§£å†³è¯¥é—®é¢˜ã€‚ 2ã€é”™è¯¯åŸå›  åæ¥æ‰å‘ç°æ˜¯å› ä¸ºåˆ›å»ºæ•°æ®åº“æ—¶çš„å»ºè¡¨è¯­å¥ä¸­çš„ id æ˜¯ä¸»é”®çš„ï¼Œä½†æ˜¯åœ¨æ’å…¥çš„è¿‡ç¨‹ä¸­ï¼Œæ²¡æœ‰ç»™äºˆæ•°å€¼ï¼Œå¹¶ä¸”æ²¡æœ‰è®© id è‡ªå¢ã€‚ 3ã€è§£å†³åŠæ³• ä¿®æ”¹æ•°æ®åº“è¡¨ä¸­çš„idï¼Œè®©å…¶è‡ªå¢ï¼ˆåœ¨æ’å…¥çš„è¿‡ç¨‹ä¸­ï¼Œä¸æ’å…¥idæ•°æ®æ—¶ï¼‰ã€‚ ï¼ˆæˆ‘æ˜¯ç›´æ¥å°†æ•´ä¸ªæ•°æ®åº“éƒ½å¯¼å‡ºæ¥ï¼Œç„¶ååœ¨æ¯ä¸ªè¡¨çš„ id åé¢åŠ ä¸Šä¸€ä¸ª auto_incrementï¼‰, å¦‚ä¸‹ ï¼š12345678910CREATE TABLE `d_user` ( `id` int(11) NOT NULL auto_increment, `name` varchar(45) DEFAULT NULL, `password` varchar(45) DEFAULT NULL, `zip` varchar(45) DEFAULT NULL, `address` varchar(45) DEFAULT NULL, `phone` varchar(45) DEFAULT NULL, `email` varchar(45) DEFAULT NULL, PRIMARY KEY (`id`))","tags":[{"name":"Java","slug":"Java","permalink":"http://yoursite.com/tags/Java/"}]},{"title":"ä¸­ç¼€è¡¨è¾¾å¼è½¬æ¢æˆå‰ç¼€å’Œåç¼€è¡¨è¾¾å¼è¿™ç±»é¢˜ç›®çš„è¶…å®ç”¨è§£é¢˜æŠ€å·§","date":"2017-06-18T16:00:00.000Z","path":"2017/06/19/ä¸­ç¼€è¡¨è¾¾å¼è½¬æ¢æˆå‰ç¼€å’Œåç¼€è¡¨è¾¾å¼è¿™ç±»é¢˜ç›®çš„è¶…å®ç”¨è§£é¢˜æŠ€å·§/","text":"çœ‹åˆ°äº†æ ‡é¢˜å¦‚æœè¿˜ä¸äº†è§£çš„è¿™å‡ ä¸ªæ¦‚å¿µçš„è¯·å…ˆçœ‹çœ‹åšå®¢ï¼šè¯¦è§£å‰ç¼€ã€ä¸­ç¼€ã€åç¼€è¡¨è¾¾å¼ å…ˆç»™å‡ ä¸ªä¸­ç¼€è¡¨è¾¾å¼è½¬æ¢æˆåç¼€è¡¨è¾¾å¼é¢˜ç›®åšåšå§ï¼Œæœ€åæˆ‘ä»¬åœ¨æ€»ç»“è¶…å®ç”¨çš„æŠ€å·§ï¼ï¼ 1. è¡¨è¾¾å¼â€œX=A+B*ï¼ˆCâ€“Dï¼‰/Eâ€çš„åç¼€è¡¨ç¤ºå½¢å¼å¯ä»¥ä¸º A. XAB+CDE/-*= B. XA+BC-DE/*= C. XABCD-*E/+= D. XABCDE+*/= å…ˆæŠŠç­”æ¡ˆè¯´å‡ºæ¥å§ï¼Œä¸è¿‡ä½ å¯ä»¥è‡ªå·±å…ˆå¥½å¥½çš„æƒ³æƒ³å¯ä»¥æ€ä¹ˆåšæ‰èƒ½æ›´å¿«çš„æŠŠç­”æ¡ˆé€‰å‡ºæ¥å‘¢ï¼Ÿ ç­”æ¡ˆï¼šC å…ˆçœ‹çœ‹ä¸‹é¢å›¾ç‰‡ä¸­çš„è¿™ç§æ–¹æ³•å¦‚ä½•ï¼Ÿ 2. å·²çŸ¥-ç®—æœ¯è¡¨è¾¾å¼çš„ä¸­ç¼€è¡¨è¾¾å¼ä¸ºa-(b+c/d)*e,å…¶åç¼€å½¢å¼ä¸º() A. -a+b*c/d B. -a+b*cd/e C. -+*abc/de D. abcd/+e*- ç­”æ¡ˆï¼šD 3. ç®—æœ¯è¡¨è¾¾å¼a+b*(c+d/e)è½¬ä¸ºåç¼€è¡¨è¾¾å¼åä¸º() A. ab+cde/* B. abcde/+*+ C. abcde/*++ D. abcde*/++ ç­”æ¡ˆï¼šB 4. è¡¨è¾¾å¼a*(b+c)-dçš„åç¼€è¡¨è¾¾å¼æ˜¯() A. abcd*+- B. abc+*d- C. abc*+d- D. -+*abcd ç­”æ¡ˆï¼šB å¥½ï¼Œé¢˜ç›®æˆ‘ä»¬ä¹Ÿçœ‹äº†è¿™ä¹ˆå¤šäº†ï¼Œé‚£æˆ‘ä»¬è¯¥å¦‚ä½•è§£å†³è¿™ä¸€ç±»çš„é¢˜ç›®å‘¢ï¼Ÿå¦‚æœä½ çœ‹äº†æ–‡ç« é¦–éƒ¨çš„é‚£ç¯‡ åšå®¢çš„è¯ï¼Œé‚£ä½ è‚¯å®šä¼šè§‰å¾—é‚£ä¸ªè§£æ³•å¾ˆå¤æ‚ï¼Œå¦‚æœçœŸçš„æ˜¯åœ¨ç¬”è¯•ä¸­å‡ºç°è¿™æ ·çš„é¢˜ç›®ï¼Œé‚£å¾—è€—è´¹ä¸ å°‘çš„æ—¶é—´å•Šã€‚æœ‰äººè¦é—®äº†ï¼Œè¯´äº†é‚£ä¹ˆä¸€å †ï¼Œé‚£ç©¶ç«Ÿæœ‰æ²¡æœ‰ä»€ä¹ˆå¿«é€Ÿçš„æ–¹æ³•å‘¢æˆ–è€…è¯´æœ‰æ²¡æœ‰ä»€ä¹ˆç®€ å•çš„æ–¹æ³•å¯ä»¥ç›´æ¥å£ç®—çš„æŠŠç­”æ¡ˆå†™å‡ºæ¥å‘¢ï¼Œç­”æ¡ˆæ˜¯ï¼šæœ‰çš„ï¼è€Œä¸”è¿˜çœŸçš„æ˜¯ç‰¹åˆ«çš„ç®€å•ï¼ï¼ï¼ è§£é¢˜é‡ç‚¹ï¼š è¿™é‡Œæˆ‘ç»™å‡ºä¸€ä¸ªä¸­ç¼€è¡¨è¾¾å¼~ a+b*c-(d+e) ç¬¬ä¸€æ­¥ï¼šæŒ‰ç…§è¿ç®—ç¬¦çš„ä¼˜å…ˆçº§å¯¹æ‰€æœ‰çš„è¿ç®—å•ä½åŠ æ‹¬å· åˆ™å¼å­å˜æˆæ‹‰ï¼š((a+(b*c))-(d+e)) ç¬¬äºŒæ­¥ï¼šè½¬æ¢å‰ç¼€ä¸åç¼€è¡¨è¾¾å¼ 1. å‰ç¼€è¡¨è¾¾å¼ï¼šæŠŠè¿ç®—ç¬¦å·ç§»åŠ¨åˆ°å¯¹åº”çš„æ‹¬å·å‰é¢ åˆ™å˜æˆæ‹‰ï¼š-( +(a *(bc)) +(de)) æŠŠæ‹¬å·å»æ‰ï¼š-+a*bc+de å‰ç¼€è¡¨è¾¾å¼å‡ºç° 2. åç¼€è¡¨è¾¾å¼ï¼šæŠŠè¿ç®—ç¬¦å·ç§»åŠ¨åˆ°å¯¹åº”çš„æ‹¬å·åé¢ åˆ™å˜æˆæ‹‰ï¼š((a(bc)* )+ (de)+ )- æŠŠæ‹¬å·å»æ‰ï¼šabc*+de+- åç¼€è¡¨è¾¾å¼å‡ºç° å‘ç°æ²¡æœ‰ï¼Œå‰ç¼€è¡¨è¾¾å¼ï¼Œåç¼€è¡¨è¾¾å¼æ˜¯ä¸éœ€è¦ç”¨æ‹¬å·æ¥è¿›è¡Œä¼˜å…ˆçº§çš„ç¡®å®šçš„ã€‚ å¦‚æœä½ ä¹ æƒ¯æ‹‰ä»–çš„è¿ç®—æ–¹æ³•ã€‚è®¡ç®—çš„æ—¶å€™ä¹Ÿå°±æ˜¯ä»ä¸¤ä¸ªæ“ä½œæ•°çš„å‰é¢ æˆ–è€…åé¢æ‰¾è¿ç®—ç¬¦ã€‚è€Œä¸æ˜¯ä¸­é—´æ‰¾ï¼Œé‚£ä¹ˆä¹Ÿå°±ç›´æ¥å¯ä»¥å£ç®—å•¦ï¼ ä½ è¯´è¿™ç§æ–¹æ³•æ˜¯ä¸æ˜¯å¾ˆç®€å•å•Šï¼ï¼ï¼ ç°åœ¨ä½ å†å»çœ‹çœ‹åˆšæ‰çš„é‚£å››é“é¢˜ç›®ï¼Œæ˜¯ä¸æ˜¯å¾ˆç®€å•çš„ç­”æ¡ˆå°±å£ç®—å‡ºæ¥äº†å•Šï¼ï¼ï¼ 6ä¸6ï¼Ÿ","tags":[{"name":"æ•°æ®ç»“æ„","slug":"æ•°æ®ç»“æ„","permalink":"http://yoursite.com/tags/æ•°æ®ç»“æ„/"},{"name":"è¡¨è¾¾å¼","slug":"è¡¨è¾¾å¼","permalink":"http://yoursite.com/tags/è¡¨è¾¾å¼/"}]},{"title":"å¾ªç¯é˜Ÿåˆ—çš„ç›¸å…³æ¡ä»¶å’Œå…¬å¼","date":"2017-06-17T16:00:00.000Z","path":"2017/06/18/å¾ªç¯é˜Ÿåˆ—çš„ç›¸å…³æ¡ä»¶å’Œå…¬å¼/","text":"å¾ªç¯é˜Ÿåˆ—çš„ç›¸å…³æ¡ä»¶å’Œå…¬å¼ï¼šé˜Ÿå°¾æŒ‡é’ˆæ˜¯rear,é˜Ÿå¤´æ˜¯frontï¼Œå…¶ä¸­QueueSizeä¸ºå¾ªç¯é˜Ÿåˆ—çš„æœ€å¤§é•¿åº¦ é˜Ÿç©ºæ¡ä»¶ï¼šrear==front é˜Ÿæ»¡æ¡ä»¶ï¼š(rear+1) %QueueSIze==front è®¡ç®—é˜Ÿåˆ—é•¿åº¦ï¼šï¼ˆrear-front+QueueSizeï¼‰%QueueSize å…¥é˜Ÿï¼šï¼ˆrear+1ï¼‰%QueueSize å‡ºé˜Ÿï¼šï¼ˆfront+1ï¼‰%QueueSize é˜Ÿåˆ—ä¸­å…ƒç´ çš„ä¸ªæ•°ï¼š (rear-front+QueueSize)%QueueSize","tags":[{"name":"æ•°æ®ç»“æ„","slug":"æ•°æ®ç»“æ„","permalink":"http://yoursite.com/tags/æ•°æ®ç»“æ„/"},{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://yoursite.com/tags/ç®—æ³•/"},{"name":"å¾ªç¯é˜Ÿåˆ—","slug":"å¾ªç¯é˜Ÿåˆ—","permalink":"http://yoursite.com/tags/å¾ªç¯é˜Ÿåˆ—/"}]},{"title":"Bootstrapå…¥é—¨éœ€æŒæ¡çš„çŸ¥è¯†ç‚¹ï¼ˆä¸€ï¼‰","date":"2017-06-17T16:00:00.000Z","path":"2017/06/18/Bootstrapå…¥é—¨éœ€æŒæ¡çš„çŸ¥è¯†ç‚¹ï¼ˆä¸€ï¼‰/","text":"BootstrapBootstrapä¸­æ–‡ç½‘ï¼šhttp://www.bootcss.com/ 1.ä»€ä¹ˆæ˜¯ Bootstrapï¼Ÿ å®˜æ–¹ä»‹ç»ï¼šç®€æ´ã€ç›´è§‚ã€å¼ºæ‚çš„å‰ç«¯å¼€å‘æ¡†æ¶ï¼Œè®©webå¼€å‘æ›´è¿…é€Ÿã€ç®€å•ã€‚ Bootstrap ä¸‹è½½ Bootstrap3ä¸‹è½½åœ°å€ï¼šhttp://v3.bootcss.com/getting-started/#download Bootstrap æ–‡ä»¶ç›®å½•ç»“æ„ 1234567891011121314151617dist -css -bootstrap.css -bootstrap.css.map -bootstrap.min.cssï¼ˆå¸¸ç”¨ï¼‰ -bootstrap-theme.css -bootstrap-theme.css.map -bootstrap-theme.min.css -fonts -glyphicons-halflings-regular.eot -glyphicons-halflings-regular.svg -glyphicons-halflings-regular.ttf -glyphicons-halflings-regular.woff -js -bootstrap.js -bootstrap.min.jsï¼ˆå¸¸ç”¨ï¼‰ -npm.js Bootstrap ä¾èµ– è¦æƒ³ä½¿ç”¨ Bootstrap ï¼Œé‚£ä¹ˆå¿…é¡»å…ˆå¼•å…¥ jQueryï¼ˆjquery.min.jsï¼‰æ–‡ä»¶ã€‚ 5.ä½¿ç”¨ Bootstrap å‹ç¼©ç‰ˆæœ¬é€‚äºå®é™…åº”ç”¨ï¼Œæœªå‹ç¼©ç‰ˆæœ¬é€‚äºå¼€å‘è°ƒè¯•è¿‡ç¨‹ ç›´æ¥å¼•ç”¨å®˜ç½‘ä¸‹è½½ä¸‹æ¥çš„æ–‡ä»¶ã€‚ ä½¿ç”¨ Bootstrap ä¸­æ–‡ç½‘æä¾›çš„å…è´¹ CDN æœåŠ¡ã€‚ 1234567891011&lt;!-- æ–° Bootstrap æ ¸å¿ƒ CSS æ–‡ä»¶ --&gt;&lt;link rel=\"stylesheet\" href=\"http://cdn.bootcss.com/bootstrap/3.3.0/css/bootstrap.min.css\"&gt;&lt;!-- å¯é€‰çš„Bootstrapä¸»é¢˜æ–‡ä»¶ï¼ˆä¸€èˆ¬ä¸ç”¨å¼•å…¥ï¼‰ --&gt;&lt;link rel=\"stylesheet\" href=\"http://cdn.bootcss.com/bootstrap/3.3.0/css/bootstrap-theme.min.css\"&gt;&lt;!-- jQueryæ–‡ä»¶ã€‚åŠ¡å¿…åœ¨bootstrap.min.js ä¹‹å‰å¼•å…¥ --&gt;&lt;script src=\"http://cdn.bootcss.com/jquery/1.11.1/jquery.min.js\"&gt;&lt;/script&gt;&lt;!-- æœ€æ–°çš„ Bootstrap æ ¸å¿ƒ JavaScript æ–‡ä»¶ --&gt;&lt;script src=\"http://cdn.bootcss.com/bootstrap/3.3.0/js/bootstrap.min.js\"&gt;&lt;/script&gt; Bootstrap åŸºæœ¬æ¨¡æ¿ 123456789101112131415161718192021222324252627&lt;!DOCTYPE html&gt;&lt;html lang=\"zh-cn\"&gt; &lt;head&gt; &lt;meta charset=\"utf-8\"&gt; &lt;meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\"&gt; &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1\"&gt; &lt;title&gt;Bootstrap åŸºæœ¬æ¨¡æ¿&lt;/title&gt; &lt;!-- Bootstrap --&gt; &lt;link href=\"css/bootstrap.min.css\" rel=\"stylesheet\"&gt; &lt;!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries --&gt; &lt;!-- WARNING: Respond.js doesn't work if you view the page via file:// --&gt; &lt;!--[if lt IE 9]&gt; &lt;script src=\"http://cdn.bootcss.com/html5shiv/3.7.2/html5shiv.min.js\"&gt;&lt;/script&gt; &lt;script src=\"http://cdn.bootcss.com/respond.js/1.4.2/respond.min.js\"&gt;&lt;/script&gt; &lt;![endif]--&gt; &lt;/head&gt; &lt;body&gt; &lt;h1&gt;ä½ å¥½ï¼Œä¸–ç•Œï¼&lt;/h1&gt; &lt;!-- jQuery (necessary for Bootstrap's JavaScript plugins) --&gt; &lt;script src=\"http://cdn.bootcss.com/jquery/1.11.1/jquery.min.js\"&gt;&lt;/script&gt; &lt;!-- Include all compiled plugins (below), or include individual files as needed --&gt; &lt;script src=\"js/bootstrap.min.js\"&gt;&lt;/script&gt; &lt;/body&gt;&lt;/html&gt; Bootstrap å®ä¾‹ç²¾é€‰ï¼šhttp://v3.bootcss.com/getting-started/#examples å…¨å±€ CSS æ ·å¼HTML5 æ–‡æ¡£ç±»å‹Bootstrap ä½¿ç”¨åˆ°çš„æŸäº› HTML å…ƒç´ å’Œ CSS å±æ€§éœ€è¦å°†é¡µé¢è®¾ç½®ä¸º HTML5 æ–‡æ¡£ç±»å‹ã€‚ 1234&lt;!DOCTYPE html&gt;&lt;html lang=\"zh-CN\"&gt; ...&lt;/html&gt; ç§»åŠ¨è®¾å¤‡ä¼˜å…ˆåœ¨ bootstrap3 ä¸­ç§»åŠ¨è®¾å¤‡ä¼˜å…ˆè€ƒè™‘çš„ã€‚ä¸ºäº†ä¿è¯é€‚å½“çš„ç»˜åˆ¶å’Œè§¦å±ç¼©æ”¾ï¼Œéœ€è¦åœ¨&lt;head&gt;ä¹‹ä¸­æ·»åŠ  viewport å…ƒæ•°æ®æ ‡ç­¾ã€‚ 1&lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1\"&gt; åœ¨ç§»åŠ¨è®¾å¤‡æµè§ˆå™¨ä¸Šï¼Œå¯ä»¥é€šè¿‡è§†å£ viewport è®¾ç½®metaå±æ€§ä¸ºuser-scalable=noå¯ä»¥ç¦ç”¨å…¶ç¼©æ”¾ï¼ˆzoomingï¼‰åŠŸèƒ½ï¼Œè¿™æ ·åç”¨æˆ·åªèƒ½æ»šåŠ¨å±å¹•ã€‚ï¼ˆçœ‹æƒ…å†µè€Œå®šï¼‰ 1&lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1, maximum-scala=1, user-scalable=no\"&gt; æ’ç‰ˆä¸é“¾æ¥Bootstrap æ’ç‰ˆã€é“¾æ¥æ ·å¼è®¾ç½®äº†åŸºæœ¬çš„å…¨å±€æ ·å¼ã€‚åˆ†åˆ«æ˜¯ï¼š ä¸º body å…ƒç´ è®¾ç½® background-color: #fff; ä½¿ç”¨ @font-family-baseã€@font-size-base å’Œ @line-height-base aå˜é‡ä½œä¸ºæ’ç‰ˆçš„åŸºæœ¬å‚æ•° ä¸ºæ‰€æœ‰é“¾æ¥è®¾ç½®äº†åŸºæœ¬é¢œè‰² @link-color ï¼Œå¹¶ä¸”å½“é“¾æ¥å¤„äº :hover çŠ¶æ€æ—¶æ‰æ·»åŠ ä¸‹åˆ’çº¿ è¿™äº›æ ·å¼éƒ½èƒ½åœ¨ scaffolding.less æ–‡ä»¶ä¸­æ‰¾åˆ°å¯¹åº”çš„æºç ã€‚ Normalize.cssä¸ºäº†å¢å¼ºè·¨æµè§ˆå™¨è¡¨ç°çš„ä¸€è‡´æ€§ï¼Œbootstrapä½¿ç”¨äº† Normalize.cssï¼Œè¿™æ˜¯ç”± Nicolas Gallagher å’Œ Jonathan Neal ç»´æŠ¤çš„ä¸€ä¸ªCSS é‡ç½®æ ·å¼åº“ã€‚ å¸ƒå±€å®¹å™¨Bootstrap éœ€è¦ä¸ºé¡µé¢å†…å®¹å’Œæ …æ ¼ç³»ç»ŸåŒ…è£¹ä¸€ä¸ª .container å®¹å™¨ã€‚Bootstrapæä¾›äº†ä¸¤ä¸ªä½œæ­¤ç”¨å¤„çš„ç±»ã€‚æ³¨æ„ï¼Œç”±äº paddingç­‰å±æ€§çš„åŸå› ï¼Œè¿™ä¸¤ç§å®¹å™¨ç±»ä¸èƒ½äº’ç›¸åµŒå¥—ã€‚ .container ç±»ç”¨äºå›ºå®šå®½åº¦å¹¶æ”¯æŒå“åº”å¼å¸ƒå±€çš„å®¹å™¨ã€‚ 123&lt;div class=\"container\"&gt; ...&lt;/div&gt; .container-fluid ç±»ç”¨äº 100% å®½åº¦ï¼Œå æ®å…¨éƒ¨è§†å£ï¼ˆviewportï¼‰çš„å®¹å™¨ã€‚ 123&lt;div class=\"container-fluid\"&gt; ...&lt;/div&gt; æ …æ ¼ç³»ç»ŸBootstrap æä¾›äº†ä¸€å¥—å“åº”å¼ã€ç§»åŠ¨è®¾å¤‡ä¼˜å…ˆçš„æµå¼æ …æ ¼ç³»ç»Ÿï¼Œéšç€å±å¹•æˆ–è§†å£ï¼ˆviewportï¼‰å°ºå¯¸çš„å¢åŠ ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨åˆ†ä¸ºæœ€å¤š12åˆ—ã€‚å®ƒåŒ…å«äº†æ˜“äºä½¿ç”¨çš„é¢„å®šä¹‰ç±»ï¼Œè¿˜æœ‰å¼ºå¤§çš„mixin ç”¨äºç”Ÿæˆæ›´å…·è¯­ä¹‰çš„å¸ƒå±€ã€‚ ç®€ä»‹æ …æ ¼ç³»ç»Ÿç”¨äºé€šè¿‡ä¸€ç³»åˆ—çš„è¡Œï¼ˆrowï¼‰ä¸åˆ—ï¼ˆcolumnï¼‰çš„ç»„åˆæ¥åˆ›å»ºé¡µé¢å¸ƒå±€ï¼Œä½ çš„å†…å®¹å°±å¯ä»¥æ”¾å…¥è¿™äº›åˆ›å»ºå¥½çš„å¸ƒå±€ä¸­ã€‚ä¸‹é¢å°±ä»‹ç»ä¸€ä¸‹ Bootstrap æ …æ ¼ç³»ç»Ÿçš„å·¥ä½œåŸç†ï¼š â€œè¡Œï¼ˆrowï¼‰â€å¿…é¡»åŒ…å«åœ¨ .container ï¼ˆå›ºå®šå®½åº¦ï¼‰æˆ– .container-fluid ï¼ˆ100% å®½åº¦ï¼‰ä¸­ï¼Œä»¥ä¾¿ä¸ºå…¶èµ‹äºˆåˆé€‚çš„æ’åˆ—ï¼ˆaligmentï¼‰å’Œå†…è¡¥ï¼ˆpaddingï¼‰ã€‚ é€šè¿‡â€œè¡Œï¼ˆrowï¼‰â€åœ¨æ°´å¹³æ–¹å‘åˆ›å»ºä¸€ç»„â€œåˆ—ï¼ˆcolumnï¼‰â€ã€‚ ä½ çš„å†…å®¹åº”å½“æ”¾ç½®äºâ€œåˆ—ï¼ˆcolumnï¼‰â€å†…ï¼Œå¹¶ä¸”ï¼Œåªæœ‰â€œåˆ—ï¼ˆcolumnï¼‰â€å¯ä»¥ä½œä¸ºè¡Œï¼ˆrowï¼‰â€çš„ç›´æ¥å­å…ƒç´ ã€‚ ç±»ä¼¼ .row å’Œ .col-xs-4 è¿™ç§é¢„å®šä¹‰çš„ç±»ï¼Œå¯ä»¥ç”¨æ¥å¿«é€Ÿåˆ›å»ºæ …æ ¼å¸ƒå±€ã€‚Bootstrap æºç ä¸­å®šä¹‰çš„ mixin ä¹Ÿå¯ä»¥ç”¨æ¥åˆ›å»ºè¯­ä¹‰åŒ–çš„å¸ƒå±€ã€‚ é€šè¿‡ä¸ºâ€œåˆ—ï¼ˆcolumnï¼‰â€è®¾ç½® padding å±æ€§ï¼Œä»è€Œåˆ›å»ºåˆ—ä¸åˆ—ä¹‹é—´çš„é—´éš”ï¼ˆgutterï¼‰ã€‚é€šè¿‡ä¸º .row å…ƒç´ è®¾ç½®è´Ÿå€¼margin ä»è€ŒæŠµæ¶ˆæ‰ä¸º .container å…ƒç´ è®¾ç½®çš„ paddingï¼Œä¹Ÿå°±é—´æ¥ä¸ºâ€œè¡Œï¼ˆrowï¼‰â€æ‰€åŒ…å«çš„â€œåˆ—ï¼ˆcolumnï¼‰â€æŠµæ¶ˆæ‰äº†paddingã€‚ The negative margin is why the examples below are outdented. Itâ€™s so that content within grid columns is lined up with non-grid content. Grid columns are created by specifying the number of twelve available columns you wish to span. For example, three equal columns would use three .col-xs-4. å¦‚æœä¸€â€œè¡Œï¼ˆrowï¼‰â€ä¸­åŒ…å«äº†çš„â€œåˆ—ï¼ˆcolumnï¼‰â€å¤§äº 12ï¼Œå¤šä½™çš„â€œåˆ—ï¼ˆcolumnï¼‰â€æ‰€åœ¨çš„å…ƒç´ å°†è¢«ä½œä¸ºä¸€ä¸ªæ•´ä½“å¦èµ·ä¸€è¡Œæ’åˆ—ã€‚ Grid classes apply to devices with screen widths greater than or equal to the breakpoint sizes, and override grid classes targeted at smaller devices. Therefore, applying any .col-md- class to an element will not only affect its styling on medium devices but also on large devices if a .col-lg- class is not present. é€šè¿‡ç ”ç©¶åé¢çš„å®ä¾‹ï¼Œå¯ä»¥å°†è¿™äº›åŸç†åº”ç”¨åˆ°ä½ çš„ä»£ç ä¸­ã€‚ åª’ä½“æŸ¥è¯¢åœ¨æ …æ ¼ç³»ç»Ÿä¸­ï¼Œæˆ‘ä»¬åœ¨ Less æ–‡ä»¶ä¸­ä½¿ç”¨ä»¥ä¸‹åª’ä½“æŸ¥è¯¢ï¼ˆmedia queryï¼‰æ¥åˆ›å»ºå…³é”®çš„åˆ†ç•Œç‚¹é˜ˆå€¼ã€‚ 1234567891011/* è¶…å°å±å¹•ï¼ˆæ‰‹æœºï¼Œå°äº 768pxï¼‰ *//* æ²¡æœ‰ä»»ä½•åª’ä½“æŸ¥è¯¢ç›¸å…³çš„ä»£ç ï¼Œå› ä¸ºè¿™åœ¨ Bootstrap ä¸­æ˜¯é»˜è®¤çš„ï¼ˆè¿˜è®°å¾— Bootstrap æ˜¯ç§»åŠ¨è®¾å¤‡ä¼˜å…ˆçš„å—ï¼Ÿï¼‰ *//* å°å±å¹•ï¼ˆå¹³æ¿ï¼Œå¤§äºç­‰äº 768pxï¼‰ */@media (min-width: @screen-sm-min) &#123; ... &#125;/* ä¸­ç­‰å±å¹•ï¼ˆæ¡Œé¢æ˜¾ç¤ºå™¨ï¼Œå¤§äºç­‰äº 992pxï¼‰ */@media (min-width: @screen-md-min) &#123; ... &#125;/* å¤§å±å¹•ï¼ˆå¤§æ¡Œé¢æ˜¾ç¤ºå™¨ï¼Œå¤§äºç­‰äº 1200pxï¼‰ */@media (min-width: @screen-lg-min) &#123; ... &#125; å¶å°”ä¹Ÿä¼šåœ¨åª’ä½“æŸ¥è¯¢ä»£ç ä¸­åŒ…å« max-width ä»è€Œå°† CSS çš„å½±å“é™åˆ¶åœ¨æ›´å°èŒƒå›´çš„å±å¹•å¤§å°ä¹‹å†… 1234@media (max-width: @screen-xs-max) &#123; ... &#125;@media (min-width: @screen-sm-min) and (max-width: @screen-sm-max) &#123; ... &#125;@media (min-width: @screen-md-min) and (max-width: @screen-md-max) &#123; ... &#125;@media (min-width: @screen-lg-min) &#123; ... &#125; æ …æ ¼å‚æ•°é€šè¿‡ä¸‹è¡¨å¯ä»¥è¯¦ç»†æŸ¥çœ‹ Bootstrap çš„æ …æ ¼ç³»ç»Ÿæ˜¯å¦‚ä½•åœ¨å¤šç§å±å¹•è®¾å¤‡ä¸Šå·¥ä½œçš„ã€‚ è¶…å°å±å¹• æ‰‹æœº (&lt;768px) å°å±å¹• å¹³æ¿ (â‰¥768px) ä¸­ç­‰å±å¹• æ¡Œé¢æ˜¾ç¤ºå™¨ (â‰¥992px) å¤§å±å¹• å¤§æ¡Œé¢æ˜¾ç¤ºå™¨ (â‰¥1200px) æ …æ ¼ç³»ç»Ÿè¡Œä¸º æ€»æ˜¯æ°´å¹³æ’åˆ— å¼€å§‹æ˜¯å †å åœ¨ä¸€èµ·çš„ï¼Œå½“å¤§äºè¿™äº›é˜ˆå€¼æ—¶å°†å˜ä¸ºæ°´å¹³æ’åˆ—C åŒå·¦ åŒå·¦ .container æœ€å¤§å®½åº¦ None ï¼ˆè‡ªåŠ¨ï¼‰ 750px 970px 1170px ç±»å‰ç¼€ .col-xs- .col-sm- .col-md- .col-lg- åˆ—ï¼ˆcolumnï¼‰æ•° 12 12 12 12 æœ€å¤§åˆ—ï¼ˆcolumnï¼‰å®½ è‡ªåŠ¨ ~62px ~81px ~97px æ§½ï¼ˆgutterï¼‰å®½ 30px ï¼ˆæ¯åˆ—å·¦å³å‡æœ‰ 15pxï¼‰ åŒå·¦ åŒå·¦ åŒå·¦ å¯åµŒå¥— æ˜¯ æ˜¯ æ˜¯ æ˜¯ åç§»ï¼ˆOffsetsï¼‰ æ˜¯ æ˜¯ æ˜¯ æ˜¯ åˆ—æ’åº æ˜¯ æ˜¯ æ˜¯ æ˜¯ å®ä¾‹ï¼šä»å †å åˆ°æ°´å¹³æ’åˆ—ä½¿ç”¨å•ä¸€çš„ä¸€ç»„ .col-md-* æ …æ ¼ç±»ï¼Œå°±å¯ä»¥åˆ›å»ºä¸€ä¸ªåŸºæœ¬çš„æ …æ ¼ç³»ç»Ÿï¼Œåœ¨æ‰‹æœºå’Œå¹³æ¿è®¾å¤‡ä¸Šä¸€å¼€å§‹æ˜¯å †å åœ¨ä¸€èµ·çš„ï¼ˆè¶…å°å±å¹•åˆ°å°å±å¹•è¿™ä¸€èŒƒå›´ï¼‰ï¼Œåœ¨æ¡Œé¢ï¼ˆä¸­ç­‰ï¼‰å±å¹•è®¾å¤‡ä¸Šå˜ä¸ºæ°´å¹³æ’åˆ—ã€‚æ‰€æœ‰â€œåˆ—ï¼ˆcolumnï¼‰å¿…é¡»æ”¾åœ¨ â€ .row å†…ã€‚ 123456789101112131415161718192021222324252627&lt;div class=\"row\"&gt; &lt;div class=\"col-md-1\"&gt;.col-md-1&lt;/div&gt; &lt;div class=\"col-md-1\"&gt;.col-md-1&lt;/div&gt; &lt;div class=\"col-md-1\"&gt;.col-md-1&lt;/div&gt; &lt;div class=\"col-md-1\"&gt;.col-md-1&lt;/div&gt; &lt;div class=\"col-md-1\"&gt;.col-md-1&lt;/div&gt; &lt;div class=\"col-md-1\"&gt;.col-md-1&lt;/div&gt; &lt;div class=\"col-md-1\"&gt;.col-md-1&lt;/div&gt; &lt;div class=\"col-md-1\"&gt;.col-md-1&lt;/div&gt; &lt;div class=\"col-md-1\"&gt;.col-md-1&lt;/div&gt; &lt;div class=\"col-md-1\"&gt;.col-md-1&lt;/div&gt; &lt;div class=\"col-md-1\"&gt;.col-md-1&lt;/div&gt; &lt;div class=\"col-md-1\"&gt;.col-md-1&lt;/div&gt;&lt;/div&gt;&lt;div class=\"row\"&gt; &lt;div class=\"col-md-8\"&gt;.col-md-8&lt;/div&gt; &lt;div class=\"col-md-4\"&gt;.col-md-4&lt;/div&gt;&lt;/div&gt;&lt;div class=\"row\"&gt; &lt;div class=\"col-md-4\"&gt;.col-md-4&lt;/div&gt; &lt;div class=\"col-md-4\"&gt;.col-md-4&lt;/div&gt; &lt;div class=\"col-md-4\"&gt;.col-md-4&lt;/div&gt;&lt;/div&gt;&lt;div class=\"row\"&gt; &lt;div class=\"col-md-6\"&gt;.col-md-6&lt;/div&gt; &lt;div class=\"col-md-6\"&gt;.col-md-6&lt;/div&gt;&lt;/div&gt; å®ä¾‹ï¼šç§»åŠ¨è®¾å¤‡å’Œæ¡Œé¢å±å¹•æ˜¯å¦ä¸å¸Œæœ›åœ¨å°å±å¹•è®¾å¤‡ä¸Šæ‰€æœ‰åˆ—éƒ½å †å åœ¨ä¸€èµ·ï¼Ÿé‚£å°±ä½¿ç”¨é’ˆå¯¹è¶…å°å±å¹•å’Œä¸­ç­‰å±å¹•è®¾å¤‡æ‰€å®šä¹‰çš„ç±»å§ï¼Œå³ .col-xs-*å’Œ .col-md-*ã€‚è¯·çœ‹ä¸‹é¢çš„å®ä¾‹ï¼Œç ”ç©¶ä¸€ä¸‹è¿™äº›æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚ 123456789101112131415161718&lt;!-- Stack the columns on mobile by making one full-width and the other half-width --&gt;&lt;div class=\"row\"&gt; &lt;div class=\"col-xs-12 col-md-8\"&gt;.col-xs-12 .col-md-8&lt;/div&gt; &lt;div class=\"col-xs-6 col-md-4\"&gt;.col-xs-6 .col-md-4&lt;/div&gt;&lt;/div&gt;&lt;!-- Columns start at 50% wide on mobile and bump up to 33.3% wide on desktop --&gt;&lt;div class=\"row\"&gt; &lt;div class=\"col-xs-6 col-md-4\"&gt;.col-xs-6 .col-md-4&lt;/div&gt; &lt;div class=\"col-xs-6 col-md-4\"&gt;.col-xs-6 .col-md-4&lt;/div&gt; &lt;div class=\"col-xs-6 col-md-4\"&gt;.col-xs-6 .col-md-4&lt;/div&gt;&lt;/div&gt;&lt;!-- Columns are always 50% wide, on mobile and desktop --&gt;&lt;div class=\"row\"&gt; &lt;div class=\"col-xs-6\"&gt;.col-xs-6&lt;/div&gt; &lt;div class=\"col-xs-6\"&gt;.col-xs-6&lt;/div&gt;&lt;/div&gt; æ’ç‰ˆæ ‡é¢˜HTML ä¸­çš„æ‰€æœ‰æ ‡é¢˜æ ‡ç­¾ï¼Œåˆ° å‡å¯ä½¿ç”¨ã€‚å¦å¤–ï¼Œè¿˜æä¾›äº† .h1 åˆ° .h6 ç±»ï¼Œä¸ºçš„æ˜¯ç»™å†…è”ï¼ˆinlineï¼‰å±æ€§çš„æ–‡æœ¬èµ‹äºˆæ ‡é¢˜çš„æ ·å¼ 123456&lt;h1&gt;h1. Bootstrap heading&lt;/h1&gt;&lt;h2&gt;h2. Bootstrap heading&lt;/h2&gt;&lt;h3&gt;h3. Bootstrap heading&lt;/h3&gt;&lt;h4&gt;h4. Bootstrap heading&lt;/h4&gt;&lt;h5&gt;h5. Bootstrap heading&lt;/h5&gt;&lt;h6&gt;h6. Bootstrap heading&lt;/h6&gt; åœ¨æ ‡é¢˜å†…è¿˜å¯ä»¥åŒ…å« &lt;small&gt; æ ‡ç­¾æˆ–èµ‹äºˆ .small ç±»çš„å…ƒç´ ï¼Œå¯ä»¥ç”¨æ¥æ ‡è®°å‰¯æ ‡é¢˜ã€‚ 123456&lt;h1&gt;h1. Bootstrap heading &lt;small&gt;Secondary text&lt;/small&gt;&lt;/h1&gt;&lt;h2&gt;h2. Bootstrap heading &lt;small&gt;Secondary text&lt;/small&gt;&lt;/h2&gt;&lt;h3&gt;h3. Bootstrap heading &lt;small&gt;Secondary text&lt;/small&gt;&lt;/h3&gt;&lt;h4&gt;h4. Bootstrap heading &lt;small&gt;Secondary text&lt;/small&gt;&lt;/h4&gt;&lt;h5&gt;h5. Bootstrap heading &lt;small&gt;Secondary text&lt;/small&gt;&lt;/h5&gt;&lt;h6&gt;h6. Bootstrap heading &lt;small&gt;Secondary text&lt;/small&gt;&lt;/h6&gt; é¡µé¢ä¸»ä½“Bootstrap å°†å…¨å±€ font-size è®¾ç½®ä¸º 14pxï¼Œline-height è®¾ç½®ä¸º 1.428ã€‚è¿™äº›å±æ€§ç›´æ¥èµ‹äºˆ å…ƒç´ å’Œæ‰€æœ‰æ®µè½å…ƒç´ ã€‚å¦å¤–ï¼Œ ï¼ˆæ®µè½ï¼‰å…ƒç´ è¿˜è¢«è®¾ç½®äº†ç­‰äº 1/2 è¡Œé«˜ï¼ˆå³ 10pxï¼‰çš„åº•éƒ¨å¤–è¾¹è·ï¼ˆmarginï¼‰ã€‚ ä¸­å¿ƒå†…å®¹é€šè¿‡æ·»åŠ  .lead ç±»å¯ä»¥è®©æ®µè½çªå‡ºæ˜¾ç¤ºã€‚ 1&lt;p class=\"lead\"&gt;...&lt;/p&gt; ä½¿ç”¨ Less å·¥å…·æ„å»ºvariables.less æ–‡ä»¶ä¸­å®šä¹‰çš„ä¸¤ä¸ª Less å˜é‡å†³å®šäº†æ’ç‰ˆå°ºå¯¸ï¼š@font-size-base å’Œ @line-height-baseã€‚ç¬¬ä¸€ä¸ªå˜é‡å®šä¹‰äº†å…¨å±€ font-size åŸºå‡†ï¼Œç¬¬äºŒä¸ªå˜é‡æ˜¯ line-height åŸºå‡†ã€‚æˆ‘ä»¬ä½¿ç”¨è¿™äº›å˜é‡å’Œä¸€äº›ç®€å•çš„å…¬å¼è®¡ç®—å‡ºå…¶å®ƒæ‰€æœ‰é¡µé¢å…ƒç´ çš„ marginã€ padding å’Œ line-heightã€‚è‡ªå®šä¹‰è¿™äº›å˜é‡å³å¯æ”¹å˜ Bootstrap çš„é»˜è®¤æ ·å¼ å†…è”æ–‡æœ¬å…ƒç´ æ ‡è®°æ–‡æœ¬ä¸ºäº†é«˜äº®æ–‡æœ¬ï¼Œå¯ä»¥ä½¿ç”¨ &lt;mark&gt; æ ‡ç­¾ 1You can use the mark tag to &lt;mark&gt;highlight&lt;/mark&gt; text. è¢«åˆ é™¤çš„æ–‡æœ¬å¯¹äºè¢«åˆ é™¤çš„æ–‡æœ¬ï¼Œå¯ä»¥ä½¿ç”¨ &lt;del&gt; æ ‡ç­¾ã€‚ 1&lt;del&gt;This line of text is meant to be treated as deleted text.&lt;/del&gt; æ— ç”¨æ–‡æœ¬å¯¹äºæ— ç”¨æ–‡æœ¬å¯ä»¥ä½¿ç”¨ &lt;s&gt; æ ‡ç­¾ã€‚ 1&lt;s&gt;This line of text is meant to be treated as no longer accurate.&lt;/s&gt; æ’å…¥æ–‡æœ¬è€Œå¤–æ’å…¥æ–‡æœ¬ä½¿ç”¨ &lt;ins&gt; æ ‡ç­¾ 1&lt;ins&gt;This line of text is meant to be treated as an addition to the document.&lt;/ins&gt; å¸¦ä¸‹åˆ’çº¿çš„æ–‡æœ¬ä¸ºæ–‡æœ¬æ·»åŠ ä¸‹åˆ’çº¿ï¼Œä½¿ç”¨ &lt;u&gt; æ ‡ç­¾ã€‚ 1&lt;u&gt;This line of text will render as underlined&lt;/u&gt; å°å·æ–‡æœ¬ä½¿ç”¨æ ‡ç­¾ &lt;small&gt; ç€é‡å¼ºè°ƒä½¿ç”¨æ ‡ç­¾ &lt;strong&gt; æ ‡ç­¾ æ–œä½“ä½¿ç”¨ &lt;em&gt; æ ‡ç­¾ æ–‡æœ¬å¯¹é½ 12345&lt;p class=\"text-left\"&gt;Left aligned text.&lt;/p&gt;&lt;p class=\"text-center\"&gt;Center aligned text.&lt;/p&gt;&lt;p class=\"text-right\"&gt;Right aligned text.&lt;/p&gt;&lt;p class=\"text-justify\"&gt;Justified text.&lt;/p&gt;&lt;p class=\"text-nowrap\"&gt;No wrap text.&lt;/p&gt; æ”¹å˜å¤§å°å†™ 123&lt;p class=\"text-lowercase\"&gt;Lowercased text.&lt;/p&gt;&lt;p class=\"text-uppercase\"&gt;Uppercased text.&lt;/p&gt;&lt;p class=\"text-capitalize\"&gt;Capitalized text.&lt;/p&gt; å¼•ç”¨åœ¨ä½ çš„æ–‡æ¡£ä¸­å¼•ç”¨å…¶ä»–çš„æ¥æºï¼Œå¯ä»¥ä½¿ç”¨ &lt;blockquote&gt; æ¥è¡¨ç¤ºå¼•ç”¨æ ·å¼ã€‚å¯¹äºç›´æ¥å¼•ç”¨ï¼Œå»ºè®®ä½¿ç”¨ &lt;p&gt; æ ‡ç­¾ã€‚ 123&lt;blockquote&gt; &lt;p&gt;Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer posuere erat a ante.&lt;/p&gt;&lt;/blockquote&gt; åˆ—è¡¨æ— åºåˆ—è¡¨æ’åˆ—é¡ºåºæ— å…³ç´§è¦çš„ä¸€åˆ—å…ƒç´ ã€‚ 123&lt;ul&gt; &lt;li&gt;...&lt;/li&gt;&lt;/ul&gt; æœ‰åºåˆ—è¡¨é¡ºåºè‡³å…³é‡è¦çš„ä¸€ç»„å…ƒç´  123&lt;ol&gt; &lt;li&gt;...&lt;/li&gt;&lt;/ol&gt; ä»£ç å†…è”ä»£ç 1For example, &lt;code&gt;&amp;lt;section&amp;gt;&lt;/code&gt; should be wrapped as inline. ç”¨æˆ·è¾“å…¥é€šè¿‡ kbd æ ‡ç­¾æ ‡è®°ç”¨æˆ·é€šè¿‡é”®ç›˜è¾“å…¥çš„å†…å®¹ã€‚ 12To switch directories, type &lt;kbd&gt;cd&lt;/kbd&gt; followed by the name of the directory.&lt;br&gt;To edit settings, press &lt;kbd&gt;&lt;kbd&gt;ctrl&lt;/kbd&gt; + &lt;kbd&gt;,&lt;/kbd&gt;&lt;/kbd&gt; ä»£ç å—å¤šè¡Œä»£ç å¯ä»¥ä½¿ç”¨ &lt;pre&gt; æ ‡ç­¾ã€‚ä¸ºäº†æ­£ç¡®çš„å±•ç¤ºä»£ç ï¼Œæ³¨æ„å°†å°–æ‹¬å·åšè½¬ä¹‰å¤„ç†ã€‚ å˜é‡é€šè¿‡ &lt;var&gt; æ ‡ç­¾æ ‡è®°å˜é‡ ç¨‹åºè¾“å‡ºé€šè¿‡ &lt;samp&gt; æ ‡ç­¾æ¥æ ‡è®°ç¨‹åºè¾“å‡ºçš„å†…å®¹ æœŸå¾…åé¢çš„æ–‡ç« ï¼","tags":[{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"http://yoursite.com/tags/å‰ç«¯/"},{"name":"Bootstrap","slug":"Bootstrap","permalink":"http://yoursite.com/tags/Bootstrap/"}]},{"title":"Bootstrapå…¥é—¨éœ€æŒæ¡çš„çŸ¥è¯†ç‚¹ï¼ˆäºŒï¼‰","date":"2017-06-17T16:00:00.000Z","path":"2017/06/18/Bootstrapå…¥é—¨éœ€æŒæ¡çš„çŸ¥è¯†ç‚¹ï¼ˆäºŒï¼‰/","text":"ç›¸å…³é˜…è¯»ï¼šBootstrapå…¥é—¨éœ€æŒæ¡çš„çŸ¥è¯†ç‚¹ï¼ˆä¸€ï¼‰è¡¨æ ¼åŸºæœ¬å®ä¾‹ä¸ºä»»æ„ &lt;table&gt; æ ‡ç­¾æ·»åŠ  .table ç±»å¯ä»¥ä¸ºå…¶èµ‹äºˆåŸºæœ¬çš„æ ·å¼ â€” å°‘é‡çš„å†…è¡¥ï¼ˆpaddingï¼‰å’Œæ°´å¹³æ–¹å‘çš„åˆ†éš”çº¿ã€‚ 123&lt;table class=&quot;table&quot;&gt; ...&lt;/table&gt; æ¡çº¹çŠ¶è¡¨æ ¼é€šè¿‡ .table-striped ç±»å¯ä»¥ç»™ &lt;tbody&gt; ä¹‹å†…çš„æ¯ä¸€è¡Œå¢åŠ æ–‘é©¬æ¡çº¹æ ·å¼ã€‚ 123&lt;table class=\"table table-striped\"&gt; ...&lt;/table&gt; å¸¦è¾¹æ¡†çš„è¡¨æ ¼æ·»åŠ  .table-bordered ç±»ä¸ºè¡¨æ ¼å’Œå…¶ä¸­çš„æ¯ä¸ªå•å…ƒæ ¼å¢åŠ è¾¹æ¡†ã€‚ 123&lt;table class=\"table table-bordered\"&gt; ...&lt;/table&gt; é¼ æ ‡æ‚¬åœé€šè¿‡æ·»åŠ  .table-hover ç±»å¯ä»¥è®© ä¸­çš„æ¯ä¸€è¡Œå¯¹é¼ æ ‡æ‚¬åœçŠ¶æ€ä½œå‡ºå“åº”ã€‚ 123&lt;table class=\"table table-hover\"&gt; ...&lt;/table&gt; çŠ¶æ€ç±»é€šè¿‡è¿™äº›çŠ¶æ€ç±»å¯ä»¥ä¸ºè¡Œæˆ–å•å…ƒæ ¼è®¾ç½®é¢œè‰²ã€‚ Class æè¿° .active é¼ æ ‡æ‚¬åœåœ¨è¡Œæˆ–å•å…ƒæ ¼ä¸Šæ—¶æ‰€è®¾ç½®çš„é¢œè‰² .success æ ‡è¯†æˆåŠŸæˆ–ç§¯æçš„åŠ¨ä½œ .info æ ‡è¯†æ™®é€šçš„æç¤ºä¿¡æ¯æˆ–åŠ¨ä½œ .warning æ ‡è¯†è­¦å‘Šæˆ–éœ€è¦ç”¨æˆ·æ³¨æ„ .danger æ ‡è¯†å±é™©æˆ–æ½œåœ¨çš„å¸¦æ¥è´Ÿé¢å½±å“çš„åŠ¨ä½œ 123456789101112131415&lt;!-- On rows --&gt;&lt;tr class=\"active\"&gt;...&lt;/tr&gt;&lt;tr class=\"success\"&gt;...&lt;/tr&gt;&lt;tr class=\"warning\"&gt;...&lt;/tr&gt;&lt;tr class=\"danger\"&gt;...&lt;/tr&gt;&lt;tr class=\"info\"&gt;...&lt;/tr&gt;&lt;!-- On cells (`td` or `th`) --&gt;&lt;tr&gt; &lt;td class=\"active\"&gt;...&lt;/td&gt; &lt;td class=\"success\"&gt;...&lt;/td&gt; &lt;td class=\"warning\"&gt;...&lt;/td&gt; &lt;td class=\"danger\"&gt;...&lt;/td&gt; &lt;td class=\"info\"&gt;...&lt;/td&gt;&lt;/tr&gt; å“åº”å¼è¡¨æ ¼å°†ä»»ä½• .table å…ƒç´ åŒ…è£¹åœ¨ .table-responsive å…ƒç´ å†…ï¼Œå³å¯åˆ›å»ºå“åº”å¼è¡¨æ ¼ï¼Œå…¶ä¼šåœ¨å°å±å¹•è®¾å¤‡ä¸Šï¼ˆå°äº768pxï¼‰æ°´å¹³æ»šåŠ¨ã€‚å½“å±å¹•å¤§äº 768px å®½åº¦æ—¶ï¼Œæ°´å¹³æ»šåŠ¨æ¡æ¶ˆå¤±ã€‚ 12345&lt;div class=\"table-responsive\"&gt; &lt;table class=\"table\"&gt; ... &lt;/table&gt;&lt;/div&gt; è¡¨å•åŸºæœ¬å®ä¾‹å•ç‹¬çš„è¡¨å•æ§ä»¶ä¼šè¢«è‡ªåŠ¨èµ‹äºˆä¸€äº›å…¨å±€æ ·å¼ã€‚æ‰€æœ‰è®¾ç½®äº† .form-control ç±»çš„ &lt;input&gt;ã€&lt;textarea&gt; å’Œ &lt;select&gt; å…ƒç´ éƒ½å°†è¢«é»˜è®¤è®¾ç½®å®½åº¦å±æ€§ä¸º width: 100%;ã€‚ å°† label å…ƒç´ å’Œå‰é¢æåˆ°çš„æ§ä»¶åŒ…è£¹åœ¨ .form-group ä¸­å¯ä»¥è·å¾—æœ€å¥½çš„æ’åˆ—ã€‚ 123456789101112131415161718192021&lt;form role=\"form\"&gt; &lt;div class=\"form-group\"&gt; &lt;label for=\"exampleInputEmail1\"&gt;Email address&lt;/label&gt; &lt;input type=\"email\" class=\"form-control\" id=\"exampleInputEmail1\" placeholder=\"Enter email\"&gt; &lt;/div&gt; &lt;div class=\"form-group\"&gt; &lt;label for=\"exampleInputPassword1\"&gt;Password&lt;/label&gt; &lt;input type=\"password\" class=\"form-control\" id=\"exampleInputPassword1\" placeholder=\"Password\"&gt; &lt;/div&gt; &lt;div class=\"form-group\"&gt; &lt;label for=\"exampleInputFile\"&gt;File input&lt;/label&gt; &lt;input type=\"file\" id=\"exampleInputFile\"&gt; &lt;p class=\"help-block\"&gt;Example block-level help text here.&lt;/p&gt; &lt;/div&gt; &lt;div class=\"checkbox\"&gt; &lt;label&gt; &lt;input type=\"checkbox\"&gt; Check me out &lt;/label&gt; &lt;/div&gt; &lt;button type=\"submit\" class=\"btn btn-default\"&gt;Submit&lt;/button&gt;&lt;/form&gt; æ³¨æ„ï¼šä¸è¦å°†è¡¨å•ç»„ç›´æ¥å’Œè¾“å…¥æ¡†ç»„æ··åˆä½¿ç”¨ï¼Œå»ºè®®å°†è¾“å…¥æ¡†ç»„åµŒå¥—åˆ°è¡¨å•ç»„ä¸­ä½¿ç”¨ã€‚ å†…è”è¡¨å•ä¸º &lt;form&gt; å…ƒç´ æ·»åŠ  .form-inline ç±»å¯ä½¿å…¶å†…å®¹å·¦å¯¹é½å¹¶ä¸”è¡¨ç°ä¸º inline-block çº§åˆ«çš„æ§ä»¶ã€‚åªé€‚ç”¨äºè§†å£ï¼ˆviewportï¼‰è‡³å°‘åœ¨ 768px å®½åº¦æ—¶ï¼ˆè§†å£å®½åº¦å†å°çš„è¯å°±ä¼šä½¿è¡¨å•æŠ˜å ï¼‰ã€‚ æ³¨æ„ï¼š éœ€è¦æ‰‹åŠ¨è®¾ç½®å®½åº¦åœ¨ Bootstrap ä¸­ï¼Œè¾“å…¥æ¡†å’Œå•é€‰/å¤šé€‰æ¡†æ§ä»¶é»˜è®¤è¢«è®¾ç½®ä¸º width: 100%; å®½åº¦ã€‚åœ¨å†…è”è¡¨å•ï¼Œæˆ‘ä»¬å°†è¿™äº›å…ƒç´ çš„å®½åº¦è®¾ç½®ä¸º width: auto;ï¼Œå› æ­¤ï¼Œå¤šä¸ªæ§ä»¶å¯ä»¥æ’åˆ—åœ¨åŒä¸€è¡Œã€‚æ ¹æ®ä½ çš„å¸ƒå±€éœ€æ±‚ï¼Œå¯èƒ½éœ€è¦ä¸€äº›é¢å¤–çš„å®šåˆ¶åŒ–ç»„ä»¶ã€‚ ä¸€å®šè¦æ·»åŠ  label æ ‡ç­¾å¦‚æœä½ æ²¡æœ‰ä¸ºæ¯ä¸ªè¾“å…¥æ§ä»¶è®¾ç½® label æ ‡ç­¾ï¼Œå±å¹•é˜…è¯»å™¨å°†æ— æ³•æ­£ç¡®è¯†åˆ«ã€‚å¯¹äºè¿™äº›å†…è”è¡¨å•ï¼Œä½ å¯ä»¥é€šè¿‡ä¸ºlabel è®¾ç½® .sr-only ç±»å°†å…¶éšè—ã€‚ 12345678910111213141516171819202122&lt;form class=\"form-inline\" role=\"form\"&gt; &lt;div class=\"form-group\"&gt; &lt;label class=\"sr-only\" for=\"exampleInputEmail2\"&gt;Email address&lt;/label&gt; &lt;input type=\"email\" class=\"form-control\" id=\"exampleInputEmail2\" placeholder=\"Enter email\"&gt; &lt;/div&gt; &lt;div class=\"form-group\"&gt; &lt;div class=\"input-group\"&gt; &lt;div class=\"input-group-addon\"&gt;@&lt;/div&gt; &lt;input class=\"form-control\" type=\"email\" placeholder=\"Enter email\"&gt; &lt;/div&gt; &lt;/div&gt; &lt;div class=\"form-group\"&gt; &lt;label class=\"sr-only\" for=\"exampleInputPassword2\"&gt;Password&lt;/label&gt; &lt;input type=\"password\" class=\"form-control\" id=\"exampleInputPassword2\" placeholder=\"Password\"&gt; &lt;/div&gt; &lt;div class=\"checkbox\"&gt; &lt;label&gt; &lt;input type=\"checkbox\"&gt; Remember me &lt;/label&gt; &lt;/div&gt; &lt;button type=\"submit\" class=\"btn btn-default\"&gt;Sign in&lt;/button&gt;&lt;/form&gt; æ°´å¹³æ’åˆ—çš„è¡¨å•é€šè¿‡ä¸ºè¡¨å•æ·»åŠ  .form-horizontal ç±»ï¼Œå¹¶è”åˆä½¿ç”¨ Bootstrap é¢„ç½®çš„æ …æ ¼ç±»ï¼Œå¯ä»¥å°† label æ ‡ç­¾å’Œæ§ä»¶ç»„æ°´å¹³å¹¶æ’å¸ƒå±€ã€‚è¿™æ ·åšå°†æ”¹å˜ .form-group çš„è¡Œä¸ºï¼Œä½¿å…¶è¡¨ç°ä¸ºæ …æ ¼ç³»ç»Ÿä¸­çš„è¡Œï¼ˆrowï¼‰ï¼Œå› æ­¤å°±æ— éœ€å†é¢å¤–æ·»åŠ  .row äº†ã€‚ 12345678910111213141516171819202122232425262728&lt;form class=\"form-horizontal\" role=\"form\"&gt; &lt;div class=\"form-group\"&gt; &lt;label for=\"inputEmail3\" class=\"col-sm-2 control-label\"&gt;Email&lt;/label&gt; &lt;div class=\"col-sm-10\"&gt; &lt;input type=\"email\" class=\"form-control\" id=\"inputEmail3\" placeholder=\"Email\"&gt; &lt;/div&gt; &lt;/div&gt; &lt;div class=\"form-group\"&gt; &lt;label for=\"inputPassword3\" class=\"col-sm-2 control-label\"&gt;Password&lt;/label&gt; &lt;div class=\"col-sm-10\"&gt; &lt;input type=\"password\" class=\"form-control\" id=\"inputPassword3\" placeholder=\"Password\"&gt; &lt;/div&gt; &lt;/div&gt; &lt;div class=\"form-group\"&gt; &lt;div class=\"col-sm-offset-2 col-sm-10\"&gt; &lt;div class=\"checkbox\"&gt; &lt;label&gt; &lt;input type=\"checkbox\"&gt; Remember me &lt;/label&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;div class=\"form-group\"&gt; &lt;div class=\"col-sm-offset-2 col-sm-10\"&gt; &lt;button type=\"submit\" class=\"btn btn-default\"&gt;Sign in&lt;/button&gt; &lt;/div&gt; &lt;/div&gt;&lt;/form&gt; è¢«æ”¯æŒçš„æ§ä»¶è¡¨å•å¸ƒå±€å®ä¾‹ä¸­å±•ç¤ºäº†å…¶æ‰€æ”¯æŒçš„æ ‡å‡†è¡¨å•æ§ä»¶ã€‚ 1ã€è¾“å…¥æ¡†åŒ…æ‹¬å¤§éƒ¨åˆ†è¡¨å•æ§ä»¶ã€æ–‡æœ¬è¾“å…¥åŸŸæ§ä»¶ï¼Œè¿˜æ”¯æŒæ‰€æœ‰ HTML5 ç±»å‹çš„è¾“å…¥æ§ä»¶ï¼štextã€passwordã€datetimeã€datetime-localã€dateã€monthã€timeã€weekã€numberã€emailã€urlã€searchã€tel å’Œ colorã€‚ 1&lt;input type=\"text\" class=\"form-control\" placeholder=\"Text input\"&gt; å¦‚éœ€åœ¨æ–‡æœ¬è¾“å…¥åŸŸ &lt;input&gt; å‰é¢æˆ–åé¢æ·»åŠ æ–‡æœ¬å†…å®¹æˆ–æŒ‰é’®æ§ä»¶ï¼Œè¯·å‚è€ƒè¾“å…¥æ§ä»¶ç»„ã€‚ 2ã€æ–‡æœ¬åŸŸæ”¯æŒå¤šè¡Œæ–‡æœ¬çš„è¡¨å•æ§ä»¶ã€‚å¯æ ¹æ®éœ€è¦æ”¹å˜ rows å±æ€§ã€‚ 1&lt;textarea class=\"form-control\" rows=\"3\"&gt;&lt;/textarea&gt; 3ã€å¤šé€‰å’Œå•é€‰æ¡†å¤šé€‰æ¡†ï¼ˆcheckboxï¼‰ç”¨äºé€‰æ‹©åˆ—è¡¨ä¸­çš„ä¸€ä¸ªæˆ–å¤šä¸ªé€‰é¡¹ï¼Œè€Œå•é€‰æ¡†ï¼ˆradioï¼‰ç”¨äºä»å¤šä¸ªé€‰é¡¹ä¸­åªé€‰æ‹©ä¸€ä¸ªã€‚ è®¾ç½®äº† disabled å±æ€§çš„å•é€‰æˆ–å¤šé€‰æ¡†éƒ½èƒ½è¢«èµ‹äºˆåˆé€‚çš„æ ·å¼ã€‚å¯¹äºå’Œå¤šé€‰æˆ–å•é€‰æ¡†è”åˆä½¿ç”¨çš„ &lt;label&gt; æ ‡ç­¾ï¼Œå¦‚æœä¹Ÿå¸Œæœ›å°†æ‚¬åœäºä¸Šæ–¹çš„é¼ æ ‡è®¾ç½®ä¸ºâ€œç¦æ­¢ç‚¹å‡»â€çš„æ ·å¼ï¼Œè¯·å°† .disabled ç±»èµ‹äºˆ .radioã€.radio-inlineã€.checkbox ã€.checkbox-inline æˆ– &lt;fieldset&gt;ã€‚ 12345678910111213141516171819202122232425262728293031&lt;div class=\"checkbox\"&gt; &lt;label&gt; &lt;input type=\"checkbox\" value=\"\"&gt; Option one is this and that&amp;mdash;be sure to include why it's great &lt;/label&gt;&lt;/div&gt;&lt;div class=\"checkbox disabled\"&gt; &lt;label&gt; &lt;input type=\"checkbox\" value=\"\" disabled&gt; Option two is disabled &lt;/label&gt;&lt;/div&gt;&lt;div class=\"radio\"&gt; &lt;label&gt; &lt;input type=\"radio\" name=\"optionsRadios\" id=\"optionsRadios1\" value=\"option1\" checked&gt; Option one is this and that&amp;mdash;be sure to include why it's great &lt;/label&gt;&lt;/div&gt;&lt;div class=\"radio\"&gt; &lt;label&gt; &lt;input type=\"radio\" name=\"optionsRadios\" id=\"optionsRadios2\" value=\"option2\"&gt; Option two can be something else and selecting it will deselect option one &lt;/label&gt;&lt;/div&gt;&lt;div class=\"radio disabled\"&gt; &lt;label&gt; &lt;input type=\"radio\" name=\"optionsRadios\" id=\"optionsRadios3\" value=\"option3\" disabled&gt; Option three is disabled &lt;/label&gt;&lt;/div&gt; å†…è”å•é€‰å’Œå¤šé€‰æ¡†é€šè¿‡å°† .checkbox-inline æˆ– .radio-inline ç±»åº”ç”¨åˆ°ä¸€ç³»åˆ—çš„å¤šé€‰æ¡†ï¼ˆcheckboxï¼‰æˆ–å•é€‰æ¡†ï¼ˆradioï¼‰æ§ä»¶ä¸Šï¼Œå¯ä»¥ä½¿è¿™äº›æ§ä»¶æ’åˆ—åœ¨ä¸€è¡Œã€‚ 12345678910111213141516171819&lt;label class=\"checkbox-inline\"&gt; &lt;input type=\"checkbox\" id=\"inlineCheckbox1\" value=\"option1\"&gt; 1&lt;/label&gt;&lt;label class=\"checkbox-inline\"&gt; &lt;input type=\"checkbox\" id=\"inlineCheckbox2\" value=\"option2\"&gt; 2&lt;/label&gt;&lt;label class=\"checkbox-inline\"&gt; &lt;input type=\"checkbox\" id=\"inlineCheckbox3\" value=\"option3\"&gt; 3&lt;/label&gt;&lt;label class=\"radio-inline\"&gt; &lt;input type=\"radio\" name=\"inlineRadioOptions\" id=\"inlineRadio1\" value=\"option1\"&gt; 1&lt;/label&gt;&lt;label class=\"radio-inline\"&gt; &lt;input type=\"radio\" name=\"inlineRadioOptions\" id=\"inlineRadio2\" value=\"option2\"&gt; 2&lt;/label&gt;&lt;label class=\"radio-inline\"&gt; &lt;input type=\"radio\" name=\"inlineRadioOptions\" id=\"inlineRadio3\" value=\"option3\"&gt; 3&lt;/label&gt; å¤é€‰æ¡† 12345678910&lt;div class=\"checkbox\"&gt; &lt;label&gt; &lt;input type=\"checkbox\" id=\"blankCheckbox\" value=\"option1\"&gt; &lt;/label&gt;&lt;/div&gt;&lt;div class=\"radio\"&gt; &lt;label&gt; &lt;input type=\"radio\" name=\"blankRadio\" id=\"blankRadio1\" value=\"option1\"&gt; &lt;/label&gt;&lt;/div&gt; ä¸‹æ‹‰åˆ—è¡¨ï¼ˆselectï¼‰ä½¿ç”¨é»˜è®¤é€‰é¡¹æˆ–æ·»åŠ  multiple å±æ€§å¯ä»¥åŒæ—¶æ˜¾ç¤ºå¤šä¸ªé€‰é¡¹ã€‚ 123456789101112131415&lt;select class=\"form-control\"&gt; &lt;option&gt;1&lt;/option&gt; &lt;option&gt;2&lt;/option&gt; &lt;option&gt;3&lt;/option&gt; &lt;option&gt;4&lt;/option&gt; &lt;option&gt;5&lt;/option&gt;&lt;/select&gt;&lt;select multiple class=\"form-control\"&gt; &lt;option&gt;1&lt;/option&gt; &lt;option&gt;2&lt;/option&gt; &lt;option&gt;3&lt;/option&gt; &lt;option&gt;4&lt;/option&gt; &lt;option&gt;5&lt;/option&gt;&lt;/select&gt; é™æ€æ§ä»¶å¦‚æœéœ€è¦åœ¨è¡¨å•ä¸­å°†ä¸€è¡Œçº¯æ–‡æœ¬å’Œ label å…ƒç´ æ”¾ç½®äºåŒä¸€è¡Œï¼Œä¸º &lt;p&gt; å…ƒç´ æ·»åŠ  .form-control-static ç±»å³å¯ã€‚ 1234567891011121314&lt;form class=\"form-horizontal\" role=\"form\"&gt; &lt;div class=\"form-group\"&gt; &lt;label class=\"col-sm-2 control-label\"&gt;Email&lt;/label&gt; &lt;div class=\"col-sm-10\"&gt; &lt;p class=\"form-control-static\"&gt;email@example.com&lt;/p&gt; &lt;/div&gt; &lt;/div&gt; &lt;div class=\"form-group\"&gt; &lt;label for=\"inputPassword\" class=\"col-sm-2 control-label\"&gt;Password&lt;/label&gt; &lt;div class=\"col-sm-10\"&gt; &lt;input type=\"password\" class=\"form-control\" id=\"inputPassword\" placeholder=\"Password\"&gt; &lt;/div&gt; &lt;/div&gt;&lt;/form&gt; 1234567891011&lt;form class=\"form-inline\" role=\"form\"&gt; &lt;div class=\"form-group\"&gt; &lt;label class=\"sr-only\"&gt;Email&lt;/label&gt; &lt;p class=\"form-control-static\"&gt;email@example.com&lt;/p&gt; &lt;/div&gt; &lt;div class=\"form-group\"&gt; &lt;label for=\"inputPassword2\" class=\"sr-only\"&gt;Password&lt;/label&gt; &lt;input type=\"password\" class=\"form-control\" id=\"inputPassword2\" placeholder=\"Password\"&gt; &lt;/div&gt; &lt;button type=\"submit\" class=\"btn btn-default\"&gt;Confirm identity&lt;/button&gt;&lt;/form&gt; è¾“å…¥æ¡†ç„¦ç‚¹æˆ‘ä»¬å°†æŸäº›è¡¨å•æ§ä»¶çš„é»˜è®¤ outline æ ·å¼ç§»é™¤ï¼Œç„¶åå¯¹ :focus çŠ¶æ€èµ‹äºˆ box-shadow å±æ€§ã€‚ è¢«ç¦ç”¨çš„è¾“å…¥æ¡†ä¸ºè¾“å…¥æ¡†è®¾ç½® disabled å±æ€§å¯ä»¥é˜²æ­¢ç”¨æˆ·è¾“å…¥ï¼Œå¹¶èƒ½å¯¹å¤–è§‚åšä¸€äº›ä¿®æ”¹ï¼Œä½¿å…¶æ›´ç›´è§‚ã€‚ 1&lt;input class=\"form-control\" id=\"disabledInput\" type=\"text\" placeholder=\"Disabled input here...\" disabled&gt; 1234567891011121314151617181920&lt;form role=\"form\"&gt; &lt;fieldset disabled&gt; &lt;div class=\"form-group\"&gt; &lt;label for=\"disabledTextInput\"&gt;Disabled input&lt;/label&gt; &lt;input type=\"text\" id=\"disabledTextInput\" class=\"form-control\" placeholder=\"Disabled input\"&gt; &lt;/div&gt; &lt;div class=\"form-group\"&gt; &lt;label for=\"disabledSelect\"&gt;Disabled select menu&lt;/label&gt; &lt;select id=\"disabledSelect\" class=\"form-control\"&gt; &lt;option&gt;Disabled select&lt;/option&gt; &lt;/select&gt; &lt;/div&gt; &lt;div class=\"checkbox\"&gt; &lt;label&gt; &lt;input type=\"checkbox\"&gt; Can't check this &lt;/label&gt; &lt;/div&gt; &lt;button type=\"submit\" class=\"btn btn-primary\"&gt;Submit&lt;/button&gt; &lt;/fieldset&gt;&lt;/form&gt; åªè¯»è¾“å…¥æ¡†ä¸ºè¾“å…¥æ¡†è®¾ç½® readonly å±æ€§å¯ä»¥ç¦æ­¢ç”¨æˆ·è¾“å…¥ï¼Œå¹¶ä¸”è¾“å…¥æ¡†çš„æ ·å¼ä¹Ÿæ˜¯ç¦ç”¨çŠ¶æ€ã€‚ 1&lt;input class=\"form-control\" type=\"text\" placeholder=\"Readonly input hereâ€¦\" readonly&gt; æ ¡éªŒçŠ¶æ€Bootstrap å¯¹è¡¨å•æ§ä»¶çš„æ ¡éªŒçŠ¶æ€ï¼Œå¦‚ errorã€warning å’Œ success çŠ¶æ€ï¼Œéƒ½å®šä¹‰äº†æ ·å¼ã€‚ä½¿ç”¨æ—¶ï¼Œæ·»åŠ  .has-warningã€.has-error æˆ– .has-success ç±»åˆ°è¿™äº›æ§ä»¶çš„çˆ¶å…ƒç´ å³å¯ã€‚ä»»ä½•åŒ…å«åœ¨æ­¤å…ƒç´ ä¹‹å†…çš„ .control-labelã€.form-control å’Œ .help-block å…ƒç´ éƒ½å°†æ¥å—è¿™äº›æ ¡éªŒçŠ¶æ€çš„æ ·å¼ã€‚ 123456789101112131415161718192021222324252627282930313233343536&lt;div class=\"form-group has-success\"&gt; &lt;label class=\"control-label\" for=\"inputSuccess1\"&gt;Input with success&lt;/label&gt; &lt;input type=\"text\" class=\"form-control\" id=\"inputSuccess1\"&gt;&lt;/div&gt;&lt;div class=\"form-group has-warning\"&gt; &lt;label class=\"control-label\" for=\"inputWarning1\"&gt;Input with warning&lt;/label&gt; &lt;input type=\"text\" class=\"form-control\" id=\"inputWarning1\"&gt;&lt;/div&gt;&lt;div class=\"form-group has-error\"&gt; &lt;label class=\"control-label\" for=\"inputError1\"&gt;Input with error&lt;/label&gt; &lt;input type=\"text\" class=\"form-control\" id=\"inputError1\"&gt;&lt;/div&gt;&lt;div class=\"has-success\"&gt; &lt;div class=\"checkbox\"&gt; &lt;label&gt; &lt;input type=\"checkbox\" id=\"checkboxSuccess\" value=\"option1\"&gt; Checkbox with success &lt;/label&gt; &lt;/div&gt;&lt;/div&gt;&lt;div class=\"has-warning\"&gt; &lt;div class=\"checkbox\"&gt; &lt;label&gt; &lt;input type=\"checkbox\" id=\"checkboxWarning\" value=\"option1\"&gt; Checkbox with warning &lt;/label&gt; &lt;/div&gt;&lt;/div&gt;&lt;div class=\"has-error\"&gt; &lt;div class=\"checkbox\"&gt; &lt;label&gt; &lt;input type=\"checkbox\" id=\"checkboxError\" value=\"option1\"&gt; Checkbox with error &lt;/label&gt; &lt;/div&gt;&lt;/div&gt; æ·»åŠ é¢å¤–çš„å›¾æ ‡ä½ è¿˜å¯ä»¥é’ˆå¯¹æ ¡éªŒçŠ¶æ€ä¸ºè¾“å…¥æ¡†æ·»åŠ é¢å¤–çš„å›¾æ ‡ã€‚åªéœ€è®¾ç½®ç›¸åº”çš„ .has-feedback ç±»å¹¶æ·»åŠ æ­£ç¡®çš„å›¾æ ‡å³å¯ã€‚ Feedback icons only work with textual &lt;input class=&quot;form-control&quot;&gt; elements. å›¾æ ‡ã€label å’Œè¾“å…¥æ§ä»¶ç»„å¯¹äºä¸å¸¦æœ‰ label æ ‡ç­¾çš„è¾“å…¥æ¡†ä»¥åŠå³ä¾§å¸¦æœ‰é™„åŠ ç»„ä»¶çš„è¾“å…¥æ¡†ç»„ï¼Œéœ€è¦æ‰‹åŠ¨ä¸ºå…¶å›¾æ ‡å®šä½ã€‚ä¸ºäº†è®©æ‰€æœ‰ç”¨æˆ·éƒ½èƒ½è®¿é—®ä½ çš„ç½‘ç«™ï¼Œæˆ‘ä»¬å¼ºçƒˆå»ºè®®ä¸ºæ‰€æœ‰è¾“å…¥æ¡†æ·»åŠ  label æ ‡ç­¾ã€‚å¦‚æœä½ ä¸å¸Œæœ›å°† label æ ‡ç­¾å±•ç¤ºå‡ºæ¥ï¼Œå¯ä»¥é€šè¿‡æ·»åŠ  sr-only ç±»æ¥å®ç°ã€‚å¦‚æœçš„ç¡®ä¸èƒ½æ·»åŠ  label æ ‡ç­¾ï¼Œè¯·è°ƒæ•´å›¾æ ‡çš„ top å€¼ã€‚å¯¹äºè¾“å…¥æ¡†ç»„ï¼Œè¯·æ ¹æ®ä½ çš„å®é™…æƒ…å†µè°ƒæ•´ right å€¼ã€‚ 123456789101112131415&lt;div class=\"form-group has-success has-feedback\"&gt; &lt;label class=\"control-label\" for=\"inputSuccess2\"&gt;Input with success&lt;/label&gt; &lt;input type=\"text\" class=\"form-control\" id=\"inputSuccess2\"&gt; &lt;span class=\"glyphicon glyphicon-ok form-control-feedback\"&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=\"form-group has-warning has-feedback\"&gt; &lt;label class=\"control-label\" for=\"inputWarning2\"&gt;Input with warning&lt;/label&gt; &lt;input type=\"text\" class=\"form-control\" id=\"inputWarning2\"&gt; &lt;span class=\"glyphicon glyphicon-warning-sign form-control-feedback\"&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=\"form-group has-error has-feedback\"&gt; &lt;label class=\"control-label\" for=\"inputError2\"&gt;Input with error&lt;/label&gt; &lt;input type=\"text\" class=\"form-control\" id=\"inputError2\"&gt; &lt;span class=\"glyphicon glyphicon-remove form-control-feedback\"&gt;&lt;/span&gt;&lt;/div&gt; æ§ä»¶å°ºå¯¸é€šè¿‡ .input-lg ç±»ä¼¼çš„ç±»å¯ä»¥ä¸ºæ§ä»¶è®¾ç½®é«˜åº¦ï¼Œé€šè¿‡ .col-lg-* ç±»ä¼¼çš„ç±»å¯ä»¥ä¸ºæ§ä»¶è®¾ç½®å®½åº¦ã€‚ é«˜åº¦å°ºå¯¸åˆ›å»ºå¤§ä¸€äº›æˆ–å°ä¸€äº›çš„è¡¨å•æ§ä»¶ä»¥åŒ¹é…æŒ‰é’®å°ºå¯¸ã€‚ 1234567&lt;input class=\"form-control input-lg\" type=\"text\" placeholder=\".input-lg\"&gt;&lt;input class=\"form-control\" type=\"text\" placeholder=\"Default input\"&gt;&lt;input class=\"form-control input-sm\" type=\"text\" placeholder=\".input-sm\"&gt;&lt;select class=\"form-control input-lg\"&gt;...&lt;/select&gt;&lt;select class=\"form-control\"&gt;...&lt;/select&gt;&lt;select class=\"form-control input-sm\"&gt;...&lt;/select&gt; æŒ‰é’®é¢„å®šä¹‰æ ·å¼ä½¿ç”¨ä¸‹é¢åˆ—å‡ºçš„ç±»å¯ä»¥å¿«é€Ÿåˆ›å»ºä¸€ä¸ªå¸¦æœ‰é¢„å®šä¹‰æ ·å¼çš„æŒ‰é’®ã€‚ 1234567891011121314151617181920&lt;!-- Standard button --&gt;&lt;button type=\"button\" class=\"btn btn-default\"&gt;Default&lt;/button&gt;&lt;!-- Provides extra visual weight and identifies the primary action in a set of buttons --&gt;&lt;button type=\"button\" class=\"btn btn-primary\"&gt;Primary&lt;/button&gt;&lt;!-- Indicates a successful or positive action --&gt;&lt;button type=\"button\" class=\"btn btn-success\"&gt;Success&lt;/button&gt;&lt;!-- Contextual button for informational alert messages --&gt;&lt;button type=\"button\" class=\"btn btn-info\"&gt;Info&lt;/button&gt;&lt;!-- Indicates caution should be taken with this action --&gt;&lt;button type=\"button\" class=\"btn btn-warning\"&gt;Warning&lt;/button&gt;&lt;!-- Indicates a dangerous or potentially negative action --&gt;&lt;button type=\"button\" class=\"btn btn-danger\"&gt;Danger&lt;/button&gt;&lt;!-- Deemphasize a button by making it look like a link while maintaining button behavior --&gt;&lt;button type=\"button\" class=\"btn btn-link\"&gt;Link&lt;/button&gt; å°ºå¯¸éœ€è¦è®©æŒ‰é’®å…·æœ‰ä¸åŒå°ºå¯¸å—ï¼Ÿä½¿ç”¨ .btn-lgã€.btn-sm æˆ– .btn-xs å¯ä»¥è·å¾—ä¸åŒå°ºå¯¸çš„æŒ‰é’®ã€‚ 12345678910111213141516&lt;p&gt; &lt;button type=\"button\" class=\"btn btn-primary btn-lg\"&gt;Large button&lt;/button&gt; &lt;button type=\"button\" class=\"btn btn-default btn-lg\"&gt;Large button&lt;/button&gt;&lt;/p&gt;&lt;p&gt; &lt;button type=\"button\" class=\"btn btn-primary\"&gt;Default button&lt;/button&gt; &lt;button type=\"button\" class=\"btn btn-default\"&gt;Default button&lt;/button&gt;&lt;/p&gt;&lt;p&gt; &lt;button type=\"button\" class=\"btn btn-primary btn-sm\"&gt;Small button&lt;/button&gt; &lt;button type=\"button\" class=\"btn btn-default btn-sm\"&gt;Small button&lt;/button&gt;&lt;/p&gt;&lt;p&gt; &lt;button type=\"button\" class=\"btn btn-primary btn-xs\"&gt;Extra small button&lt;/button&gt; &lt;button type=\"button\" class=\"btn btn-default btn-xs\"&gt;Extra small button&lt;/button&gt;&lt;/p&gt; é€šè¿‡ç»™æŒ‰é’®æ·»åŠ  .btn-block ç±»å¯ä»¥å°†å…¶æ‹‰ä¼¸è‡³çˆ¶å…ƒç´ 100%çš„å®½åº¦ï¼Œè€Œä¸”æŒ‰é’®ä¹Ÿå˜ä¸ºäº†å—çº§ï¼ˆblockï¼‰å…ƒç´ ã€‚ 12&lt;button type=\"button\" class=\"btn btn-primary btn-lg btn-block\"&gt;Block level button&lt;/button&gt;&lt;button type=\"button\" class=\"btn btn-default btn-lg btn-block\"&gt;Block level button&lt;/button&gt; æ¿€æ´»çŠ¶æ€å½“æŒ‰é’®å¤„äºæ¿€æ´»çŠ¶æ€æ—¶ï¼Œå…¶è¡¨ç°ä¸ºè¢«æŒ‰å‹ä¸‹å»ï¼ˆåº•è‰²æ›´æ·±ã€è¾¹æ¡†å¤œè‰²æ›´æ·±ã€å‘å†…æŠ•å°„é˜´å½±ï¼‰ã€‚å¯¹äº &lt;button&gt; å…ƒç´ ï¼Œæ˜¯é€šè¿‡ :active çŠ¶æ€å®ç°çš„ã€‚å¯¹äº &lt;a&gt;å…ƒç´ ï¼Œæ˜¯é€šè¿‡ .active ç±»å®ç°çš„ã€‚ç„¶è€Œï¼Œä½ è¿˜å¯ä»¥å°† .active åº”ç”¨åˆ° &lt;button&gt;ä¸Šï¼Œå¹¶é€šè¿‡ç¼–ç¨‹çš„æ–¹å¼ä½¿å…¶å¤„äºæ¿€æ´»çŠ¶æ€ã€‚ button å…ƒç´ ç”±äº :active æ˜¯ä¼ªçŠ¶æ€ï¼Œå› æ­¤æ— éœ€é¢å¤–æ·»åŠ ï¼Œä½†æ˜¯åœ¨éœ€è¦è®©å…¶è¡¨ç°å‡ºåŒæ ·å¤–è§‚çš„æ—¶å€™å¯ä»¥æ·»åŠ  .active ç±»ã€‚ 12&lt;button type=\"button\" class=\"btn btn-primary btn-lg active\"&gt;Primary button&lt;/button&gt;&lt;button type=\"button\" class=\"btn btn-default btn-lg active\"&gt;Button&lt;/button&gt; é“¾æ¥ï¼ˆ&lt;a&gt;ï¼‰å…ƒç´ å¯ä»¥ä¸ºåŸºäº &lt;a&gt;å…ƒç´ åˆ›å»ºçš„æŒ‰é’®æ·»åŠ  .active ç±»ã€‚ 12&lt;a href=\"#\" class=\"btn btn-primary btn-lg active\" role=\"button\"&gt;Primary link&lt;/a&gt;&lt;a href=\"#\" class=\"btn btn-default btn-lg active\" role=\"button\"&gt;Link&lt;/a&gt; æŒ‰é’®ç±»ä¸º &lt;a&gt;ã€&lt;button&gt; æˆ– &lt;input&gt; å…ƒç´ åº”ç”¨æŒ‰é’®ç±» 1234&lt;a class=\"btn btn-default\" href=\"#\" role=\"button\"&gt;Link&lt;/a&gt;&lt;button class=\"btn btn-default\" type=\"submit\"&gt;Button&lt;/button&gt;&lt;input class=\"btn btn-default\" type=\"button\" value=\"Input\"&gt;&lt;input class=\"btn btn-default\" type=\"submit\" value=\"Submit\"&gt; å›¾ç‰‡å“åº”å¼å›¾ç‰‡åœ¨ Bootstrap ç‰ˆæœ¬ 3 ä¸­ï¼Œé€šè¿‡ä¸ºå›¾ç‰‡æ·»åŠ  .img-responsive ç±»å¯ä»¥è®©å›¾ç‰‡æ”¯æŒå“åº”å¼å¸ƒå±€ã€‚å…¶å®è´¨æ˜¯ä¸ºå›¾ç‰‡è®¾ç½®äº† max-width: 100%; å’Œ height: auto; å±æ€§ï¼Œä»è€Œè®©å›¾ç‰‡åœ¨å…¶çˆ¶å…ƒç´ ä¸­æ›´å¥½çš„ç¼©æ”¾ã€‚ 1&lt;img src=\"...\" class=\"img-responsive\" alt=\"Responsive image\"&gt; å›¾ç‰‡å½¢çŠ¶é€šè¿‡ä¸º &lt;img&gt; å…ƒç´ æ·»åŠ ä»¥ä¸‹ç›¸åº”çš„ç±»ï¼Œå¯ä»¥è®©å›¾ç‰‡å‘ˆç°ä¸åŒçš„å½¢çŠ¶ã€‚ 123&lt;img src=&quot;...&quot; alt=&quot;...&quot; class=&quot;img-rounded&quot;&gt;&lt;img src=&quot;...&quot; alt=&quot;...&quot; class=&quot;img-circle&quot;&gt;&lt;img src=&quot;...&quot; alt=&quot;...&quot; class=&quot;img-thumbnail&quot;&gt;","tags":[{"name":"å‰ç«¯","slug":"å‰ç«¯","permalink":"http://yoursite.com/tags/å‰ç«¯/"},{"name":"Bootstrap","slug":"Bootstrap","permalink":"http://yoursite.com/tags/Bootstrap/"}]},{"title":"æ­å»ºä¸€ä¸ªåšå®¢é¡¹ç›®åçš„ç¢ç¢å¿µ","date":"2017-06-16T16:00:00.000Z","path":"2017/06/17/blog-talk/","text":"å‰è¨€ ä»¥å‰å¤§äºŒçš„æ—¶å€™å°±æƒ³ä¸€ä¸ªäººç‹¬ç«‹åšä¸€ä¸ªç”± Java å¼€å‘çš„ä¸ªäººåšå®¢, å¯è€å½“æ—¶è¿˜å¾ˆå¼±é¸¡ï¼Œä¸€ä¸ªäººéš¾ä»¥ç‹¬æŒ¡ä¸€ç‰‡ï¼Œå› ä¸ºè¦ä¼šçš„ä¸œè¥¿å¤ªå¤šï¼Œåæ¥è‡ªå·±çœ‹åˆ°å¾ˆå¤šéƒ½æ˜¯ç”± WordPress æ­å»ºçš„åšå®¢ï¼Œå¾ˆå¤šæ¨¡æ¿å¾ˆæ¼‚äº®ï¼Œå¯æ˜¯è‡ªå·±è¦ç¨å¾®å¯¹ â€œæ‹é»„ç‰‡â€ äº†è§£ä¸€ç‚¹ï¼Œå¹¶ä¸”é‡Œé¢çš„å„ç§æ’ä»¶ç‰¹ç‰¹åˆ«çš„å¤šã€‚å»å¹´çš„æ—¶å€™å°±å¼€å§‹ç”¨ä¸Šäº† GitHub Page æ­å»ºé™æ€çš„åšå®¢ï¼Œå› ä¸ºè‡ªå·±ä¸€ç›´ä¹ æƒ¯ç”¨ Markdown å†™ä½œï¼Œå†™å®Œåï¼Œè½¯ä»¶å¯ä»¥ç›´æ¥ç”Ÿæˆ PDF å’Œ HTML æ–‡ä»¶ï¼Œè¿™æ ·å°±å¾ˆæ–¹ä¾¿äº†ï¼Œç›´æ¥å°†è‡ªå·±çš„ HTMLã€PDF å’Œ MD æ–‡ä»¶ä¸€èµ· push åˆ° GitHub ä¸Šï¼Œç„¶åè‡ªå·±åœ¨é€šè¿‡åŸŸååŠ ä¸Šæ–‡ç« é“¾æ¥å°±å¯ä»¥ç›´æ¥è®¿é—®æˆ‘çš„åšå®¢äº†ï¼Œè¿™æ ·å°±çœäº†å¾ˆå¤šäº‹äº†ã€‚è¿˜æä¾›äº† PDF å’Œ MD ç‰ˆæœ¬ï¼Œå¯¹æœ‰ä¸åŒéœ€æ±‚çš„äººéƒ½å¯æ»¡è¶³äº†ã€‚å¯æ˜¯åæ¥è§‰å¾—è¿™æ ·çš„é€¼æ ¼è¿˜æ˜¯ä¸å¤Ÿé«˜ï¼Œå°±åˆå¼€å§‹æŠ˜è…¾ Hexo äº†ï¼Œå‘ç°ç”¨ Hexo ä¹Ÿæ˜¯å¾ˆéå¸¸ç®€å•çš„ï¼ˆå…¶å®æ˜¯çœ‹åˆ° Hexo çš„ yilia ä¸»é¢˜éå¸¸æ¼‚äº®ï¼‰ã€‚äºæ˜¯å°±æ¢ä¸Šäº† Hexo äº†ï¼Œè‡ªå·±åœ¨è¿™ä¸Šé¢å†™åšå®¢ä¹Ÿå¾ˆæ–¹ä¾¿ã€‚æ¯æ¬¡ç”¨è½¯ä»¶å†™å®Œåï¼Œåœ¨ Git Bash ä¸‹æ•²ä¸€è¡Œå‘½ä»¤ hexo d -g å°±è¡Œäº†ï¼Œå¾ˆæ–¹ä¾¿ï¼å‰æ®µæ—¶é—´çœ‹åˆ°äº†ä¸€æ¬¾å¼€æºçš„åšå®¢ï¼ˆç”± Java æ­å»ºè€Œæˆï¼‰â€”â€” Taleï¼Œä¸»é¢˜æ¯”è¾ƒç®€æ´ï¼Œç¬¦åˆç¨‹åºå‘˜çš„èŒƒã€‚ä¹Ÿåˆšå¥½ç¬¦åˆè‡ªå·±æœ€åˆçš„æƒ³æ³•ï¼Œä½†æ˜¯æˆ‘æ˜¯æ²¡æ‰“ç®—æ”¾å¼ƒç°åœ¨çš„åšå®¢ï¼Œå°±æ˜¯æœ‰ä¸€ä¸ªæƒ³æ³•ï¼Œè‡ªå·±ä¹Ÿè·Ÿç€åœ¨é‚£ä¸ªåŸºç¡€å±±ä¿®æ”¹ä¸‹ã€‚ï¼ˆå› ä¸º Tale ä½¿ç”¨çš„æ˜¯è½»é‡çº§ mvc æ¡†æ¶ Blade å¼€å‘ï¼Œæˆ‘å¥½åƒä¸å¤ªäº†è§£è¿™ä¸ªæ¡†æ¶å‘¢ï¼‰ï¼Œæƒ³ç€å°± SpringBoot å¼€å‘æ¯”è¾ƒå¿«ï¼Œä¸Šæ‰‹ä¹Ÿç®€å•ã€‚å½“æ—¶å°±æœ‰è¿™ä¸ªæƒ³æ³•ï¼Œå¯æ€œæ²¡æ—¶é—´ï¼Œä¸è¿‡å‰äº›å¤©å‘ç°æœ‰äººå°±æ˜¯åŸºäºé‚£ä¸ª Tale åšå®¢é‡æ–°ä¿®æ”¹äº†ï¼Œç”¨çš„å°±æ˜¯ SpringBoot ï¼Œå“‡ï¼Œæœç„¶æ˜¯è‹±é›„æ‰€è§ç•¥åŒã€‚å½“æ—¶å°±å’Œä½œè€…é‚®ä»¶è”ç³»äº†ï¼Œäºæ˜¯è¹­è¿™äº›å¤©çš„æ—¶é—´èµ¶ç´§å»çœ‹çœ‹ï¼Œç»“æœä¸åªæ˜¯çœ‹çœ‹ï¼Œå®Œå…¨è‡ªå·±å°±å…¨éƒ¨æ•²äº†ä¸€éï¼Œç»ˆäºåœ¨ä»Šå¤©æå®šäº†ï¼Œä¸ºäº†åº†ç¥ï¼Œæ‰å†™ä¸‹è¿™ç¯‡æ–‡ç« ï¼Œå¥½å¥½è®°å½•è¿™äº›ç¾å¥½çš„æ—¶åˆ»ï¼ˆåšå®¢å¯ä»¥å®Œå…¨å‘æŒ¥ï¼Œä¸é™é¢˜æï¼‰ã€‚é€šè¿‡è‡ªå·±æ·±å…¥è¿™ä¸ªé¡¹ç›®ï¼Œæ‰èƒ½å¤Ÿå¾ˆäº†è§£å†…éƒ¨çš„å®ç°æ–¹å¼ï¼Œè¿™ç‚¹æ”¶è·å¾ˆå¤§ï¼Œè¿™åå¤©æ—¶é—´èŠ±çš„å€¼ï¼Œå†æ­¤æ„Ÿè°¢ä¸¤ä½åŸä½œè€… ZHENFENG13 ã€otale ã€‚ åšå®¢ä»‹ç»Tale ä½¿ç”¨äº†è½»é‡çº§ mvc æ¡†æ¶ Blade å¼€å‘ï¼Œé»˜è®¤ä¸»é¢˜ä½¿ç”¨äº†æ¼‚äº®çš„ pinghsu ã€‚ My-Blog ä½¿ç”¨çš„æ˜¯ Docker + SpringBoot + Mybatis + thymeleaf æ‰“é€ çš„ä¸€ä¸ªä¸ªäººåšå®¢æ¨¡æ¿ã€‚ Blog æ˜¯è‡ªå·±èŠ±äº†åå¤©çš„æ—¶é—´æŠŠæ•´ä¸ªé¡¹ç›®çš„ä»£ç éƒ½æ•²äº†ä¸€éï¼Œç†Ÿæ‚‰äº†æ•´ä¸ªé¡¹ç›®ï¼Œåšäº†ä¼˜åŒ–ï¼Œå»é™¤äº† Dockerï¼Œ å…¶ä¸­ä¿®æ”¹äº†åŸæ¥çš„ä¸€äº› bugï¼Œå¹¶åœ¨åŸä½œè€…çš„é¡¹ç›®ä¸­æå‡ºäº† issue ï¼Œ åŸä½œè€…å·²ä¿®å¤ã€‚ : å–œæ¬¢è¯¥é¡¹ç›®çš„è¯ï¼Œå¯ä»¥ç»™é¡¹ç›®ç‚¹ä¸ª starï¼Œå¦‚æœä½ æƒ³åœ¨è¿™åŸºç¡€ä¸Šä¿®æ”¹ï¼Œé‚£ä¹ˆå»ºè®®ä½  fork è¯¥é¡¹ç›®ï¼Œç„¶åå†ä¿®æ”¹å“¦ã€‚ åšå®¢é¦–é¡µï¼š å½’æ¡£ï¼š å‹é“¾ï¼š å…³äºï¼š æœç´¢ï¼š åå°ç®¡ç† ç®¡ç†ç™»å½•ï¼š ç®¡ç†é¦–é¡µï¼š å‘å¸ƒæ–‡ç« ï¼š æ–‡ç« ç®¡ç†ï¼š é¡µé¢ç®¡ç†ï¼š åˆ†ç±»æ ‡ç­¾ï¼š æ–‡ä»¶ç®¡ç†ï¼š å‹é“¾ç®¡ç†ï¼š ç³»ç»Ÿè®¾ç½®ï¼š æœ€åæˆ‘ä»€ä¹ˆæˆ‘è¿™ä¹ˆå–œæ¬¢æŠ˜è…¾åšå®¢å‘¢ï¼Œç†Ÿæ‚‰æˆ‘çš„æœ‹å‹éƒ½çŸ¥é“ï¼Œæˆ‘å†å¾ˆå¤šå¹³å°éƒ½å†™è¿‡åšå®¢ï¼Œæœ‰äº›æ˜¯ä»–ä»¬å¹³å°çš„è¿è¥äººå‘˜é‚€è¯·è¿‡å»çš„ã€‚å¯æ˜¯åœ¨è¿™äº›å¹³å°ä¸Šå†™åšå®¢ç»ˆç©¶æ˜¯æ²¡æœ‰æ„Ÿè§‰ï¼Œå¦‚ä»Šè‡ªå·±åœ¨è‡ªå·±çš„åšå®¢ç½‘ç«™å†™æ–‡ç« ï¼Œæ¯”è¾ƒè½»æ¾ï¼Œè€Œä¸”ä¹Ÿç¬¦åˆæˆ‘çš„å†™ä½œé£æ ¼ã€‚åœ¨å…¶ä»–çš„å¹³å°éƒ½æœ‰äº›å¤§å¤§å°å°çš„ä¸é€‚ï¼ˆå¯¹ç¨‹åºå‘˜æ¥è¯´åº”è¯¥æ˜¯ bugï¼‰ï¼Œè™½ç„¶ç›®å‰è¿˜æ˜¯ä¼šåœ¨è¿™äº›å¹³å°ç»§ç»­å‘å¸ƒæˆ‘æ–°å†™çš„æ–‡ç« ï¼Œä½†æ˜¯æˆ‘ä¿è¯æœ€æ–°çš„æ–‡ç« ï¼Œé¦–å‘è‚¯å®šæ˜¯æˆ‘è‡ªå·±çš„åšå®¢ç½‘ç«™ï¼Œæœ‰äº›æ˜¯ä¸ä¼šåœ¨å…¶ä»–å¹³å°å‘çš„ï¼Œæœ‰è§‰å¾—ä¸é”™çš„å¯ä»¥ RSS è®¢é˜…æˆ‘çš„åšå®¢ï¼Œæˆ–è€…æ˜¯ç›´æ¥æ”¶è—ç½‘å€ä¸‹æ¥ã€‚è‡ªä»å†™åšå®¢ä¸‹æ¥é‡åˆ°å¾ˆå¤šå¿—åŒé“åˆçš„äººï¼Œè¿™ç‚¹æ­£æ˜¯è®©æˆ‘è§‰å¾—æœ‰å†™ä¸‹å»çš„å¿…è¦äº†ã€‚è‡ªå·±å°†ä¼šåšæŒä¸‹å»ï¼Œæ—¶åˆ»è­¦é†’è‡ªå·±ï¼šå‹¿å¿˜åˆå¿ƒï¼æœ€åçš„æœ€åï¼Œè¿˜æ˜¯æƒ³è¯´ä¸€å¥ï¼šå¦‚æœä½ æƒ³å’Œæˆ‘ä¸€æ ·æŠ˜è…¾åšå®¢ï¼Œé‚£ä¹ˆæˆ‘å»ºè®®ä½ å…ˆåœ¨ä¸€å®¶å¹³å°åšæŒå†™ä¸‹å»ï¼Œç­‰åšå®¢æ•°é‡ä¸Šæ¥äº†ï¼Œåœ¨è‡ªå·±æŠ˜è…¾è‡ªå·±çš„åšå®¢ç½‘ç«™ã€‚è¿˜æœ‰å°±æ˜¯ä½ æƒ³æé«˜è‡ªå·±çš„è¯ï¼Œè¿˜æ˜¯éœ€è¦å¾ˆåœ¨æ„ä½ çš„åŸºç¡€ï¼Œç„¶åå°±æ˜¯è¦å¤šç»ƒæ‰‹å‡ ä¸ªé¡¹ç›®ï¼Œæˆ‘è‡ªå·±åœ¨ç»ƒæ‰‹è¿™ä¸ªé¡¹ç›®çš„æ—¶å€™å°±æ”¶è·å¾ˆå¤šã€‚","tags":[{"name":"Java","slug":"Java","permalink":"http://yoursite.com/tags/Java/"}]},{"title":"è¯¦è§£ Filter è¿‡æ»¤å™¨","date":"2017-06-16T16:00:00.000Z","path":"2017/06/17/è¯¦è§£ Filter è¿‡æ»¤å™¨/","text":"1ã€ç®€ä»‹ Filterä¹Ÿç§°ä¹‹ä¸ºè¿‡æ»¤å™¨ï¼Œå®ƒæ˜¯ServletæŠ€æœ¯ä¸­æœ€å®ç”¨çš„æŠ€æœ¯ï¼ŒWEBå¼€å‘äººå‘˜é€šè¿‡FilteræŠ€æœ¯ï¼Œå¯¹webæœåŠ¡å™¨ç®¡ç†çš„æ‰€æœ‰webèµ„æºï¼šä¾‹å¦‚Jsp, Servlet, é™æ€å›¾ç‰‡æ–‡ä»¶æˆ–é™æ€ html æ–‡ä»¶ç­‰è¿›è¡Œæ‹¦æˆªï¼Œä»è€Œå®ç°ä¸€äº›ç‰¹æ®Šçš„åŠŸèƒ½ã€‚ä¾‹å¦‚å®ç°URLçº§åˆ«çš„æƒé™è®¿é—®æ§åˆ¶ã€è¿‡æ»¤æ•æ„Ÿè¯æ±‡ã€å‹ç¼©å“åº”ä¿¡æ¯ç­‰ä¸€äº›é«˜çº§åŠŸèƒ½ã€‚ å®ƒä¸»è¦ç”¨äºå¯¹ç”¨æˆ·è¯·æ±‚è¿›è¡Œé¢„å¤„ç†ï¼Œä¹Ÿå¯ä»¥å¯¹HttpServletResponse è¿›è¡Œåå¤„ç†ã€‚ä½¿ç”¨Filter çš„å®Œæ•´æµç¨‹ï¼šFilter å¯¹ç”¨æˆ·è¯·æ±‚è¿›è¡Œé¢„å¤„ç†ï¼Œæ¥ç€å°†è¯·æ±‚äº¤ç»™Servlet è¿›è¡Œå¤„ç†å¹¶ç”Ÿæˆå“åº”ï¼Œæœ€åFilter å†å¯¹æœåŠ¡å™¨å“åº”è¿›è¡Œåå¤„ç†ã€‚ FilteråŠŸèƒ½ï¼š åœ¨HttpServletRequest åˆ°è¾¾ Servlet ä¹‹å‰ï¼Œæ‹¦æˆªå®¢æˆ·çš„ HttpServletRequest ã€‚ æ ¹æ®éœ€è¦æ£€æŸ¥ HttpServletRequest ï¼Œä¹Ÿå¯ä»¥ä¿®æ”¹HttpServletRequest å¤´å’Œæ•°æ®ã€‚ åœ¨HttpServletResponse åˆ°è¾¾å®¢æˆ·ç«¯ä¹‹å‰ï¼Œæ‹¦æˆªHttpServletResponse ã€‚ æ ¹æ®éœ€è¦æ£€æŸ¥ HttpServletResponse ï¼Œä¹Ÿå¯ä»¥ä¿®æ”¹HttpServletResponseå¤´å’Œæ•°æ®ã€‚ 2ã€å¦‚ä½•å®ç°æ‹¦æˆª Filteræ¥å£ä¸­æœ‰ä¸€ä¸ªdoFilteræ–¹æ³•ï¼Œå½“å¼€å‘äººå‘˜ç¼–å†™å¥½Filterï¼Œå¹¶é…ç½®å¯¹å“ªä¸ªwebèµ„æºè¿›è¡Œæ‹¦æˆªåï¼ŒWEBæœåŠ¡å™¨æ¯æ¬¡åœ¨è°ƒç”¨webèµ„æºçš„serviceæ–¹æ³•ä¹‹å‰ï¼Œéƒ½ä¼šå…ˆè°ƒç”¨ä¸€ä¸‹filterçš„doFilteræ–¹æ³•ï¼Œå› æ­¤ï¼Œåœ¨è¯¥æ–¹æ³•å†…ç¼–å†™ä»£ç å¯è¾¾åˆ°å¦‚ä¸‹ç›®çš„ï¼š è°ƒç”¨ç›®æ ‡èµ„æºä¹‹å‰ï¼Œè®©ä¸€æ®µä»£ç æ‰§è¡Œã€‚ æ˜¯å¦è°ƒç”¨ç›®æ ‡èµ„æºï¼ˆå³æ˜¯å¦è®©ç”¨æˆ·è®¿é—®webèµ„æºï¼‰ã€‚ webæœåŠ¡å™¨åœ¨è°ƒç”¨doFilteræ–¹æ³•æ—¶ï¼Œä¼šä¼ é€’ä¸€ä¸ªfilterChainå¯¹è±¡è¿›æ¥ï¼ŒfilterChainå¯¹è±¡æ˜¯filteræ¥å£ä¸­æœ€é‡è¦çš„ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒä¹Ÿæä¾›äº†ä¸€ä¸ªdoFilteræ–¹æ³•ï¼Œå¼€å‘äººå‘˜å¯ä»¥æ ¹æ®éœ€æ±‚å†³å®šæ˜¯å¦è°ƒç”¨æ­¤æ–¹æ³•ï¼Œè°ƒç”¨è¯¥æ–¹æ³•ï¼Œåˆ™webæœåŠ¡å™¨å°±ä¼šè°ƒç”¨webèµ„æºçš„serviceæ–¹æ³•ï¼Œå³webèµ„æºå°±ä¼šè¢«è®¿é—®ï¼Œå¦åˆ™webèµ„æºä¸ä¼šè¢«è®¿é—®ã€‚ 3ã€Filterå¼€å‘ä¸¤æ­¥èµ° ç¼–å†™javaç±»å®ç°Filteræ¥å£ï¼Œå¹¶å®ç°å…¶doFilteræ–¹æ³•ã€‚ åœ¨ web.xml æ–‡ä»¶ä¸­ä½¿ç”¨å’Œå…ƒç´ å¯¹ç¼–å†™çš„filterç±»è¿›è¡Œæ³¨å†Œï¼Œå¹¶è®¾ç½®å®ƒæ‰€èƒ½æ‹¦æˆªçš„èµ„æºã€‚ web.xmlé…ç½®å„èŠ‚ç‚¹ä»‹ç»ï¼š 12345678910111213141516&lt;filter-name&gt;ç”¨äºä¸ºè¿‡æ»¤å™¨æŒ‡å®šä¸€ä¸ªåå­—ï¼Œè¯¥å…ƒç´ çš„å†…å®¹ä¸èƒ½ä¸ºç©ºã€‚&lt;filter-class&gt;å…ƒç´ ç”¨äºæŒ‡å®šè¿‡æ»¤å™¨çš„å®Œæ•´çš„é™å®šç±»åã€‚&lt;init-param&gt;å…ƒç´ ç”¨äºä¸ºè¿‡æ»¤å™¨æŒ‡å®šåˆå§‹åŒ–å‚æ•°ï¼Œå®ƒçš„å­å…ƒç´ &lt;param-name&gt;æŒ‡å®šå‚æ•°çš„åå­—ï¼Œ&lt;param-value&gt;æŒ‡å®šå‚æ•°çš„å€¼ã€‚åœ¨è¿‡æ»¤å™¨ä¸­ï¼Œå¯ä»¥ä½¿ç”¨FilterConfigæ¥å£å¯¹è±¡æ¥è®¿é—®åˆå§‹åŒ–å‚æ•°ã€‚&lt;filter-mapping&gt;å…ƒç´ ç”¨äºè®¾ç½®ä¸€ä¸ª Filter æ‰€è´Ÿè´£æ‹¦æˆªçš„èµ„æºã€‚ä¸€ä¸ªFilteræ‹¦æˆªçš„èµ„æºå¯é€šè¿‡ä¸¤ç§æ–¹å¼æ¥æŒ‡å®šï¼šServlet åç§°å’Œèµ„æºè®¿é—®çš„è¯·æ±‚è·¯å¾„&lt;filter-name&gt;å­å…ƒç´ ç”¨äºè®¾ç½®filterçš„æ³¨å†Œåç§°ã€‚è¯¥å€¼å¿…é¡»æ˜¯åœ¨&lt;filter&gt;å…ƒç´ ä¸­å£°æ˜è¿‡çš„è¿‡æ»¤å™¨çš„åå­—&lt;url-pattern&gt;è®¾ç½® filter æ‰€æ‹¦æˆªçš„è¯·æ±‚è·¯å¾„(è¿‡æ»¤å™¨å…³è”çš„URLæ ·å¼)&lt;servlet-name&gt;æŒ‡å®šè¿‡æ»¤å™¨æ‰€æ‹¦æˆªçš„Servletåç§°ã€‚&lt;dispatcher&gt;æŒ‡å®šè¿‡æ»¤å™¨æ‰€æ‹¦æˆªçš„èµ„æºè¢« Servlet å®¹å™¨è°ƒç”¨çš„æ–¹å¼ï¼Œå¯ä»¥æ˜¯REQUEST,INCLUDE,FORWARDå’ŒERRORä¹‹ä¸€ï¼Œé»˜è®¤REQUESTã€‚ç”¨æˆ·å¯ä»¥è®¾ç½®å¤šä¸ª&lt;dispatcher&gt; å­å…ƒç´ ç”¨æ¥æŒ‡å®š Filter å¯¹èµ„æºçš„å¤šç§è°ƒç”¨æ–¹å¼è¿›è¡Œæ‹¦æˆªã€‚&lt;dispatcher&gt; å­å…ƒç´ å¯ä»¥è®¾ç½®çš„å€¼åŠå…¶æ„ä¹‰ï¼šREQUESTï¼šå½“ç”¨æˆ·ç›´æ¥è®¿é—®é¡µé¢æ—¶ï¼ŒWebå®¹å™¨å°†ä¼šè°ƒç”¨è¿‡æ»¤å™¨ã€‚å¦‚æœç›®æ ‡èµ„æºæ˜¯é€šè¿‡RequestDispatcherçš„include()æˆ–forward()æ–¹æ³•è®¿é—®æ—¶ï¼Œé‚£ä¹ˆè¯¥è¿‡æ»¤å™¨å°±ä¸ä¼šè¢«è°ƒç”¨ã€‚INCLUDEï¼šå¦‚æœç›®æ ‡èµ„æºæ˜¯é€šè¿‡RequestDispatcherçš„include()æ–¹æ³•è®¿é—®æ—¶ï¼Œé‚£ä¹ˆè¯¥è¿‡æ»¤å™¨å°†è¢«è°ƒç”¨ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¯¥è¿‡æ»¤å™¨ä¸ä¼šè¢«è°ƒç”¨ã€‚FORWARDï¼šå¦‚æœç›®æ ‡èµ„æºæ˜¯é€šè¿‡RequestDispatcherçš„forward()æ–¹æ³•è®¿é—®æ—¶ï¼Œé‚£ä¹ˆè¯¥è¿‡æ»¤å™¨å°†è¢«è°ƒç”¨ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œè¯¥è¿‡æ»¤å™¨ä¸ä¼šè¢«è°ƒç”¨ã€‚ERRORï¼šå¦‚æœç›®æ ‡èµ„æºæ˜¯é€šè¿‡å£°æ˜å¼å¼‚å¸¸å¤„ç†æœºåˆ¶è°ƒç”¨æ—¶ï¼Œé‚£ä¹ˆè¯¥è¿‡æ»¤å™¨å°†è¢«è°ƒç”¨ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¿‡æ»¤å™¨ä¸ä¼šè¢«è°ƒç”¨ã€‚ 4ã€Filteré“¾ åœ¨ä¸€ä¸ªwebåº”ç”¨ä¸­ï¼Œå¯ä»¥å¼€å‘ç¼–å†™å¤šä¸ªFilterï¼Œè¿™äº›Filterç»„åˆèµ·æ¥ç§°ä¹‹ä¸ºä¸€ä¸ªFilteré“¾ã€‚ webæœåŠ¡å™¨æ ¹æ®Filteråœ¨web.xmlæ–‡ä»¶ä¸­çš„æ³¨å†Œé¡ºåºï¼Œå†³å®šå…ˆè°ƒç”¨å“ªä¸ªFilterï¼Œå½“ç¬¬ä¸€ä¸ªFilterçš„doFilteræ–¹æ³•è¢«è°ƒç”¨æ—¶ï¼ŒwebæœåŠ¡å™¨ä¼šåˆ›å»ºä¸€ä¸ªä»£è¡¨Filteré“¾çš„FilterChainå¯¹è±¡ä¼ é€’ç»™è¯¥æ–¹æ³•ã€‚åœ¨doFilteræ–¹æ³•ä¸­ï¼Œå¼€å‘äººå‘˜å¦‚æœè°ƒç”¨äº†FilterChainå¯¹è±¡çš„doFilteræ–¹æ³•ï¼Œåˆ™webæœåŠ¡å™¨ä¼šæ£€æŸ¥FilterChainå¯¹è±¡ä¸­æ˜¯å¦è¿˜æœ‰filterï¼Œå¦‚æœæœ‰ï¼Œåˆ™è°ƒç”¨ç¬¬2ä¸ªfilterï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™è°ƒç”¨ç›®æ ‡èµ„æºã€‚ å¤šä¸ªè¿‡æ»¤å™¨æ‰§è¡Œé¡ºåº ä¸€ä¸ªç›®æ ‡èµ„æºå¯ä»¥æŒ‡å®šå¤šä¸ªè¿‡æ»¤å™¨ï¼Œè¿‡æ»¤å™¨çš„æ‰§è¡Œé¡ºåºæ˜¯åœ¨web.xmlæ–‡ä»¶ä¸­çš„éƒ¨ç½²é¡ºåºï¼š 12345678910111213141516&lt;filter&gt; &lt;filter-name&gt;myFilter1&lt;/filter-name&gt; &lt;filter-class&gt;cn.cloud.filter.MyFilter1&lt;/filter-class&gt; &lt;/filter&gt; &lt;filter-mapping&gt; &lt;filter-name&gt;myFilter1&lt;/filter-name&gt; &lt;url-pattern&gt;/index.jsp&lt;/url-pattern&gt; &lt;/filter-mapping&gt; &lt;filter&gt; &lt;filter-name&gt;myFilter2&lt;/filter-name&gt; &lt;filter-class&gt;cn. cloud.filter.MyFilter2&lt;/filter-class&gt; &lt;/filter&gt; &lt;filter-mapping&gt; &lt;filter-name&gt;myFilter2&lt;/filter-name&gt; &lt;url-pattern&gt;/index.jsp&lt;/url-pattern&gt; &lt;/filter-mapping&gt; MyFilter1 12345678public class MyFilter1 extends HttpFilter &#123; public void doFilter(HttpServletRequest request, HttpServletResponse response, FilterChain chain) throws IOException, ServletException &#123; System.out.println(\"filter1 start...\"); chain.doFilter(request, response);//æ”¾è¡Œï¼Œæ‰§è¡ŒMyFilter2çš„doFilter()æ–¹æ³• System.out.println(\"filter1 end...\"); &#125;&#125; MyFilter2 12345678public class MyFilter2 extends HttpFilter &#123; public void doFilter(HttpServletRequest request, HttpServletResponse response, FilterChain chain) throws IOException, ServletException &#123; System.out.println(\"filter2 start...\"); chain.doFilter(request, response);//æ”¾è¡Œï¼Œæ‰§è¡Œç›®æ ‡èµ„æº System.out.println(\"filter2 end...\"); &#125;&#125; 12345&lt;body&gt; This is my JSP page. &lt;br&gt; &lt;h1&gt;index.jsp&lt;/h1&gt; &lt;%System.out.println(\"index.jsp\"); %&gt; &lt;/body&gt; å½“æœ‰ç”¨æˆ·è®¿é—®index.jspé¡µé¢æ—¶ï¼Œè¾“å‡ºç»“æœå¦‚ä¸‹ï¼š 12345filter1 start...filter2 start...index.jspfilter2 end...filter1 end... 5ã€Filterçš„ç”Ÿå‘½å‘¨æœŸ 1public void init(FilterConfig filterConfig) throws ServletException;//åˆå§‹åŒ– å’Œæˆ‘ä»¬ç¼–å†™çš„Servletç¨‹åºä¸€æ ·ï¼ŒFilterçš„åˆ›å»ºå’Œé”€æ¯ç”±WEBæœåŠ¡å™¨è´Ÿè´£ã€‚ web åº”ç”¨ç¨‹åºå¯åŠ¨æ—¶ï¼Œweb æœåŠ¡å™¨å°†åˆ›å»ºFilter çš„å®ä¾‹å¯¹è±¡ï¼Œå¹¶è°ƒç”¨å…¶initæ–¹æ³•ï¼Œè¯»å–web.xmlé…ç½®ï¼Œå®Œæˆå¯¹è±¡çš„åˆå§‹åŒ–åŠŸèƒ½ï¼Œä»è€Œä¸ºåç»­çš„ç”¨æˆ·è¯·æ±‚ä½œå¥½æ‹¦æˆªçš„å‡†å¤‡å·¥ä½œï¼ˆfilterå¯¹è±¡åªä¼šåˆ›å»ºä¸€æ¬¡ï¼Œinitæ–¹æ³•ä¹Ÿåªä¼šæ‰§è¡Œä¸€æ¬¡ï¼‰ã€‚å¼€å‘äººå‘˜é€šè¿‡initæ–¹æ³•çš„å‚æ•°ï¼Œå¯è·å¾—ä»£è¡¨å½“å‰filteré…ç½®ä¿¡æ¯çš„FilterConfigå¯¹è±¡ã€‚ 1public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException;//æ‹¦æˆªè¯·æ±‚ è¿™ä¸ªæ–¹æ³•å®Œæˆå®é™…çš„è¿‡æ»¤æ“ä½œã€‚å½“å®¢æˆ·è¯·æ±‚è®¿é—®ä¸è¿‡æ»¤å™¨å…³è”çš„URLï¼ˆç›®æ ‡èµ„æºï¼‰çš„æ—¶å€™ï¼ŒServletè¿‡æ»¤å™¨å°†å…ˆæ‰§è¡ŒdoFilteræ–¹æ³•ã€‚FilterChainå‚æ•°ç”¨äºè®¿é—®åç»­è¿‡æ»¤å™¨ã€‚ 1public void destroy();//é”€æ¯ æœåŠ¡å™¨åœ¨åˆ›å»ºFilterå¯¹è±¡ä¹‹åï¼ŒæŠŠFilteræ”¾åˆ°ç¼“å­˜ä¸­ä¸€ç›´ä½¿ç”¨ï¼ˆä¼šé©»ç•™åœ¨å†…å­˜ï¼‰ï¼Œé€šå¸¸ä¸ä¼šé”€æ¯å®ƒï¼Œå½“webåº”ç”¨ç§»é™¤æˆ–æœåŠ¡å™¨åœæ­¢æ—¶æ‰é”€æ¯Filterå¯¹è±¡ã€‚åœ¨Webå®¹å™¨å¸è½½ Filter å¯¹è±¡ä¹‹å‰è¢«è°ƒç”¨ã€‚è¯¥æ–¹æ³•åœ¨Filterçš„ç”Ÿå‘½å‘¨æœŸä¸­ä»…æ‰§è¡Œä¸€æ¬¡ã€‚åœ¨è¿™ä¸ªæ–¹æ³•ä¸­ï¼Œå¯ä»¥é‡Šæ”¾è¿‡æ»¤å™¨ä½¿ç”¨çš„èµ„æºã€‚ 6ã€FilterConfigæ¥å£ ç”¨æˆ·åœ¨é…ç½®filteræ—¶ï¼Œå¯ä»¥ä½¿ç”¨ä¸ºfilteré…ç½®ä¸€äº›åˆå§‹åŒ–å‚æ•°ï¼Œå½“webå®¹å™¨å®ä¾‹åŒ–Filterå¯¹è±¡ï¼Œè°ƒç”¨å…¶initæ–¹æ³•æ—¶ï¼Œä¼šæŠŠå°è£…äº†filteråˆå§‹åŒ–å‚æ•°çš„filterConfigå¯¹è±¡ä¼ é€’è¿›æ¥ã€‚å› æ­¤å¼€å‘äººå‘˜åœ¨ç¼–å†™filteræ—¶ï¼Œé€šè¿‡filterConfigå¯¹è±¡çš„æ–¹æ³•ï¼Œå°±å¯è·å¾—ä»¥ä¸‹å†…å®¹ï¼š 1234String getFilterName();//å¾—åˆ°filterçš„åç§°ï¼›ä¸&lt;filter-name&gt;å…ƒç´ å¯¹åº”ã€‚String getInitParameter(String name);//è¿”å›åœ¨éƒ¨ç½²æè¿°ä¸­æŒ‡å®šåç§°çš„åˆå§‹åŒ–å‚æ•°çš„å€¼ã€‚å¦‚æœä¸å­˜åœ¨è¿”å›nullï¼Œä¸&lt;init-param&gt;å…ƒç´ å¯¹åº”.Enumeration getInitParameterNames();//è¿”å›è¿‡æ»¤å™¨çš„æ‰€æœ‰åˆå§‹åŒ–å‚æ•°çš„åå­—çš„æšä¸¾é›†åˆã€‚public ServletContext getServletContext();//è¿”å›Servletä¸Šä¸‹æ–‡å¯¹è±¡çš„å¼•ç”¨ã€‚ 7ã€FilterChain doFilter()æ–¹æ³•çš„å‚æ•°ä¸­æœ‰ä¸€ä¸ªç±»å‹ä¸ºFilterChainçš„å‚æ•°ï¼Œå®ƒåªæœ‰ä¸€ä¸ªæ–¹æ³•ï¼šdoFilter(ServletRequest,ServletResponse) doFilter() æ–¹æ³•çš„æ”¾è¡Œï¼Œè®©è¯·æ±‚æµè®¿é—®ç›®æ ‡èµ„æºï¼å…¶å®è°ƒç”¨è¯¥æ–¹æ³•çš„æ„æ€æ˜¯ï¼Œå½“å‰ Filter æ”¾è¡Œäº†ï¼Œä½†ä¸ä»£è¡¨å…¶ä»–è¿‡æ»¤å™¨ä¹Ÿæ”¾è¡Œã€‚ä¸€ä¸ªç›®æ ‡èµ„æºä¸Šï¼Œå¯èƒ½éƒ¨ç½²äº†å¤šä¸ªè¿‡æ»¤å™¨ï¼Œæ‰€ä»¥è°ƒç”¨ FilterChain ç±»çš„ doFilter() æ–¹æ³•è¡¨ç¤ºçš„æ˜¯æ‰§è¡Œä¸‹ä¸€ä¸ªè¿‡æ»¤å™¨çš„ doFilter() æ–¹æ³•ï¼Œæˆ–è€…æ˜¯æ‰§è¡Œç›®æ ‡èµ„æºï¼ å¦‚æœå½“å‰è¿‡æ»¤å™¨æ˜¯æœ€åä¸€ä¸ªè¿‡æ»¤å™¨ï¼Œé‚£ä¹ˆè°ƒç”¨ chain.doFilter() æ–¹æ³•è¡¨ç¤ºæ‰§è¡Œç›®æ ‡èµ„æºï¼Œè€Œä¸æ˜¯æœ€åä¸€ä¸ªè¿‡æ»¤å™¨ï¼Œé‚£ä¹ˆ chain.doFilter() è¡¨ç¤ºæ‰§è¡Œä¸‹ä¸€ä¸ªè¿‡æ»¤å™¨çš„ doFilter() æ–¹æ³•ã€‚ 8ã€è¿‡æ»¤å™¨çš„åº”ç”¨åœºæ™¯ æ‰§è¡Œç›®æ ‡èµ„æºä¹‹å‰åšé¢„å¤„ç†å·¥ä½œï¼Œä¾‹å¦‚è®¾ç½®ç¼–ç ï¼Œè¿™ç§è¯•é€šå¸¸éƒ½ä¼šæ”¾è¡Œï¼Œåªæ˜¯åœ¨ç›®æ ‡èµ„æºæ‰§è¡Œä¹‹å‰åšä¸€äº›å‡†å¤‡å·¥ä½œï¼› é€šè¿‡æ¡ä»¶åˆ¤æ–­æ˜¯å¦æ”¾è¡Œï¼Œä¾‹å¦‚æ ¡éªŒå½“å‰ç”¨æˆ·æ˜¯å¦å·²ç»ç™»å½•ï¼Œæˆ–è€…ç”¨æˆ·IPæ˜¯å¦å·²ç»è¢«ç¦ç”¨ï¼› åœ¨ç›®æ ‡èµ„æºæ‰§è¡Œåï¼Œåšä¸€äº›åç»­çš„ç‰¹æ®Šå¤„ç†å·¥ä½œï¼Œä¾‹å¦‚æŠŠç›®æ ‡èµ„æºè¾“å‡ºçš„æ•°æ®è¿›è¡Œå¤„ç† è®¾ç½®ç›®æ ‡èµ„æº åœ¨web.xmlæ–‡ä»¶ä¸­éƒ¨ç½²Filteræ—¶ï¼Œå¯ä»¥é€šè¿‡â€œ*â€æ¥æ‰§è¡Œç›®æ ‡èµ„æºï¼š 1234&lt;filter-mapping&gt; &lt;filter-name&gt;myfilter&lt;/filter-name&gt; &lt;url-pattern&gt;/*&lt;/url-pattern&gt; &lt;/filter-mapping&gt; ç‰¹æ€§ä¸Servletå®Œå…¨ç›¸åŒï¼é€šè¿‡è¿™ä¸€ç‰¹æ€§ï¼Œå¯ä»¥åœ¨ç”¨æˆ·è®¿é—®æ•æ„Ÿèµ„æºæ—¶ï¼Œæ‰§è¡Œè¿‡æ»¤å™¨ï¼Œä¾‹å¦‚ï¼š/admin/*ï¼Œå¯ä»¥æŠŠæ‰€æœ‰ç®¡ç†å‘˜æ‰èƒ½è®¿é—®çš„èµ„æºæ”¾åˆ°/adminè·¯å¾„ä¸‹ï¼Œè¿™æ—¶å¯ä»¥é€šè¿‡è¿‡æ»¤å™¨æ¥æ ¡éªŒç”¨æˆ·èº«ä»½ã€‚ è¿˜å¯ä»¥ä¸ºæŒ‡å®šç›®æ ‡èµ„æºä¸ºæŸä¸ªServletï¼Œä¾‹å¦‚ï¼š 12345678910111213141516&lt;servlet&gt; &lt;servlet-name&gt;myservlet&lt;/servlet-name&gt; &lt;servlet-class&gt;cn.cloud.servlet.MyServlet&lt;/servlet-class&gt; &lt;/servlet&gt; &lt;servlet-mapping&gt; &lt;servlet-name&gt;myservlet&lt;/servlet-name&gt; &lt;url-pattern&gt;/abc&lt;/url-pattern&gt; &lt;/servlet-mapping&gt; &lt;filter&gt; &lt;filter-name&gt;myfilter&lt;/filter-name&gt; &lt;filter-class&gt;cn.cloud.filter.MyFilter&lt;/filter-class&gt; &lt;/filter&gt; &lt;filter-mapping&gt; &lt;filter-name&gt;myfilter&lt;/filter-name&gt; &lt;servlet-name&gt;myservlet&lt;/servlet-name&gt; &lt;/filter-mapping&gt; å½“ç”¨æˆ·è®¿é—®http://localhost:8080/filtertest/abcæ—¶ï¼Œä¼šæ‰§è¡Œåå­—ä¸ºmyservletçš„Servletï¼Œè¿™æ—¶ä¼šæ‰§è¡Œè¿‡æ»¤å™¨ã€‚ 9ã€å››ç§æ‹¦æˆªæ–¹å¼ å†™ä¸€ä¸ªè¿‡æ»¤å™¨ï¼ŒæŒ‡å®šè¿‡æ»¤çš„èµ„æºä¸ºb.jspï¼Œç„¶ååœ¨æµè§ˆå™¨ä¸­ç›´æ¥è®¿é—®b.jspï¼Œä¼šå‘ç°è¿‡æ»¤å™¨æ‰§è¡Œäº†.ä½†æ˜¯ï¼Œå½“åœ¨a.jspä¸­request.getRequestDispathcer(â€œ/b.jspâ€).forward(request,response)æ—¶ï¼Œå°±ä¸ä¼šå†æ‰§è¡Œè¿‡æ»¤å™¨äº†ï¼ä¹Ÿå°±æ˜¯è¯´ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œåªèƒ½ç›´æ¥è®¿é—®ç›®æ ‡èµ„æºæ‰ä¼šæ‰§è¡Œè¿‡æ»¤å™¨ï¼Œè€Œforwardæ‰§è¡Œç›®æ ‡èµ„æºï¼Œä¸ä¼šæ‰§è¡Œè¿‡æ»¤å™¨ï¼ 12345678public class MyFilter extends HttpFilter &#123; public void doFilter(HttpServletRequest request, HttpServletResponse response, FilterChain chain) throws IOException, ServletException &#123; System.out.println(\"myfilter...\"); chain.doFilter(request, response); &#125;&#125; 12345678&lt;filter&gt; &lt;filter-name&gt;myfilter&lt;/filter-name&gt; &lt;filter-class&gt;cn.itcast.filter.MyFilter&lt;/filter-class&gt; &lt;/filter&gt; &lt;filter-mapping&gt; &lt;filter-name&gt;myfilter&lt;/filter-name&gt; &lt;url-pattern&gt;/b.jsp&lt;/url-pattern&gt; &lt;/filter-mapping&gt; 123&lt;body&gt; &lt;h1&gt;b.jsp&lt;/h1&gt; &lt;/body&gt; 12345&lt;h1&gt;a.jsp&lt;/h1&gt; &lt;% request.getRequestDispatcher(\"/b.jsp\").forward(request, response); %&gt; &lt;/body&gt; åœ¨æµè§ˆå™¨è¾“å…¥ï¼š http://localhost:8080/filtertest/b.jsp ç›´æ¥è®¿é—®b.jspæ—¶ï¼Œä¼šæ‰§è¡Œè¿‡æ»¤å™¨å†…å®¹ï¼› http://localhost:8080/filtertest/a.jsp è®¿é—®a.jspï¼Œä½†a.jspä¼šforwardåˆ°b.jspï¼Œè¿™æ—¶å°±ä¸ä¼šæ‰§è¡Œè¿‡æ»¤å™¨ï¼ è¿‡æ»¤å™¨æœ‰å››ç§æ‹¦æˆªæ–¹å¼ï¼åˆ†åˆ«æ˜¯ï¼šREQUESTã€FORWARDã€INCLUDEã€ERRORã€‚ REQUESTï¼šç›´æ¥è®¿é—®ç›®æ ‡èµ„æºæ—¶æ‰§è¡Œè¿‡æ»¤å™¨ã€‚åŒ…æ‹¬ï¼šåœ¨åœ°å€æ ä¸­ç›´æ¥è®¿é—®ã€è¡¨å•æäº¤ã€è¶…é“¾æ¥ã€é‡å®šå‘ï¼Œåªè¦åœ¨åœ°å€æ ä¸­å¯ä»¥çœ‹åˆ°ç›®æ ‡èµ„æºçš„è·¯å¾„ï¼Œå°±æ˜¯REQUEST FORWARDï¼šè½¬å‘è®¿é—®æ‰§è¡Œè¿‡æ»¤å™¨ã€‚åŒ…æ‹¬RequestDispatcher#forward()æ–¹æ³•ã€æ ‡ç­¾éƒ½æ˜¯è½¬å‘è®¿é—® INCLUDEï¼šåŒ…å«è®¿é—®æ‰§è¡Œè¿‡æ»¤å™¨ã€‚åŒ…æ‹¬RequestDispatcher#include()æ–¹æ³•ã€æ ‡ç­¾éƒ½æ˜¯åŒ…å«è®¿é—® ERRORï¼šå½“ç›®æ ‡èµ„æºåœ¨web.xmlä¸­é…ç½®ä¸ºä¸­æ—¶ï¼Œå¹¶ä¸”çœŸçš„å‡ºç°äº†å¼‚å¸¸ï¼Œè½¬å‘åˆ°ç›®æ ‡èµ„æºæ—¶ï¼Œä¼šæ‰§è¡Œè¿‡æ»¤å™¨ã€‚ å¯ä»¥åœ¨ä¸­æ·»åŠ 0~nä¸ªå­å…ƒç´ ï¼Œæ¥è¯´æ˜å½“å‰è®¿é—®çš„æ‹¦æˆªæ–¹å¼ã€‚ å¦‚ï¼š 123456&lt;filter-mapping&gt; &lt;filter-name&gt;myfilter&lt;/filter-name&gt; &lt;url-pattern&gt;/b.jsp&lt;/url-pattern&gt; &lt;dispatcher&gt;REQUEST&lt;/dispatcher&gt; &lt;dispatcher&gt;FORWARD&lt;/dispatcher&gt; &lt;/filter-mapping&gt; æœ€ä¸ºå¸¸ç”¨çš„å°±æ˜¯REQUESTå’ŒFORWARDä¸¤ç§æ‹¦æˆªæ–¹å¼ï¼Œè€ŒINCLUDEå’ŒERRORéƒ½æ¯”è¾ƒå°‘ç”¨ï¼å…¶ä¸­INCLUDEæ¯”è¾ƒå¥½ç†è§£ï¼ŒERRORæ–¹å¼ä¸æ˜“ç†è§£ï¼Œä¸‹é¢ç»™å‡ºERRORæ‹¦æˆªæ–¹å¼çš„ä¾‹å­ï¼š 123456789&lt;filter-mapping&gt; &lt;filter-name&gt;myfilter&lt;/filter-name&gt; &lt;url-pattern&gt;/b.jsp&lt;/url-pattern&gt; &lt;dispatcher&gt;ERROR&lt;/dispatcher&gt; &lt;/filter-mapping&gt; &lt;error-page&gt; &lt;error-code&gt;500&lt;/error-code&gt; &lt;location&gt;/b.jsp&lt;/location&gt; &lt;/error-page&gt; 1234567&lt;body&gt; &lt;h1&gt;a.jsp&lt;/h1&gt; &lt;% if(true) throw new RuntimeException(\"å˜»å˜»~\"); %&gt; &lt;/body&gt; 10ã€Filterä½¿ç”¨æ¡ˆä¾‹ 1ã€ä½¿ç”¨FilteréªŒè¯ç”¨æˆ·ç™»å½•å®‰å…¨æ§åˆ¶ å‰æ®µæ—¶é—´å‚ä¸ç»´æŠ¤ä¸€ä¸ªé¡¹ç›®ï¼Œç”¨æˆ·é€€å‡ºç³»ç»Ÿåï¼Œå†å»åœ°å€æ è®¿é—®å†å²ï¼Œæ ¹æ®urlï¼Œä»ç„¶èƒ½å¤Ÿè¿›å…¥ç³»ç»Ÿå“åº”é¡µé¢ã€‚æˆ‘å»æ£€æŸ¥ä¸€ä¸‹å‘ç°å¯¹è¯·æ±‚æœªè¿›è¡Œè¿‡æ»¤éªŒè¯ç”¨æˆ·ç™»å½•ã€‚æ·»åŠ ä¸€ä¸ªfilteræå®šé—®é¢˜ï¼ å…ˆåœ¨web.xmlé…ç½® 123456789101112131415161718192021222324&lt;filter&gt; &lt;filter-name&gt;SessionFilter&lt;/filter-name&gt; &lt;filter-class&gt;com.action.login.SessionFilter&lt;/filter-class&gt; &lt;init-param&gt; &lt;param-name&gt;logonStrings&lt;/param-name&gt;&lt;!-- å¯¹ç™»å½•é¡µé¢ä¸è¿›è¡Œè¿‡æ»¤ --&gt; &lt;param-value&gt;/project/index.jsp;login.do&lt;/param-value&gt; &lt;/init-param&gt; &lt;init-param&gt; &lt;param-name&gt;includeStrings&lt;/param-name&gt;&lt;!-- åªå¯¹æŒ‡å®šè¿‡æ»¤å‚æ•°åç¼€è¿›è¡Œè¿‡æ»¤ --&gt; &lt;param-value&gt;.do;.jsp&lt;/param-value&gt; &lt;/init-param&gt; &lt;init-param&gt; &lt;param-name&gt;redirectPath&lt;/param-name&gt;&lt;!-- æœªé€šè¿‡è·³è½¬åˆ°ç™»å½•ç•Œé¢ --&gt; &lt;param-value&gt;/index.jsp&lt;/param-value&gt; &lt;/init-param&gt; &lt;init-param&gt; &lt;param-name&gt;disabletestfilter&lt;/param-name&gt;&lt;!-- Y:è¿‡æ»¤æ— æ•ˆ --&gt; &lt;param-value&gt;N&lt;/param-value&gt; &lt;/init-param&gt;&lt;/filter&gt;&lt;filter-mapping&gt; &lt;filter-name&gt;SessionFilter&lt;/filter-name&gt; &lt;url-pattern&gt;/*&lt;/url-pattern&gt;&lt;/filter-mapping&gt; æ¥ç€ç¼–å†™FilterServletï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576package com.action.login;import java.io.IOException;import javax.servlet.Filter;import javax.servlet.FilterChain;import javax.servlet.FilterConfig;import javax.servlet.ServletException;import javax.servlet.ServletRequest;import javax.servlet.ServletResponse;import javax.servlet.http.HttpServletRequest;import javax.servlet.http.HttpServletResponse;import javax.servlet.http.HttpServletResponseWrapper;/** * åˆ¤æ–­ç”¨æˆ·æ˜¯å¦ç™»å½•,æœªç™»å½•åˆ™é€€å‡ºç³»ç»Ÿ */public class SessionFilter implements Filter &#123; public FilterConfig config; public void destroy() &#123; this.config = null; &#125; public static boolean isContains(String container, String[] regx) &#123; boolean result = false; for (int i = 0; i &lt; regx.length; i++) &#123; if (container.indexOf(regx[i]) != -1) &#123; return true; &#125; &#125; return result; &#125; public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException &#123; HttpServletRequest hrequest = (HttpServletRequest)request; HttpServletResponseWrapper wrapper = new HttpServletResponseWrapper((HttpServletResponse) response); String logonStrings = config.getInitParameter(\"logonStrings\"); // ç™»å½•ç™»é™†é¡µé¢ String includeStrings = config.getInitParameter(\"includeStrings\"); // è¿‡æ»¤èµ„æºåç¼€å‚æ•° String redirectPath = hrequest.getContextPath() + config.getInitParameter(\"redirectPath\");// æ²¡æœ‰ç™»é™†è½¬å‘é¡µé¢ String disabletestfilter = config.getInitParameter(\"disabletestfilter\");// è¿‡æ»¤å™¨æ˜¯å¦æœ‰æ•ˆ if (disabletestfilter.toUpperCase().equals(\"Y\")) &#123; // è¿‡æ»¤æ— æ•ˆ chain.doFilter(request, response); return; &#125; String[] logonList = logonStrings.split(\";\"); String[] includeList = includeStrings.split(\";\"); if (!this.isContains(hrequest.getRequestURI(), includeList)) &#123;// åªå¯¹æŒ‡å®šè¿‡æ»¤å‚æ•°åç¼€è¿›è¡Œè¿‡æ»¤ chain.doFilter(request, response); return; &#125; if (this.isContains(hrequest.getRequestURI(), logonList)) &#123;// å¯¹ç™»å½•é¡µé¢ä¸è¿›è¡Œè¿‡æ»¤ chain.doFilter(request, response); return; &#125; String user = ( String ) hrequest.getSession().getAttribute(\"useronly\");//åˆ¤æ–­ç”¨æˆ·æ˜¯å¦ç™»å½• if (user == null) &#123; wrapper.sendRedirect(redirectPath); return; &#125;else &#123; chain.doFilter(request, response); return; &#125; &#125; public void init(FilterConfig filterConfig) throws ServletException &#123; config = filterConfig; &#125;&#125; è¿™æ ·æ—¢å¯å®Œæˆå¯¹ç”¨æˆ·æ‰€æœ‰è¯·æ±‚ï¼Œå‡è¦ç»è¿‡è¿™ä¸ªFilterè¿›è¡ŒéªŒè¯ç”¨æˆ·ç™»å½•ã€‚ 2ã€é˜²æ­¢ä¸­æ–‡ä¹±ç è¿‡æ»¤å™¨ é¡¹ç›®ä½¿ç”¨springæ¡†æ¶æ—¶ã€‚å½“å‰å°JSPé¡µé¢å’ŒJAVAä»£ç ä¸­ä½¿ç”¨äº†ä¸åŒçš„å­—ç¬¦é›†è¿›è¡Œç¼–ç çš„æ—¶å€™å°±ä¼šå‡ºç°è¡¨å•æäº¤çš„æ•°æ®æˆ–è€…ä¸Šä¼ /ä¸‹è½½ä¸­æ–‡åç§°æ–‡ä»¶å‡ºç°ä¹±ç çš„é—®é¢˜ï¼Œé‚£å°±å¯ä»¥ä½¿ç”¨è¿™ä¸ªè¿‡æ»¤å™¨ã€‚ 12345678910111213141516&lt;filter&gt; &lt;filter-name&gt;encoding&lt;/filter-name&gt; &lt;filter-class&gt;org.springframework.web.filter.CharacterEncodingFilter&lt;/filter-class&gt; &lt;init-param&gt; &lt;param-name&gt;encoding&lt;/param-name&gt;&lt;!--ç”¨æ¥æŒ‡å®šä¸€ä¸ªå…·ä½“çš„å­—ç¬¦é›†--&gt; &lt;param-value&gt;UTF-8&lt;/param-value&gt; &lt;/init-param&gt; &lt;init-param&gt; &lt;param-name&gt;forceEncoding&lt;/param-name&gt;&lt;!--trueï¼šæ— è®ºrequestæ˜¯å¦æŒ‡å®šäº†å­—ç¬¦é›†ï¼Œéƒ½æ˜¯ç”¨encodingï¼›falseï¼šå¦‚æœrequestå·²æŒ‡å®šä¸€ä¸ªå­—ç¬¦é›†ï¼Œåˆ™ä¸ä½¿ç”¨encoding--&gt; &lt;param-value&gt;false&lt;/param-value&gt; &lt;/init-param&gt;&lt;/filter&gt;&lt;filter-mapping&gt; &lt;filter-name&gt;encoding&lt;/filter-name&gt; &lt;url-pattern&gt;/*&lt;/url-pattern&gt;&lt;/filter-mapping&gt; 3ã€Spring+Hibernateçš„OpenSessionInViewFilteræ§åˆ¶sessionçš„å¼€å…³ å½“ hibernate+spring é…åˆä½¿ç”¨çš„æ—¶å€™ï¼Œå¦‚æœè®¾ç½®äº†lazy=trueï¼ˆå»¶è¿ŸåŠ è½½ï¼‰,é‚£ä¹ˆåœ¨è¯»å–æ•°æ®çš„æ—¶å€™ï¼Œå½“è¯»å–äº†çˆ¶æ•°æ®åï¼Œhibernate ä¼šè‡ªåŠ¨å…³é—­ sessionï¼Œè¿™æ ·ï¼Œå½“è¦ä½¿ç”¨ä¸ä¹‹å…³è”æ•°æ®ã€å­æ•°æ®çš„æ—¶å€™ï¼Œç³»ç»Ÿä¼šæŠ›å‡ºlazyinitçš„é”™è¯¯ï¼Œè¿™æ—¶å°±éœ€è¦ä½¿ç”¨ spring æä¾›çš„ OpenSessionInViewFilter è¿‡æ»¤å™¨ã€‚ OpenSessionInViewFilterä¸»è¦æ˜¯ä¿æŒ Session çŠ¶æ€ç›´åˆ° request å°†å…¨éƒ¨é¡µé¢å‘é€åˆ°å®¢æˆ·ç«¯ï¼Œç›´åˆ°è¯·æ±‚ç»“æŸåæ‰å…³é—­ sessionï¼Œè¿™æ ·å°±å¯ä»¥è§£å†³å»¶è¿ŸåŠ è½½å¸¦æ¥çš„é—®é¢˜ã€‚ æ³¨æ„ï¼šOpenSessionInViewFilter é…ç½®è¦å†™åœ¨struts2çš„é…ç½®å‰é¢ã€‚å› ä¸º tomcat å®¹å™¨åœ¨åŠ è½½è¿‡æ»¤å™¨çš„æ—¶å€™æ˜¯æŒ‰ç…§é¡ºåºåŠ è½½çš„ï¼Œå¦‚æœé…ç½®æ–‡ä»¶å…ˆå†™çš„æ˜¯ struts2 çš„è¿‡æ»¤å™¨é…ç½®ï¼Œç„¶åæ‰æ˜¯ OpenSessionInViewFilter è¿‡æ»¤å™¨é…ç½®ï¼Œæ‰€ä»¥åŠ è½½çš„é¡ºåºå¯¼è‡´ï¼Œaction åœ¨è·å¾—æ•°æ®çš„æ—¶å€™ session å¹¶æ²¡æœ‰è¢« spring ç®¡ç†ã€‚ 1234567891011121314151617&lt;!-- lazy loading enabled in spring --&gt;&lt;filter&gt; &lt;filter-name&gt;OpenSessionInViewFilter&lt;/filter-name&gt; &lt;filter-class&gt;org.springframework.orm.hibernate3.support.OpenSessionInViewFilter&lt;/filter-class&gt; &lt;init-param&gt; &lt;param-name&gt;sessionFactoryBeanName&lt;/param-name&gt;&lt;!-- å¯ç¼ºçœã€‚é»˜è®¤æ˜¯ä»springå®¹å™¨ä¸­æ‰¾idä¸ºsessionFactoryçš„beanï¼Œå¦‚æœidä¸ä¸ºsessionFactoryï¼Œåˆ™éœ€è¦é…ç½®å¦‚ä¸‹ï¼Œæ­¤å¤„SessionFactoryä¸ºspringå®¹å™¨ä¸­çš„beanã€‚ --&gt; &lt;param-value&gt;sessionFactory&lt;/param-value&gt; &lt;/init-param&gt; &lt;init-param&gt; &lt;param-name&gt;singleSession&lt;/param-name&gt;&lt;!-- singleSessioné»˜è®¤ä¸ºtrue,è‹¥è®¾ä¸ºfalseåˆ™ç­‰äºæ²¡ç”¨OpenSessionInView --&gt; &lt;param-value&gt;true&lt;/param-value&gt; &lt;/init-param&gt;&lt;/filter&gt;&lt;filter-mapping&gt; &lt;filter-name&gt;OpenSessionInViewFilter&lt;/filter-name&gt; &lt;url-pattern&gt;*.do&lt;/url-pattern&gt;&lt;/filter-mapping&gt; 4ã€Struts2çš„web.xmlé…ç½® é¡¹ç›®ä¸­ä½¿ç”¨Struts2åŒæ ·éœ€è¦åœ¨web.xmlé…ç½®è¿‡æ»¤å™¨ï¼Œç”¨æ¥æˆªå–è¯·æ±‚ï¼Œè½¬åˆ°Struts2çš„Actionè¿›è¡Œå¤„ç†ã€‚ æ³¨æ„ï¼šå¦‚æœåœ¨2.1.3ä»¥å‰çš„Struts2ç‰ˆæœ¬ï¼Œè¿‡æ»¤å™¨ä½¿ç”¨org.apache.struts2.dispatcher.FilterDispatcherã€‚å¦åˆ™ä½¿ç”¨org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilterã€‚ä»Struts2.1.3å¼€å§‹ï¼Œå°†åºŸå¼ƒActionContextCleanUpè¿‡æ»¤å™¨ï¼Œè€Œåœ¨StrutsPrepareAndExecuteFilterè¿‡æ»¤å™¨ä¸­åŒ…å«ç›¸åº”çš„åŠŸèƒ½ã€‚ ä¸‰ä¸ªåˆå§‹åŒ–å‚æ•°é…ç½®ï¼š configå‚æ•°ï¼šæŒ‡å®šè¦åŠ è½½çš„é…ç½®æ–‡ä»¶ã€‚é€—å·åˆ†å‰²ã€‚ actionPackageså‚æ•°ï¼šæŒ‡å®šActionç±»æ‰€åœ¨çš„åŒ…ç©ºé—´ã€‚é€—å·åˆ†å‰²ã€‚ configProviderså‚æ•°ï¼šè‡ªå®šä¹‰é…ç½®æ–‡ä»¶æä¾›è€…ï¼Œéœ€è¦å®ç°ConfigurationProvideræ¥å£ç±»ã€‚é€—å·åˆ†å‰²ã€‚ 123456789&lt;!-- struts 2.x filter --&gt;&lt;filter&gt; &lt;filter-name&gt;struts2&lt;/filter-name&gt; &lt;filter-class&gt;org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter&lt;/filter-class&gt;&lt;/filter&gt;&lt;filter-mapping&gt; &lt;filter-name&gt;struts2&lt;/filter-name&gt; &lt;url-pattern&gt;*.do&lt;/url-pattern&gt;&lt;/filter-mapping&gt;","tags":[{"name":"Java","slug":"Java","permalink":"http://yoursite.com/tags/Java/"},{"name":"Filterè¿‡æ»¤å™¨","slug":"Filterè¿‡æ»¤å™¨","permalink":"http://yoursite.com/tags/Filterè¿‡æ»¤å™¨/"}]},{"title":"è¯¦ç»†æ·±å…¥åˆ†æ Java ClassLoader å·¥ä½œæœºåˆ¶","date":"2017-06-16T16:00:00.000Z","path":"2017/06/17/è¯¦ç»†æ·±å…¥åˆ†æ Java ClassLoader å·¥ä½œæœºåˆ¶/","text":"ä»€ä¹ˆæ˜¯ ClassLoader ï¼Ÿå¤§å®¶éƒ½çŸ¥é“ï¼Œå½“æˆ‘ä»¬å†™å¥½ä¸€ä¸ª Java ç¨‹åºä¹‹åï¼Œä¸æ˜¯ç®¡æ˜¯ C/S è¿˜æ˜¯ B/S åº”ç”¨ï¼Œéƒ½æ˜¯ç”±è‹¥å¹²ä¸ª .class æ–‡ä»¶ç»„ç»‡è€Œæˆçš„ä¸€ä¸ªå®Œæ•´çš„ Java åº”ç”¨ç¨‹åºï¼Œå½“ç¨‹åºåœ¨è¿è¡Œæ—¶ï¼Œå³ä¼šè°ƒç”¨è¯¥ç¨‹åºçš„ä¸€ä¸ªå…¥å£å‡½æ•°æ¥è°ƒç”¨ç³»ç»Ÿçš„ç›¸å…³åŠŸèƒ½ï¼Œè€Œè¿™äº›åŠŸèƒ½éƒ½è¢«å°è£…åœ¨ä¸åŒçš„ class æ–‡ä»¶å½“ä¸­ï¼Œæ‰€ä»¥ç»å¸¸è¦ä»è¿™ä¸ª class æ–‡ä»¶ä¸­è¦è°ƒç”¨å¦å¤–ä¸€ä¸ª class æ–‡ä»¶ä¸­çš„æ–¹æ³•ï¼Œå¦‚æœå¦å¤–ä¸€ä¸ªæ–‡ä»¶ä¸å­˜åœ¨çš„ï¼Œåˆ™ä¼šå¼•å‘ç³»ç»Ÿå¼‚å¸¸ã€‚è€Œç¨‹åºåœ¨å¯åŠ¨çš„æ—¶å€™ï¼Œå¹¶ä¸ä¼šä¸€æ¬¡æ€§åŠ è½½ç¨‹åºæ‰€è¦ç”¨çš„æ‰€æœ‰classæ–‡ä»¶ï¼Œè€Œæ˜¯æ ¹æ®ç¨‹åºçš„éœ€è¦ï¼Œé€šè¿‡Javaçš„ç±»åŠ è½½æœºåˆ¶ï¼ˆClassLoaderï¼‰æ¥åŠ¨æ€åŠ è½½æŸä¸ª class æ–‡ä»¶åˆ°å†…å­˜å½“ä¸­çš„ï¼Œä»è€Œåªæœ‰ class æ–‡ä»¶è¢«è½½å…¥åˆ°äº†å†…å­˜ä¹‹åï¼Œæ‰èƒ½è¢«å…¶å®ƒ class æ‰€å¼•ç”¨ã€‚æ‰€ä»¥ ClassLoader å°±æ˜¯ç”¨æ¥åŠ¨æ€åŠ è½½ class æ–‡ä»¶åˆ°å†…å­˜å½“ä¸­ç”¨çš„ã€‚ ClassLoader ä½œç”¨ï¼š è´Ÿè´£å°† Class åŠ è½½åˆ° JVM ä¸­ å®¡æŸ¥æ¯ä¸ªç±»ç”±è°åŠ è½½ï¼ˆçˆ¶ä¼˜å…ˆçš„ç­‰çº§åŠ è½½æœºåˆ¶ï¼‰ å°† Class å­—èŠ‚ç é‡æ–°è§£ææˆ JVM ç»Ÿä¸€è¦æ±‚çš„å¯¹è±¡æ ¼å¼ 1ã€ClassLoader ç±»ç»“æ„åˆ†æä¸ºäº†æ›´å¥½çš„ç†è§£ç±»çš„åŠ è½½æœºåˆ¶ï¼Œæˆ‘ä»¬æ¥æ·±å…¥ç ”ç©¶ä¸€ä¸‹ ClassLoader å’Œä»–çš„æ–¹æ³•ã€‚ public abstract class ClassLoader ClassLoaderç±»æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œsunå…¬å¸æ˜¯è¿™ä¹ˆè§£é‡Šè¿™ä¸ªç±»çš„ï¼š 1234567/** * A class loader is an object that is responsible for loading classes. The * class ClassLoader is an abstract class. Given the binary name of a class, a class loader should attempt to * locate or generate data that constitutes a definition for the class. A * typical strategy is to transform the name into a file name and then read a * &quot;class file&quot; of that name from a file system.**/ å¤§è‡´æ„æ€å¦‚ä¸‹ï¼š class loader æ˜¯ä¸€ä¸ªè´Ÿè´£åŠ è½½ classes çš„å¯¹è±¡ï¼ŒClassLoader ç±»æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œéœ€è¦ç»™å‡ºç±»çš„äºŒè¿›åˆ¶åç§°ï¼Œclass loader å°è¯•å®šä½æˆ–è€…äº§ç”Ÿä¸€ä¸ª class çš„æ•°æ®ï¼Œä¸€ä¸ªå…¸å‹çš„ç­–ç•¥æ˜¯æŠŠäºŒè¿›åˆ¶åå­—è½¬æ¢æˆæ–‡ä»¶åç„¶ååˆ°æ–‡ä»¶ç³»ç»Ÿä¸­æ‰¾åˆ°è¯¥æ–‡ä»¶ã€‚ ä»¥ä¸‹æ˜¯ ClassLoader å¸¸ç”¨åˆ°çš„å‡ ä¸ªæ–¹æ³•åŠå…¶é‡è½½æ–¹æ³•ï¼š ClassLoader defineClass(byte[], int, int) æŠŠå­—èŠ‚æ•°ç»„ bä¸­çš„å†…å®¹è½¬æ¢æˆ Java ç±»ï¼Œè¿”å›çš„ç»“æœæ˜¯java.lang.Classç±»çš„å®ä¾‹ã€‚è¿™ä¸ªæ–¹æ³•è¢«å£°æ˜ä¸ºfinalçš„ findClass(String name) æŸ¥æ‰¾åç§°ä¸º nameçš„ç±»ï¼Œè¿”å›çš„ç»“æœæ˜¯java.lang.Classç±»çš„å®ä¾‹ loadClass(String name) åŠ è½½åç§°ä¸º nameçš„ç±»ï¼Œè¿”å›çš„ç»“æœæ˜¯java.lang.Classç±»çš„å®ä¾‹ resolveClass(Class&lt;?&gt;) é“¾æ¥æŒ‡å®šçš„ Java ç±» å…¶ä¸­ defineClass æ–¹æ³•ç”¨æ¥å°† byte å­—èŠ‚æµè§£ææˆ JVM èƒ½å¤Ÿè¯†åˆ«çš„ Class å¯¹è±¡ï¼Œæœ‰äº†è¿™ä¸ªæ–¹æ³•æ„å‘³ç€æˆ‘ä»¬ä¸ä»…ä»…å¯ä»¥é€šè¿‡ class æ–‡ä»¶å®ä¾‹åŒ–å¯¹è±¡ï¼Œè¿˜å¯ä»¥é€šè¿‡å…¶ä»–æ–¹å¼å®ä¾‹åŒ–å¯¹è±¡ï¼Œå¦‚æœæˆ‘ä»¬é€šè¿‡ç½‘ç»œæ¥æ”¶åˆ°ä¸€ä¸ªç±»çš„å­—èŠ‚ç ï¼Œæ‹¿åˆ°è¿™ä¸ªå­—èŠ‚ç æµç›´æ¥åˆ›å»ºç±»çš„ Class å¯¹è±¡å½¢å¼å®ä¾‹åŒ–å¯¹è±¡ã€‚å¦‚æœç›´æ¥è°ƒç”¨è¿™ä¸ªæ–¹æ³•ç”Ÿæˆç±»çš„ Class å¯¹è±¡ï¼Œè¿™ä¸ªç±»çš„ Class å¯¹è±¡è¿˜æ²¡æœ‰ resolve ï¼Œè¿™ä¸ª resolve å°†ä¼šåœ¨è¿™ä¸ªå¯¹è±¡çœŸæ­£å®ä¾‹åŒ–æ—¶æ‰è¿›è¡Œã€‚ æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹loadClassæ–¹æ³•çš„å®ç°æ–¹å¼ï¼š 123456789101112131415161718192021222324252627282930313233343536protected Class&gt; loadClass(String name, boolean resolve) throws ClassNotFoundException &#123; synchronized (getClassLoadingLock(name)) &#123; // First, check if the class has already been loaded Class c = findLoadedClass(name); if (c == null) &#123; long t0 = System.nanoTime(); try &#123; if (parent != null) &#123; c = parent.loadClass(name, false); &#125; else &#123; c = findBootstrapClassOrNull(name); &#125; &#125; catch (ClassNotFoundException e) &#123; // ClassNotFoundException thrown if class not found // from the non-null parent class loader &#125; if (c == null) &#123; // If still not found, then invoke findClass in order // to find the class. long t1 = System.nanoTime(); c = findClass(name); // this is the defining class loader; record the stats sun.misc.PerfCounter.getParentDelegationTime().addTime(t1 - t0); sun.misc.PerfCounter.getFindClassTime().addElapsedTimeFrom(t1); sun.misc.PerfCounter.getFindClasses().increment(); &#125; &#125; if (resolve) &#123; resolveClass(c); &#125; return c; &#125; &#125; è¯¥æ–¹æ³•å¤§æ¦‚æ„æ€ï¼š ä½¿ç”¨æŒ‡å®šçš„äºŒè¿›åˆ¶åç§°æ¥åŠ è½½ç±»ï¼Œè¿™ä¸ªæ–¹æ³•çš„é»˜è®¤å®ç°æŒ‰ç…§ä»¥ä¸‹é¡ºåºæŸ¥æ‰¾ç±»ï¼š è°ƒç”¨findLoadedClass(String) æ–¹æ³•æ£€æŸ¥è¿™ä¸ªç±»æ˜¯å¦è¢«åŠ è½½è¿‡ ä½¿ç”¨çˆ¶åŠ è½½å™¨è°ƒç”¨ loadClass(String) æ–¹æ³•ï¼Œå¦‚æœçˆ¶åŠ è½½å™¨ä¸º Nullï¼Œç±»åŠ è½½å™¨è£…è½½è™šæ‹Ÿæœºå†…ç½®çš„åŠ è½½å™¨è°ƒç”¨ findClass(String) æ–¹æ³•è£…è½½ç±»ï¼Œ å¦‚æœï¼ŒæŒ‰ç…§ä»¥ä¸Šçš„æ­¥éª¤æˆåŠŸçš„æ‰¾åˆ°å¯¹åº”çš„ç±»ï¼Œå¹¶ä¸”è¯¥æ–¹æ³•æ¥æ”¶çš„ resolve å‚æ•°çš„å€¼ä¸º true,é‚£ä¹ˆå°±è°ƒç”¨resolveClass(Class) æ–¹æ³•æ¥å¤„ç†ç±»ã€‚ ClassLoader çš„å­ç±»æœ€å¥½è¦†ç›– findClass(String) è€Œä¸æ˜¯è¿™ä¸ªæ–¹æ³•ã€‚ é™¤éè¢«é‡å†™ï¼Œè¿™ä¸ªæ–¹æ³•é»˜è®¤åœ¨æ•´ä¸ªè£…è½½è¿‡ç¨‹ä¸­éƒ½æ˜¯åŒæ­¥çš„ï¼ˆçº¿ç¨‹å®‰å…¨çš„ï¼‰ã€‚ 2ã€ClassLoader çš„ç­‰çº§åŠ è½½æœºåˆ¶Javaé»˜è®¤æä¾›çš„ä¸‰ä¸ªClassLoader BootStrap ClassLoaderï¼šç§°ä¸ºå¯åŠ¨ç±»åŠ è½½å™¨ï¼Œæ˜¯Javaç±»åŠ è½½å±‚æ¬¡ä¸­æœ€é¡¶å±‚çš„ç±»åŠ è½½å™¨ï¼Œè´Ÿè´£åŠ è½½JDKä¸­çš„æ ¸å¿ƒç±»åº“ï¼Œå¦‚ï¼šrt.jarã€resources.jarã€charsets.jarç­‰ï¼Œå¯é€šè¿‡å¦‚ä¸‹ç¨‹åºè·å¾—è¯¥ç±»åŠ è½½å™¨ä»å“ªäº›åœ°æ–¹åŠ è½½äº†ç›¸å…³çš„jaræˆ–classæ–‡ä»¶ï¼š 12345678910public class BootStrapTest&#123; public static void main(String[] args) &#123; URL[] urls = sun.misc.Launcher.getBootstrapClassPath().getURLs(); for (int i = 0; i &lt; urls.length; i++) &#123; System.out.println(urls[i].toExternalForm()); &#125; &#125;&#125; ä»¥ä¸‹å†…å®¹æ˜¯ä¸Šè¿°ç¨‹åºä»æœ¬æœºJDKç¯å¢ƒæ‰€è·å¾—çš„ç»“æœï¼š å…¶å®ä¸Šè¿°ç»“æœä¹Ÿæ˜¯é€šè¿‡æŸ¥æ‰¾ sun.boot.class.path è¿™ä¸ªç³»ç»Ÿå±æ€§æ‰€å¾—çŸ¥çš„ã€‚ 1System.out.println(System.getProperty(\"sun.boot.class.path\")); 1æ‰“å°ç»“æœï¼šC:\\Java\\jdk1.8.0_60\\jre\\lib\\resources.jar;C:\\Java\\jdk1.8.0_60\\jre\\lib\\rt.jar;C:\\Java\\jdk1.8.0_60\\jre\\lib\\sunrsasign.jar;C:\\Java\\jdk1.8.0_60\\jre\\lib\\jsse.jar;C:\\Java\\jdk1.8.0_60\\jre\\lib\\jce.jar;C:\\Java\\jdk1.8.0_60\\jre\\lib\\charsets.jar;C:\\Java\\jdk1.8.0_60\\jre\\lib\\jfr.jar;C:\\Java\\jdk1.8.0_60\\jre\\classes Extension ClassLoaderï¼šç§°ä¸ºæ‰©å±•ç±»åŠ è½½å™¨ï¼Œè´Ÿè´£åŠ è½½Javaçš„æ‰©å±•ç±»åº“ï¼ŒJava è™šæ‹Ÿæœºçš„å®ç°ä¼šæä¾›ä¸€ä¸ªæ‰©å±•åº“ç›®å½•ã€‚è¯¥ç±»åŠ è½½å™¨åœ¨æ­¤ç›®å½•é‡Œé¢æŸ¥æ‰¾å¹¶åŠ è½½ Java ç±»ã€‚é»˜è®¤åŠ è½½JAVA_HOME/jre/lib/ext/ç›®ä¸‹çš„æ‰€æœ‰jarã€‚ App ClassLoaderï¼šç§°ä¸ºç³»ç»Ÿç±»åŠ è½½å™¨ï¼Œè´Ÿè´£åŠ è½½åº”ç”¨ç¨‹åºclasspathç›®å½•ä¸‹çš„æ‰€æœ‰jarå’Œclassæ–‡ä»¶ã€‚ä¸€èˆ¬æ¥è¯´ï¼ŒJava åº”ç”¨çš„ç±»éƒ½æ˜¯ç”±å®ƒæ¥å®ŒæˆåŠ è½½çš„ã€‚å¯ä»¥é€šè¿‡ ClassLoader.getSystemClassLoader()æ¥è·å–å®ƒã€‚ â€‹ é™¤äº†ç³»ç»Ÿæä¾›çš„ç±»åŠ è½½å™¨ä»¥å¤–ï¼Œå¼€å‘äººå‘˜å¯ä»¥é€šè¿‡ç»§æ‰¿java.lang.ClassLoaderç±»çš„æ–¹å¼å®ç°è‡ªå·±çš„ç±»åŠ è½½å™¨ï¼Œä»¥æ»¡è¶³ä¸€äº›ç‰¹æ®Šçš„éœ€æ±‚ã€‚ é™¤äº†å¼•å¯¼ç±»åŠ è½½å™¨ä¹‹å¤–ï¼Œæ‰€æœ‰çš„ç±»åŠ è½½å™¨éƒ½æœ‰ä¸€ä¸ªçˆ¶ç±»åŠ è½½å™¨ã€‚ ç»™å‡ºçš„ getParent()æ–¹æ³•å¯ä»¥å¾—åˆ°ã€‚å¯¹äºç³»ç»Ÿæä¾›çš„ç±»åŠ è½½å™¨æ¥è¯´ï¼Œç³»ç»Ÿç±»åŠ è½½å™¨çš„çˆ¶ç±»åŠ è½½å™¨æ˜¯æ‰©å±•ç±»åŠ è½½å™¨ï¼Œè€Œæ‰©å±•ç±»åŠ è½½å™¨çš„çˆ¶ç±»åŠ è½½å™¨æ˜¯å¼•å¯¼ç±»åŠ è½½å™¨ï¼›å¯¹äºå¼€å‘äººå‘˜ç¼–å†™çš„ç±»åŠ è½½å™¨æ¥è¯´ï¼Œå…¶çˆ¶ç±»åŠ è½½å™¨æ˜¯åŠ è½½æ­¤ç±»åŠ è½½å™¨ Java ç±»çš„ç±»åŠ è½½å™¨ã€‚å› ä¸ºç±»åŠ è½½å™¨ Java ç±»å¦‚åŒå…¶å®ƒçš„ Java ç±»ä¸€æ ·ï¼Œä¹Ÿæ˜¯è¦ç”±ç±»åŠ è½½å™¨æ¥åŠ è½½çš„ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œå¼€å‘äººå‘˜ç¼–å†™çš„ç±»åŠ è½½å™¨çš„çˆ¶ç±»åŠ è½½å™¨æ˜¯ç³»ç»Ÿç±»åŠ è½½å™¨ã€‚ç±»åŠ è½½å™¨é€šè¿‡è¿™ç§æ–¹å¼ç»„ç»‡èµ·æ¥ï¼Œå½¢æˆæ ‘çŠ¶ç»“æ„ã€‚æ ‘çš„æ ¹èŠ‚ç‚¹å°±æ˜¯å¼•å¯¼ç±»åŠ è½½å™¨ã€‚ â€‹ ClassLoaderåŠ è½½ç±»çš„åŸç†1. åŸç†ä»‹ç»ClassLoaderä½¿ç”¨çš„æ˜¯åŒäº²å§”æ‰˜æ¨¡å‹æ¥æœç´¢ç±»çš„ï¼Œæ¯ä¸ªClassLoaderå®ä¾‹éƒ½æœ‰ä¸€ä¸ªçˆ¶ç±»åŠ è½½å™¨çš„å¼•ç”¨ï¼ˆä¸æ˜¯ç»§æ‰¿çš„å…³ç³»ï¼Œæ˜¯ä¸€ä¸ªåŒ…å«çš„å…³ç³»ï¼‰ï¼Œè™šæ‹Ÿæœºå†…ç½®çš„ç±»åŠ è½½å™¨ï¼ˆBootstrap ClassLoaderï¼‰æœ¬èº«æ²¡æœ‰çˆ¶ç±»åŠ è½½å™¨ï¼Œä½†å¯ä»¥ç”¨ä½œå…¶å®ƒClassLoaderå®ä¾‹çš„çš„çˆ¶ç±»åŠ è½½å™¨ã€‚å½“ä¸€ä¸ªClassLoaderå®ä¾‹éœ€è¦åŠ è½½æŸä¸ªç±»æ—¶ï¼Œå®ƒä¼šè¯•å›¾äº²è‡ªæœç´¢æŸä¸ªç±»ä¹‹å‰ï¼Œå…ˆæŠŠè¿™ä¸ªä»»åŠ¡å§”æ‰˜ç»™å®ƒçš„çˆ¶ç±»åŠ è½½å™¨ï¼Œè¿™ä¸ªè¿‡ç¨‹æ˜¯ç”±ä¸Šè‡³ä¸‹ä¾æ¬¡æ£€æŸ¥çš„ï¼Œé¦–å…ˆç”±æœ€é¡¶å±‚çš„ç±»åŠ è½½å™¨Bootstrap ClassLoaderè¯•å›¾åŠ è½½ï¼Œå¦‚æœæ²¡åŠ è½½åˆ°ï¼Œåˆ™æŠŠä»»åŠ¡è½¬äº¤ç»™Extension ClassLoaderè¯•å›¾åŠ è½½ï¼Œå¦‚æœä¹Ÿæ²¡åŠ è½½åˆ°ï¼Œåˆ™è½¬äº¤ç»™App ClassLoaderè¿›è¡ŒåŠ è½½ï¼Œå¦‚æœå®ƒä¹Ÿæ²¡æœ‰åŠ è½½å¾—åˆ°çš„è¯ï¼Œåˆ™è¿”å›ç»™å§”æ‰˜çš„å‘èµ·è€…ï¼Œç”±å®ƒåˆ°æŒ‡å®šçš„æ–‡ä»¶ç³»ç»Ÿæˆ–ç½‘ç»œç­‰URLä¸­åŠ è½½è¯¥ç±»ã€‚å¦‚æœå®ƒä»¬éƒ½æ²¡æœ‰åŠ è½½åˆ°è¿™ä¸ªç±»æ—¶ï¼Œåˆ™æŠ›å‡ºClassNotFoundExceptionå¼‚å¸¸ã€‚å¦åˆ™å°†è¿™ä¸ªæ‰¾åˆ°çš„ç±»ç”Ÿæˆä¸€ä¸ªç±»çš„å®šä¹‰ï¼Œå¹¶å°†å®ƒåŠ è½½åˆ°å†…å­˜å½“ä¸­ï¼Œæœ€åè¿”å›è¿™ä¸ªç±»åœ¨å†…å­˜ä¸­çš„Classå®ä¾‹å¯¹è±¡ã€‚ 2ã€ä¸ºä»€ä¹ˆè¦ä½¿ç”¨åŒäº²å§”æ‰˜è¿™ç§æ¨¡å‹å‘¢ï¼Ÿå› ä¸ºè¿™æ ·å¯ä»¥é¿å…é‡å¤åŠ è½½ï¼Œå½“çˆ¶äº²å·²ç»åŠ è½½äº†è¯¥ç±»çš„æ—¶å€™ï¼Œå°±æ²¡æœ‰å¿…è¦ ClassLoaderå†åŠ è½½ä¸€æ¬¡ã€‚è€ƒè™‘åˆ°å®‰å…¨å› ç´ ï¼Œæˆ‘ä»¬è¯•æƒ³ä¸€ä¸‹ï¼Œå¦‚æœä¸ä½¿ç”¨è¿™ç§å§”æ‰˜æ¨¡å¼ï¼Œé‚£æˆ‘ä»¬å°±å¯ä»¥éšæ—¶ä½¿ç”¨è‡ªå®šä¹‰çš„Stringæ¥åŠ¨æ€æ›¿ä»£javaæ ¸å¿ƒapiä¸­å®šä¹‰çš„ç±»å‹ï¼Œè¿™æ ·ä¼šå­˜åœ¨éå¸¸å¤§çš„å®‰å…¨éšæ‚£ï¼Œè€ŒåŒäº²å§”æ‰˜çš„æ–¹å¼ï¼Œå°±å¯ä»¥é¿å…è¿™ç§æƒ…å†µï¼Œå› ä¸ºStringå·²ç»åœ¨å¯åŠ¨æ—¶å°±è¢«å¼•å¯¼ç±»åŠ è½½å™¨ï¼ˆBootstrcp ClassLoaderï¼‰åŠ è½½ï¼Œæ‰€ä»¥ç”¨æˆ·è‡ªå®šä¹‰çš„ClassLoaderæ°¸è¿œä¹Ÿæ— æ³•åŠ è½½ä¸€ä¸ªè‡ªå·±å†™çš„Stringï¼Œé™¤éä½ æ”¹å˜JDKä¸­ClassLoaderæœç´¢ç±»çš„é»˜è®¤ç®—æ³•ã€‚ 3ã€ ä½†æ˜¯JVMåœ¨æœç´¢ç±»çš„æ—¶å€™ï¼Œåˆæ˜¯å¦‚ä½•åˆ¤å®šä¸¤ä¸ªclassæ˜¯ç›¸åŒçš„å‘¢ï¼ŸJVMåœ¨åˆ¤å®šä¸¤ä¸ªclassæ˜¯å¦ç›¸åŒæ—¶ï¼Œä¸ä»…è¦åˆ¤æ–­ä¸¤ä¸ªç±»åæ˜¯å¦ç›¸åŒï¼Œè€Œä¸”è¦åˆ¤æ–­æ˜¯å¦ç”±åŒä¸€ä¸ªç±»åŠ è½½å™¨å®ä¾‹åŠ è½½çš„ã€‚åªæœ‰ä¸¤è€…åŒæ—¶æ»¡è¶³çš„æƒ…å†µä¸‹ï¼ŒJVMæ‰è®¤ä¸ºè¿™ä¸¤ä¸ªclassæ˜¯ç›¸åŒçš„ã€‚å°±ç®—ä¸¤ä¸ªclassæ˜¯åŒä¸€ä»½classå­—èŠ‚ç ï¼Œå¦‚æœè¢«ä¸¤ä¸ªä¸åŒçš„ClassLoaderå®ä¾‹æ‰€åŠ è½½ï¼ŒJVMä¹Ÿä¼šè®¤ä¸ºå®ƒä»¬æ˜¯ä¸¤ä¸ªä¸åŒclassã€‚æ¯”å¦‚ç½‘ç»œä¸Šçš„ä¸€ä¸ªJavaç±»org.classloader.simple.NetClassLoaderSimpleï¼Œjavacç¼–è¯‘ä¹‹åç”Ÿæˆå­—èŠ‚ç æ–‡ä»¶NetClassLoaderSimple.classï¼ŒClassLoaderAå’ŒClassLoaderBè¿™ä¸¤ä¸ªç±»åŠ è½½å™¨å¹¶è¯»å–äº†NetClassLoaderSimple.classæ–‡ä»¶ï¼Œå¹¶åˆ†åˆ«å®šä¹‰å‡ºäº†java.lang.Classå®ä¾‹æ¥è¡¨ç¤ºè¿™ä¸ªç±»ï¼Œå¯¹äºJVMæ¥è¯´ï¼Œå®ƒä»¬æ˜¯ä¸¤ä¸ªä¸åŒçš„å®ä¾‹å¯¹è±¡ï¼Œä½†å®ƒä»¬ç¡®å®æ˜¯åŒä¸€ä»½å­—èŠ‚ç æ–‡ä»¶ï¼Œå¦‚æœè¯•å›¾å°†è¿™ä¸ªClasså®ä¾‹ç”Ÿæˆå…·ä½“çš„å¯¹è±¡è¿›è¡Œè½¬æ¢æ—¶ï¼Œå°±ä¼šæŠ›è¿è¡Œæ—¶å¼‚å¸¸java.lang.ClassCaseExceptionï¼Œæç¤ºè¿™æ˜¯ä¸¤ä¸ªä¸åŒçš„ç±»å‹ã€‚ç°åœ¨é€šè¿‡å®ä¾‹æ¥éªŒè¯ä¸Šè¿°æ‰€æè¿°çš„æ˜¯å¦æ­£ç¡®ï¼š1ï¼‰ã€åœ¨webæœåŠ¡å™¨ä¸Šå»ºä¸€ä¸ªorg.classloader.simple.NetClassLoaderSimple.javaç±» 1234567public class NetClassLoaderSimple&#123; private NetClassLoaderSimple instance; public void setNetClassLoaderSimple(Object object)&#123; this.instance = (NetClassLoaderSimple)object; &#125;&#125; org.classloader.simple.NetClassLoaderSimpleç±»çš„setNetClassLoaderSimpleæ–¹æ³•æ¥æ”¶ä¸€ä¸ªObjectç±»å‹å‚æ•°ï¼Œå¹¶å°†å®ƒå¼ºåˆ¶è½¬æ¢æˆorg.classloader.simple.NetClassLoaderSimpleç±»å‹ã€‚ 2ï¼‰ã€æµ‹è¯•ä¸¤ä¸ªclassæ˜¯å¦ç›¸åŒ NetWorkClassLoader.java 12345678910111213141516171819202122package classloader;public class NewworkClassLoaderTest &#123; public static void main(String[] args) &#123; try &#123; //æµ‹è¯•åŠ è½½ç½‘ç»œä¸­çš„classæ–‡ä»¶ String rootUrl = &quot;http://localhost:8080/httpweb/classes&quot;; String className = &quot;org.classloader.simple.NetClassLoaderSimple&quot;; NetworkClassLoader ncl1 = new NetworkClassLoader(rootUrl); NetworkClassLoader ncl2 = new NetworkClassLoader(rootUrl); Class&lt;?&gt; clazz1 = ncl1.loadClass(className); Class&lt;?&gt; clazz2 = ncl2.loadClass(className); Object obj1 = clazz1.newInstance(); Object obj2 = clazz2.newInstance(); clazz1.getMethod(&quot;setNetClassLoaderSimple&quot;, Object.class).invoke(obj1, obj2); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; &#125;&#125; é¦–å…ˆè·å¾—ç½‘ç»œä¸Šä¸€ä¸ªclassæ–‡ä»¶çš„äºŒè¿›åˆ¶åç§°ï¼Œç„¶åé€šè¿‡è‡ªå®šä¹‰çš„ç±»åŠ è½½å™¨NetworkClassLoaderåˆ›å»ºä¸¤ä¸ªå®ä¾‹ï¼Œå¹¶æ ¹æ®ç½‘ç»œåœ°å€åˆ†åˆ«åŠ è½½è¿™ä»½classï¼Œå¹¶å¾—åˆ°è¿™ä¸¤ä¸ªClassLoaderå®ä¾‹åŠ è½½åç”Ÿæˆçš„Classå®ä¾‹clazz1å’Œclazz2ï¼Œæœ€åå°†è¿™ä¸¤ä¸ªClasså®ä¾‹åˆ†åˆ«ç”Ÿæˆå…·ä½“çš„å®ä¾‹å¯¹è±¡obj1å’Œobj2ï¼Œå†é€šè¿‡åå°„è°ƒç”¨clazz1ä¸­çš„setNetClassLoaderSimpleæ–¹æ³•ã€‚ 3ï¼‰ã€æŸ¥çœ‹æµ‹è¯•ç»“æœ ç»“è®ºï¼šä»ç»“æœä¸­å¯ä»¥çœ‹å‡ºï¼Œè¿è¡Œæ—¶æŠ›å‡ºäº†java.lang.ClassCastExceptionå¼‚å¸¸ã€‚è™½ç„¶ä¸¤ä¸ªå¯¹è±¡obj1å’Œ obj2çš„ç±»çš„åå­—ç›¸åŒï¼Œä½†æ˜¯è¿™ä¸¤ä¸ªç±»æ˜¯ç”±ä¸åŒçš„ç±»åŠ è½½å™¨å®ä¾‹æ¥åŠ è½½çš„ï¼Œæ‰€ä»¥JVMè®¤ä¸ºå®ƒä»¬å°±æ˜¯ä¸¤ä¸ªä¸åŒçš„ç±»ã€‚ äº†è§£äº†è¿™ä¸€ç‚¹ä¹‹åï¼Œå°±å¯ä»¥ç†è§£ä»£ç†æ¨¡å¼çš„è®¾è®¡åŠ¨æœºäº†ã€‚ä»£ç†æ¨¡å¼æ˜¯ä¸ºäº†ä¿è¯ Java æ ¸å¿ƒåº“çš„ç±»å‹å®‰å…¨ã€‚æ‰€æœ‰ Java åº”ç”¨éƒ½è‡³å°‘éœ€è¦å¼•ç”¨ java.lang.Objectç±»ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨è¿è¡Œçš„æ—¶å€™ï¼Œjava.lang.Objectè¿™ä¸ªç±»éœ€è¦è¢«åŠ è½½åˆ° Java è™šæ‹Ÿæœºä¸­ã€‚å¦‚æœè¿™ä¸ªåŠ è½½è¿‡ç¨‹ç”± Java åº”ç”¨è‡ªå·±çš„ç±»åŠ è½½å™¨æ¥å®Œæˆçš„è¯ï¼Œå¾ˆå¯èƒ½å°±å­˜åœ¨å¤šä¸ªç‰ˆæœ¬çš„ java.lang.Objectç±»ï¼Œè€Œä¸”è¿™äº›ç±»ä¹‹é—´æ˜¯ä¸å…¼å®¹çš„ã€‚é€šè¿‡ä»£ç†æ¨¡å¼ï¼Œå¯¹äº Java æ ¸å¿ƒåº“çš„ç±»çš„åŠ è½½å·¥ä½œç”±å¼•å¯¼ç±»åŠ è½½å™¨æ¥ç»Ÿä¸€å®Œæˆï¼Œä¿è¯äº†Java åº”ç”¨æ‰€ä½¿ç”¨çš„éƒ½æ˜¯åŒä¸€ä¸ªç‰ˆæœ¬çš„ Java æ ¸å¿ƒåº“çš„ç±»ï¼Œæ˜¯äº’ç›¸å…¼å®¹çš„ã€‚ ä¸åŒçš„ç±»åŠ è½½å™¨ä¸ºç›¸åŒåç§°çš„ç±»åˆ›å»ºäº†é¢å¤–çš„åç§°ç©ºé—´ã€‚ç›¸åŒåç§°çš„ç±»å¯ä»¥å¹¶å­˜åœ¨ Java è™šæ‹Ÿæœºä¸­ï¼Œåªéœ€è¦ç”¨ä¸åŒçš„ç±»åŠ è½½å™¨æ¥åŠ è½½å®ƒä»¬å³å¯ã€‚ä¸åŒç±»åŠ è½½å™¨åŠ è½½çš„ç±»ä¹‹é—´æ˜¯ä¸å…¼å®¹çš„ï¼Œè¿™å°±ç›¸å½“äºåœ¨ Java è™šæ‹Ÿæœºå†…éƒ¨åˆ›å»ºäº†ä¸€ä¸ªä¸ªç›¸äº’éš”ç¦»çš„ Java ç±»ç©ºé—´ã€‚ ClassLoaderçš„ä½“ç³»æ¶æ„ï¼š ç±»åŠ è½½å™¨çš„æ ‘çŠ¶ç»„ç»‡ç»“æ„æµ‹è¯•ä¸€ï¼š 1234567891011public class ClassLoaderTree&#123; public static void main(String[] args) &#123; ClassLoader loader = ClassLoaderTree.class.getClassLoader(); while (loader!=null)&#123; System.out.println(loader.toString()); loader = loader.getParent(); &#125; System.out.println(loader); &#125;&#125; æ¯ä¸ª Java ç±»éƒ½ç»´æŠ¤ç€ä¸€ä¸ªæŒ‡å‘å®šä¹‰å®ƒçš„ç±»åŠ è½½å™¨çš„å¼•ç”¨ï¼Œé€šè¿‡ getClassLoader()æ–¹æ³•å°±å¯ä»¥è·å–åˆ°æ­¤å¼•ç”¨ã€‚ä»£ç ä¸­é€šè¿‡é€’å½’è°ƒç”¨ getParent()æ–¹æ³•æ¥è¾“å‡ºå…¨éƒ¨çš„çˆ¶ç±»åŠ è½½å™¨ã€‚ ç»“æœæ˜¯ï¼š ç¬¬ä¸€ä¸ªè¾“å‡ºçš„æ˜¯ClassLoaderTreeç±»çš„ç±»åŠ è½½å™¨ï¼Œå³ç³»ç»Ÿç±»åŠ è½½å™¨ã€‚å®ƒæ˜¯sun.misc.Launcher$AppClassLoaderç±»çš„å®ä¾‹ï¼›ç¬¬äºŒä¸ªè¾“å‡ºçš„æ˜¯æ‰©å±•ç±»åŠ è½½å™¨ï¼Œæ˜¯sun.misc.Launcher$ExtClassLoaderç±»çš„å®ä¾‹ã€‚éœ€è¦æ³¨æ„çš„æ˜¯è¿™é‡Œå¹¶æ²¡æœ‰è¾“å‡ºå¼•å¯¼ç±»åŠ è½½å™¨ï¼Œè¿™æ˜¯ç”±äºæœ‰äº› JDK çš„å®ç°å¯¹äºçˆ¶ç±»åŠ è½½å™¨æ˜¯å¼•å¯¼ç±»åŠ è½½å™¨çš„æƒ…å†µï¼ŒgetParent()æ–¹æ³•è¿”å› nullã€‚ç¬¬ä¸‰è¡Œç»“æœè¯´æ˜ï¼šExtClassLoaderçš„ç±»åŠ å™¨æ˜¯Bootstrap ClassLoaderï¼Œå› ä¸ºBootstrap ClassLoaderä¸æ˜¯ä¸€ä¸ªæ™®é€šçš„Javaç±»ï¼Œæ‰€ä»¥ExtClassLoaderçš„parent=nullï¼Œæ‰€ä»¥ç¬¬ä¸‰è¡Œçš„æ‰“å°ç»“æœä¸ºnullå°±æ˜¯è¿™ä¸ªåŸå› ã€‚ æµ‹è¯•äºŒï¼š å°†ClassLoaderTree.classæ‰“åŒ…æˆClassLoaderTree.jarï¼Œæ”¾åˆ°Extension ClassLoaderçš„åŠ è½½ç›®å½•ä¸‹ï¼ˆJAVA_HOME/jre/lib/extï¼‰ï¼Œç„¶åé‡æ–°è¿è¡Œè¿™ä¸ªç¨‹åºï¼Œå¾—åˆ°çš„ç»“æœä¼šæ˜¯ä»€ä¹ˆæ ·å‘¢ï¼Ÿ æ­¤å¤„æˆ‘åœ¨ IDEA ä¸­çš„è¿è¡Œç»“æœè¿˜å’Œä¸Šé¢çš„ä¸€æ ·ï¼Œä¸æ–‡ç«  æ·±å…¥åˆ†æJava ClassLoaderåŸç† ä¸­çš„æœ‰å·®è·ï¼Œå…·ä½“åŸå› æœªå¼„æ¸…æ¥šï¼Œè¿˜å¸Œæœ›è¯»è€…èƒ½å¤Ÿäº²è‡ªæµ‹è¯•ã€‚ é‚£æ–‡ç« ä¸­çš„ç»“æœæ˜¯ï¼š æ‰“å°ç»“æœåˆ†æï¼šä¸ºä»€ä¹ˆç¬¬ä¸€è¡Œçš„ç»“æœæ˜¯ExtClassLoaderå‘¢ï¼Ÿ å› ä¸º ClassLoader çš„å§”æ‰˜æ¨¡å‹æœºåˆ¶ï¼Œå½“æˆ‘ä»¬è¦ç”¨ ClassLoaderTest.class è¿™ä¸ªç±»çš„æ—¶å€™ï¼ŒAppClassLoader åœ¨è¯•å›¾åŠ è½½ä¹‹å‰ï¼Œå…ˆå§”æ‰˜ç»™ Bootstrcp ClassLoaderï¼ŒBootstracp ClassLoader å‘ç°è‡ªå·±æ²¡æ‰¾åˆ°ï¼Œå®ƒå°±å‘Šè¯‰ ExtClassLoaderï¼Œå…„å¼Ÿï¼Œæˆ‘è¿™é‡Œæ²¡æœ‰è¿™ä¸ªç±»ï¼Œä½ å»åŠ è½½çœ‹çœ‹ï¼Œç„¶å Extension ClassLoader æ‹¿ç€è¿™ä¸ªç±»å»å®ƒæŒ‡å®šçš„ç±»è·¯å¾„ï¼ˆJAVA_HOME/jre/lib/extï¼‰è¯•å›¾åŠ è½½ï¼Œå”‰ï¼Œå®ƒå‘ç°åœ¨ClassLoaderTest.jar è¿™æ ·ä¸€ä¸ªæ–‡ä»¶ä¸­åŒ…å« ClassLoaderTest.class è¿™æ ·çš„ä¸€ä¸ªæ–‡ä»¶ï¼Œç„¶åå®ƒæŠŠæ‰¾åˆ°çš„è¿™ä¸ªç±»åŠ è½½åˆ°å†…å­˜å½“ä¸­ï¼Œå¹¶ç”Ÿæˆè¿™ä¸ªç±»çš„ Class å®ä¾‹å¯¹è±¡ï¼Œæœ€åæŠŠè¿™ä¸ªå®ä¾‹è¿”å›ã€‚æ‰€ä»¥ ClassLoaderTest.class çš„ç±»åŠ è½½å™¨æ˜¯ ExtClassLoaderã€‚ ç¬¬äºŒè¡Œçš„ç»“æœä¸ºnullï¼Œæ˜¯å› ä¸ºExtClassLoaderçš„çˆ¶ç±»åŠ è½½å™¨æ˜¯Bootstrap ClassLoaderã€‚ JVMåŠ è½½classæ–‡ä»¶çš„ä¸¤ç§æ–¹æ³•ï¼› éšå¼åŠ è½½ï¼Œ ç¨‹åºåœ¨è¿è¡Œè¿‡ç¨‹ä¸­å½“ç¢°åˆ°é€šè¿‡new ç­‰æ–¹å¼ç”Ÿæˆå¯¹è±¡æ—¶ï¼Œéšå¼è°ƒç”¨ç±»è£…è½½å™¨åŠ è½½å¯¹åº”çš„ç±»åˆ°jvmä¸­ã€‚ æ˜¾å¼åŠ è½½ï¼Œ é€šè¿‡class.forname()ã€this.getClass.getClassLoader().loadClass()ç­‰æ–¹æ³•æ˜¾å¼åŠ è½½éœ€è¦çš„ç±»ï¼Œæˆ–è€…æˆ‘ä»¬è‡ªå·±å®ç°çš„ ClassLoader çš„ findlass() æ–¹æ³•ã€‚ ä¸‹é¢ä»‹ç»ä¸‹ class.forNameçš„åŠ è½½ç±»æ–¹æ³•ï¼š Class.forNameæ˜¯ä¸€ä¸ªé™æ€æ–¹æ³•ï¼ŒåŒæ ·å¯ä»¥ç”¨æ¥åŠ è½½ç±»ã€‚è¯¥æ–¹æ³•æœ‰ä¸¤ç§å½¢å¼ï¼šClass.forName(String name,boolean initialize, ClassLoader loader)å’ŒClass.forName(String className)ã€‚ç¬¬ä¸€ç§å½¢å¼çš„å‚æ•° nameè¡¨ç¤ºçš„æ˜¯ç±»çš„å…¨åï¼›initializeè¡¨ç¤ºæ˜¯å¦åˆå§‹åŒ–ç±»ï¼›loaderè¡¨ç¤ºåŠ è½½æ—¶ä½¿ç”¨çš„ç±»åŠ è½½å™¨ã€‚ç¬¬äºŒç§å½¢å¼åˆ™ç›¸å½“äºè®¾ç½®äº†å‚æ•° initializeçš„å€¼ä¸º trueï¼Œloaderçš„å€¼ä¸ºå½“å‰ç±»çš„ç±»åŠ è½½å™¨ã€‚Class.forNameçš„ä¸€ä¸ªå¾ˆå¸¸è§çš„ç”¨æ³•æ˜¯åœ¨åŠ è½½æ•°æ®åº“é©±åŠ¨çš„æ—¶å€™ã€‚å¦‚Class.forName(&quot;org.apache.derby.jdbc.EmbeddedDriver&quot;)ç”¨æ¥åŠ è½½ Apache Derby æ•°æ®åº“çš„é©±åŠ¨ã€‚ ç±»åŠ è½½çš„åŠ¨æ€æ€§ä½“ç°ï¼šä¸€ä¸ªåº”ç”¨ç¨‹åºæ€»æ˜¯ç”±nå¤šä¸ªç±»ç»„æˆï¼ŒJavaç¨‹åºå¯åŠ¨æ—¶ï¼Œå¹¶ä¸æ˜¯ä¸€æ¬¡æŠŠæ‰€æœ‰çš„ç±»å…¨éƒ¨åŠ è½½åå†è¿è¡Œï¼Œå®ƒæ€»æ˜¯å…ˆæŠŠä¿è¯ç¨‹åºè¿è¡Œçš„åŸºç¡€ç±»ä¸€æ¬¡æ€§åŠ è½½åˆ°jvmä¸­ï¼Œå…¶å®ƒç±»ç­‰åˆ°jvmç”¨åˆ°çš„æ—¶å€™å†åŠ è½½ï¼Œè¿™æ ·çš„å¥½å¤„æ˜¯èŠ‚çœäº†å†…å­˜çš„å¼€é”€ï¼Œå› ä¸ºjavaæœ€æ—©å°±æ˜¯ä¸ºåµŒå…¥å¼ç³»ç»Ÿè€Œè®¾è®¡çš„ï¼Œå†…å­˜å®è´µï¼Œè¿™æ˜¯ä¸€ç§å¯ä»¥ç†è§£çš„æœºåˆ¶ï¼Œè€Œç”¨åˆ°æ—¶å†åŠ è½½è¿™ä¹Ÿæ˜¯javaåŠ¨æ€æ€§çš„ä¸€ç§ä½“ç°ã€‚ 3ã€å¦‚ä½•åŠ è½½ class æ–‡ä»¶ ç¬¬ä¸€é˜¶æ®µæ‰¾åˆ° .class æ–‡ä»¶å¹¶æŠŠè¿™ä¸ªæ–‡ä»¶åŒ…å«çš„å­—èŠ‚ç åŠ è½½åˆ°å†…å­˜ä¸­ã€‚ ç¬¬äºŒé˜¶æ®µä¸­åˆ†ä¸‰æ­¥ï¼Œå­—èŠ‚ç éªŒè¯ï¼›class ç±»æ•°æ®ç»“æ„åˆ†æåŠç›¸åº”çš„å†…å­˜åˆ†é…ï¼›æœ€åçš„ç¬¦å·è¡¨çš„é“¾æ¥ã€‚ ç¬¬ä¸‰é˜¶æ®µæ˜¯ç±»ä¸­é™æ€å±æ€§å’Œåˆå§‹åŒ–èµ‹å€¼ï¼Œä»¥åŠé™æ€å—çš„æ‰§è¡Œç­‰ã€‚ 3.1 ã€åŠ è½½å­—èŠ‚ç åˆ°å†…å­˜ã€‚ã€‚ 3.2 ã€éªŒè¯ä¸åˆ†æ å­—èŠ‚ç éªŒè¯ï¼Œç±»è£…å…¥å™¨å¯¹äºç±»çš„å­—èŠ‚ç è¦åšå¾ˆå¤šæ£€æµ‹ï¼Œä»¥ç¡®ä¿æ ¼å¼æ­£ç¡®ï¼Œè¡Œä¸ºæ­£ç¡®ã€‚ ç±»è£…å¤‡ï¼Œå‡†å¤‡ä»£è¡¨æ¯ä¸ªç±»ä¸­å®šä¹‰çš„å­—æ®µã€æ–¹æ³•å’Œå®ç°æ¥å£æ‰€å¿…é¡»çš„æ•°æ®ç»“æ„ã€‚ è§£æï¼Œè£…å…¥å™¨è£…å…¥ç±»æ‰€å¼•ç”¨çš„å…¶ä»–æ‰€æœ‰ç±»ã€‚ 4ã€å¸¸è§åŠ è½½ç±»é”™è¯¯åˆ†æ4.1 ã€ ClassNotFoundExecptionClassNotFoundExecption å¼‚å¸¸æ˜¯å¹³å¸¸ç¢°åˆ°çš„æœ€å¤šçš„ã€‚è¿™ä¸ªå¼‚å¸¸é€šå¸¸å‘ç”Ÿåœ¨æ˜¾ç¤ºåŠ è½½ç±»çš„æ—¶å€™ã€‚ 12345678910public class ClassNotFoundExceptionTest&#123; public static void main(String[] args) &#123; try &#123; Class.forName(&quot;NotFoundClass&quot;); &#125;catch (ClassNotFoundException e)&#123; e.printStackTrace(); &#125; &#125;&#125; æ˜¾ç¤ºåŠ è½½ä¸€ä¸ªç±»é€šå¸¸æœ‰ï¼š é€šè¿‡ç±» Class ä¸­çš„ forName() æ–¹æ³• é€šè¿‡ç±» ClassLoader ä¸­çš„ loadClass() æ–¹æ³• é€šè¿‡ç±» ClassLoader ä¸­çš„ findSystemClass() æ–¹æ³• å‡ºç°è¿™ç§é”™è¯¯å…¶å®å°±æ˜¯å½“ JVM è¦åŠ è½½æŒ‡å®šæ–‡ä»¶çš„å­—èŠ‚ç åˆ°å†…å­˜æ—¶ï¼Œå¹¶æ²¡æœ‰æ‰¾åˆ°è¿™ä¸ªæ–‡ä»¶å¯¹åº”çš„å­—èŠ‚ç ï¼Œä¹Ÿå°±æ˜¯è¿™ä¸ªæ–‡ä»¶å¹¶ä¸å­˜åœ¨ã€‚è§£å†³æ–¹æ³•å°±æ˜¯æ£€æŸ¥åœ¨å½“å‰çš„ classpath ç›®å½•ä¸‹æœ‰æ²¡æœ‰æŒ‡å®šçš„æ–‡ä»¶ã€‚ 4.2 ã€ NoClassDefFoundErroråœ¨JavaDocä¸­å¯¹NoClassDefFoundErrorçš„äº§ç”Ÿå¯èƒ½çš„æƒ…å†µå°±æ˜¯ä½¿ç”¨newå…³é”®å­—ã€å±æ€§å¼•ç”¨æŸä¸ªç±»ã€ç»§æ‰¿äº†æŸä¸ªæ¥å£æˆ–è€…ç±»ï¼Œä»¥åŠæ–¹æ³•çš„æŸä¸ªå‚æ•°ä¸­å¼•ç”¨äº†æŸä¸ªç±»ï¼Œè¿™æ—¶å°±ä¼šè§¦å‘JVMæˆ–è€…ç±»åŠ è½½å™¨å®ä¾‹å°è¯•åŠ è½½ç±»å‹çš„å®šä¹‰ï¼Œä½†æ˜¯è¯¥å®šä¹‰å´æ²¡æœ‰æ‰¾åˆ°ï¼Œå½±å“äº†æ‰§è¡Œè·¯å¾„ã€‚æ¢å¥è¯è¯´ï¼Œåœ¨ç¼–è¯‘æ—¶è¿™ä¸ªç±»æ˜¯èƒ½å¤Ÿè¢«æ‰¾åˆ°çš„ï¼Œä½†æ˜¯åœ¨æ‰§è¡Œæ—¶å´æ²¡æœ‰æ‰¾åˆ°ã€‚ è§£å†³è¿™ä¸ªé”™è¯¯çš„æ–¹æ³•å°±æ˜¯ç¡®ä¿æ¯ä¸ªç±»å¼•ç”¨çš„ç±»éƒ½åœ¨å½“å‰çš„classpathä¸‹é¢ã€‚ 4.3 ã€ UnsatisfiedLinkErrorè¯¥é”™è¯¯é€šå¸¸æ˜¯åœ¨ JVM å¯åŠ¨çš„æ—¶å€™ï¼Œå¦‚æœ JVM ä¸­çš„æŸä¸ª lib åˆ é™¤äº†ï¼Œå°±æœ‰å¯èƒ½æŠ¥è¿™ä¸ªé”™è¯¯ã€‚ 12345678910public class UnsatisfiedLinkErrorTest&#123; public native void nativeMethod(); static &#123; System.loadLibrary(\"NoLib\"); &#125; public static void main(String[] args) &#123; new UnsatisfiedLinkErrorTest().nativeMethod(); //è§£ænativeæ ‡è¯†çš„æ–¹æ³•æ—¶JVMæ‰¾ä¸åˆ°å¯¹åº”çš„åº“æ–‡ä»¶ &#125;&#125; 4.4 ã€ ClassCastExceptionè¯¥é”™è¯¯é€šå¸¸å‡ºç°å¼ºåˆ¶ç±»å‹è½¬æ¢æ—¶å‡ºç°è¿™ä¸ªé”™è¯¯ã€‚ 123456789101112public class ClassCastExceptionTest&#123; public static Map m = new HashMap()&#123; &#123; put(\"a\", \"2\"); &#125; &#125;; public static void main(String[] args) &#123; Integer integer = (Integer) m.get(\"a\"); //å°†må¼ºåˆ¶è½¬æ¢æˆIntegerç±»å‹ System.out.println(integer); &#125;&#125; æ³¨æ„ï¼šJVM åœ¨åšç±»å‹è½¬æ¢æ—¶çš„è§„åˆ™ï¼š å¯¹äºæ™®é€šå¯¹è±¡ï¼Œå¯¹è±¡å¿…é¡»æ˜¯ç›®æ ‡ç±»çš„å®ä¾‹æˆ–ç›®æ ‡ç±»çš„å­ç±»çš„å®ä¾‹ã€‚å¦‚æœç›®æ ‡ç±»æ˜¯æ¥å£ï¼Œé‚£ä¹ˆä¼šæŠŠå®ƒå½“ä½œå®ç°äº†è¯¥æ¥å£çš„ä¸€ä¸ªå­ç±»ã€‚ å¯¹äºæ•°ç»„ç±»å‹ï¼Œç›®æ ‡ç±»å¿…é¡»æ˜¯æ•°ç»„ç±»å‹æˆ– java.lang.Objectã€java.lang.Cloneableã€java.io.Serializableã€‚ å¦‚æœä¸æ»¡è¶³ä¸Šé¢çš„è§„åˆ™ï¼ŒJVM å°±ä¼šæŠ¥é”™ï¼Œæœ‰ä¸¤ç§æ–¹å¼å¯é¿å…é”™è¯¯ï¼š åœ¨å®¹å™¨ç±»å‹ä¸­æ˜¾å¼çš„æŒ‡æ˜è¿™ä¸ªå®¹å™¨æ‰€åŒ…å«çš„å¯¹è±¡ç±»å‹ã€‚ å…ˆé€šè¿‡ instanceof æ£€æŸ¥æ˜¯ä¸æ˜¯ç›®æ ‡ç±»å‹ï¼Œç„¶åå†è¿›è¡Œå¼ºåˆ¶ç±»å‹çš„è½¬æ¢ã€‚ ä¸Šé¢ä»£ç ä¸­æ”¹æˆå¦‚ä¸‹å°±å¯ä»¥é¿å…é”™è¯¯äº†ï¼š 4.5 ã€ ExceptionInInitializerError12345678910public class ExceptionInInitializerErrorTest&#123; public static Map m = new HashMap()&#123;&#123; m.put(\"a\", \"2\"); &#125;&#125;; public static void main(String[] args) &#123; Integer integer = (Integer) m.get(\"a\"); System.out.println(integer); &#125;&#125; åœ¨åˆå§‹åŒ–è¿™ä¸ªç±»æ—¶ï¼Œç»™é™æ€å±æ€§ m èµ‹å€¼æ—¶å‡ºç°äº†å¼‚å¸¸å¯¼è‡´æŠ›å‡ºé”™è¯¯ ExceptionInInitializerErrorã€‚ 4.6 NoSuchMethodErrorNoSuchMethodErrorä»£è¡¨è¿™ä¸ªç±»å‹ç¡®å®å­˜åœ¨ï¼Œä½†æ˜¯ä¸€ä¸ªä¸æ­£ç¡®çš„ç‰ˆæœ¬è¢«åŠ è½½äº†ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ â€˜Â­verbose:classâ€™ æ¥åˆ¤æ–­è¯¥JVMåŠ è½½çš„åˆ°åº•æ˜¯å“ªä¸ªç‰ˆæœ¬ã€‚ 4.7 LinkageErroræœ‰æ—¶å€™äº‹æƒ…ä¼šå˜å¾—æ›´ç³Ÿï¼Œå’Œ ClassCastException æœ¬è´¨ä¸€æ ·ï¼ŒåŠ è½½è‡ªä¸åŒä½ç½®çš„ç›¸åŒç±»åœ¨åŒä¸€æ®µé€»è¾‘ï¼ˆæ¯”å¦‚ï¼šæ–¹æ³•ï¼‰ä¸­äº¤äº’æ—¶ï¼Œä¼šå‡ºç° LinkageError ã€‚ LinkageError éœ€è¦è§‚å¯Ÿå“ªä¸ªç±»è¢«ä¸åŒçš„ç±»åŠ è½½å™¨åŠ è½½äº†ï¼Œåœ¨å“ªä¸ªæ–¹æ³•æˆ–è€…è°ƒç”¨å¤„å‘ç”Ÿï¼ˆäº¤æ±‡ï¼‰çš„ï¼Œç„¶åæ‰èƒ½æƒ³è§£å†³æ–¹æ³•ï¼Œè§£å†³æ–¹æ³•æ— å¤–ä¹ä¸¤ç§ã€‚ç¬¬ä¸€ï¼Œè¿˜æ˜¯ä¸åŒçš„ç±»åŠ è½½å™¨åŠ è½½ï¼Œä½†æ˜¯ç›¸äº’ä¸å†äº¤æ±‡å½±å“ï¼Œè¿™é‡Œéœ€è¦é’ˆå¯¹å‘ç”Ÿé—®é¢˜çš„åœ°æ–¹åšä¸€äº›æ”¹åŠ¨ï¼Œæ¯”å¦‚æ›´æ¢å®ç°æ–¹å¼ï¼Œé¿å…å‡ºç°ä¸Šè¿°é—®é¢˜ï¼›ç¬¬äºŒï¼Œå†²çªçš„ç±»éœ€è¦ç”±ä¸€ä¸ªParentç±»åŠ è½½å™¨è¿›è¡ŒåŠ è½½ã€‚LinkageError å’ŒClassCastException æœ¬è´¨æ˜¯ä¸€æ ·çš„ï¼ŒåŠ è½½è‡ªä¸åŒç±»åŠ è½½å™¨çš„ç±»å‹ï¼Œåœ¨åŒä¸€ä¸ªç±»çš„æ–¹æ³•æˆ–è€…è°ƒç”¨ä¸­å‡ºç°ï¼Œå¦‚æœæœ‰è½¬å‹æ“ä½œé‚£ä¹ˆå°±ä¼šæŠ› ClassCastException ï¼Œå¦‚æœæ˜¯ç›´æ¥çš„æ–¹æ³•è°ƒç”¨å¤„çš„å‚æ•°æˆ–è€…è¿”å›å€¼è§£æï¼Œé‚£ä¹ˆå°±ä¼šäº§ç”Ÿ LinkageError ã€‚ 5ã€å¸¸ç”¨çš„ ClassLoader åˆ†æã€‚ã€‚å‚è§ä¹¦ç±ã€Šæ·±å…¥åˆ†æJava WebæŠ€æœ¯å†…å¹•ã€‹ 6ã€å¦‚ä½•å®ç°è‡ªå·±çš„ ClassLoaderClassLoader èƒ½å¤Ÿå®Œæˆçš„äº‹æƒ…æœ‰ä»¥ä¸‹æƒ…å†µï¼š åœ¨è‡ªå®šä¹‰è·¯å¾„ä¸‹æŸ¥æ‰¾è‡ªå®šä¹‰çš„classç±»æ–‡ä»¶ã€‚ å¯¹æˆ‘ä»¬è‡ªå·±è¦åŠ è½½çš„ç±»åšç‰¹æ®Šå¤„ç†ã€‚ å¯ä»¥å®šä¹‰ç±»çš„å®ç°æœºåˆ¶ã€‚ è™½ç„¶åœ¨ç»å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œç³»ç»Ÿé»˜è®¤æä¾›çš„ç±»åŠ è½½å™¨å®ç°å·²ç»å¯ä»¥æ»¡è¶³éœ€æ±‚ã€‚ä½†æ˜¯åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæ‚¨è¿˜æ˜¯éœ€è¦ä¸ºåº”ç”¨å¼€å‘å‡ºè‡ªå·±çš„ç±»åŠ è½½å™¨ã€‚æ¯”å¦‚æ‚¨çš„åº”ç”¨é€šè¿‡ç½‘ç»œæ¥ä¼ è¾“ Java ç±»çš„å­—èŠ‚ä»£ç ï¼Œä¸ºäº†ä¿è¯å®‰å…¨æ€§ï¼Œè¿™äº›å­—èŠ‚ä»£ç ç»è¿‡äº†åŠ å¯†å¤„ç†ã€‚è¿™ä¸ªæ—¶å€™æ‚¨å°±éœ€è¦è‡ªå·±çš„ç±»åŠ è½½å™¨æ¥ä»æŸä¸ªç½‘ç»œåœ°å€ä¸Šè¯»å–åŠ å¯†åçš„å­—èŠ‚ä»£ç ï¼Œæ¥ç€è¿›è¡Œè§£å¯†å’ŒéªŒè¯ï¼Œæœ€åå®šä¹‰å‡ºè¦åœ¨ Java è™šæ‹Ÿæœºä¸­è¿è¡Œçš„ç±»æ¥ã€‚ å®šä¹‰è‡ªå·²çš„ç±»åŠ è½½å™¨åˆ†ä¸ºä¸¤æ­¥ï¼š1ã€ç»§æ‰¿java.lang.ClassLoader2ã€é‡å†™çˆ¶ç±»çš„findClassæ–¹æ³• 6.1 ã€æ–‡ä»¶ç³»ç»Ÿç±»åŠ è½½å™¨åŠ è½½å­˜å‚¨åœ¨æ–‡ä»¶ç³»ç»Ÿä¸Šçš„ Java å­—èŠ‚ä»£ç ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142public class FileSystemClassLoader extends ClassLoader&#123; private String rootDir; public FileSystemClassLoader(String rootDir)&#123; this.rootDir = rootDir; &#125; protected Class&lt;?&gt; findClass(String name) throws ClassNotFoundException &#123; byte[] classData = getClassData(name); if (classData == null)&#123; throw new ClassNotFoundException(); &#125; else &#123; return defineClass(name, classData, 0, classData.length); &#125; &#125; private byte[] getClassData(String className) &#123; String path = classNameToPath(className); try &#123; InputStream ins = new FileInputStream(path); ByteArrayOutputStream baos = new ByteArrayOutputStream(); int bufferSize = 4096; byte[] buffer = new byte[bufferSize]; int bytesNumRead = 0; while ((bytesNumRead = ins.read(buffer)) != -1)&#123; baos.write(buffer, 0, bytesNumRead); &#125; return baos.toByteArray(); &#125; catch (FileNotFoundException e) &#123; e.printStackTrace(); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; return null; &#125; private String classNameToPath(String className) &#123; return rootDir + File.separatorChar + className.replace('.', File.separatorChar) + \".class\"; &#125;&#125; ç±» FileSystemClassLoaderç»§æ‰¿è‡ªç±»java.lang.ClassLoaderã€‚java.lang.ClassLoaderç±»çš„æ–¹æ³•loadClass()å°è£…äº†å‰é¢æåˆ°çš„ä»£ç†æ¨¡å¼çš„å®ç°ã€‚è¯¥æ–¹æ³•ä¼šé¦–å…ˆè°ƒç”¨ findLoadedClass()æ–¹æ³•æ¥æ£€æŸ¥è¯¥ç±»æ˜¯å¦å·²ç»è¢«åŠ è½½è¿‡ï¼›å¦‚æœæ²¡æœ‰åŠ è½½è¿‡çš„è¯ï¼Œä¼šè°ƒç”¨çˆ¶ç±»åŠ è½½å™¨çš„loadClass()æ–¹æ³•æ¥å°è¯•åŠ è½½è¯¥ç±»ï¼›å¦‚æœçˆ¶ç±»åŠ è½½å™¨æ— æ³•åŠ è½½è¯¥ç±»çš„è¯ï¼Œå°±è°ƒç”¨ findClass()æ–¹æ³•æ¥æŸ¥æ‰¾è¯¥ç±»ã€‚å› æ­¤ï¼Œä¸ºäº†ä¿è¯ç±»åŠ è½½å™¨éƒ½æ­£ç¡®å®ç°ä»£ç†æ¨¡å¼ï¼Œåœ¨å¼€å‘è‡ªå·±çš„ç±»åŠ è½½å™¨æ—¶ï¼Œæœ€å¥½ä¸è¦è¦†å†™ loadClass()æ–¹æ³•ï¼Œè€Œæ˜¯è¦†å†™findClass()æ–¹æ³•ã€‚ ç±» FileSystemClassLoaderçš„ findClass()æ–¹æ³•é¦–å…ˆæ ¹æ®ç±»çš„å…¨ååœ¨ç¡¬ç›˜ä¸ŠæŸ¥æ‰¾ç±»çš„å­—èŠ‚ä»£ç æ–‡ä»¶ï¼ˆ.class æ–‡ä»¶ï¼‰ï¼Œç„¶åè¯»å–è¯¥æ–‡ä»¶å†…å®¹ï¼Œæœ€åé€šè¿‡ defineClass()æ–¹æ³•æ¥æŠŠè¿™äº›å­—èŠ‚ä»£ç è½¬æ¢æˆ java.lang.Classç±»çš„å®ä¾‹ã€‚ 6.2 ã€ ç½‘ç»œç±»åŠ è½½å™¨ä¸€ä¸ªç½‘ç»œç±»åŠ è½½å™¨æ¥è¯´æ˜å¦‚ä½•é€šè¿‡ç±»åŠ è½½å™¨æ¥å®ç°ç»„ä»¶çš„åŠ¨æ€æ›´æ–°ã€‚å³åŸºæœ¬çš„åœºæ™¯æ˜¯ï¼šJava å­—èŠ‚ä»£ç ï¼ˆ.classï¼‰æ–‡ä»¶å­˜æ”¾åœ¨æœåŠ¡å™¨ä¸Šï¼Œå®¢æˆ·ç«¯é€šè¿‡ç½‘ç»œçš„æ–¹å¼è·å–å­—èŠ‚ä»£ç å¹¶æ‰§è¡Œã€‚å½“æœ‰ç‰ˆæœ¬æ›´æ–°çš„æ—¶å€™ï¼Œåªéœ€è¦æ›¿æ¢æ‰æœåŠ¡å™¨ä¸Šä¿å­˜çš„æ–‡ä»¶å³å¯ã€‚é€šè¿‡ç±»åŠ è½½å™¨å¯ä»¥æ¯”è¾ƒç®€å•çš„å®ç°è¿™ç§éœ€æ±‚ã€‚ ç±» NetworkClassLoader è´Ÿè´£é€šè¿‡ç½‘ç»œä¸‹è½½ Java ç±»å­—èŠ‚ä»£ç å¹¶å®šä¹‰å‡º Java ç±»ã€‚å®ƒçš„å®ç°ä¸FileSystemClassLoader ç±»ä¼¼ã€‚åœ¨é€šè¿‡ NetworkClassLoader åŠ è½½äº†æŸä¸ªç‰ˆæœ¬çš„ç±»ä¹‹åï¼Œä¸€èˆ¬æœ‰ä¸¤ç§åšæ³•æ¥ä½¿ç”¨å®ƒã€‚ç¬¬ä¸€ç§åšæ³•æ˜¯ä½¿ç”¨ Java åå°„ APIã€‚å¦å¤–ä¸€ç§åšæ³•æ˜¯ä½¿ç”¨æ¥å£ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¹¶ä¸èƒ½ç›´æ¥åœ¨å®¢æˆ·ç«¯ä»£ç ä¸­å¼•ç”¨ä»æœåŠ¡å™¨ä¸Šä¸‹è½½çš„ç±»ï¼Œå› ä¸ºå®¢æˆ·ç«¯ä»£ç çš„ç±»åŠ è½½å™¨æ‰¾ä¸åˆ°è¿™äº›ç±»ã€‚ä½¿ç”¨ Java åå°„ API å¯ä»¥ç›´æ¥è°ƒç”¨ Java ç±»çš„æ–¹æ³•ã€‚è€Œä½¿ç”¨æ¥å£çš„åšæ³•åˆ™æ˜¯æŠŠæ¥å£çš„ç±»æ”¾åœ¨å®¢æˆ·ç«¯ä¸­ï¼Œä»æœåŠ¡å™¨ä¸ŠåŠ è½½å®ç°æ­¤æ¥å£çš„ä¸åŒç‰ˆæœ¬çš„ç±»ã€‚åœ¨å®¢æˆ·ç«¯é€šè¿‡ç›¸åŒçš„æ¥å£æ¥ä½¿ç”¨è¿™äº›å®ç°ç±»ã€‚ ç½‘ç»œç±»åŠ è½½å™¨çš„ä»£ç ï¼šClassLoader 7ã€ç±»åŠ è½½å™¨ä¸Webå®¹å™¨å¯¹äºè¿è¡Œåœ¨ Java EEâ„¢å®¹å™¨ä¸­çš„ Web åº”ç”¨æ¥è¯´ï¼Œç±»åŠ è½½å™¨çš„å®ç°æ–¹å¼ä¸ä¸€èˆ¬çš„ Java åº”ç”¨æœ‰æ‰€ä¸åŒã€‚ä¸åŒçš„ Web å®¹å™¨çš„å®ç°æ–¹å¼ä¹Ÿä¼šæœ‰æ‰€ä¸åŒã€‚ä»¥ Apache Tomcat æ¥è¯´ï¼Œæ¯ä¸ªWeb åº”ç”¨éƒ½æœ‰ä¸€ä¸ªå¯¹åº”çš„ç±»åŠ è½½å™¨å®ä¾‹ã€‚è¯¥ç±»åŠ è½½å™¨ä¹Ÿä½¿ç”¨ä»£ç†æ¨¡å¼ï¼Œæ‰€ä¸åŒçš„æ˜¯å®ƒæ˜¯é¦–å…ˆå°è¯•å»åŠ è½½æŸä¸ªç±»ï¼Œå¦‚æœæ‰¾ä¸åˆ°å†ä»£ç†ç»™çˆ¶ç±»åŠ è½½å™¨ã€‚è¿™ä¸ä¸€èˆ¬ç±»åŠ è½½å™¨çš„é¡ºåºæ˜¯ç›¸åçš„ã€‚è¿™æ˜¯ Java Servlet è§„èŒƒä¸­çš„æ¨èåšæ³•ï¼Œå…¶ç›®çš„æ˜¯ä½¿å¾—Web åº”ç”¨è‡ªå·±çš„ç±»çš„ä¼˜å…ˆçº§é«˜äº Web å®¹å™¨æä¾›çš„ç±»ã€‚è¿™ç§ä»£ç†æ¨¡å¼çš„ä¸€ä¸ªä¾‹å¤–æ˜¯ï¼šJava æ ¸å¿ƒåº“çš„ç±»æ˜¯ä¸åœ¨æŸ¥æ‰¾èŒƒå›´ä¹‹å†…çš„ã€‚è¿™ä¹Ÿæ˜¯ä¸ºäº†ä¿è¯ Java æ ¸å¿ƒåº“çš„ç±»å‹å®‰å…¨ã€‚ ç»å¤§å¤šæ•°æƒ…å†µä¸‹ï¼ŒWeb åº”ç”¨çš„å¼€å‘äººå‘˜ä¸éœ€è¦è€ƒè™‘ä¸ç±»åŠ è½½å™¨ç›¸å…³çš„ç»†èŠ‚ã€‚ä¸‹é¢ç»™å‡ºå‡ æ¡ç®€å•çš„åŸåˆ™ï¼š æ¯ä¸ª Web åº”ç”¨è‡ªå·±çš„ Java ç±»æ–‡ä»¶å’Œä½¿ç”¨çš„åº“çš„ jar åŒ…ï¼Œåˆ†åˆ«æ”¾åœ¨ WEB-INF/classeså’Œ WEB-INF/libç›®å½•ä¸‹é¢ã€‚ å¤šä¸ªåº”ç”¨å…±äº«çš„ Java ç±»æ–‡ä»¶å’Œ jar åŒ…ï¼Œåˆ†åˆ«æ”¾åœ¨ Web å®¹å™¨æŒ‡å®šçš„ç”±æ‰€æœ‰ Web åº”ç”¨å…±äº«çš„ç›®å½•ä¸‹é¢ã€‚ å½“å‡ºç°æ‰¾ä¸åˆ°ç±»çš„é”™è¯¯æ—¶ï¼Œæ£€æŸ¥å½“å‰ç±»çš„ç±»åŠ è½½å™¨å’Œå½“å‰çº¿ç¨‹çš„ä¸Šä¸‹æ–‡ç±»åŠ è½½å™¨æ˜¯å¦æ­£ç¡® 8ã€æ€»ç»“æœ¬ç¯‡æ–‡ç« è¯¦ç»†æ·±å…¥çš„ä»‹ç»äº† ClassLoader çš„å·¥ä½œæœºåˆ¶ï¼Œè¿˜å†™äº†å¦‚ä½•è‡ªå·±å®ç°æ‰€éœ€çš„ ClassLoader ã€‚ å‚è€ƒèµ„æ–™1ã€æ·±åº¦åˆ†æ Java çš„ ClassLoader æœºåˆ¶ï¼ˆæºç çº§åˆ«ï¼‰ 2ã€æ·±å…¥æµ…å‡ºClassLoader 3ã€æ·±å…¥æ¢è®¨ Java ç±»åŠ è½½å™¨ 4ã€æ·±å…¥åˆ†æJava ClassLoaderåŸç† 5ã€ã€Šæ·±å…¥åˆ†æ Java Web æŠ€æœ¯å†…å¹•ã€‹ä¿®è®¢ç‰ˆ â€”â€” æ·±å…¥åˆ†æ ClassLoader å·¥ä½œæœºåˆ¶","tags":[{"name":"Java","slug":"Java","permalink":"http://yoursite.com/tags/Java/"},{"name":"JVM","slug":"JVM","permalink":"http://yoursite.com/tags/JVM/"},{"name":"ç±»åŠ è½½æœºåˆ¶","slug":"ç±»åŠ è½½æœºåˆ¶","permalink":"http://yoursite.com/tags/ç±»åŠ è½½æœºåˆ¶/"}]},{"title":"é€šè¿‡é¡¹ç›®é€æ­¥æ·±å…¥äº†è§£Spring MVCï¼ˆä¸€ï¼‰","date":"2017-06-15T16:00:00.000Z","path":"2017/06/16/é€šè¿‡é¡¹ç›®é€æ­¥æ·±å…¥äº†è§£Spring MVCï¼ˆä¸€ï¼‰/","text":"ç›¸å…³é˜…è¯»ï¼šæœ¬æ–‡æ¡£å’Œé¡¹ç›®ä»£ç åœ°å€ï¼šhttps://github.com/zhisheng17/springmvc äº†è§£ Springï¼š Spring å®˜ç½‘ï¼šhttp://spring.io/ ä¸€ä¸ªå¥½çš„ä¸œè¥¿ä¸€èˆ¬éƒ½ä¼šæœ‰ä¸€ä¸ªå¥½çš„æ–‡æ¡£è§£é‡Šè¯´æ˜ï¼Œå¦‚æœä½ è‹±è¯­è¿˜è¡Œï¼Œå»ºè®®è¿˜æ˜¯çœ‹å®˜æ–¹æ–‡æ¡£ã€‚ Spring MVCåŸºç¡€çŸ¥è¯†ä»€ä¹ˆæ˜¯Spring MVCï¼Ÿ Spring MVCæ¡†æ¶åŸç†ï¼ˆæŒæ¡ï¼‰ â€‹ å‰ç«¯æ§åˆ¶å™¨ã€å¤„ç†å™¨æ˜ å°„å™¨ã€å¤„ç†å™¨é€‚é…å™¨ã€è¯•å›¾è§£æå™¨Spring MVC å…¥é—¨ç¨‹åº â€‹ ç›®çš„ï¼šå¯¹å‰ç«¯æ§åˆ¶å™¨ã€å¤„ç†å™¨æ˜ å°„å™¨ã€å¤„ç†å™¨é€‚é…å™¨ã€è¯•å›¾è§£æå™¨å­¦ä¹  â€‹ éæ³¨è§£çš„å¤„ç†å™¨æ˜ å°„å™¨ã€å¤„ç†å™¨é€‚é…å™¨ â€‹ æ³¨è§£çš„å¤„ç†å™¨æ˜ å°„å™¨ã€å¤„ç†å™¨é€‚é…å™¨ï¼ˆæŒæ¡ï¼‰ Spring MVC å’Œ Mybatis æ•´åˆï¼ˆæŒæ¡ï¼‰ Spring MVC æ³¨è§£å¼€å‘ï¼šï¼ˆæŒæ¡ï¼‰ â€‹ å¸¸ç”¨çš„æ³¨è§£å­¦ä¹  â€‹ å‚æ•°ç»‘å®šï¼ˆç®€å•ç±»å‹ï¼Œpojoç±»å‹ã€é›†åˆç±»å‹ï¼‰ â€‹ è‡ªå®šä¹‰çš„å‚æ•°ç»‘å®šï¼ˆæŒæ¡ï¼‰ Spring MVC å’Œ Struts2åŒºåˆ« Spring MVCé«˜çº§åº”ç”¨å‚æ•°ç»‘å®šï¼ˆé›†åˆç±»å‹ï¼‰ æ•°æ®å›æ˜¾ ä¸Šä¼ å›¾ç‰‡ json æ•°æ®äº¤äº’ RESTful æ”¯æŒ æ‹¦æˆªå™¨ Spring MVC æ¡†æ¶ä»€ä¹ˆæ˜¯Spring MVCï¼Ÿspringmvcæ˜¯springæ¡†æ¶çš„ä¸€ä¸ªæ¨¡å—ï¼Œspringmvcå’Œspringæ— éœ€é€šè¿‡ä¸­é—´æ•´åˆå±‚è¿›è¡Œæ•´åˆã€‚springmvcæ˜¯ä¸€ä¸ªåŸºäºmvcçš„webæ¡†æ¶ã€‚ Web MVCMVC è®¾è®¡æ¨¡å¼åœ¨ B/S ç³»ç»Ÿä¸‹åº”ç”¨ï¼š 1ã€ ç”¨æˆ·å‘èµ·requestè¯·æ±‚è‡³æ§åˆ¶å™¨(Controller) æ§åˆ¶æ¥æ”¶ç”¨æˆ·è¯·æ±‚çš„æ•°æ®ï¼Œå§”æ‰˜ç»™æ¨¡å‹è¿›è¡Œå¤„ç† 2ã€ æ§åˆ¶å™¨é€šè¿‡æ¨¡å‹(Model)å¤„ç†æ•°æ®å¹¶å¾—åˆ°å¤„ç†ç»“æœ æ¨¡å‹é€šå¸¸æ˜¯æŒ‡ä¸šåŠ¡é€»è¾‘ 3ã€ æ¨¡å‹å¤„ç†ç»“æœè¿”å›ç»™æ§åˆ¶å™¨ 4ã€ æ§åˆ¶å™¨å°†æ¨¡å‹æ•°æ®åœ¨è§†å›¾(View)ä¸­å±•ç¤º webä¸­æ¨¡å‹æ— æ³•å°†æ•°æ®ç›´æ¥åœ¨è§†å›¾ä¸Šæ˜¾ç¤ºï¼Œéœ€è¦é€šè¿‡æ§åˆ¶å™¨å®Œæˆã€‚å¦‚æœåœ¨C/Såº”ç”¨ä¸­æ¨¡å‹æ˜¯å¯ä»¥å°†æ•°æ®åœ¨è§†å›¾ä¸­å±•ç¤ºçš„ã€‚ 5ã€ æ§åˆ¶å™¨å°†è§†å›¾responseå“åº”ç»™ç”¨æˆ· é€šè¿‡è§†å›¾å±•ç¤ºç»™ç”¨æˆ·è¦çš„æ•°æ®æˆ–å¤„ç†ç»“æœã€‚ Spring MVC æ¡†æ¶ ç¬¬ä¸€æ­¥ï¼šå‘èµ·è¯·æ±‚åˆ°å‰ç«¯æ§åˆ¶å™¨(DispatcherServlet) ç¬¬äºŒæ­¥ï¼šå‰ç«¯æ§åˆ¶å™¨è¯·æ±‚HandlerMappingæŸ¥æ‰¾ Handler å¯ä»¥æ ¹æ®xmlé…ç½®ã€æ³¨è§£è¿›è¡ŒæŸ¥æ‰¾ ç¬¬ä¸‰æ­¥ï¼šå¤„ç†å™¨æ˜ å°„å™¨HandlerMappingå‘å‰ç«¯æ§åˆ¶å™¨è¿”å›Handler ç¬¬å››æ­¥ï¼šå‰ç«¯æ§åˆ¶å™¨è°ƒç”¨å¤„ç†å™¨é€‚é…å™¨å»æ‰§è¡ŒHandler ç¬¬äº”æ­¥ï¼šå¤„ç†å™¨é€‚é…å™¨å»æ‰§è¡ŒHandler ç¬¬å…­æ­¥ï¼šHandleræ‰§è¡Œå®Œæˆç»™é€‚é…å™¨è¿”å›ModelAndView ç¬¬ä¸ƒæ­¥ï¼šå¤„ç†å™¨é€‚é…å™¨å‘å‰ç«¯æ§åˆ¶å™¨è¿”å›ModelAndView ModelAndViewæ˜¯springmvcæ¡†æ¶çš„ä¸€ä¸ªåº•å±‚å¯¹è±¡ï¼ŒåŒ…æ‹¬Modelå’Œview ç¬¬å…«æ­¥ï¼šå‰ç«¯æ§åˆ¶å™¨è¯·æ±‚è§†å›¾è§£æå™¨å»è¿›è¡Œè§†å›¾è§£æ æ ¹æ®é€»è¾‘è§†å›¾åè§£ææˆçœŸæ­£çš„è§†å›¾(jsp) ç¬¬ä¹æ­¥ï¼šè§†å›¾è§£æå™¨å‘å‰ç«¯æ§åˆ¶å™¨è¿”å›View ç¬¬åæ­¥ï¼šå‰ç«¯æ§åˆ¶å™¨è¿›è¡Œè§†å›¾æ¸²æŸ“ è§†å›¾æ¸²æŸ“å°†æ¨¡å‹æ•°æ®(åœ¨ModelAndViewå¯¹è±¡ä¸­)å¡«å……åˆ°requeståŸŸ ç¬¬åä¸€æ­¥ï¼šå‰ç«¯æ§åˆ¶å™¨å‘ç”¨æˆ·å“åº”ç»“æœ ç»„ä»¶ï¼š 1ã€å‰ç«¯æ§åˆ¶å™¨DispatcherServletï¼ˆä¸éœ€è¦ç¨‹åºå‘˜å¼€å‘ï¼‰ ä½œç”¨æ¥æ”¶è¯·æ±‚ï¼Œå“åº”ç»“æœï¼Œç›¸å½“äºè½¬å‘å™¨ï¼Œä¸­å¤®å¤„ç†å™¨ã€‚ æœ‰äº†DispatcherServletå‡å°‘äº†å…¶å®ƒç»„ä»¶ä¹‹é—´çš„è€¦åˆåº¦ã€‚ 2ã€å¤„ç†å™¨æ˜ å°„å™¨HandlerMapping(ä¸éœ€è¦ç¨‹åºå‘˜å¼€å‘) ä½œç”¨ï¼šæ ¹æ®è¯·æ±‚çš„urlæŸ¥æ‰¾Handler 3ã€å¤„ç†å™¨é€‚é…å™¨HandlerAdapter ä½œç”¨ï¼šæŒ‰ç…§ç‰¹å®šè§„åˆ™ï¼ˆHandlerAdapterè¦æ±‚çš„è§„åˆ™ï¼‰å»æ‰§è¡ŒHandler 4ã€å¤„ç†å™¨Handler(éœ€è¦ç¨‹åºå‘˜å¼€å‘) æ³¨æ„ï¼šç¼–å†™Handleræ—¶æŒ‰ç…§HandlerAdapterçš„è¦æ±‚å»åšï¼Œè¿™æ ·é€‚é…å™¨æ‰å¯ä»¥å»æ­£ç¡®æ‰§è¡ŒHandler 5ã€è§†å›¾è§£æå™¨View resolver(ä¸éœ€è¦ç¨‹åºå‘˜å¼€å‘) ä½œç”¨ï¼šè¿›è¡Œè§†å›¾è§£æï¼Œæ ¹æ®é€»è¾‘è§†å›¾åè§£ææˆçœŸæ­£çš„è§†å›¾ï¼ˆviewï¼‰ 6ã€è§†å›¾View(éœ€è¦ç¨‹åºå‘˜å¼€å‘jsp) Viewæ˜¯ä¸€ä¸ªæ¥å£ï¼Œå®ç°ç±»æ”¯æŒä¸åŒçš„Viewç±»å‹ï¼ˆjspã€freemarkerã€pdfâ€¦ï¼‰","tags":[{"name":"Java","slug":"Java","permalink":"http://yoursite.com/tags/Java/"},{"name":"Spring MVC","slug":"Spring-MVC","permalink":"http://yoursite.com/tags/Spring-MVC/"}]},{"title":"é€šè¿‡é¡¹ç›®é€æ­¥æ·±å…¥äº†è§£Mybatisï¼ˆå››ï¼‰","date":"2017-06-14T16:00:00.000Z","path":"2017/06/15/é€šè¿‡é¡¹ç›®é€æ­¥æ·±å…¥äº†è§£Mybatis(å››)/","text":"ç›¸å…³é˜…è¯»ï¼š 1ã€é€šè¿‡é¡¹ç›®é€æ­¥æ·±å…¥äº†è§£Mybatis&lt;ä¸€&gt; 2ã€é€šè¿‡é¡¹ç›®é€æ­¥æ·±å…¥äº†è§£Mybatis&lt;äºŒ&gt; 3ã€é€šè¿‡é¡¹ç›®é€æ­¥æ·±å…¥äº†è§£Mybatis&lt;ä¸‰&gt; æœ¬é¡¹ç›®æ‰€æœ‰ä»£ç åŠæ–‡æ¡£éƒ½æ‰˜ç®¡åœ¨ Githubåœ°å€ï¼šhttps://github.com/zhisheng17/mybatis å»¶è¿ŸåŠ è½½ä»€ä¹ˆæ˜¯å»¶è¿ŸåŠ è½½ï¼ŸresultMapå¯ä»¥å®ç°é«˜çº§æ˜ å°„ï¼ˆä½¿ç”¨associationã€collectionå®ç°ä¸€å¯¹ä¸€åŠä¸€å¯¹å¤šæ˜ å°„ï¼‰ï¼Œassociationã€collectionå…·å¤‡å»¶è¿ŸåŠ è½½åŠŸèƒ½ã€‚éœ€æ±‚ï¼šå¦‚æœæŸ¥è¯¢è®¢å•å¹¶ä¸”å…³è”æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯ã€‚å¦‚æœå…ˆæŸ¥è¯¢è®¢å•ä¿¡æ¯å³å¯æ»¡è¶³è¦æ±‚ï¼Œå½“æˆ‘ä»¬éœ€è¦æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯æ—¶å†æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯ã€‚æŠŠå¯¹ç”¨æˆ·ä¿¡æ¯çš„æŒ‰éœ€å»æŸ¥è¯¢å°±æ˜¯å»¶è¿ŸåŠ è½½ã€‚ å»¶è¿ŸåŠ è½½ï¼šå…ˆä»å•è¡¨æŸ¥è¯¢ã€éœ€è¦æ—¶å†ä»å…³è”è¡¨å»å…³è”æŸ¥è¯¢ï¼Œå¤§å¤§æé«˜ æ•°æ®åº“æ€§èƒ½ï¼Œå› ä¸ºæŸ¥è¯¢å•è¡¨è¦æ¯”å…³è”æŸ¥è¯¢å¤šå¼ è¡¨é€Ÿåº¦è¦å¿«ã€‚ æ‰“å¼€å»¶è¿ŸåŠ è½½å¼€å…³åœ¨mybatisæ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­é…ç½®ï¼š lazyLoadingEnabledã€aggressiveLazyLoading è®¾ç½®é¡¹ æè¿° å…è®¸å€¼ é»˜è®¤å€¼ lazyLoadingEnabled å…¨å±€æ€§è®¾ç½®æ‡’åŠ è½½ã€‚å¦‚æœè®¾ä¸ºâ€˜falseâ€™ï¼Œåˆ™æ‰€æœ‰ç›¸å…³è”çš„éƒ½ä¼šè¢«åˆå§‹åŒ–åŠ è½½ã€‚ true \\ false false aggressiveLazyLoading å½“è®¾ç½®ä¸ºâ€˜trueâ€™çš„æ—¶å€™ï¼Œæ‡’åŠ è½½çš„å¯¹è±¡å¯èƒ½è¢«ä»»ä½•æ‡’å±æ€§å…¨éƒ¨åŠ è½½ã€‚å¦åˆ™ï¼Œæ¯ä¸ªå±æ€§éƒ½æŒ‰éœ€åŠ è½½ã€‚ true \\ false true 1234&lt;settings&gt; &lt;setting name=\"lazyLoadingEnabled\" value=\"true\"/&gt; &lt;setting name=\"aggressiveLazyLoading\" value=\"false\"/&gt;&lt;/settings&gt; ä½¿ç”¨ association å®ç°å»¶è¿ŸåŠ è½½éœ€æ±‚ï¼šæŸ¥è¯¢è®¢å•å¹¶ä¸”å…³è”æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯ Mapper.xmléœ€è¦å®šä¹‰ä¸¤ä¸ª mapper çš„æ–¹æ³•å¯¹åº”çš„ statementã€‚ 1ã€åªæŸ¥è¯¢è®¢å•ä¿¡æ¯ SQL è¯­å¥ï¼š select * from orders åœ¨æŸ¥è¯¢è®¢å•çš„ statement ä¸­ä½¿ç”¨ association å»å»¶è¿ŸåŠ è½½ï¼ˆæ‰§è¡Œï¼‰ä¸‹è¾¹çš„ statement (å…³è”æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯) 1234&lt;!--æŸ¥è¯¢è®¢å•å¹¶ä¸”å…³è”æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯ï¼Œå…³è”ç”¨æˆ·ä¿¡æ¯éœ€è¦é€šè¿‡ association å»¶è¿ŸåŠ è½½--&gt; &lt;select id=\"findOrdersUserLazyLoading\" resultMap=\"OrdersUserLazyLoadingResultMap\"&gt; select * from orders &lt;/select&gt; 2ã€å…³è”æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯ é€šè¿‡ä¸Šé¢æŸ¥è¯¢è®¢å•ä¿¡æ¯ä¸­çš„ user_id æ¥å…³è”æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯ã€‚ä½¿ç”¨ UserMapper.xml ä¸­çš„ findUserById SQLè¯­å¥ï¼šselect * from user where id = user_id 123&lt;select id=\"findUserById\" parameterType=\"int\" resultType=\"user\"&gt; select * from user where id = #&#123;value&#125; &lt;/select&gt; ä¸Šè¾¹å…ˆå»æ‰§è¡Œ findOrdersUserLazyLoadingï¼Œå½“éœ€è¦å»æŸ¥è¯¢ç”¨æˆ·çš„æ—¶å€™å†å»æ‰§è¡Œ findUserById ï¼Œé€šè¿‡ resultMapçš„å®šä¹‰å°†å»¶è¿ŸåŠ è½½æ‰§è¡Œé…ç½®èµ·æ¥ã€‚ä¹Ÿå°±æ˜¯é€šè¿‡ resultMap å»åŠ è½½ UserMapper.xml æ–‡ä»¶ä¸­çš„ select = findUserById å»¶è¿ŸåŠ è½½çš„ resultMap1234567891011121314151617181920&lt;!--å®šä¹‰ å…³è”ç”¨æˆ·ä¿¡æ¯ï¼ˆé€šè¿‡ association å»¶è¿ŸåŠ è½½ï¼‰çš„resultMap--&gt; &lt;resultMap id=\"OrdersUserLazyLoadingResultMap\" type=\"cn.zhisheng.mybatis.po.Orders\"&gt; &lt;!--å¯¹è®¢å•ä¿¡æ¯æ˜ å°„--&gt; &lt;id column=\"id\" property=\"id\"/&gt; &lt;result column=\"user_id\" property=\"userId\"/&gt; &lt;result column=\"number\" property=\"number\"/&gt; &lt;result column=\"createtime\" property=\"createtime\"/&gt; &lt;result column=\"note\" property=\"note\"/&gt; &lt;!-- å®ç°å¯¹ç”¨æˆ·ä¿¡æ¯è¿›è¡Œå»¶è¿ŸåŠ è½½ selectï¼šæŒ‡å®šå»¶è¿ŸåŠ è½½éœ€è¦æ‰§è¡Œçš„statementçš„idï¼ˆæ˜¯æ ¹æ®user_idæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯çš„statementï¼‰ è¦ä½¿ç”¨userMapper.xmlä¸­findUserByIdå®Œæˆæ ¹æ®ç”¨æˆ·id(user_id)ç”¨æˆ·ä¿¡æ¯çš„æŸ¥è¯¢ï¼Œå¦‚æœfindUserByIdä¸åœ¨æœ¬mapperä¸­éœ€è¦å‰è¾¹åŠ namespace columnï¼šè®¢å•ä¿¡æ¯ä¸­å…³è”ç”¨æˆ·ä¿¡æ¯æŸ¥è¯¢çš„åˆ—ï¼Œæ˜¯user_id å…³è”æŸ¥è¯¢çš„sqlç†è§£ä¸ºï¼š SELECT orders.*, (SELECT username FROM USER WHERE orders.user_id = user.id)username, (SELECT sex FROM USER WHERE orders.user_id = user.id)sex FROM orders--&gt; &lt;association property=\"user\" javaType=\"cn.zhisheng.mybatis.po.User\" select=\"cn.zhisheng.mybatis.mapper.UserMapper.findUserById\" column=\"user_id\"&gt; &lt;/association&gt; &lt;/resultMap&gt; OrderMapperCustom.java1public List&lt;Orders&gt; findOrdersUserLazyLoading() throws Exception; æµ‹è¯•ä»£ç ï¼š1234567891011121314151617@Test public void testFindOrdersUserLazyLoading() throws Exception &#123; SqlSession sqlSession = sqlSessionFactory.openSession(); //åˆ›å»ºOrdersMapperCustomå¯¹è±¡,mybatisè‡ªåŠ¨ç”Ÿæˆä»£ç†å¯¹è±¡ OrdersMapperCustom ordersMapperCustom = sqlSession.getMapper(OrdersMapperCustom.class); //æŸ¥è¯¢è®¢å•ä¿¡æ¯ List&lt;Orders&gt; list = ordersMapperCustom.findOrdersUserLazyLoading(); //éå†æ‰€æŸ¥è¯¢çš„çš„è®¢å•ä¿¡æ¯ for (Orders orders : list) &#123; //æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯ User user = orders.getUser(); System.out.println(user); &#125; sqlSession.close(); &#125; æµ‹è¯•ç»“æœï¼š æ•´ä¸ªå»¶è¿ŸåŠ è½½çš„æ€è·¯ï¼š 1ã€æ‰§è¡Œä¸Šè¾¹mapperæ–¹æ³•ï¼ˆfindOrdersUserLazyLoadingï¼‰ï¼Œå†…éƒ¨å»è°ƒç”¨cn.zhisheng.mybatis.mapper.OrdersMapperCustom ä¸­çš„ findOrdersUserLazyLoading åªæŸ¥è¯¢ orders ä¿¡æ¯ï¼ˆå•è¡¨ï¼‰ã€‚ 2ã€åœ¨ç¨‹åºä¸­å»éå†ä¸Šä¸€æ­¥éª¤æŸ¥è¯¢å‡ºçš„ Listï¼Œå½“æˆ‘ä»¬è°ƒç”¨ Orders ä¸­çš„ getUser æ–¹æ³•æ—¶ï¼Œå¼€å§‹è¿›è¡Œå»¶è¿ŸåŠ è½½ã€‚ 3ã€å»¶è¿ŸåŠ è½½ï¼Œå»è°ƒç”¨ UserMapper.xml ä¸­ findUserbyId è¿™ä¸ªæ–¹æ³•è·å–ç”¨æˆ·ä¿¡æ¯ã€‚ æ€è€ƒï¼šä¸ä½¿ç”¨ mybatis æä¾›çš„ association åŠ collection ä¸­çš„å»¶è¿ŸåŠ è½½åŠŸèƒ½ï¼Œå¦‚ä½•å®ç°å»¶è¿ŸåŠ è½½ï¼Ÿï¼Ÿ å®ç°æ–¹æ³•å¦‚ä¸‹ï¼š å®šä¹‰ä¸¤ä¸ªmapperæ–¹æ³•ï¼š 1ã€æŸ¥è¯¢è®¢å•åˆ—è¡¨ 2ã€æ ¹æ®ç”¨æˆ·idæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯ å®ç°æ€è·¯ï¼š å…ˆå»æŸ¥è¯¢ç¬¬ä¸€ä¸ªmapperæ–¹æ³•ï¼Œè·å–è®¢å•ä¿¡æ¯åˆ—è¡¨ åœ¨ç¨‹åºä¸­ï¼ˆserviceï¼‰ï¼ŒæŒ‰éœ€å»è°ƒç”¨ç¬¬äºŒä¸ªmapperæ–¹æ³•å»æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯ã€‚ æ€»ä¹‹ï¼š ä½¿ç”¨å»¶è¿ŸåŠ è½½æ–¹æ³•ï¼Œå…ˆå»æŸ¥è¯¢ ç®€å•çš„ sqlï¼ˆæœ€å¥½å•è¡¨ï¼Œä¹Ÿå¯ä»¥å…³è”æŸ¥è¯¢ï¼‰ï¼Œå†å»æŒ‰éœ€è¦åŠ è½½å…³è”æŸ¥è¯¢çš„å…¶å®ƒä¿¡æ¯ã€‚ ä¸€å¯¹å¤šå»¶è¿ŸåŠ è½½ä¸Šé¢çš„é‚£ä¸ªæ¡ˆä¾‹æ˜¯ä¸€å¯¹ä¸€å»¶è¿ŸåŠ è½½ï¼Œé‚£ä¹ˆå¦‚æœæˆ‘ä»¬æƒ³ä¸€å¯¹å¤šè¿›è¡Œå»¶è¿ŸåŠ è½½å‘¢ï¼Œå…¶å®ä¹Ÿæ˜¯å¾ˆç®€å•çš„ã€‚ ä¸€å¯¹å¤šå»¶è¿ŸåŠ è½½çš„æ–¹æ³•åŒä¸€å¯¹ä¸€å»¶è¿ŸåŠ è½½ï¼Œåœ¨collectionæ ‡ç­¾ä¸­é…ç½®selectå†…å®¹ã€‚ å»¶è¿ŸåŠ è½½æ€»ç»“ï¼šä½œç”¨ï¼š å½“éœ€è¦æŸ¥è¯¢å…³è”ä¿¡æ¯æ—¶å†å»æ•°æ®åº“æŸ¥è¯¢ï¼Œé»˜è®¤ä¸å»å…³è”æŸ¥è¯¢ï¼Œæé«˜æ•°æ®åº“æ€§èƒ½ã€‚åªæœ‰ä½¿ç”¨resultMapæ”¯æŒå»¶è¿ŸåŠ è½½è®¾ç½®ã€‚ åœºåˆï¼š å½“åªæœ‰éƒ¨åˆ†è®°å½•éœ€è¦å…³è”æŸ¥è¯¢å…¶å®ƒä¿¡æ¯æ—¶ï¼Œæ­¤æ—¶å¯æŒ‰éœ€å»¶è¿ŸåŠ è½½ï¼Œéœ€è¦å…³è”æŸ¥è¯¢æ—¶å†å‘æ•°æ®åº“å‘å‡ºsqlï¼Œä»¥æé«˜æ•°æ®åº“æ€§èƒ½ã€‚ å½“å…¨éƒ¨éœ€è¦å…³è”æŸ¥è¯¢ä¿¡æ¯æ—¶ï¼Œæ­¤æ—¶ä¸ç”¨å»¶è¿ŸåŠ è½½ï¼Œç›´æ¥å°†å…³è”æŸ¥è¯¢ä¿¡æ¯å…¨éƒ¨è¿”å›å³å¯ï¼Œå¯ä½¿ç”¨resultTypeæˆ–resultMapå®Œæˆæ˜ å°„ã€‚ æŸ¥è¯¢ç¼“å­˜ä»€ä¹ˆæ˜¯æŸ¥è¯¢ç¼“å­˜ï¼Ÿmybatisæä¾›æŸ¥è¯¢ç¼“å­˜ï¼Œç”¨äºå‡è½»æ•°æ®å‹åŠ›ï¼Œæé«˜æ•°æ®åº“æ€§èƒ½ã€‚ mybaitsæä¾›ä¸€çº§ç¼“å­˜ï¼Œå’ŒäºŒçº§ç¼“å­˜ã€‚ ä¸€çº§ç¼“å­˜æ˜¯SqlSessionçº§åˆ«çš„ç¼“å­˜ã€‚åœ¨æ“ä½œæ•°æ®åº“æ—¶éœ€è¦æ„é€  sqlSessionå¯¹è±¡ï¼Œåœ¨å¯¹è±¡ä¸­æœ‰ä¸€ä¸ªæ•°æ®ç»“æ„ï¼ˆHashMapï¼‰ç”¨äºå­˜å‚¨ç¼“å­˜æ•°æ®ã€‚ä¸åŒçš„sqlSessionä¹‹é—´çš„ç¼“å­˜æ•°æ®åŒºåŸŸï¼ˆHashMapï¼‰æ˜¯äº’ç›¸ä¸å½±å“çš„ã€‚ äºŒçº§ç¼“å­˜æ˜¯mapperçº§åˆ«çš„ç¼“å­˜ï¼Œå¤šä¸ªSqlSessionå»æ“ä½œåŒä¸€ä¸ªMapperçš„sqlè¯­å¥ï¼Œå¤šä¸ªSqlSessionå¯ä»¥å…±ç”¨äºŒçº§ç¼“å­˜ï¼ŒäºŒçº§ç¼“å­˜æ˜¯è·¨SqlSessionçš„ã€‚ ä¸ºä»€ä¹ˆè¦ç”¨ç¼“å­˜ï¼Ÿ å¦‚æœç¼“å­˜ä¸­æœ‰æ•°æ®å°±ä¸ç”¨ä»æ•°æ®åº“ä¸­è·å–ï¼Œå¤§å¤§æé«˜ç³»ç»Ÿæ€§èƒ½ã€‚ ä¸€çº§ç¼“å­˜å·¥ä½œåŸç†ï¼š ç¬¬ä¸€æ¬¡å‘èµ·æŸ¥è¯¢ç”¨æˆ·idä¸º1çš„ç”¨æˆ·ä¿¡æ¯ï¼Œå…ˆå»æ‰¾ç¼“å­˜ä¸­æ˜¯å¦æœ‰idä¸º1çš„ç”¨æˆ·ä¿¡æ¯ï¼Œå¦‚æœæ²¡æœ‰ï¼Œä»æ•°æ®åº“æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯ã€‚ å¾—åˆ°ç”¨æˆ·ä¿¡æ¯ï¼Œå°†ç”¨æˆ·ä¿¡æ¯å­˜å‚¨åˆ°ä¸€çº§ç¼“å­˜ä¸­ã€‚ å¦‚æœsqlSessionå»æ‰§è¡Œcommitæ“ä½œï¼ˆæ‰§è¡Œæ’å…¥ã€æ›´æ–°ã€åˆ é™¤ï¼‰ï¼Œæ¸…ç©ºSqlSessionä¸­çš„ä¸€çº§ç¼“å­˜ï¼Œè¿™æ ·åšçš„ç›®çš„ä¸ºäº†è®©ç¼“å­˜ä¸­å­˜å‚¨çš„æ˜¯æœ€æ–°çš„ä¿¡æ¯ï¼Œé¿å…è„è¯»ã€‚ ç¬¬äºŒæ¬¡å‘èµ·æŸ¥è¯¢ç”¨æˆ·idä¸º1çš„ç”¨æˆ·ä¿¡æ¯ï¼Œå…ˆå»æ‰¾ç¼“å­˜ä¸­æ˜¯å¦æœ‰idä¸º1çš„ç”¨æˆ·ä¿¡æ¯ï¼Œç¼“å­˜ä¸­æœ‰ï¼Œç›´æ¥ä»ç¼“å­˜ä¸­è·å–ç”¨æˆ·ä¿¡æ¯ã€‚ ä¸€çº§ç¼“å­˜æµ‹è¯• Mybatis é»˜è®¤æ”¯æŒä¸€çº§ç¼“å­˜ï¼Œä¸éœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®ã€‚ æ‰€ä»¥æˆ‘ä»¬ç›´æ¥æŒ‰ç…§ä¸Šé¢çš„æ­¥éª¤è¿›è¡Œæµ‹è¯•ï¼š 123456789101112131415//ä¸€çº§ç¼“å­˜æµ‹è¯• @Test public void testCache1() throws Exception &#123; SqlSession sqlSession = sqlSessionFactory.openSession(); //åˆ›å»ºUserMapperå¯¹è±¡,mybatisè‡ªåŠ¨ç”Ÿæˆä»£ç†å¯¹è±¡ UserMapper userMapper = sqlSession.getMapper(UserMapper.class); //æŸ¥è¯¢ä½¿ç”¨çš„æ˜¯åŒä¸€ä¸ªsession //ç¬¬ä¸€æ¬¡å‘èµ·è¯·æ±‚ï¼ŒæŸ¥è¯¢Id ä¸º1çš„ç”¨æˆ·ä¿¡æ¯ User user1 = userMapper.findUserById(1); System.out.println(user1); //ç¬¬äºŒæ¬¡å‘èµ·è¯·æ±‚ï¼ŒæŸ¥è¯¢Id ä¸º1çš„ç”¨æˆ·ä¿¡æ¯ User user2 = userMapper.findUserById(1); System.out.println(user2); sqlSession.close(); &#125; é€šè¿‡ç»“æœå¯ä»¥çœ‹å‡ºç¬¬äºŒæ¬¡æ²¡æœ‰å‘å‡ºsqlæŸ¥è¯¢è¯·æ±‚ï¼Œ æ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨ä¸­é—´æ‰§è¡Œ commit æ“ä½œ 123456789//å¦‚æœsqlSessionå»æ‰§è¡Œcommitæ“ä½œï¼ˆæ‰§è¡Œæ’å…¥ã€æ›´æ–°ã€åˆ é™¤ï¼‰ï¼Œ// æ¸…ç©ºSqlSessionä¸­çš„ä¸€çº§ç¼“å­˜ï¼Œè¿™æ ·åšçš„ç›®çš„ä¸ºäº†è®©ç¼“å­˜ä¸­å­˜å‚¨çš„æ˜¯æœ€æ–°çš„ä¿¡æ¯ï¼Œé¿å…è„è¯»ã€‚//æ›´æ–°user1çš„ä¿¡æ¯ï¼Œuser1.setUsername(\"æé£\");//user1.setSex(\"ç”·\");//user1.setAddress(\"åŒ—äº¬\");userMapper.updateUserById(user1);//æäº¤äº‹åŠ¡,æ‰ä¼šå»æ¸…ç©ºç¼“å­˜sqlSession.commit(); æµ‹è¯• ä¸€çº§ç¼“å­˜åº”ç”¨ æ­£å¼å¼€å‘ï¼Œæ˜¯å°† mybatis å’Œ spring è¿›è¡Œæ•´åˆå¼€å‘ï¼Œäº‹åŠ¡æ§åˆ¶åœ¨ service ä¸­ã€‚ ä¸€ä¸ª service æ–¹æ³•ä¸­åŒ…æ‹¬å¾ˆå¤š mapper æ–¹æ³•è°ƒç”¨ã€‚ service{ //å¼€å§‹æ‰§è¡Œæ—¶ï¼Œå¼€å¯äº‹åŠ¡ï¼Œåˆ›å»ºSqlSessionå¯¹è±¡ //ç¬¬ä¸€æ¬¡è°ƒç”¨mapperçš„æ–¹æ³•findUserById(1) //ç¬¬äºŒæ¬¡è°ƒç”¨mapperçš„æ–¹æ³•findUserById(1)ï¼Œä»ä¸€çº§ç¼“å­˜ä¸­å–æ•°æ® //æ–¹æ³•ç»“æŸï¼ŒsqlSessionå…³é—­ } å¦‚æœæ˜¯æ‰§è¡Œä¸¤æ¬¡serviceè°ƒç”¨æŸ¥è¯¢ç›¸åŒçš„ç”¨æˆ·ä¿¡æ¯ï¼Œä¸èµ°ä¸€çº§ç¼“å­˜ï¼Œå› ä¸ºsessionæ–¹æ³•ç»“æŸï¼ŒsqlSessionå°±å…³é—­ï¼Œä¸€çº§ç¼“å­˜å°±æ¸…ç©ºã€‚ äºŒçº§ç¼“å­˜åŸç† é¦–å…ˆå¼€å¯mybatisçš„äºŒçº§ç¼“å­˜ã€‚ sqlSession1å»æŸ¥è¯¢ç”¨æˆ·idä¸º1çš„ç”¨æˆ·ä¿¡æ¯ï¼ŒæŸ¥è¯¢åˆ°ç”¨æˆ·ä¿¡æ¯ä¼šå°†æŸ¥è¯¢æ•°æ®å­˜å‚¨åˆ°äºŒçº§ç¼“å­˜ä¸­ã€‚ å¦‚æœSqlSession3å»æ‰§è¡Œç›¸åŒ mapperä¸‹sqlï¼Œæ‰§è¡Œcommitæäº¤ï¼Œæ¸…ç©ºè¯¥ mapperä¸‹çš„äºŒçº§ç¼“å­˜åŒºåŸŸçš„æ•°æ®ã€‚ sqlSession2å»æŸ¥è¯¢ç”¨æˆ·idä¸º1çš„ç”¨æˆ·ä¿¡æ¯ï¼Œå»ç¼“å­˜ä¸­æ‰¾æ˜¯å¦å­˜åœ¨æ•°æ®ï¼Œå¦‚æœå­˜åœ¨ç›´æ¥ä»ç¼“å­˜ä¸­å–å‡ºæ•°æ®ã€‚ äºŒçº§ç¼“å­˜ä¸ä¸€çº§ç¼“å­˜åŒºåˆ«ï¼ŒäºŒçº§ç¼“å­˜çš„èŒƒå›´æ›´å¤§ï¼Œå¤šä¸ªsqlSessionå¯ä»¥å…±äº«ä¸€ä¸ªUserMapperçš„äºŒçº§ç¼“å­˜åŒºåŸŸã€‚ UserMapperæœ‰ä¸€ä¸ªäºŒçº§ç¼“å­˜åŒºåŸŸï¼ˆæŒ‰namespaceåˆ†ï¼‰ ï¼Œå…¶å®ƒmapperä¹Ÿæœ‰è‡ªå·±çš„äºŒçº§ç¼“å­˜åŒºåŸŸï¼ˆæŒ‰namespaceåˆ†ï¼‰ã€‚ æ¯ä¸€ä¸ªnamespaceçš„mapperéƒ½æœ‰ä¸€ä¸ªäºŒç¼“å­˜åŒºåŸŸï¼Œä¸¤ä¸ªmapperçš„namespaceå¦‚æœç›¸åŒï¼Œè¿™ä¸¤ä¸ªmapperæ‰§è¡ŒsqlæŸ¥è¯¢åˆ°æ•°æ®å°†å­˜åœ¨ç›¸åŒçš„äºŒçº§ç¼“å­˜åŒºåŸŸä¸­ã€‚ å¼€å¯äºŒçº§ç¼“å­˜ï¼š mybaitsçš„äºŒçº§ç¼“å­˜æ˜¯mapperèŒƒå›´çº§åˆ«ï¼Œé™¤äº†åœ¨SqlMapConfig.xmlè®¾ç½®äºŒçº§ç¼“å­˜çš„æ€»å¼€å…³ï¼Œè¿˜è¦åœ¨å…·ä½“çš„mapper.xmlä¸­å¼€å¯äºŒçº§ç¼“å­˜ åœ¨ SqlMapConfig.xml å¼€å¯äºŒçº§å¼€å…³ 12&lt;!-- å¼€å¯äºŒçº§ç¼“å­˜ --&gt;&lt;setting name=\"cacheEnabled\" value=\"true\"/&gt; ç„¶ååœ¨ä½ çš„ Mapper æ˜ å°„æ–‡ä»¶ä¸­æ·»åŠ ä¸€è¡Œï¼š ï¼Œè¡¨ç¤ºæ­¤ mapper å¼€å¯äºŒçº§ç¼“å­˜ã€‚ è°ƒç”¨ pojo ç±»å®ç°åºåˆ—åŒ–æ¥å£ï¼š äºŒçº§ç¼“å­˜éœ€è¦æŸ¥è¯¢ç»“æœæ˜ å°„çš„pojoå¯¹è±¡å®ç°java.io.Serializableæ¥å£å®ç°åºåˆ—åŒ–å’Œååºåˆ—åŒ–æ“ä½œï¼ˆå› ä¸ºäºŒçº§ç¼“å­˜æ•°æ®å­˜å‚¨ä»‹è´¨å¤šç§å¤šæ ·ï¼Œåœ¨å†…å­˜ä¸ä¸€æ ·ï¼‰ï¼Œæ³¨æ„å¦‚æœå­˜åœ¨çˆ¶ç±»ã€æˆå‘˜pojoéƒ½éœ€è¦å®ç°åºåˆ—åŒ–æ¥å£ã€‚ 12public class Orders implements Serializablepublic class User implements Serializable æµ‹è¯• 12345678910111213141516171819202122232425262728293031323334//äºŒçº§ç¼“å­˜æµ‹è¯• @Test public void testCache2() throws Exception &#123; SqlSession sqlSession1 = sqlSessionFactory.openSession(); SqlSession sqlSession2 = sqlSessionFactory.openSession(); SqlSession sqlSession3 = sqlSessionFactory.openSession(); //åˆ›å»ºUserMapperå¯¹è±¡,mybatisè‡ªåŠ¨ç”Ÿæˆä»£ç†å¯¹è±¡ UserMapper userMapper1 = sqlSession1.getMapper(UserMapper.class); //sqlSession1 æ‰§è¡ŒæŸ¥è¯¢ å†™å…¥ç¼“å­˜(ç¬¬ä¸€æ¬¡æŸ¥è¯¢è¯·æ±‚) User user1 = userMapper1.findUserById(1); System.out.println(user1); sqlSession1.close(); //sqlSession3 æ‰§è¡Œæäº¤ æ¸…ç©ºç¼“å­˜ UserMapper userMapper3 = sqlSession3.getMapper(UserMapper.class); User user3 = userMapper3.findUserById(1); user3.setSex(\"å¥³\"); user3.setAddress(\"å±±ä¸œæµå—\"); user3.setUsername(\"å´”å»º\"); userMapper3.updateUserById(user3); //æäº¤äº‹åŠ¡ï¼Œæ¸…ç©ºç¼“å­˜ sqlSession3.commit(); sqlSession3.close(); //sqlSession2 æ‰§è¡ŒæŸ¥è¯¢(ç¬¬äºŒæ¬¡æŸ¥è¯¢è¯·æ±‚) UserMapper userMapper2 = sqlSession2.getMapper(UserMapper.class); User user2 = userMapper2.findUserById(1); System.out.println(user2); sqlSession2.close(); &#125; ç»“æœï¼š useCache é…ç½® åœ¨ statement ä¸­è®¾ç½® useCache=false å¯ä»¥ç¦ç”¨å½“å‰ select è¯­å¥çš„äºŒçº§ç¼“å­˜ï¼Œå³æ¯æ¬¡æŸ¥è¯¢éƒ½ä¼šå‘å‡ºsqlå»æŸ¥è¯¢ï¼Œé»˜è®¤æƒ…å†µæ˜¯trueï¼Œå³è¯¥sqlä½¿ç”¨äºŒçº§ç¼“å­˜ã€‚ 1&lt;select id=\"findUserById\" parameterType=\"int\" resultType=\"user\" useCache=\"false\"&gt; æ€»ç»“ï¼šé’ˆå¯¹æ¯æ¬¡æŸ¥è¯¢éƒ½éœ€è¦æœ€æ–°çš„æ•°æ®sqlï¼Œè¦è®¾ç½®æˆuseCache=falseï¼Œç¦ç”¨äºŒçº§ç¼“å­˜ã€‚ åˆ·æ–°ç¼“å­˜ï¼ˆæ¸…ç©ºç¼“å­˜ï¼‰ åœ¨mapperçš„åŒä¸€ä¸ªnamespaceä¸­ï¼Œå¦‚æœæœ‰å…¶å®ƒinsertã€updateã€deleteæ“ä½œæ•°æ®åéœ€è¦åˆ·æ–°ç¼“å­˜ï¼Œå¦‚æœä¸æ‰§è¡Œåˆ·æ–°ç¼“å­˜ä¼šå‡ºç°è„è¯»ã€‚ è®¾ç½®statementé…ç½®ä¸­çš„flushCache=â€trueâ€ å±æ€§ï¼Œé»˜è®¤æƒ…å†µä¸‹ä¸ºtrueå³åˆ·æ–°ç¼“å­˜ï¼Œå¦‚æœæ”¹æˆfalseåˆ™ä¸ä¼šåˆ·æ–°ã€‚ä½¿ç”¨ç¼“å­˜æ—¶å¦‚æœæ‰‹åŠ¨ä¿®æ”¹æ•°æ®åº“è¡¨ä¸­çš„æŸ¥è¯¢æ•°æ®ä¼šå‡ºç°è„è¯»ã€‚ å¦‚ä¸‹ï¼š 1&lt;insert id=\"insetrUser\" parameterType=\"cn.zhisheng.mybatis.po.User\" flushCache=\"true\"&gt; ä¸€èˆ¬ä¸‹æ‰§è¡Œå®Œcommitæ“ä½œéƒ½éœ€è¦åˆ·æ–°ç¼“å­˜ï¼ŒflushCache=trueè¡¨ç¤ºåˆ·æ–°ç¼“å­˜ï¼Œè¿™æ ·å¯ä»¥é¿å…æ•°æ®åº“è„è¯»ã€‚ Mybatis Cacheå‚æ•°flushIntervalï¼ˆåˆ·æ–°é—´éš”ï¼‰å¯ä»¥è¢«è®¾ç½®ä¸ºä»»æ„çš„æ­£æ•´æ•°ï¼Œè€Œä¸”å®ƒä»¬ä»£è¡¨ä¸€ä¸ªåˆç†çš„æ¯«ç§’å½¢å¼çš„æ—¶é—´æ®µã€‚é»˜è®¤æƒ…å†µæ˜¯ä¸è®¾ç½®ï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰åˆ·æ–°é—´éš”ï¼Œç¼“å­˜ä»…ä»…è°ƒç”¨è¯­å¥æ—¶åˆ·æ–°ã€‚ sizeï¼ˆå¼•ç”¨æ•°ç›®ï¼‰å¯ä»¥è¢«è®¾ç½®ä¸ºä»»æ„æ­£æ•´æ•°ï¼Œè¦è®°ä½ä½ ç¼“å­˜çš„å¯¹è±¡æ•°ç›®å’Œä½ è¿è¡Œç¯å¢ƒçš„å¯ç”¨å†…å­˜èµ„æºæ•°ç›®ã€‚é»˜è®¤å€¼æ˜¯1024ã€‚ readOnlyï¼ˆåªè¯»ï¼‰å±æ€§å¯ä»¥è¢«è®¾ç½®ä¸ºtrueæˆ–falseã€‚åªè¯»çš„ç¼“å­˜ä¼šç»™æ‰€æœ‰è°ƒç”¨è€…è¿”å›ç¼“å­˜å¯¹è±¡çš„ç›¸åŒå®ä¾‹ã€‚å› æ­¤è¿™äº›å¯¹è±¡ä¸èƒ½è¢«ä¿®æ”¹ã€‚è¿™æä¾›äº†å¾ˆé‡è¦çš„æ€§èƒ½ä¼˜åŠ¿ã€‚å¯è¯»å†™çš„ç¼“å­˜ä¼šè¿”å›ç¼“å­˜å¯¹è±¡çš„æ‹·è´ï¼ˆé€šè¿‡åºåˆ—åŒ–ï¼‰ã€‚è¿™ä¼šæ…¢ä¸€äº›ï¼Œä½†æ˜¯å®‰å…¨ï¼Œå› æ­¤é»˜è®¤æ˜¯falseã€‚ å¦‚ä¸‹ä¾‹å­ï¼š 1&lt;cache eviction=\"FIFO\" flushInterval=\"60000\" size=\"512\" readOnly=\"true\"/&gt; è¿™ä¸ªæ›´é«˜çº§çš„é…ç½®åˆ›å»ºäº†ä¸€ä¸ª FIFO ç¼“å­˜,å¹¶æ¯éš” 60 ç§’åˆ·æ–°,å­˜æ•°ç»“æœå¯¹è±¡æˆ–åˆ—è¡¨çš„ 512 ä¸ªå¼•ç”¨,è€Œä¸”è¿”å›çš„å¯¹è±¡è¢«è®¤ä¸ºæ˜¯åªè¯»çš„,å› æ­¤åœ¨ä¸åŒçº¿ç¨‹ä¸­çš„è°ƒç”¨è€…ä¹‹é—´ä¿®æ”¹å®ƒä»¬ä¼šå¯¼è‡´å†²çªã€‚å¯ç”¨çš„æ”¶å›ç­–ç•¥æœ‰, é»˜è®¤çš„æ˜¯ LRU: LRU â€“ æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„:ç§»é™¤æœ€é•¿æ—¶é—´ä¸è¢«ä½¿ç”¨çš„å¯¹è±¡ã€‚ FIFO â€“ å…ˆè¿›å…ˆå‡º:æŒ‰å¯¹è±¡è¿›å…¥ç¼“å­˜çš„é¡ºåºæ¥ç§»é™¤å®ƒä»¬ã€‚ SOFT â€“ è½¯å¼•ç”¨:ç§»é™¤åŸºäºåƒåœ¾å›æ”¶å™¨çŠ¶æ€å’Œè½¯å¼•ç”¨è§„åˆ™çš„å¯¹è±¡ã€‚ WEAK â€“ å¼±å¼•ç”¨:æ›´ç§¯æåœ°ç§»é™¤åŸºäºåƒåœ¾æ”¶é›†å™¨çŠ¶æ€å’Œå¼±å¼•ç”¨è§„åˆ™çš„å¯¹è±¡ã€‚ Mybatis æ•´åˆ ehcacheehcache æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼ç¼“å­˜æ¡†æ¶ã€‚ åˆ†å¸ƒç¼“å­˜ æˆ‘ä»¬ç³»ç»Ÿä¸ºäº†æé«˜ç³»ç»Ÿå¹¶å‘ï¼Œæ€§èƒ½ã€ä¸€èˆ¬å¯¹ç³»ç»Ÿè¿›è¡Œåˆ†å¸ƒå¼éƒ¨ç½²ï¼ˆé›†ç¾¤éƒ¨ç½²æ–¹å¼ï¼‰ ä¸ä½¿ç”¨åˆ†å¸ƒç¼“å­˜ï¼Œç¼“å­˜çš„æ•°æ®åœ¨å„å„æœåŠ¡å•ç‹¬å­˜å‚¨ï¼Œä¸æ–¹ä¾¿ç³»ç»Ÿ å¼€å‘ã€‚æ‰€ä»¥è¦ä½¿ç”¨åˆ†å¸ƒå¼ç¼“å­˜å¯¹ç¼“å­˜æ•°æ®è¿›è¡Œé›†ä¸­ç®¡ç†ã€‚ mybatisæ— æ³•å®ç°åˆ†å¸ƒå¼ç¼“å­˜ï¼Œéœ€è¦å’Œå…¶å®ƒåˆ†å¸ƒå¼ç¼“å­˜æ¡†æ¶è¿›è¡Œæ•´åˆã€‚ æ•´åˆæ–¹æ³• mybatis æä¾›äº†ä¸€ä¸ªäºŒçº§ç¼“å­˜ cache æ¥å£ï¼ˆorg.apache.ibatis.cache ä¸‹çš„ Cacheï¼‰ï¼Œå¦‚æœè¦å®ç°è‡ªå·±çš„ç¼“å­˜é€»è¾‘ï¼Œå®ç°cacheæ¥å£å¼€å‘å³å¯ã€‚ 12345678910import java.util.concurrent.locks.ReadWriteLock;public interface Cache &#123; String getId(); void putObject(Object var1, Object var2); Object getObject(Object var1); Object removeObject(Object var1); void clear(); int getSize(); ReadWriteLock getReadWriteLock();&#125; mybatiså’Œehcacheæ•´åˆï¼Œmybatis å’Œ ehcache æ•´åˆåŒ…ä¸­æä¾›äº†ä¸€ä¸ª cache æ¥å£çš„å®ç°ç±»(org.apache.ibatis.cache.impl ä¸‹çš„ PerpetualCache)ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253package org.apache.ibatis.cache.impl;import java.util.HashMap;import java.util.Map;import java.util.concurrent.locks.ReadWriteLock;import org.apache.ibatis.cache.Cache;import org.apache.ibatis.cache.CacheException;public class PerpetualCache implements Cache &#123; private String id; private Map&lt;Object, Object&gt; cache = new HashMap(); public PerpetualCache(String id) &#123; this.id = id; &#125; public String getId() &#123; return this.id; &#125; public int getSize() &#123; return this.cache.size(); &#125; public void putObject(Object key, Object value) &#123; this.cache.put(key, value); &#125; public Object getObject(Object key) &#123; return this.cache.get(key); &#125; public Object removeObject(Object key) &#123; return this.cache.remove(key); &#125; public void clear() &#123; this.cache.clear(); &#125; public ReadWriteLock getReadWriteLock() &#123; return null; &#125; public boolean equals(Object o) &#123; if(this.getId() == null) &#123; throw new CacheException(\"Cache instances require an ID.\"); &#125; else if(this == o) &#123; return true; &#125; else if(!(o instanceof Cache)) &#123; return false; &#125; else &#123; Cache otherCache = (Cache)o; return this.getId().equals(otherCache.getId()); &#125; &#125; public int hashCode() &#123; if(this.getId() == null) &#123; throw new CacheException(\"Cache instances require an ID.\"); &#125; else &#123; return this.getId().hashCode(); &#125; &#125;&#125; é€šè¿‡å®ç° Cache æ¥å£å¯ä»¥å®ç° mybatis ç¼“å­˜æ•°æ®é€šè¿‡å…¶å®ƒç¼“å­˜æ•°æ®åº“æ•´åˆï¼Œmybatis çš„ç‰¹é•¿æ˜¯sqlæ“ä½œï¼Œç¼“å­˜æ•°æ®çš„ç®¡ç†ä¸æ˜¯ mybatis çš„ç‰¹é•¿ï¼Œä¸ºäº†æé«˜ç¼“å­˜çš„æ€§èƒ½å°† mybatis å’Œç¬¬ä¸‰æ–¹çš„ç¼“å­˜æ•°æ®åº“æ•´åˆï¼Œæ¯”å¦‚ ehcacheã€memcacheã€redisç­‰ã€‚ å¼•å…¥ä¾èµ–åŒ… ehcache-core-2.6.5.jar å’Œ mybatis-ehcache-1.0.2.jar å¼•å…¥ç¼“å­˜é…ç½®æ–‡ä»¶ classpathä¸‹æ·»åŠ ï¼šehcache.xml å†…å®¹å¦‚ä¸‹ï¼š 1234567891011121314&lt;ehcache xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:noNamespaceSchemaLocation=\"http://ehcache.org/ehcache.xsd\"&gt; &lt;diskStore path=\"C:\\JetBrains\\IDEAProject\\ehcache\" /&gt; &lt;defaultCache maxElementsInMemory=\"1000\" maxElementsOnDisk=\"10000000\" eternal=\"false\" overflowToDisk=\"false\" timeToIdleSeconds=\"120\" timeToLiveSeconds=\"120\" diskExpiryThreadIntervalSeconds=\"120\" memoryStoreEvictionPolicy=\"LRU\"&gt; &lt;/defaultCache&gt;&lt;/ehcache&gt; å±æ€§è¯´æ˜ï¼š diskStoreï¼šæŒ‡å®šæ•°æ®åœ¨ç£ç›˜ä¸­çš„å­˜å‚¨ä½ç½®ã€‚ defaultCacheï¼šå½“å€ŸåŠ© CacheManager.add(â€œdemoCacheâ€) åˆ›å»ºCacheæ—¶ï¼ŒEhCache ä¾¿ä¼šé‡‡ç”¨æŒ‡å®šçš„çš„ç®¡ç†ç­–ç•¥ ä»¥ä¸‹å±æ€§æ˜¯å¿…é¡»çš„ï¼š maxElementsInMemory - åœ¨å†…å­˜ä¸­ç¼“å­˜çš„elementçš„æœ€å¤§æ•°ç›® maxElementsOnDisk - åœ¨ç£ç›˜ä¸Šç¼“å­˜çš„elementçš„æœ€å¤§æ•°ç›®ï¼Œè‹¥æ˜¯0è¡¨ç¤ºæ— ç©·å¤§ eternal - è®¾å®šç¼“å­˜çš„elementsæ˜¯å¦æ°¸è¿œä¸è¿‡æœŸã€‚å¦‚æœä¸ºtrueï¼Œåˆ™ç¼“å­˜çš„æ•°æ®å§‹ç»ˆæœ‰æ•ˆï¼Œå¦‚æœä¸ºfalseé‚£ä¹ˆè¿˜è¦æ ¹æ®timeToIdleSecondsï¼ŒtimeToLiveSecondsåˆ¤æ–­ overflowToDisk- è®¾å®šå½“å†…å­˜ç¼“å­˜æº¢å‡ºçš„æ—¶å€™æ˜¯å¦å°†è¿‡æœŸçš„elementç¼“å­˜åˆ°ç£ç›˜ä¸Š ä»¥ä¸‹å±æ€§æ˜¯å¯é€‰çš„ï¼š timeToIdleSeconds - å½“ç¼“å­˜åœ¨EhCacheä¸­çš„æ•°æ®å‰åä¸¤æ¬¡è®¿é—®çš„æ—¶é—´è¶…è¿‡timeToIdleSecondsçš„å±æ€§å–å€¼æ—¶ï¼Œè¿™äº›æ•°æ®ä¾¿ä¼šåˆ é™¤ï¼Œé»˜è®¤å€¼æ˜¯0,ä¹Ÿå°±æ˜¯å¯é—²ç½®æ—¶é—´æ— ç©·å¤§ timeToLiveSeconds - ç¼“å­˜elementçš„æœ‰æ•ˆç”Ÿå‘½æœŸï¼Œé»˜è®¤æ˜¯0.,ä¹Ÿå°±æ˜¯elementå­˜æ´»æ—¶é—´æ— ç©·å¤§ diskSpoolBufferSizeMB è¿™ä¸ªå‚æ•°è®¾ç½®DiskStore(ç£ç›˜ç¼“å­˜)çš„ç¼“å­˜åŒºå¤§å°.é»˜è®¤æ˜¯30MB.æ¯ä¸ªCacheéƒ½åº”è¯¥æœ‰è‡ªå·±çš„ä¸€ä¸ªç¼“å†²åŒº. diskPersistent- åœ¨VMé‡å¯çš„æ—¶å€™æ˜¯å¦å¯ç”¨ç£ç›˜ä¿å­˜EhCacheä¸­çš„æ•°æ®ï¼Œé»˜è®¤æ˜¯falseã€‚ diskExpiryThreadIntervalSeconds - ç£ç›˜ç¼“å­˜çš„æ¸…ç†çº¿ç¨‹è¿è¡Œé—´éš”ï¼Œé»˜è®¤æ˜¯120ç§’ã€‚æ¯ä¸ª120sï¼Œç›¸åº”çš„çº¿ç¨‹ä¼šè¿›è¡Œä¸€æ¬¡EhCacheä¸­æ•°æ®çš„æ¸…ç†å·¥ä½œ memoryStoreEvictionPolicy - å½“å†…å­˜ç¼“å­˜è¾¾åˆ°æœ€å¤§ï¼Œæœ‰æ–°çš„elementåŠ å…¥çš„æ—¶å€™ï¼Œ ç§»é™¤ç¼“å­˜ä¸­elementçš„ç­–ç•¥ã€‚é»˜è®¤æ˜¯LRUï¼ˆæœ€è¿‘æœ€å°‘ä½¿ç”¨ï¼‰ï¼Œå¯é€‰çš„æœ‰LFUï¼ˆæœ€ä¸å¸¸ä½¿ç”¨ï¼‰å’ŒFIFOï¼ˆå…ˆè¿›å…ˆå‡ºï¼‰ å¼€å¯ehcacheç¼“å­˜ EhcacheCache æ˜¯ehcacheå¯¹Cacheæ¥å£çš„å®ç°ï¼›ä¿®æ”¹mapper.xmlæ–‡ä»¶ï¼Œåœ¨cacheä¸­æŒ‡å®šEhcacheCacheã€‚ æ ¹æ®éœ€æ±‚è°ƒæ•´ç¼“å­˜å‚æ•°ï¼š 123456789&lt;cache type=\"org.mybatis.caches.ehcache.EhcacheCache\" &gt; &lt;property name=\"timeToIdleSeconds\" value=\"3600\"/&gt; &lt;property name=\"timeToLiveSeconds\" value=\"3600\"/&gt; &lt;!-- åŒehcacheå‚æ•°maxElementsInMemory --&gt; &lt;property name=\"maxEntriesLocalHeap\" value=\"1000\"/&gt; &lt;!-- åŒehcacheå‚æ•°maxElementsOnDisk --&gt; &lt;property name=\"maxEntriesLocalDisk\" value=\"10000000\"/&gt; &lt;property name=\"memoryStoreEvictionPolicy\" value=\"LRU\"/&gt; &lt;/cache&gt; æµ‹è¯• ï¼š(è¿™å‘½ä¸­ç‡å°±ä»£è¡¨æˆåŠŸå°†ehcache ä¸ mybatis æ•´åˆäº†) åº”ç”¨åœºæ™¯å¯¹äºè®¿é—®å¤šçš„æŸ¥è¯¢è¯·æ±‚ä¸”ç”¨æˆ·å¯¹æŸ¥è¯¢ç»“æœå®æ—¶æ€§è¦æ±‚ä¸é«˜ï¼Œæ­¤æ—¶å¯é‡‡ç”¨ mybatis äºŒçº§ç¼“å­˜æŠ€æœ¯é™ä½æ•°æ®åº“è®¿é—®é‡ï¼Œæé«˜è®¿é—®é€Ÿåº¦ï¼Œä¸šåŠ¡åœºæ™¯æ¯”å¦‚ï¼šè€—æ—¶è¾ƒé«˜çš„ç»Ÿè®¡åˆ†æsqlã€ç”µè¯è´¦å•æŸ¥è¯¢sqlç­‰ã€‚ å®ç°æ–¹æ³•å¦‚ä¸‹ï¼šé€šè¿‡è®¾ç½®åˆ·æ–°é—´éš”æ—¶é—´ï¼Œç”± mybatis æ¯éš”ä¸€æ®µæ—¶é—´è‡ªåŠ¨æ¸…ç©ºç¼“å­˜ï¼Œæ ¹æ®æ•°æ®å˜åŒ–é¢‘ç‡è®¾ç½®ç¼“å­˜åˆ·æ–°é—´éš” flushIntervalï¼Œæ¯”å¦‚è®¾ç½®ä¸º30åˆ†é’Ÿã€60åˆ†é’Ÿã€24å°æ—¶ç­‰ï¼Œæ ¹æ®éœ€æ±‚è€Œå®šã€‚ å±€é™æ€§mybatis äºŒçº§ç¼“å­˜å¯¹ç»†ç²’åº¦çš„æ•°æ®çº§åˆ«çš„ç¼“å­˜å®ç°ä¸å¥½ï¼Œæ¯”å¦‚å¦‚ä¸‹éœ€æ±‚ï¼šå¯¹å•†å“ä¿¡æ¯è¿›è¡Œç¼“å­˜ï¼Œç”±äºå•†å“ä¿¡æ¯æŸ¥è¯¢è®¿é—®é‡å¤§ï¼Œä½†æ˜¯è¦æ±‚ç”¨æˆ·æ¯æ¬¡éƒ½èƒ½æŸ¥è¯¢æœ€æ–°çš„å•†å“ä¿¡æ¯ï¼Œæ­¤æ—¶å¦‚æœä½¿ç”¨ mybatis çš„äºŒçº§ç¼“å­˜å°±æ— æ³•å®ç°å½“ä¸€ä¸ªå•†å“å˜åŒ–æ—¶åªåˆ·æ–°è¯¥å•†å“çš„ç¼“å­˜ä¿¡æ¯è€Œä¸åˆ·æ–°å…¶å®ƒå•†å“çš„ä¿¡æ¯ï¼Œå› ä¸º mybaits çš„äºŒçº§ç¼“å­˜åŒºåŸŸä»¥ mapper ä¸ºå•ä½åˆ’åˆ†ï¼Œå½“ä¸€ä¸ªå•†å“ä¿¡æ¯å˜åŒ–ä¼šå°†æ‰€æœ‰å•†å“ä¿¡æ¯çš„ç¼“å­˜æ•°æ®å…¨éƒ¨æ¸…ç©ºã€‚è§£å†³æ­¤ç±»é—®é¢˜éœ€è¦åœ¨ä¸šåŠ¡å±‚æ ¹æ®éœ€æ±‚å¯¹æ•°æ®æœ‰é’ˆå¯¹æ€§ç¼“å­˜ã€‚","tags":[{"name":"Mybatis","slug":"Mybatis","permalink":"http://yoursite.com/tags/Mybatis/"},{"name":"SpringMVC","slug":"SpringMVC","permalink":"http://yoursite.com/tags/SpringMVC/"}]},{"title":"é€šè¿‡é¡¹ç›®é€æ­¥æ·±å…¥äº†è§£Mybatisï¼ˆä¸‰ï¼‰","date":"2017-06-13T16:00:00.000Z","path":"2017/06/14/é€šè¿‡é¡¹ç›®é€æ­¥æ·±å…¥äº†è§£Mybatis(ä¸‰)/","text":"ç›¸å…³é˜…è¯»ï¼š1ã€é€šè¿‡é¡¹ç›®é€æ­¥æ·±å…¥äº†è§£Mybatis&lt;ä¸€&gt; 2ã€ é€šè¿‡é¡¹ç›®é€æ­¥æ·±å…¥äº†è§£Mybatis&lt;äºŒ&gt; æœ¬é¡¹ç›®æ‰€æœ‰ä»£ç åŠæ–‡æ¡£éƒ½æ‰˜ç®¡åœ¨ Githubåœ°å€ï¼šhttps://github.com/zhisheng17/mybatis Mybatis é«˜çº§çŸ¥è¯†å®‰æ’ï¼šå¯¹è®¢å•å•†å“æ•°æ®æ¨¡å‹è¿›è¡Œåˆ†æ è®¢å•å•†å“æ•°æ®æ¨¡å‹ æ•°æ®æ¨¡å‹åˆ†ææ€è·¯ï¼š1ã€æ¯å¼ è¡¨è®°å½•çš„æ•°æ®å†…å®¹ï¼ˆåˆ†æ¨¡å—å¯¹æ¯å¼ è¡¨è®°å½•çš„å†…å®¹è¿›è¡Œç†Ÿæ‚‰ï¼Œç›¸å½“äºå­¦ä¹ ç³»ç»Ÿéœ€æ±‚çš„è¿‡ç¨‹ï¼‰ 2ã€æ¯å¼ è¡¨é‡è¦çš„çš„å­—æ®µè®¾ç½®ï¼ˆéç©ºå­—æ®µã€å¤–é”®å­—æ®µï¼‰ 3ã€æ•°æ®åº“çº§åˆ«è¡¨ä¸è¡¨ä¹‹é—´çš„å…³ç³»ï¼ˆå¤–é”®å…³ç³»ï¼‰ 4ã€è¡¨ä¸è¡¨ä¸šåŠ¡ä¹‹é—´çš„å…³ç³»ï¼ˆè¦å»ºç«‹åœ¨æ¯ä¸ªä¸šåŠ¡æ„ä¹‰çš„åŸºç¡€ä¸Šå»åˆ†æï¼‰ æ•°æ®æ¨¡å‹åˆ†ææ¨¡å‹ ç”¨æˆ·è¡¨ userï¼šè®°å½•è´­ä¹°å•†å“çš„ç”¨æˆ·ä¿¡æ¯ è®¢å•è¡¨ orderï¼šè®°å½•ç”¨æˆ·æ‰€åˆ›å»ºçš„è®¢å•(è´­ä¹°å•†å“çš„è®¢å•) è®¢å•æ˜ç»†è¡¨ orderdetailï¼šï¼ˆè®°å½•äº†è®¢å•çš„è¯¦ç»†ä¿¡æ¯å³è´­ä¹°å•†å“çš„ä¿¡æ¯ï¼‰ å•†å“è¡¨ itemsï¼šè®°å½•äº†å•†å“ä¿¡æ¯ è¡¨ä¸è¡¨ä¸šåŠ¡ä¹‹é—´çš„å…³ç³»ï¼š åœ¨åˆ†æè¡¨ä¸è¡¨ä¹‹é—´çš„ä¸šåŠ¡å…³ç³»æ—¶éœ€è¦å»ºç«‹åœ¨æŸä¸ªä¸šåŠ¡æ„ä¹‰åŸºç¡€ä¸Šå»åˆ†æã€‚ å…ˆåˆ†ææ•°æ®çº§åˆ«ä¹‹é—´æœ‰å…³ç³»çš„è¡¨ä¹‹é—´çš„ä¸šåŠ¡å…³ç³»ï¼š 1ã€usreå’Œordersï¼š user â€”&gt; ordersï¼šä¸€ä¸ªç”¨æˆ·å¯ä»¥åˆ›å»ºå¤šä¸ªè®¢å•ï¼Œä¸€å¯¹å¤š orders â€”&gt; userï¼šä¸€ä¸ªè®¢å•åªç”±ä¸€ä¸ªç”¨æˆ·åˆ›å»ºï¼Œä¸€å¯¹ä¸€ 2ã€ orderså’Œorderdetailï¼š orders â€”&gt; orderdetailï¼šä¸€ä¸ªè®¢å•å¯ä»¥åŒ…æ‹¬ å¤šä¸ªè®¢å•æ˜ç»†ï¼Œå› ä¸ºä¸€ä¸ªè®¢å•å¯ä»¥è´­ä¹°å¤šä¸ªå•†å“ï¼Œæ¯ä¸ªå•†å“çš„è´­ä¹°ä¿¡æ¯åœ¨orderdetailè®°å½•ï¼Œä¸€å¯¹å¤šå…³ç³» orderdetail â€”&gt; ordersï¼šä¸€ä¸ªè®¢å•æ˜ç»†åªèƒ½åŒ…æ‹¬åœ¨ä¸€ä¸ªè®¢å•ä¸­ï¼Œä¸€å¯¹ä¸€ 3ã€ orderdetail å’Œ itesmï¼š orderdetail â€”&gt; itesmsï¼šä¸€ä¸ªè®¢å•æ˜ç»†åªå¯¹åº”ä¸€ä¸ªå•†å“ä¿¡æ¯ï¼Œä¸€å¯¹ä¸€ items â€”&gt; orderdetail:ä¸€ä¸ªå•†å“å¯ä»¥åŒ…æ‹¬åœ¨å¤šä¸ªè®¢å•æ˜ç»† ï¼Œä¸€å¯¹å¤š å†åˆ†ææ•°æ®åº“çº§åˆ«æ²¡æœ‰å…³ç³»çš„è¡¨ä¹‹é—´æ˜¯å¦æœ‰ä¸šåŠ¡å…³ç³»ï¼š 4ã€ orders å’Œ itemsï¼š orders å’Œ items ä¹‹é—´å¯ä»¥é€šè¿‡ orderdetail è¡¨å»ºç«‹ å…³ç³»ã€‚ ä¸€å¯¹ä¸€æŸ¥è¯¢éœ€æ±‚ï¼šæŸ¥è¯¢è®¢å•ä¿¡æ¯ï¼Œå…³è”æŸ¥è¯¢åˆ›å»ºè®¢å•çš„ç”¨æˆ·ä¿¡æ¯ ä½¿ç”¨ resultType sql è¯­å¥ ç¡®å®šæŸ¥è¯¢çš„ä¸»è¡¨ï¼šè®¢å•è¡¨ ç¡®å®šæŸ¥è¯¢çš„å…³è”è¡¨ï¼šç”¨æˆ·è¡¨ å…³è”æŸ¥è¯¢ä½¿ç”¨å†…é“¾æ¥ï¼Ÿè¿˜æ˜¯å¤–é“¾æ¥ï¼Ÿ ç”±äºordersè¡¨ä¸­æœ‰ä¸€ä¸ªå¤–é”®ï¼ˆuser_idï¼‰ï¼Œé€šè¿‡å¤–é”®å…³è”æŸ¥è¯¢ç”¨æˆ·è¡¨åªèƒ½æŸ¥è¯¢å‡ºä¸€æ¡è®°å½•ï¼Œå¯ä»¥ä½¿ç”¨å†…é“¾æ¥ã€‚ 1SELECT orders.*, USER.username, USER.sex, USER.address FROM orders, USER WHERE orders.user_id = user.id åˆ›å»º pojo Orders.java 123456789101112public class Orders &#123; private Integer id; private Integer userId; private String number; private Date createtime; private String note; //ç”¨æˆ·ä¿¡æ¯ private User user; //è®¢å•æ˜ç»† private List&lt;Orderdetail&gt; orderdetails; //getter and setter&#125; OrderCustom.java 1234567891011//é€šè¿‡æ­¤ç±»æ˜ å°„è®¢å•å’Œç”¨æˆ·æŸ¥è¯¢çš„ç»“æœï¼Œè®©æ­¤ç±»ç»§æ‰¿åŒ…æ‹¬ å­—æ®µè¾ƒå¤šçš„pojoç±»public class OrdersCustom extends Orders&#123; //æ·»åŠ ç”¨æˆ·å±æ€§ /*USER.username, USER.sex, USER.address */ private String username; private String sex; private String address; //getter and setter&#125; æ˜ å°„æ–‡ä»¶ OrdersMapperCustom.xml 1234&lt;!--æŸ¥è¯¢è®¢å•å…³è”æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯--&gt; &lt;select id=\"findOrdersUser\" resultType=\"cn.zhisheng.mybatis.po.OrdersCustom\"&gt; SELECT orders.*, USER.username, USER.sex, USER.address FROM orders, USER WHERE orders.user_id = user.id &lt;/select&gt; Mapper æ–‡ä»¶ OrdersMapperCustom.java 1234public interface OrdersMapperCustom&#123; public OrdersCustom findOrdersUser() throws Exception;&#125; æµ‹è¯•ä»£ç ï¼ˆè®°å¾—åœ¨ SqlConfig.xmlä¸­æ·»åŠ è½½ OrdersMapperCustom.xml æ–‡ä»¶ï¼‰ 1234567891011@Test public void testFindOrdersUser() throws Exception &#123; SqlSession sqlSession = sqlSessionFactory.openSession(); //åˆ›å»ºOrdersMapperCustomå¯¹è±¡,mybatisè‡ªåŠ¨ç”Ÿæˆä»£ç†å¯¹è±¡ OrdersMapperCustom ordersMapperCustom = sqlSession.getMapper(OrdersMapperCustom.class); //è°ƒç”¨OrdersMapperCustomçš„æ–¹æ³• List&lt;OrdersCustom&gt; list = ordersMapperCustom.findOrdersUser(); System.out.println(list); sqlSession.close(); &#125; æµ‹è¯•ç»“æœ â€‹ â€‹ ä½¿ç”¨ resultMap sql è¯­å¥ï¼ˆå’Œä¸Šé¢çš„ä¸€è‡´ï¼‰ ä½¿ç”¨ resultMap æ˜ å°„æ€è·¯ ä½¿ç”¨ resultMap å°†æŸ¥è¯¢ç»“æœä¸­çš„è®¢å•ä¿¡æ¯æ˜ å°„åˆ° Orders å¯¹è±¡ä¸­ï¼Œåœ¨ orders ç±»ä¸­æ·»åŠ  User å±æ€§ï¼Œå°†å…³è”æŸ¥è¯¢å‡ºæ¥çš„ç”¨æˆ·ä¿¡æ¯æ˜ å°„åˆ° orders å¯¹è±¡ä¸­çš„ user å±æ€§ä¸­ã€‚ 12//ç”¨æˆ·ä¿¡æ¯private User user; æ˜ å°„æ–‡ä»¶ OrdersMapperCustom.xml å…ˆå®šä¹‰ resultMap 1234567891011121314151617181920212223242526272829303132&lt;!--å®šä¹‰æŸ¥è¯¢è®¢å•å…³è”æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯çš„resultMap å°†æ•´ä¸ªæŸ¥è¯¢ç»“æœæ˜ å°„åˆ°cn.zhisheng.mybatis.po.Orders --&gt; &lt;resultMap id=\"OrdersUserResultMap\" type=\"cn.zhisheng.mybatis.po.Orders\"&gt; &lt;!--é…ç½®æ˜ å°„çš„è®¢å•ä¿¡æ¯--&gt; &lt;!--idè¡¨ç¤ºæŸ¥è¯¢ç»“æœä¸­çš„å”¯ä¸€æ ‡è¯† åœ¨è¿™é‡Œæ˜¯è®¢å•çš„å”¯ä¸€æ ‡è¯† å¦‚æœæ˜¯ç”±å¤šåˆ—ç»„æˆçš„å”¯ä¸€æ ‡è¯†ï¼Œé‚£ä¹ˆå°±éœ€è¦é…ç½®å¤šä¸ªid columnï¼šid æ˜¯è®¢å•ä¿¡æ¯ä¸­çš„å”¯ä¸€æ ‡è¯†åˆ— propertyï¼šid æ˜¯è®¢å•ä¿¡æ¯å”¯ä¸€æ ‡è¯†åˆ—æ‰€æ˜ å°„åˆ°ordersä¸­çš„idå±æ€§ æœ€ç»ˆresultMapå¯¹columnå’Œpropertyåšä¸€ä¸ªæ˜ å°„å…³ç³»ï¼ˆå¯¹åº”å…³ç³»ï¼‰ --&gt; &lt;id column=\"id\" property=\"id\"/&gt; &lt;result column=\"user_id\" property=\"userId\"/&gt; &lt;result column=\"number\" property=\"number\"/&gt; &lt;result column=\"createtime\" property=\"createtime\"/&gt; &lt;result column=\"note\" property=\"note\"/&gt; &lt;!--é…ç½®æ˜ å°„çš„å…³è”ç”¨æˆ·ä¿¡æ¯ association ç”¨äºæ˜ å°„å…³è”æŸ¥è¯¢å•ä¸ªå¯¹è±¡çš„ä¿¡æ¯ property å°†è¦å…³è”æŸ¥è¯¢çš„ç”¨æˆ·ä¿¡æ¯æ˜ å°„åˆ° ordersä¸­çš„å±æ€§ä¸­å» --&gt; &lt;association property=\"user\" javaType=\"cn.zhisheng.mybatis.po.User\"&gt; &lt;!--id å…³è”ç”¨æˆ·ä¿¡æ¯çš„å”¯ä¸€æ ‡è¯† column: æŒ‡å®šå”¯ä¸€æ ‡è¯†ç”¨æˆ·çš„ä¿¡æ¯ propertyï¼šæ˜ å°„åˆ°userçš„é‚£ä¸ªå±æ€§ --&gt; &lt;id column=\"user_id\" property=\"id\"/&gt; &lt;result column=\"username\" property=\"username\"/&gt; &lt;result column=\"sex\" property=\"sex\"/&gt; &lt;result column=\"address\" property=\"address\"/&gt; &lt;result column=\"birthday\" property=\"birthday\"/&gt; &lt;/association&gt; &lt;/resultMap&gt; 1234&lt;!--æŸ¥è¯¢è®¢å•å…³è”æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯, ä½¿ç”¨ resultMap--&gt; &lt;select id=\"findOrdersUserResultMap\" resultMap=\"OrdersUserResultMap\"&gt; SELECT orders.*, USER.username, USER.sex, USER.address FROM orders, USER WHERE orders.user_id = user.id &lt;/select&gt; Mapper æ–‡ä»¶ 1public List&lt;Orders&gt; findOrdersUserResultMap() throws Exception; æµ‹è¯•ä»£ç  1234567891011@Test public void testFindOrdersUserResultMap() throws Exception &#123; SqlSession sqlSession = sqlSessionFactory.openSession(); //åˆ›å»ºOrdersMapperCustomå¯¹è±¡,mybatisè‡ªåŠ¨ç”Ÿæˆä»£ç†å¯¹è±¡ OrdersMapperCustom ordersMapperCustom = sqlSession.getMapper(OrdersMapperCustom.class); //è°ƒç”¨OrdersMapperCustomçš„æ–¹æ³• List&lt;Orders&gt; list = ordersMapperCustom.findOrdersUserResultMap(); System.out.println(list); sqlSession.close(); &#125; æµ‹è¯•ç»“æœ ä½¿ç”¨ resultType å’Œ resultMap ä¸€å¯¹ä¸€æŸ¥è¯¢å°ç»“ resultTypeï¼šä½¿ç”¨resultTypeå®ç°è¾ƒä¸ºç®€å•ï¼Œå¦‚æœpojoä¸­æ²¡æœ‰åŒ…æ‹¬æŸ¥è¯¢å‡ºæ¥çš„åˆ—åï¼Œéœ€è¦å¢åŠ åˆ—åå¯¹åº”çš„å±æ€§ï¼Œå³å¯å®Œæˆæ˜ å°„ã€‚å¦‚æœæ²¡æœ‰æŸ¥è¯¢ç»“æœçš„ç‰¹æ®Šè¦æ±‚å»ºè®®ä½¿ç”¨resultTypeã€‚ resultMapï¼šéœ€è¦å•ç‹¬å®šä¹‰resultMapï¼Œå®ç°æœ‰ç‚¹éº»çƒ¦ï¼Œå¦‚æœå¯¹æŸ¥è¯¢ç»“æœæœ‰ç‰¹æ®Šçš„è¦æ±‚ï¼Œä½¿ç”¨resultMapå¯ä»¥å®Œæˆå°†å…³è”æŸ¥è¯¢æ˜ å°„pojoçš„å±æ€§ä¸­ã€‚resultMapå¯ä»¥å®ç°å»¶è¿ŸåŠ è½½ï¼ŒresultTypeæ— æ³•å®ç°å»¶è¿ŸåŠ è½½ã€‚ ä¸€å¯¹å¤šæŸ¥è¯¢éœ€æ±‚ï¼šæŸ¥è¯¢è®¢å•åŠè®¢å•æ˜ç»†ä¿¡æ¯ SQLè¯­å¥ï¼š ç¡®å®šä¸»æŸ¥è¯¢è¡¨ï¼šè®¢å•è¡¨ ç¡®å®šå…³è”æŸ¥è¯¢è¡¨ï¼šè®¢å•æ˜ç»†è¡¨ åœ¨ä¸€å¯¹ä¸€æŸ¥è¯¢åŸºç¡€ä¸Šæ·»åŠ è®¢å•æ˜ç»†è¡¨å…³è”å³å¯ã€‚ 12SELECT orders.*, USER.username, USER.sex, USER.address, orderdetail.id orderdetail_id, orderdetail.items_id, orderdetail.items_num, orderdetail.orders_id FROM orders, USER,orderdetail WHERE orders.user_id = user.id AND orderdetail.orders_id=orders.id åˆ†æï¼š ä½¿ç”¨ resultType å°†ä¸Šè¾¹çš„æŸ¥è¯¢ç»“æœæ˜ å°„åˆ° pojo ä¸­ï¼Œè®¢å•ä¿¡æ¯çš„å°±æ˜¯é‡å¤ã€‚ è¦æ±‚ï¼š å¯¹ orders æ˜ å°„ä¸èƒ½å‡ºç°é‡å¤è®°å½•ã€‚ åœ¨ orders.java ç±»ä¸­æ·»åŠ  List orderDetails å±æ€§ã€‚ æœ€ç»ˆä¼šå°†è®¢å•ä¿¡æ¯æ˜ å°„åˆ° orders ä¸­ï¼Œè®¢å•æ‰€å¯¹åº”çš„è®¢å•æ˜ç»†æ˜ å°„åˆ° orders ä¸­çš„ orderDetails å±æ€§ä¸­ã€‚ æ˜ å°„æˆçš„ orders è®°å½•æ•°ä¸ºä¸¤æ¡ï¼ˆordersä¿¡æ¯ä¸é‡å¤ï¼‰ æ¯ä¸ª orders ä¸­çš„ orderDetails å±æ€§å­˜å‚¨äº†è¯¥è®¢å•æ‰€å¯¹åº”çš„è®¢å•æ˜ç»†ã€‚ æ˜ å°„æ–‡ä»¶ï¼š é¦–å…ˆå®šä¹‰ resultMap 1234567891011121314151617181920&lt;!--å®šä¹‰æŸ¥è¯¢è®¢å•åŠè®¢å•æ˜ç»†ä¿¡æ¯çš„resultMapä½¿ç”¨extendsç»§æ‰¿ï¼Œä¸ç”¨åœ¨ä¸­é…ç½®è®¢å•ä¿¡æ¯å’Œç”¨æˆ·ä¿¡æ¯çš„æ˜ å°„--&gt; &lt;resultMap id=\"OrdersAndOrderDetailResultMap\" type=\"cn.zhisheng.mybatis.po.Orders\" extends=\"OrdersUserResultMap\"&gt; &lt;!-- è®¢å•ä¿¡æ¯ --&gt; &lt;!-- ç”¨æˆ·ä¿¡æ¯ --&gt; &lt;!-- ä½¿ç”¨extendsç»§æ‰¿ï¼Œä¸ç”¨åœ¨ä¸­é…ç½®è®¢å•ä¿¡æ¯å’Œç”¨æˆ·ä¿¡æ¯çš„æ˜ å°„ --&gt; &lt;!-- è®¢å•æ˜ç»†ä¿¡æ¯ ä¸€ä¸ªè®¢å•å…³è”æŸ¥è¯¢å‡ºäº†å¤šæ¡æ˜ç»†ï¼Œè¦ä½¿ç”¨collectionè¿›è¡Œæ˜ å°„ collectionï¼šå¯¹å…³è”æŸ¥è¯¢åˆ°å¤šæ¡è®°å½•æ˜ å°„åˆ°é›†åˆå¯¹è±¡ä¸­ propertyï¼šå°†å…³è”æŸ¥è¯¢åˆ°å¤šæ¡è®°å½•æ˜ å°„åˆ°cn.zhisheng.mybatis.po.Orderså“ªä¸ªå±æ€§ ofTypeï¼šæŒ‡å®šæ˜ å°„åˆ°listé›†åˆå±æ€§ä¸­pojoçš„ç±»å‹ --&gt; &lt;collection property=\"orderdetails\" ofType=\"cn.zhisheng.mybatis.po.Orderdetail\"&gt; &lt;!-- idï¼šè®¢å•æ˜ç»†å”¯ ä¸€æ ‡è¯† property:è¦å°†è®¢å•æ˜ç»†çš„å”¯ ä¸€æ ‡è¯† æ˜ å°„åˆ°cn.zhisheng.mybatis.po.Orderdetailçš„å“ªä¸ªå±æ€§--&gt; &lt;id column=\"orderdetail_id\" property=\"id\"/&gt; &lt;result column=\"items_id\" property=\"itemsId\"/&gt; &lt;result column=\"items_num\" property=\"itemsNum\"/&gt; &lt;result column=\"orders_id\" property=\"ordersId\"/&gt; &lt;/collection&gt; &lt;/resultMap&gt; 12345&lt;!--æŸ¥è¯¢è®¢å•åŠè®¢å•æ˜ç»†ä¿¡æ¯, ä½¿ç”¨ resultMap--&gt; &lt;select id=\"findOrdersAndOrderDetailResultMap\" resultMap=\"OrdersAndOrderDetailResultMap\"&gt; SELECT orders.*, USER.username, USER.sex, USER.address, orderdetail.id orderdetail_id, orderdetail.items_id, orderdetail.items_num, orderdetail.orders_id FROM orders, USER,orderdetail WHERE orders.user_id = user.id AND orderdetail.orders_id=orders.id &lt;/select&gt; Mapper æ–‡ä»¶ 1public List&lt;Orders&gt; findOrdersAndOrderDetailResultMap() throws Exception; æµ‹è¯•æ–‡ä»¶ 1234567891011@Test public void testFindOrdersAndOrderDetailResultMap() throws Exception &#123; SqlSession sqlSession = sqlSessionFactory.openSession(); //åˆ›å»ºOrdersMapperCustomå¯¹è±¡,mybatisè‡ªåŠ¨ç”Ÿæˆä»£ç†å¯¹è±¡ OrdersMapperCustom ordersMapperCustom = sqlSession.getMapper(OrdersMapperCustom.class); //è°ƒç”¨OrdersMapperCustomçš„æ–¹æ³• List&lt;Orders&gt; list = ordersMapperCustom.findOrdersAndOrderDetailResultMap(); System.out.println(list); sqlSession.close(); &#125; æµ‹è¯•ç»“æœ æ€»ç»“ï¼šmybatisä½¿ç”¨resultMapçš„collectionå¯¹å…³è”æŸ¥è¯¢çš„å¤šæ¡è®°å½•æ˜ å°„åˆ°ä¸€ä¸ªlisté›†åˆå±æ€§ä¸­ã€‚ ä½¿ç”¨resultTypeå®ç°ï¼šå°†è®¢å•æ˜ç»†æ˜ å°„åˆ°ordersä¸­çš„orderdetailsä¸­ï¼Œéœ€è¦è‡ªå·±å¤„ç†ï¼Œä½¿ç”¨åŒé‡å¾ªç¯éå†ï¼Œå»æ‰é‡å¤è®°å½•ï¼Œå°†è®¢å•æ˜ç»†æ”¾åœ¨orderdetailsä¸­ã€‚ å¤šå¯¹å¤šæŸ¥è¯¢éœ€æ±‚ï¼šæŸ¥è¯¢ç”¨æˆ·åŠç”¨æˆ·è´­ä¹°å•†å“ä¿¡æ¯ã€‚ SQLè¯­å¥ï¼š æŸ¥è¯¢ä¸»è¡¨æ˜¯ï¼šç”¨æˆ·è¡¨ å…³è”è¡¨ï¼šç”±äºç”¨æˆ·å’Œå•†å“æ²¡æœ‰ç›´æ¥å…³è”ï¼Œé€šè¿‡è®¢å•å’Œè®¢å•æ˜ç»†è¿›è¡Œå…³è”ï¼Œæ‰€ä»¥å…³è”è¡¨ï¼š ordersã€orderdetailã€items 123SELECT orders.*, USER.username, USER.sex, USER.address, orderdetail.id orderdetail_id,orderdetail.items_id, orderdetail.items_num, orderdetail.orders_id, items.name items_name,items.detail items_detail, items.price items_price FROM orders, USER, orderdetail, items WHERE orders.user_id = user.id AND orderdetail.orders_id=orders.id AND orderdetail.items_id = items.id æ˜ å°„æ€è·¯ï¼š å°†ç”¨æˆ·ä¿¡æ¯æ˜ å°„åˆ° user ä¸­ã€‚åœ¨ user ç±»ä¸­æ·»åŠ è®¢å•åˆ—è¡¨å±æ€§List orderslistï¼Œå°†ç”¨æˆ·åˆ›å»ºçš„è®¢å•æ˜ å°„åˆ°ordersliståœ¨Ordersä¸­æ·»åŠ è®¢å•æ˜ç»†åˆ—è¡¨å±æ€§Listorderdetialsï¼Œå°†è®¢å•çš„æ˜ç»†æ˜ å°„åˆ°orderdetialsåœ¨OrderDetailä¸­æ·»åŠ Itemså±æ€§ï¼Œå°†è®¢å•æ˜ç»†æ‰€å¯¹åº”çš„å•†å“æ˜ å°„åˆ°Items å®šä¹‰ resultMapï¼š12345678910111213141516171819202122232425262728293031323334353637383940414243&lt;!--å®šä¹‰æŸ¥è¯¢ç”¨æˆ·åŠç”¨æˆ·è´­ä¹°å•†å“ä¿¡æ¯çš„ resultMap--&gt; &lt;resultMap id=\"UserAndItemsResultMap\" type=\"cn.zhisheng.mybatis.po.User\"&gt; &lt;!--ç”¨æˆ·ä¿¡æ¯--&gt; &lt;id column=\"user_id\" property=\"id\"/&gt; &lt;result column=\"username\" property=\"username\"/&gt; &lt;result column=\"sex\" property=\"sex\"/&gt; &lt;result column=\"birthday\" property=\"birthday\"/&gt; &lt;result column=\"address\" property=\"address\"/&gt; &lt;!--è®¢å•ä¿¡æ¯ ä¸€ä¸ªç”¨æˆ·å¯¹åº”å¤šä¸ªè®¢å•ï¼Œä½¿ç”¨collectionæ˜ å°„ --&gt; &lt;collection property=\"ordersList\" ofType=\"cn.zhisheng.mybatis.po.Orders\"&gt; &lt;id column=\"id\" property=\"id\"/&gt; &lt;result column=\"user_id\" property=\"userId\"/&gt; &lt;result column=\"number\" property=\"number\"/&gt; &lt;result column=\"createtime\" property=\"createtime\"/&gt; &lt;result column=\"note\" property=\"note\"/&gt; &lt;!-- è®¢å•æ˜ç»† ä¸€ä¸ªè®¢å•åŒ…æ‹¬ å¤šä¸ªæ˜ç»† --&gt; &lt;collection property=\"orderdetails\" ofType=\"cn.zhisheng.mybatis.po.Orderdetail\"&gt; &lt;id column=\"orderdetail_id\" property=\"id\"/&gt; &lt;result column=\"orders_id\" property=\"ordersId\"/&gt; &lt;result column=\"items_id\" property=\"itemsId\"/&gt; &lt;result column=\"items_num\" property=\"itemsNum\"/&gt; &lt;!-- å•†å“ä¿¡æ¯ ä¸€ä¸ªè®¢å•æ˜ç»†å¯¹åº”ä¸€ä¸ªå•†å“ --&gt; &lt;association property=\"items\" javaType=\"cn.zhisheng.mybatis.po.Items\"&gt; &lt;id column=\"items_id\" property=\"id\"/&gt; &lt;result column=\"items_name\" property=\"name\"/&gt; &lt;result column=\"items_price\" property=\"price\"/&gt; &lt;result column=\"items_pic\" property=\"pic\"/&gt; &lt;result column=\"items_createtime\" property=\"createtime\"/&gt; &lt;result column=\"items_detail\" property=\"detail\"/&gt; &lt;/association&gt; &lt;/collection&gt; &lt;/collection&gt; &lt;/resultMap&gt; æ˜ å°„æ–‡ä»¶12345&lt;!--æŸ¥è¯¢ç”¨æˆ·åŠç”¨æˆ·è´­ä¹°å•†å“ä¿¡æ¯, ä½¿ç”¨ resultMap--&gt; &lt;select id=\"findUserAndItemsResultMap\" resultMap=\"UserAndItemsResultMap\"&gt; SELECT orders.*, USER.username, USER.sex, USER.address, orderdetail.id orderdetail_id, orderdetail.items_id, orderdetail.items_num, orderdetail.orders_id FROM orders, USER,orderdetail WHERE orders.user_id = user.id AND orderdetail.orders_id=orders.id &lt;/select&gt; Mapper æ–‡ä»¶1public List&lt;User&gt; findUserAndItemsResultMap() throws Exception; æµ‹è¯•æ–‡ä»¶1234567891011@Test public void testFindUserAndItemsResultMap() throws Exception &#123; SqlSession sqlSession = sqlSessionFactory.openSession(); //åˆ›å»ºOrdersMapperCustomå¯¹è±¡,mybatisè‡ªåŠ¨ç”Ÿæˆä»£ç†å¯¹è±¡ OrdersMapperCustom ordersMapperCustom = sqlSession.getMapper(OrdersMapperCustom.class); //è°ƒç”¨OrdersMapperCustomçš„æ–¹æ³• List&lt;User&gt; list = ordersMapperCustom.findUserAndItemsResultMap(); System.out.println(list); sqlSession.close(); &#125; æµ‹è¯•ï¼š æˆ‘å»ï¼Œç«Ÿç„¶æŠ¥é”™äº†ï¼Œä½†æ˜¯ä¸è¦æ€•ï¼Œé€šè¿‡æŸ¥çœ‹æŠ¥é”™ä¿¡æ¯å¯ä»¥çŸ¥é“æˆ‘å¿˜è®°åœ¨ User.java ä¸­åŠ å…¥ orderlist å±æ€§äº†ï¼Œæ¥ä¸‹æ¥æˆ‘åŠ ä¸Šå»ï¼Œå¹¶åŠ ä¸Š getter å’Œ setter æ–¹æ³•ã€‚ 12345678//ç”¨æˆ·åˆ›å»ºçš„è®¢å•åˆ—è¡¨ private List&lt;Orders&gt; ordersList; public List&lt;Orders&gt; getOrdersList() &#123; return ordersList; &#125; public void setOrdersList(List&lt;Orders&gt; ordersList) &#123; this.ordersList = ordersList; &#125; å†æ¬¡æµ‹è¯•å°±èƒ½æˆåŠŸäº†ã€‚ å¤šå¯¹å¤šæŸ¥è¯¢æ€»ç»“å°†æŸ¥è¯¢ç”¨æˆ·è´­ä¹°çš„å•†å“ä¿¡æ¯æ˜ç»†æ¸…å•ï¼Œï¼ˆç”¨æˆ·åã€ç”¨æˆ·åœ°å€ã€è´­ä¹°å•†å“åç§°ã€è´­ä¹°å•†å“æ—¶é—´ã€è´­ä¹°å•†å“æ•°é‡ï¼‰ é’ˆå¯¹ä¸Šè¾¹çš„éœ€æ±‚å°±ä½¿ç”¨resultTypeå°†æŸ¥è¯¢åˆ°çš„è®°å½•æ˜ å°„åˆ°ä¸€ä¸ªæ‰©å±•çš„pojoä¸­ï¼Œå¾ˆç®€å•å®ç°æ˜ç»†æ¸…å•çš„åŠŸèƒ½ã€‚ ä¸€å¯¹å¤šæ˜¯å¤šå¯¹å¤šçš„ç‰¹ä¾‹ï¼Œå¦‚ä¸‹éœ€æ±‚ï¼š æŸ¥è¯¢ç”¨æˆ·è´­ä¹°çš„å•†å“ä¿¡æ¯ï¼Œç”¨æˆ·å’Œå•†å“çš„å…³ç³»æ˜¯å¤šå¯¹å¤šå…³ç³»ã€‚ éœ€æ±‚1ï¼š æŸ¥è¯¢å­—æ®µï¼šç”¨æˆ·è´¦å·ã€ç”¨æˆ·åç§°ã€ç”¨æˆ·æ€§åˆ«ã€å•†å“åç§°ã€å•†å“ä»·æ ¼(æœ€å¸¸è§) ä¼ä¸šå¼€å‘ä¸­å¸¸è§æ˜ç»†åˆ—è¡¨ï¼Œç”¨æˆ·è´­ä¹°å•†å“æ˜ç»†åˆ—è¡¨ï¼Œ ä½¿ç”¨resultTypeå°†ä¸Šè¾¹æŸ¥è¯¢åˆ—æ˜ å°„åˆ°pojoè¾“å‡ºã€‚ éœ€æ±‚2ï¼š æŸ¥è¯¢å­—æ®µï¼šç”¨æˆ·è´¦å·ã€ç”¨æˆ·åç§°ã€è´­ä¹°å•†å“æ•°é‡ã€å•†å“æ˜ç»†ï¼ˆé¼ æ ‡ç§»ä¸Šæ˜¾ç¤ºæ˜ç»†ï¼‰ ä½¿ç”¨resultMapå°†ç”¨æˆ·è´­ä¹°çš„å•†å“æ˜ç»†åˆ—è¡¨æ˜ å°„åˆ°userå¯¹è±¡ä¸­ã€‚ æ€»ç»“ï¼š ä½¿ç”¨resultMapæ˜¯é’ˆå¯¹é‚£äº›å¯¹æŸ¥è¯¢ç»“æœæ˜ å°„æœ‰ç‰¹æ®Šè¦æ±‚çš„åŠŸèƒ½ï¼Œï¼Œæ¯”å¦‚ç‰¹æ®Šè¦æ±‚æ˜ å°„æˆlistä¸­åŒ…æ‹¬å¤šä¸ªlistã€‚ ResultMap æ€»ç»“resultTypeï¼šä½œç”¨ï¼š å°†æŸ¥è¯¢ç»“æœæŒ‰ç…§sqlåˆ—åpojoå±æ€§åä¸€è‡´æ€§æ˜ å°„åˆ°pojoä¸­ã€‚ åœºåˆï¼š å¸¸è§ä¸€äº›æ˜ç»†è®°å½•çš„å±•ç¤ºï¼Œæ¯”å¦‚ç”¨æˆ·è´­ä¹°å•†å“æ˜ç»†ï¼Œå°†å…³è”æŸ¥è¯¢ä¿¡æ¯å…¨éƒ¨å±•ç¤ºåœ¨é¡µé¢æ—¶ï¼Œæ­¤æ—¶å¯ç›´æ¥ä½¿ç”¨resultTypeå°†æ¯ä¸€æ¡è®°å½•æ˜ å°„åˆ°pojoä¸­ï¼Œåœ¨å‰ç«¯é¡µé¢éå†listï¼ˆlistä¸­æ˜¯pojoï¼‰å³å¯ã€‚ resultMapï¼š ä½¿ç”¨associationå’Œcollectionå®Œæˆä¸€å¯¹ä¸€å’Œä¸€å¯¹å¤šé«˜çº§æ˜ å°„ï¼ˆå¯¹ç»“æœæœ‰ç‰¹æ®Šçš„æ˜ å°„è¦æ±‚ï¼‰ã€‚ associationï¼šä½œç”¨ï¼š å°†å…³è”æŸ¥è¯¢ä¿¡æ¯æ˜ å°„åˆ°ä¸€ä¸ªpojoå¯¹è±¡ä¸­ã€‚ åœºåˆï¼š ä¸ºäº†æ–¹ä¾¿æŸ¥è¯¢å…³è”ä¿¡æ¯å¯ä»¥ä½¿ç”¨associationå°†å…³è”è®¢å•ä¿¡æ¯æ˜ å°„ä¸ºç”¨æˆ·å¯¹è±¡çš„pojoå±æ€§ä¸­ï¼Œæ¯”å¦‚ï¼šæŸ¥è¯¢è®¢å•åŠå…³è”ç”¨æˆ·ä¿¡æ¯ã€‚ä½¿ç”¨resultTypeæ— æ³•å°†æŸ¥è¯¢ç»“æœæ˜ å°„åˆ°pojoå¯¹è±¡çš„pojoå±æ€§ä¸­ï¼Œæ ¹æ®å¯¹ç»“æœé›†æŸ¥è¯¢éå†çš„éœ€è¦é€‰æ‹©ä½¿ç”¨resultTypeè¿˜æ˜¯resultMapã€‚ collectionï¼šä½œç”¨ï¼š å°†å…³è”æŸ¥è¯¢ä¿¡æ¯æ˜ å°„åˆ°ä¸€ä¸ªlisté›†åˆä¸­ã€‚ åœºåˆï¼š ä¸ºäº†æ–¹ä¾¿æŸ¥è¯¢éå†å…³è”ä¿¡æ¯å¯ä»¥ä½¿ç”¨collectionå°†å…³è”ä¿¡æ¯æ˜ å°„åˆ°listé›†åˆä¸­ï¼Œæ¯”å¦‚ï¼šæŸ¥è¯¢ç”¨æˆ·æƒé™èŒƒå›´æ¨¡å—åŠæ¨¡å—ä¸‹çš„èœå•ï¼Œå¯ä½¿ç”¨collectionå°†æ¨¡å—æ˜ å°„åˆ°æ¨¡å—listä¸­ï¼Œå°†èœå•åˆ—è¡¨æ˜ å°„åˆ°æ¨¡å—å¯¹è±¡çš„èœå•listå±æ€§ä¸­ï¼Œè¿™æ ·çš„ä½œçš„ç›®çš„ä¹Ÿæ˜¯æ–¹ä¾¿å¯¹æŸ¥è¯¢ç»“æœé›†è¿›è¡Œéå†æŸ¥è¯¢ã€‚å¦‚æœä½¿ç”¨resultTypeæ— æ³•å°†æŸ¥è¯¢ç»“æœæ˜ å°„åˆ°listé›†åˆä¸­ã€‚","tags":[{"name":"Mybatis","slug":"Mybatis","permalink":"http://yoursite.com/tags/Mybatis/"},{"name":"SpringMVC","slug":"SpringMVC","permalink":"http://yoursite.com/tags/SpringMVC/"}]},{"title":"Spring MVCç³»åˆ—æ–‡ç« ï¼ˆäºŒï¼‰ï¼šSpring MVC+Hibernate JPAæ­å»ºçš„åšå®¢ç³»ç»Ÿé¡¹ç›®ä¸­æ‰€é‡åˆ°çš„å‘","date":"2017-06-12T16:00:00.000Z","path":"2017/06/13/Spring MVC+Hibernate JPAæ­å»ºçš„åšå®¢ç³»ç»Ÿé¡¹ç›®ä¸­æ‰€é‡åˆ°çš„å‘/","text":"é¡¹ç›®ä»£ç åœ°å€ï¼šhttps://github.com/zhisheng17/springmvcæœ€è¿‘åœ¨å­¦ä¹  Spring MVC ï¼Œå…¶ä¸­åœ¨åšä¸€ä¸ªç®€å•çš„åšå®¢ç³»ç»Ÿdemoï¼Œæ˜¯ä½¿ç”¨ SpringMVC é›†æˆ Spring Data JPAï¼ˆç”± Hibernate JPA æä¾›ï¼‰ï¼Œæ¥è¿›è¡Œå¼ºå¤§çš„æ•°æ®åº“è®¿é—®ã€‚ç»“æœå…¶ä¸­é‡åˆ°çš„å‘ä¸ æ˜¯ä¸€ç‚¹ç‚¹å•Šï¼Œæˆ‘å·®ç‚¹å´©æºƒäº†ï¼Œå…¶ä¸­æœ€å¤§çš„åŸå› å°±æ˜¯ç”±äº Hibernate JPA ä¸­çš„bugäº†ï¼Œåæ­£ä¸€å¼€å§‹ è¿˜ä¸çŸ¥é“æ˜¯è¿™ä¸ªé—®é¢˜ï¼Œå¯¼è‡´æŠ˜è…¾äº†å¿«ä¸€å¤©çš„æ—¶é—´ã€‚æƒ³æƒ³éƒ½å¯æ€•å•Šã€‚ mvc-dispatch-servlet.xmlä»£ç  12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;&lt;beans xmlns=\"http://www.springframework.org/schema/beans\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:context=\"http://www.springframework.org/schema/context\" xmlns:mvc=\"http://www.springframework.org/schema/mvc\" xmlns:jpa=\"http://www.springframework.org/schema/data/jpa\" xmlns:tx=\"http://www.springframework.org/schema/tx\" xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd http://www.springframework.org/schema/data/jpa http://www.springframework.org/schema/data/jpa/spring-jpa.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd\"&gt; &lt;!--æŒ‡æ˜ controller æ‰€åœ¨åŒ…ï¼Œå¹¶æ‰«æå…¶ä¸­çš„æ³¨è§£--&gt; &lt;context:component-scan base-package=\"cn.zhisheng.controller\"/&gt; &lt;!-- é™æ€èµ„æº(jsã€imageç­‰)çš„è®¿é—® --&gt; &lt;mvc:default-servlet-handler/&gt; &lt;!-- å¼€å¯æ³¨è§£ --&gt; &lt;mvc:annotation-driven/&gt; &lt;!--ViewResolver è§†å›¾è§£æå™¨--&gt; &lt;!--ç”¨äºæ”¯æŒServletã€JSPè§†å›¾è§£æ--&gt; &lt;bean id=\"jspViewResolver\" class=\"org.springframework.web.servlet.view.InternalResourceViewResolver\"&gt; &lt;property name=\"viewClass\" value=\"org.springframework.web.servlet.view.JstlView\"/&gt; &lt;property name=\"prefix\" value=\"/WEB-INF/pages/\"/&gt; &lt;property name=\"suffix\" value=\".jsp\"/&gt; &lt;/bean&gt; &lt;!-- è¡¨ç¤ºJPA Repositoryæ‰€åœ¨çš„åŒ… --&gt; &lt;jpa:repositories base-package=\"cn.zhisheng.repository\"/&gt; &lt;bean id=\"entityManagerFactory\" class=\"org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean\"&gt; &lt;property name=\"persistenceUnitName\" value=\"defaultPersistenceUnit\"/&gt; &lt;property name=\"packagesToScan\" value=\"cn.zhisheng.model\" /&gt; &lt;property name=\"jpaVendorAdapter\"&gt; &lt;bean class=\"org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter\"/&gt; &lt;/property&gt; &lt;property name=\"jpaProperties\"&gt; &lt;props&gt; &lt;prop key=\"hibernate.connection.driver_class\"&gt;com.mysql.jdbc.Driver&lt;/prop&gt; &lt;prop key=\"hibernate.connection.url\"&gt;jdbc:mysql://localhost:3306/springdemo?useSSL=false&lt;/prop&gt; &lt;prop key=\"hibernate.connection.username\"&gt;root&lt;/prop&gt; &lt;prop key=\"hibernate.connection.password\"&gt;root&lt;/prop&gt; &lt;prop key=\"hibernate.show_sql\"&gt;false&lt;/prop&gt; &lt;prop key=\"hibernate.connection.useUnicode\"&gt;true&lt;/prop&gt; &lt;prop key=\"hibernate.connection.characterEncoding\"&gt;UTF-8&lt;/prop&gt; &lt;prop key=\"hibernate.format_sql\"&gt;true&lt;/prop&gt; &lt;prop key=\"hibernate.use_sql_comments\"&gt;true&lt;/prop&gt; &lt;prop key=\"hibernate.hbm2ddl.auto\"&gt;update&lt;/prop&gt; &lt;prop key=\"hibernate.connection.autoReconnect\"&gt;true&lt;/prop&gt; &lt;prop key=\"hibernate.dialect\"&gt;org.hibernate.dialect.MySQL5Dialect&lt;/prop&gt; &lt;prop key=\"connection.autoReconnectForPools\"&gt;true&lt;/prop&gt; &lt;prop key=\"connection.is-connection-validation-required\"&gt;true&lt;/prop&gt; &lt;prop key=\"hibernate.c3p0.validate\"&gt;true&lt;/prop&gt; &lt;prop key=\"hibernate.connection.provider_class\"&gt;org.hibernate.service.jdbc.connections.internal.C3P0ConnectionProvider&lt;/prop&gt; &lt;prop key=\"hibernate.c3p0.min_size\"&gt;5&lt;/prop&gt; &lt;prop key=\"hibernate.c3p0.max_size\"&gt;600&lt;/prop&gt; &lt;prop key=\"hibernate.c3p0.timeout\"&gt;1800&lt;/prop&gt; &lt;prop key=\"hibernate.c3p0.max_statements\"&gt;50&lt;/prop&gt; &lt;prop key=\"hibernate.c3p0.preferredTestQuery\"&gt;SELECT 1;&lt;/prop&gt; &lt;prop key=\"hibernate.c3p0.testConnectionOnCheckout\"&gt;true&lt;/prop&gt; &lt;prop key=\"hibernate.c3p0.idle_test_period\"&gt;3000&lt;/prop&gt; &lt;prop key=\"javax.persistence.validation.mode\"&gt;none&lt;/prop&gt; &lt;/props&gt; &lt;/property&gt; &lt;/bean&gt; &lt;!-- äº‹åŠ¡ç®¡ç† --&gt; &lt;bean id=\"transactionManager\" class=\"org.springframework.orm.jpa.JpaTransactionManager\"&gt; &lt;property name=\"entityManagerFactory\" ref=\"entityManagerFactory\"/&gt; &lt;/bean&gt; &lt;!-- å¼€å¯äº‹åŠ¡ç®¡ç†æ³¨è§£ --&gt; &lt;tx:annotation-driven transaction-manager=\"transactionManager\"/&gt;&lt;/beans&gt; pom.xml 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd\"&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;groupId&gt;cn.zhisheng&lt;/groupId&gt; &lt;artifactId&gt;springmvc&lt;/artifactId&gt; &lt;packaging&gt;war&lt;/packaging&gt; &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt; &lt;name&gt;springmvc Maven Webapp&lt;/name&gt; &lt;url&gt;http://maven.apache.org&lt;/url&gt; &lt;properties&gt; &lt;spring.version&gt;4.2.6.RELEASE&lt;/spring.version&gt; &lt;hibernate.version&gt;5.1.0.Final&lt;/hibernate.version&gt; &lt;/properties&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt; &lt;version&gt;$&#123;spring.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.data&lt;/groupId&gt; &lt;artifactId&gt;spring-data-jpa&lt;/artifactId&gt; &lt;version&gt;1.10.1.RELEASE&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.hibernate&lt;/groupId&gt; &lt;artifactId&gt;hibernate-entitymanager&lt;/artifactId&gt; &lt;version&gt;$&#123;hibernate.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.hibernate&lt;/groupId&gt; &lt;artifactId&gt;hibernate-c3p0&lt;/artifactId&gt; &lt;version&gt;$&#123;hibernate.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.mchange&lt;/groupId&gt; &lt;artifactId&gt;c3p0&lt;/artifactId&gt; &lt;version&gt;0.9.5.2&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;javax.servlet&lt;/groupId&gt; &lt;artifactId&gt;jstl&lt;/artifactId&gt; &lt;version&gt;1.2&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;mysql&lt;/groupId&gt; &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt; &lt;version&gt;5.1.39&lt;/version&gt; &lt;/dependency&gt; &lt;/dependencies&gt; &lt;build&gt; &lt;finalName&gt;springmvc&lt;/finalName&gt; &lt;plugins&gt; &lt;plugin&gt; &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt; &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt; &lt;configuration&gt; &lt;source&gt;1.8&lt;/source&gt; &lt;target&gt;1.8&lt;/target&gt; &lt;/configuration&gt; &lt;/plugin&gt; &lt;/plugins&gt; &lt;/build&gt;&lt;/project&gt; ä¸€å¼€å§‹æˆ‘æ˜¯ç”¨é»˜è®¤çš„åœ¨resourcesæ–‡ä»¶é‡Œé¢ç”Ÿæˆäº†persistence.xmlé…ç½®æ–‡ä»¶è¿›è¡Œæ•°æ®åº“é…ç½®çš„ï¼Œåæ¥ç”±äºç”¨é‚£ç§æ–¹æ³•ï¼Œç¢°åˆ°çš„é—®é¢˜æœ‰å¾ˆå¤šï¼Œè‡ªå·±æäº†å¥½å‡ ä¸ªä¸ªå°æ—¶éƒ½æ²¡å¼„å¥½ï¼Œåªå¥½æ¢ç§æ–¹æ³•ï¼Œæ²¡æƒ³åˆ°ç«Ÿç„¶è¿˜æ˜¯è¿™ç§æ•ˆæœï¼ˆæ³ªå´©ï¼‰ï¼Œçœ‹æ¥æ˜¯ä¸æ²»æ ‡ä¹Ÿä¸æ²»æœ¬ã€‚ æ— å¥ˆï¼Œåªå¥½ç¡¬åˆšäº†ï¼Œç¢°åˆ°é”™è¯¯ï¼Œç™¾åº¦+googleï¼Œçœ‹äº†å¤§é‡çš„çš„è§£å†³æ–¹æ³•ï¼Œéƒ½æ˜¯æ²¡ç”¨ï¼Œæ…¢æ…¢çš„æˆ‘æ‰€åŠ çš„jaråŒ…è¶Šæ¥è¶Šå¤šï¼Œç”¨mavenç®¡ç†çš„ä¾èµ–çš„ä¹Ÿå˜å¾—å¤šèµ·æ¥äº†ï¼Œä½†ç»ˆç©¶æ˜¯ä¸èƒ½å¤Ÿè§£å†³é—®é¢˜çš„ã€‚ å…¶å®è¿™æ—¶æˆ‘çœ‹äº†è¿™ä¹ˆå¤šçš„åšå®¢å’Œè§£å†³æ–¹æ³•ï¼Œæˆ‘å·²ç»çŸ¥é“äº†æ˜¯ Hibernate JPA çš„bugé—®é¢˜ï¼Œé€”ä¸­è‡ªå·±ä¹Ÿæ¢äº†ä¸€äº›ç‰ˆæœ¬ï¼Œè¿˜æ˜¯æ²¡èƒ½è§£å†³åŠæ³•ã€‚ æœ€ååœ¨åƒå®Œå®Œæ™šé¥­åï¼ŒåˆæŠ˜è…¾äº†å¿«ä¸‰å°æ—¶ï¼Œç»ˆäºæ‰¾åˆ°å¯é æœ‰ç”¨çš„è§£å†³æ–¹æ¡ˆäº†ã€‚ è¿è¡ŒæˆåŠŸåï¼Œæˆ‘å½“æ—¶å°±æ¿€åŠ¨èµ·æ¥äº†ã€‚é©¬ä¸¹ï¼Œè€å­ç»ˆäºå°†ä½ è§£å†³äº†ã€‚ æ‰€ä»¥åœ¨è¿™é‡Œç«‹é©¬å°±å°†è‡ªå·±è¿™æ¬¡çš„è¡€å´©å†å²çºªå½•ä¸‹æ¥ã€‚ ä¸‹é¢å†™ä¸‹é‡åˆ°çš„é—®é¢˜ï¼šï¼ˆå…¶ä¸­æœ‰äº›å¯èƒ½è¿˜ä¸è®°å¾—å†™äº†ï¼‰ java.lang.ClassNotFoundException: javax.persistence.EntityManager java.lang.NoSuchMethodError: javax.persistence.JoinColumn.foreignKey()Ljavax/persistence/ForeignKey; javax.persistence.PersistenceException: No Persistence provider for EntityManager named defaultPersistenceUnit javax.persistence.PersistenceException: No Persistence provider for EntityManager named defaultPersi java.lang.NoClassDefFoundError: org/hibernate/ejb/HibernatePersistence java.lang.NoClassDefFoundError: org/slf4j/LoggerFactory java.lang.ClassNotFoundException: org.hibernate.MappingException NoSuchMethodError: javax.persistence.xxx ç­‰ï¼Œè¿˜æœ‰å‡ ä¸ªï¼Œå¿˜è®°äº†ã€‚ã€‚ é¦–å…ˆé€šè¿‡æŠ¥é”™ä¿¡æ¯å¯ä»¥çŸ¥é“æœ‰äº›æ˜¯å› ä¸ºjaråŒ…çš„é—®é¢˜ï¼Œä½†æ˜¯å¹¶ä¸æ˜¯å…‰æ˜¯ç¼ºå°‘jaråŒ…çš„é—®é¢˜ï¼Œå¾ˆå¤§çš„åŸ å› å°±æ˜¯å› ä¸ºjaråŒ…çš„ç‰ˆæœ¬ä¸åŒï¼Œåˆšå¥½é‚£ä¸ªjaråŒ…åˆæ˜¯æœ‰é—®é¢˜çš„ï¼ˆè‡ªèº«æœ‰bugï¼‰ã€‚ å°±æ¯”å¦‚é”™è¯¯ï¼š java.lang.NoSuchMethodError: javax.persistence.JoinColumn.foreignKey()Ljavax/persistence/ForeignKey; å°±æ˜¯å› ä¸ºJAVAEE6.0ä¸­çš„ javax.persistence.jarä¸ hibernate4.3.8ä¸­çš„hibernate-jpa-2.1-api-1.0.0.Final.jarå†²çª JoinColumn.foreignKey() was introduced with JPA 2.1, which was not implemented by Hibernate 4 until version 4.3. If youâ€™re using an older version of Hibernate 4 then try upgrading to 4.3.x. If youâ€™re already using Hibernate 4.3 then make sure youâ€™re also using JPA 2.1 to make sure the API and implementation match up. å›¾ç‰‡æ¥è‡ª : http://stackoverflow.com/questions/24588860/error-javax-persistence-joincolumn-foreignkeyljavax-persistence-foreignkey-wi I finally solved this similar problem, there was an old version(hibernate-jpa-2.0-api-1.0.0-Final.jar) in my lib folder which I guess has been preventing maven dependency from loading. So after I manually deleted it and added (hibernate-jpa-2.1-api-1.0.0-Final.jar) everything started to work. æ„æ€å¤§æ¦‚å°±æ˜¯ï¼š å› ä¸ºJAVAEE6.0ä¸­çš„ javax.persistence.jarä¸ hibernate4.3.8ä¸­çš„hibernate-jpa-2.1-api-1.0.0.Final.jarå†²çª ï¼Œæˆ‘ä»¬åœ¨pomæ–‡ä»¶ä¸‹æ·»åŠ ä¾èµ–åï¼Œç«Ÿç„¶æ²¡å‘ç°åœ¨ springmvcï¼ˆé¡¹ç›®åç§°ï¼‰\\target\\springmvcï¼ˆé¡¹ç›®åç§°ï¼‰\\WEB-INF\\lib ä¸‹çœ‹åˆ° javax.persistence.jar æ–‡ä»¶ï¼Œç»“æœç«Ÿç„¶åœ¨ springmvc\\libä¸‹æ‰¾åˆ°ä»–äº†ã€‚ è§£å†³åŠæ³•å°±æ˜¯åœ¨ pomæ–‡ä»¶å’Œ mvc-dispatcher-servlet.xml éƒ½é…ç½®å¥½çš„æƒ…å†µä¸‹ï¼Œå°† springmvc\\libä¸‹çš„ javax.persistence.jar åˆ é™¤ã€‚ æœ€åå†è¯´ä¸€å¥ï¼šThough the error drove almost crazy, hold on, you wil get smile ï¼ Fighting","tags":[{"name":"Bootstrap","slug":"Bootstrap","permalink":"http://yoursite.com/tags/Bootstrap/"},{"name":"Java","slug":"Java","permalink":"http://yoursite.com/tags/Java/"},{"name":"MySQL","slug":"MySQL","permalink":"http://yoursite.com/tags/MySQL/"},{"name":"Spring","slug":"Spring","permalink":"http://yoursite.com/tags/Spring/"},{"name":"Spring MVC","slug":"Spring-MVC","permalink":"http://yoursite.com/tags/Spring-MVC/"},{"name":"Hibernate JPA","slug":"Hibernate-JPA","permalink":"http://yoursite.com/tags/Hibernate-JPA/"}]},{"title":"Spring MVCç³»åˆ—æ–‡ç« ï¼ˆä¸€ï¼‰ï¼šSpring MVC + Hibernate JPA + Bootstrap æ­å»ºçš„åšå®¢ç³»ç»Ÿ Demo","date":"2017-06-12T16:00:00.000Z","path":"2017/06/13/Spring MVC + Hibernate JPA + Bootstrap æ­å»ºçš„åšå®¢ç³»ç»Ÿ/","text":"ç›¸å…³é˜…è¯»ï¼š1ã€Spring MVC+Hibernate JPA+ Bootstrap æ­å»ºçš„åšå®¢ç³»ç»Ÿé¡¹ç›®ä¸­æ‰€é‡åˆ°çš„å‘ ç”±äºæ•´ä¸ªç³»ç»Ÿä¸æ˜¯å¾ˆéš¾ï¼Œè¿™é‡Œå°±ä¸è¯¦ç»†ä»‹ç»äº†ï¼Œæˆ‘ç›¸ä¿¡çœ‹æºç çš„è¯ï¼Œåº”è¯¥èƒ½å¤Ÿçœ‹å¾—æ‡‚ã€‚ æºç åœ°å€ï¼šhttps://github.com/zhisheng17/springmvcæ•°æ®åº“ï¼šspringdemo.sql ä¸‹é¢ç»™å‡ºä¸‹æ•´ä¸ªç³»ç»Ÿçš„æˆªå›¾å§ï¼Œè§‰å¾—ä¸é”™ï¼Œå¯ä»¥ç»™ä¸ª star ï¼Œå“ˆå“ˆï¼åç»­ç»§ç»­åœ¨è¿™ä¸ªé¡¹ç›®ä¸­åŠ å…¥æ–°çš„é¡¹ç›®ã€‚ æˆªå›¾ï¼šé¦–é¡µ ç”¨æˆ·ç®¡ç†æ¨¡å— ç”¨æˆ·åˆ—è¡¨ æ·»åŠ ç”¨æˆ· ç”¨æˆ·ä¿¡æ¯è¯¦æƒ… æ›´æ–°ç”¨æˆ·ä¿¡æ¯ åˆ é™¤ç”¨æˆ· åšå®¢ç®¡ç†æ¨¡å— åšå®¢åˆ—è¡¨ åšå®¢è¯¦æƒ… æ·»åŠ åšå®¢ æ›´æ–°åšå®¢ åˆ é™¤åšå®¢","tags":[{"name":"Bootstrap","slug":"Bootstrap","permalink":"http://yoursite.com/tags/Bootstrap/"},{"name":"Java","slug":"Java","permalink":"http://yoursite.com/tags/Java/"},{"name":"MySQL","slug":"MySQL","permalink":"http://yoursite.com/tags/MySQL/"},{"name":"Spring","slug":"Spring","permalink":"http://yoursite.com/tags/Spring/"},{"name":"Spring MVC","slug":"Spring-MVC","permalink":"http://yoursite.com/tags/Spring-MVC/"},{"name":"Hibernate JPA","slug":"Hibernate-JPA","permalink":"http://yoursite.com/tags/Hibernate-JPA/"}]},{"title":"Pythonçˆ¬è™«å®æˆ˜ä¹‹çˆ¬å–ç™¾åº¦è´´å§å¸–å­","date":"2017-06-12T16:00:00.000Z","path":"2017/06/13/Pythonçˆ¬è™«å®æˆ˜ä¹‹çˆ¬å–ç™¾åº¦è´´å§å¸–å­/","text":"å¤§å®¶å¥½ï¼Œä¸Šæ¬¡æˆ‘ä»¬å®éªŒäº†çˆ¬å–äº†ç³—äº‹ç™¾ç§‘çš„æ®µå­ï¼Œé‚£ä¹ˆè¿™æ¬¡æˆ‘ä»¬æ¥å°è¯•ä¸€ä¸‹çˆ¬å–ç™¾åº¦è´´å§çš„å¸–å­ã€‚ä¸ä¸Šä¸€ç¯‡ä¸åŒçš„æ˜¯ï¼Œè¿™æ¬¡æˆ‘ä»¬éœ€è¦ç”¨åˆ°æ–‡ä»¶çš„ç›¸å…³æ“ä½œã€‚ æœ¬ç¯‡ç›®æ ‡ å¯¹ç™¾åº¦è´´å§çš„ä»»æ„å¸–å­è¿›è¡ŒæŠ“å– æŒ‡å®šæ˜¯å¦åªæŠ“å–æ¥¼ä¸»å‘å¸–å†…å®¹ å°†æŠ“å–åˆ°çš„å†…å®¹åˆ†æå¹¶ä¿å­˜åˆ°æ–‡ä»¶ 1. URLæ ¼å¼çš„ç¡®å®šé¦–å…ˆï¼Œæˆ‘ä»¬å…ˆè§‚å¯Ÿä¸€ä¸‹ç™¾åº¦è´´å§çš„ä»»æ„ä¸€ä¸ªå¸–å­ã€‚ æ¯”å¦‚ï¼šhttp://tieba.baidu.com/p/3138733512?see_lz=1&amp;pn=1ï¼Œè¿™æ˜¯ä¸€ä¸ªå…³äºNBA50å¤§çš„ç›˜ç‚¹ï¼Œåˆ†æä¸€ä¸‹è¿™ä¸ªåœ°å€ã€‚ http:// ä»£è¡¨èµ„æºä¼ è¾“ä½¿ç”¨httpåè®® tieba.baidu.com æ˜¯ç™¾åº¦çš„äºŒçº§åŸŸåï¼ŒæŒ‡å‘ç™¾åº¦è´´å§çš„æœåŠ¡å™¨ã€‚ /p/3138733512 æ˜¯æœåŠ¡å™¨æŸä¸ªèµ„æºï¼Œå³è¿™ä¸ªå¸–å­çš„åœ°å€å®šä½ç¬¦ see_lz å’Œ pn æ˜¯è¯¥ URL çš„ä¸¤ä¸ªå‚æ•°ï¼Œåˆ†åˆ«ä»£è¡¨äº†åªçœ‹æ¥¼ä¸»å’Œå¸–å­é¡µç ï¼Œç­‰äº1è¡¨ç¤ºè¯¥æ¡ä»¶ä¸ºçœŸ æ‰€ä»¥æˆ‘ä»¬å¯ä»¥æŠŠURLåˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œä¸€éƒ¨åˆ†ä¸ºåŸºç¡€éƒ¨åˆ†ï¼Œä¸€éƒ¨åˆ†ä¸ºå‚æ•°éƒ¨åˆ†ã€‚ ä¾‹å¦‚ï¼Œä¸Šé¢çš„URLæˆ‘ä»¬åˆ’åˆ†åŸºç¡€éƒ¨åˆ†æ˜¯ http://tieba.baidu.com/p/3138733512ï¼Œå‚æ•°éƒ¨åˆ†æ˜¯ ?see_lz=1&amp;pn=1 2. é¡µé¢çš„æŠ“å–ç†Ÿæ‚‰äº†URLçš„æ ¼å¼ï¼Œé‚£å°±è®©æˆ‘ä»¬ç”¨urllib2åº“æ¥è¯•ç€æŠ“å–é¡µé¢å†…å®¹å§ã€‚ä¸Šä¸€ç¯‡ç³—äº‹ç™¾ç§‘æˆ‘ä»¬æœ€åæ”¹æˆäº†é¢å‘å¯¹è±¡çš„ç¼–ç æ–¹å¼ï¼Œè¿™æ¬¡æˆ‘ä»¬ç›´æ¥å°è¯•ä¸€ä¸‹ï¼Œå®šä¹‰ä¸€ä¸ªç±»åå«BDTB(ç™¾åº¦è´´å§)ï¼Œä¸€ä¸ªåˆå§‹åŒ–æ–¹æ³•ï¼Œä¸€ä¸ªè·å–é¡µé¢çš„æ–¹æ³•ã€‚ å…¶ä¸­ï¼Œæœ‰äº›å¸–å­æˆ‘ä»¬æƒ³æŒ‡å®šç»™ç¨‹åºæ˜¯å¦è¦åªçœ‹æ¥¼ä¸»ï¼Œæ‰€ä»¥æˆ‘ä»¬æŠŠåªçœ‹æ¥¼ä¸»çš„å‚æ•°åˆå§‹åŒ–æ”¾åœ¨ç±»çš„åˆå§‹åŒ–ä¸Šï¼Œå³initæ–¹æ³•ã€‚å¦å¤–ï¼Œè·å–é¡µé¢çš„æ–¹æ³•æˆ‘ä»¬éœ€è¦çŸ¥é“ä¸€ä¸ªå‚æ•°å°±æ˜¯å¸–å­é¡µç ï¼Œæ‰€ä»¥è¿™ä¸ªå‚æ•°çš„æŒ‡å®šæˆ‘ä»¬æ”¾åœ¨è¯¥æ–¹æ³•ä¸­ã€‚ ç»¼ä¸Šï¼Œæˆ‘ä»¬åˆæ­¥æ„å»ºå‡ºåŸºç¡€ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526#-*-coding:utf8-*-#created by 10412import urllibimport urllib2import re#ç™¾åº¦è´´å§çˆ¬è™«ç±»class BDTB: #åˆå§‹åŒ–ï¼Œä¼ å…¥åŸºåœ°å€ï¼Œæ˜¯å¦åªçœ‹æ¥¼ä¸»çš„å‚æ•° def __init__(self, baseUrl, seeLZ): self.baseURL = baseUrl self.seeLZ = &apos;?see_lz=&apos; + str(seeLZ) #ä¼ å…¥é¡µç ï¼Œè·å–è¯¥é¡µå¸–å­çš„ä»£ç  def getPage(self, pageNum): try: url = self.baseURL + self.seeLZ + &apos;&amp;pn=&apos; + str(pageNum) request = urllib2.Request(url) response = urllib2.urlopen(request) print response.read() return response except urllib2.URLError, e: if hasattr(e, &quot;reason&quot;): print u&quot;è¿æ¥ç™¾åº¦è´´å§å¤±è´¥,é”™è¯¯åŸå› &quot;,e.reason return NonebaseURL = &apos;http://tieba.baidu.com/p/3138733512&apos;bdtb = BDTB(baseURL, 1)bdtb.getPage(1) è¿è¡Œä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å±å¹•ä¸Šæ‰“å°å‡ºäº†è¿™ä¸ªå¸–å­ç¬¬ä¸€é¡µæ¥¼ä¸»å‘è¨€çš„æ‰€æœ‰å†…å®¹ï¼Œå½¢å¼ä¸ºHTMLä»£ç ã€‚ 3. æå–ç›¸å…³ä¿¡æ¯1)æå–å¸–å­æ ‡é¢˜åœ¨æµè§ˆå™¨ä¸­å®¡æŸ¥å…ƒç´ ï¼Œæˆ–è€…æŒ‰F12ï¼ŒæŸ¥çœ‹é¡µé¢æºä»£ç ï¼Œæˆ‘ä»¬æ‰¾åˆ°æ ‡é¢˜æ‰€åœ¨çš„ä»£ç æ®µå¦‚ä¸‹: 1&lt;h3 class=\"core_title_txt pull-left text-overflow \" title=\"çº¯åŸåˆ›æˆ‘å¿ƒä¸­çš„NBA2014-2015èµ›å­£ç°å½¹50å¤§\" style=\"width: 416px\"&gt;çº¯åŸåˆ›æˆ‘å¿ƒä¸­çš„NBA2014-2015èµ›å­£ç°å½¹50å¤§&lt;/h3&gt; æ‰€ä»¥æˆ‘ä»¬è¦æå– &lt;h3&gt; ä¸­çš„å†…å®¹ï¼Œå› ä¸ºä¸€å¼€å§‹å¯ä»¥æŸ¥çœ‹æ•´ä¸ªç•Œé¢çš„åŸä»£ç ï¼ŒæŸ¥çœ‹é‡Œé¢å«æœ‰ &lt;h3&gt;æ ‡ç­¾çš„ä¸æ­¢ä¸€ä¸ªã€‚æ‰€ä»¥éœ€è¦å†™æ­£åˆ™è¡¨è¾¾å¼æ¥åŒ¹é…ï¼Œå¦‚ä¸‹ï¼š 1&lt;h3 class=&quot;core_title_txt.*?&gt;(.*?)&lt;/h3&gt; ç„¶åï¼Œæˆ‘ä»¬å¯ä»¥å†™ä¸ªè·å–æ ‡é¢˜çš„æ–¹æ³• 12345678910# è·å–å¸–å­æ ‡é¢˜ def getTitle(self): page = self.getPage(1) pattern = re.compile(&apos;&lt;h3 class=&quot;core_title_txt.*?&gt;(.*?)&lt;/h3&gt;&apos;, re.S) result = re.search(pattern, page) if result: # print result.group(1) #æµ‹è¯•è¾“å‡º return result.group(1).strip() else: return None 2ï¼‰æå–å¸–å­é¡µæ•°åŒæ ·åœ°ï¼Œå¸–å­æ€»é¡µæ•°æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡åˆ†æé¡µé¢ä¸­çš„å…±?é¡µæ¥è·å–ã€‚ 1&lt;li class=\"l_reply_num\" style=\"margin-left:8px\"&gt;&lt;span class=\"red\" style=\"margin-right:3px\"&gt;4784&lt;/span&gt;å›å¤è´´ï¼Œå…±&lt;span class=\"red\"&gt;36&lt;/span&gt;é¡µ&lt;/li&gt; æ‰€ä»¥æˆ‘ä»¬çš„è·å–æ€»é¡µæ•°çš„æ–¹æ³•å¦‚ä¸‹ 12345678910#è·å–å¸–å­ä¸€å…±æœ‰å¤šå°‘é¡µdef getPageNum(self): page = self.getPage(1) pattern = re.compile('&lt;li class=\"l_reply_num.*?&lt;/span&gt;.*?&lt;span.*?&gt;(.*?)&lt;/span&gt;',re.S) result = re.search(pattern,page) if result: #print result.group(1) #æµ‹è¯•è¾“å‡º return result.group(1).strip() else: return None 3ï¼‰æå–æ­£æ–‡å†…å®¹å®¡æŸ¥å…ƒç´ ï¼Œå¯ä»¥çœ‹åˆ°ç™¾åº¦è´´å§æ¯ä¸€å±‚æ¥¼çš„ä¸»è¦å†…å®¹éƒ½åœ¨æ ‡ç­¾é‡Œé¢ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å†™å¦‚ä¸‹çš„æ­£åˆ™è¡¨è¾¾å¼ 1&lt;div id=\"post_content_.*?&gt;(.*?)&lt;/div&gt; æ‰€ä»¥æå–æ­£æ–‡å†…å®¹çš„æ–¹æ³•ï¼š 123456#è·å–æ¯ä¸€å±‚æ¥¼çš„å†…å®¹,ä¼ å…¥é¡µé¢å†…å®¹def getContent(self,page): pattern = re.compile('&lt;div id=\"post_content_.*?&gt;(.*?)&lt;/div&gt;',re.S) items = re.findall(pattern,page) for item in items: print item è¿è¡Œæˆªå›¾å¦‚ä¸‹ï¼š å¯ä»¥çœ‹åˆ°æœ‰å¾ˆå¤šçš„æ¢è¡Œç¬¦å’Œå›¾ç‰‡ç¬¦ï¼Œæ—¢ç„¶å‡ºç°è¿™æ ·çš„æƒ…å†µï¼Œé‚£è‚¯å®šä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ç»“æœã€‚é‚£æˆ‘ä»¬å°±å¿…é¡»è¦å°†æ–‡æœ¬è¿›è¡Œå¤„ç†ï¼Œå°†å„ç§å¤æ‚çš„æ ‡ç­¾ç»™å‰”é™¤ï¼Œè¿˜åŸå¸–å­çš„åŸæ¥é¢è²Œã€‚å¯ä»¥ä½¿ç”¨ä¸€ä¸ªæ–¹æ³•æˆ–è€…ç±»å°†è¿™ä¸ªå¤„ç†æ–‡æœ¬çš„å®ç°ï¼Œä¸è¿‡ä¸ºäº†æ›´å¥½çš„ä»£ç é‡ç”¨å’Œæ¶æ„ï¼Œè¿˜æ˜¯å»ºè®®ä½¿ç”¨ä¸€ä¸ªç±»ã€‚ æˆ‘ä»¬å°†è¿™ä¸ªç±»å‘½åä¸ºTooï¼ˆå·¥å…·ç±»ï¼‰ï¼Œé‡Œé¢å®šä¹‰ä¸€ä¸ªreplaceæ–¹æ³•ï¼Œæ›¿æ¢å„ç§æ ‡ç­¾ã€‚ç„¶ååœ¨ç±»ä¸­å®šä¹‰å‡ ä¸ªæ­£åˆ™è¡¨è¾¾å¼ï¼Œåˆ©ç”¨re.subæ–¹æ³•å¯¹æ–‡æœ¬è¿›è¡ŒåŒ¹é…åç„¶åæ›¿æ¢ã€‚ 123456789101112131415161718192021222324252627import re#å¤„ç†é¡µé¢æ ‡ç­¾ç±»class Tool: #å»é™¤imgæ ‡ç­¾,7ä½é•¿ç©ºæ ¼ removeImg = re.compile('&lt;img.*?&gt;| &#123;7&#125;|') #åˆ é™¤è¶…é“¾æ¥æ ‡ç­¾ removeAddr = re.compile('&lt;a.*?&gt;|&lt;/a&gt;') #æŠŠæ¢è¡Œçš„æ ‡ç­¾æ¢ä¸º\\n replaceLine = re.compile('&lt;tr&gt;|&lt;div&gt;|&lt;/div&gt;|&lt;/p&gt;') #å°†è¡¨æ ¼åˆ¶è¡¨&lt;td&gt;æ›¿æ¢ä¸º\\t replaceTD= re.compile('&lt;td&gt;') #æŠŠæ®µè½å¼€å¤´æ¢ä¸º\\nåŠ ç©ºä¸¤æ ¼ replacePara = re.compile('&lt;p.*?&gt;') #å°†æ¢è¡Œç¬¦æˆ–åŒæ¢è¡Œç¬¦æ›¿æ¢ä¸º\\n replaceBR = re.compile('&lt;br&gt;&lt;br&gt;|&lt;br&gt;') #å°†å…¶ä½™æ ‡ç­¾å‰”é™¤ removeExtraTag = re.compile('&lt;.*?&gt;') def replace(self,x): x = re.sub(self.removeImg,\"\",x) x = re.sub(self.removeAddr,\"\",x) x = re.sub(self.replaceLine,\"\\n\",x) x = re.sub(self.replaceTD,\"\\t\",x) x = re.sub(self.replacePara,\"\\n \",x) x = re.sub(self.replaceBR,\"\\n\",x) x = re.sub(self.removeExtraTag,\"\",x) #strip()å°†å‰åå¤šä½™å†…å®¹åˆ é™¤ return x.strip() åœ¨ä½¿ç”¨æ—¶ï¼Œæˆ‘ä»¬åªéœ€è¦åˆå§‹åŒ–ä¸€ä¸‹è¿™ä¸ªç±»ï¼Œç„¶åè°ƒç”¨replaceæ–¹æ³•å³å¯ã€‚ ç°åœ¨æ•´ä½“ä»£ç æ˜¯å¦‚ä¸‹è¿™æ ·å­çš„ï¼Œç°åœ¨æˆ‘çš„ä»£ç æ˜¯å†™åˆ°è¿™æ ·å­çš„: 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879#-*-coding:utf8-*-#created by 10412import urllibimport urllib2import re# å¤„ç†é¡µé¢æ ‡ç­¾ç±»class Tool: # å»é™¤imgæ ‡ç­¾,7ä½é•¿ç©ºæ ¼ removeImg = re.compile('&lt;img.*?&gt;| &#123;7&#125;|') # åˆ é™¤è¶…é“¾æ¥æ ‡ç­¾ removeAddr = re.compile('&lt;a.*?&gt;|&lt;/a&gt;') # æŠŠæ¢è¡Œçš„æ ‡ç­¾æ¢ä¸º\\n replaceLine = re.compile('&lt;tr&gt;|&lt;div&gt;|&lt;/div&gt;|&lt;/p&gt;') # å°†è¡¨æ ¼åˆ¶è¡¨&lt;td&gt;æ›¿æ¢ä¸º\\t replaceTD = re.compile('&lt;td&gt;') # æŠŠæ®µè½å¼€å¤´æ¢ä¸º\\nåŠ ç©ºä¸¤æ ¼ replacePara = re.compile('&lt;p.*?&gt;') # å°†æ¢è¡Œç¬¦æˆ–åŒæ¢è¡Œç¬¦æ›¿æ¢ä¸º\\n replaceBR = re.compile('&lt;br&gt;&lt;br&gt;|&lt;br&gt;') # å°†å…¶ä½™æ ‡ç­¾å‰”é™¤ removeExtraTag = re.compile('&lt;.*?&gt;') def replace(self, x): x = re.sub(self.removeImg, \"\", x) x = re.sub(self.removeAddr, \"\", x) x = re.sub(self.replaceLine, \"\\n\", x) x = re.sub(self.replaceTD, \"\\t\", x) x = re.sub(self.replacePara, \"\\n \", x) x = re.sub(self.replaceBR, \"\\n\", x) x = re.sub(self.removeExtraTag, \"\", x) # strip()å°†å‰åå¤šä½™å†…å®¹åˆ é™¤ return x.strip()# ç™¾åº¦è´´å§çˆ¬è™«ç±»class BDTB: # åˆå§‹åŒ–ï¼Œä¼ å…¥åŸºåœ°å€ï¼Œæ˜¯å¦åªçœ‹æ¥¼ä¸»çš„å‚æ•° def __init__(self, baseUrl, seeLZ): self.baseURL = baseUrl self.seeLZ = '?see_lz=' + str(seeLZ) self.tool = Tool() # ä¼ å…¥é¡µç ï¼Œè·å–è¯¥é¡µå¸–å­çš„ä»£ç  def getPage(self, pageNum): try: url = self.baseURL + self.seeLZ + '&amp;pn=' + str(pageNum) request = urllib2.Request(url) response = urllib2.urlopen(request) return response.read().decode('utf-8') except urllib2.URLError, e: if hasattr(e, \"reason\"): print u\"è¿æ¥ç™¾åº¦è´´å§å¤±è´¥,é”™è¯¯åŸå› \", e.reason return None # è·å–å¸–å­æ ‡é¢˜ def getTitle(self): page = self.getPage(1) pattern = re.compile('&lt;h1 class=\"core_title_txt.*?&gt;(.*?)&lt;/h1&gt;', re.S) result = re.search(pattern, page) if result: # print result.group(1) #æµ‹è¯•è¾“å‡º return result.group(1).strip() else: return None # è·å–å¸–å­ä¸€å…±æœ‰å¤šå°‘é¡µ def getPageNum(self): page = self.getPage(1) pattern = re.compile('&lt;li class=\"l_reply_num.*?&lt;/span&gt;.*?&lt;span.*?&gt;(.*?)&lt;/span&gt;', re.S) result = re.search(pattern, page) if result: # print result.group(1) #æµ‹è¯•è¾“å‡º return result.group(1).strip() else: return None # è·å–æ¯ä¸€å±‚æ¥¼çš„å†…å®¹,ä¼ å…¥é¡µé¢å†…å®¹ def getContent(self, page): pattern = re.compile('&lt;div id=\"post_content_.*?&gt;(.*?)&lt;/div&gt;', re.S) items = re.findall(pattern, page) # for item in items: # print item print self.tool.replace(items[1])baseURL = 'http://tieba.baidu.com/p/3138733512'bdtb = BDTB(baseURL, 1)bdtb.getContent(bdtb.getPage(1)) è¿è¡Œæˆªå›¾å¦‚ä¸‹ï¼š 4ï¼‰æ›¿æ¢æ¥¼å±‚è‡³äºè¿™ä¸ªé—®é¢˜ï¼Œæˆ‘æ„Ÿè§‰ç›´æ¥æå–æ¥¼å±‚æ²¡ä»€ä¹ˆå¿…è¦å‘€ï¼Œå› ä¸ºåªçœ‹æ¥¼ä¸»çš„è¯ï¼Œæœ‰äº›æ¥¼å±‚çš„ç¼–å·æ˜¯é—´éš”çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¾—åˆ°çš„æ¥¼å±‚åºå·æ˜¯ä¸è¿ç»­çš„ï¼Œè¿™æ ·æˆ‘ä»¬ä¿å­˜ä¸‹æ¥ä¹Ÿæ²¡ä»€ä¹ˆç”¨ã€‚ æ‰€ä»¥å¯ä»¥å°è¯•ä¸‹é¢çš„æ–¹æ³•ï¼š 1.æ¯æ‰“å°è¾“å‡ºä¸€æ®µæ¥¼å±‚ï¼Œå†™å…¥ä¸€è¡Œæ¨ªçº¿æ¥é—´éš”ï¼Œæˆ–è€…æ¢è¡Œç¬¦ä¹Ÿå¥½ã€‚ 2.è¯•ç€é‡æ–°ç¼–ä¸€ä¸ªæ¥¼å±‚ï¼ŒæŒ‰ç…§é¡ºåºï¼Œè®¾ç½®ä¸€ä¸ªå˜é‡ï¼Œæ¯æ‰“å°å‡ºä¸€ä¸ªç»“æœå˜é‡åŠ ä¸€ï¼Œæ‰“å°å‡ºè¿™ä¸ªå˜é‡å½“åšæ¥¼å±‚ã€‚ å°†getContentæ–¹æ³•ä¿®æ”¹å¦‚ä¸‹ï¼š 123456789#è·å–æ¯ä¸€å±‚æ¥¼çš„å†…å®¹,ä¼ å…¥é¡µé¢å†…å®¹def getContent(self,page): pattern = re.compile('&lt;div id=\"post_content_.*?&gt;(.*?)&lt;/div&gt;',re.S) items = re.findall(pattern,page) floor = 1 for item in items: print floor,u\"æ¥¼------------------------------------------------------------------------------------------------------------------------------------\\n\" print self.tool.replace(item) floor += 1 è¿è¡Œç»“æœæˆªå›¾å¦‚ä¸‹ï¼š 4. å†™å…¥æ–‡ä»¶ä»£ç ï¼š 12file = open(â€œtb.txtâ€,â€wâ€)file.writelines(obj) 5. å®Œå–„ä»£ç 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134#-*-coding:utf8-*-#created by 10412import urllibimport urllib2import re#å¤„ç†é¡µé¢æ ‡ç­¾ç±»class Tool: #å»é™¤imgæ ‡ç­¾,7ä½é•¿ç©ºæ ¼ removeImg = re.compile('&lt;img.*?&gt;| &#123;7&#125;|') #åˆ é™¤è¶…é“¾æ¥æ ‡ç­¾ removeAddr = re.compile('&lt;a.*?&gt;|&lt;/a&gt;') #æŠŠæ¢è¡Œçš„æ ‡ç­¾æ¢ä¸º\\n replaceLine = re.compile('&lt;tr&gt;|&lt;div&gt;|&lt;/div&gt;|&lt;/p&gt;') #å°†è¡¨æ ¼åˆ¶è¡¨&lt;td&gt;æ›¿æ¢ä¸º\\t replaceTD= re.compile('&lt;td&gt;') #æŠŠæ®µè½å¼€å¤´æ¢ä¸º\\nåŠ ç©ºä¸¤æ ¼ replacePara = re.compile('&lt;p.*?&gt;') #å°†æ¢è¡Œç¬¦æˆ–åŒæ¢è¡Œç¬¦æ›¿æ¢ä¸º\\n replaceBR = re.compile('&lt;br&gt;&lt;br&gt;|&lt;br&gt;') #å°†å…¶ä½™æ ‡ç­¾å‰”é™¤ removeExtraTag = re.compile('&lt;.*?&gt;') def replace(self,x): x = re.sub(self.removeImg,\"\",x) x = re.sub(self.removeAddr,\"\",x) x = re.sub(self.replaceLine,\"\\n\",x) x = re.sub(self.replaceTD,\"\\t\",x) x = re.sub(self.replacePara,\"\\n \",x) x = re.sub(self.replaceBR,\"\\n\",x) x = re.sub(self.removeExtraTag,\"\",x) #strip()å°†å‰åå¤šä½™å†…å®¹åˆ é™¤ return x.strip()#ç™¾åº¦è´´å§çˆ¬è™«ç±»class BDTB: #åˆå§‹åŒ–ï¼Œä¼ å…¥åŸºåœ°å€ï¼Œæ˜¯å¦åªçœ‹æ¥¼ä¸»çš„å‚æ•° def __init__(self,baseUrl,seeLZ,floorTag): #baseé“¾æ¥åœ°å€ self.baseURL = baseUrl #æ˜¯å¦åªçœ‹æ¥¼ä¸» self.seeLZ = '?see_lz='+str(seeLZ) #HTMLæ ‡ç­¾å‰”é™¤å·¥å…·ç±»å¯¹è±¡ self.tool = Tool() #å…¨å±€fileå˜é‡ï¼Œæ–‡ä»¶å†™å…¥æ“ä½œå¯¹è±¡ self.file = None #æ¥¼å±‚æ ‡å·ï¼Œåˆå§‹ä¸º1 self.floor = 1 #é»˜è®¤çš„æ ‡é¢˜ï¼Œå¦‚æœæ²¡æœ‰æˆåŠŸè·å–åˆ°æ ‡é¢˜çš„è¯åˆ™ä¼šç”¨è¿™ä¸ªæ ‡é¢˜ self.defaultTitle = u\"ç™¾åº¦è´´å§\" #æ˜¯å¦å†™å…¥æ¥¼åˆ†éš”ç¬¦çš„æ ‡è®° self.floorTag = floorTag #ä¼ å…¥é¡µç ï¼Œè·å–è¯¥é¡µå¸–å­çš„ä»£ç  def getPage(self,pageNum): try: #æ„å»ºURL url = self.baseURL+ self.seeLZ + '&amp;pn=' + str(pageNum) request = urllib2.Request(url) response = urllib2.urlopen(request) #è¿”å›UTF-8æ ¼å¼ç¼–ç å†…å®¹ return response.read().decode('utf-8') #æ— æ³•è¿æ¥ï¼ŒæŠ¥é”™ except urllib2.URLError, e: if hasattr(e,\"reason\"): print u\"è¿æ¥ç™¾åº¦è´´å§å¤±è´¥,é”™è¯¯åŸå› \",e.reason return None #è·å–å¸–å­æ ‡é¢˜ def getTitle(self,page): #å¾—åˆ°æ ‡é¢˜çš„æ­£åˆ™è¡¨è¾¾å¼ pattern = re.compile('&lt;h1 class=\"core_title_txt.*?&gt;(.*?)&lt;/h1&gt;',re.S) result = re.search(pattern,page) if result: #å¦‚æœå­˜åœ¨ï¼Œåˆ™è¿”å›æ ‡é¢˜ return result.group(1).strip() else: return None #è·å–å¸–å­ä¸€å…±æœ‰å¤šå°‘é¡µ def getPageNum(self,page): #è·å–å¸–å­é¡µæ•°çš„æ­£åˆ™è¡¨è¾¾å¼ pattern = re.compile('&lt;li class=\"l_reply_num.*?&lt;/span&gt;.*?&lt;span.*?&gt;(.*?)&lt;/span&gt;',re.S) result = re.search(pattern,page) if result: return result.group(1).strip() else: return None #è·å–æ¯ä¸€å±‚æ¥¼çš„å†…å®¹,ä¼ å…¥é¡µé¢å†…å®¹ def getContent(self,page): #åŒ¹é…æ‰€æœ‰æ¥¼å±‚çš„å†…å®¹ pattern = re.compile('&lt;div id=\"post_content_.*?&gt;(.*?)&lt;/div&gt;',re.S) items = re.findall(pattern,page) contents = [] for item in items: #å°†æ–‡æœ¬è¿›è¡Œå»é™¤æ ‡ç­¾å¤„ç†ï¼ŒåŒæ—¶åœ¨å‰ååŠ å…¥æ¢è¡Œç¬¦ content = \"\\n\"+self.tool.replace(item)+\"\\n\" contents.append(content.encode('utf-8')) return contents def setFileTitle(self,title): #å¦‚æœæ ‡é¢˜ä¸æ˜¯ä¸ºNoneï¼Œå³æˆåŠŸè·å–åˆ°æ ‡é¢˜ if title is not None: self.file = open(title + \".txt\",\"w+\") else: self.file = open(self.defaultTitle + \".txt\",\"w+\") def writeData(self,contents): #å‘æ–‡ä»¶å†™å…¥æ¯ä¸€æ¥¼çš„ä¿¡æ¯ for item in contents: if self.floorTag == '1': #æ¥¼ä¹‹é—´çš„åˆ†éš”ç¬¦ floorLine = \"\\n\" + str(self.floor) + u\"-----------------------------------------------------------------------------------------\\n\" self.file.write(floorLine) self.file.write(item) self.floor += 1 def start(self): indexPage = self.getPage(1) pageNum = self.getPageNum(indexPage) title = self.getTitle(indexPage) self.setFileTitle(title) if pageNum == None: print \"URLå·²å¤±æ•ˆï¼Œè¯·é‡è¯•\" return try: print \"è¯¥å¸–å­å…±æœ‰\" + str(pageNum) + \"é¡µ\" for i in range(1,int(pageNum)+1): print \"æ­£åœ¨å†™å…¥ç¬¬\" + str(i) + \"é¡µæ•°æ®\" page = self.getPage(i) contents = self.getContent(page) self.writeData(contents) #å‡ºç°å†™å…¥å¼‚å¸¸ except IOError,e: print \"å†™å…¥å¼‚å¸¸ï¼ŒåŸå› \" + e.message finally: print \"å†™å…¥ä»»åŠ¡å®Œæˆ\"print u\"è¯·è¾“å…¥å¸–å­ä»£å·\"baseURL = 'http://tieba.baidu.com/p/' + str(raw_input(u'http://tieba.baidu.com/p/'))seeLZ = raw_input(\"æ˜¯å¦åªè·å–æ¥¼ä¸»å‘è¨€ï¼Œæ˜¯è¾“å…¥1ï¼Œå¦è¾“å…¥0\\n\")floorTag = raw_input(\"æ˜¯å¦å†™å…¥æ¥¼å±‚ä¿¡æ¯ï¼Œæ˜¯è¾“å…¥1ï¼Œå¦è¾“å…¥0\\n\")bdtb = BDTB(baseURL,seeLZ,floorTag)bdtb.start() è¿è¡Œåæˆªå›¾å¦‚ä¸‹ï¼š å¤‡æ³¨ï¼š è¿è¡Œåæ³¨æ„è¾“å…¥å¸–å­çš„ä»£å·å…ˆåœ¨ç½‘å€åç©ºæ ¼ï¼Œå†è¾“å…¥å¸–å­ä»£å·ï¼Œè¾“å…¥å®Œå†æŠŠåˆšæ‰çš„ç©ºæ ¼ åˆ é™¤ï¼Œåªæœ‰è¿™æ ·æ‰ä¸ä¼šæŠ¥é”™ã€‚ Traceback (most recent call last):File â€œE:/python/code/PycharmProject/Python-Projects/baidutieba/BDTB3.pyâ€, line 149,in &lt; module &gt; bdtb.start()File â€œE:/python/code/PycharmProject/Python-Projects/baidutieba/BDTB3.pyâ€, line 123, in startpageNum = self.getPageNum(indexPage)File â€œE:/python/code/PycharmProject/Python-Projects/baidutieba/BDTB3.pyâ€, line 86, in getPageNumresult = re.search(pattern,page)File â€œC:\\Python27\\lib\\re.pyâ€, line 146, in searchreturn _compile(pattern, flags).search(string)TypeError: expected string or buffer","tags":[{"name":"Python","slug":"Python","permalink":"http://yoursite.com/tags/Python/"},{"name":"çˆ¬è™«","slug":"çˆ¬è™«","permalink":"http://yoursite.com/tags/çˆ¬è™«/"}]},{"title":"Pythonçˆ¬è™«å®æˆ˜ä¹‹çˆ¬å–ç³—äº‹ç™¾ç§‘æ®µå­","date":"2017-06-12T16:00:00.000Z","path":"2017/06/13/Pythonçˆ¬è™«å®æˆ˜ä¹‹çˆ¬å–ç³—äº‹ç™¾ç§‘æ®µå­/","text":"å®Œæ•´ä»£ç åœ°å€ï¼šPythonçˆ¬è™«å®æˆ˜ä¹‹çˆ¬å–ç³—äº‹ç™¾ç§‘æ®µå­ç¨‹åºä»£ç è¯¦è§£ï¼š Spider1-qiushibaike.pyï¼šçˆ¬å–ç³—äº‹ç™¾ç§‘çš„8å°æ—¶æœ€æ–°é¡µçš„æ®µå­ã€‚åŒ…å«çš„ä¿¡æ¯æœ‰ä½œè€…åç§°ï¼Œè§‰å¾—å¥½ç¬‘äººæ•°ï¼Œè¯„è®ºäººæ•°ï¼Œå‘å¸ƒçš„å†…å®¹ã€‚å¦‚æœå‘å¸ƒçš„å†…å®¹ä¸­å«æœ‰å›¾ç‰‡çš„è¯ï¼Œåˆ™è¿‡æ»¤å›¾ç‰‡ï¼Œå†…å®¹ä¾ç„¶æ˜¾ç¤ºå‡ºæ¥ã€‚ Spider2-qiushibaike.pyï¼šåœ¨Spider1-qiushibaike.pyåŸºç¡€ä¸Šï¼Œå¼•å…¥ç±»å’Œæ–¹æ³•ï¼Œè¿›è¡Œä¼˜åŒ–å’Œå°è£…ï¼Œçˆ¬å–ç³—äº‹ç™¾ç§‘çš„24å°æ—¶çƒ­é—¨é¡µçš„æ®µå­ã€‚è¿›ä¸€æ­¥ä¼˜åŒ–ï¼Œæ¯æŒ‰ä¸€æ¬¡å›è½¦æ›´æ–°ä¸€æ¡å†…å®¹ï¼Œå½“å‰é¡µçš„å†…å®¹æŠ“å–å®Œæ¯•åï¼Œè‡ªåŠ¨æŠ“å–ä¸‹ä¸€é¡µçš„å†…å®¹ï¼ŒæŒ‰â€˜qâ€™é€€å‡ºã€‚ Spider3-qiushibaike.pyï¼šåœ¨Spiders-qiushibaike.pyåŸºç¡€ä¸Šï¼Œçˆ¬å–äº†ç™¾ç§‘æ®µå­çš„è¯„è®ºã€‚æŒ‰CæŸ¥çœ‹å½“å‰è¿™ä¸ªç³—äº‹çš„è¯„è®ºï¼Œå½“åˆ‡æ¢åˆ°æŸ¥çœ‹è¯„è®ºæ—¶ï¼Œæ¢å›è½¦æ˜¾ç¤ºä¸‹ä¸€ä¸ªè¯„è®º,æŒ‰Qé€€å‡ºå›åˆ°æŸ¥çœ‹ç³—äº‹ã€‚ç³—äº‹æ®µå­é¡µæ•°æ˜¯ä¸€é¡µä¸€é¡µåŠ è½½çš„ï¼Œå¦‚æœä½ å·²ç»çœ‹å®Œæ‰€æœ‰çš„ç³—äº‹ï¼Œå°±ä¼šè‡ªåŠ¨é€€å‡ºï¼ æœ¬çˆ¬è™«ç›®æ ‡ï¼š æŠ“å–ç³—äº‹ç™¾ç§‘çƒ­é—¨æ®µå­ è¿‡æ»¤å¸¦æœ‰å›¾ç‰‡çš„æ®µå­ å®ç°æ¯æŒ‰ä¸€æ¬¡å›è½¦æ˜¾ç¤ºä¸€ä¸ªæ®µå­çš„å‘å¸ƒæ—¶é—´ï¼Œå‘å¸ƒäººï¼Œæ®µå­å†…å®¹ï¼Œç‚¹èµæ•°ï¼Œè¯„è®ºäººæ•°ã€‚ ç³—äº‹ç™¾ç§‘æ˜¯ä¸éœ€è¦ç™»å½•çš„ï¼Œæ‰€ä»¥ä¹Ÿæ²¡å¿…è¦ç”¨åˆ°Cookieï¼Œå¦å¤–ç³—äº‹ç™¾ç§‘æœ‰çš„æ®µå­æ˜¯é™„å›¾çš„ï¼Œæˆ‘ä»¬æŠŠå›¾æŠ“ä¸‹æ¥å›¾ç‰‡ä¸ä¾¿äºæ˜¾ç¤ºï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å°è¯•è¿‡æ»¤æ‰æœ‰å›¾çš„æ®µå­å§ã€‚ å¥½ï¼Œç°åœ¨æˆ‘ä»¬å°è¯•æŠ“å–ä¸€ä¸‹ç³—äº‹ç™¾ç§‘çš„çƒ­é—¨æ®µå­å§ï¼Œæ¯æŒ‰ä¸‹ä¸€æ¬¡å›è½¦æˆ‘ä»¬æ˜¾ç¤ºä¸€ä¸ªæ®µå­ã€‚ 1.ç¡®å®šURLå¹¶æŠ“å–é¡µé¢ä»£ç é¦–å…ˆæˆ‘ä»¬ç¡®å®šå¥½é¡µé¢çš„URLæ˜¯ http://www.qiushibaike.com/hot/page/1ï¼Œå…¶ä¸­æœ€åä¸€ä¸ªæ•°å­—1ä»£è¡¨é¡µæ•°ï¼Œæˆ‘ä»¬å¯ä»¥ä¼ å…¥ä¸åŒçš„å€¼æ¥è·å¾—æŸä¸€é¡µçš„æ®µå­å†…å®¹ã€‚ 2.æå–æŸä¸€é¡µçš„æ‰€æœ‰æ®µå­å¥½ï¼Œè·å–äº†HTMLä»£ç ä¹‹åï¼Œæˆ‘ä»¬å¼€å§‹åˆ†ææ€æ ·è·å–æŸä¸€é¡µçš„æ‰€æœ‰æ®µå­ã€‚ é¦–å…ˆæˆ‘ä»¬å®¡æŸ¥å…ƒç´ çœ‹ä¸€ä¸‹ï¼ŒæŒ‰æµè§ˆå™¨çš„F12ï¼Œæˆªå›¾å¦‚ä¸‹: æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œæ¯ä¸€ä¸ªæ®µå­éƒ½æ˜¯ &lt;div class=â€article block untagged mb15â€³ id=â€â€¦â€&gt;â€¦&lt;/div&gt; åŒ…è£¹çš„å†…å®¹ã€‚ ç°åœ¨æˆ‘ä»¬æƒ³è·å–å‘å¸ƒäººï¼Œå‘å¸ƒæ—¥æœŸï¼Œæ®µå­å†…å®¹ï¼Œç‚¹èµäººæ•°å’Œè¯„è®ºäººæ•°ã€‚ä¸è¿‡å¦å¤–æ³¨æ„çš„æ˜¯ï¼Œæ®µå­æœ‰äº›æ˜¯å¸¦å›¾ç‰‡çš„ï¼Œå¦‚æœæˆ‘ä»¬æƒ³åœ¨æ§åˆ¶å°æ˜¾ç¤ºå›¾ç‰‡æ˜¯ä¸ç°å®çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬ç›´æ¥æŠŠå¸¦æœ‰å›¾ç‰‡çš„æ®µå­ç»™å®ƒå‰”é™¤æ‰ï¼Œåªä¿å­˜ä»…å«æ–‡æœ¬çš„æ®µå­ã€‚ æ‰€ä»¥æˆ‘ä»¬åŠ å…¥å¦‚ä¸‹æ­£åˆ™è¡¨è¾¾å¼æ¥åŒ¹é…ä¸€ä¸‹ï¼Œç”¨åˆ°çš„æ–¹æ³•æ˜¯ re.findall æ˜¯æ‰¾å¯»æ‰€æœ‰åŒ¹é…çš„å†…å®¹ã€‚æ–¹æ³•çš„ç”¨æ³•è¯¦æƒ…å¯ä»¥çœ‹å‰é¢è¯´çš„æ­£åˆ™è¡¨è¾¾å¼çš„ä»‹ç»ã€‚ å¥½ï¼Œæˆ‘ä»¬çš„æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…è¯­å¥ä¹¦å†™å¦‚ä¸‹ï¼Œåœ¨åŸæ¥çš„åŸºç¡€ä¸Šè¿½åŠ å¦‚ä¸‹ä»£ç ï¼š 123456789#æ­£åˆ™è¡¨è¾¾å¼åŒ¹é… pattern = re.compile(&apos;&lt;div.*?author.*?&gt;.*?&lt;img.*?&gt;.*?&lt;h2&gt;(.*?)&lt;/h2&gt;.*?&lt;div.*?&apos;+ &apos;content&quot;&gt;(.*?)&lt;/div&gt;(.*?)&lt;div.*?class=&quot;number&quot;&gt;(.*?)&lt;/i&gt;.*?class=&quot;number&quot;&gt;(.*?)&lt;/i&gt;&apos;,re.S) items = re.findall(pattern,content) for item in items: haveImg = re.search(&quot;img&quot;,item[2]) if not haveImg: print item[0],item[3],item[4],item[1] #item[0]æ˜¯ä½œè€…åç§° item[3]å¥½ç¬‘äººæ•° item[4]è¯„è®ºäººæ•° item[1]å†…å®¹ item[2]æ˜¯å†…å®¹åé¢çš„ä¸œè¥¿ï¼Œå¦‚æœå«æœ‰å›¾ç‰‡ï¼Œè¿‡æ»¤æ‰ ç°åœ¨æ­£åˆ™è¡¨è¾¾å¼åœ¨è¿™é‡Œç¨ä½œè¯´æ˜ 1ï¼‰ .*? æ˜¯ä¸€ä¸ªå›ºå®šçš„æ­é…ï¼Œ . å’Œ * ä»£è¡¨å¯ä»¥åŒ¹é…ä»»æ„æ— é™å¤šä¸ªå­—ç¬¦ï¼ŒåŠ ä¸Š ï¼Ÿ è¡¨ç¤ºä½¿ç”¨éè´ªå©ªæ¨¡å¼è¿›è¡ŒåŒ¹é…ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ä¼šå°½å¯èƒ½çŸ­åœ°åšåŒ¹é…ï¼Œä»¥åæˆ‘ä»¬è¿˜ä¼šå¤§é‡ç”¨åˆ° .*? çš„æ­é…ã€‚ 2ï¼‰(.*?) ä»£è¡¨ä¸€ä¸ªåˆ†ç»„ï¼Œåœ¨è¿™ä¸ªæ­£åˆ™è¡¨è¾¾å¼ä¸­æˆ‘ä»¬åŒ¹é…äº†äº”ä¸ªåˆ†ç»„ï¼Œåœ¨åé¢çš„éå† item ä¸­ï¼Œitem[0] å°±ä»£è¡¨ç¬¬ä¸€ä¸ª (.*?) æ‰€æŒ‡ä»£çš„å†…å®¹ï¼Œitem[1] å°±ä»£è¡¨ç¬¬äºŒä¸ª (.*?) æ‰€æŒ‡ä»£çš„å†…å®¹ï¼Œä»¥æ­¤ç±»æ¨ã€‚ 3ï¼‰re.S æ ‡å¿—ä»£è¡¨åœ¨åŒ¹é…æ—¶ä¸ºç‚¹ä»»æ„åŒ¹é…æ¨¡å¼ï¼Œç‚¹ . ä¹Ÿå¯ä»¥ä»£è¡¨æ¢è¡Œç¬¦ã€‚ è¿™æ ·æˆ‘ä»¬å°±è·å–äº†å‘å¸ƒäººï¼Œå‘å¸ƒæ—¶é—´ï¼Œå‘å¸ƒå†…å®¹ï¼Œé™„åŠ å›¾ç‰‡ä»¥åŠç‚¹èµæ•°ã€‚ åœ¨è¿™é‡Œæ³¨æ„ä¸€ä¸‹ï¼Œæˆ‘ä»¬è¦è·å–çš„å†…å®¹å¦‚æœæ˜¯å¸¦æœ‰å›¾ç‰‡ï¼Œç›´æ¥è¾“å‡ºå‡ºæ¥æ¯”è¾ƒç¹çï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬åªè·å–ä¸å¸¦å›¾ç‰‡çš„æ®µå­å°±å¥½äº†ã€‚ æ‰€ä»¥ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬å°±éœ€è¦å¯¹å¸¦å›¾ç‰‡çš„æ®µå­è¿›è¡Œè¿‡æ»¤ã€‚ æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œå¸¦æœ‰å›¾ç‰‡çš„æ®µå­ä¼šå¸¦æœ‰ç±»ä¼¼ä¸‹é¢çš„ä»£ç ï¼Œè€Œä¸å¸¦å›¾ç‰‡çš„åˆ™æ²¡æœ‰ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬çš„æ­£åˆ™è¡¨è¾¾å¼çš„ item[2] å°±æ˜¯è·å–äº†ä¸‹é¢çš„å†…å®¹ï¼Œå¦‚æœä¸å¸¦å›¾ç‰‡ï¼Œitem[2]è·å–çš„å†…å®¹ä¾¿æ˜¯ç©ºï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦åˆ¤æ–­ item[2]ä¸­æ˜¯å¦å«æœ‰ img æ ‡ç­¾å°±å¯ä»¥äº†ã€‚ æ•´ä½“ä»£ç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334#-*-coding:utf8-*-#created by 10412 2016/8/23#çˆ¬å–ç³—äº‹ç™¾ç§‘çš„8å°æ—¶æœ€æ–°é¡µçš„æ®µå­ã€‚åŒ…å«çš„ä¿¡æ¯æœ‰ä½œè€…åç§°ï¼Œè§‰å¾—å¥½ç¬‘äººæ•°ï¼Œè¯„è®ºäººæ•°ï¼Œå‘å¸ƒçš„å†…å®¹ã€‚#å¦‚æœå‘å¸ƒçš„å†…å®¹ä¸­å«æœ‰å›¾ç‰‡çš„è¯ï¼Œåˆ™è¿‡æ»¤å›¾ç‰‡ï¼Œå†…å®¹ä¾ç„¶æ˜¾ç¤ºå‡ºæ¥ã€‚import urllibimport urllib2import re#è‡ªå®šä¹‰è¾“å…¥çˆ¬å–çš„é¡µæ•°page = raw_input(&quot;please enter the page number:&quot;)url = &apos;http://www.qiushibaike.com/8hr/page/&apos;+ page +&apos;/?s=4880477&apos;user_agent = &apos;Mozilla/4.0 (compatible; MSIE 5.5; Windows NT)&apos;headers = &#123; &apos;User-Agent&apos; : user_agent &#125;try: request = urllib2.Request(url,headers = headers) response = urllib2.urlopen(request) content = response.read().decode(&apos;utf-8&apos;) #æ­£åˆ™è¡¨è¾¾å¼åŒ¹é… pattern = re.compile(&apos;&lt;div.*?author.*?&gt;.*?&lt;img.*?&gt;.*?&lt;h2&gt;(.*?)&lt;/h2&gt;.*?&lt;div.*?&apos;+ &apos;content&quot;&gt;(.*?)&lt;/div&gt;(.*?)&lt;div.*?class=&quot;number&quot;&gt;(.*?)&lt;/i&gt;.*?class=&quot;number&quot;&gt;(.*?)&lt;/i&gt;&apos;,re.S) items = re.findall(pattern,content) for item in items: haveImg = re.search(&quot;img&quot;,item[2]) if not haveImg: print item[0],item[3],item[4],item[1] #item[0]æ˜¯ä½œè€…åç§° item[3]å¥½ç¬‘äººæ•° item[4]è¯„è®ºäººæ•° item[1]å†…å®¹ item[2]æ˜¯å†…å®¹åé¢çš„ä¸œè¥¿ï¼Œå¦‚æœå«æœ‰å›¾ç‰‡ï¼Œè¿‡æ»¤æ‰except urllib2.URLError, e: if hasattr(e,&quot;code&quot;): print e.code if hasattr(e,&quot;reason&quot;): print e.reason è¿è¡Œä¸€ä¸‹çœ‹ä¸‹æ•ˆæœ: æ©ï¼Œå¸¦æœ‰å›¾ç‰‡çš„æ®µå­å·²ç»è¢«å‰”é™¤å•¦ã€‚ 3.å®Œå–„äº¤äº’ï¼Œè®¾è®¡é¢å‘å¯¹è±¡æ¨¡å¼å¥½å•¦ï¼Œç°åœ¨æœ€æ ¸å¿ƒçš„éƒ¨åˆ†æˆ‘ä»¬å·²ç»å®Œæˆå•¦ï¼Œå‰©ä¸‹çš„å°±æ˜¯ä¿®ä¸€ä¸‹è¾¹è¾¹è§’è§’çš„ä¸œè¥¿ï¼Œæˆ‘ä»¬æƒ³è¾¾åˆ°çš„ç›®çš„æ˜¯ï¼š æŒ‰ä¸‹å›è½¦ï¼Œè¯»å–ä¸€ä¸ªæ®µå­ï¼Œæ˜¾ç¤ºå‡ºæ®µå­çš„å‘å¸ƒäººï¼Œå†…å®¹ï¼Œç‚¹èµä¸ªæ•°åŠè¯„è®ºæ•°é‡ã€‚ å¦å¤–æˆ‘ä»¬éœ€è¦è®¾è®¡é¢å‘å¯¹è±¡æ¨¡å¼ï¼Œå¼•å…¥ç±»å’Œæ–¹æ³•ï¼Œå°†ä»£ç åšä¸€ä¸‹ä¼˜åŒ–å’Œå°è£…ï¼Œæœ€åï¼Œæˆ‘ä»¬çš„ä»£ç å¦‚ä¸‹æ‰€ç¤º 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788#-*-coding:utf8-*-#created by 10412# åœ¨Spider1-qiushibaike.pyåŸºç¡€ä¸Šï¼Œå¼•å…¥ç±»å’Œæ–¹æ³•ï¼Œè¿›è¡Œä¼˜åŒ–å’Œå°è£…ï¼Œçˆ¬å–ç³—äº‹ç™¾ç§‘çš„24å°æ—¶çƒ­é—¨é¡µçš„æ®µå­ã€‚# è¿›ä¸€æ­¥ä¼˜åŒ–ï¼Œæ¯æŒ‰ä¸€æ¬¡å›è½¦æ›´æ–°ä¸€æ¡å†…å®¹ï¼Œå½“å‰é¡µçš„å†…å®¹æŠ“å–å®Œæ¯•åï¼Œè‡ªåŠ¨æŠ“å–ä¸‹ä¸€é¡µçš„å†…å®¹ï¼ŒæŒ‰â€˜qâ€™é€€å‡ºã€‚import urllib2import reclass QSBK: def __init__(self): self.pageIndex = 1 self.user_agent = &apos;Mozilla/4.0 (compatible; MSIE 5.5; Windows NT)&apos; self.headers = &#123;&apos;User-Agent&apos; : self.user_agent&#125; self.stories = [] # å­˜æ”¾ç¨‹åºæ˜¯å¦ç»§ç»­è¿è¡Œçš„å˜é‡ self.enable = False # ä¼ å…¥æŸä¸€é¡µçš„ç´¢å¼•è·å¾—é¡µé¢ä»£ç  def getPage(self, pageIndex): try: url = &apos;http://www.qiushibaike.com/hot/page/&apos; + str(pageIndex) request = urllib2.Request(url, headers=self.headers) response = urllib2.urlopen(request) pageCode = response.read().decode(&apos;utf-8&apos;) return pageCode except urllib2.URLError, e: if hasattr(e, &quot;reason&quot;): print u&quot;è¿æ¥ç³—äº‹ç™¾ç§‘å¤±è´¥,é”™è¯¯åŸå› &quot;, e.reason return None # ä¼ å…¥æŸä¸€é¡µä»£ç ï¼Œè¿”å›æœ¬é¡µä¸å¸¦å›¾ç‰‡çš„æ®µå­åˆ—è¡¨ def getPageItems(self, pageIndex): pageCode = self.getPage(pageIndex) if not pageCode: print u&quot;å‡ºé”™äº†&quot; return None pattern = re.compile(&apos;&lt;div class=&quot;author.*?href.*?&lt;img src.*?title=.*?&lt;h2&gt;(.*?)&lt;/h2&gt;.*?&lt;div class=&quot;content&quot;&gt;(.*?)&lt;/div&gt;.*?&lt;i class=&quot;number&quot;&gt;(.*?)&lt;/i&gt;.*?class=&quot;number&quot;&gt;(.*?)&lt;/i&gt;&apos;,re.S) items = re.findall(pattern, pageCode) pageStories = [] for item in items: replaceBR = re.compile(&apos;&lt;br/&gt;&apos;) text = re.sub(replaceBR, &quot;\\n&quot;, item [1] ) pageStories.append([item[0].strip(), text.strip(), item[2].strip(), item[3].strip()]) return pageStories # åŠ è½½å¹¶æå–é¡µé¢å†…å®¹ï¼ŒåŠ å…¥åˆ°åˆ—è¡¨ä¸­ def loadPage(self): if self.enable == True: if len(self.stories) &lt; 2: # è·å–æ–°ä¸€é¡µ pageStories = self.getPageItems(self.pageIndex) if pageStories: self.stories.append(pageStories) self.pageIndex += 1 # è°ƒç”¨è¯¥æ–¹æ³•ï¼Œå›è½¦æ‰“å°ä¸€ä¸ªæ®µå­ def getOneStory(self, pageStories, page): for story in pageStories: input = raw_input() self.loadPage() if input == &quot;Q&quot;: self.enable = False return print u&quot;ç¬¬%dé¡µ\\tå‘å¸ƒäºº:%s\\tèµ:%s\\tè¯„è®º:%s\\n%s&quot; %(page, story[0], story[2], story[2], story [1]) # å¼€å§‹æ–¹æ³• def start(self): print u&quot;æ­£åœ¨è¯»å–ç³—äº‹ç™¾ç§‘,æŒ‰å›è½¦æŸ¥çœ‹æ–°æ®µå­ï¼ŒQé€€å‡º&quot; # ä½¿å˜é‡ä¸ºTrueï¼Œç¨‹åºå¯ä»¥æ­£å¸¸è¿è¡Œ self.enable = True # å…ˆåŠ è½½ä¸€é¡µå†…å®¹ self.loadPage() # å±€éƒ¨å˜é‡ï¼Œæ§åˆ¶å½“å‰è¯»åˆ°äº†ç¬¬å‡ é¡µ nowPage = 0 while self.enable: if len(self.stories) &gt; 0: # ä»å…¨å±€listä¸­è·å–ä¸€é¡µçš„æ®µå­ pageStories = self.stories[0] # å½“å‰è¯»åˆ°çš„é¡µæ•°åŠ ä¸€ nowPage += 1 # å°†å…¨å±€listä¸­ç¬¬ä¸€ä¸ªå…ƒç´ åˆ é™¤ï¼Œå› ä¸ºå·²ç»å–å‡º del self.stories[0] # è¾“å‡ºè¯¥é¡µçš„æ®µå­ self.getOneStory(pageStories, nowPage)spider = QSBK()spider.start() å¥½å•¦ï¼Œå¤§å®¶æ¥æµ‹è¯•ä¸€ä¸‹å§ï¼Œç‚¹ä¸€ä¸‹å›è½¦ä¼šè¾“å‡ºä¸€ä¸ªæ®µå­ï¼ŒåŒ…æ‹¬ç¬¬å‡ é¡µï¼Œå‘å¸ƒäººï¼Œæ®µå­å†…å®¹ï¼Œç‚¹èµæ•°ä»¥åŠè¯„è®ºæ•°é‡ï¼Œæ˜¯ä¸æ˜¯æ„Ÿè§‰çˆ½çˆ†äº†ï¼ å®Œå–„æ›´æ–°ç‰ˆçˆ¬è™«ä»£ç åœ¨ä¸Šé¢çˆ¬è™«çš„åŸºç¡€ä¸Šï¼Œè¿˜å¢åŠ çˆ¬å–äº†ç™¾ç§‘æ®µå­çš„è¯„è®ºã€‚æŒ‰CæŸ¥çœ‹å½“å‰è¿™ä¸ªç³—äº‹çš„è¯„è®ºï¼Œå½“åˆ‡æ¢åˆ°æŸ¥çœ‹è¯„è®ºæ—¶ï¼Œæ¢å›è½¦æ˜¾ç¤ºä¸‹ä¸€ä¸ªè¯„è®º,æŒ‰Qé€€å‡ºå›åˆ°æŸ¥çœ‹ç³—äº‹ã€‚ç³—äº‹æ®µå­é¡µæ•°æ˜¯ä¸€é¡µä¸€é¡µåŠ è½½çš„ï¼Œå¦‚æœä½ å·²ç»çœ‹å®Œæ‰€æœ‰çš„ç³—äº‹ï¼Œå°±ä¼šè‡ªåŠ¨é€€å‡ºï¼ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198#-*-coding:utf8-*-#created by 10412#åœ¨Spiders-qiushibaike.pyåŸºç¡€ä¸Šï¼Œçˆ¬å–äº†ç™¾ç§‘æ®µå­çš„è¯„è®ºã€‚æŒ‰CæŸ¥çœ‹å½“å‰è¿™ä¸ªç³—äº‹çš„è¯„è®ºï¼Œå½“åˆ‡æ¢åˆ°æŸ¥çœ‹è¯„è®ºæ—¶ï¼Œ# æ¢å›è½¦æ˜¾ç¤ºä¸‹ä¸€ä¸ªè¯„è®º,æŒ‰Qé€€å‡ºå›åˆ°æŸ¥çœ‹ç³—äº‹ã€‚ç³—äº‹æ®µå­é¡µæ•°æ˜¯ä¸€é¡µä¸€é¡µåŠ è½½çš„ï¼Œå¦‚æœä½ å·²ç»çœ‹å®Œæ‰€æœ‰çš„ç³—äº‹ï¼Œå°±ä¼šè‡ªåŠ¨é€€å‡ºï¼import urllibimport urllib2import reimport os.pathhtmlCharacterMap = &#123; &apos;&lt;br/&gt;&apos; : &apos;\\n&apos;, &apos;&amp;quot;&apos; : &apos;&quot;&apos;, &apos;&amp;nbsp;&apos; : &apos; &apos;, &apos;&amp;gt;&apos; : &apos;&gt;&apos;, &apos;&amp;lt;&apos; : &apos;&lt;&apos;, &apos;&amp;amp;&apos;: &apos;&amp;&apos;, &apos;&amp;#39&apos;:&quot;&apos;&quot;,&#125;class QSBK(object): &quot;&quot;&quot;ç³—äº‹ç™¾ç§‘çš„çˆ¬è™«&quot;&quot;&quot; def __init__(self): self.pageIndex = 1 self.pagetotal = 9999 self.user_agent = &apos;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/51.0.2704.103 Safari/537.36&apos; self.headers = &#123;&apos;User-Agent&apos; : self.user_agent&#125; self.stories = [] self.comments = [] self.currentStoryId = &apos;&apos; #æ˜¯å¦è¦é€€å‡ºäº† self.enable = False #è®°å½•å½“å‰æ˜¯å¦åœ¨æŸ¥çœ‹è¯„è®º self.viewComment = False def getPageContent(self, pageIndex): try: url = &apos;http://www.qiushibaike.com/8hr/page/%d/&apos; % pageIndex request = urllib2.Request(url, headers=self.headers) print u&apos;å¼€å§‹åŠ è½½%02dé¡µ&apos; % pageIndex response = urllib2.urlopen(request, timeout=5) print u&apos;æˆåŠŸåŠ è½½%02dé¡µ&apos; % pageIndex pageContent = response.read().decode(&apos;utf-8&apos;) return pageContent except urllib2.URLError, e: if hasattr(e, &apos;reason&apos;): print u&quot;è¿æ¥ç³—äº‹ç™¾ç§‘å¤±è´¥ï¼Œé”™è¯¯åŸå› ï¼š&quot;, e.reason return None def getCommentsContent(self, storyId): # å¾—åˆ°æ®µå­çš„è¯„è®º try: url = &apos;http://www.qiushibaike.com/article/%s&apos; % storyId request = urllib2.Request(url, headers=self.headers) response = urllib2.urlopen(request, timeout=5) pageContent = response.read().decode(&apos;utf-8&apos;) return pageContent except urllib2.URLError, e: if hasattr(e, &apos;reason&apos;): print u&quot;è¿æ¥ç³—äº‹ç™¾ç§‘å¤±è´¥ï¼Œé”™è¯¯åŸå› ï¼š&quot;, e.reason return None def getPageTotal(self, content): # å¾—åˆ°æ€»é¡µæ•° if self.pagetotal != 9999: # print u&apos;åŠ è½½ç¬¬%dé¡µ&apos; % self.pageIndex return pattrenStr = &apos;&lt;span class=&quot;page-numbers&quot;&gt;(?P&lt;pagetotal&gt;.*?)&lt;/span&gt;&apos; pattern = re.compile(pattrenStr, re.S) items = re.findall(pattern, content) if len(items)&gt;0: self.pagetotal = int(items[-1].strip()) print u&apos;æ€»å…±æœ‰%dé¡µ&apos; % self.pagetotal def getPageItems(self, pageIndex): pageContent = self.getPageContent(pageIndex) with open(&apos;temp%02d.html&apos; % pageIndex, &apos;w&apos;) as f: f.write(pageContent.encode(&apos;utf-8&apos;)) if not pageContent: print &quot;é¡µé¢åŠ è½½å¤±è´¥...&quot; return None self.getPageTotal(pageContent) pattrenStr = r&apos;&lt;h2&gt;(?P&lt;authorname&gt;.*?)&lt;/h2&gt;.*?&apos;\\ r&apos;&lt;div class=&quot;content&quot;&gt;(?P&lt;content&gt;.*?)&lt;/div&gt;&apos;\\ r&apos;(?P&lt;maybehaveimage&gt;.*?)&apos;\\ r&apos;&lt;i class=&quot;number&quot;&gt;(?P&lt;numbervote&gt;.*?)&lt;/i&gt;.*?&apos;\\ r&apos;&lt;span class=&quot;stats-comments&quot;&gt;(?P&lt;comments&gt;.*?)&lt;/div&gt;&apos; pattern = re.compile(pattrenStr, re.S) items = re.findall(pattern, pageContent) return items def getCurrentStoryComments(self, storyId): #åˆ‡æ¢åˆ°æŸ¥çœ‹è¯„è®ºæ¨¡å¼ self.viewComment = True content = self.getCommentsContent(storyId) if not content: print &quot;é¡µé¢åŠ è½½å¤±è´¥...&quot; return None reStr = r&apos;&lt;div id=&quot;comment-.*?&apos;\\ r&apos;&lt;a href=&quot;/users/.*?/&quot; class=&quot;userlogin&quot; target=&quot;_blank&quot; title=&quot;(?P&lt;username&gt;.*?)&quot;&gt;(?P=username)&lt;/a&gt;.*?&apos;\\ r&apos;&lt;span class=&quot;body&quot;&gt;(?P&lt;comment&gt;.*?)&lt;/span&gt;.*?&apos;\\ r&apos;&lt;div class=&quot;report&quot;&gt;(?P&lt;index&gt;.*?)&lt;/div&gt;&apos; pattern = re.compile(reStr, re.S) items = re.findall(pattern, content) del self.comments[:] for item in items: comentstr = item[0]+&apos;(&apos;+ item[2] + u&apos;æ¥¼)&apos; + &apos;\\n&apos; + item[1] + &apos;\\n&apos; for (k,v) in htmlCharacterMap.items(): re.sub(re.compile(k), v, comentstr) self.comments.append(comentstr) if len(self.comments)&gt;0: print &apos;å·²åˆ‡æ¢åˆ°æŸ¥çœ‹è¯„è®ºï¼Œæ¢å›è½¦æ˜¾ç¤ºä¸‹ä¸€ä¸ªè¯„è®º,æŒ‰Qé€€å‡ºå›åˆ°æŸ¥çœ‹ç³—äº‹&apos; else: print &apos;å½“å‰ç³—äº‹æ²¡æœ‰è¯„è®º&apos; self.viewComment = False def getNextPage(self): if self.pageIndex &gt; self.pagetotal: self.enable = False print &quot;ä½ å·²ç»çœ‹å®Œæ‰€æœ‰çš„ç³—äº‹ï¼Œç°åœ¨è‡ªåŠ¨é€€å‡ºï¼&quot; return items = self.getPageItems(self.pageIndex) self.pageIndex += 1 for item in items: #å¦‚æœæœ‰å›¾ç‰‡ç›´æ¥è·³è¿‡ï¼Œå› ä¸ºå›¾ç‰‡åœ¨ç»ˆç«¯æ˜¾ç¤ºä¸äº† if re.search(&apos;img&apos;, item[2]): continue content = item[1].strip() #è½¬æ¢htmlçš„ç‰¹æ®Šå­—ç¬¦ for (k,v) in htmlCharacterMap.items(): content = re.sub(re.compile(k), v, content) authorname = item[0].strip() for (k,v) in htmlCharacterMap.items(): authorname = re.sub(re.compile(k), v, authorname) #æ‰¾å‡ºè¯„è®ºä¸ªæ•°ï¼Œæ²¡æœ‰ä¸º0 pattern = re.compile(r&apos;.*?&lt;a href=&quot;/article/(?P&lt;id&gt;.*?)&quot;.*?&lt;i class=&quot;number&quot;&gt;(?P&lt;number&gt;.*?)&lt;/i&gt;.*?&apos;, re.S) result = re.match(pattern, item[4]) commentnumbers = 0 articleId = &apos;&apos; if result: commentnumbers = result.groupdict().get(&apos;number&apos;, &apos;0&apos;) articleId = result.groupdict().get(&apos;id&apos;, &apos;&apos;) self.stories.append(authorname + &apos;(&apos; + item[3].strip() + u&apos;å¥½ç¬‘Â·&apos; + str(commentnumbers) + u&apos;è¯„è®º)&apos; + &apos;\\n&apos; + content + &apos;\\n&apos;) self.stories.append(articleId) def getNextComment(self): print self.comments[0] self.comments.pop(0) if len(self.comments)==0: print &apos;ä½ å·²æŸ¥çœ‹å®Œè¿™ä¸ªç³—äº‹çš„æ‰€æœ‰è¯„è®º,ç°åœ¨è‡ªåŠ¨é€€å‡ºåˆ°æŸ¥çœ‹ç³—äº‹&apos; self.viewComment = False def getOneStory(self): #é˜²æ­¢æœ‰çš„é¡µé¢å…¨æ˜¯å¸¦å›¾ç‰‡çš„ while (len(self.stories)==0 and self.enable): self.getNextPage() story = self.stories[0] self.currentStoryId = self.stories[1] print story self.stories.pop(0) self.stories.pop(0) if len(self.stories)==0: self.getNextPage() def start(self): #å…ˆåˆ é™¤ä¸´æ—¶ä¿å­˜çš„ç½‘é¡µ tempfiles = [x for x in os.listdir(&apos;.&apos;) if os.path.isfile(x) and os.path.splitext(x)[1]==&apos;.html&apos; and x.startswith(&apos;temp&apos;)] for file in tempfiles: os.remove(file) print u&quot;æ­£åœ¨è¯»å–ç³—äº‹ç™¾ç§‘ï¼ŒæŒ‰å›è½¦æŸ¥çœ‹ä¸‹ä¸€ä¸ªç³—äº‹ï¼ŒæŒ‰CæŸ¥çœ‹å½“å‰è¿™ä¸ªç³—äº‹çš„è¯„è®ºï¼ŒæŒ‰Qé€€å‡ºæˆ–è¿”å›&quot; self.enable = True self.getNextPage() while self.enable: input = raw_input() if input.upper() == &quot;Q&quot;: if not self.viewComment: self.enable = False else: self.viewComment = False print &apos;ç°åœ¨é€€å‡ºåˆ°æŸ¥çœ‹ç³—äº‹äº†&apos; elif input.upper() == &quot;C&quot;: #æŸ¥çœ‹å½“å‰çœ‹åˆ°çš„ç³—äº‹çš„è¯„è®º if len(self.currentStoryId)&gt;0: self.getCurrentStoryComments(self.currentStoryId) else: print &apos;è¿™æ¡ç³—äº‹æ²¡æœ‰è¯„è®º&apos; else: if not self.viewComment: self.getOneStory() else: self.getNextComment()if __name__ == &apos;__main__&apos;: spider = QSBK() spider.start()","tags":[{"name":"Python","slug":"Python","permalink":"http://yoursite.com/tags/Python/"},{"name":"çˆ¬è™«","slug":"çˆ¬è™«","permalink":"http://yoursite.com/tags/çˆ¬è™«/"}]},{"title":"Pyspideræ¡†æ¶ â€”â€” Pythonçˆ¬è™«å®æˆ˜ä¹‹çˆ¬å– V2EX ç½‘ç«™å¸–å­","date":"2017-06-12T16:00:00.000Z","path":"2017/06/13/Pyspideræ¡†æ¶ â€”â€” Pythonçˆ¬è™«å®æˆ˜ä¹‹çˆ¬å– V2EX ç½‘ç«™å¸–å­/","text":"èƒŒæ™¯ï¼š PySpiderï¼šä¸€ä¸ªå›½äººç¼–å†™çš„å¼ºå¤§çš„ç½‘ç»œçˆ¬è™«ç³»ç»Ÿå¹¶å¸¦æœ‰å¼ºå¤§çš„WebUIã€‚é‡‡ç”¨Pythonè¯­è¨€ç¼–å†™ï¼Œåˆ†å¸ƒå¼æ¶æ„ï¼Œæ”¯æŒå¤šç§æ•°æ®åº“åç«¯ï¼Œå¼ºå¤§çš„WebUIæ”¯æŒè„šæœ¬ç¼–è¾‘å™¨ï¼Œä»»åŠ¡ç›‘è§†å™¨ï¼Œé¡¹ç›®ç®¡ç†å™¨ä»¥åŠç»“æœæŸ¥çœ‹å™¨ã€‚åœ¨çº¿ç¤ºä¾‹ï¼š http://demo.pyspider.org/ å®˜æ–¹æ–‡æ¡£ï¼š http://docs.pyspider.org/en/latest/ Github : https://github.com/binux/pyspider æœ¬æ–‡çˆ¬è™«ä»£ç  Github åœ°å€ï¼šhttps://github.com/zhisheng17/Python-Projects/blob/master/v2ex/V2EX.py è¯´äº†è¿™ä¹ˆå¤šï¼Œæˆ‘ä»¬è¿˜æ˜¯æ¥çœ‹æ­£æ–‡å§ï¼ å‰æ: ä½ å·²ç»å®‰è£…å¥½äº†Pyspider å’Œ MySQL-pythonï¼ˆä¿å­˜æ•°æ®ï¼‰ å¦‚æœä½ è¿˜æ²¡å®‰è£…çš„è¯ï¼Œè¯·çœ‹çœ‹æˆ‘çš„å‰ä¸€ç¯‡æ–‡ç« ï¼Œé˜²æ­¢ä½ ä¹Ÿèµ°å¼¯è·¯ã€‚ Pyspider æ¡†æ¶å­¦ä¹ æ—¶èµ°è¿‡çš„ä¸€äº›å‘ HTTP 599: SSL certificate problem: unable to get local issuer certificateé”™è¯¯ æˆ‘æ‰€é‡åˆ°çš„ä¸€äº›é”™è¯¯ï¼š é¦–å…ˆï¼Œæœ¬çˆ¬è™«ç›®æ ‡ï¼šä½¿ç”¨ Pyspider æ¡†æ¶çˆ¬å– V2EX ç½‘ç«™çš„å¸–å­ä¸­çš„é—®é¢˜å’Œå†…å®¹ï¼Œç„¶åå°†çˆ¬å–çš„æ•°æ®ä¿å­˜åœ¨æœ¬åœ°ã€‚ V2EX ä¸­å¤§éƒ¨åˆ†çš„å¸–å­æŸ¥çœ‹æ˜¯ä¸éœ€è¦ç™»å½•çš„ï¼Œå½“ç„¶ä¹Ÿæœ‰äº›å¸–å­æ˜¯éœ€è¦ç™»é™†åæ‰èƒ½å¤ŸæŸ¥çœ‹çš„ã€‚ï¼ˆå› ä¸ºåæ¥çˆ¬å–çš„æ—¶å€™å‘ç°ä¸€ç›´ error ï¼ŒæŸ¥çœ‹å…·ä½“åŸå› åæ‰çŸ¥é“æ˜¯éœ€è¦ç™»å½•çš„æ‰å¯ä»¥æŸ¥çœ‹é‚£äº›å¸–å­çš„ï¼‰æ‰€ä»¥æˆ‘è§‰å¾—æ²¡å¿…è¦ç”¨åˆ° Cookieï¼Œå½“ç„¶å¦‚æœä½ éå¾—è¦ç™»å½•ï¼Œé‚£ä¹Ÿå¾ˆç®€å•ï¼Œç®€å•åœ°æ–¹æ³•å°±æ˜¯æ·»åŠ ä½ ç™»å½•åçš„ cookie äº†ã€‚ æˆ‘ä»¬åœ¨ https://www.v2ex.com/ æ‰«äº†ä¸€éï¼Œå‘ç°å¹¶æ²¡æœ‰ä¸€ä¸ªåˆ—è¡¨èƒ½åŒ…å«æ‰€æœ‰çš„å¸–å­ï¼Œåªèƒ½é€€è€Œæ±‚å…¶æ¬¡ï¼Œé€šè¿‡æŠ“å–åˆ†ç±»ä¸‹çš„æ‰€æœ‰çš„æ ‡ç­¾åˆ—è¡¨é¡µï¼Œæ¥éå†æ‰€æœ‰çš„å¸–å­ï¼š https://www.v2ex.com/?tab=tech ç„¶åæ˜¯ https://www.v2ex.com/go/programmer æœ€åæ¯ä¸ªå¸–å­çš„è¯¦æƒ…åœ°å€æ˜¯ ï¼ˆä¸¾ä¾‹ï¼‰ï¼š https://www.v2ex.com/t/314683#reply1 åˆ›å»ºä¸€ä¸ªé¡¹ç›® åœ¨ pyspider çš„ dashboard çš„å³ä¸‹è§’ï¼Œç‚¹å‡» â€œCreateâ€ æŒ‰é’® æ›¿æ¢ on_start å‡½æ•°çš„ self.crawl çš„ URLï¼š 123@every(minutes=24 * 60) def on_start(self): self.crawl(&apos;https://www.v2ex.com/&apos;, callback=self.index_page, validate_cert=False) self.crawl å‘Šè¯‰ pyspider æŠ“å–æŒ‡å®šé¡µé¢ï¼Œç„¶åä½¿ç”¨ callback å‡½æ•°å¯¹ç»“æœè¿›è¡Œè§£æã€‚ @every) ä¿®é¥°å™¨ï¼Œè¡¨ç¤º on_start æ¯å¤©ä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œè¿™æ ·å°±èƒ½æŠ“åˆ°æœ€æ–°çš„å¸–å­äº†ã€‚ validate_cert=False ä¸€å®šè¦è¿™æ ·ï¼Œå¦åˆ™ä¼šæŠ¥ HTTP 599: SSL certificate problem: unable to get local issuer certificateé”™è¯¯ é¦–é¡µï¼š ç‚¹å‡»ç»¿è‰²çš„ run æ‰§è¡Œï¼Œä½ ä¼šçœ‹åˆ° follows ä¸Šé¢æœ‰ä¸€ä¸ªçº¢è‰²çš„ 1ï¼Œåˆ‡æ¢åˆ° follows é¢æ¿ï¼Œç‚¹å‡»ç»¿è‰²çš„æ’­æ”¾æŒ‰é’®ï¼š ç¬¬äºŒå¼ æˆªå›¾ä¸€å¼€å§‹æ˜¯å‡ºç°è¿™ä¸ªé—®é¢˜äº†ï¼Œè§£å†³åŠæ³•çœ‹å‰é¢å†™çš„æ–‡ç« ï¼Œåæ¥é—®é¢˜å°±ä¸å†ä¼šå‡ºç°äº†ã€‚ Tab åˆ—è¡¨é¡µ : åœ¨ tab åˆ—è¡¨é¡µ ä¸­ï¼Œæˆ‘ä»¬éœ€è¦æå–å‡ºæ‰€æœ‰çš„ä¸»é¢˜åˆ—è¡¨é¡µ çš„ URLã€‚ä½ å¯èƒ½å·²ç»å‘ç°äº†ï¼Œsample handler å·²ç»æå–äº†éå¸¸å¤šå¤§çš„ URL ä»£ç ï¼š1234@config(age=10 * 24 * 60 * 60) def index_page(self, response): for each in response.doc(&apos;a[href^=&quot;https://www.v2ex.com/?tab=&quot;]&apos;).items(): self.crawl(each.attr.href, callback=self.tab_page, validate_cert=False) ç”±äºå¸–å­åˆ—è¡¨é¡µå’Œ tabåˆ—è¡¨é¡µé•¿çš„å¹¶ä¸ä¸€æ ·ï¼Œåœ¨è¿™é‡Œæ–°å»ºäº†ä¸€ä¸ª callback ä¸º self.tab_page @config(age=10 24 60 * 60) åœ¨è¿™è¡¨ç¤ºæˆ‘ä»¬è®¤ä¸º 10 å¤©å†…é¡µé¢æœ‰æ•ˆï¼Œä¸ä¼šå†æ¬¡è¿›è¡Œæ›´æ–°æŠ“å– Goåˆ—è¡¨é¡µ : ä»£ç ï¼š 1234@config(age=10 * 24 * 60 * 60) def tab_page(self, response): for each in response.doc(&apos;a[href^=&quot;https://www.v2ex.com/go/&quot;]&apos;).items(): self.crawl(each.attr.href, callback=self.board_page, validate_cert=False) å¸–å­è¯¦æƒ…é¡µï¼ˆTï¼‰: ä½ å¯ä»¥çœ‹åˆ°ç»“æœé‡Œé¢å‡ºç°äº†ä¸€äº›replyçš„ä¸œè¥¿ï¼Œå¯¹äºè¿™äº›æˆ‘ä»¬æ˜¯å¯ä»¥ä¸éœ€è¦çš„ï¼Œæˆ‘ä»¬å¯ä»¥å»æ‰ã€‚ åŒæ—¶æˆ‘ä»¬è¿˜éœ€è¦è®©ä»–è‡ªå·±å®ç°è‡ªåŠ¨ç¿»é¡µåŠŸèƒ½ã€‚ ä»£ç ï¼š123456789@config(age=10 * 24 * 60 * 60) def board_page(self, response): for each in response.doc(&apos;a[href^=&quot;https://www.v2ex.com/t/&quot;]&apos;).items(): url = each.attr.href if url.find(&apos;#reply&apos;)&gt;0: url = url[0:url.find(&apos;#&apos;)] self.crawl(url, callback=self.detail_page, validate_cert=False) for each in response.doc(&apos;a.page_normal&apos;).items(): self.crawl(each.attr.href, callback=self.board_page, validate_cert=False) #å®ç°è‡ªåŠ¨ç¿»é¡µåŠŸèƒ½ å»æ‰åçš„è¿è¡Œæˆªå›¾ï¼š å®ç°è‡ªåŠ¨ç¿»é¡µåçš„æˆªå›¾ï¼š æ­¤æ—¶æˆ‘ä»¬å·²ç»å¯ä»¥åŒ¹é…äº†æ‰€æœ‰çš„å¸–å­çš„ url äº†ã€‚ ç‚¹å‡»æ¯ä¸ªå¸–å­åé¢çš„æŒ‰é’®å°±å¯ä»¥æŸ¥çœ‹å¸–å­å…·ä½“è¯¦æƒ…äº†ã€‚ ä»£ç ï¼š 12345678910@config(priority=2) def detail_page(self, response): title = response.doc(&apos;h1&apos;).text() content = response.doc(&apos;div.topic_content&apos;).html().replace(&apos;&quot;&apos;, &apos;\\\\&quot;&apos;) self.add_question(title, content) #æ’å…¥æ•°æ®åº“ return &#123; &quot;url&quot;: response.url, &quot;title&quot;: title, &quot;content&quot;: content, &#125; æ’å…¥æ•°æ®åº“çš„è¯ï¼Œéœ€è¦æˆ‘ä»¬åœ¨ä¹‹å‰å®šä¹‰ä¸€ä¸ªadd_questionå‡½æ•°ã€‚ 123456789101112131415#è¿æ¥æ•°æ®åº“def __init__(self): self.db = MySQLdb.connect(&apos;localhost&apos;, &apos;root&apos;, &apos;root&apos;, &apos;wenda&apos;, charset=&apos;utf8&apos;) def add_question(self, title, content): try: cursor = self.db.cursor() sql = &apos;insert into question(title, content, user_id, created_date, comment_count) values (&quot;%s&quot;,&quot;%s&quot;,%d, %s, 0)&apos; % (title, content, random.randint(1, 10) , &apos;now()&apos;); #æ’å…¥æ•°æ®åº“çš„SQLè¯­å¥ print sql cursor.execute(sql) print cursor.lastrowid self.db.commit() except Exception, e: print e self.db.rollback() æŸ¥çœ‹çˆ¬è™«è¿è¡Œç»“æœï¼š å…ˆdebugä¸‹ï¼Œå†è°ƒæˆrunningã€‚pyspideræ¡†æ¶åœ¨windowsä¸‹çš„bug è®¾ç½®è·‘çš„é€Ÿåº¦ï¼Œå»ºè®®ä¸è¦è·‘çš„å¤ªå¿«ï¼Œå¦åˆ™å¾ˆå®¹æ˜“è¢«å‘ç°æ˜¯çˆ¬è™«çš„ï¼Œäººå®¶å°±ä¼šæŠŠä½ çš„IPç»™å°æ‰çš„ æŸ¥çœ‹è¿è¡Œå·¥ä½œ æŸ¥çœ‹çˆ¬å–ä¸‹æ¥çš„å†…å®¹ ç„¶åå†æœ¬åœ°æ•°æ®åº“GUIè½¯ä»¶ä¸ŠæŸ¥è¯¢ä¸‹å°±å¯ä»¥çœ‹åˆ°æ•°æ®å·²ç»ä¿å­˜åˆ°æœ¬åœ°äº†ã€‚ è‡ªå·±éœ€è¦ç”¨çš„è¯å°±å¯ä»¥å¯¼å…¥å‡ºæ¥äº†ã€‚ åœ¨å¼€å¤´æˆ‘å°±å‘Šè¯‰å¤§å®¶çˆ¬è™«çš„ä»£ç äº†ï¼Œå¦‚æœè¯¦ç»†çš„çœ‹çœ‹é‚£ä¸ªprojectï¼Œä½ å°±ä¼šæ‰¾åˆ°æˆ‘ä¸Šä¼ çš„çˆ¬å–æ•°æ®äº†ã€‚ï¼ˆä»…ä¾›å­¦ä¹ ä½¿ç”¨ï¼Œåˆ‡å‹¿å•†ç”¨ï¼ï¼‰ å½“ç„¶ä½ è¿˜ä¼šçœ‹åˆ°å…¶ä»–çš„çˆ¬è™«ä»£ç çš„äº†ï¼Œå¦‚æœä½ è§‰å¾—ä¸é”™å¯ä»¥ç»™ä¸ª Starï¼Œæˆ–è€…ä½ ä¹Ÿæ„Ÿå…´è¶£çš„è¯ï¼Œä½ å¯ä»¥forkæˆ‘çš„é¡¹ç›®ï¼Œå’Œæˆ‘ä¸€èµ·å­¦ä¹ ï¼Œè¿™ä¸ªé¡¹ç›®é•¿æœŸæ›´æ–°ä¸‹å»ã€‚ æœ€åï¼š ä»£ç ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869# created by 10412# !/usr/bin/env python# -*- encoding: utf-8 -*-# Created on 2016-10-20 20:43:00# Project: V2EXfrom pyspider.libs.base_handler import *import reimport randomimport MySQLdbclass Handler(BaseHandler): crawl_config = &#123; &#125; def __init__(self): self.db = MySQLdb.connect(&apos;localhost&apos;, &apos;root&apos;, &apos;root&apos;, &apos;wenda&apos;, charset=&apos;utf8&apos;) def add_question(self, title, content): try: cursor = self.db.cursor() sql = &apos;insert into question(title, content, user_id, created_date, comment_count) values (&quot;%s&quot;,&quot;%s&quot;,%d, %s, 0)&apos; % (title, content, random.randint(1, 10) , &apos;now()&apos;); print sql cursor.execute(sql) print cursor.lastrowid self.db.commit() except Exception, e: print e self.db.rollback() @every(minutes=24 * 60) def on_start(self): self.crawl(&apos;https://www.v2ex.com/&apos;, callback=self.index_page, validate_cert=False) @config(age=10 * 24 * 60 * 60) def index_page(self, response): for each in response.doc(&apos;a[href^=&quot;https://www.v2ex.com/?tab=&quot;]&apos;).items(): self.crawl(each.attr.href, callback=self.tab_page, validate_cert=False) @config(age=10 * 24 * 60 * 60) def tab_page(self, response): for each in response.doc(&apos;a[href^=&quot;https://www.v2ex.com/go/&quot;]&apos;).items(): self.crawl(each.attr.href, callback=self.board_page, validate_cert=False) @config(age=10 * 24 * 60 * 60) def board_page(self, response): for each in response.doc(&apos;a[href^=&quot;https://www.v2ex.com/t/&quot;]&apos;).items(): url = each.attr.href if url.find(&apos;#reply&apos;)&gt;0: url = url[0:url.find(&apos;#&apos;)] self.crawl(url, callback=self.detail_page, validate_cert=False) for each in response.doc(&apos;a.page_normal&apos;).items(): self.crawl(each.attr.href, callback=self.board_page, validate_cert=False) @config(priority=2) def detail_page(self, response): title = response.doc(&apos;h1&apos;).text() content = response.doc(&apos;div.topic_content&apos;).html().replace(&apos;&quot;&apos;, &apos;\\\\&quot;&apos;) self.add_question(title, content) #æ’å…¥æ•°æ®åº“ return &#123; &quot;url&quot;: response.url, &quot;title&quot;: title, &quot;content&quot;: content, &#125;","tags":[{"name":"Python","slug":"Python","permalink":"http://yoursite.com/tags/Python/"},{"name":"çˆ¬è™«","slug":"çˆ¬è™«","permalink":"http://yoursite.com/tags/çˆ¬è™«/"},{"name":"Pyspider","slug":"Pyspider","permalink":"http://yoursite.com/tags/Pyspider/"}]},{"title":"MySQL å¤„ç†æµ·é‡æ•°æ®æ—¶çš„ä¸€äº›ä¼˜åŒ–æŸ¥è¯¢é€Ÿåº¦æ–¹æ³•","date":"2017-06-12T16:00:00.000Z","path":"2017/06/13/MySQL-select-good/","text":"åœ¨å‚ä¸å®é™…é¡¹ç›®ä¸­ï¼Œå½“ MySQL è¡¨çš„æ•°æ®é‡è¾¾åˆ°ç™¾ä¸‡çº§æ—¶ï¼Œæ™®é€šçš„ SQL æŸ¥è¯¢æ•ˆç‡å‘ˆç›´çº¿ä¸‹é™ï¼Œè€Œä¸”å¦‚æœ where ä¸­çš„æŸ¥è¯¢æ¡ä»¶è¾ƒå¤šæ—¶ï¼Œå…¶æŸ¥è¯¢é€Ÿåº¦æ— æ³•å®¹å¿ã€‚æƒ³æƒ³å¯çŸ¥ï¼Œå‡å¦‚æˆ‘ä»¬æŸ¥è¯¢æ·˜å®çš„ä¸€ä¸ªè®¢å•è¯¦æƒ…ï¼Œå¦‚æœæŸ¥è¯¢æ—¶é—´é«˜è¾¾å‡ åç§’ï¼Œè¿™ä¹ˆé«˜çš„æŸ¥è¯¢å»¶æ—¶ï¼Œä»»ä½•ç”¨æˆ·éƒ½ä¼šæŠ“ç‹‚ã€‚å› æ­¤å¦‚ä½•æé«˜ SQL è¯­å¥æŸ¥è¯¢æ•ˆç‡ï¼Œæ˜¾å¾—ååˆ†é‡è¦ã€‚ æŸ¥è¯¢é€Ÿåº¦æ…¢çš„åŸå› 1ã€æ²¡æœ‰ç´¢å¼•æˆ–è€…æ²¡æœ‰ç”¨åˆ°ç´¢å¼•ï¼ˆè¿™æ˜¯æŸ¥è¯¢æ…¢æœ€å¸¸è§çš„é—®é¢˜ï¼Œæ˜¯ç¨‹åºè®¾è®¡çš„ç¼ºé™·ï¼‰ 2ã€I/O ååé‡å°ï¼Œå½¢æˆäº†ç“¶é¢ˆæ•ˆåº”ã€‚ 3ã€æ²¡æœ‰åˆ›å»ºè®¡ç®—åˆ—å¯¼è‡´æŸ¥è¯¢ä¸ä¼˜åŒ–ã€‚ 4ã€å†…å­˜ä¸è¶³ 5ã€ç½‘ç»œé€Ÿåº¦æ…¢ 6ã€æŸ¥è¯¢å‡ºçš„æ•°æ®é‡è¿‡å¤§ï¼ˆå¯é‡‡ç”¨å¤šæ¬¡æŸ¥è¯¢ï¼Œå…¶ä»–çš„æ–¹æ³•é™ä½æ•°æ®é‡ï¼‰ 7ã€é”æˆ–è€…æ­»é”ï¼ˆè¿™æ˜¯æŸ¥è¯¢æ…¢æœ€å¸¸è§çš„é—®é¢˜ï¼Œæ˜¯ç¨‹åºè®¾è®¡çš„ç¼ºé™·ï¼‰ 8ã€sp_lock,sp_who,æ´»åŠ¨çš„ç”¨æˆ·æŸ¥çœ‹,åŸå› æ˜¯è¯»å†™ç«äº‰èµ„æºã€‚ 9ã€è¿”å›äº†ä¸å¿…è¦çš„è¡Œå’Œåˆ— 10ã€æŸ¥è¯¢è¯­å¥ä¸å¥½ï¼Œæ²¡æœ‰ä¼˜åŒ– 30 ç§ SQL æŸ¥è¯¢è¯­å¥çš„ä¼˜åŒ–æ–¹æ³•ï¼š1ã€åº”å°½é‡é¿å…åœ¨ where å­å¥ä¸­ä½¿ç”¨ != æˆ–è€… &lt;&gt; æ“ä½œç¬¦ï¼Œå¦åˆ™å°†å¼•æ“æ”¾å¼ƒä½¿ç”¨ç´¢å¼•è€Œè¿›è¡Œå…¨è¡¨æ‰«æã€‚ 2ã€åº”å°½é‡é¿å…åœ¨ where å­å¥ä¸­å¯¹å­—æ®µè¿›è¡Œ null å€¼åˆ¤æ–­ï¼Œå¦åˆ™å°†å¯¼è‡´å¼•æ“æ”¾å¼ƒä½¿ç”¨ç´¢å¼•è€Œè¿›è¡Œå…¨è¡¨æ‰«æï¼Œå¦‚ï¼š 1select id from t where num is null; å¯ä»¥åœ¨ num ä¸Šè®¾ç½®é»˜è®¤å€¼ 0 ï¼Œç¡®ä¿è¡¨ä¸­ num åˆ—æ²¡æœ‰ null å€¼ï¼Œç„¶åè¿™æ ·æŸ¥è¯¢ï¼š 1select id from t where num = 0; 3ã€å¯¹æŸ¥è¯¢è¿›è¡Œä¼˜åŒ–ï¼Œåº”å°½é‡é¿å…å…¨è¡¨æ‰«æï¼Œé¦–å…ˆåº”è€ƒè™‘åœ¨ where åŠ order by æ¶‰åŠçš„åˆ—ä¸Šå»ºç«‹ç´¢å¼•ã€‚ 4ã€å°½é‡é¿å…åœ¨ where å­å¥ä¸­ä½¿ç”¨ or æ¥è¿æ¥æ¡ä»¶ï¼Œå¦åˆ™å°†å¯¼è‡´å¼•æ“æ”¾å¼ƒä½¿ç”¨ç´¢å¼•è€Œè¿›è¡Œå…¨è¡¨æ‰«æï¼Œå¦‚ï¼š 1select id from t where num = 10 or num = 20; å¯ä»¥è¿™æ ·æŸ¥è¯¢ï¼š 123select id from t where num = 10union allselect id from t where num = 20; 5ã€ä¸‹é¢çš„æŸ¥è¯¢ä¹Ÿå°†å¯¼è‡´å…¨è¡¨æ‰«æï¼šï¼ˆä¸èƒ½å‰ç½®ç™¾åˆ†å·ï¼‰ 1select id from t where name like '%abc%'; è‹¥è¦æé«˜æ•ˆç‡ï¼Œå¯ä»¥è€ƒè™‘å…¨æ–‡æ£€ç´¢ã€‚ 6ã€in å’Œ not in ä¹Ÿè¦æ…ç”¨ï¼Œå¦åˆ™ä¼šå¯¼è‡´å…¨è¡¨æ‰«æï¼Œå¦‚ï¼š 1select id from t where num in(1, 2, 3); å¯¹äºè¿ç»­çš„æ•°å€¼ï¼Œèƒ½ç”¨ between å°±ä¸è¦ç”¨ in äº†ï¼š 1select id from t where num between 1 and 3; 12345select xx,phone FROM send a JOIN ( select '13891030091' phone union select '13992085916' â€¦â€¦â€¦â€¦ UNION SELECT '13619100234' ) b on a.Phone=b.phone--æ›¿ä»£ä¸‹é¢ å¾ˆå¤šæ•°æ®éš”å¼€çš„æ—¶å€™in('13891030091','13992085916','13619100234'â€¦â€¦â€¦â€¦) 7ã€å¦‚æœåœ¨ where å­å¥ä¸­ä½¿ç”¨å‚æ•°ï¼Œä¹Ÿä¼šå¯¼è‡´å…¨è¡¨æ‰«æã€‚å› ä¸º SQL åªæœ‰åœ¨è¿è¡Œæ—¶æ‰ä¼šè§£æå±€éƒ¨å˜é‡ï¼Œä½†ä¼˜åŒ–ç¨‹åºä¸èƒ½å°†è®¿é—®è®¡åˆ’çš„é€‰æ‹©åˆ°è¿è¡Œæ—¶ï¼›å®ƒå¿…é¡»åœ¨ç¼–è¯‘æ—¶è¿›è¡Œé€‰æ‹©ã€‚ç„¶è€Œï¼Œå¦‚æœåœ¨ç¼–è¯‘æ—¶ç®€å†è®¿é—®è®¡åˆ’ï¼Œå˜é‡çš„å€¼è¿˜æ˜¯æœªçŸ¥çš„ï¼Œå› è€Œæ— æ³•ä½œä¸ºç´¢å¼•é€‰æ‹©çš„è¾“å…¥é¡¹ã€‚å¦‚ä¸‹é¢è¯­å¥å°†è¿›è¡Œå…¨è¡¨æ‰«æï¼š 1select id from t where num = @num; å¯ä»¥æ”¹ä¸ºå¼ºåˆ¶æŸ¥è¯¢ä½¿ç”¨ç´¢å¼•ï¼š 1select id from t with(index(ç´¢å¼•å)) where num = @num; 8ã€åº”å°½é‡é¿å…åœ¨ where å­å¥ä¸­å¯¹å­—æ®µè¿›è¡Œè¡¨è¾¾å¼æ“ä½œï¼Œè¿™å°†å¯¼è‡´å¼•æ“æ”¾å¼ƒä½¿ç”¨ç´¢å¼•è€Œè¿›è¡Œå…¨è¡¨æ‰«æã€‚å¦‚ï¼š 1select id from t where num/2 = 100; åº”æ”¹ä¸ºï¼š 1select id from t where num = 100 * 2; 9ã€åº”å°½é‡é¿å…åœ¨ where å­å¥ä¸­å¯¹å­—æ®µè¿›è¡Œå‡½æ•°æ“ä½œï¼Œè¿™å°†å¯¼è‡´å¼•æ“æ”¾å¼ƒä½¿ç”¨ç´¢å¼•è€Œè¿›è¡Œå…¨è¡¨æ‰«æã€‚å¦‚ï¼š 12select id from t where substring(name, 1, 3) = â€™abcâ€™â€“name; //ä»¥abcå¼€å¤´çš„idselect id from t where datediff(day,createdate,â€™2005-11-30â€²) = 0â€“â€™2005-11-30â€²; //ç”Ÿæˆçš„id åº”æ”¹ä¸º: 12select id from t where name like â€˜abc%â€™select id from t where createdate &gt;= â€™2005-11-30â€² and createdate &lt; â€™2005-12-1â€²; 10ã€ä¸è¦åœ¨ where å­å¥ä¸­çš„ â€œ=â€ å·¦è¾¹è¿›è¡Œå‡½æ•°ï¼Œç®—æœ¯è¿ç®—æˆ–è€…å…¶ä»–è¡¨è¾¾å¼è¿ç®—ï¼Œå¦åˆ™ç³»ç»Ÿå°†å¯èƒ½æ— æ³•æ­£ç¡®ä½¿ç”¨ç´¢å¼•ã€‚ 11ã€åœ¨ä½¿ç”¨ç´¢å¼•å­—æ®µä½œä¸ºæ¡ä»¶æ—¶ï¼Œå¦‚æœè¯¥ç´¢å¼•æ˜¯å¤åˆç´¢å¼•ï¼Œé‚£ä¹ˆå¿…é¡»ä½¿ç”¨åˆ°è¯¥ç´¢å¼•çš„ç¬¬ä¸€ä¸ªå­—æ®µä½œä¸ºæ¡ä»¶æ—¶æ‰èƒ½ä¿è¯ç³»ç»Ÿä½¿ç”¨è¯¥ç´¢å¼•ï¼Œå¦åˆ™è¯¥ç´¢å¼•å°†ä¸ä¼šè¢«ä½¿ç”¨ï¼Œå¹¶ä¸”åº”å°½å¯èƒ½çš„è®©å­—æ®µé¡ºåºä¸ç´¢å¼•é¡ºåºç›¸ä¸€è‡´ã€‚ 12ã€ä¸è¦äº›ä¸€äº›æ²¡æœ‰æ„ä¹‰çš„æŸ¥è¯¢ï¼Œå¦‚éœ€è¦ç”Ÿæˆä¸€ä¸ªç©ºè¡¨ç»“æ„ï¼š 1select col1,col2 into #t from t where 1=0; è¿™ç±»ä»£ç ä¸ä¼šè¿”å›ä»»ä½•ç»“æœé›†ï¼Œä½†æ˜¯ä¼šæ¶ˆè€—ç³»ç»Ÿèµ„æºçš„ï¼Œåº”æ”¹æˆè¿™æ ·ï¼š 1create table #t(â€¦) 13ã€å¾ˆå¤šæ—¶å€™ç”¨ exists ä»£æ›¿ in æ˜¯ä¸€ä¸ªå¥½çš„é€‰æ‹©ï¼š 1select num from a where num in(select num from b); ç”¨ä¸‹é¢çš„è¯­å¥æ›¿æ¢ï¼š 1select num from a where exists(select 1 from b where num=a.num); 14ã€å¹¶ä¸æ˜¯æ‰€æœ‰ç´¢å¼•å¯¹æŸ¥è¯¢éƒ½æœ‰æ•ˆï¼ŒSQLæ˜¯æ ¹æ®è¡¨ä¸­æ•°æ®æ¥è¿›è¡ŒæŸ¥è¯¢ä¼˜åŒ–çš„ï¼Œå½“ç´¢å¼•åˆ—æœ‰å¤§é‡æ•°æ®é‡å¤æ—¶ï¼ŒSQLæŸ¥è¯¢å¯èƒ½ä¸ä¼šå»åˆ©ç”¨ç´¢å¼•ï¼Œå¦‚ä¸€è¡¨ä¸­æœ‰å­—æ®µ sexï¼Œmaleã€femaleå‡ ä¹å„ä¸€åŠï¼Œé‚£ä¹ˆå³ä½¿åœ¨sexä¸Šå»ºäº†ç´¢å¼•ä¹Ÿå¯¹æŸ¥è¯¢æ•ˆç‡èµ·ä¸äº†ä½œç”¨ã€‚ 15ã€ç´¢å¼•å¹¶ä¸æ˜¯è¶Šå¤šè¶Šå¥½ï¼Œç´¢å¼•å›ºç„¶å¯ä»¥æé«˜ç›¸åº”çš„ select çš„æ•ˆç‡ï¼Œä½†åŒæ—¶ä¹Ÿé™ä½äº† insert åŠ update çš„æ•ˆç‡ï¼Œå› ä¸º insert æˆ– update æ—¶æœ‰å¯èƒ½ä¼šé‡å»ºç´¢å¼•ï¼Œæ‰€ä»¥æ€æ ·å»ºç´¢å¼•éœ€è¦æ…é‡è€ƒè™‘ï¼Œè§†å…·ä½“æƒ…å†µè€Œå®šã€‚ä¸€ä¸ªè¡¨çš„ç´¢å¼•æ•°æœ€å¥½ä¸è¦è¶…è¿‡6ä¸ªï¼Œè‹¥å¤ªå¤šåˆ™åº”è€ƒè™‘ä¸€äº›ä¸å¸¸ä½¿ç”¨åˆ°çš„åˆ—ä¸Šå»ºçš„ç´¢å¼•æ˜¯å¦æœ‰å¿…è¦ã€‚ 16ã€åº”å°½å¯èƒ½çš„é¿å…æ›´æ–° clustered ç´¢å¼•æ•°æ®åˆ—ï¼Œå› ä¸º clustered ç´¢å¼•æ•°æ®åˆ—çš„é¡ºåºå°±æ˜¯è¡¨è®°å½•çš„ç‰©ç†å­˜å‚¨é¡ºåºï¼Œä¸€æ—¦è¯¥åˆ—å€¼æ”¹å˜å°†å¯¼è‡´æ•´ä¸ªè¡¨è®°å½•çš„é¡ºåºçš„è°ƒæ•´ï¼Œä¼šè€—è´¹ç›¸å½“å¤§çš„èµ„æºã€‚è‹¥åº”ç”¨ç³»ç»Ÿéœ€è¦é¢‘ç¹æ›´æ–° clustered ç´¢å¼•æ•°æ®åˆ—ï¼Œé‚£ä¹ˆéœ€è¦è€ƒè™‘æ˜¯å¦åº”å°†è¯¥ç´¢å¼•å»ºä¸º clustered ç´¢å¼•ã€‚ 17ã€å°½é‡ä½¿ç”¨æ•°å­—å‹å­—æ®µï¼Œè‹¥åªå«æ•°å€¼ä¿¡æ¯çš„å­—æ®µå°½é‡ä¸è¦è®¾è®¡ä¸ºå­—ç¬¦å‹ï¼Œè¿™ä¼šé™ä½æŸ¥è¯¢å’Œè¿æ¥çš„æ€§èƒ½ï¼Œå¹¶ä¼šå¢åŠ å­˜å‚¨å¼€é”€ã€‚è¿™æ˜¯å› ä¸ºå¼•æ“åœ¨å¤„ç†æŸ¥è¯¢å’Œè¿æ¥æ—¶ä¼š é€ä¸ªæ¯”è¾ƒå­—ç¬¦ä¸²ä¸­æ¯ä¸€ä¸ªå­—ç¬¦ï¼Œè€Œå¯¹äºæ•°å­—å‹è€Œè¨€åªéœ€è¦æ¯”è¾ƒä¸€æ¬¡å°±å¤Ÿäº†ã€‚ 18ã€å°½å¯èƒ½çš„ä½¿ç”¨ varchar/nvarchar ä»£æ›¿ char/nchar ï¼Œå› ä¸ºé¦–å…ˆå˜é•¿å­—æ®µå­˜å‚¨ç©ºé—´å°ï¼Œå¯ä»¥èŠ‚çœå­˜å‚¨ç©ºé—´ï¼Œå…¶æ¬¡å¯¹äºæŸ¥è¯¢æ¥è¯´ï¼Œåœ¨ä¸€ä¸ªç›¸å¯¹è¾ƒå°çš„å­—æ®µå†…æœç´¢æ•ˆç‡æ˜¾ç„¶è¦é«˜äº›ã€‚ 19ã€ä»»ä½•åœ°æ–¹éƒ½ä¸è¦ä½¿ç”¨ select * from t ï¼Œç”¨å…·ä½“çš„å­—æ®µåˆ—è¡¨ä»£æ›¿ *ï¼Œä¸è¦è¿”å›ç”¨ä¸åˆ°çš„ä»»ä½•å­—æ®µã€‚ 20ã€å°½é‡ä½¿ç”¨è¡¨å˜é‡æ¥ä»£æ›¿ä¸´æ—¶è¡¨ã€‚å¦‚æœè¡¨å˜é‡åŒ…å«å¤§é‡æ•°æ®ï¼Œè¯·æ³¨æ„ç´¢å¼•éå¸¸æœ‰é™ï¼ˆåªæœ‰ä¸»é”®ç´¢å¼•ï¼‰ã€‚ 21ã€é¿å…é¢‘ç¹åˆ›å»ºå’Œåˆ é™¤ä¸´æ—¶è¡¨ï¼Œä»¥å‡å°‘ç³»ç»Ÿè¡¨èµ„æºçš„æ¶ˆè€—ã€‚ 22ã€ä¸´æ—¶è¡¨å¹¶ä¸æ˜¯ä¸å¯ä½¿ç”¨ï¼Œé€‚å½“åœ°ä½¿ç”¨å®ƒä»¬å¯ä»¥ä½¿æŸäº›ä¾‹ç¨‹æ›´æœ‰æ•ˆï¼Œä¾‹å¦‚ï¼Œå½“éœ€è¦é‡å¤å¼•ç”¨å¤§å‹è¡¨æˆ–å¸¸ç”¨è¡¨ä¸­çš„æŸä¸ªæ•°æ®é›†æ—¶ã€‚ä½†æ˜¯ï¼Œå¯¹äºä¸€æ¬¡æ€§äº‹ä»¶ï¼Œæœ€å¥½ä½¿ç”¨å¯¼å‡ºè¡¨ã€‚ 23ã€åœ¨æ–°å»ºä¸´æ—¶è¡¨æ—¶ï¼Œå¦‚æœä¸€æ¬¡æ€§æ’å…¥æ•°æ®é‡å¾ˆå¤§ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨ select into ä»£æ›¿ create tableï¼Œé¿å…é€ æˆå¤§é‡ log ï¼Œä»¥æé«˜é€Ÿåº¦ï¼›å¦‚æœæ•°æ®é‡ä¸å¤§ï¼Œä¸ºäº†ç¼“å’Œç³»ç»Ÿè¡¨çš„èµ„æºï¼Œåº”å…ˆ create tableï¼Œç„¶å insertã€‚ 24ã€å¦‚æœä½¿ç”¨åˆ°äº†ä¸´æ—¶è¡¨ï¼Œåœ¨å­˜å‚¨è¿‡ç¨‹çš„æœ€ååŠ¡å¿…å°†æ‰€æœ‰çš„ä¸´æ—¶è¡¨æ˜¾å¼åˆ é™¤ï¼Œå…ˆ truncate table ï¼Œç„¶å drop table ï¼Œè¿™æ ·å¯ä»¥é¿å…ç³»ç»Ÿè¡¨çš„è¾ƒé•¿æ—¶é—´é”å®šã€‚ 25ã€å°½é‡é¿å…ä½¿ç”¨æ¸¸æ ‡ï¼Œå› ä¸ºæ¸¸æ ‡çš„æ•ˆç‡è¾ƒå·®ï¼Œå¦‚æœæ¸¸æ ‡æ“ä½œçš„æ•°æ®è¶…è¿‡1ä¸‡è¡Œï¼Œé‚£ä¹ˆå°±åº”è¯¥è€ƒè™‘æ”¹å†™ã€‚ 26ã€ä½¿ç”¨åŸºäºæ¸¸æ ‡çš„æ–¹æ³•æˆ–ä¸´æ—¶è¡¨æ–¹æ³•ä¹‹å‰ï¼Œåº”å…ˆå¯»æ‰¾åŸºäºé›†çš„è§£å†³æ–¹æ¡ˆæ¥è§£å†³é—®é¢˜ï¼ŒåŸºäºé›†çš„æ–¹æ³•é€šå¸¸æ›´æœ‰æ•ˆã€‚ 27ã€ä¸ä¸´æ—¶è¡¨ä¸€æ ·ï¼Œæ¸¸æ ‡å¹¶ä¸æ˜¯ä¸å¯ä½¿ç”¨ã€‚å¯¹å°å‹æ•°æ®é›†ä½¿ç”¨ FAST_FORWARD æ¸¸æ ‡é€šå¸¸è¦ä¼˜äºå…¶ä»–é€è¡Œå¤„ç†æ–¹æ³•ï¼Œå°¤å…¶æ˜¯åœ¨å¿…é¡»å¼•ç”¨å‡ ä¸ªè¡¨æ‰èƒ½è·å¾—æ‰€éœ€çš„æ•°æ®æ—¶ã€‚åœ¨ç»“æœé›†ä¸­åŒ…æ‹¬â€œåˆè®¡â€çš„ä¾‹ç¨‹é€šå¸¸è¦æ¯”ä½¿ç”¨æ¸¸æ ‡æ‰§è¡Œçš„é€Ÿåº¦å¿«ã€‚å¦‚æœå¼€å‘æ—¶ é—´å…è®¸ï¼ŒåŸºäºæ¸¸æ ‡çš„æ–¹æ³•å’ŒåŸºäºé›†çš„æ–¹æ³•éƒ½å¯ä»¥å°è¯•ä¸€ä¸‹ï¼Œçœ‹å“ªä¸€ç§æ–¹æ³•çš„æ•ˆæœæ›´å¥½ã€‚ 28ã€åœ¨æ‰€æœ‰çš„å­˜å‚¨è¿‡ç¨‹å’Œè§¦å‘å™¨çš„å¼€å§‹å¤„è®¾ç½® SET NOCOUNT ON ï¼Œåœ¨ç»“æŸæ—¶è®¾ç½® SET NOCOUNT OFF ã€‚æ— éœ€åœ¨æ‰§è¡Œå­˜å‚¨è¿‡ç¨‹å’Œè§¦å‘å™¨çš„æ¯ä¸ªè¯­å¥åå‘å®¢æˆ·ç«¯å‘é€ DONE_IN_PROC æ¶ˆæ¯ã€‚ 29ã€å°½é‡é¿å…å‘å®¢æˆ·ç«¯è¿”å›å¤§æ•°æ®é‡ï¼Œè‹¥æ•°æ®é‡è¿‡å¤§ï¼Œåº”è¯¥è€ƒè™‘ç›¸åº”éœ€æ±‚æ˜¯å¦åˆç†ã€‚ 30ã€å°½é‡é¿å…å¤§äº‹åŠ¡æ“ä½œï¼Œæé«˜ç³»ç»Ÿå¹¶å‘èƒ½åŠ›ã€‚","tags":[{"name":"MySQL","slug":"MySQL","permalink":"http://yoursite.com/tags/MySQL/"}]},{"title":"MyBatisçš„foreachè¯­å¥è¯¦è§£","date":"2017-06-12T16:00:00.000Z","path":"2017/06/13/MyBatis-foreach/","text":"foreach çš„ä¸»è¦ç”¨åœ¨æ„å»ºinæ¡ä»¶ä¸­ï¼Œå®ƒå¯ä»¥åœ¨SQLè¯­å¥ä¸­è¿›è¡Œè¿­ä»£ä¸€ä¸ªé›†åˆã€‚ foreach å…ƒç´ çš„å±æ€§ä¸»è¦æœ‰ itemï¼Œindexï¼Œcollectionï¼Œopenï¼Œseparatorï¼Œcloseã€‚ item è¡¨ç¤ºé›†åˆä¸­æ¯ä¸€ä¸ªå…ƒç´ è¿›è¡Œè¿­ä»£æ—¶çš„åˆ«åï¼Œ index æŒ‡ å®šä¸€ä¸ªåå­—ï¼Œç”¨äºè¡¨ç¤ºåœ¨è¿­ä»£è¿‡ç¨‹ä¸­ï¼Œæ¯æ¬¡è¿­ä»£åˆ°çš„ä½ç½®ï¼Œ open è¡¨ç¤ºè¯¥è¯­å¥ä»¥ä»€ä¹ˆå¼€å§‹ï¼Œ separator è¡¨ç¤ºåœ¨æ¯æ¬¡è¿›è¡Œè¿­ä»£ä¹‹é—´ä»¥ä»€ä¹ˆç¬¦å·ä½œä¸ºåˆ†éš” ç¬¦ï¼Œ close è¡¨ç¤ºä»¥ä»€ä¹ˆç»“æŸã€‚ åœ¨ä½¿ç”¨ foreach çš„æ—¶å€™æœ€å…³é”®çš„ä¹Ÿæ˜¯æœ€å®¹æ˜“å‡ºé”™çš„å°±æ˜¯ collection å±æ€§ï¼Œè¯¥å±æ€§æ˜¯å¿…é¡»æŒ‡å®šçš„ï¼Œä½†æ˜¯åœ¨ä¸åŒæƒ…å†µ ä¸‹ï¼Œè¯¥å±æ€§çš„å€¼æ˜¯ä¸ä¸€æ ·çš„ï¼Œä¸»è¦æœ‰ä¸€ä¸‹3ç§æƒ…å†µï¼š å¦‚æœä¼ å…¥çš„æ˜¯å•å‚æ•°ä¸”å‚æ•°ç±»å‹æ˜¯ä¸€ä¸ªListçš„æ—¶å€™ï¼Œcollection å±æ€§å€¼ä¸º list å¦‚æœä¼ å…¥çš„æ˜¯å•å‚æ•°ä¸”å‚æ•°ç±»å‹æ˜¯ä¸€ä¸ª array æ•°ç»„çš„æ—¶å€™ï¼Œcollection çš„å±æ€§å€¼ä¸º array å¦‚æœä¼ å…¥çš„å‚æ•°æ˜¯å¤šä¸ªçš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±éœ€è¦æŠŠå®ƒä»¬å°è£…æˆä¸€ä¸ª Map äº†ï¼Œå½“ç„¶å•å‚æ•°ä¹Ÿå¯ä»¥å°è£…æˆmapï¼Œå®é™…ä¸Šå¦‚æœä½ åœ¨ä¼ å…¥å‚æ•°çš„æ—¶å€™ï¼Œåœ¨ breast é‡Œé¢ä¹Ÿæ˜¯ä¼šæŠŠå®ƒå°è£…æˆä¸€ä¸ª Map çš„ï¼Œmap çš„ key å°±æ˜¯å‚æ•°åï¼Œæ‰€ä»¥è¿™ä¸ªæ—¶å€™ collection å±æ€§å€¼å°±æ˜¯ä¼ å…¥çš„ List æˆ– array å¯¹è±¡åœ¨è‡ªå·±å°è£…çš„ map é‡Œé¢çš„ key ã€‚ ä¸‹é¢åˆ†åˆ«æ¥çœ‹çœ‹ä¸Šè¿°ä¸‰ç§æƒ…å†µçš„ç¤ºä¾‹ä»£ç ï¼š 1.å•å‚æ•° List çš„ç±»å‹ï¼š 123456&lt;select id=\"dynamicForeachTest\" resultType=\"Blog\"&gt; select * from t_blog where id in &lt;foreach collection=\"list\" index=\"index\" item=\"item\" open=\"(\" separator=\",\" close=\")\"&gt; #&#123;item&#125; &lt;/foreach&gt;&lt;/select&gt; ä¸Šè¿° collection çš„å€¼ä¸ºlistï¼Œå¯¹åº”çš„ Mapper æ˜¯è¿™æ ·çš„ 1public List&lt;Blog&gt; dynamicForeachTest(List&lt;Integer&gt; ids); æµ‹è¯•ä»£ç ï¼š 12345678910111213@Test public void dynamicForeachTest() &#123; SqlSession session = Util.getSqlSessionFactory().openSession(); BlogMapper blogMapper = session.getMapper(BlogMapper.class); List&lt;Integer&gt; ids = new ArrayList&lt;Integer&gt;(); ids.add(1); ids.add(3); ids.add(6); List&lt;Blog&gt; blogs = blogMapper.dynamicForeachTest(ids); for (Blog blog : blogs) System.out.println(blog); session.close(); &#125; 2.å•å‚æ•°arrayæ•°ç»„çš„ç±»å‹ï¼š 123456&lt;select id=\"dynamicForeach2Test\" resultType=\"Blog\"&gt; select * from t_blog where id in &lt;foreach collection=\"array\" index=\"index\" item=\"item\" open=\"(\" separator=\",\" close=\")\"&gt; #&#123;item&#125; &lt;/foreach&gt;&lt;/select&gt; ä¸Šè¿°collectionä¸ºarrayï¼Œå¯¹åº”çš„Mapperä»£ç ï¼š 1public List&lt;Blog&gt; dynamicForeach2Test(int[] ids); å¯¹åº”çš„æµ‹è¯•ä»£ç ï¼š 12345678910@Test public void dynamicForeach2Test() &#123; SqlSession session = Util.getSqlSessionFactory().openSession(); BlogMapper blogMapper = session.getMapper(BlogMapper.class); int[] ids = new int[] &#123;1,3,6,9&#125;; List&lt;Blog&gt; blogs = blogMapper.dynamicForeach2Test(ids); for (Blog blog : blogs) System.out.println(blog); session.close(); &#125; 3.è‡ªå·±æŠŠå‚æ•°å°è£…æˆMapçš„ç±»å‹ 123456&lt;select id=\"dynamicForeach3Test\" resultType=\"Blog\"&gt; select * from t_blog where title like \"%\"#&#123;title&#125;\"%\" and id in &lt;foreach collection=\"ids\" index=\"index\" item=\"item\" open=\"(\" separator=\",\" close=\")\"&gt; #&#123;item&#125; &lt;/foreach&gt;&lt;/select&gt; ä¸Šè¿°collectionçš„å€¼ä¸ºidsï¼Œæ˜¯ä¼ å…¥çš„å‚æ•°Mapçš„keyï¼Œå¯¹åº”çš„Mapperä»£ç ï¼š 1public List&lt;Blog&gt; dynamicForeach3Test(Map&lt;String, Object&gt; params); å¯¹åº”æµ‹è¯•ä»£ç ï¼š 12345678910111213141516171819@Test public void dynamicForeach3Test() &#123; SqlSession session = Util.getSqlSessionFactory().openSession(); BlogMapper blogMapper = session.getMapper(BlogMapper.class); final List&lt;Integer&gt; ids = new ArrayList&lt;Integer&gt;(); ids.add(1); ids.add(2); ids.add(3); ids.add(6); ids.add(7); ids.add(9); Map&lt;String, Object&gt; params = new HashMap&lt;String, Object&gt;(); params.put(\"ids\", ids); params.put(\"title\", \"ä¸­å›½\"); List&lt;Blog&gt; blogs = blogMapper.dynamicForeach3Test(params); for (Blog blog : blogs) System.out.println(blog); session.close(); &#125;","tags":[{"name":"Mybatis","slug":"Mybatis","permalink":"http://yoursite.com/tags/Mybatis/"},{"name":"foreach","slug":"foreach","permalink":"http://yoursite.com/tags/foreach/"}]},{"title":"ã€ŠJava å¤šçº¿ç¨‹ç¼–ç¨‹æ ¸å¿ƒæŠ€æœ¯ã€‹å­¦ä¹ ç¬”è®°åŠæ€»ç»“","date":"2017-06-12T16:00:00.000Z","path":"2017/06/13/Java-Thread/","text":"ç¬¬ä¸€ç«  â€”â€” Java å¤šçº¿ç¨‹æŠ€èƒ½çº¿ç¨‹æŠ€æœ¯ç‚¹ï¼š çº¿ç¨‹çš„å¯åŠ¨ å¦‚ä½•ä½¿çº¿ç¨‹æš‚åœ å¦‚ä½•ä½¿çº¿ç¨‹åœæ­¢ çº¿ç¨‹çš„ä¼˜å…ˆçº§ çº¿ç¨‹å®‰å…¨ç›¸å…³é—®é¢˜ è¿›ç¨‹å’Œçº¿ç¨‹çš„æ¦‚å¿µåŠå¤šçº¿ç¨‹çš„ä¼˜ç‚¹è¿›ç¨‹ï¼šæ¯”å¦‚æˆ‘ä»¬ç”µè„‘è¿è¡Œçš„ QQ.exe ç¨‹åºï¼Œæ˜¯æ“ä½œç³»ç»Ÿç®¡ç†çš„åŸºæœ¬è¿è¡Œå•å…ƒ çº¿ç¨‹ï¼šåœ¨è¿›ç¨‹ä¸­ç‹¬ç«‹è¿è¡Œçš„å­ä»»åŠ¡ï¼Œæ¯”å¦‚ QQ.exe è¿›ç¨‹ä¸­å°±æœ‰å¾ˆå¤šçº¿ç¨‹åœ¨è¿è¡Œï¼Œä¸‹è½½æ–‡ä»¶çº¿ç¨‹ã€å‘é€æ¶ˆæ¯çº¿ç¨‹ã€è¯­éŸ³çº¿ç¨‹ã€è§†é¢‘çº¿ç¨‹ç­‰ã€‚ å¤šçº¿ç¨‹ä¼˜ç‚¹ï¼šæˆ‘ä»¬ç”µè„‘å¯ä»¥åŒæ—¶æ“ä½œä¸åŒçš„è½¯ä»¶ï¼Œè¾¹å¬ç€æ­Œï¼Œæ•²ç€ä»£ç ï¼ŒæŸ¥çœ‹ pdf æ–‡æ¡£ï¼Œæµè§ˆç½‘é¡µç­‰ï¼ŒCPU åœ¨è¿™äº›ä»»åŠ¡ä¹‹é—´ä¸åœçš„åˆ‡æ¢ï¼Œåˆ‡æ¢éå¸¸å¿«ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±è§‰å¾—ä»–ä»¬æ˜¯åœ¨åŒæ—¶è¿è¡Œçš„ã€‚ ä½¿ç”¨å¤šçº¿ç¨‹ç»§æ‰¿ Thread ç±»JDK æºç æ³¨é‡Šï¼ˆThread.javaï¼‰å¦‚ä¸‹ï¼š 12345678910111213141516171819One is to declare a class to be a subclass(å­ç±») of &lt;code&gt;Thread&lt;/code&gt;. This subclass should override the &lt;code&gt;run&lt;/code&gt; method of class &lt;code&gt;Thread&lt;/code&gt;. An instance of the subclass can then be allocated and started. For example, a thread that computes primeslarger than a stated value could be written as follows://ç»§æ‰¿ Thread ç±»class PrimeThread extends Thread &#123; long minPrime; PrimeThread(long minPrime) &#123; this.minPrime = minPrime; &#125; public void run() &#123; // compute primes larger than minPrime é‡å†™ Thread ç±»çš„ run æ–¹æ³• &#125; &#125;The following code would then create a thread and start it running://å¼€å¯çº¿ç¨‹ PrimeThread p = new PrimeThread(143); p.start(); å®ç° Runnable æ¥å£JDK æºç æ³¨é‡Šï¼ˆThread.javaï¼‰å¦‚ä¸‹ï¼š 12345678910111213141516171819The other way to create a thread is to declare a class that implements the &lt;code&gt;Runnable&lt;/code&gt; interface. That class then implements the &lt;code&gt;run&lt;/code&gt; method. An instance of the class can then be allocated, passed as an argument when creating&lt;code&gt;Thread&lt;/code&gt;, and started. The same example in this other style looks like the following://å®ç° Runnable æ¥å£ class PrimeRun implements Runnable &#123; long minPrime; PrimeRun(long minPrime) &#123; this.minPrime = minPrime; &#125; public void run() &#123; // compute primes larger than minPrime //é‡å†™ run æ–¹æ³• &#125; &#125;The following code would then create a thread and start it running://å¼€å¯çº¿ç¨‹ PrimeRun p = new PrimeRun(143); new Thread(p).start(); currentThread() æ–¹æ³•è¯¥æ–¹æ³•è¿”å›ä»£ç æ®µæ­£åœ¨è¢«å“ªä¸ªçº¿ç¨‹è°ƒç”¨çš„ä¿¡æ¯ã€‚ isAlive() æ–¹æ³•åˆ¤æ–­å½“å‰çº¿ç¨‹æ˜¯å¦å¤„äºæ´»åŠ¨çŠ¶æ€ï¼ˆå·²ç»å¯åŠ¨ä½†æœªç»ˆæ­¢ï¼‰ sleep() æ–¹æ³•åœ¨æŒ‡å®šçš„æ¯«ç§’æ•°å†…è®©å½“å‰â€œæ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹ï¼ˆthis.currentThread() è¿”å›çš„çº¿ç¨‹ï¼‰â€ä¼‘çœ ï¼ˆæš‚åœæ‰§è¡Œï¼‰ã€‚ getId() æ–¹æ³•è·å–çº¿ç¨‹çš„å”¯ä¸€æ ‡è¯† åœæ­¢çº¿ç¨‹å¯ä»¥ä½¿ç”¨ Thread.stop() æ–¹æ³•ï¼Œä½†æœ€å¥½ä¸è¦ç”¨ï¼Œå› ä¸ºè¿™ä¸ªæ–¹æ³•æ˜¯ä¸å®‰å…¨çš„ï¼Œå·²ç»å¼ƒç”¨ä½œåºŸäº†ã€‚ å¤§å¤šæ•°åœæ­¢ä¸€ä¸ªçº¿ç¨‹æ˜¯ä½¿ç”¨ Thread.interrupt() æ–¹æ³• åˆ¤æ–­çº¿ç¨‹æ˜¯å¦æ˜¯åœæ­¢çŠ¶æ€ interrupted() 12345//æµ‹è¯•å½“å‰çº¿ç¨‹æ˜¯å¦å·²ç»ä¸­æ–­äº†ï¼Œè¿™ä¸ªçº¿ç¨‹çš„ä¸­æ–­çŠ¶æ€ä¼šè¢«è¿™ä¸ªæ–¹æ³•æ¸…é™¤ã€‚//æ¢å¥è¯è¯´ï¼Œå¦‚æœè¿ç»­ä¸¤æ¬¡è°ƒç”¨äº†è¿™ä¸ªæ–¹æ³•ï¼Œç¬¬äºŒæ¬¡è°ƒç”¨çš„æ—¶å€™å°†ä¼šè¿”å› false ï¼Œpublic static boolean interrupted() &#123; return currentThread().isInterrupted(true);&#125; isInterrupted() 1234567891011 //æµ‹è¯•çº¿ç¨‹æ˜¯å¦å·²ç»ä¸­æ–­äº†ï¼Œçº¿ç¨‹çš„çŠ¶æ€ä¸ä¼šå—è¿™ä¸ªæ–¹æ³•çš„å½±å“ //çº¿ç¨‹ä¸­æ–­è¢«å¿½ç•¥ï¼Œå› ä¸ºçº¿ç¨‹å¤„äºä¸­æ–­ä¸‹ä¸å¤„äºæ´»åŠ¨çŠ¶æ€çš„çº¿ç¨‹ç”±æ­¤è¿”å›falseçš„æ–¹æ³•åæ˜ å‡ºæ¥ public boolean isInterrupted() &#123; return isInterrupted(false); &#125; /*** Tests if some Thread has been interrupted. The interrupted state* is reset or not based on the value of ClearInterrupted that is* passed.*/private native boolean isInterrupted(boolean ClearInterrupted); åœ¨æ²‰ç¡ä¸­åœæ­¢1234567891011121314151617181920212223242526public class MyThread2 extends Thread&#123; @Override public void run() &#123; try &#123; System.out.println(\"run start\"); Thread.sleep(20000); System.out.println(\"run end\"); &#125; catch (InterruptedException e) &#123; System.out.println(\"run catch \"+this.isInterrupted()); e.printStackTrace(); &#125; &#125; public static void main(String[] args) &#123; try &#123; MyThread2 t2 = new MyThread2(); t2.start(); Thread.sleep(200); t2.interrupt(); &#125; catch (InterruptedException e) &#123; System.out.println(\"main catch\"); e.printStackTrace(); &#125; System.out.println(\"main end\"); &#125;&#125; è¿è¡Œç»“æœï¼š 123456run startmain endrun catch falsejava.lang.InterruptedException: sleep interrupted at java.lang.Thread.sleep(Native Method) at com.zhisheng.thread.thread1.MyThread2.run(MyThread2.java:12) ä»è¿è¡Œç»“æœæ¥çœ‹ï¼Œå¦‚æœåœ¨ sleep çŠ¶æ€ä¸‹åœæ­¢æŸä¸€çº¿ç¨‹ï¼Œä¼šè¿›å…¥ catch è¯­å¥ï¼Œå¹¶æ¸…é™¤åœæ­¢çŠ¶æ€å€¼ï¼Œä½¿ä¹‹å˜æˆ falseã€‚ åœ¨åœæ­¢ä¸­æ²‰ç¡12345678910111213141516171819public class MyThread3 extends Thread&#123; @Override public void run() &#123; try &#123; System.out.println(\"run start\"); Thread.sleep(20000); System.out.println(\"run end\"); &#125; catch (InterruptedException e) &#123; System.out.println(\"run catch \"+this.isInterrupted()); e.printStackTrace(); &#125; &#125; public static void main(String[] args) &#123; MyThread3 t3 = new MyThread3(); t3.start(); t3.interrupt(); &#125;&#125; è¿è¡Œç»“æœï¼š 12345run startrun catch falsejava.lang.InterruptedException: sleep interrupted at java.lang.Thread.sleep(Native Method) at com.zhisheng.thread.thread1.MyThread3.run(MyThread3.java:12) èƒ½åœæ­¢çš„çº¿ç¨‹ â€”â€” æš´åŠ›åœæ­¢ä½¿ç”¨ stop() æ–¹æ³•åœæ­¢çº¿ç¨‹ æš‚åœçº¿ç¨‹å¯ä½¿ç”¨ suspend æ–¹æ³•æš‚åœçº¿ç¨‹ï¼Œä½¿ç”¨ resume() æ–¹æ³•æ¢å¤çº¿ç¨‹çš„æ‰§è¡Œã€‚ suspend å’Œ resume æ–¹æ³•çš„ä½¿ç”¨1234567891011121314151617181920212223242526272829public class MyThread4 extends Thread&#123; private int i; public int getI() &#123; return i; &#125; public void setI(int i) &#123; this.i = i; &#125; @Override public void run() &#123; while (true) &#123; i++; &#125; &#125; public static void main(String[] args) throws InterruptedException &#123; MyThread4 t4 = new MyThread4(); t4.start(); System.out.println(\"A----- \" + System.currentTimeMillis() + \" ---- \" + t4.getI()); Thread.sleep(2000); System.out.println(\"A----- \" + System.currentTimeMillis() + \" ---- \" + t4.getI()); t4.suspend(); Thread.sleep(2000); t4.resume(); System.out.println(\"B----- \" + System.currentTimeMillis() + \" ---- \" + t4.getI()); Thread.sleep(2000); System.out.println(\"B----- \" + System.currentTimeMillis() + \" ---- \" + t4.getI()); &#125;&#125; ä»è¿è¡Œç»“æœæ¥çœ‹ï¼Œçº¿ç¨‹çš„ç¡®èƒ½å¤Ÿæš‚åœå’Œæ¢å¤ã€‚ ä½†æ˜¯ suspend å’Œ resume æ–¹æ³•çš„ç¼ºç‚¹å°±æ˜¯ï¼šä¸åŒæ­¥ï¼Œå› ä¸ºçº¿ç¨‹çš„æš‚åœå¯¼è‡´æ•°æ®çš„ä¸åŒæ­¥ã€‚ yield æ–¹æ³•123456789101112131415161718/** * A hint to the scheduler that the current thread is willing to yield * its current use of a processor. The scheduler is free to ignore this * hint. * * &lt;p&gt; Yield is a heuristic attempt to improve relative progression * between threads that would otherwise over-utilise a CPU. Its use * should be combined with detailed profiling and benchmarking to * ensure that it actually has the desired effect. * * &lt;p&gt; It is rarely appropriate to use this method. It may be useful * for debugging or testing purposes, where it may help to reproduce * bugs due to race conditions. It may also be useful when designing * concurrency control constructs such as the ones in the * &#123;@link java.util.concurrent.locks&#125; package. */ //æš‚åœå½“å‰æ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹å¯¹è±¡ï¼Œå¹¶æ‰§è¡Œå…¶ä»–çº¿ç¨‹ã€‚æš‚åœçš„æ—¶é—´ä¸ç¡®å®šã€‚ public static native void yield(); 1234567891011121314151617public class MyThread5 extends Thread&#123; @Override public void run() &#123; double start = System.currentTimeMillis(); for (int i = 0; i &lt; 200000; i++) &#123; //yield();//æš‚åœçš„æ—¶é—´ä¸ç¡®å®š i++; &#125; double end = System.currentTimeMillis(); System.out.println(\"time is \"+(end - start)); &#125; public static void main(String[] args) &#123; MyThread5 t5 = new MyThread5(); t5.start(); &#125;&#125; çº¿ç¨‹çš„ä¼˜å…ˆçº§è®¾ç½®ä¼˜å…ˆçº§çš„æ–¹æ³•ï¼šsetPriority() æ–¹æ³• 12345678910111213public final void setPriority(int newPriority) &#123; ThreadGroup g; checkAccess(); if (newPriority &gt; MAX_PRIORITY || newPriority &lt; MIN_PRIORITY) &#123; throw new IllegalArgumentException(); &#125; if((g = getThreadGroup()) != null) &#123; if (newPriority &gt; g.getMaxPriority()) &#123; newPriority = g.getMaxPriority(); &#125; setPriority0(priority = newPriority); &#125; &#125; ä¸ä¸€å®šä¼˜å…ˆçº§é«˜çš„çº¿ç¨‹å°±å…ˆæ‰§è¡Œã€‚ å®ˆæŠ¤çº¿ç¨‹å½“è¿›ç¨‹ä¸­ä¸å­˜åœ¨éå®ˆæŠ¤çº¿ç¨‹äº†ï¼Œåˆ™å®ˆæŠ¤çº¿ç¨‹è‡ªåŠ¨é”€æ¯ã€‚åƒåœ¾å›æ”¶çº¿ç¨‹å°±æ˜¯å…¸å‹çš„å®ˆæŠ¤çº¿ç¨‹ï¼Œå½“è¿›ç¨‹ä¸­æ²¡æœ‰éå®ˆæŠ¤çº¿ç¨‹äº†ï¼Œåˆ™åƒåœ¾å›æ”¶çº¿ç¨‹ä¹Ÿå°±æ²¡æœ‰å­˜åœ¨çš„å¿…è¦äº†ï¼Œè‡ªåŠ¨é”€æ¯ã€‚ 12345678910111213141516171819202122/** * Marks this thread as either a &#123;@linkplain #isDaemon daemon&#125; thread * or a user thread. The Java Virtual Machine exits when the only * threads running are all daemon threads. * * &lt;p&gt; This method must be invoked before the thread is started. * * @param on * if &#123;@code true&#125;, marks this thread as a daemon thread * @throws IllegalThreadStateException * if this thread is &#123;@linkplain #isAlive alive&#125; * @throws SecurityException * if &#123;@link #checkAccess&#125; determines that the current * thread cannot modify this thread */ public final void setDaemon(boolean on) &#123; checkAccess(); if (isAlive()) &#123; throw new IllegalThreadStateException(); &#125; daemon = on; &#125; ç¬¬äºŒç«  â€”â€” å¯¹è±¡åŠå˜é‡çš„å¹¶å‘è®¿é—®æŠ€æœ¯ç‚¹ï¼š synchronized å¯¹è±¡ç›‘è§†å™¨ä¸º Object æ—¶çš„ä½¿ç”¨ synchronized å¯¹è±¡ç›‘è§†å™¨ä¸º Class æ—¶çš„ä½¿ç”¨ éçº¿ç¨‹å®‰å…¨æ˜¯å¦‚ä½•å‡ºç°çš„ å…³é”®å­— volatile çš„ä¸»è¦ä½œç”¨ å…³é”®å­— volatile ä¸ synchronized çš„åŒºåˆ«åŠä½¿ç”¨æƒ…å†µ synchronized åŒæ­¥æ–¹æ³•æ–¹æ³•å†…çš„å˜é‡ä¸ºçº¿ç¨‹å®‰å…¨â€œéçº¿ç¨‹å®‰å…¨â€é—®é¢˜å­˜åœ¨äºâ€œå®ä¾‹å˜é‡â€ä¸­ï¼Œå¦‚æœæ˜¯æ–¹æ³•å†…éƒ¨çš„ç§æœ‰å˜é‡ï¼Œåˆ™ä¸å­˜åœ¨â€œéçº¿ç¨‹å®‰å…¨â€é—®é¢˜ï¼Œæ‰€å¾—ç»“æœä¹Ÿå°±æ˜¯â€œçº¿ç¨‹å®‰å…¨â€äº†ã€‚ å®ä¾‹å˜é‡éçº¿ç¨‹å®‰å…¨å¦‚æœå¤šçº¿ç¨‹å…±åŒè®¿é—®ä¸€ä¸ªå¯¹è±¡ä¸­çš„å®ä¾‹å˜é‡ï¼Œåˆ™æœ‰å¯èƒ½å‡ºç°â€œéçº¿ç¨‹å®‰å…¨â€é—®é¢˜ã€‚ åœ¨ä¸¤ä¸ªçº¿ç¨‹è®¿é—®åŒä¸€ä¸ªå¯¹è±¡ä¸­çš„åŒæ­¥æ–¹æ³•æ—¶ä¸€å®šæ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚ è„è¯»å‘ç”Ÿè„è¯»çš„æƒ…å†µæ˜¯åœ¨è¯»å–å®ä¾‹å˜é‡æ—¶ï¼Œæ­¤å€¼å·²ç»è¢«å…¶ä»–çº¿ç¨‹æ›´æ”¹è¿‡äº†ã€‚ å¦‚ä¸‹ä¾‹å­å°±å¯ä»¥è¯´æ˜ï¼Œå¦‚æœä¸åŠ  synchronized å…³é”®å­—åœ¨ setValue å’Œ getValue æ–¹æ³•ä¸Šï¼Œå°±ä¼šå‡ºç°æ•°æ®è„è¯»ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142class VarName&#123; private String userName = \"A\"; private String password = \"AA\"; synchronized public void setValue(String userName, String password) &#123; try &#123; this.userName = userName; Thread.sleep(500); this.password = password; System.out.println(\"setValue method Thread name is : \" + Thread.currentThread().getName() + \" userName = \" + userName + \" password = \" + password); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125; //synchronized public void getValue() &#123; System.out.println(\"getValue method Thread name is : \" + Thread.currentThread().getName() + \" userName = \" + userName + \" password = \" + password); &#125;&#125;class Thread1 extends Thread&#123; private VarName varName; public Thread1(VarName varName) &#123; this.varName = varName; &#125; @Override public void run() &#123; varName.setValue(\"B\", \"BB\"); &#125;&#125;public class Test&#123; public static void main(String[] args) throws InterruptedException &#123; VarName v = new VarName(); Thread1 thread1 = new Thread1(v); thread1.start(); Thread.sleep(200);//æ‰“å°ç»“æœå—ç¡çœ æ—¶é—´çš„å½±å“ v.getValue(); &#125;&#125; synchronized é”é‡å…¥å…³é”®å­— synchronized æ‹¥æœ‰é”é‡å…¥çš„åŠŸèƒ½ï¼Œä¹Ÿå°±æ˜¯åœ¨ä½¿ç”¨ synchronized æ—¶ï¼Œå½“ä¸€ä¸ªçº¿ç¨‹å¾—åˆ°ä¸€ä¸ªå¯¹è±¡é”åï¼Œå†æ¬¡è¯·æ±‚æ­¤å¯¹è±¡é”æ˜¯å¯ä»¥å†æ¬¡å¾—åˆ°è¯¥å¯¹è±¡çš„é”çš„ã€‚è¿™ä¹Ÿè¯æ˜äº†åœ¨ä¸€ä¸ª synchronized æ–¹æ³•/å—çš„å†…éƒ¨è°ƒç”¨æœ¬ç±»çš„å…¶ä»– synchronized æ–¹æ³•/å—æ—¶ï¼Œæ˜¯æ°¸è¿œå¯ä»¥å¾—åˆ°é”çš„ã€‚ 12345678910111213141516171819202122232425262728293031class Service&#123; synchronized public void service1() &#123; System.out.println(\"service 1\"); service2(); &#125; synchronized public void service2() &#123; System.out.println(\"service 2\"); service3(); &#125; synchronized public void service3() &#123; System.out.println(\"service 3\"); &#125;&#125;class Thread2 extends Thread&#123; @Override public void run() &#123; Service s = new Service(); s.service1(); &#125;&#125;public class Test2&#123; public static void main(String[] args) &#123; Thread2 t2 = new Thread2(); t2.start(); &#125;&#125; è¿è¡Œç»“æœï¼š 123service 1service 2service 3 åŒæ­¥ä¸å…·æœ‰ç»§æ‰¿æ€§åŒæ­¥ä¸å¯ä»¥ç»§æ‰¿ã€‚ synchronized åŒæ­¥è¯­å¥å—synchronized ä»£ç å—é—´çš„åŒæ­¥æ€§å½“ä¸€ä¸ªçº¿ç¨‹è®¿é—® object çš„ä¸€ä¸ª synchronized(this) åŒæ­¥ä»£ç å—æ—¶ï¼Œå…¶ä»–çº¿ç¨‹å¯¹åŒä¸€ä¸ª object ä¸­æ‰€æœ‰å…¶ä»– synchronized(this) åŒæ­¥ä»£ç å—çš„è®¿é—®å°†è¢«é˜»å¡ï¼Œè¿™è¯´æ˜ synchronized ä½¿ç”¨çš„ â€œå¯¹è±¡ç›‘è§†å™¨â€ æ˜¯ä¸€ä¸ªã€‚ å°†ä»»æ„å¯¹è±¡ä½œä¸ºå¯¹è±¡ç›‘è§†å™¨å¤šä¸ªçº¿ç¨‹è°ƒç”¨åŒä¸€ä¸ªå¯¹è±¡ä¸­çš„ä¸åŒåç§°çš„ synchronized åŒæ­¥æ–¹æ³•æˆ–è€… synchronized(this) åŒæ­¥ä»£ç å—æ—¶ï¼Œè°ƒç”¨çš„æ•ˆæœå°±æ˜¯æŒ‰é¡ºåºæ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯åŒæ­¥çš„ï¼Œé˜»å¡çš„ã€‚ é™æ€åŒæ­¥ synchronized æ–¹æ³•ä¸ synchronized(class) ä»£ç å—å…³é”®å­— synchronized è¿˜å¯ä»¥åº”ç”¨åœ¨ static é™æ€æ–¹æ³•ä¸Šï¼Œå¦‚æœè¿™æ ·å†™å°±æ˜¯å¯¹å½“å‰çš„ *.java æ–‡ä»¶å¯¹åº”çš„ Class ç±»è¿›è¡ŒåŠ é”ã€‚è€Œ synchronized å…³é”®å­—åŠ åˆ°é static é™æ€æ–¹æ³•ä¸Šå°±æ˜¯ç»™å¯¹è±¡åŠ é”ã€‚ å¤šçº¿ç¨‹çš„æ­»é”volatile å…³é”®å­—ä½œç”¨ï¼šä½¿å˜é‡åœ¨å¤šä¸ªçº¿ç¨‹é—´å¯è§ã€‚ é€šè¿‡ä½¿ç”¨ volatile å…³é”®å­—ï¼Œå¼ºåˆ¶çš„ä»å…¬å…±å†…å­˜ä¸­è¯»å–å˜é‡çš„å€¼ã€‚ä½¿ç”¨ volatile å…³é”®å­—å¢åŠ äº†å®ä¾‹å˜é‡åœ¨å¤šä¸ªçº¿ç¨‹ä¹‹é—´çš„å¯è§æ€§ï¼Œä½† volatile å…³é”®å­—æœ€è‡´å‘½çš„ç¼ºç‚¹å°±æ˜¯ä¸æ”¯æŒåŸå­æ€§ã€‚ å…³é”®å­— synchronized å’Œ volatile æ¯”è¾ƒï¼š å…³é”®å­— volatile æ˜¯çº¿ç¨‹åŒæ­¥çš„è½»é‡å®ç°ï¼Œæ‰€ä»¥ volatile æ€§èƒ½è‚¯å®šè¦æ¯” synchronized è¦å¥½ï¼Œå¹¶ä¸” volatile åªèƒ½ä¿®é¥°äºå˜é‡ï¼Œè€Œ synchronized å¯ä»¥ä¿®é¥°æ–¹æ³•ï¼Œä»¥åŠä»£ç å—ã€‚ å¤šçº¿ç¨‹è®¿é—® volatile ä¸ä¼šå‘ç”Ÿé˜»å¡ï¼Œè€Œ synchronized ä¼šå‡ºç°é˜»å¡ã€‚ volatile èƒ½ä¿è¯æ•°æ®çš„å¯è§æ€§ï¼Œä½†ä¸èƒ½ä¿è¯åŸå­æ€§ï¼›è€Œ synchronized å¯ä»¥ä¿è¯åŸå­æ€§ï¼Œä¹Ÿå¯ä»¥é—´æ¥ä¿è¯å¯è§æ€§ï¼Œå› ä¸ºå®ƒä¼šå°†ç§æœ‰å†…å­˜å’Œå…¬æœ‰å†…å­˜ä¸­çš„æ•°æ®åšåŒæ­¥ã€‚ å…³é”®å­— volatile è§£å†³çš„æ˜¯å˜é‡åœ¨å¤šä¸ªçº¿ç¨‹ä¹‹é—´çš„å¯è§æ€§ï¼›è€Œ synchronized å…³é”®å­—è§£å†³çš„æ˜¯å¤šä¸ªçº¿ç¨‹ä¹‹é—´è®¿é—®èµ„æºçš„åŒæ­¥æ€§ã€‚ â€‹ ç¬¬ä¸‰ç«  â€”â€” çº¿ç¨‹é—´é€šä¿¡æŠ€æœ¯ç‚¹ï¼š ä½¿ç”¨ wait/notify å®ç°çº¿ç¨‹é—´çš„é€šä¿¡ ç”Ÿäº§è€…/æ¶ˆè´¹è€…æ¨¡å¼çš„å®ç° æ–¹æ³• join çš„ä½¿ç”¨ ThreadLocal ç±»çš„ä½¿ç”¨ ç­‰å¾…/é€šçŸ¥æœºåˆ¶wait ä½¿çº¿ç¨‹åœæ­¢è¿è¡Œï¼Œnotify ä½¿åœæ­¢çš„çº¿ç¨‹ç»§ç»­è¿è¡Œã€‚ å…³é”®å­— synchronized å¯ä»¥å°†ä»»ä½•ä¸€ä¸ª Object å¯¹è±¡ä½œä¸ºåŒæ­¥å¯¹è±¡çœ‹å¾…ï¼Œè€Œ Java ä¸ºæ¯ä¸ª Object éƒ½å®ç°äº† wait() å’Œ notify() æ–¹æ³•ï¼Œä»–ä»¬å¿…é¡»ç”¨åœ¨è¢« synchronized åŒæ­¥çš„ Object çš„ä¸´ç•ŒåŒºå†…ã€‚é€šè¿‡è°ƒç”¨ wait æ–¹æ³•å¯ä»¥ä½¿å¤„äºä¸´ç•ŒåŒºå†…çš„çº¿ç¨‹è¿›å…¥ç­‰å¾…çŠ¶æ€ï¼ŒåŒæ—¶é‡Šæ”¾è¢«åŒæ­¥å¯¹è±¡çš„é”ã€‚è€Œ notify æ“ä½œå¯ä»¥å”¤é†’ä¸€ä¸ªå› è°ƒç”¨äº† wait æ–¹æ³•è€Œå¤„äºé˜»å¡çŠ¶æ€çš„çº¿ç¨‹ï¼Œä½¿å…¶è¿›å…¥å°±ç»ªçŠ¶æ€ã€‚è¢«é‡æ–°å”¤é†’çš„çº¿ç¨‹ä¼šè¯•å›¾é‡æ–°è·å¾—ä¸´ç•ŒåŒºçš„æ§åˆ¶æƒï¼Œç»§ç»­æ‰§è¡Œä¸´ç•ŒåŒºå†… wait ä¹‹åçš„ä»£ç ã€‚ wait æ–¹æ³•å¯ä»¥ä½¿è°ƒç”¨è¯¥æ–¹æ³•çš„çº¿ç¨‹é‡Šæ”¾å…±äº«èµ„æºçš„é”ï¼Œä»è¿è¡ŒçŠ¶æ€é€€å‡ºï¼Œè¿›å…¥ç­‰å¾…çŠ¶æ€ï¼Œç›´åˆ°å†æ¬¡è¢«å”¤é†’ã€‚ notify() æ–¹æ³•å¯ä»¥éšæœºå”¤é†’ç­‰å¾…å¯¹åˆ—ä¸­ç­‰å¾…åŒä¸€å…±äº«èµ„æºçš„ä¸€ä¸ªçº¿ç¨‹ï¼Œå¹¶ä½¿è¯¥çº¿ç¨‹é€€å‡ºç­‰å¾…çŠ¶æ€ï¼Œè¿›å…¥å¯è¿è¡ŒçŠ¶æ€ã€‚ notifyAll() æ–¹æ³•å¯ä»¥éšæœºå”¤é†’ç­‰å¾…å¯¹åˆ—ä¸­ç­‰å¾…åŒä¸€å…±äº«èµ„æºçš„æ‰€æœ‰çº¿ç¨‹ï¼Œå¹¶ä½¿è¿™äº›çº¿ç¨‹é€€å‡ºç­‰å¾…çŠ¶æ€ï¼Œè¿›å…¥å¯è¿è¡ŒçŠ¶æ€ã€‚ çº¿ç¨‹çŠ¶æ€ç¤ºæ„å›¾ï¼š æ–°åˆ›å»ºä¸€ä¸ªçº¿ç¨‹å¯¹è±¡åï¼Œåœ¨è°ƒç”¨å®ƒçš„ start() æ–¹æ³•ï¼Œç³»ç»Ÿä¼šä¸ºæ­¤çº¿ç¨‹åˆ†é… CPU èµ„æºï¼Œä½¿å…¶å¤„äº Runnableï¼ˆå¯è¿è¡Œï¼‰çŠ¶æ€ï¼Œå¦‚æœçº¿ç¨‹æŠ¢å åˆ° CPU èµ„æºï¼Œæ­¤çº¿ç¨‹å°±ä¼šå¤„äº Running ï¼ˆè¿è¡Œï¼‰çŠ¶æ€ Runnable å’Œ Running çŠ¶æ€ä¹‹é—´å¯ä»¥ç›¸äº’åˆ‡æ¢ï¼Œå› ä¸ºçº¿ç¨‹æœ‰å¯èƒ½è¿è¡Œä¸€æ®µæ—¶é—´åï¼Œæœ‰å…¶ä»–ä¼˜å…ˆçº§é«˜çš„çº¿ç¨‹æŠ¢å äº† CPU èµ„æºï¼Œæ­¤æ—¶çº¿ç¨‹å°±ä» Running çŠ¶æ€å˜æˆäº† Runnable çŠ¶æ€ã€‚ çº¿ç¨‹è¿›å…¥ Runnable çŠ¶æ€æœ‰å¦‚ä¸‹å‡ ç§æƒ…å†µï¼š è°ƒç”¨ sleep() æ–¹æ³•åç»è¿‡çš„æ—¶é—´è¶…è¿‡äº†æŒ‡å®šçš„ä¼‘çœ æ—¶é—´ çº¿ç¨‹è°ƒç”¨çš„é˜»å¡ IO å·²ç»è¿”å›ï¼Œé˜»å¡æ–¹æ³•æ‰§è¡Œå®Œæ¯• çº¿ç¨‹æˆåŠŸçš„è·å¾—äº†è¯•å›¾åŒæ­¥çš„ç›‘è§†å™¨ çº¿ç¨‹æ­£åœ¨ç­‰å¾…æŸä¸ªé€šçŸ¥ï¼Œå…¶ä»–çº¿ç¨‹å‘å‡ºäº†é€šçŸ¥ å¤„äºæŒ‚çŠ¶æ€çš„çº¿ç¨‹è°ƒç”¨äº† resume æ¢å¤æ–¹æ³• Blocked æ˜¯é˜»å¡çš„æ„æ€ï¼Œä¾‹å¦‚çº¿ç¨‹é‡åˆ°ä¸€ä¸ª IO æ“ä½œï¼Œæ­¤æ—¶ CPU å¤„äºç©ºé—²çŠ¶æ€ï¼Œå¯èƒ½ä¼šè½¬è€ŒæŠŠ CPU æ—¶é—´ç‰‡åˆ†é…ç»™å…¶ä»–çº¿ç¨‹ï¼Œè¿™æ—¶ä¹Ÿå¯ä»¥ç§°ä¸º â€œæš‚åœâ€çŠ¶æ€ã€‚Blocked çŠ¶æ€ç»“æŸä¹‹åï¼Œè¿›å…¥ Runnable çŠ¶æ€ï¼Œç­‰å¾…ç³»ç»Ÿé‡æ–°åˆ†é…èµ„æºã€‚ å‡ºç°é˜»å¡çŠ¶æ€çš„æœ‰å¦‚ä¸‹å‡ ç§æƒ…å†µï¼š çº¿ç¨‹è°ƒç”¨ sleep æ–¹æ³•ï¼Œä¸»åŠ¨æ”¾å¼ƒå ç”¨çš„å¤„ç†å™¨èµ„æº çº¿ç¨‹è°ƒç”¨äº†é˜»å¡å¼ IO æ–¹æ³•ï¼Œåœ¨è¯¥æ–¹æ³•è¿”å›ä¹‹å‰ï¼Œè¯¥çº¿ç¨‹è¢«é˜»å¡ çº¿ç¨‹è¯•å›¾è·å¾—ä¸€ä¸ªåŒæ­¥ç›‘è§†å™¨ï¼Œä½†è¯¥åŒæ­¥ç›‘è§†å™¨æ­£åœ¨è¢«å…¶ä»–çº¿ç¨‹æ‰€æŒæœ‰ çº¿ç¨‹ç­‰å¾…æŸä¸ªé€šçŸ¥ ç¨‹åºè°ƒç”¨äº† suspend æ–¹æ³•å°†è¯¥çº¿ç¨‹æŒ‚èµ· run æ–¹æ³•è¿è¡Œç»“æŸåè¿›å…¥é”€æ¯é˜¶æ®µï¼Œæ•´ä¸ªçº¿ç¨‹æ‰§è¡Œå®Œæ¯•ã€‚ ç”Ÿäº§è€…/æ¶ˆè´¹è€…æ¨¡å¼å®ç°ä¸€ä¸ªç”Ÿäº§è€…ï¼Œä¸€ä¸ªæ¶ˆè´¹è€… å­˜å‚¨å€¼å¯¹è±¡ï¼š 12345678910package com.zhisheng.thread.thread5;/** * Created by 10412 on 2017/6/3. * å­˜å‚¨å€¼å¯¹è±¡ */public class ValueObject&#123; public static String value = \"\";&#125; ç”Ÿäº§è€…ï¼š 123456789101112131415161718192021222324252627282930package com.zhisheng.thread.thread5;/** * Created by 10412 on 2017/6/3. * ç”Ÿäº§è€… */public class Product&#123; private String lock; public Product(String lock) &#123; this.lock = lock; &#125; public void setValue() &#123; synchronized (lock) &#123; if (!ValueObject.value.equals(\"\")) &#123; try &#123; lock.wait(); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125; String value = System.currentTimeMillis() + \"_\" + System.nanoTime(); System.out.println(\"ç”Ÿäº§è€… set çš„å€¼æ˜¯ï¼š\" + value); ValueObject.value = value; lock.notify(); &#125; &#125;&#125; æ¶ˆè´¹è€…ï¼š 1234567891011121314151617181920212223242526272829package com.zhisheng.thread.thread5;/** * Created by 10412 on 2017/6/3. * æ¶ˆè´¹è€… */public class Resume&#123; private String lock; public Resume(String lock) &#123; this.lock = lock; &#125; public void getValue() &#123; synchronized (lock) &#123; if (ValueObject.value.equals(\"\")) &#123; try &#123; lock.wait(); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125; System.out.println(\"æ¶ˆè´¹è€… get çš„å€¼ï¼š\" + ValueObject.value); ValueObject.value = \"\"; lock.notify(); &#125; &#125;&#125; ç”Ÿäº§è€…çº¿ç¨‹ï¼š 123456789101112131415161718192021package com.zhisheng.thread.thread5;/** * Created by 10412 on 2017/6/3. * ç”Ÿäº§è€…çº¿ç¨‹ */public class ProductThread extends Thread&#123; private Product p; public ProductThread(Product p) &#123; this.p = p; &#125; @Override public void run() &#123; while (true) &#123; p.setValue(); &#125; &#125;&#125; æ¶ˆè´¹è€…çº¿ç¨‹ï¼š 123456789101112131415161718192021package com.zhisheng.thread.thread5;/** * Created by 10412 on 2017/6/3. * æ¶ˆè´¹è€…çº¿ç¨‹ */public class ResumeThread extends Thread&#123; private Resume r; public ResumeThread(Resume r) &#123; this.r = r; &#125; @Override public void run() &#123; while (true) &#123; r.getValue(); &#125; &#125;&#125; ä¸»å‡½æ•°ï¼š 123456789101112131415161718package com.zhisheng.thread.thread5;/** * Created by 10412 on 2017/6/3. * ä¸€ä¸ªç”Ÿäº§è€…ä¸€ä¸ªæ¶ˆè´¹è€…æµ‹è¯• */public class Test&#123; public static void main(String[] args) &#123; String str = new String(\"\"); Product p = new Product(str); Resume r = new Resume(str);; ProductThread pt = new ProductThread(p); ResumeThread rt = new ResumeThread(r); pt.start(); rt.start(); &#125;&#125; é¢˜ç›®ï¼šåˆ›å»º20ä¸ªçº¿ç¨‹ï¼Œå…¶ä¸­10ä¸ªçº¿ç¨‹æ˜¯å°†æ•°æ®å¤‡ä»½åˆ°æ•°æ®åº“Aï¼Œå¦å¤–10ä¸ªçº¿ç¨‹å°†æ•°æ®å¤‡ä»½åˆ°æ•°æ®åº“Bä¸­å»ï¼Œå¹¶ä¸”å¤‡ä»½æ•°æ®åº“Aå’Œå¤‡ä»½æ•°æ®åº“Bæ˜¯äº¤å‰è¿›è¡Œçš„ã€‚ å·¥å…·ç±»ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142package com.zhisheng.thread.thread6;/** * Created by 10412 on 2017/6/3. * åˆ›å»º20ä¸ªçº¿ç¨‹ï¼Œå…¶ä¸­10ä¸ªçº¿ç¨‹æ˜¯å°†æ•°æ®å¤‡ä»½åˆ°æ•°æ®åº“Aï¼Œå¦å¤–10ä¸ªçº¿ç¨‹å°†æ•°æ®å¤‡ä»½åˆ°æ•°æ®åº“Bä¸­å»ï¼Œå¹¶ä¸” * å¤‡ä»½æ•°æ®åº“Aå’Œå¤‡ä»½æ•°æ®åº“Bæ˜¯äº¤å‰è¿›è¡Œçš„ */public class DBTools&#123; volatile private boolean prevIsA = false; //ç¡®ä¿Aå¤‡ä»½å…ˆè¿›è¡Œ synchronized public void backA() &#123; while (prevIsA == true) &#123; try &#123; wait(); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125; for (int i = 0; i &lt; 5; i++) &#123; System.out.println(\"AAAAA\"); &#125; prevIsA = true; notifyAll(); &#125; synchronized public void backB() &#123; while (prevIsA == false) &#123; try &#123; wait(); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125; for (int i = 0; i &lt; 5; i++) &#123; System.out.println(\"BBBBB\"); &#125; prevIsA = false; notifyAll(); &#125;&#125; å¤‡ä»½Aå…ˆçº¿ç¨‹ï¼š 123456789101112131415161718package com.zhisheng.thread.thread6;/** * Created by 10412 on 2017/6/3. */public class ThreadA extends Thread&#123; private DBTools dbTools; public ThreadA(DBTools dbTools) &#123; this.dbTools = dbTools; &#125; @Override public void run() &#123; dbTools.backA(); &#125;&#125; å¤‡ä»½Bçº¿ç¨‹ï¼š 123456789101112131415161718package com.zhisheng.thread.thread6;/** * Created by 10412 on 2017/6/3. */public class ThreadB extends Thread&#123; private DBTools dbTools; public ThreadB(DBTools dbTools) &#123; this.dbTools = dbTools; &#125; @Override public void run() &#123; dbTools.backB(); &#125;&#125; æµ‹è¯•ï¼š 1234567891011121314151617package com.zhisheng.thread.thread6;/** * Created by 10412 on 2017/6/3. */public class Test&#123; public static void main(String[] args) &#123; DBTools dbTools = new DBTools(); for (int i = 0; i &lt; 20; i++) &#123; ThreadB tb = new ThreadB(dbTools); tb.start(); ThreadA ta = new ThreadA(dbTools); ta.start(); &#125; &#125;&#125; Join æ–¹æ³•çš„ä½¿ç”¨ä½œç”¨ï¼šç­‰å¾…çº¿ç¨‹å¯¹è±¡é”€æ¯ join æ–¹æ³•å…·æœ‰ä½¿çº¿ç¨‹æ’é˜Ÿè¿è¡Œçš„ä½œç”¨ï¼Œæœ‰äº›ç±»ä¼¼åŒæ­¥çš„è¿è¡Œæ•ˆæœã€‚join ä¸ synchronized çš„åŒºåˆ«æ˜¯ï¼šjoin åœ¨å†…éƒ¨ä½¿ç”¨ wait() æ–¹æ³•è¿›è¡Œç­‰å¾…ï¼Œè€Œ synchronized å…³é”®å­—ä½¿ç”¨çš„æ˜¯ â€œå¯¹è±¡ç›‘è§†å™¨â€ åŸç†åšä¸ºåŒæ­¥ã€‚ åœ¨ join è¿‡ç¨‹ä¸­ï¼Œå¦‚æœå½“å‰çº¿ç¨‹å¯¹è±¡è¢«ä¸­æ–­ï¼Œåˆ™å½“å‰çº¿ç¨‹å‡ºç°å¼‚å¸¸ã€‚ æ–¹æ³• join(long) ä¸­çš„å‚æ•°æ˜¯è®¾å®šç­‰å¾…çš„æ—¶é—´ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243/** * ç­‰å¾…è¯¥çº¿ç¨‹ç»ˆæ­¢çš„æ—¶é—´æœ€é•¿ä¸º millis æ¯«ç§’ã€‚è¶…æ—¶ä¸º 0 æ„å‘³ç€è¦ä¸€ç›´ç­‰ä¸‹å»ã€‚ * Waits at most &#123;@code millis&#125; milliseconds for this thread to * die. A timeout of &#123;@code 0&#125; means to wait forever. * * &lt;p&gt; This implementation uses a loop of &#123;@code this.wait&#125; calls * conditioned on &#123;@code this.isAlive&#125;. As a thread terminates the * &#123;@code this.notifyAll&#125; method is invoked. It is recommended that * applications not use &#123;@code wait&#125;, &#123;@code notify&#125;, or * &#123;@code notifyAll&#125; on &#123;@code Thread&#125; instances. * * @param millis * the time to wait in milliseconds * * @throws IllegalArgumentException * if the value of &#123;@code millis&#125; is negative * * @throws InterruptedException * if any thread has interrupted the current thread. The * &lt;i&gt;interrupted status&lt;/i&gt; of the current thread is * cleared when this exception is thrown. */ public final synchronized void join(long millis) throws InterruptedException &#123; long base = System.currentTimeMillis(); long now = 0; if (millis &lt; 0) &#123; throw new IllegalArgumentException(\"timeout value is negative\"); if (millis == 0) &#123; while (isAlive()) &#123; wait(0); &#125; &#125; else &#123; while (isAlive()) &#123; long delay = millis - now; if (delay &lt;= 0) &#123; break; &#125; wait(delay); now = System.currentTimeMillis() - base; &#125; &#125; &#125; ç±» ThreadLocal çš„ä½¿ç”¨è¯¥ç±»æä¾›äº†çº¿ç¨‹å±€éƒ¨ (thread-local) å˜é‡ã€‚è¿™äº›å˜é‡ä¸åŒäºå®ƒä»¬çš„æ™®é€šå¯¹åº”ç‰©ï¼Œå› ä¸ºè®¿é—®æŸä¸ªå˜é‡ï¼ˆé€šè¿‡å…¶ get æˆ–set æ–¹æ³•ï¼‰çš„æ¯ä¸ªçº¿ç¨‹éƒ½æœ‰è‡ªå·±çš„å±€éƒ¨å˜é‡ï¼Œå®ƒç‹¬ç«‹äºå˜é‡çš„åˆå§‹åŒ–å‰¯æœ¬ã€‚ThreadLocal å®ä¾‹é€šå¸¸æ˜¯ç±»ä¸­çš„private static å­—æ®µï¼Œå®ƒä»¬å¸Œæœ›å°†çŠ¶æ€ä¸æŸä¸€ä¸ªçº¿ç¨‹ï¼ˆä¾‹å¦‚ï¼Œç”¨æˆ· ID æˆ–äº‹åŠ¡ IDï¼‰ç›¸å…³è”ã€‚ get() æ–¹æ³•12345678910111213public T get() &#123; Thread t = Thread.currentThread(); ThreadLocalMap map = getMap(t); if (map != null) &#123; ThreadLocalMap.Entry e = map.getEntry(this); if (e != null) &#123; @SuppressWarnings(\"unchecked\") T result = (T)e.value; return result; &#125; &#125; return setInitialValue(); &#125; è¿”å›æ­¤çº¿ç¨‹å±€éƒ¨å˜é‡çš„å½“å‰çº¿ç¨‹å‰¯æœ¬ä¸­çš„å€¼ã€‚å¦‚æœå˜é‡æ²¡æœ‰ç”¨äºå½“å‰çº¿ç¨‹çš„å€¼ï¼Œåˆ™å…ˆå°†å…¶åˆå§‹åŒ–ä¸ºè°ƒç”¨ initialValue() æ–¹æ³•è¿”å›çš„å€¼ã€‚ InheritableThreadLocal ç±»çš„ä½¿ç”¨è¯¥ç±»æ‰©å±•äº† ThreadLocalï¼Œä¸ºå­çº¿ç¨‹æä¾›ä»çˆ¶çº¿ç¨‹é‚£é‡Œç»§æ‰¿çš„å€¼ï¼šåœ¨åˆ›å»ºå­çº¿ç¨‹æ—¶ï¼Œå­çº¿ç¨‹ä¼šæ¥æ”¶æ‰€æœ‰å¯ç»§æ‰¿çš„çº¿ç¨‹å±€éƒ¨å˜é‡çš„åˆå§‹å€¼ï¼Œä»¥è·å¾—çˆ¶çº¿ç¨‹æ‰€å…·æœ‰çš„å€¼ã€‚é€šå¸¸ï¼Œå­çº¿ç¨‹çš„å€¼ä¸çˆ¶çº¿ç¨‹çš„å€¼æ˜¯ä¸€è‡´çš„ï¼›ä½†æ˜¯ï¼Œé€šè¿‡é‡å†™è¿™ä¸ªç±»ä¸­çš„ childValue æ–¹æ³•ï¼Œå­çº¿ç¨‹çš„å€¼å¯ä»¥ä½œä¸ºçˆ¶çº¿ç¨‹å€¼çš„ä¸€ä¸ªä»»æ„å‡½æ•°ã€‚ å½“å¿…é¡»å°†å˜é‡ï¼ˆå¦‚ç”¨æˆ· ID å’Œ äº‹åŠ¡ IDï¼‰ä¸­ç»´æŠ¤çš„æ¯çº¿ç¨‹å±æ€§ï¼ˆper-thread-attributeï¼‰è‡ªåŠ¨ä¼ é€ç»™åˆ›å»ºçš„æ‰€æœ‰å­çº¿ç¨‹æ—¶ï¼Œåº”å°½å¯èƒ½åœ°é‡‡ç”¨å¯ç»§æ‰¿çš„çº¿ç¨‹å±€éƒ¨å˜é‡ï¼Œè€Œä¸æ˜¯é‡‡ç”¨æ™®é€šçš„çº¿ç¨‹å±€éƒ¨å˜é‡ã€‚ ç¬¬å››ç«  â€”â€” Lock çš„ä½¿ç”¨ä½¿ç”¨ ReentrantLock ç±»ä¸€ä¸ªå¯é‡å…¥çš„äº’æ–¥é” Lockï¼Œå®ƒå…·æœ‰ä¸ä½¿ç”¨ synchronized æ–¹æ³•å’Œè¯­å¥æ‰€è®¿é—®çš„éšå¼ç›‘è§†å™¨é”ç›¸åŒçš„ä¸€äº›åŸºæœ¬è¡Œä¸ºå’Œè¯­ä¹‰ï¼Œä½†åŠŸèƒ½æ›´å¼ºå¤§ã€‚ ReentrantLock å°†ç”±æœ€è¿‘æˆåŠŸè·å¾—é”ï¼Œå¹¶ä¸”è¿˜æ²¡æœ‰é‡Šæ”¾è¯¥é”çš„çº¿ç¨‹æ‰€æ‹¥æœ‰ã€‚å½“é”æ²¡æœ‰è¢«å¦ä¸€ä¸ªçº¿ç¨‹æ‰€æ‹¥æœ‰æ—¶ï¼Œè°ƒç”¨ lock çš„çº¿ç¨‹å°†æˆåŠŸè·å–è¯¥é”å¹¶è¿”å›ã€‚å¦‚æœå½“å‰çº¿ç¨‹å·²ç»æ‹¥æœ‰è¯¥é”ï¼Œæ­¤æ–¹æ³•å°†ç«‹å³è¿”å›ã€‚å¯ä»¥ä½¿ç”¨ isHeldByCurrentThread()å’Œ getHoldCount()æ–¹æ³•æ¥æ£€æŸ¥æ­¤æƒ…å†µæ˜¯å¦å‘ç”Ÿã€‚ æ­¤ç±»çš„æ„é€ æ–¹æ³•æ¥å—ä¸€ä¸ªå¯é€‰çš„å…¬å¹³ å‚æ•°ã€‚å½“è®¾ç½®ä¸º true æ—¶ï¼Œåœ¨å¤šä¸ªçº¿ç¨‹çš„äº‰ç”¨ä¸‹ï¼Œè¿™äº›é”å€¾å‘äºå°†è®¿é—®æƒæˆäºˆç­‰å¾…æ—¶é—´æœ€é•¿çš„çº¿ç¨‹ã€‚å¦åˆ™æ­¤é”å°†æ— æ³•ä¿è¯ä»»ä½•ç‰¹å®šè®¿é—®é¡ºåºã€‚ä¸é‡‡ç”¨é»˜è®¤è®¾ç½®ï¼ˆä½¿ç”¨ä¸å…¬å¹³é”ï¼‰ç›¸æ¯”ï¼Œä½¿ç”¨å…¬å¹³é”çš„ç¨‹åºåœ¨è®¸å¤šçº¿ç¨‹è®¿é—®æ—¶è¡¨ç°ä¸ºå¾ˆä½çš„æ€»ä½“ååé‡ï¼ˆå³é€Ÿåº¦å¾ˆæ…¢ï¼Œå¸¸å¸¸æå…¶æ…¢ï¼‰ï¼Œä½†æ˜¯åœ¨è·å¾—é”å’Œä¿è¯é”åˆ†é…çš„å‡è¡¡æ€§æ—¶å·®å¼‚è¾ƒå°ã€‚ä¸è¿‡è¦æ³¨æ„çš„æ˜¯ï¼Œå…¬å¹³é”ä¸èƒ½ä¿è¯çº¿ç¨‹è°ƒåº¦çš„å…¬å¹³æ€§ã€‚å› æ­¤ï¼Œä½¿ç”¨å…¬å¹³é”çš„ä¼—å¤šçº¿ç¨‹ä¸­çš„ä¸€å‘˜å¯èƒ½è·å¾—å¤šå€çš„æˆåŠŸæœºä¼šï¼Œè¿™ç§æƒ…å†µå‘ç”Ÿåœ¨å…¶ä»–æ´»åŠ¨çº¿ç¨‹æ²¡æœ‰è¢«å¤„ç†å¹¶ä¸”ç›®å‰å¹¶æœªæŒæœ‰é”æ—¶ã€‚è¿˜è¦æ³¨æ„çš„æ˜¯ï¼Œæœªå®šæ—¶çš„ tryLockæ–¹æ³•å¹¶æ²¡æœ‰ä½¿ç”¨å…¬å¹³è®¾ç½®ã€‚å› ä¸ºå³ä½¿å…¶ä»–çº¿ç¨‹æ­£åœ¨ç­‰å¾…ï¼Œåªè¦è¯¥é”æ˜¯å¯ç”¨çš„ï¼Œæ­¤æ–¹æ³•å°±å¯ä»¥è·å¾—æˆåŠŸã€‚ å»ºè®®æ€»æ˜¯ ç«‹å³å®è·µï¼Œä½¿ç”¨ lock å—æ¥è°ƒç”¨ tryï¼Œåœ¨ä¹‹å‰/ä¹‹åçš„æ„é€ ä¸­ï¼Œæœ€å…¸å‹çš„ä»£ç å¦‚ä¸‹ï¼š 12345678910111213class X &#123; private final ReentrantLock lock = new ReentrantLock(); // ... public void m() &#123; lock.lock(); // block until condition holds try &#123; // ... method body &#125; finally &#123; lock.unlock() &#125; &#125; &#125; ConditionCondition å°† Object ç›‘è§†å™¨æ–¹æ³•ï¼ˆwaitã€notify å’Œ notifyAllï¼‰åˆ†è§£æˆæˆªç„¶ä¸åŒçš„å¯¹è±¡ï¼Œä»¥ä¾¿é€šè¿‡å°†è¿™äº›å¯¹è±¡ä¸ä»»æ„ Lock å®ç°ç»„åˆä½¿ç”¨ï¼Œä¸ºæ¯ä¸ªå¯¹è±¡æä¾›å¤šä¸ªç­‰å¾… setï¼ˆwait-setï¼‰ã€‚å…¶ä¸­ï¼ŒLock æ›¿ä»£äº† synchronized æ–¹æ³•å’Œè¯­å¥çš„ä½¿ç”¨ï¼ŒCondition æ›¿ä»£äº† Object ç›‘è§†å™¨æ–¹æ³•çš„ä½¿ç”¨ã€‚ å‡å®šæœ‰ä¸€ä¸ªç»‘å®šçš„ç¼“å†²åŒºï¼Œå®ƒæ”¯æŒ put å’Œ take æ–¹æ³•ã€‚å¦‚æœè¯•å›¾åœ¨ç©ºçš„ç¼“å†²åŒºä¸Šæ‰§è¡Œ take æ“ä½œï¼Œåˆ™åœ¨æŸä¸€ä¸ªé¡¹å˜å¾—å¯ç”¨ä¹‹å‰ï¼Œçº¿ç¨‹å°†ä¸€ç›´é˜»å¡ï¼›å¦‚æœè¯•å›¾åœ¨æ»¡çš„ç¼“å†²åŒºä¸Šæ‰§è¡Œ put æ“ä½œï¼Œåˆ™åœ¨æœ‰ç©ºé—´å˜å¾—å¯ç”¨ä¹‹å‰ï¼Œçº¿ç¨‹å°†ä¸€ç›´é˜»å¡ã€‚æˆ‘ä»¬å–œæ¬¢åœ¨å•ç‹¬çš„ç­‰å¾… set ä¸­ä¿å­˜ put çº¿ç¨‹å’Œ take çº¿ç¨‹ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨ç¼“å†²åŒºä¸­çš„é¡¹æˆ–ç©ºé—´å˜å¾—å¯ç”¨æ—¶åˆ©ç”¨æœ€ä½³è§„åˆ’ï¼Œä¸€æ¬¡åªé€šçŸ¥ä¸€ä¸ªçº¿ç¨‹ã€‚å¯ä»¥ä½¿ç”¨ä¸¤ä¸ª Condition å®ä¾‹æ¥åšåˆ°è¿™ä¸€ç‚¹ã€‚ 12345678910111213141516171819202122232425262728293031323334353637class BoundedBuffer &#123; final Lock lock = new ReentrantLock(); final Condition notFull = lock.newCondition(); final Condition notEmpty = lock.newCondition(); final Object[] items = new Object[100]; int putptr, takeptr, count; public void put(Object x) throws InterruptedException &#123; lock.lock(); try &#123; while (count == items.length) notFull.await(); items[putptr] = x; if (++putptr == items.length) putptr = 0; ++count; notEmpty.signal(); &#125; finally &#123; lock.unlock(); &#125; &#125; public Object take() throws InterruptedException &#123; lock.lock(); try &#123; while (count == 0) notEmpty.await(); Object x = items[takeptr]; if (++takeptr == items.length) takeptr = 0; --count; notFull.signal(); return x; &#125; finally &#123; lock.unlock(); &#125; &#125; &#125; æ­£ç¡®ä½¿ç”¨ Condition å®ç°ç­‰å¾…/é€šçŸ¥MyService.java 123456789101112131415161718192021222324252627282930313233343536package com.zhisheng.thread.Thread9;import java.util.concurrent.locks.Condition;import java.util.concurrent.locks.Lock;import java.util.concurrent.locks.ReentrantLock;/** * Created by 10412 on 2017/6/4. */public class MyService&#123; private Lock lock = new ReentrantLock(); private Condition condition = lock.newCondition(); public void await() &#123; lock.lock(); try &#123; System.out.println(\"await A\"); condition.await();//ä½¿å½“å‰æ‰§è¡Œçš„çº¿ç¨‹å¤„äºç­‰å¾…çŠ¶æ€ waiting System.out.println(\"await B\"); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125;finally &#123; lock.unlock(); System.out.println(\"é‡Šæ”¾é”\"); &#125; &#125; public void signal() &#123; lock.lock(); System.out.println(\"signal A\"); condition.signal(); System.out.println(\"signal B\"); lock.unlock(); &#125;&#125; ThreadA.java 123456789101112131415161718package com.zhisheng.thread.Thread9;/** * Created by 10412 on 2017/6/4. */public class ThreadA extends Thread&#123; private MyService service; public ThreadA(MyService service) &#123; this.service = service; &#125; @Override public void run() &#123; service.await(); &#125;&#125; Test.java 123456789101112131415package com.zhisheng.thread.Thread9;/** * Created by 10412 on 2017/6/4. */public class Test&#123; public static void main(String[] args) throws InterruptedException &#123; MyService service = new MyService(); ThreadA ta = new ThreadA(service); ta.start(); Thread.sleep(5000); service.signal(); &#125;&#125; è¿è¡Œç»“æœï¼š 12345await Asignal Asignal Bawait Bé‡Šæ”¾é” Object ç±»ä¸­çš„ wait() æ–¹æ³•ç›¸å½“äº Condition ç±»ä¸­ await() æ–¹æ³• Object ç±»ä¸­çš„ wait(long time) æ–¹æ³•ç›¸å½“äº Condition ç±»ä¸­ await(long time, TimeUnit unit) æ–¹æ³• Object ç±»ä¸­çš„ notify() æ–¹æ³•ç›¸å½“äº Condition ç±»ä¸­ signal() æ–¹æ³• Object ç±»ä¸­çš„ notifyAll() æ–¹æ³•ç›¸å½“äº Condition ç±»ä¸­ signalAll() æ–¹æ³• é¢˜ç›®ï¼šå®ç°ç”Ÿäº§è€…ä¸æ¶ˆè´¹è€… ä¸€å¯¹ä¸€äº¤æ›¿æ‰“å° MyService.java 12345678910111213141516171819202122232425262728293031323334353637383940414243444546package com.zhisheng.thread.thread10;import java.util.concurrent.locks.Condition;import java.util.concurrent.locks.Lock;import java.util.concurrent.locks.ReentrantLock;/** * Created by 10412 on 2017/6/4. * å®ç°ç”Ÿäº§è€…ä¸æ¶ˆè´¹è€… ä¸€å¯¹ä¸€Â·äº¤æ›¿æ‰“å° */public class MyService&#123; private Lock lock = new ReentrantLock(); private Condition condition = lock.newCondition(); private boolean flag = false; public void setValue() &#123; lock.lock(); while (flag == true) &#123; try &#123; condition.await(); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125; System.out.println(\"SetValue AAAAAA\"); flag = true; condition.signal(); lock.unlock(); &#125; public void getValue() &#123; lock.lock(); while (flag == false) &#123; try &#123; condition.await(); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125; System.out.println(\"GetValue BBBB\"); flag = false; condition.signal(); lock.unlock(); &#125;&#125; ThreadA.java 1234567891011121314151617181920package com.zhisheng.thread.thread10;/** * Created by 10412 on 2017/6/4. */public class ThreadA extends Thread&#123; private MyService service; public ThreadA(MyService service) &#123; this.service = service; &#125; @Override public void run() &#123; for (int i = 0; i &lt; Integer.MAX_VALUE; i++) &#123; service.setValue(); &#125; &#125;&#125; ThreadB.java 1234567891011121314151617181920package com.zhisheng.thread.thread10;/** * Created by 10412 on 2017/6/4. */public class ThreadB extends Thread&#123; private MyService service; public ThreadB(MyService service) &#123; this.service = service; &#125; @Override public void run() &#123; for (int i = 0; i &lt; Integer.MAX_VALUE; i++) &#123; service.getValue(); &#125; &#125;&#125; Test.java 123456789101112131415package com.zhisheng.thread.thread10;/** * Created by 10412 on 2017/6/4. */public class Test&#123; public static void main(String[] args) &#123; MyService service = new MyService(); ThreadA ta = new ThreadA(service); ThreadB tb = new ThreadB(service); ta.start(); tb.start(); &#125;&#125; getHoldCount() æŸ¥è¯¢å½“å‰çº¿ç¨‹ä¿æŒæ­¤é”å®šçš„ä¸ªæ•°ï¼Œä¹Ÿå°±æ˜¯è°ƒç”¨ lock() çš„æ–¹æ³• getQueueLength() è¿”å›æ­£ç­‰å¾…è·å–æ­¤é”å®šçš„çº¿ç¨‹ä¼°è®¡æ•° getWaitQueueLength() è¿”å›ç­‰å¾…ä¸æ­¤é”å®šç›¸å…³çš„ç»™å®šæ¡ä»¶ Condition çš„çº¿ç¨‹ä¼°è®¡æ•° hasQueuedThread() æŸ¥è¯¢æŒ‡å®šçš„çº¿ç¨‹æ˜¯å¦æ­£åœ¨ç­‰å¾…è·å–æ­¤é”å®š hasQueuedThreads() æŸ¥è¯¢æ˜¯å¦æœ‰çº¿ç¨‹æ­£åœ¨ç­‰å¾…è·å–æ­¤é”å®š hasWaiters() æŸ¥è¯¢æ˜¯å¦æœ‰çº¿ç¨‹æ­£åœ¨ç­‰å¾…ä¸æ­¤é”å®šæœ‰å…³çš„ condition æ¡ä»¶ isFair() åˆ¤æ–­æ˜¯å¦æ˜¯å…¬å¹³é”ï¼ˆé»˜è®¤ä¸‹ ReentrantLockç±»ä½¿ç”¨çš„æ˜¯éå…¬å¹³é”ï¼‰ isHeldByCurrentThread() æŸ¥è¯¢å½“å‰çº¿ç¨‹æ˜¯å¦ä¿æŒæ­¤é”å®š isLocked() æŸ¥è¯¢æ­¤é”å®šæ˜¯å¦ç”±ä»»æ„çº¿ç¨‹ä¿æŒ lockInterruptibly() å¦‚æœå½“å‰çº¿ç¨‹æœªè¢«ä¸­æ–­ï¼Œåˆ™è·å–é”å®šï¼Œå¦‚æœå·²ç»è¢«ä¸­æ–­åˆ™å‡ºç°å¼‚å¸¸ tryLock() ä»…åœ¨è°ƒç”¨æ—¶é”å®šæœªè¢«å¦ä¸€ä¸ªçº¿ç¨‹ä¿æŒçš„æƒ…å†µä¸‹ï¼Œæ‰è·å–è¯¥é”å®š tryLock(long time, TimeUtil util) å¦‚æœé”å®šåœ¨ç»™å®šçš„ç­‰å¾…æ—¶é—´å†…æ²¡æœ‰è¢«å¦ä¸€ä¸ªçº¿ç¨‹ä¿æŒï¼Œä¸”å½“å‰çº¿ç¨‹æœªè¢«ä¸­æ–­ï¼Œåˆ™è·å–è¯¥é”å®šã€‚ ä½¿ç”¨ ReentrantReadWriteLock ç±»è¯»å†™äº’æ–¥ï¼š MyService.java 123456789101112131415161718192021222324252627282930313233package com.zhisheng.thread.Thread11;import java.util.concurrent.locks.ReentrantReadWriteLock;/** * Created by 10412 on 2017/6/4. */public class MyService&#123; private ReentrantReadWriteLock lock = new ReentrantReadWriteLock(); public void read() &#123; lock.readLock().lock(); System.out.println(Thread.currentThread().getName() + \" Read AAA \" + System.currentTimeMillis()); try &#123; Thread.sleep(10000); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; lock.readLock().unlock(); &#125; public void write() &#123; lock.writeLock().lock(); System.out.println(Thread.currentThread().getName() + \" write BBB \" + System.currentTimeMillis()); try &#123; Thread.sleep(10000); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; lock.writeLock().unlock(); &#125;&#125; ThreadA.java 123456789101112131415161718package com.zhisheng.thread.Thread11;/** * Created by 10412 on 2017/6/4. */public class ThreadA extends Thread&#123; private MyService service; public ThreadA(MyService service) &#123; this.service = service; &#125; @Override public void run() &#123; service.read(); &#125;&#125; ThreadB.java 123456789101112131415161718package com.zhisheng.thread.Thread11;/** * Created by 10412 on 2017/6/4. */public class ThreadB extends Thread&#123; private MyService service; public ThreadB(MyService service) &#123; this.service = service; &#125; @Override public void run() &#123; service.write(); &#125;&#125; Test.java 123456789101112131415161718package com.zhisheng.thread.Thread11;/** * Created by 10412 on 2017/6/4. */public class Test&#123; public static void main(String[] args) throws InterruptedException &#123; MyService service = new MyService(); ThreadA ta = new ThreadA(service); ta.setName(\"A\"); ta.start(); Thread.sleep(1000); ThreadB tb = new ThreadB(service); tb.setName(\"B\"); tb.start(); &#125;&#125; è¿è¡Œç»“æœï¼š 12A Read AAA 1496556770402B write BBB 1496556780402 ç¬¬å…­ç«  â€”â€” å•ä¾‹æ¨¡å¼ä¸å¤šçº¿ç¨‹æ¨èæ–‡ç«  ã€Šæ·±å…¥æµ…å‡ºå•å®ä¾‹Singletonè®¾è®¡æ¨¡å¼ã€‹ ç«‹å³åŠ è½½æ¨¡å¼ / â€œé¥¿æ±‰æ¨¡å¼â€ç«‹å³åŠ è½½ï¼šä½¿ç”¨ç±»çš„æ—¶å€™å·²ç»å°†å¯¹è±¡åˆ›å»ºå®Œæ¯•ï¼Œnew å®ä¾‹åŒ– 123456789public class MyObject&#123; private static MyObject object = new MyObject(); private MyObject() &#123; &#125; public static MyObject getInstance() &#123; return object; &#125;&#125; å»¶è¿ŸåŠ è½½ / â€œ æ‡’æ±‰æ¨¡å¼ â€å°±æ˜¯åœ¨è°ƒç”¨ get çš„æ—¶å€™å®ä¾‹æ‰è¢«åˆ›å»ºã€‚åœ¨ get() æ–¹æ³•ä¸­è¿›è¡Œ new å®ä¾‹åŒ–ã€‚ 12345678910111213public class MyObject&#123; private static MyObject object; private MyObject() &#123; &#125; public static MyObject getInstance() &#123; if (object != null) &#123; &#125; else &#123; object = new MyObject(); &#125; return object; &#125;&#125; ä½¿ç”¨ DCL åŒé‡æ£€æŸ¥é”ï¼Œè§£å†³â€œæ‡’æ±‰æ¨¡å¼â€é‡åˆ°çš„å¤šçº¿ç¨‹é—®é¢˜ 123456789101112131415161718public class MyObject&#123; private volatile static MyObject object; private MyObject() &#123; &#125; //synchronized public static MyObject getInstance() &#123; if (object != null) &#123; &#125; else &#123; synchronized (MyObject.class) &#123; if (object == null) &#123; object = new MyObject(); &#125; &#125; &#125; return object; &#125;&#125; ä½¿ç”¨é™æ€å†…éƒ¨ç±»å®ç°å•ä¾‹æ¨¡å¼123456789101112public class MyObject&#123; private static class MyObjectHandler &#123; private static MyObject object = new MyObject(); &#125; private MyObject() &#123; &#125; public static MyObject getInstance() &#123; return MyObjectHandler.object; &#125;&#125; åºåˆ—åŒ–ä¸ååºåˆ—åŒ–çš„å•ä¾‹æ¨¡å¼å®ç°MyObject.java 12345678910111213141516171819202122232425package com.zhisheng.thread.thread15;import java.io.ObjectStreamException;import java.io.Serializable;/** * Created by 10412 on 2017/6/4. */public class MyObject implements Serializable&#123; private static final long serialVersionUID = 888L; private static class MyObjectHandler &#123; private static final MyObject object = new MyObject(); &#125; private MyObject() &#123; &#125; public static MyObject getInstance() &#123; return MyObjectHandler.object; &#125; protected Object readResolve() throws ObjectStreamException &#123; System.out.println(\"è°ƒç”¨äº†readResolveæ–¹æ³•ï¼\"); return MyObjectHandler.object; &#125;&#125; SaveAndRead.java 12345678910111213141516171819202122232425262728293031323334353637383940package com.zhisheng.thread.thread15;import java.io.*;/** * Created by 10412 on 2017/6/4. */public class SaveAndRead&#123; public static void main(String[] args) &#123; try &#123; MyObject object = MyObject.getInstance(); FileOutputStream fos = new FileOutputStream(new File(\"fos.txt\")); ObjectOutputStream oos = new ObjectOutputStream(fos); oos.writeObject(object); oos.close(); fos.close(); System.out.println(object.hashCode()); &#125; catch (FileNotFoundException e) &#123; e.printStackTrace(); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; try &#123; FileInputStream fis = new FileInputStream(new File(\"fos.txt\")); ObjectInputStream ois = new ObjectInputStream(fis); MyObject o = (MyObject) ois.readObject(); ois.close(); fis.close(); System.out.println(o.hashCode()); &#125; catch (FileNotFoundException e) &#123; e.printStackTrace(); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; catch (ClassNotFoundException e) &#123; e.printStackTrace(); &#125; &#125;&#125; è¿™é‡Œä¸»è¦è¦æŒ‡å‡º MyObject.java ä¸­ readResolve æ–¹æ³• 1234protected Object readResolve() throws ObjectStreamException &#123; System.out.println(\"è°ƒç”¨äº†readResolveæ–¹æ³•ï¼\"); return MyObjectHandler.object; &#125; æ–¹æ³• readResolve å…è®¸ class åœ¨ååºåˆ—åŒ–è¿”å›å¯¹è±¡å‰æ›¿æ¢ã€è§£æåœ¨æµä¸­è¯»å‡ºæ¥çš„å¯¹è±¡ã€‚å®ç° readResolve æ–¹æ³•ï¼Œä¸€ä¸ª class å¯ä»¥ç›´æ¥æ§åˆ¶ååºåŒ–è¿”å›çš„ç±»å‹å’Œå¯¹è±¡å¼•ç”¨ã€‚ æ–¹æ³• readResolve ä¼šåœ¨ ObjectInputStream å·²ç»è¯»å–ä¸€ä¸ªå¯¹è±¡å¹¶åœ¨å‡†å¤‡è¿”å›å‰è°ƒç”¨ã€‚ObjectInputStream ä¼šæ£€æŸ¥å¯¹è±¡çš„ class æ˜¯å¦å®šä¹‰äº† readResolve æ–¹æ³•ã€‚å¦‚æœå®šä¹‰äº†ï¼Œå°†ç”± readResolve æ–¹æ³•æŒ‡å®šè¿”å›çš„å¯¹è±¡ã€‚è¿”å›å¯¹è±¡çš„ç±»å‹ä¸€å®šè¦æ˜¯å…¼å®¹çš„ï¼Œå¦åˆ™ä¼šæŠ›å‡º ClassCastException ã€‚ ä½¿ç”¨ static ä»£ç å—å®ç°å•ä¾‹æ¨¡å¼1234567891011121314151617package com.zhisheng.thread.thread16;/** * Created by 10412 on 2017/6/4. */public class MyObject&#123; private static MyObject instance = null; private MyObject() &#123; &#125; static &#123; instance = new MyObject(); &#125; public static MyObject getInstance() &#123; return instance; &#125;&#125; ThreadA.java 1234567891011121314package com.zhisheng.thread.thread16;/** * Created by 10412 on 2017/6/4. */public class ThreadA extends Thread&#123; @Override public void run() &#123; for (int i = 0; i &lt; 5; i++) &#123; System.out.println(MyObject.getInstance().hashCode()); &#125; &#125;&#125; Test.java 12345678910111213141516package com.zhisheng.thread.thread16;/** * Created by 10412 on 2017/6/4. */public class Test&#123; public static void main(String[] args) &#123; ThreadA ta1 = new ThreadA(); ThreadA ta2 = new ThreadA(); ThreadA ta3 = new ThreadA(); ta1.start(); ta2.start(); ta3.start(); &#125;&#125; ä½¿ç”¨æšä¸¾æ•°æ®ç±»å‹å®ç°å•ä¾‹æ¨¡å¼åœ¨ä½¿ç”¨æšä¸¾ç±»æ—¶ï¼Œæ„é€ æ–¹æ³•ä¼šè¢«è‡ªåŠ¨è°ƒç”¨ï¼Œä¹Ÿå¯ä»¥åº”ç”¨è¿™ä¸ªç‰¹æ€§å®ç°å•ä¾‹æ¨¡å¼ã€‚ 123456789101112131415public class MyObject &#123; private enum MyEnumSingleton&#123; INSTANCE; private Resource resource; private MyEnumSingleton()&#123; resource = new Resource(); &#125; public Resource getResource()&#123; return resource; &#125; &#125; public static Resource getResource()&#123; return MyEnumSingleton.INSTANCE.getResource(); &#125;&#125; æµ‹è¯•ï¼š 123456789101112131415161718192021import test.MyObject;public class Run &#123; class MyThread extends Thread &#123; @Override public void run() &#123; for (int i = 0; i &lt; 5; i++) &#123; System.out.println(MyObject.getResource().hashCode()); &#125; &#125; &#125; public static void main(String[] args) &#123; Run.MyThread t1 = new Run().new MyThread(); Run.MyThread t2 = new Run().new MyThread(); Run.MyThread t3 = new Run().new MyThread(); t1.start(); t2.start(); t3.start(); &#125;&#125; è¿™é‡Œå†æ¨èä¸€ç¯‡ stackoverflow ä¸Šçš„ä¸€ä¸ªé—®é¢˜å›ç­”ï¼š What is an efficient way to implement a singleton pattern in Java? æ€»ç»“æœ¬ç¯‡æ–‡ç« æ˜¯æˆ‘è¯» ã€ŠJavaå¤šçº¿ç¨‹ç¼–ç¨‹æ ¸å¿ƒæŠ€æœ¯ã€‹ çš„ç¬”è®°åŠè‡ªå·±çš„ä¸€äº›æ€»ç»“ï¼Œè§‰å¾—ä¸é”™ï¼Œæ¬¢è¿ç‚¹èµå’Œè½¬å‘ã€‚","tags":[{"name":"Java","slug":"Java","permalink":"http://yoursite.com/tags/Java/"},{"name":"å¤šçº¿ç¨‹","slug":"å¤šçº¿ç¨‹","permalink":"http://yoursite.com/tags/å¤šçº¿ç¨‹/"}]},{"title":"Java NIO ç³»åˆ—æ•™ç¨‹","date":"2017-06-12T16:00:00.000Z","path":"2017/06/13/Java NIO ç³»åˆ—æ•™ç¨‹/","text":"Java NIOï¼ˆNew IOï¼‰æ˜¯ä»Java 1.4ç‰ˆæœ¬å¼€å§‹å¼•å…¥çš„ä¸€ä¸ªæ–°çš„IO APIï¼Œå¯ä»¥æ›¿ä»£æ ‡å‡†çš„Java IO APIã€‚ Java NIOæä¾›äº†ä¸æ ‡å‡†IOä¸åŒçš„IOå·¥ä½œæ–¹å¼ï¼š Channels and Buffersï¼ˆé€šé“å’Œç¼“å†²åŒºï¼‰ï¼šæ ‡å‡†çš„IOåŸºäºå­—èŠ‚æµå’Œå­—ç¬¦æµè¿›è¡Œæ“ä½œçš„ï¼Œè€ŒNIOæ˜¯åŸºäºé€šé“ï¼ˆChannelï¼‰å’Œç¼“å†²åŒºï¼ˆBufferï¼‰è¿›è¡Œæ“ä½œï¼Œæ•°æ®æ€»æ˜¯ä»é€šé“è¯»å–åˆ°ç¼“å†²åŒºä¸­ï¼Œæˆ–è€…ä»ç¼“å†²åŒºå†™å…¥åˆ°é€šé“ä¸­ã€‚ Asynchronous IOï¼ˆå¼‚æ­¥IOï¼‰ï¼šJava NIOå¯ä»¥è®©ä½ å¼‚æ­¥çš„ä½¿ç”¨IOï¼Œä¾‹å¦‚ï¼šå½“çº¿ç¨‹ä»é€šé“è¯»å–æ•°æ®åˆ°ç¼“å†²åŒºæ—¶ï¼Œçº¿ç¨‹è¿˜æ˜¯å¯ä»¥è¿›è¡Œå…¶ä»–äº‹æƒ…ã€‚å½“æ•°æ®è¢«å†™å…¥åˆ°ç¼“å†²åŒºæ—¶ï¼Œçº¿ç¨‹å¯ä»¥ç»§ç»­å¤„ç†å®ƒã€‚ä»ç¼“å†²åŒºå†™å…¥é€šé“ä¹Ÿç±»ä¼¼ã€‚ Selectorsï¼ˆé€‰æ‹©å™¨ï¼‰ï¼šJava NIOå¼•å…¥äº†é€‰æ‹©å™¨çš„æ¦‚å¿µï¼Œé€‰æ‹©å™¨ç”¨äºç›‘å¬å¤šä¸ªé€šé“çš„äº‹ä»¶ï¼ˆæ¯”å¦‚ï¼šè¿æ¥æ‰“å¼€ï¼Œæ•°æ®åˆ°è¾¾ï¼‰ã€‚å› æ­¤ï¼Œå•ä¸ªçš„çº¿ç¨‹å¯ä»¥ç›‘å¬å¤šä¸ªæ•°æ®é€šé“ã€‚ ä¸‹é¢å°±æ¥è¯¦ç»†ä»‹ç»Java NIOçš„ç›¸å…³çŸ¥è¯†ã€‚ 1ã€Java NIO æ¦‚è¿°Java NIO ç”±ä»¥ä¸‹å‡ ä¸ªæ ¸å¿ƒéƒ¨åˆ†ç»„æˆï¼š Channels Buffers Selectors è™½ç„¶ Java NIO ä¸­é™¤æ­¤ä¹‹å¤–è¿˜æœ‰å¾ˆå¤šç±»å’Œç»„ä»¶ï¼Œä½†åœ¨æˆ‘çœ‹æ¥ï¼ŒChannelï¼ŒBuffer å’Œ Selector æ„æˆäº†æ ¸å¿ƒçš„ APIã€‚å…¶å®ƒç»„ä»¶ï¼Œå¦‚ Pipe å’Œ FileLockï¼Œåªä¸è¿‡æ˜¯ä¸ä¸‰ä¸ªæ ¸å¿ƒç»„ä»¶å…±åŒä½¿ç”¨çš„å·¥å…·ç±»ã€‚å› æ­¤ï¼Œåœ¨æ¦‚è¿°ä¸­æˆ‘å°†é›†ä¸­åœ¨è¿™ä¸‰ä¸ªç»„ä»¶ä¸Šã€‚å…¶å®ƒç»„ä»¶ä¼šåœ¨å•ç‹¬çš„ç« èŠ‚ä¸­è®²åˆ°ã€‚ Channel å’Œ BufferåŸºæœ¬ä¸Šï¼Œæ‰€æœ‰çš„ IO åœ¨NIO ä¸­éƒ½ä»ä¸€ä¸ª Channel å¼€å§‹ã€‚Channel æœ‰ç‚¹è±¡æµã€‚ æ•°æ®å¯ä»¥ä» Channel è¯»åˆ° Buffer ä¸­ï¼Œä¹Ÿå¯ä»¥ä» Buffer å†™åˆ° Channel ä¸­ã€‚è¿™é‡Œæœ‰ä¸ªå›¾ç¤ºï¼š Channel å’Œ Buffer æœ‰å¥½å‡ ç§ç±»å‹ã€‚ä¸‹é¢æ˜¯ JAVA NIO ä¸­çš„ä¸€äº›ä¸»è¦ Channel çš„å®ç°ï¼š FileChannel DatagramChannel SocketChannel ServerSocketChannel æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼Œè¿™äº›é€šé“æ¶µç›–äº† UDP å’Œ TCP ç½‘ç»œ IOï¼Œä»¥åŠæ–‡ä»¶ IOã€‚ ä¸è¿™äº›ç±»ä¸€èµ·çš„æœ‰ä¸€äº›æœ‰è¶£çš„æ¥å£ï¼Œä½†ä¸ºç®€å•èµ·è§ï¼Œæˆ‘å°½é‡åœ¨æ¦‚è¿°ä¸­ä¸æåˆ°å®ƒä»¬ã€‚æœ¬æ•™ç¨‹å…¶å®ƒç« èŠ‚ä¸å®ƒä»¬ç›¸å…³çš„åœ°æ–¹æˆ‘ä¼šè¿›è¡Œè§£é‡Šã€‚ ä»¥ä¸‹æ˜¯ Java NIO é‡Œå…³é”®çš„ Buffer å®ç°ï¼š ByteBuffer CharBuffer DoubleBuffer FloatBuffer IntBuffer LongBuffer ShortBuffer è¿™äº› Buffer è¦†ç›–äº†ä½ èƒ½é€šè¿‡ IO å‘é€çš„åŸºæœ¬æ•°æ®ç±»å‹ï¼šbyte, short, int, long, float, double å’Œ charã€‚ Java NIO è¿˜æœ‰ä¸ª MappedByteBufferï¼Œç”¨äºè¡¨ç¤ºå†…å­˜æ˜ å°„æ–‡ä»¶ï¼Œ æˆ‘ä¹Ÿä¸æ‰“ç®—åœ¨æ¦‚è¿°ä¸­è¯´æ˜ã€‚ SelectorSelector å…è®¸å•çº¿ç¨‹å¤„ç†å¤šä¸ª Channelã€‚å¦‚æœä½ çš„åº”ç”¨æ‰“å¼€äº†å¤šä¸ªè¿æ¥ï¼ˆé€šé“ï¼‰ï¼Œä½†æ¯ä¸ªè¿æ¥çš„æµé‡éƒ½å¾ˆä½ï¼Œä½¿ç”¨ Selector å°±ä¼šå¾ˆæ–¹ä¾¿ã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸€ä¸ªèŠå¤©æœåŠ¡å™¨ä¸­ã€‚ è¿™æ˜¯åœ¨ä¸€ä¸ªå•çº¿ç¨‹ä¸­ä½¿ç”¨ä¸€ä¸ª Selector å¤„ç†3ä¸ª Channel çš„å›¾ç¤ºï¼š è¦ä½¿ç”¨ Selectorï¼Œå¾—å‘ Selector æ³¨å†Œ Channelï¼Œç„¶åè°ƒç”¨å®ƒçš„ select() æ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•ä¼šä¸€ç›´é˜»å¡åˆ°æŸä¸ªæ³¨å†Œçš„é€šé“æœ‰äº‹ä»¶å°±ç»ªã€‚ä¸€æ—¦è¿™ä¸ªæ–¹æ³•è¿”å›ï¼Œçº¿ç¨‹å°±å¯ä»¥å¤„ç†è¿™äº›äº‹ä»¶ï¼Œäº‹ä»¶çš„ä¾‹å­æœ‰å¦‚æ–°è¿æ¥è¿›æ¥ï¼Œæ•°æ®æ¥æ”¶ç­‰ã€‚ 2ã€ChannelJava NIO çš„é€šé“ç±»ä¼¼æµï¼Œä½†åˆæœ‰äº›ä¸åŒï¼š æ—¢å¯ä»¥ä»é€šé“ä¸­è¯»å–æ•°æ®ï¼Œåˆå¯ä»¥å†™æ•°æ®åˆ°é€šé“ã€‚ä½†æµçš„è¯»å†™é€šå¸¸æ˜¯å•å‘çš„ã€‚ é€šé“å¯ä»¥å¼‚æ­¥åœ°è¯»å†™ã€‚ é€šé“ä¸­çš„æ•°æ®æ€»æ˜¯è¦å…ˆè¯»åˆ°ä¸€ä¸ª Bufferï¼Œæˆ–è€…æ€»æ˜¯è¦ä»ä¸€ä¸ª Buffer ä¸­å†™å…¥ã€‚ æ­£å¦‚ä¸Šé¢æ‰€è¯´ï¼Œä»é€šé“è¯»å–æ•°æ®åˆ°ç¼“å†²åŒºï¼Œä»ç¼“å†²åŒºå†™å…¥æ•°æ®åˆ°é€šé“ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š Channel çš„å®ç°è¿™äº›æ˜¯ Java NIO ä¸­æœ€é‡è¦çš„é€šé“çš„å®ç°ï¼š FileChannel DatagramChannel SocketChannel ServerSocketChannel FileChannel ä»æ–‡ä»¶ä¸­è¯»å†™æ•°æ®ã€‚ DatagramChannel èƒ½é€šè¿‡ UDP è¯»å†™ç½‘ç»œä¸­çš„æ•°æ®ã€‚ SocketChannel èƒ½é€šè¿‡ TCP è¯»å†™ç½‘ç»œä¸­çš„æ•°æ®ã€‚ ServerSocketChannel å¯ä»¥ç›‘å¬æ–°è¿›æ¥çš„ TCP è¿æ¥ï¼Œåƒ Web æœåŠ¡å™¨é‚£æ ·ã€‚å¯¹æ¯ä¸€ä¸ªæ–°è¿›æ¥çš„è¿æ¥éƒ½ä¼šåˆ›å»ºä¸€ä¸ª SocketChannelã€‚ åŸºæœ¬çš„ Channel ç¤ºä¾‹ä¸‹é¢æ˜¯ä¸€ä¸ªä½¿ç”¨ FileChannel è¯»å–æ•°æ®åˆ° Buffer ä¸­çš„ç¤ºä¾‹ï¼š 12345678910111213141516171819RandomAccessFile aFile = new RandomAccessFile(&quot;data/nio-data.txt&quot;, &quot;rw&quot;);FileChannel inChannel = aFile.getChannel();ByteBuffer buf = ByteBuffer.allocate(48);int bytesRead = inChannel.read(buf);while (bytesRead != -1) &#123;System.out.println(&quot;Read &quot; + bytesRead);buf.flip();while(buf.hasRemaining())&#123;System.out.print((char) buf.get());&#125;buf.clear();bytesRead = inChannel.read(buf);&#125;aFile.close(); æ³¨æ„ buf.flip() çš„è°ƒç”¨ï¼Œé¦–å…ˆè¯»å–æ•°æ®åˆ°Bufferï¼Œç„¶ååè½¬Buffer,æ¥ç€å†ä»Bufferä¸­è¯»å–æ•°æ®ã€‚ä¸‹ä¸€èŠ‚ä¼šæ·±å…¥è®²è§£Bufferçš„æ›´å¤šç»†èŠ‚ã€‚ 3ã€BufferJava NIO ä¸­çš„ Buffer ç”¨äºå’Œ NIO é€šé“è¿›è¡Œäº¤äº’ã€‚å¦‚ä½ æ‰€çŸ¥ï¼Œæ•°æ®æ˜¯ä»é€šé“è¯»å…¥ç¼“å†²åŒºï¼Œä»ç¼“å†²åŒºå†™å…¥åˆ°é€šé“ä¸­çš„ã€‚ ç¼“å†²åŒºæœ¬è´¨ä¸Šæ˜¯ä¸€å—å¯ä»¥å†™å…¥æ•°æ®ï¼Œç„¶åå¯ä»¥ä»ä¸­è¯»å–æ•°æ®çš„å†…å­˜ã€‚è¿™å—å†…å­˜è¢«åŒ…è£…æˆ NIO Buffer å¯¹è±¡ï¼Œå¹¶æä¾›äº†ä¸€ç»„æ–¹æ³•ï¼Œç”¨æ¥æ–¹ä¾¿çš„è®¿é—®è¯¥å—å†…å­˜ã€‚ Buffer çš„åŸºæœ¬ç”¨æ³•ä½¿ç”¨ Buffer è¯»å†™æ•°æ®ä¸€èˆ¬éµå¾ªä»¥ä¸‹å››ä¸ªæ­¥éª¤ï¼š å†™å…¥æ•°æ®åˆ° Buffer è°ƒç”¨ flip() æ–¹æ³• ä» Buffer ä¸­è¯»å–æ•°æ® è°ƒç”¨ clear() æ–¹æ³•æˆ–è€… compact() æ–¹æ³• å½“å‘ buffer å†™å…¥æ•°æ®æ—¶ï¼Œbuffer ä¼šè®°å½•ä¸‹å†™äº†å¤šå°‘æ•°æ®ã€‚ä¸€æ—¦è¦è¯»å–æ•°æ®ï¼Œéœ€è¦å…ˆé€šè¿‡ flip() æ–¹æ³•å°† Buffer ä»å†™æ¨¡å¼åˆ‡æ¢åˆ°è¯»æ¨¡å¼ã€‚åœ¨è¯»æ¨¡å¼ä¸‹ï¼Œå¯ä»¥è¯»å–ä¹‹å‰å†™å…¥åˆ° buffer çš„æ‰€æœ‰æ•°æ®ã€‚ ä¸€æ—¦è¯»å®Œäº†æ‰€æœ‰çš„æ•°æ®ï¼Œå°±éœ€è¦æ¸…ç©ºç¼“å†²åŒºï¼Œè®©å®ƒå¯ä»¥å†æ¬¡è¢«å†™å…¥ã€‚æœ‰ä¸¤ç§æ–¹å¼èƒ½æ¸…ç©ºç¼“å†²åŒºï¼šè°ƒç”¨ clear() æˆ– compact() æ–¹æ³•ã€‚clear() æ–¹æ³•ä¼šæ¸…ç©ºæ•´ä¸ªç¼“å†²åŒºã€‚compact() æ–¹æ³•åªä¼šæ¸…é™¤å·²ç»è¯»è¿‡çš„æ•°æ®ï¼Œä»»ä½•æœªè¯»çš„æ•°æ®éƒ½è¢«ç§»åˆ°ç¼“å†²åŒºçš„èµ·å§‹å¤„ï¼Œæ–°å†™å…¥çš„æ•°æ®å°†æ”¾åˆ°ç¼“å†²åŒºæœªè¯»æ•°æ®çš„åé¢ã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªä½¿ç”¨Bufferçš„ä¾‹å­ï¼š 12345678910111213141516171819RandomAccessFile aFile = new RandomAccessFile(&quot;data/nio-data.txt&quot;, &quot;rw&quot;);FileChannel inChannel = aFile.getChannel();//create buffer with capacity of 48 bytesByteBuffer buf = ByteBuffer.allocate(48);int bytesRead = inChannel.read(buf); //read into buffer.while (bytesRead != -1) &#123; buf.flip(); //make buffer ready for read while(buf.hasRemaining())&#123; System.out.print((char) buf.get()); // read 1 byte at a time &#125; buf.clear(); //make buffer ready for writing bytesRead = inChannel.read(buf);&#125;aFile.close(); Buffer çš„ capacityã€ position å’Œ limitç¼“å†²åŒºæœ¬è´¨ä¸Šæ˜¯ä¸€å—å¯ä»¥å†™å…¥æ•°æ®ï¼Œç„¶åå¯ä»¥ä»ä¸­è¯»å–æ•°æ®çš„å†…å­˜ã€‚è¿™å—å†…å­˜è¢«åŒ…è£…æˆ NIO Buffer å¯¹è±¡ï¼Œå¹¶æä¾›äº†ä¸€ç»„æ–¹æ³•ï¼Œç”¨æ¥æ–¹ä¾¿çš„è®¿é—®è¯¥å—å†…å­˜ã€‚ ä¸ºäº†ç†è§£ Buffer çš„å·¥ä½œåŸç†ï¼Œéœ€è¦ç†Ÿæ‚‰å®ƒçš„ä¸‰ä¸ªå±æ€§ï¼š capacity position limit position å’Œ limit çš„å«ä¹‰å–å†³äº Buffer å¤„åœ¨è¯»æ¨¡å¼è¿˜æ˜¯å†™æ¨¡å¼ã€‚ä¸ç®¡ Buffer å¤„åœ¨ä»€ä¹ˆæ¨¡å¼ï¼Œcapacity çš„å«ä¹‰æ€»æ˜¯ä¸€æ ·çš„ã€‚ è¿™é‡Œæœ‰ä¸€ä¸ªå…³äº capacityï¼Œposition å’Œ limit åœ¨è¯»å†™æ¨¡å¼ä¸­çš„è¯´æ˜ï¼Œè¯¦ç»†çš„è§£é‡Šåœ¨æ’å›¾åé¢ã€‚ capacity ä½œä¸ºä¸€ä¸ªå†…å­˜å—ï¼ŒBuffer æœ‰ä¸€ä¸ªå›ºå®šçš„å¤§å°å€¼ï¼Œä¹Ÿå«â€œcapacityâ€.ä½ åªèƒ½å¾€é‡Œå†™ capacity ä¸ªbyteã€longï¼Œchar ç­‰ç±»å‹ã€‚ä¸€æ—¦ Buffer æ»¡äº†ï¼Œéœ€è¦å°†å…¶æ¸…ç©ºï¼ˆé€šè¿‡è¯»æ•°æ®æˆ–è€…æ¸…é™¤æ•°æ®ï¼‰æ‰èƒ½ç»§ç»­å†™æ•°æ®å¾€é‡Œå†™æ•°æ®ã€‚ position å½“ä½ å†™æ•°æ®åˆ° Buffer ä¸­æ—¶ï¼Œposition è¡¨ç¤ºå½“å‰çš„ä½ç½®ã€‚åˆå§‹çš„ position å€¼ä¸º 0ã€‚å½“ä¸€ä¸ª byteã€long ç­‰æ•°æ®å†™åˆ° Buffer åï¼Œ position ä¼šå‘å‰ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªå¯æ’å…¥æ•°æ®çš„ Buffer å•å…ƒã€‚position æœ€å¤§å¯ä¸º capacity â€“ 1. å½“è¯»å–æ•°æ®æ—¶ï¼Œä¹Ÿæ˜¯ä»æŸä¸ªç‰¹å®šä½ç½®è¯»ã€‚å½“å°† Buffer ä»å†™æ¨¡å¼åˆ‡æ¢åˆ°è¯»æ¨¡å¼ï¼Œposition ä¼šè¢«é‡ç½®ä¸º 0. å½“ä» Buffer çš„ position å¤„è¯»å–æ•°æ®æ—¶ï¼Œposition å‘å‰ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªå¯è¯»çš„ä½ç½®ã€‚ limit åœ¨å†™æ¨¡å¼ä¸‹ï¼ŒBuffer çš„ limit è¡¨ç¤ºä½ æœ€å¤šèƒ½å¾€ Buffer é‡Œå†™å¤šå°‘æ•°æ®ã€‚ å†™æ¨¡å¼ä¸‹ï¼Œlimit ç­‰äºBuffer çš„ capacityã€‚ å½“åˆ‡æ¢ Buffer åˆ°è¯»æ¨¡å¼æ—¶ï¼Œ limit è¡¨ç¤ºä½ æœ€å¤šèƒ½è¯»åˆ°å¤šå°‘æ•°æ®ã€‚å› æ­¤ï¼Œå½“åˆ‡æ¢ Buffer åˆ°è¯»æ¨¡å¼æ—¶ï¼Œlimit ä¼šè¢«è®¾ç½®æˆå†™æ¨¡å¼ä¸‹çš„ position å€¼ã€‚æ¢å¥è¯è¯´ï¼Œä½ èƒ½è¯»åˆ°ä¹‹å‰å†™å…¥çš„æ‰€æœ‰æ•°æ®ï¼ˆlimitè¢«è®¾ç½®æˆå·²å†™æ•°æ®çš„æ•°é‡ï¼Œè¿™ä¸ªå€¼åœ¨å†™æ¨¡å¼ä¸‹å°±æ˜¯ positionï¼‰ Bufferçš„ç±»å‹Java NIO æœ‰ä»¥ä¸‹Bufferç±»å‹ ByteBuffer MappedByteBuffer CharBuffer DoubleBuffer FloatBuffer IntBuffer LongBuffer ShortBuffer å¦‚ä½ æ‰€è§ï¼Œè¿™äº›Bufferç±»å‹ä»£è¡¨äº†ä¸åŒçš„æ•°æ®ç±»å‹ã€‚æ¢å¥è¯è¯´ï¼Œå°±æ˜¯å¯ä»¥é€šè¿‡charï¼Œshortï¼Œintï¼Œlongï¼Œfloat æˆ– doubleç±»å‹æ¥æ“ä½œç¼“å†²åŒºä¸­çš„å­—èŠ‚ã€‚ MappedByteBuffer æœ‰äº›ç‰¹åˆ«ï¼Œåœ¨æ¶‰åŠå®ƒçš„ä¸“é—¨ç« èŠ‚ä¸­å†è®²ã€‚ Buffer çš„åˆ†é…è¦æƒ³è·å¾—ä¸€ä¸ª Buffer å¯¹è±¡é¦–å…ˆè¦è¿›è¡Œåˆ†é…ã€‚ æ¯ä¸€ä¸ª Buffer ç±»éƒ½æœ‰ä¸€ä¸ª allocate æ–¹æ³•ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªåˆ†é…48å­—èŠ‚ capacity çš„ ByteBuffer çš„ä¾‹å­ã€‚ 1ByteBuffer buf = ByteBuffer.allocate(48); è¿™æ˜¯åˆ†é…ä¸€ä¸ªå¯å­˜å‚¨1024ä¸ªå­—ç¬¦çš„ CharBufferï¼š 1CharBuffer buf = CharBuffer.allocate(1024); å‘ Buffer ä¸­å†™æ•°æ®å†™æ•°æ®åˆ° Buffer æœ‰ä¸¤ç§æ–¹å¼ï¼š ä» Channel å†™åˆ° Bufferã€‚ é€šè¿‡ Buffer çš„ put() æ–¹æ³•å†™åˆ° Buffer é‡Œã€‚ ä» Channel å†™åˆ° Buffer çš„ä¾‹å­ï¼š 1int bytesRead = inChannel.read(buf); //read into buffer. é€šè¿‡putæ–¹æ³•å†™Bufferçš„ä¾‹å­ï¼š 1buf.put(127); put æ–¹æ³•æœ‰å¾ˆå¤šç‰ˆæœ¬ï¼Œå…è®¸ä½ ä»¥ä¸åŒçš„æ–¹å¼æŠŠæ•°æ®å†™å…¥åˆ° Buffer ä¸­ã€‚ä¾‹å¦‚ï¼Œ å†™åˆ°ä¸€ä¸ªæŒ‡å®šçš„ä½ç½®ï¼Œæˆ–è€…æŠŠä¸€ä¸ªå­—èŠ‚æ•°ç»„å†™å…¥åˆ° Bufferã€‚ æ›´å¤šBufferå®ç°çš„ç»†èŠ‚å‚è€ƒJavaDocã€‚ flip() æ–¹æ³• flip() æ–¹æ³•å°† Buffer ä»å†™æ¨¡å¼åˆ‡æ¢åˆ°è¯»æ¨¡å¼ã€‚è°ƒç”¨ flip() æ–¹æ³•ä¼šå°† position è®¾å› 0ï¼Œå¹¶å°† limit è®¾ç½®æˆä¹‹å‰ position çš„å€¼ã€‚ æ¢å¥è¯è¯´ï¼Œposition ç°åœ¨ç”¨äºæ ‡è®°è¯»çš„ä½ç½®ï¼Œlimit è¡¨ç¤ºä¹‹å‰å†™è¿›äº†å¤šå°‘ä¸ª byteã€charç­‰ â€”â€” ç°åœ¨èƒ½è¯»å–å¤šå°‘ä¸ªbyteã€charç­‰ã€‚ ä»Bufferä¸­è¯»å–æ•°æ®ä»Bufferä¸­è¯»å–æ•°æ®æœ‰ä¸¤ç§æ–¹å¼ï¼š ä»Bufferè¯»å–æ•°æ®åˆ°Channelã€‚ ä½¿ç”¨get()æ–¹æ³•ä»Bufferä¸­è¯»å–æ•°æ®ã€‚ ä»Bufferè¯»å–æ•°æ®åˆ°Channelçš„ä¾‹å­ï¼š 12//read from buffer into channel.int bytesWritten = inChannel.write(buf); ä½¿ç”¨get()æ–¹æ³•ä»Bufferä¸­è¯»å–æ•°æ®çš„ä¾‹å­ 1byte aByte = buf.get(); getæ–¹æ³•æœ‰å¾ˆå¤šç‰ˆæœ¬ï¼Œå…è®¸ä½ ä»¥ä¸åŒçš„æ–¹å¼ä»Bufferä¸­è¯»å–æ•°æ®ã€‚ä¾‹å¦‚ï¼Œä»æŒ‡å®špositionè¯»å–ï¼Œæˆ–è€…ä»Bufferä¸­è¯»å–æ•°æ®åˆ°å­—èŠ‚æ•°ç»„ã€‚æ›´å¤šBufferå®ç°çš„ç»†èŠ‚å‚è€ƒJavaDocã€‚ rewind()æ–¹æ³•Buffer.rewind()å°†positionè®¾å›0ï¼Œæ‰€ä»¥ä½ å¯ä»¥é‡è¯»Bufferä¸­çš„æ‰€æœ‰æ•°æ®ã€‚limitä¿æŒä¸å˜ï¼Œä»ç„¶è¡¨ç¤ºèƒ½ä»Bufferä¸­è¯»å–å¤šå°‘ä¸ªå…ƒç´ ï¼ˆbyteã€charç­‰ï¼‰ã€‚ clear()ä¸compact()æ–¹æ³•ä¸€æ—¦è¯»å®ŒBufferä¸­çš„æ•°æ®ï¼Œéœ€è¦è®©Bufferå‡†å¤‡å¥½å†æ¬¡è¢«å†™å…¥ã€‚å¯ä»¥é€šè¿‡clear()æˆ–compact()æ–¹æ³•æ¥å®Œæˆã€‚ å¦‚æœè°ƒç”¨çš„æ˜¯clear()æ–¹æ³•ï¼Œpositionå°†è¢«è®¾å›0ï¼Œlimitè¢«è®¾ç½®æˆ capacityçš„å€¼ã€‚æ¢å¥è¯è¯´ï¼ŒBuffer è¢«æ¸…ç©ºäº†ã€‚Bufferä¸­çš„æ•°æ®å¹¶æœªæ¸…é™¤ï¼Œåªæ˜¯è¿™äº›æ ‡è®°å‘Šè¯‰æˆ‘ä»¬å¯ä»¥ä»å“ªé‡Œå¼€å§‹å¾€Bufferé‡Œå†™æ•°æ®ã€‚ å¦‚æœBufferä¸­æœ‰ä¸€äº›æœªè¯»çš„æ•°æ®ï¼Œè°ƒç”¨clear()æ–¹æ³•ï¼Œæ•°æ®å°†â€œè¢«é—å¿˜â€ï¼Œæ„å‘³ç€ä¸å†æœ‰ä»»ä½•æ ‡è®°ä¼šå‘Šè¯‰ä½ å“ªäº›æ•°æ®è¢«è¯»è¿‡ï¼Œå“ªäº›è¿˜æ²¡æœ‰ã€‚ å¦‚æœBufferä¸­ä»æœ‰æœªè¯»çš„æ•°æ®ï¼Œä¸”åç»­è¿˜éœ€è¦è¿™äº›æ•°æ®ï¼Œä½†æ˜¯æ­¤æ—¶æƒ³è¦å…ˆå…ˆå†™äº›æ•°æ®ï¼Œé‚£ä¹ˆä½¿ç”¨compact()æ–¹æ³•ã€‚ compact()æ–¹æ³•å°†æ‰€æœ‰æœªè¯»çš„æ•°æ®æ‹·è´åˆ°Bufferèµ·å§‹å¤„ã€‚ç„¶åå°†positionè®¾åˆ°æœ€åä¸€ä¸ªæœªè¯»å…ƒç´ æ­£åé¢ã€‚limitå±æ€§ä¾ç„¶åƒclear()æ–¹æ³•ä¸€æ ·ï¼Œè®¾ç½®æˆcapacityã€‚ç°åœ¨Bufferå‡†å¤‡å¥½å†™æ•°æ®äº†ï¼Œä½†æ˜¯ä¸ä¼šè¦†ç›–æœªè¯»çš„æ•°æ®ã€‚ mark()ä¸reset()æ–¹æ³•é€šè¿‡è°ƒç”¨Buffer.mark()æ–¹æ³•ï¼Œå¯ä»¥æ ‡è®°Bufferä¸­çš„ä¸€ä¸ªç‰¹å®špositionã€‚ä¹‹åå¯ä»¥é€šè¿‡è°ƒç”¨Buffer.reset()æ–¹æ³•æ¢å¤åˆ°è¿™ä¸ªpositionã€‚ä¾‹å¦‚ï¼š 123buffer.mark();//call buffer.get() a couple of times, e.g. during parsing.buffer.reset(); //set position back to mark. equals()ä¸compareTo()æ–¹æ³•å¯ä»¥ä½¿ç”¨equals()å’ŒcompareTo()æ–¹æ³•ä¸¤ä¸ªBufferã€‚ equals() å½“æ»¡è¶³ä¸‹åˆ—æ¡ä»¶æ—¶ï¼Œè¡¨ç¤ºä¸¤ä¸ªBufferç›¸ç­‰ï¼š æœ‰ç›¸åŒçš„ç±»å‹ï¼ˆbyteã€charã€intç­‰ï¼‰ã€‚ Bufferä¸­å‰©ä½™çš„byteã€charç­‰çš„ä¸ªæ•°ç›¸ç­‰ã€‚ Bufferä¸­æ‰€æœ‰å‰©ä½™çš„byteã€charç­‰éƒ½ç›¸åŒã€‚ å¦‚ä½ æ‰€è§ï¼Œequalsåªæ˜¯æ¯”è¾ƒBufferçš„ä¸€éƒ¨åˆ†ï¼Œä¸æ˜¯æ¯ä¸€ä¸ªåœ¨å®ƒé‡Œé¢çš„å…ƒç´ éƒ½æ¯”è¾ƒã€‚å®é™…ä¸Šï¼Œå®ƒåªæ¯”è¾ƒBufferä¸­çš„å‰©ä½™å…ƒç´ ã€‚ compareTo()æ–¹æ³• compareTo()æ–¹æ³•æ¯”è¾ƒä¸¤ä¸ªBufferçš„å‰©ä½™å…ƒç´ (byteã€charç­‰)ï¼Œ å¦‚æœæ»¡è¶³ä¸‹åˆ—æ¡ä»¶ï¼Œåˆ™è®¤ä¸ºä¸€ä¸ªBufferâ€œå°äºâ€å¦ä¸€ä¸ªBufferï¼š ç¬¬ä¸€ä¸ªä¸ç›¸ç­‰çš„å…ƒç´ å°äºå¦ä¸€ä¸ªBufferä¸­å¯¹åº”çš„å…ƒç´  ã€‚ æ‰€æœ‰å…ƒç´ éƒ½ç›¸ç­‰ï¼Œä½†ç¬¬ä¸€ä¸ªBufferæ¯”å¦ä¸€ä¸ªå…ˆè€—å°½(ç¬¬ä¸€ä¸ªBufferçš„å…ƒç´ ä¸ªæ•°æ¯”å¦ä¸€ä¸ªå°‘)ã€‚ ï¼ˆè¯‘æ³¨ï¼šå‰©ä½™å…ƒç´ æ˜¯ä» positionåˆ°limitä¹‹é—´çš„å…ƒç´ ï¼‰ 4ã€Scatter/GatherJava NIO å¼€å§‹æ”¯æŒ scatter/gatherï¼Œscatter/gather ç”¨äºæè¿°ä» Channelï¼ˆè¯‘è€…æ³¨ï¼šChannel åœ¨ä¸­æ–‡ç»å¸¸ç¿»è¯‘ä¸ºé€šé“ï¼‰ä¸­è¯»å–æˆ–è€…å†™å…¥åˆ° Channel çš„æ“ä½œã€‚ åˆ†æ•£ï¼ˆscatterï¼‰ä» Channel ä¸­è¯»å–æ˜¯æŒ‡åœ¨è¯»æ“ä½œæ—¶å°†è¯»å–çš„æ•°æ®å†™å…¥å¤šä¸ª buffer ä¸­ã€‚å› æ­¤ï¼ŒChannel å°†ä» Channel ä¸­è¯»å–çš„æ•°æ®â€œåˆ†æ•£ï¼ˆscatterï¼‰â€åˆ°å¤šä¸ªBufferä¸­ã€‚ èšé›†ï¼ˆgatherï¼‰å†™å…¥Channelæ˜¯æŒ‡åœ¨å†™æ“ä½œæ—¶å°†å¤šä¸ªbufferçš„æ•°æ®å†™å…¥åŒä¸€ä¸ªChannelï¼Œå› æ­¤ï¼ŒChannel å°†å¤šä¸ªBufferä¸­çš„æ•°æ®â€œèšé›†ï¼ˆgatherï¼‰â€åå‘é€åˆ°Channelã€‚ scatter / gatherç»å¸¸ç”¨äºéœ€è¦å°†ä¼ è¾“çš„æ•°æ®åˆ†å¼€å¤„ç†çš„åœºåˆï¼Œä¾‹å¦‚ä¼ è¾“ä¸€ä¸ªç”±æ¶ˆæ¯å¤´å’Œæ¶ˆæ¯ä½“ç»„æˆçš„æ¶ˆæ¯ï¼Œä½ å¯èƒ½ä¼šå°†æ¶ˆæ¯ä½“å’Œæ¶ˆæ¯å¤´åˆ†æ•£åˆ°ä¸åŒçš„bufferä¸­ï¼Œè¿™æ ·ä½ å¯ä»¥æ–¹ä¾¿çš„å¤„ç†æ¶ˆæ¯å¤´å’Œæ¶ˆæ¯ä½“ã€‚ Scattering ReadsScattering Readsæ˜¯æŒ‡æ•°æ®ä»ä¸€ä¸ªchannelè¯»å–åˆ°å¤šä¸ªbufferä¸­ã€‚å¦‚ä¸‹å›¾æè¿°ï¼š ä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š 123456ByteBuffer header = ByteBuffer.allocate(128);ByteBuffer body = ByteBuffer.allocate(1024);ByteBuffer[] bufferArray = &#123; header, body &#125;;channel.read(bufferArray); æ³¨æ„bufferé¦–å…ˆè¢«æ’å…¥åˆ°æ•°ç»„ï¼Œç„¶åå†å°†æ•°ç»„ä½œä¸ºchannel.read() çš„è¾“å…¥å‚æ•°ã€‚read()æ–¹æ³•æŒ‰ç…§bufferåœ¨æ•°ç»„ä¸­çš„é¡ºåºå°†ä»channelä¸­è¯»å–çš„æ•°æ®å†™å…¥åˆ°bufferï¼Œå½“ä¸€ä¸ªbufferè¢«å†™æ»¡åï¼Œchannelç´§æ¥ç€å‘å¦ä¸€ä¸ªbufferä¸­å†™ã€‚ Scattering Readsåœ¨ç§»åŠ¨ä¸‹ä¸€ä¸ªbufferå‰ï¼Œå¿…é¡»å¡«æ»¡å½“å‰çš„bufferï¼Œè¿™ä¹Ÿæ„å‘³ç€å®ƒä¸é€‚ç”¨äºåŠ¨æ€æ¶ˆæ¯(è¯‘è€…æ³¨ï¼šæ¶ˆæ¯å¤§å°ä¸å›ºå®š)ã€‚æ¢å¥è¯è¯´ï¼Œå¦‚æœå­˜åœ¨æ¶ˆæ¯å¤´å’Œæ¶ˆæ¯ä½“ï¼Œæ¶ˆæ¯å¤´å¿…é¡»å®Œæˆå¡«å……ï¼ˆä¾‹å¦‚ 128byteï¼‰ï¼ŒScattering Readsæ‰èƒ½æ­£å¸¸å·¥ä½œã€‚ Gathering WritesGathering Writesæ˜¯æŒ‡æ•°æ®ä»å¤šä¸ªbufferå†™å…¥åˆ°åŒä¸€ä¸ªchannelã€‚å¦‚ä¸‹å›¾æè¿°ï¼š ä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š 12345678ByteBuffer header = ByteBuffer.allocate(128);ByteBuffer body = ByteBuffer.allocate(1024);//write data into buffersByteBuffer[] bufferArray = &#123; header, body &#125;;channel.write(bufferArray); buffersæ•°ç»„æ˜¯write()æ–¹æ³•çš„å…¥å‚ï¼Œwrite()æ–¹æ³•ä¼šæŒ‰ç…§bufferåœ¨æ•°ç»„ä¸­çš„é¡ºåºï¼Œå°†æ•°æ®å†™å…¥åˆ°channelï¼Œæ³¨æ„åªæœ‰positionå’Œlimitä¹‹é—´çš„æ•°æ®æ‰ä¼šè¢«å†™å…¥ã€‚å› æ­¤ï¼Œå¦‚æœä¸€ä¸ªbufferçš„å®¹é‡ä¸º128byteï¼Œä½†æ˜¯ä»…ä»…åŒ…å«58byteçš„æ•°æ®ï¼Œé‚£ä¹ˆè¿™58byteçš„æ•°æ®å°†è¢«å†™å…¥åˆ°channelä¸­ã€‚å› æ­¤ä¸Scattering Readsç›¸åï¼ŒGathering Writesèƒ½è¾ƒå¥½çš„å¤„ç†åŠ¨æ€æ¶ˆæ¯ã€‚ 5ã€é€šé“ä¹‹é—´çš„æ•°æ®ä¼ è¾“åœ¨Java NIOä¸­ï¼Œå¦‚æœä¸¤ä¸ªé€šé“ä¸­æœ‰ä¸€ä¸ªæ˜¯FileChannelï¼Œé‚£ä½ å¯ä»¥ç›´æ¥å°†æ•°æ®ä»ä¸€ä¸ªchannelï¼ˆè¯‘è€…æ³¨ï¼šchannelä¸­æ–‡å¸¸è¯‘ä½œé€šé“ï¼‰ä¼ è¾“åˆ°å¦å¤–ä¸€ä¸ªchannelã€‚ transferFrom()FileChannelçš„transferFrom()æ–¹æ³•å¯ä»¥å°†æ•°æ®ä»æºé€šé“ä¼ è¾“åˆ°FileChannelä¸­ï¼ˆè¯‘è€…æ³¨ï¼šè¿™ä¸ªæ–¹æ³•åœ¨JDKæ–‡æ¡£ä¸­çš„è§£é‡Šä¸ºå°†å­—èŠ‚ä»ç»™å®šçš„å¯è¯»å–å­—èŠ‚é€šé“ä¼ è¾“åˆ°æ­¤é€šé“çš„æ–‡ä»¶ä¸­ï¼‰ã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š 12345678910RandomAccessFile fromFile = new RandomAccessFile(&quot;fromFile.txt&quot;, &quot;rw&quot;);FileChannel fromChannel = fromFile.getChannel();RandomAccessFile toFile = new RandomAccessFile(&quot;toFile.txt&quot;, &quot;rw&quot;);FileChannel toChannel = toFile.getChannel();long position = 0;long count = fromChannel.size();toChannel.transferFrom(position, count, fromChannel); æ–¹æ³•çš„è¾“å…¥å‚æ•°positionè¡¨ç¤ºä»positionå¤„å¼€å§‹å‘ç›®æ ‡æ–‡ä»¶å†™å…¥æ•°æ®ï¼Œcountè¡¨ç¤ºæœ€å¤šä¼ è¾“çš„å­—èŠ‚æ•°ã€‚å¦‚æœæºé€šé“çš„å‰©ä½™ç©ºé—´å°äº count ä¸ªå­—èŠ‚ï¼Œåˆ™æ‰€ä¼ è¾“çš„å­—èŠ‚æ•°è¦å°äºè¯·æ±‚çš„å­—èŠ‚æ•°ã€‚ æ­¤å¤–è¦æ³¨æ„ï¼Œåœ¨SoketChannelçš„å®ç°ä¸­ï¼ŒSocketChannelåªä¼šä¼ è¾“æ­¤åˆ»å‡†å¤‡å¥½çš„æ•°æ®ï¼ˆå¯èƒ½ä¸è¶³countå­—èŠ‚ï¼‰ã€‚å› æ­¤ï¼ŒSocketChannelå¯èƒ½ä¸ä¼šå°†è¯·æ±‚çš„æ‰€æœ‰æ•°æ®(countä¸ªå­—èŠ‚)å…¨éƒ¨ä¼ è¾“åˆ°FileChannelä¸­ã€‚ transferTo()transferTo()æ–¹æ³•å°†æ•°æ®ä»FileChannelä¼ è¾“åˆ°å…¶ä»–çš„channelä¸­ã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š 12345678910RandomAccessFile fromFile = new RandomAccessFile(&quot;fromFile.txt&quot;, &quot;rw&quot;);FileChannel fromChannel = fromFile.getChannel();RandomAccessFile toFile = new RandomAccessFile(&quot;toFile.txt&quot;, &quot;rw&quot;);FileChannel toChannel = toFile.getChannel();long position = 0;long count = fromChannel.size();fromChannel.transferTo(position, count, toChannel); æ˜¯ä¸æ˜¯å‘ç°è¿™ä¸ªä¾‹å­å’Œå‰é¢é‚£ä¸ªä¾‹å­ç‰¹åˆ«ç›¸ä¼¼ï¼Ÿé™¤äº†è°ƒç”¨æ–¹æ³•çš„FileChannelå¯¹è±¡ä¸ä¸€æ ·å¤–ï¼Œå…¶ä»–çš„éƒ½ä¸€æ ·ã€‚ ä¸Šé¢æ‰€è¯´çš„å…³äºSocketChannelçš„é—®é¢˜åœ¨transferTo()æ–¹æ³•ä¸­åŒæ ·å­˜åœ¨ã€‚SocketChannelä¼šä¸€ç›´ä¼ è¾“æ•°æ®ç›´åˆ°ç›®æ ‡bufferè¢«å¡«æ»¡ã€‚ 6ã€SelectorSelectorï¼ˆé€‰æ‹©å™¨ï¼‰æ˜¯Java NIOä¸­èƒ½å¤Ÿæ£€æµ‹ä¸€åˆ°å¤šä¸ªNIOé€šé“ï¼Œå¹¶èƒ½å¤ŸçŸ¥æ™“é€šé“æ˜¯å¦ä¸ºè¯¸å¦‚è¯»å†™äº‹ä»¶åšå¥½å‡†å¤‡çš„ç»„ä»¶ã€‚è¿™æ ·ï¼Œä¸€ä¸ªå•ç‹¬çš„çº¿ç¨‹å¯ä»¥ç®¡ç†å¤šä¸ªchannelï¼Œä»è€Œç®¡ç†å¤šä¸ªç½‘ç»œè¿æ¥ã€‚ ä¸ºä»€ä¹ˆä½¿ç”¨Selector?ä»…ç”¨å•ä¸ªçº¿ç¨‹æ¥å¤„ç†å¤šä¸ªChannelsçš„å¥½å¤„æ˜¯ï¼Œåªéœ€è¦æ›´å°‘çš„çº¿ç¨‹æ¥å¤„ç†é€šé“ã€‚äº‹å®ä¸Šï¼Œå¯ä»¥åªç”¨ä¸€ä¸ªçº¿ç¨‹å¤„ç†æ‰€æœ‰çš„é€šé“ã€‚å¯¹äºæ“ä½œç³»ç»Ÿæ¥è¯´ï¼Œçº¿ç¨‹ä¹‹é—´ä¸Šä¸‹æ–‡åˆ‡æ¢çš„å¼€é”€å¾ˆå¤§ï¼Œè€Œä¸”æ¯ä¸ªçº¿ç¨‹éƒ½è¦å ç”¨ç³»ç»Ÿçš„ä¸€äº›èµ„æºï¼ˆå¦‚å†…å­˜ï¼‰ã€‚å› æ­¤ï¼Œä½¿ç”¨çš„çº¿ç¨‹è¶Šå°‘è¶Šå¥½ã€‚ ä½†æ˜¯ï¼Œéœ€è¦è®°ä½ï¼Œç°ä»£çš„æ“ä½œç³»ç»Ÿå’ŒCPUåœ¨å¤šä»»åŠ¡æ–¹é¢è¡¨ç°çš„è¶Šæ¥è¶Šå¥½ï¼Œæ‰€ä»¥å¤šçº¿ç¨‹çš„å¼€é”€éšç€æ—¶é—´çš„æ¨ç§»ï¼Œå˜å¾—è¶Šæ¥è¶Šå°äº†ã€‚å®é™…ä¸Šï¼Œå¦‚æœä¸€ä¸ªCPUæœ‰å¤šä¸ªå†…æ ¸ï¼Œä¸ä½¿ç”¨å¤šä»»åŠ¡å¯èƒ½æ˜¯åœ¨æµªè´¹CPUèƒ½åŠ›ã€‚ä¸ç®¡æ€ä¹ˆè¯´ï¼Œå…³äºé‚£ç§è®¾è®¡çš„è®¨è®ºåº”è¯¥æ”¾åœ¨å¦ä¸€ç¯‡ä¸åŒçš„æ–‡ç« ä¸­ã€‚åœ¨è¿™é‡Œï¼Œåªè¦çŸ¥é“ä½¿ç”¨Selectorèƒ½å¤Ÿå¤„ç†å¤šä¸ªé€šé“å°±è¶³å¤Ÿäº†ã€‚ ä¸‹é¢æ˜¯å•çº¿ç¨‹ä½¿ç”¨ä¸€ä¸ªSelectorå¤„ç†3ä¸ªchannelçš„ç¤ºä¾‹å›¾ï¼š Selectorçš„åˆ›å»ºé€šè¿‡è°ƒç”¨Selector.open()æ–¹æ³•åˆ›å»ºä¸€ä¸ªSelectorï¼Œå¦‚ä¸‹ï¼š 1Selector selector = Selector.open(); å‘Selectoræ³¨å†Œé€šé“ä¸ºäº†å°†Channelå’ŒSelectoré…åˆä½¿ç”¨ï¼Œå¿…é¡»å°†channelæ³¨å†Œåˆ°selectorä¸Šã€‚é€šè¿‡SelectableChannel.register()æ–¹æ³•æ¥å®ç°ï¼Œå¦‚ä¸‹ï¼š 123channel.configureBlocking(false);SelectionKey key = channel.register(selector, Selectionkey.OP_READ); ä¸Selectorä¸€èµ·ä½¿ç”¨æ—¶ï¼ŒChannelå¿…é¡»å¤„äºéé˜»å¡æ¨¡å¼ä¸‹ã€‚è¿™æ„å‘³ç€ä¸èƒ½å°†FileChannelä¸Selectorä¸€èµ·ä½¿ç”¨ï¼Œå› ä¸ºFileChannelä¸èƒ½åˆ‡æ¢åˆ°éé˜»å¡æ¨¡å¼ã€‚è€Œå¥—æ¥å­—é€šé“éƒ½å¯ä»¥ã€‚ æ³¨æ„register()æ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°ã€‚è¿™æ˜¯ä¸€ä¸ªâ€œinteresté›†åˆâ€ï¼Œæ„æ€æ˜¯åœ¨é€šè¿‡Selectorç›‘å¬Channelæ—¶å¯¹ä»€ä¹ˆäº‹ä»¶æ„Ÿå…´è¶£ã€‚å¯ä»¥ç›‘å¬å››ç§ä¸åŒç±»å‹çš„äº‹ä»¶ï¼š Connect Accept Read Write é€šé“è§¦å‘äº†ä¸€ä¸ªäº‹ä»¶æ„æ€æ˜¯è¯¥äº‹ä»¶å·²ç»å°±ç»ªã€‚æ‰€ä»¥ï¼ŒæŸä¸ªchannelæˆåŠŸè¿æ¥åˆ°å¦ä¸€ä¸ªæœåŠ¡å™¨ç§°ä¸ºâ€œè¿æ¥å°±ç»ªâ€ã€‚ä¸€ä¸ªserver socket channelå‡†å¤‡å¥½æ¥æ”¶æ–°è¿›å…¥çš„è¿æ¥ç§°ä¸ºâ€œæ¥æ”¶å°±ç»ªâ€ã€‚ä¸€ä¸ªæœ‰æ•°æ®å¯è¯»çš„é€šé“å¯ä»¥è¯´æ˜¯â€œè¯»å°±ç»ªâ€ã€‚ç­‰å¾…å†™æ•°æ®çš„é€šé“å¯ä»¥è¯´æ˜¯â€œå†™å°±ç»ªâ€ã€‚ è¿™å››ç§äº‹ä»¶ç”¨SelectionKeyçš„å››ä¸ªå¸¸é‡æ¥è¡¨ç¤ºï¼š SelectionKey.OP_CONNECT SelectionKey.OP_ACCEPT SelectionKey.OP_READ SelectionKey.OP_WRITE å¦‚æœä½ å¯¹ä¸æ­¢ä¸€ç§äº‹ä»¶æ„Ÿå…´è¶£ï¼Œé‚£ä¹ˆå¯ä»¥ç”¨â€œä½æˆ–â€æ“ä½œç¬¦å°†å¸¸é‡è¿æ¥èµ·æ¥ï¼Œå¦‚ä¸‹ï¼š 1int interestSet = SelectionKey.OP_READ | SelectionKey.OP_WRITE; åœ¨ä¸‹é¢è¿˜ä¼šç»§ç»­æåˆ°interesté›†åˆã€‚ SelectionKeyåœ¨ä¸Šä¸€å°èŠ‚ä¸­ï¼Œå½“å‘Selectoræ³¨å†ŒChannelæ—¶ï¼Œregister()æ–¹æ³•ä¼šè¿”å›ä¸€ä¸ªSelectionKeyå¯¹è±¡ã€‚è¿™ä¸ªå¯¹è±¡åŒ…å«äº†ä¸€äº›ä½ æ„Ÿå…´è¶£çš„å±æ€§ï¼š interesté›†åˆ readyé›†åˆ Channel Selector é™„åŠ çš„å¯¹è±¡ï¼ˆå¯é€‰ï¼‰ä¸‹é¢æˆ‘ä¼šæè¿°è¿™äº›å±æ€§ã€‚ interesté›†åˆå°±åƒå‘Selectoræ³¨å†Œé€šé“ä¸€èŠ‚ä¸­æ‰€æè¿°çš„ï¼Œinteresté›†åˆæ˜¯ä½ æ‰€é€‰æ‹©çš„æ„Ÿå…´è¶£çš„äº‹ä»¶é›†åˆã€‚å¯ä»¥é€šè¿‡SelectionKeyè¯»å†™interesté›†åˆï¼Œåƒè¿™æ ·ï¼š 123456int interestSet = selectionKey.interestOps();boolean isInterestedInAccept = (interestSet &amp; SelectionKey.OP_ACCEPT) == SelectionKey.OP_ACCEPTï¼›boolean isInterestedInConnect = interestSet &amp; SelectionKey.OP_CONNECT;boolean isInterestedInRead = interestSet &amp; SelectionKey.OP_READ;boolean isInterestedInWrite = interestSet &amp; SelectionKey.OP_WRITE; å¯ä»¥çœ‹åˆ°ï¼Œç”¨â€œä½ä¸â€æ“ä½œinterest é›†åˆå’Œç»™å®šçš„SelectionKeyå¸¸é‡ï¼Œå¯ä»¥ç¡®å®šæŸä¸ªç¡®å®šçš„äº‹ä»¶æ˜¯å¦åœ¨interest é›†åˆä¸­ã€‚ readyé›†åˆready é›†åˆæ˜¯é€šé“å·²ç»å‡†å¤‡å°±ç»ªçš„æ“ä½œçš„é›†åˆã€‚åœ¨ä¸€æ¬¡é€‰æ‹©(Selection)ä¹‹åï¼Œä½ ä¼šé¦–å…ˆè®¿é—®è¿™ä¸ªready setã€‚Selectionå°†åœ¨ä¸‹ä¸€å°èŠ‚è¿›è¡Œè§£é‡Šã€‚å¯ä»¥è¿™æ ·è®¿é—®readyé›†åˆï¼š 1int readySet = selectionKey.readyOps(); å¯ä»¥ç”¨åƒæ£€æµ‹interesté›†åˆé‚£æ ·çš„æ–¹æ³•ï¼Œæ¥æ£€æµ‹channelä¸­ä»€ä¹ˆäº‹ä»¶æˆ–æ“ä½œå·²ç»å°±ç»ªã€‚ä½†æ˜¯ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å››ä¸ªæ–¹æ³•ï¼Œå®ƒä»¬éƒ½ä¼šè¿”å›ä¸€ä¸ªå¸ƒå°”ç±»å‹ï¼š 1234selectionKey.isAcceptable();selectionKey.isConnectable();selectionKey.isReadable();selectionKey.isWritable(); Channel + Selectorä»SelectionKeyè®¿é—®Channelå’ŒSelectorå¾ˆç®€å•ã€‚å¦‚ä¸‹ï¼š 12Channel channel = selectionKey.channel();Selector selector = selectionKey.selector(); é™„åŠ çš„å¯¹è±¡å¯ä»¥å°†ä¸€ä¸ªå¯¹è±¡æˆ–è€…æ›´å¤šä¿¡æ¯é™„ç€åˆ°SelectionKeyä¸Šï¼Œè¿™æ ·å°±èƒ½æ–¹ä¾¿çš„è¯†åˆ«æŸä¸ªç»™å®šçš„é€šé“ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥é™„åŠ  ä¸é€šé“ä¸€èµ·ä½¿ç”¨çš„Bufferï¼Œæˆ–æ˜¯åŒ…å«èšé›†æ•°æ®çš„æŸä¸ªå¯¹è±¡ã€‚ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š 12selectionKey.attach(theObject);Object attachedObj = selectionKey.attachment(); è¿˜å¯ä»¥åœ¨ç”¨register()æ–¹æ³•å‘Selectoræ³¨å†ŒChannelçš„æ—¶å€™é™„åŠ å¯¹è±¡ã€‚å¦‚ï¼š 1SelectionKey key = channel.register(selector, SelectionKey.OP_READ, theObject); é€šè¿‡Selectoré€‰æ‹©é€šé“ä¸€æ—¦å‘Selectoræ³¨å†Œäº†ä¸€æˆ–å¤šä¸ªé€šé“ï¼Œå°±å¯ä»¥è°ƒç”¨å‡ ä¸ªé‡è½½çš„select()æ–¹æ³•ã€‚è¿™äº›æ–¹æ³•è¿”å›ä½ æ‰€æ„Ÿå…´è¶£çš„äº‹ä»¶ï¼ˆå¦‚è¿æ¥ã€æ¥å—ã€è¯»æˆ–å†™ï¼‰å·²ç»å‡†å¤‡å°±ç»ªçš„é‚£äº›é€šé“ã€‚æ¢å¥è¯è¯´ï¼Œå¦‚æœä½ å¯¹â€œè¯»å°±ç»ªâ€çš„é€šé“æ„Ÿå…´è¶£ï¼Œselect()æ–¹æ³•ä¼šè¿”å›è¯»äº‹ä»¶å·²ç»å°±ç»ªçš„é‚£äº›é€šé“ã€‚ ä¸‹é¢æ˜¯select()æ–¹æ³•ï¼š int select() int select(long timeout) int selectNow() select()é˜»å¡åˆ°è‡³å°‘æœ‰ä¸€ä¸ªé€šé“åœ¨ä½ æ³¨å†Œçš„äº‹ä»¶ä¸Šå°±ç»ªäº†ã€‚ select(long timeout)å’Œselect()ä¸€æ ·ï¼Œé™¤äº†æœ€é•¿ä¼šé˜»å¡timeoutæ¯«ç§’(å‚æ•°)ã€‚ selectNow()ä¸ä¼šé˜»å¡ï¼Œä¸ç®¡ä»€ä¹ˆé€šé“å°±ç»ªéƒ½ç«‹åˆ»è¿”å›ï¼ˆè¯‘è€…æ³¨ï¼šæ­¤æ–¹æ³•æ‰§è¡Œéé˜»å¡çš„é€‰æ‹©æ“ä½œã€‚å¦‚æœè‡ªä»å‰ä¸€æ¬¡é€‰æ‹©æ“ä½œåï¼Œæ²¡æœ‰é€šé“å˜æˆå¯é€‰æ‹©çš„ï¼Œåˆ™æ­¤æ–¹æ³•ç›´æ¥è¿”å›é›¶ã€‚ï¼‰ã€‚ select()æ–¹æ³•è¿”å›çš„intå€¼è¡¨ç¤ºæœ‰å¤šå°‘é€šé“å·²ç»å°±ç»ªã€‚äº¦å³ï¼Œè‡ªä¸Šæ¬¡è°ƒç”¨select()æ–¹æ³•åæœ‰å¤šå°‘é€šé“å˜æˆå°±ç»ªçŠ¶æ€ã€‚å¦‚æœè°ƒç”¨select()æ–¹æ³•ï¼Œå› ä¸ºæœ‰ä¸€ä¸ªé€šé“å˜æˆå°±ç»ªçŠ¶æ€ï¼Œè¿”å›äº†1ï¼Œè‹¥å†æ¬¡è°ƒç”¨select()æ–¹æ³•ï¼Œå¦‚æœå¦ä¸€ä¸ªé€šé“å°±ç»ªäº†ï¼Œå®ƒä¼šå†æ¬¡è¿”å›1ã€‚å¦‚æœå¯¹ç¬¬ä¸€ä¸ªå°±ç»ªçš„channelæ²¡æœ‰åšä»»ä½•æ“ä½œï¼Œç°åœ¨å°±æœ‰ä¸¤ä¸ªå°±ç»ªçš„é€šé“ï¼Œä½†åœ¨æ¯æ¬¡select()æ–¹æ³•è°ƒç”¨ä¹‹é—´ï¼Œåªæœ‰ä¸€ä¸ªé€šé“å°±ç»ªäº†ã€‚ selectedKeys()ä¸€æ—¦è°ƒç”¨äº†select()æ–¹æ³•ï¼Œå¹¶ä¸”è¿”å›å€¼è¡¨æ˜æœ‰ä¸€ä¸ªæˆ–æ›´å¤šä¸ªé€šé“å°±ç»ªäº†ï¼Œç„¶åå¯ä»¥é€šè¿‡è°ƒç”¨selectorçš„selectedKeys()æ–¹æ³•ï¼Œè®¿é—®â€œå·²é€‰æ‹©é”®é›†ï¼ˆselected key setï¼‰â€ä¸­çš„å°±ç»ªé€šé“ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š å½“åƒSelectoræ³¨å†ŒChannelæ—¶ï¼ŒChannel.register()æ–¹æ³•ä¼šè¿”å›ä¸€ä¸ªSelectionKey å¯¹è±¡ã€‚è¿™ä¸ªå¯¹è±¡ä»£è¡¨äº†æ³¨å†Œåˆ°è¯¥Selectorçš„é€šé“ã€‚å¯ä»¥é€šè¿‡SelectionKeyçš„selectedKeySet()æ–¹æ³•è®¿é—®è¿™äº›å¯¹è±¡ã€‚ å¯ä»¥éå†è¿™ä¸ªå·²é€‰æ‹©çš„é”®é›†åˆæ¥è®¿é—®å°±ç»ªçš„é€šé“ã€‚å¦‚ä¸‹ï¼š 123456789101112131415Set selectedKeys = selector.selectedKeys();Iterator keyIterator = selectedKeys.iterator();while(keyIterator.hasNext()) &#123; SelectionKey key = keyIterator.next(); if(key.isAcceptable()) &#123; // a connection was accepted by a ServerSocketChannel. &#125; else if (key.isConnectable()) &#123; // a connection was established with a remote server. &#125; else if (key.isReadable()) &#123; // a channel is ready for reading &#125; else if (key.isWritable()) &#123; // a channel is ready for writing &#125; keyIterator.remove();&#125; è¿™ä¸ªå¾ªç¯éå†å·²é€‰æ‹©é”®é›†ä¸­çš„æ¯ä¸ªé”®ï¼Œå¹¶æ£€æµ‹å„ä¸ªé”®æ‰€å¯¹åº”çš„é€šé“çš„å°±ç»ªäº‹ä»¶ã€‚ æ³¨æ„æ¯æ¬¡è¿­ä»£æœ«å°¾çš„keyIterator.remove()è°ƒç”¨ã€‚Selectorä¸ä¼šè‡ªå·±ä»å·²é€‰æ‹©é”®é›†ä¸­ç§»é™¤SelectionKeyå®ä¾‹ã€‚å¿…é¡»åœ¨å¤„ç†å®Œé€šé“æ—¶è‡ªå·±ç§»é™¤ã€‚ä¸‹æ¬¡è¯¥é€šé“å˜æˆå°±ç»ªæ—¶ï¼ŒSelectorä¼šå†æ¬¡å°†å…¶æ”¾å…¥å·²é€‰æ‹©é”®é›†ä¸­ã€‚ SelectionKey.channel()æ–¹æ³•è¿”å›çš„é€šé“éœ€è¦è½¬å‹æˆä½ è¦å¤„ç†çš„ç±»å‹ï¼Œå¦‚ServerSocketChannelæˆ–SocketChannelç­‰ã€‚ wakeUp()æŸä¸ªçº¿ç¨‹è°ƒç”¨select()æ–¹æ³•åé˜»å¡äº†ï¼Œå³ä½¿æ²¡æœ‰é€šé“å·²ç»å°±ç»ªï¼Œä¹Ÿæœ‰åŠæ³•è®©å…¶ä»select()æ–¹æ³•è¿”å›ã€‚åªè¦è®©å…¶å®ƒçº¿ç¨‹åœ¨ç¬¬ä¸€ä¸ªçº¿ç¨‹è°ƒç”¨select()æ–¹æ³•çš„é‚£ä¸ªå¯¹è±¡ä¸Šè°ƒç”¨Selector.wakeup()æ–¹æ³•å³å¯ã€‚é˜»å¡åœ¨select()æ–¹æ³•ä¸Šçš„çº¿ç¨‹ä¼šç«‹é©¬è¿”å›ã€‚ å¦‚æœæœ‰å…¶å®ƒçº¿ç¨‹è°ƒç”¨äº†wakeup()æ–¹æ³•ï¼Œä½†å½“å‰æ²¡æœ‰çº¿ç¨‹é˜»å¡åœ¨select()æ–¹æ³•ä¸Šï¼Œä¸‹ä¸ªè°ƒç”¨select()æ–¹æ³•çš„çº¿ç¨‹ä¼šç«‹å³â€œé†’æ¥ï¼ˆwake upï¼‰â€ã€‚ close()ç”¨å®ŒSelectoråè°ƒç”¨å…¶close()æ–¹æ³•ä¼šå…³é—­è¯¥Selectorï¼Œä¸”ä½¿æ³¨å†Œåˆ°è¯¥Selectorä¸Šçš„æ‰€æœ‰SelectionKeyå®ä¾‹æ— æ•ˆã€‚é€šé“æœ¬èº«å¹¶ä¸ä¼šå…³é—­ã€‚ å®Œæ•´çš„ç¤ºä¾‹è¿™é‡Œæœ‰ä¸€ä¸ªå®Œæ•´çš„ç¤ºä¾‹ï¼Œæ‰“å¼€ä¸€ä¸ªSelectorï¼Œæ³¨å†Œä¸€ä¸ªé€šé“æ³¨å†Œåˆ°è¿™ä¸ªSelectorä¸Š(é€šé“çš„åˆå§‹åŒ–è¿‡ç¨‹ç•¥å»),ç„¶åæŒç»­ç›‘æ§è¿™ä¸ªSelectorçš„å››ç§äº‹ä»¶ï¼ˆæ¥å—ï¼Œè¿æ¥ï¼Œè¯»ï¼Œå†™ï¼‰æ˜¯å¦å°±ç»ªã€‚ 12345678910111213141516171819202122Selector selector = Selector.open();channel.configureBlocking(false);SelectionKey key = channel.register(selector, SelectionKey.OP_READ);while(true) &#123; int readyChannels = selector.select(); if(readyChannels == 0) continue; Set selectedKeys = selector.selectedKeys(); Iterator keyIterator = selectedKeys.iterator(); while(keyIterator.hasNext()) &#123; SelectionKey key = keyIterator.next(); if(key.isAcceptable()) &#123; // a connection was accepted by a ServerSocketChannel. &#125; else if (key.isConnectable()) &#123; // a connection was established with a remote server. &#125; else if (key.isReadable()) &#123; // a channel is ready for reading &#125; else if (key.isWritable()) &#123; // a channel is ready for writing &#125; keyIterator.remove(); &#125;&#125; 7ã€FileChannelJava NIOä¸­çš„FileChannelæ˜¯ä¸€ä¸ªè¿æ¥åˆ°æ–‡ä»¶çš„é€šé“ã€‚å¯ä»¥é€šè¿‡æ–‡ä»¶é€šé“è¯»å†™æ–‡ä»¶ã€‚ FileChannelæ— æ³•è®¾ç½®ä¸ºéé˜»å¡æ¨¡å¼ï¼Œå®ƒæ€»æ˜¯è¿è¡Œåœ¨é˜»å¡æ¨¡å¼ä¸‹ã€‚ æ‰“å¼€FileChannelåœ¨ä½¿ç”¨FileChannelä¹‹å‰ï¼Œå¿…é¡»å…ˆæ‰“å¼€å®ƒã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬æ— æ³•ç›´æ¥æ‰“å¼€ä¸€ä¸ªFileChannelï¼Œéœ€è¦é€šè¿‡ä½¿ç”¨ä¸€ä¸ªInputStreamã€OutputStreamæˆ–RandomAccessFileæ¥è·å–ä¸€ä¸ªFileChannelå®ä¾‹ã€‚ä¸‹é¢æ˜¯é€šè¿‡RandomAccessFileæ‰“å¼€FileChannelçš„ç¤ºä¾‹ï¼š 12RandomAccessFile aFile = new RandomAccessFile(&quot;data/nio-data.txt&quot;, &quot;rw&quot;);FileChannel inChannel = aFile.getChannel(); ä»FileChannelè¯»å–æ•°æ®è°ƒç”¨å¤šä¸ªread()æ–¹æ³•ä¹‹ä¸€ä»FileChannelä¸­è¯»å–æ•°æ®ã€‚å¦‚ï¼š 12ByteBuffer buf = ByteBuffer.allocate(48);int bytesRead = inChannel.read(buf); é¦–å…ˆï¼Œåˆ†é…ä¸€ä¸ªBufferã€‚ä»FileChannelä¸­è¯»å–çš„æ•°æ®å°†è¢«è¯»åˆ°Bufferä¸­ã€‚ ç„¶åï¼Œè°ƒç”¨FileChannel.read()æ–¹æ³•ã€‚è¯¥æ–¹æ³•å°†æ•°æ®ä»FileChannelè¯»å–åˆ°Bufferä¸­ã€‚read()æ–¹æ³•è¿”å›çš„intå€¼è¡¨ç¤ºäº†æœ‰å¤šå°‘å­—èŠ‚è¢«è¯»åˆ°äº†Bufferä¸­ã€‚å¦‚æœè¿”å›-1ï¼Œè¡¨ç¤ºåˆ°äº†æ–‡ä»¶æœ«å°¾ã€‚ å‘FileChannelå†™æ•°æ®ä½¿ç”¨FileChannel.write()æ–¹æ³•å‘FileChannelå†™æ•°æ®ï¼Œè¯¥æ–¹æ³•çš„å‚æ•°æ˜¯ä¸€ä¸ªBufferã€‚å¦‚ï¼š 1234567891011String newData = &quot;New String to write to file...&quot; + System.currentTimeMillis();ByteBuffer buf = ByteBuffer.allocate(48);buf.clear();buf.put(newData.getBytes());buf.flip();while(buf.hasRemaining()) &#123; channel.write(buf);&#125; æ³¨æ„FileChannel.write()æ˜¯åœ¨whileå¾ªç¯ä¸­è°ƒç”¨çš„ã€‚å› ä¸ºæ— æ³•ä¿è¯write()æ–¹æ³•ä¸€æ¬¡èƒ½å‘FileChannelå†™å…¥å¤šå°‘å­—èŠ‚ï¼Œå› æ­¤éœ€è¦é‡å¤è°ƒç”¨write()æ–¹æ³•ï¼Œç›´åˆ°Bufferä¸­å·²ç»æ²¡æœ‰å°šæœªå†™å…¥é€šé“çš„å­—èŠ‚ã€‚ å…³é—­FileChannelç”¨å®ŒFileChannelåå¿…é¡»å°†å…¶å…³é—­ã€‚å¦‚ï¼š1channel.close(); FileChannelçš„positionæ–¹æ³•æœ‰æ—¶å¯èƒ½éœ€è¦åœ¨FileChannelçš„æŸä¸ªç‰¹å®šä½ç½®è¿›è¡Œæ•°æ®çš„è¯»/å†™æ“ä½œã€‚å¯ä»¥é€šè¿‡è°ƒç”¨position()æ–¹æ³•è·å–FileChannelçš„å½“å‰ä½ç½®ã€‚ ä¹Ÿå¯ä»¥é€šè¿‡è°ƒç”¨position(long pos)æ–¹æ³•è®¾ç½®FileChannelçš„å½“å‰ä½ç½®ã€‚ è¿™é‡Œæœ‰ä¸¤ä¸ªä¾‹å­:12long pos = channel.position();channel.position(pos +123); å¦‚æœå°†ä½ç½®è®¾ç½®åœ¨æ–‡ä»¶ç»“æŸç¬¦ä¹‹åï¼Œç„¶åè¯•å›¾ä»æ–‡ä»¶é€šé“ä¸­è¯»å–æ•°æ®ï¼Œè¯»æ–¹æ³•å°†è¿”å›-1 â€”â€” æ–‡ä»¶ç»“æŸæ ‡å¿—ã€‚ å¦‚æœå°†ä½ç½®è®¾ç½®åœ¨æ–‡ä»¶ç»“æŸç¬¦ä¹‹åï¼Œç„¶åå‘é€šé“ä¸­å†™æ•°æ®ï¼Œæ–‡ä»¶å°†æ’‘å¤§åˆ°å½“å‰ä½ç½®å¹¶å†™å…¥æ•°æ®ã€‚è¿™å¯èƒ½å¯¼è‡´â€œæ–‡ä»¶ç©ºæ´â€ï¼Œç£ç›˜ä¸Šç‰©ç†æ–‡ä»¶ä¸­å†™å…¥çš„æ•°æ®é—´æœ‰ç©ºéš™ã€‚ FileChannelçš„sizeæ–¹æ³•FileChannelå®ä¾‹çš„size()æ–¹æ³•å°†è¿”å›è¯¥å®ä¾‹æ‰€å…³è”æ–‡ä»¶çš„å¤§å°ã€‚å¦‚:1long fileSize = channel.size(); FileChannelçš„truncateæ–¹æ³•å¯ä»¥ä½¿ç”¨FileChannel.truncate()æ–¹æ³•æˆªå–ä¸€ä¸ªæ–‡ä»¶ã€‚æˆªå–æ–‡ä»¶æ—¶ï¼Œæ–‡ä»¶å°†ä¸­æŒ‡å®šé•¿åº¦åé¢çš„éƒ¨åˆ†å°†è¢«åˆ é™¤ã€‚å¦‚ï¼š1channel.truncate(1024); è¿™ä¸ªä¾‹å­æˆªå–æ–‡ä»¶çš„å‰1024ä¸ªå­—èŠ‚ã€‚ FileChannelçš„forceæ–¹æ³•FileChannel.force()æ–¹æ³•å°†é€šé“é‡Œå°šæœªå†™å…¥ç£ç›˜çš„æ•°æ®å¼ºåˆ¶å†™åˆ°ç£ç›˜ä¸Šã€‚å‡ºäºæ€§èƒ½æ–¹é¢çš„è€ƒè™‘ï¼Œæ“ä½œç³»ç»Ÿä¼šå°†æ•°æ®ç¼“å­˜åœ¨å†…å­˜ä¸­ï¼Œæ‰€ä»¥æ— æ³•ä¿è¯å†™å…¥åˆ°FileChannelé‡Œçš„æ•°æ®ä¸€å®šä¼šå³æ—¶å†™åˆ°ç£ç›˜ä¸Šã€‚è¦ä¿è¯è¿™ä¸€ç‚¹ï¼Œéœ€è¦è°ƒç”¨force()æ–¹æ³•ã€‚ force()æ–¹æ³•æœ‰ä¸€ä¸ªbooleanç±»å‹çš„å‚æ•°ï¼ŒæŒ‡æ˜æ˜¯å¦åŒæ—¶å°†æ–‡ä»¶å…ƒæ•°æ®ï¼ˆæƒé™ä¿¡æ¯ç­‰ï¼‰å†™åˆ°ç£ç›˜ä¸Šã€‚ ä¸‹é¢çš„ä¾‹å­åŒæ—¶å°†æ–‡ä»¶æ•°æ®å’Œå…ƒæ•°æ®å¼ºåˆ¶å†™åˆ°ç£ç›˜ä¸Šï¼š æŸ¥çœ‹æºä»£ç æ‰“å°å¸®åŠ©1channel.force(true); 8ã€SocketChannelJava NIOä¸­çš„SocketChannelæ˜¯ä¸€ä¸ªè¿æ¥åˆ°TCPç½‘ç»œå¥—æ¥å­—çš„é€šé“ã€‚å¯ä»¥é€šè¿‡ä»¥ä¸‹2ç§æ–¹å¼åˆ›å»ºSocketChannelï¼š æ‰“å¼€ä¸€ä¸ªSocketChannelå¹¶è¿æ¥åˆ°äº’è”ç½‘ä¸Šçš„æŸå°æœåŠ¡å™¨ã€‚ä¸€ä¸ªæ–°è¿æ¥åˆ°è¾¾ServerSocketChannelæ—¶ï¼Œä¼šåˆ›å»ºä¸€ä¸ªSocketChannelã€‚ æ‰“å¼€ SocketChannelä¸‹é¢æ˜¯SocketChannelçš„æ‰“å¼€æ–¹å¼ï¼š 12SocketChannel socketChannel = SocketChannel.open();socketChannel.connect(new InetSocketAddress(&quot;http://jenkov.com&quot;, 80)); å…³é—­ SocketChannel å½“ç”¨å®ŒSocketChannelä¹‹åè°ƒç”¨SocketChannel.close()å…³é—­SocketChannelï¼š 1socketChannel.close(); ä» SocketChannel è¯»å–æ•°æ®è¦ä»SocketChannelä¸­è¯»å–æ•°æ®ï¼Œè°ƒç”¨ä¸€ä¸ªread()çš„æ–¹æ³•ä¹‹ä¸€ã€‚ä»¥ä¸‹æ˜¯ä¾‹å­ï¼š 12ByteBuffer buf = ByteBuffer.allocate(48);int bytesRead = socketChannel.read(buf); é¦–å…ˆï¼Œåˆ†é…ä¸€ä¸ªBufferã€‚ä»SocketChannelè¯»å–åˆ°çš„æ•°æ®å°†ä¼šæ”¾åˆ°è¿™ä¸ªBufferä¸­ã€‚ ç„¶åï¼Œè°ƒç”¨SocketChannel.read()ã€‚è¯¥æ–¹æ³•å°†æ•°æ®ä»SocketChannel è¯»åˆ°Bufferä¸­ã€‚read()æ–¹æ³•è¿”å›çš„intå€¼è¡¨ç¤ºè¯»äº†å¤šå°‘å­—èŠ‚è¿›Bufferé‡Œã€‚å¦‚æœè¿”å›çš„æ˜¯-1ï¼Œè¡¨ç¤ºå·²ç»è¯»åˆ°äº†æµçš„æœ«å°¾ï¼ˆè¿æ¥å…³é—­äº†ï¼‰ã€‚ å†™å…¥ SocketChannelå†™æ•°æ®åˆ°SocketChannelç”¨çš„æ˜¯SocketChannel.write()æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä»¥ä¸€ä¸ªBufferä½œä¸ºå‚æ•°ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567891011String newData = &quot;New String to write to file...&quot; + System.currentTimeMillis();ByteBuffer buf = ByteBuffer.allocate(48);buf.clear();buf.put(newData.getBytes());buf.flip();while(buf.hasRemaining()) &#123; channel.write(buf);&#125; æ³¨æ„SocketChannel.write()æ–¹æ³•çš„è°ƒç”¨æ˜¯åœ¨ä¸€ä¸ªwhileå¾ªç¯ä¸­çš„ã€‚Write()æ–¹æ³•æ— æ³•ä¿è¯èƒ½å†™å¤šå°‘å­—èŠ‚åˆ°SocketChannelã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬é‡å¤è°ƒç”¨write()ç›´åˆ°Bufferæ²¡æœ‰è¦å†™çš„å­—èŠ‚ä¸ºæ­¢ã€‚ éé˜»å¡æ¨¡å¼å¯ä»¥è®¾ç½® SocketChannel ä¸ºéé˜»å¡æ¨¡å¼ï¼ˆnon-blocking modeï¼‰.è®¾ç½®ä¹‹åï¼Œå°±å¯ä»¥åœ¨å¼‚æ­¥æ¨¡å¼ä¸‹è°ƒç”¨connect(), read() å’Œwrite()äº†ã€‚ connect()å¦‚æœSocketChannelåœ¨éé˜»å¡æ¨¡å¼ä¸‹ï¼Œæ­¤æ—¶è°ƒç”¨connect()ï¼Œè¯¥æ–¹æ³•å¯èƒ½åœ¨è¿æ¥å»ºç«‹ä¹‹å‰å°±è¿”å›äº†ã€‚ä¸ºäº†ç¡®å®šè¿æ¥æ˜¯å¦å»ºç«‹ï¼Œå¯ä»¥è°ƒç”¨finishConnect()çš„æ–¹æ³•ã€‚åƒè¿™æ ·ï¼š 123456socketChannel.configureBlocking(false);socketChannel.connect(new InetSocketAddress(&quot;http://jenkov.com&quot;, 80));while(! socketChannel.finishConnect() )&#123; //wait, or do something else...&#125; write()éé˜»å¡æ¨¡å¼ä¸‹ï¼Œwrite()æ–¹æ³•åœ¨å°šæœªå†™å‡ºä»»ä½•å†…å®¹æ—¶å¯èƒ½å°±è¿”å›äº†ã€‚æ‰€ä»¥éœ€è¦åœ¨å¾ªç¯ä¸­è°ƒç”¨write()ã€‚å‰é¢å·²ç»æœ‰ä¾‹å­äº†ï¼Œè¿™é‡Œå°±ä¸èµ˜è¿°äº†ã€‚ read()éé˜»å¡æ¨¡å¼ä¸‹,read()æ–¹æ³•åœ¨å°šæœªè¯»å–åˆ°ä»»ä½•æ•°æ®æ—¶å¯èƒ½å°±è¿”å›äº†ã€‚æ‰€ä»¥éœ€è¦å…³æ³¨å®ƒçš„intè¿”å›å€¼ï¼Œå®ƒä¼šå‘Šè¯‰ä½ è¯»å–äº†å¤šå°‘å­—èŠ‚ã€‚ éé˜»å¡æ¨¡å¼ä¸é€‰æ‹©å™¨éé˜»å¡æ¨¡å¼ä¸é€‰æ‹©å™¨æ­é…ä¼šå·¥ä½œçš„æ›´å¥½ï¼Œé€šè¿‡å°†ä¸€æˆ–å¤šä¸ªSocketChannelæ³¨å†Œåˆ°Selectorï¼Œå¯ä»¥è¯¢é—®é€‰æ‹©å™¨å“ªä¸ªé€šé“å·²ç»å‡†å¤‡å¥½äº†è¯»å–ï¼Œå†™å…¥ç­‰ã€‚Selectorä¸SocketChannelçš„æ­é…ä½¿ç”¨ä¼šåœ¨åé¢è¯¦è®²ã€‚ 9ã€ServerSocketChannelJava NIOä¸­çš„ ServerSocketChannel æ˜¯ä¸€ä¸ªå¯ä»¥ç›‘å¬æ–°è¿›æ¥çš„TCPè¿æ¥çš„é€šé“, å°±åƒæ ‡å‡†IOä¸­çš„ServerSocketä¸€æ ·ã€‚ServerSocketChannelç±»åœ¨ java.nio.channelsåŒ…ä¸­ã€‚ è¿™é‡Œæœ‰ä¸ªä¾‹å­ï¼š 12345678910ServerSocketChannel serverSocketChannel = ServerSocketChannel.open();serverSocketChannel.socket().bind(new InetSocketAddress(9999));while(true)&#123; SocketChannel socketChannel = serverSocketChannel.accept(); //do something with socketChannel...&#125; æ‰“å¼€ ServerSocketChannelé€šè¿‡è°ƒç”¨ ServerSocketChannel.open() æ–¹æ³•æ¥æ‰“å¼€ServerSocketChannel.å¦‚ï¼š 1ServerSocketChannel serverSocketChannel = ServerSocketChannel.open(); å…³é—­ ServerSocketChannelé€šè¿‡è°ƒç”¨ServerSocketChannel.close() æ–¹æ³•æ¥å…³é—­ServerSocketChannel. å¦‚ï¼š 1serverSocketChannel.close(); ç›‘å¬æ–°è¿›æ¥çš„è¿æ¥é€šè¿‡ ServerSocketChannel.accept() æ–¹æ³•ç›‘å¬æ–°è¿›æ¥çš„è¿æ¥ã€‚å½“ accept()æ–¹æ³•è¿”å›çš„æ—¶å€™,å®ƒè¿”å›ä¸€ä¸ªåŒ…å«æ–°è¿›æ¥çš„è¿æ¥çš„ SocketChannelã€‚å› æ­¤, accept()æ–¹æ³•ä¼šä¸€ç›´é˜»å¡åˆ°æœ‰æ–°è¿æ¥åˆ°è¾¾ã€‚ é€šå¸¸ä¸ä¼šä»…ä»…åªç›‘å¬ä¸€ä¸ªè¿æ¥,åœ¨whileå¾ªç¯ä¸­è°ƒç”¨ accept()æ–¹æ³•. å¦‚ä¸‹é¢çš„ä¾‹å­ï¼š 123456while(true)&#123; SocketChannel socketChannel = serverSocketChannel.accept(); //do something with socketChannel...&#125; å½“ç„¶,ä¹Ÿå¯ä»¥åœ¨whileå¾ªç¯ä¸­ä½¿ç”¨é™¤äº†trueä»¥å¤–çš„å…¶å®ƒé€€å‡ºå‡†åˆ™ã€‚ éé˜»å¡æ¨¡å¼ServerSocketChannelå¯ä»¥è®¾ç½®æˆéé˜»å¡æ¨¡å¼ã€‚åœ¨éé˜»å¡æ¨¡å¼ä¸‹ï¼Œaccept() æ–¹æ³•ä¼šç«‹åˆ»è¿”å›ï¼Œå¦‚æœè¿˜æ²¡æœ‰æ–°è¿›æ¥çš„è¿æ¥,è¿”å›çš„å°†æ˜¯nullã€‚ å› æ­¤ï¼Œéœ€è¦æ£€æŸ¥è¿”å›çš„SocketChannelæ˜¯å¦æ˜¯null.å¦‚ï¼š 12345678910111213ServerSocketChannel serverSocketChannel = ServerSocketChannel.open();serverSocketChannel.socket().bind(new InetSocketAddress(9999));serverSocketChannel.configureBlocking(false);while(true)&#123; SocketChannel socketChannel = serverSocketChannel.accept(); if(socketChannel != null)&#123; //do something with socketChannel... &#125;&#125; 10ã€Java NIO DatagramChannelJava NIOä¸­çš„DatagramChannelæ˜¯ä¸€ä¸ªèƒ½æ”¶å‘UDPåŒ…çš„é€šé“ã€‚å› ä¸ºUDPæ˜¯æ— è¿æ¥çš„ç½‘ç»œåè®®ï¼Œæ‰€ä»¥ä¸èƒ½åƒå…¶å®ƒé€šé“é‚£æ ·è¯»å–å’Œå†™å…¥ã€‚å®ƒå‘é€å’Œæ¥æ”¶çš„æ˜¯æ•°æ®åŒ…ã€‚ æ‰“å¼€ DatagramChannelä¸‹é¢æ˜¯ DatagramChannel çš„æ‰“å¼€æ–¹å¼ï¼š 12DatagramChannel channel = DatagramChannel.open();channel.socket().bind(new InetSocketAddress(9999)); è¿™ä¸ªä¾‹å­æ‰“å¼€çš„ DatagramChannelå¯ä»¥åœ¨UDPç«¯å£9999ä¸Šæ¥æ”¶æ•°æ®åŒ…ã€‚ æ¥æ”¶æ•°æ®é€šè¿‡receive()æ–¹æ³•ä»DatagramChannelæ¥æ”¶æ•°æ®ï¼Œå¦‚ï¼š 123ByteBuffer buf = ByteBuffer.allocate(48);buf.clear();channel.receive(buf); receive()æ–¹æ³•ä¼šå°†æ¥æ”¶åˆ°çš„æ•°æ®åŒ…å†…å®¹å¤åˆ¶åˆ°æŒ‡å®šçš„Buffer. å¦‚æœBufferå®¹ä¸ä¸‹æ”¶åˆ°çš„æ•°æ®ï¼Œå¤šå‡ºçš„æ•°æ®å°†è¢«ä¸¢å¼ƒã€‚ å‘é€æ•°æ®é€šè¿‡send()æ–¹æ³•ä»DatagramChannelå‘é€æ•°æ®ï¼Œå¦‚: 12345678String newData = &quot;New String to write to file...&quot; + System.currentTimeMillis();ByteBuffer buf = ByteBuffer.allocate(48);buf.clear();buf.put(newData.getBytes());buf.flip();int bytesSent = channel.send(buf, new InetSocketAddress(&quot;jenkov.com&quot;, 80)); è¿™ä¸ªä¾‹å­å‘é€ä¸€ä¸²å­—ç¬¦åˆ°â€jenkov.comâ€æœåŠ¡å™¨çš„UDPç«¯å£80ã€‚ å› ä¸ºæœåŠ¡ç«¯å¹¶æ²¡æœ‰ç›‘æ§è¿™ä¸ªç«¯å£ï¼Œæ‰€ä»¥ä»€ä¹ˆä¹Ÿä¸ä¼šå‘ç”Ÿã€‚ä¹Ÿä¸ä¼šé€šçŸ¥ä½ å‘å‡ºçš„æ•°æ®åŒ…æ˜¯å¦å·²æ”¶åˆ°ï¼Œå› ä¸ºUDPåœ¨æ•°æ®ä¼ é€æ–¹é¢æ²¡æœ‰ä»»ä½•ä¿è¯ã€‚ è¿æ¥åˆ°ç‰¹å®šçš„åœ°å€å¯ä»¥å°†DatagramChannelâ€œè¿æ¥â€åˆ°ç½‘ç»œä¸­çš„ç‰¹å®šåœ°å€çš„ã€‚ç”±äºUDPæ˜¯æ— è¿æ¥çš„ï¼Œè¿æ¥åˆ°ç‰¹å®šåœ°å€å¹¶ä¸ä¼šåƒTCPé€šé“é‚£æ ·åˆ›å»ºä¸€ä¸ªçœŸæ­£çš„è¿æ¥ã€‚è€Œæ˜¯é”ä½DatagramChannel ï¼Œè®©å…¶åªèƒ½ä»ç‰¹å®šåœ°å€æ”¶å‘æ•°æ®ã€‚ è¿™é‡Œæœ‰ä¸ªä¾‹å­: 1channel.connect(new InetSocketAddress(&quot;jenkov.com&quot;, 80)); å½“è¿æ¥åï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨read()å’Œwrite()æ–¹æ³•ï¼Œå°±åƒåœ¨ç”¨ä¼ ç»Ÿçš„é€šé“ä¸€æ ·ã€‚åªæ˜¯åœ¨æ•°æ®ä¼ é€æ–¹é¢æ²¡æœ‰ä»»ä½•ä¿è¯ã€‚è¿™é‡Œæœ‰å‡ ä¸ªä¾‹å­ï¼š 12int bytesRead = channel.read(buf);int bytesWritten = channel.write(but); 11ã€PipeJava NIO ç®¡é“æ˜¯2ä¸ªçº¿ç¨‹ä¹‹é—´çš„å•å‘æ•°æ®è¿æ¥ã€‚Pipeæœ‰ä¸€ä¸ªsourceé€šé“å’Œä¸€ä¸ªsinké€šé“ã€‚æ•°æ®ä¼šè¢«å†™åˆ°sinké€šé“ï¼Œä»sourceé€šé“è¯»å–ã€‚ è¿™é‡Œæ˜¯PipeåŸç†çš„å›¾ç¤ºï¼š åˆ›å»ºç®¡é“é€šè¿‡Pipe.open()æ–¹æ³•æ‰“å¼€ç®¡é“ã€‚ä¾‹å¦‚ï¼š 1Pipe pipe = Pipe.open(); å‘ç®¡é“å†™æ•°æ®è¦å‘ç®¡é“å†™æ•°æ®ï¼Œéœ€è¦è®¿é—®sinké€šé“ã€‚åƒè¿™æ ·ï¼š 1Pipe.SinkChannel sinkChannel = pipe.sink(); é€šè¿‡è°ƒç”¨SinkChannelçš„write()æ–¹æ³•ï¼Œå°†æ•°æ®å†™å…¥SinkChannel,åƒè¿™æ ·ï¼š 12345678910String newData = &quot;New String to write to file...&quot; + System.currentTimeMillis();ByteBuffer buf = ByteBuffer.allocate(48);buf.clear();buf.put(newData.getBytes());buf.flip();while(buf.hasRemaining()) &#123; sinkChannel.write(buf);&#125; ä»ç®¡é“è¯»å–æ•°æ®ä»è¯»å–ç®¡é“çš„æ•°æ®ï¼Œéœ€è¦è®¿é—®sourceé€šé“ï¼Œåƒè¿™æ ·ï¼š 1Pipe.SourceChannel sourceChannel = pipe.source(); è°ƒç”¨sourceé€šé“çš„read()æ–¹æ³•æ¥è¯»å–æ•°æ®ï¼Œåƒè¿™æ ·ï¼š 123ByteBuffer buf = ByteBuffer.allocate(48);int bytesRead = sourceChannel.read(buf); read()æ–¹æ³•è¿”å›çš„intå€¼ä¼šå‘Šè¯‰æˆ‘ä»¬å¤šå°‘å­—èŠ‚è¢«è¯»è¿›äº†ç¼“å†²åŒºã€‚ 12ã€Java NIOä¸IOçš„å¯¹æ¯”å½“å­¦ä¹ äº†Java NIOå’ŒIOçš„APIåï¼Œä¸€ä¸ªé—®é¢˜é©¬ä¸Šæ¶Œå…¥è„‘æµ·ï¼š æˆ‘åº”è¯¥ä½•æ—¶ä½¿ç”¨IOï¼Œä½•æ—¶ä½¿ç”¨NIOå‘¢ï¼Ÿåœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä¼šå°½é‡æ¸…æ™°åœ°è§£æJava NIOå’ŒIOçš„å·®å¼‚ã€å®ƒä»¬çš„ä½¿ç”¨åœºæ™¯ï¼Œä»¥åŠå®ƒä»¬å¦‚ä½•å½±å“æ‚¨çš„ä»£ç è®¾è®¡ã€‚ Java NIOå’ŒIOçš„ä¸»è¦åŒºåˆ«ä¸‹è¡¨æ€»ç»“äº†Java NIOå’ŒIOä¹‹é—´çš„ä¸»è¦å·®åˆ«ï¼Œæˆ‘ä¼šæ›´è¯¦ç»†åœ°æè¿°è¡¨ä¸­æ¯éƒ¨åˆ†çš„å·®å¼‚ã€‚ IO NIO Stream oriented Buffer oriented Blocking IO Non blocking IO æ—  Selectors é¢å‘æµä¸é¢å‘ç¼“å†²Java NIOå’ŒIOä¹‹é—´ç¬¬ä¸€ä¸ªæœ€å¤§çš„åŒºåˆ«æ˜¯ï¼ŒIOæ˜¯é¢å‘æµçš„ï¼ŒNIOæ˜¯é¢å‘ç¼“å†²åŒºçš„ã€‚ Java IOé¢å‘æµæ„å‘³ç€æ¯æ¬¡ä»æµä¸­è¯»ä¸€ä¸ªæˆ–å¤šä¸ªå­—èŠ‚ï¼Œç›´è‡³è¯»å–æ‰€æœ‰å­—èŠ‚ï¼Œå®ƒä»¬æ²¡æœ‰è¢«ç¼“å­˜åœ¨ä»»ä½•åœ°æ–¹ã€‚æ­¤å¤–ï¼Œå®ƒä¸èƒ½å‰åç§»åŠ¨æµä¸­çš„æ•°æ®ã€‚å¦‚æœéœ€è¦å‰åç§»åŠ¨ä»æµä¸­è¯»å–çš„æ•°æ®ï¼Œéœ€è¦å…ˆå°†å®ƒç¼“å­˜åˆ°ä¸€ä¸ªç¼“å†²åŒºã€‚ Java NIOçš„ç¼“å†²å¯¼å‘æ–¹æ³•ç•¥æœ‰ä¸åŒã€‚æ•°æ®è¯»å–åˆ°ä¸€ä¸ªå®ƒç¨åå¤„ç†çš„ç¼“å†²åŒºï¼Œéœ€è¦æ—¶å¯åœ¨ç¼“å†²åŒºä¸­å‰åç§»åŠ¨ã€‚è¿™å°±å¢åŠ äº†å¤„ç†è¿‡ç¨‹ä¸­çš„çµæ´»æ€§ã€‚ä½†æ˜¯ï¼Œè¿˜éœ€è¦æ£€æŸ¥æ˜¯å¦è¯¥ç¼“å†²åŒºä¸­åŒ…å«æ‰€æœ‰æ‚¨éœ€è¦å¤„ç†çš„æ•°æ®ã€‚è€Œä¸”ï¼Œéœ€ç¡®ä¿å½“æ›´å¤šçš„æ•°æ®è¯»å…¥ç¼“å†²åŒºæ—¶ï¼Œä¸è¦è¦†ç›–ç¼“å†²åŒºé‡Œå°šæœªå¤„ç†çš„æ•°æ®ã€‚ é˜»å¡ä¸éé˜»å¡IOJava IOçš„å„ç§æµæ˜¯é˜»å¡çš„ã€‚è¿™æ„å‘³ç€ï¼Œå½“ä¸€ä¸ªçº¿ç¨‹è°ƒç”¨read() æˆ– write()æ—¶ï¼Œè¯¥çº¿ç¨‹è¢«é˜»å¡ï¼Œç›´åˆ°æœ‰ä¸€äº›æ•°æ®è¢«è¯»å–ï¼Œæˆ–æ•°æ®å®Œå…¨å†™å…¥ã€‚è¯¥çº¿ç¨‹åœ¨æ­¤æœŸé—´ä¸èƒ½å†å¹²ä»»ä½•äº‹æƒ…äº†ã€‚ Java NIOçš„éé˜»å¡æ¨¡å¼ï¼Œä½¿ä¸€ä¸ªçº¿ç¨‹ä»æŸé€šé“å‘é€è¯·æ±‚è¯»å–æ•°æ®ï¼Œä½†æ˜¯å®ƒä»…èƒ½å¾—åˆ°ç›®å‰å¯ç”¨çš„æ•°æ®ï¼Œå¦‚æœç›®å‰æ²¡æœ‰æ•°æ®å¯ç”¨æ—¶ï¼Œå°±ä»€ä¹ˆéƒ½ä¸ä¼šè·å–ã€‚è€Œä¸æ˜¯ä¿æŒçº¿ç¨‹é˜»å¡ï¼Œæ‰€ä»¥ç›´è‡³æ•°æ®å˜çš„å¯ä»¥è¯»å–ä¹‹å‰ï¼Œè¯¥çº¿ç¨‹å¯ä»¥ç»§ç»­åšå…¶ä»–çš„äº‹æƒ…ã€‚ éé˜»å¡å†™ä¹Ÿæ˜¯å¦‚æ­¤ã€‚ä¸€ä¸ªçº¿ç¨‹è¯·æ±‚å†™å…¥ä¸€äº›æ•°æ®åˆ°æŸé€šé“ï¼Œä½†ä¸éœ€è¦ç­‰å¾…å®ƒå®Œå…¨å†™å…¥ï¼Œè¿™ä¸ªçº¿ç¨‹åŒæ—¶å¯ä»¥å»åšåˆ«çš„äº‹æƒ…ã€‚ çº¿ç¨‹é€šå¸¸å°†éé˜»å¡IOçš„ç©ºé—²æ—¶é—´ç”¨äºåœ¨å…¶å®ƒé€šé“ä¸Šæ‰§è¡ŒIOæ“ä½œï¼Œæ‰€ä»¥ä¸€ä¸ªå•ç‹¬çš„çº¿ç¨‹ç°åœ¨å¯ä»¥ç®¡ç†å¤šä¸ªè¾“å…¥å’Œè¾“å‡ºé€šé“ï¼ˆchannelï¼‰ã€‚ é€‰æ‹©å™¨ï¼ˆSelectorsï¼‰Java NIOçš„é€‰æ‹©å™¨å…è®¸ä¸€ä¸ªå•ç‹¬çš„çº¿ç¨‹æ¥ç›‘è§†å¤šä¸ªè¾“å…¥é€šé“ï¼Œä½ å¯ä»¥æ³¨å†Œå¤šä¸ªé€šé“ä½¿ç”¨ä¸€ä¸ªé€‰æ‹©å™¨ï¼Œç„¶åä½¿ç”¨ä¸€ä¸ªå•ç‹¬çš„çº¿ç¨‹æ¥â€œé€‰æ‹©â€é€šé“ï¼šè¿™äº›é€šé“é‡Œå·²ç»æœ‰å¯ä»¥å¤„ç†çš„è¾“å…¥ï¼Œæˆ–è€…é€‰æ‹©å·²å‡†å¤‡å†™å…¥çš„é€šé“ã€‚è¿™ç§é€‰æ‹©æœºåˆ¶ï¼Œä½¿å¾—ä¸€ä¸ªå•ç‹¬çš„çº¿ç¨‹å¾ˆå®¹æ˜“æ¥ç®¡ç†å¤šä¸ªé€šé“ã€‚ NIOå’ŒIOå¦‚ä½•å½±å“åº”ç”¨ç¨‹åºçš„è®¾è®¡æ— è®ºæ‚¨é€‰æ‹©IOæˆ–NIOå·¥å…·ç®±ï¼Œå¯èƒ½ä¼šå½±å“æ‚¨åº”ç”¨ç¨‹åºè®¾è®¡çš„ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š å¯¹NIOæˆ–IOç±»çš„APIè°ƒç”¨ã€‚ æ•°æ®å¤„ç†ã€‚ ç”¨æ¥å¤„ç†æ•°æ®çš„çº¿ç¨‹æ•°ã€‚ APIè°ƒç”¨å½“ç„¶ï¼Œä½¿ç”¨NIOçš„APIè°ƒç”¨æ—¶çœ‹èµ·æ¥ä¸ä½¿ç”¨IOæ—¶æœ‰æ‰€ä¸åŒï¼Œä½†è¿™å¹¶ä¸æ„å¤–ï¼Œå› ä¸ºå¹¶ä¸æ˜¯ä»…ä»ä¸€ä¸ªInputStreamé€å­—èŠ‚è¯»å–ï¼Œè€Œæ˜¯æ•°æ®å¿…é¡»å…ˆè¯»å…¥ç¼“å†²åŒºå†å¤„ç†ã€‚ æ•°æ®å¤„ç†ä½¿ç”¨çº¯ç²¹çš„NIOè®¾è®¡ç›¸è¾ƒIOè®¾è®¡ï¼Œæ•°æ®å¤„ç†ä¹Ÿå—åˆ°å½±å“ã€‚ åœ¨IOè®¾è®¡ä¸­ï¼Œæˆ‘ä»¬ä»InputStreamæˆ– Readeré€å­—èŠ‚è¯»å–æ•°æ®ã€‚å‡è®¾ä½ æ­£åœ¨å¤„ç†ä¸€åŸºäºè¡Œçš„æ–‡æœ¬æ•°æ®æµï¼Œä¾‹å¦‚ï¼š 1234Name: AnnaAge: 25Email: anna@mailserver.comPhone: 1234567890 è¯¥æ–‡æœ¬è¡Œçš„æµå¯ä»¥è¿™æ ·å¤„ç†ï¼š 1234567InputStream input = â€¦ ; // get the InputStream from the client socketBufferedReader reader = new BufferedReader(new InputStreamReader(input));String nameLine = reader.readLine();String ageLine = reader.readLine();String emailLine = reader.readLine();String phoneLine = reader.readLine(); è¯·æ³¨æ„å¤„ç†çŠ¶æ€ç”±ç¨‹åºæ‰§è¡Œå¤šä¹…å†³å®šã€‚æ¢å¥è¯è¯´ï¼Œä¸€æ—¦reader.readLine()æ–¹æ³•è¿”å›ï¼Œä½ å°±çŸ¥é“è‚¯å®šæ–‡æœ¬è¡Œå°±å·²è¯»å®Œï¼Œ readline()é˜»å¡ç›´åˆ°æ•´è¡Œè¯»å®Œï¼Œè¿™å°±æ˜¯åŸå› ã€‚ä½ ä¹ŸçŸ¥é“æ­¤è¡ŒåŒ…å«åç§°ï¼›åŒæ ·ï¼Œç¬¬äºŒä¸ªreadline()è°ƒç”¨è¿”å›çš„æ—¶å€™ï¼Œä½ çŸ¥é“è¿™è¡ŒåŒ…å«å¹´é¾„ç­‰ã€‚ æ­£å¦‚ä½ å¯ä»¥çœ‹åˆ°ï¼Œè¯¥å¤„ç†ç¨‹åºä»…åœ¨æœ‰æ–°æ•°æ®è¯»å…¥æ—¶è¿è¡Œï¼Œå¹¶çŸ¥é“æ¯æ­¥çš„æ•°æ®æ˜¯ä»€ä¹ˆã€‚ä¸€æ—¦æ­£åœ¨è¿è¡Œçš„çº¿ç¨‹å·²å¤„ç†è¿‡è¯»å…¥çš„æŸäº›æ•°æ®ï¼Œè¯¥çº¿ç¨‹ä¸ä¼šå†å›é€€æ•°æ®ï¼ˆå¤§å¤šå¦‚æ­¤ï¼‰ã€‚ä¸‹å›¾ä¹Ÿè¯´æ˜äº†è¿™æ¡åŸåˆ™ï¼š ä¸Šå›¾ï¼šä»ä¸€ä¸ªé˜»å¡çš„æµä¸­è¯»æ•°æ® è€Œä¸€ä¸ªNIOçš„å®ç°ä¼šæœ‰æ‰€ä¸åŒï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š 123ByteBuffer buffer = ByteBuffer.allocate(48);int bytesRead = inChannel.read(buffer); æ³¨æ„ç¬¬äºŒè¡Œï¼Œä»é€šé“è¯»å–å­—èŠ‚åˆ°ByteBufferã€‚å½“è¿™ä¸ªæ–¹æ³•è°ƒç”¨è¿”å›æ—¶ï¼Œä½ ä¸çŸ¥é“ä½ æ‰€éœ€çš„æ‰€æœ‰æ•°æ®æ˜¯å¦åœ¨ç¼“å†²åŒºå†…ã€‚ä½ æ‰€çŸ¥é“çš„æ˜¯ï¼Œè¯¥ç¼“å†²åŒºåŒ…å«ä¸€äº›å­—èŠ‚ï¼Œè¿™ä½¿å¾—å¤„ç†æœ‰ç‚¹å›°éš¾ã€‚å‡è®¾ç¬¬ä¸€æ¬¡ read(buffer)è°ƒç”¨åï¼Œè¯»å…¥ç¼“å†²åŒºçš„æ•°æ®åªæœ‰åŠè¡Œï¼Œä¾‹å¦‚ï¼Œâ€œName:Anâ€ï¼Œä½ èƒ½å¤„ç†æ•°æ®å—ï¼Ÿæ˜¾ç„¶ä¸èƒ½ï¼Œéœ€è¦ç­‰å¾…ï¼Œç›´åˆ°æ•´è¡Œæ•°æ®è¯»å…¥ç¼“å­˜ï¼Œåœ¨æ­¤ä¹‹å‰ï¼Œå¯¹æ•°æ®çš„ä»»ä½•å¤„ç†æ¯«æ— æ„ä¹‰ã€‚ æ‰€ä»¥ï¼Œä½ æ€ä¹ˆçŸ¥é“æ˜¯å¦è¯¥ç¼“å†²åŒºåŒ…å«è¶³å¤Ÿçš„æ•°æ®å¯ä»¥å¤„ç†å‘¢ï¼Ÿå¥½äº†ï¼Œä½ ä¸çŸ¥é“ã€‚å‘ç°çš„æ–¹æ³•åªèƒ½æŸ¥çœ‹ç¼“å†²åŒºä¸­çš„æ•°æ®ã€‚å…¶ç»“æœæ˜¯ï¼Œåœ¨ä½ çŸ¥é“æ‰€æœ‰æ•°æ®éƒ½åœ¨ç¼“å†²åŒºé‡Œä¹‹å‰ï¼Œä½ å¿…é¡»æ£€æŸ¥å‡ æ¬¡ç¼“å†²åŒºçš„æ•°æ®ã€‚è¿™ä¸ä»…æ•ˆç‡ä½ä¸‹ï¼Œè€Œä¸”å¯ä»¥ä½¿ç¨‹åºè®¾è®¡æ–¹æ¡ˆæ‚ä¹±ä¸å ªã€‚ä¾‹å¦‚ï¼š 12345ByteBuffer buffer = ByteBuffer.allocate(48);int bytesRead = inChannel.read(buffer);while(! bufferFull(bytesRead) ) &#123;bytesRead = inChannel.read(buffer);&#125; bufferFull()æ–¹æ³•å¿…é¡»è·Ÿè¸ªæœ‰å¤šå°‘æ•°æ®è¯»å…¥ç¼“å†²åŒºï¼Œå¹¶è¿”å›çœŸæˆ–å‡ï¼Œè¿™å–å†³äºç¼“å†²åŒºæ˜¯å¦å·²æ»¡ã€‚æ¢å¥è¯è¯´ï¼Œå¦‚æœç¼“å†²åŒºå‡†å¤‡å¥½è¢«å¤„ç†ï¼Œé‚£ä¹ˆè¡¨ç¤ºç¼“å†²åŒºæ»¡äº†ã€‚ bufferFull()æ–¹æ³•æ‰«æç¼“å†²åŒºï¼Œä½†å¿…é¡»ä¿æŒåœ¨bufferFullï¼ˆï¼‰æ–¹æ³•è¢«è°ƒç”¨ä¹‹å‰çŠ¶æ€ç›¸åŒã€‚å¦‚æœæ²¡æœ‰ï¼Œä¸‹ä¸€ä¸ªè¯»å…¥ç¼“å†²åŒºçš„æ•°æ®å¯èƒ½æ— æ³•è¯»åˆ°æ­£ç¡®çš„ä½ç½®ã€‚è¿™æ˜¯ä¸å¯èƒ½çš„ï¼Œä½†å´æ˜¯éœ€è¦æ³¨æ„çš„åˆä¸€é—®é¢˜ã€‚ å¦‚æœç¼“å†²åŒºå·²æ»¡ï¼Œå®ƒå¯ä»¥è¢«å¤„ç†ã€‚å¦‚æœå®ƒä¸æ»¡ï¼Œå¹¶ä¸”åœ¨ä½ çš„å®é™…æ¡ˆä¾‹ä¸­æœ‰æ„ä¹‰ï¼Œä½ æˆ–è®¸èƒ½å¤„ç†å…¶ä¸­çš„éƒ¨åˆ†æ•°æ®ã€‚ä½†æ˜¯è®¸å¤šæƒ…å†µä¸‹å¹¶éå¦‚æ­¤ã€‚ä¸‹å›¾å±•ç¤ºäº†â€œç¼“å†²åŒºæ•°æ®å¾ªç¯å°±ç»ªâ€ï¼š ä¸Šå›¾ï¼šä»ä¸€ä¸ªé€šé“é‡Œè¯»æ•°æ®ï¼Œç›´åˆ°æ‰€æœ‰çš„æ•°æ®éƒ½è¯»åˆ°ç¼“å†²åŒºé‡Œ æ€»ç»“NIOå¯è®©æ‚¨åªä½¿ç”¨ä¸€ä¸ªï¼ˆæˆ–å‡ ä¸ªï¼‰å•çº¿ç¨‹ç®¡ç†å¤šä¸ªé€šé“ï¼ˆç½‘ç»œè¿æ¥æˆ–æ–‡ä»¶ï¼‰ï¼Œä½†ä»˜å‡ºçš„ä»£ä»·æ˜¯è§£ææ•°æ®å¯èƒ½ä¼šæ¯”ä»ä¸€ä¸ªé˜»å¡æµä¸­è¯»å–æ•°æ®æ›´å¤æ‚ã€‚ å¦‚æœéœ€è¦ç®¡ç†åŒæ—¶æ‰“å¼€çš„æˆåƒä¸Šä¸‡ä¸ªè¿æ¥ï¼Œè¿™äº›è¿æ¥æ¯æ¬¡åªæ˜¯å‘é€å°‘é‡çš„æ•°æ®ï¼Œä¾‹å¦‚èŠå¤©æœåŠ¡å™¨ï¼Œå®ç°NIOçš„æœåŠ¡å™¨å¯èƒ½æ˜¯ä¸€ä¸ªä¼˜åŠ¿ã€‚åŒæ ·ï¼Œå¦‚æœä½ éœ€è¦ç»´æŒè®¸å¤šæ‰“å¼€çš„è¿æ¥åˆ°å…¶ä»–è®¡ç®—æœºä¸Šï¼Œå¦‚P2Pç½‘ç»œä¸­ï¼Œä½¿ç”¨ä¸€ä¸ªå•ç‹¬çš„çº¿ç¨‹æ¥ç®¡ç†ä½ æ‰€æœ‰å‡ºç«™è¿æ¥ï¼Œå¯èƒ½æ˜¯ä¸€ä¸ªä¼˜åŠ¿ã€‚ä¸€ä¸ªçº¿ç¨‹å¤šä¸ªè¿æ¥çš„è®¾è®¡æ–¹æ¡ˆå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ä¸Šå›¾ï¼šå•çº¿ç¨‹ç®¡ç†å¤šä¸ªè¿æ¥ å¦‚æœä½ æœ‰å°‘é‡çš„è¿æ¥ä½¿ç”¨éå¸¸é«˜çš„å¸¦å®½ï¼Œä¸€æ¬¡å‘é€å¤§é‡çš„æ•°æ®ï¼Œä¹Ÿè®¸å…¸å‹çš„IOæœåŠ¡å™¨å®ç°å¯èƒ½éå¸¸å¥‘åˆã€‚ä¸‹å›¾è¯´æ˜äº†ä¸€ä¸ªå…¸å‹çš„IOæœåŠ¡å™¨è®¾è®¡ï¼š ä¸Šå›¾ï¼šä¸€ä¸ªå…¸å‹çš„IOæœåŠ¡å™¨è®¾è®¡ï¼šä¸€ä¸ªè¿æ¥é€šè¿‡ä¸€ä¸ªçº¿ç¨‹å¤„ç† æ³¨æ˜ï¼šæ–‡ç« è½¬è½½è‡ª NIO|å¹¶å‘ç¼–ç¨‹ç½‘ï¼ŒäºŒæ¬¡è½¬è½½è¯·åŠ¡å¿…æ³¨æ˜åŸå‡ºå¤„ï¼","tags":[{"name":"Java","slug":"Java","permalink":"http://yoursite.com/tags/Java/"},{"name":"NIO","slug":"NIO","permalink":"http://yoursite.com/tags/NIO/"}]},{"title":"Javaè¿æ¥Oracleæ•°æ®åº“çš„ä¸‰ç§è¿æ¥æ–¹å¼","date":"2017-06-12T16:00:00.000Z","path":"2017/06/13/Javaè¿æ¥Oracleæ•°æ®åº“çš„ä¸‰ç§è¿æ¥æ–¹å¼/","text":"èƒŒæ™¯ï¼šè¿™ä¸¤å¤©åœ¨å­¦ä¹ Oracleæ•°æ®åº“ï¼Œè¿™é‡Œå°±æ€»ç»“ä¸‹è‡ªå·±ä¸Šè¯¾æ‰€å­¦çš„çŸ¥è¯†ï¼ŒåŒæ—¶è®°å½•ä¸‹æ¥ï¼Œæ–¹ä¾¿æ•´ç†å½“å¤©æ‰€å­¦ä¸‹çš„çŸ¥è¯†ï¼Œä¹ŸåŒæ—¶æ–¹ä¾¿æ—¥åè‡ªå·±æŸ¥è¯¢ã€‚ SQLè¯­å¥çš„è¯ï¼Œè¿™é‡Œæˆ‘å°±ä¸å¤šè®²äº†ï¼Œæ„Ÿè§‰å’Œå…¶ä»–çš„æ•°æ®åº“ï¼ˆMySQLã€SQL Serverï¼‰éƒ½æ˜¯ç±»ä¼¼ï¼ŒåŒºåˆ«ä¸å¤§ã€‚ ä»Šå¤©åœ¨è¿™é‡Œå°±å†™ä¸‹ Java è¿æ¥ Oracle æ•°æ®åº“çš„ä¸‰ç§è¿æ¥æ–¹å¼ã€‚ å·¥å…·ï¼š Oracle Database 10g Express Edition cmdå‘½ä»¤çª—å£ IDEA 2016.1.3 ojdbc6_g.jarï¼ˆæ•°æ®åº“é©±åŠ¨åŒ…ï¼‰ jdk 1.8 åˆ›å»ºæ•°æ®åº“è¡¨ï¼šé¦–å…ˆåœ¨æœ¬åœ°å†™å¥½åˆ›å»ºçš„æ•°æ®åº“è¡¨çš„åˆ›å»ºä»£ç åï¼Œç„¶åç²˜è´´åœ¨cmdå‘½ä»¤çª—å£ä¸‹ï¼Œå³å¯åˆ›å»ºæˆåŠŸã€‚ï¼ˆå‰ææ˜¯è¿›å…¥å®‰è£…å¥½äº†oracleï¼Œè¿›å…¥äº†ç”¨æˆ·ï¼Œç„¶ååœ¨å½“å‰ç”¨æˆ·ä¸‹åˆ›å»ºè¿™ä¸ªè¡¨ï¼‰ éƒ¨é—¨è¡¨ï¼štb1_dept ï¼ˆå«æœ‰id name cityä¸‰ä¸ªå±æ€§ï¼‰ 12345create table tb1_dept( id number(5) primary key, name varchar2(10) not null, city varchar2(10) not null); æ’å…¥æ•°æ®ï¼šç„¶ååŒæ ·å†™å¥½æ’å…¥æ•°æ®çš„sqlè¯­å¥ï¼Œè¿™é‡Œæˆ‘å°±å†™ä¸‰æ¡æ•°æ®ã€‚ 123insert into tb1_dept(id, name, city) values(1,&apos;java&apos;, &apos;å—æ˜Œ&apos;);insert into tb1_dept(id, name, city) values(2,&apos;c&apos;, &apos;ä¸Šæµ·&apos;);insert into tb1_dept(id, name, city) values(3,&apos;java&apos;, &apos;å—æ˜Œ&apos;); å¥½ï¼Œæ•°æ®åº“è¡¨å·²ç»åˆ›å»ºå¥½äº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦å‡†å¤‡çš„æ˜¯æ•°æ®åº“é©±åŠ¨åŒ…ã€‚ è¿™é‡Œæˆ‘ç”¨çš„æ˜¯ ojdbc6_g.jar é©±åŠ¨åŒ…ã€‚ æ¥ä¸‹æ¥å…ˆäº†è§£ä¸€äº›åŸºç¡€çŸ¥è¯†ï¼š JDBCçš„å…­å¤§æ­¥éª¤ï¼šè¿™é‡Œæˆ‘ä»¬å°±æŒ‰ç…§jdbcçš„è¿™å…­å¤§æ­¥éª¤æ‰§è¡Œä¸‹å»ï¼š æ³¨å†Œé©±åŠ¨ è·å–è¿æ¥ è·å–æ‰§è¡Œsqlè¯­å¥å¯¹è±¡ æ‰§è¡Œsqlè¯­å¥ å¤„ç†ç»“æœé›† å…³é—­èµ„æº URLï¼šç»Ÿä¸€èµ„æºå®šä½å™¨ oracle URLï¼š jdbc:oracle:thin:@localhost:1521:XE jdbc:oracle:thin:@127.0.0.1:1521:XE MySQL URLï¼šjdbc:mysql://localhost:3306/æ•°æ®åº“åç§° thinï¼šå°å‹é©±åŠ¨ï¼Œé©±åŠ¨æ–¹å¼ @localhost æœ¬æœºipåœ°å€ 127.0.0.1 XEï¼šæ•°æ®åº“çš„åå­— ipconfigï¼šipåœ°å€æŸ¥è¯¢ URIï¼šç»Ÿä¸€èµ„æºæ ‡è¯†ç¬¦ URNï¼šç”¨ç‰¹å®šå‘½åç©ºé—´çš„åå­—æ ‡è¯†èµ„æº å¦‚æœä½ ä¸çŸ¥é“ URLã€ URIã€URNä¸‰è€…çš„åŒºåˆ«çš„è¯ï¼Œé‚£ä¹ˆä½ å¯ä»¥å‚è€ƒä¸‹é¢æˆ‘æ¨èçš„ä¸€ç¯‡æ–‡ç« ã€‚ ä½ çŸ¥é“URLã€URIå’ŒURNä¸‰è€…ä¹‹é—´çš„åŒºåˆ«å—ï¼Ÿ ä¸‰ç§è¿æ¥æ–¹å¼ä»£ç ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586package cn.zhisheng.test.jdbc;import oracle.jdbc.driver.OracleDriver;import java.sql.*;import java.util.Properties;/** * Created by 10412 on 2016/12/27. * JDBCçš„å…­å¤§æ­¥éª¤ * JAVAè¿æ¥Oracleçš„ä¸‰ç§æ–¹å¼ */public class JdbcTest&#123; public static void main(String[] args) &#123; Connection connect = null; Statement statement = null; ResultSet resultSet = null; try &#123; //ç¬¬ä¸€æ­¥ï¼šæ³¨å†Œé©±åŠ¨ //ç¬¬ä¸€ç§æ–¹å¼ï¼šç±»åŠ è½½(å¸¸ç”¨) //Class.forName(\"oracle.jdbc.OracleDriver\"); //ç¬¬äºŒç§æ–¹å¼ï¼šåˆ©ç”¨Driverå¯¹è±¡ Driver driver = new OracleDriver(); DriverManager.deregisterDriver(driver); //ç¬¬ä¸‰ç§æ–¹å¼:åˆ©ç”¨ç³»ç»Ÿå‚æ•° éœ€åœ¨ideaä¸­é…ç½®program argumentsä¸ºä¸‹é¢çš„å‚æ•° //-Djdbc.drivers = oracle.jdbc.OracleDriver //ç¬¬äºŒæ­¥ï¼šè·å–è¿æ¥ //ç¬¬ä¸€ç§æ–¹å¼ï¼šåˆ©ç”¨DriverManagerï¼ˆå¸¸ç”¨ï¼‰ //connect = DriverManager.getConnection(\"jdbc:oracle:thin:@localhost:1521:XE\", \"ä½ çš„oracleæ•°æ®åº“ç”¨æˆ·å\", \"ç”¨æˆ·åå¯†ç \"); //ç¬¬äºŒç§æ–¹å¼ï¼šç›´æ¥ä½¿ç”¨Driver Properties pro = new Properties(); pro.put(\"user\", \"ä½ çš„oracleæ•°æ®åº“ç”¨æˆ·å\"); pro.put(\"password\", \"ç”¨æˆ·åå¯†ç \"); connect = driver.connect(\"jdbc:oracle:thin:@localhost:1521:XE\", pro); //æµ‹è¯•connectæ­£ç¡®ä¸å¦ System.out.println(connect); //ç¬¬ä¸‰æ­¥ï¼šè·å–æ‰§è¡Œsqlè¯­å¥å¯¹è±¡ //ç¬¬ä¸€ç§æ–¹å¼:statement //statement = connect.createStatement(); //ç¬¬äºŒç§æ–¹å¼ï¼šPreStatement PreparedStatement preState = connect.prepareStatement(\"select * from tb1_dept where id = ?\"); //ç¬¬å››æ­¥ï¼šæ‰§è¡Œsqlè¯­å¥ //ç¬¬ä¸€ç§æ–¹å¼ï¼š //resultSet = statement.executeQuery(\"select * from tb1_dept\"); //ç¬¬äºŒç§æ–¹å¼ï¼š preState.setInt(1, 2);//1æ˜¯æŒ‡sqlè¯­å¥ä¸­ç¬¬ä¸€ä¸ªï¼Ÿ, 2æ˜¯æŒ‡ç¬¬ä¸€ä¸ªï¼Ÿçš„valueså€¼ //resultSet = preState.executeQuery(); //æ‰§è¡ŒæŸ¥è¯¢è¯­å¥ //æŸ¥è¯¢ä»»ä½•è¯­å¥ï¼Œå¦‚æœæœ‰ç»“æœé›†ï¼Œè¿”å›trueï¼Œæ²¡æœ‰çš„è¯è¿”å›false,æ³¨æ„å¦‚æœæ˜¯æ’å…¥ä¸€æ¡æ•°æ®çš„è¯ï¼Œè™½ç„¶æ˜¯æ²¡æœ‰ç»“æœé›†ï¼Œè¿”å›falseï¼Œä½†æ˜¯å´èƒ½æˆåŠŸçš„æ’å…¥ä¸€æ¡æ•°æ® boolean execute = preState.execute(); System.out.println(execute); //ç¬¬äº”æ­¥ï¼šå¤„ç†ç»“æœé›† while (resultSet.next()) &#123; int id = resultSet.getInt(\"id\"); String name = resultSet.getString(\"name\"); String city = resultSet.getString(\"city\"); System.out.println(id+\" \"+name+\" \"+city); //æ‰“å°è¾“å‡ºç»“æœé›† &#125; &#125; catch (Exception e) &#123; e.printStackTrace(); &#125;finally &#123; //ç¬¬å…­æ­¥ï¼šå…³é—­èµ„æº try &#123; if (resultSet!=null) resultSet.close(); if (statement!=null) statement.close(); if (connect!=null) connect.close(); &#125; catch (SQLException e) &#123; e.printStackTrace(); &#125; &#125; &#125;&#125; æ³¨è§£ï¼š1ã€ ç¬¬ä¸€æ­¥ï¼šæ³¨å†Œé©±åŠ¨ ä¸­çš„ç¬¬ä¸‰ç§æ–¹æ³• åˆ©ç”¨ç³»ç»Ÿå‚æ•° éœ€åœ¨ideaä¸­é…ç½®program argumentsä¸ºä¸‹é¢çš„å‚æ•° è¿™é‡Œæˆ‘è¯´ä¸€ä¸‹æ€ä¹ˆåœ¨IDEAä¸­çš„é…ç½®æ–¹å¼å§ è¿è¡Œæˆªå›¾ï¼š OK ! ä¸‹ç¯‡æ–‡ç« å°†å†™ JDBC çš„å°è£…ã€‚","tags":[{"name":"æ•°æ®åº“","slug":"æ•°æ®åº“","permalink":"http://yoursite.com/tags/æ•°æ®åº“/"},{"name":"Java","slug":"Java","permalink":"http://yoursite.com/tags/Java/"},{"name":"Oracle","slug":"Oracle","permalink":"http://yoursite.com/tags/Oracle/"}]},{"title":"ã€å­—ç¬¦ä¸²ã€‘åˆ¤æ–­ä¸¤å­—ç¬¦ä¸²æ˜¯å¦äº’ä¸ºæ—‹è½¬è¯ï¼Ÿ","date":"2017-06-12T16:00:00.000Z","path":"2017/06/13/ã€å­—ç¬¦ä¸²ã€‘åˆ¤æ–­ä¸¤å­—ç¬¦ä¸²æ˜¯å¦äº’ä¸ºæ—‹è½¬è¯ï¼Ÿ/","text":"ç›¸å…³é˜…è¯»ï¼šå­—ç¬¦ä¸²é€†åºé—®é¢˜çš„è§£å†³æ–¹æ³•é¢˜ç›®ï¼š å¦‚æœå¯¹äºä¸€ä¸ªå­—ç¬¦ä¸²Aï¼Œå°†Açš„å‰é¢ä»»æ„ä¸€éƒ¨åˆ†æŒªåˆ°åè¾¹å»å½¢æˆçš„å­—ç¬¦ä¸²ç§°ä¸ºAçš„æ—‹è½¬è¯ã€‚ æ¯”å¦‚A=â€12345â€,Açš„æ—‹è½¬è¯æœ‰â€12345â€,â€23451â€,â€34512â€,â€45123â€å’Œâ€51234â€ã€‚ å¯¹äºä¸¤ä¸ªå­—ç¬¦ä¸²Aå’ŒBï¼Œè¯·åˆ¤æ–­Aå’ŒBæ˜¯å¦äº’ä¸ºæ—‹è½¬è¯ã€‚ ç»™å®šä¸¤ä¸ªå­—ç¬¦ä¸²Aå’ŒBåŠä»–ä»¬çš„é•¿åº¦lenaï¼Œlenbï¼Œè¯·è¿”å›ä¸€ä¸ªboolå€¼ï¼Œä»£è¡¨ä»–ä»¬æ˜¯å¦äº’ä¸ºæ—‹è½¬è¯ã€‚ æµ‹è¯•æ ·ä¾‹ï¼š â€œcdabâ€,4,â€abcdâ€,4 è¿”å›ï¼štrue é€šè¿‡ä»£ç ï¼š 1234567891011121314import java.util.*;public class Rotation&#123; public static boolean chkRotation(String A, int lena, String B, int lenb) &#123; // write code here if (lena != lenb)&#123; return false; &#125;else &#123; String str = A + A; return str.contains(B); &#125; &#125;&#125; ä¹Ÿå¯ä»¥ä½¿ç”¨ indexOfã€‚ å…¶åŒºåˆ«æ˜¯ï¼š contains æ˜¯æ‰¾æŒ‡å®šå­—ç¬¦ä¸²æ˜¯å¦åŒ…å«ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¿”å›å€¼çš„ boolean ç±»å‹ï¼Œå³åªæœ‰ true å’Œ false indexOf æœ‰å¤šä¸ªé‡è½½ï¼Œä½†æ— è®ºå“ªä¸ªï¼Œéƒ½æ˜¯åšä¸€å®šçš„åŒ¹é…ï¼Œç„¶åæŠŠåŒ¹é…çš„ç¬¬ä¸€ä¸ªå­—ç¬¦çš„ä½ç½®è¿”å›ï¼Œè¿”å›çš„æ˜¯ int ç±»å‹ï¼Œå¦‚æœæ²¡æ‰¾åˆ°ï¼Œé‚£ä¹ˆè¿”å› -1 ç¨å¾®å†æ·±ç©¶ä¸€ä¸‹çš„æˆ‘çœ‹äº†ä¸‹ contains çš„æºç ï¼Œç»“æœå‘ç°ä»–è°ƒç”¨çš„æ˜¯ indexOf æ–¹æ³•ã€‚ æºç å¦‚ä¸‹ï¼š 1234567891011/** * Returns true if and only if this string contains the specified * sequence of char values. * * @param s the sequence to search for * @return true if this string contains &#123;@code s&#125;, false otherwise * @since 1.5 */ public boolean contains(CharSequence s) &#123; return indexOf(s.toString()) &gt; -1; &#125; æ„æ€å°±æ˜¯å¦‚ä¸Šé¢çš„åŒºåˆ«æ‰€è¯´çš„ï¼Œä»–åªæœ‰ä¸¤ä¸ªè¿”å›å€¼ true å’Œ falseã€‚ äºæ˜¯æˆ‘ä»¬ç»§ç»­çœ‹ä¸€ä¸‹ indexOf æ–¹æ³•çš„æºç ï¼š 1234567891011121314151617/** * Returns the index within this string of the first occurrence of the * specified substring. * * &lt;p&gt;The returned index is the smallest value &lt;i&gt;k&lt;/i&gt; for which: * &lt;blockquote&gt;&lt;pre&gt; * this.startsWith(str, &lt;i&gt;k&lt;/i&gt;) * &lt;/pre&gt;&lt;/blockquote&gt; * If no such value of &lt;i&gt;k&lt;/i&gt; exists, then &#123;@code -1&#125; is returned. * * @param str the substring to search for. * @return the index of the first occurrence of the specified substring, * or &#123;@code -1&#125; if there is no such occurrence. public int indexOf(String str) &#123; return indexOf(str, 0); &#125; ç»§ç»­å¯ä»¥å‘ç°ä»–åˆè°ƒç”¨äº† indexOf çš„ä¸¤ä¸ªå‚æ•°æ–¹æ³•ï¼Œåªä¸è¿‡ç´¢å¼•æ˜¯ 0 ã€‚ ç„¶åæˆ‘ç»§ç»­çœ‹å¸¦æœ‰ä¸¤ä¸ªå‚æ•°çš„ indexOf æ–¹æ³•æºç å¦‚ä¸‹ï¼š 123456789101112131415161718192021/** * Returns the index within this string of the first occurrence of the * specified substring, starting at the specified index. * * &lt;p&gt;The returned index is the smallest value &lt;i&gt;k&lt;/i&gt; for which: * &lt;blockquote&gt;&lt;pre&gt; * &lt;i&gt;k&lt;/i&gt; &amp;gt;= fromIndex &#123;@code &amp;&amp;&#125; this.startsWith(str, &lt;i&gt;k&lt;/i&gt;) * &lt;/pre&gt;&lt;/blockquote&gt; * If no such value of &lt;i&gt;k&lt;/i&gt; exists, then &#123;@code -1&#125; is returned. * * @param str the substring to search for. * @param fromIndex the index from which to start the search. * @return the index of the first occurrence of the specified substring, * starting at the specified index, * or &#123;@code -1&#125; if there is no such occurrence. */ public int indexOf(String str, int fromIndex) &#123; return indexOf(value, 0, value.length, str.value, 0, str.value.length, fromIndex); &#125; å“ˆå“ˆï¼Œå‘ç°ä»–åˆè°ƒç”¨äº† indexOf çš„æ–¹æ³•ï¼Œè¿™æ¬¡ç»ˆäºæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æœ€åçš„ æŸ¥æ‰¾ç®—æ³• å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950/** * Code shared by String and StringBuffer to do searches. The * source is the character array being searched, and the target * is the string being searched for. * * @param source the characters being searched. * @param sourceOffset offset of the source string. * @param sourceCount count of the source string. * @param target the characters being searched for. * @param targetOffset offset of the target string. * @param targetCount count of the target string. * @param fromIndex the index to begin searching from. */static int indexOf(char[] source, int sourceOffset, int sourceCount, char[] target, int targetOffset, int targetCount, int fromIndex) &#123; if (fromIndex &gt;= sourceCount) &#123; return (targetCount == 0 ? sourceCount : -1); &#125; if (fromIndex &lt; 0) &#123; fromIndex = 0; &#125; if (targetCount == 0) &#123; return fromIndex; &#125; char first = target[targetOffset]; int max = sourceOffset + (sourceCount - targetCount); for (int i = sourceOffset + fromIndex; i &lt;= max; i++) &#123; /* Look for first character. */ if (source[i] != first) &#123; while (++i &lt;= max &amp;&amp; source[i] != first); &#125; /* Found first character, now look at the rest of v2 */ if (i &lt;= max) &#123; int j = i + 1; int end = j + targetCount - 1; for (int k = targetOffset + 1; j &lt; end &amp;&amp; source[j] == target[k]; j++, k++); if (j == end) &#123; /* Found whole string. */ return i - sourceOffset; &#125; &#125; &#125; return -1;&#125; æ€»ç»“ï¼šé‡åˆ°è¿™ç§é—®é¢˜å¤šæŸ¥çœ‹æºç ï¼Œæƒ³æ·±å…¥å°±å¾—ä»åº•å±‚åšèµ·ï¼","tags":[{"name":"æ•°æ®ç»“æ„","slug":"æ•°æ®ç»“æ„","permalink":"http://yoursite.com/tags/æ•°æ®ç»“æ„/"},{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://yoursite.com/tags/ç®—æ³•/"},{"name":"å­—ç¬¦ä¸²","slug":"å­—ç¬¦ä¸²","permalink":"http://yoursite.com/tags/å­—ç¬¦ä¸²/"},{"name":"æ—‹è½¬è¯","slug":"æ—‹è½¬è¯","permalink":"http://yoursite.com/tags/æ—‹è½¬è¯/"}]},{"title":"å­—ç¬¦ä¸²","date":"2017-06-12T16:00:00.000Z","path":"2017/06/13/ã€å­—ç¬¦ä¸²ã€‘å­—ç¬¦ä¸²é€†åº/","text":"é¢˜ç›®ä¸€ï¼šå¦‚æœä¸€ä¸ªå­—ç¬¦ä¸² str ï¼ŒæŠŠå­—ç¬¦ä¸² str å‰é¢çš„ä»»æ„éƒ¨åˆ†æŒªåˆ°åé¢å»å½¢æˆçš„å­—ç¬¦ä¸²å«åš str çš„æ—‹è½¬è¯ã€‚æ¯”å¦‚ str = â€œ 1234 â€ ï¼Œ é‚£ä¹ˆ str çš„æ—‹è½¬è¯æœ‰ â€œ 1234 â€ ï¼Œ â€œ 2341 â€ ï¼Œ â€œ 3412 â€ ï¼Œ â€œ 4123 â€ ã€‚ç»™å®šä¸¤ä¸ªå­—ç¬¦ä¸² a å’Œ b ï¼Œè¯·åˆ¤æ–­ a å’Œ b æ˜¯å¦äº’ä¸ºæ—‹è½¬è¯ï¼Ÿä¸¾ä¾‹ï¼š a = â€œ cdab â€œ , b = â€œ abcd â€œ ã€‚è¿”å› trueã€‚ a = â€œ 1ab2 â€œ , b = â€œ ab12 â€œ ã€‚è¿”å› falseã€‚ a = â€œ 2ab1 â€œ , b= â€œ ab12 â€œ ã€‚ è¿”å› trueã€‚ æ€è·¯ï¼šæœ€ä¼˜è§£æ—¶é—´å¤æ‚åº¦ä¸º O(N) å…ˆåˆ¤æ–­å­—ç¬¦ä¸² a å’Œ b æ˜¯å¦é•¿åº¦ç›¸ç­‰ã€‚ å¦‚æœé•¿åº¦ç›¸ç­‰ï¼Œç”Ÿæˆ a + a çš„å¤§å­—ç¬¦ä¸²ã€‚ ç„¶ååˆ¤æ–­å¤§å­—ç¬¦ä¸²ä¸­æ˜¯å¦åŒ…å« b å­—ç¬¦ä¸²ã€‚ï¼ˆä½¿ç”¨ kmp ç®—æ³•åˆ¤æ–­ï¼‰å¦‚æœå¤§å­—ç¬¦ä¸²ä¸­åŒ…å«å­—ç¬¦ä¸² b ï¼Œé‚£ä¹ˆå­—ç¬¦ä¸² a å’Œ b å°±äº’ä¸ºæ—‹è½¬è¯ã€‚ ä¸¾ä¾‹ï¼š a = â€œ 1234 â€œ a + a = â€œ 12341234 â€œ å¾ˆæ˜æ˜¾å‘ç°ï¼Œå¦‚æœå­—ç¬¦ä¸² a çš„é•¿åº¦ä¸º Nï¼Œåœ¨ a + a çš„å¤§å­—ç¬¦ä¸²ä¸­ï¼Œä»»æ„ä¸€ä¸ªé•¿åº¦ä¸º N çš„å­ä¸²éƒ½æ˜¯ a çš„æ—‹è½¬è¯ã€‚ é¢˜ç›®äºŒï¼šç»™å®šä¸€ä¸ªå­—ç¬¦ä¸² aï¼Œ è¯·åœ¨å•è¯é—´åšé€†åºè°ƒæ•´ã€‚ ä¸¾ä¾‹ï¼š â€œ pig loves dog â€œ é€†åºæˆ â€œ dog loves pig â€œ ã€‚ â€œ Iâ€™m a student. â€œ é€†åºæˆ â€œ student. a Iâ€™m â€œ æ€è·¯ï¼š å®ç°å°†å­—ç¬¦ä¸²å±€éƒ¨æ‰€æœ‰å­—ç¬¦é€†åºçš„å‡½æ•° f åˆ©ç”¨ f å°†å­—ç¬¦ä¸²æ‰€æœ‰å­—ç¬¦é€†åº æ‰¾åˆ°é€†åºåçš„å­—ç¬¦ä¸²ä¸­æ¯ä¸€ä¸ªå•è¯çš„åŒºåŸŸï¼Œåˆ©ç”¨ f å°†æ¯ä¸€ä¸ªå•è¯çš„åŒºåŸŸé€†åº é¢˜ç›®ä¸‰ï¼šç»™å®šä¸€ä¸ªå­—ç¬¦ä¸² a å’Œä¸€ä¸ªæ•´æ•° iã€‚Nä¸ºå­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œi ä¸º a ä¸­çš„ä½ç½®ï¼Œå°† a [ 0 â€¦ i ] ç§»åˆ°å³ä¾§ï¼Œa [ i + 1 â€¦ N - 1 ]ç§»åˆ°å·¦ä¾§ã€‚ ä¸¾ä¾‹ï¼š a = â€œ ABCDE â€œ ï¼Œi = 2 ã€‚å°† str è°ƒæ•´ä¸º â€œ DEABC â€œ ã€‚ è¦æ±‚ï¼šæ—¶é—´å¤æ‚åº¦ä¸º O(N)ï¼Œé¢å¤–ç©ºé—´å¤æ‚åº¦ä¸º O(1)ã€‚ æ€è·¯ï¼š å…ˆå°† a[ 0 â€¦ i ] éƒ¨åˆ†çš„å­—ç¬¦é€†åº å†å°† a[ i + 1 â€¦ N - 1 ] éƒ¨åˆ†çš„å­—ç¬¦é€†åº æœ€åå°†æ•´ä½“çš„å­—ç¬¦ a é€†åº é¢˜ç›®å››ï¼šç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹çš„æ•°ç»„ strsï¼Œè¯·æ‰¾åˆ°ä¸€ç§æ‹¼æ¥é¡ºåºï¼Œä½¿å¾—å°†æ‰€æœ‰çš„å­—ç¬¦ä¸²æ‹¼æ¥èµ·æ¥ç»„æˆçš„å¤§å­—ç¬¦ä¸²æ˜¯æ‰€æœ‰å¯èƒ½æ€§ä¸­å­—å…¸é¡ºåºæœ€å°çš„ï¼Œå¹¶è¿”å›è¿™ä¸ªå­—ç¬¦ä¸²ã€‚ ä¸¾ä¾‹ï¼š strs = [ â€œ abc â€œ , â€œ de â€œ ]ï¼Œå¯ä»¥æ‹¼æ¥æˆ â€œ abcde â€œï¼Œä¹Ÿå¯ä»¥æ‹¼æ¥æˆ â€œ deabc â€œï¼Œä½†æ˜¯å‰è€…çš„å­—å…¸é¡ºåºæ›´å°ï¼Œæ‰€ä»¥è¿”å› â€œ abcde â€œ ã€‚ strs = [ â€œ b â€œ, â€œ ba â€œ ], å¯ä»¥æ‹¼æ¥æˆ â€œ bba â€œ, ä¹Ÿå¯ä»¥æ‹¼æ¥æˆ â€œ bab â€œ,ä½†æ˜¯åè€…çš„å­—å…¸é¡ºåºæ›´å°ï¼Œæ‰€ä»¥è¿”å› â€œ bab â€œã€‚ æ€è·¯ï¼šæœ€ä¼˜è§£çš„æ—¶é—´å¤æ‚åº¦O(N*logN)ï¼Œå…¶å®è´¨æ˜¯ä¸€ç§æ’åºçš„å®ç°ã€‚ æ–¹æ¡ˆäºŒä¸­æ˜¯æ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²å½¼æ­¤æ‹¼æ¥åçš„å­—å…¸é¡ºåºï¼Œæ‰€ä»¥èƒ½æˆåŠŸã€‚","tags":[{"name":"æ•°æ®ç»“æ„","slug":"æ•°æ®ç»“æ„","permalink":"http://yoursite.com/tags/æ•°æ®ç»“æ„/"},{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://yoursite.com/tags/ç®—æ³•/"},{"name":"å­—ç¬¦ä¸²","slug":"å­—ç¬¦ä¸²","permalink":"http://yoursite.com/tags/å­—ç¬¦ä¸²/"}]},{"title":"Javaè¯»å–æ–‡ä»¶","date":"2017-06-12T16:00:00.000Z","path":"2017/06/13/javaè¯»å–æ–‡ä»¶/","text":"ä»¥å­—èŠ‚ä¸ºå•ä½è¯»å–æ–‡ä»¶ ä»¥å­—ç¬¦ä¸ºå•ä½è¯»å–æ–‡ä»¶ ä»¥è¡Œä¸ºå•ä½è¯»å–æ–‡ä»¶ éšæœºè¯»å–æ–‡ä»¶å†…å®¹ ReadFromFile.java123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263package cn.zhisheng.io;import java.io.*;/** * javaè¯»å–æ–‡ä»¶ * Created by 10412 on 2016/12/29. */public class ReadFromFile&#123; /** * ä»¥å­—èŠ‚ä¸ºå•ä½è¯»å–æ–‡ä»¶ï¼Œå¸¸ç”¨äºè¯»äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå¦‚å›¾ç‰‡ã€å£°éŸ³ã€å½±åƒç­‰æ–‡ä»¶ * @param fileName æ–‡ä»¶å */ public static void readFileByBytes(String fileName) &#123; File file = new File(fileName); InputStream in = null; try &#123; System.out.println(\"ä»¥å­—èŠ‚ä¸ºå•ä½è¯»å–æ–‡ä»¶å†…å®¹ï¼Œä¸€æ¬¡è¯»å–ä¸€ä¸ªå­—èŠ‚\"); //ä¸€æ¬¡è¯»ä¸€ä¸ªå­—èŠ‚ in = new FileInputStream(file); int tempbyte; while ((tempbyte = in.read()) != -1) &#123; System.out.println(tempbyte); &#125; in.close(); &#125; catch (FileNotFoundException e) &#123; e.printStackTrace(); &#125; catch (IOException e) &#123; e.printStackTrace(); return; &#125; try &#123; System.out.println(\"ä»¥å­—èŠ‚ä¸ºå•ä½è¯»å–æ–‡ä»¶å†…å®¹ï¼Œä¸€æ¬¡è¯»å–å¤šä¸ªå­—èŠ‚\"); //ä¸€æ¬¡è¯»å–å¤šä¸ªå­—èŠ‚ byte[] tempbytes = new byte[100]; int byteread = 0; in = new FileInputStream(fileName); ReadFromFile.showAvailableBytes(in); // è¯»å…¥å¤šä¸ªå­—èŠ‚åˆ°å­—èŠ‚æ•°ç»„ä¸­ï¼Œbytereadä¸ºä¸€æ¬¡è¯»å…¥çš„å­—èŠ‚æ•° while ((byteread = in.read(tempbytes)) != -1) &#123; System.out.write(tempbytes, 0, byteread); &#125; &#125; catch (FileNotFoundException e) &#123; e.printStackTrace(); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125;finally &#123; if (in != null) &#123; try &#123; in.close(); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125; &#125; &#125; /** * ä»¥å­—ç¬¦ä¸ºå•ä½è¯»å–æ–‡ä»¶ï¼Œå¸¸ç”¨äºè¯»æ–‡æœ¬ï¼Œæ•°å­—ç­‰ç±»å‹çš„æ–‡ä»¶ * @param fileName æ–‡ä»¶å */ public static void readFileByChars(String fileName) &#123; File file = new File(fileName); Reader reader = null; try &#123; System.out.println(\"ä»¥å­—ç¬¦ä¸ºå•ä½è¯»å–æ–‡ä»¶å†…å®¹ï¼Œä¸€æ¬¡è¯»ä¸€ä¸ªå­—ç¬¦ï¼š\"); // ä¸€æ¬¡è¯»ä¸€ä¸ªå­—ç¬¦ reader = new InputStreamReader(new FileInputStream(file)); int tempchar; while ((tempchar = reader.read()) != -1) &#123; // å¯¹äºwindowsä¸‹ï¼Œ\\r\\nè¿™ä¸¤ä¸ªå­—ç¬¦åœ¨ä¸€èµ·æ—¶ï¼Œè¡¨ç¤ºä¸€ä¸ªæ¢è¡Œã€‚ // ä½†å¦‚æœè¿™ä¸¤ä¸ªå­—ç¬¦åˆ†å¼€æ˜¾ç¤ºæ—¶ï¼Œä¼šæ¢ä¸¤æ¬¡è¡Œã€‚ // å› æ­¤ï¼Œå±è”½æ‰\\rï¼Œæˆ–è€…å±è”½\\nã€‚å¦åˆ™ï¼Œå°†ä¼šå¤šå‡ºå¾ˆå¤šç©ºè¡Œã€‚ if (((char)tempchar) != '\\r') &#123; System.out.print((char) tempchar); &#125; &#125; reader.close(); &#125; catch (FileNotFoundException e) &#123; e.printStackTrace(); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; try &#123; System.out.println(\"ä»¥å­—ç¬¦ä¸ºå•ä½è¯»å–æ–‡ä»¶å†…å®¹ï¼Œä¸€æ¬¡è¯»å¤šä¸ªå­—ç¬¦ï¼š\"); //ä¸€æ¬¡è¯»å¤šä¸ªå­—ç¬¦ char[] tempchars = new char[30]; int charread = 0; reader = new InputStreamReader(new FileInputStream(fileName)); // è¯»å…¥å¤šä¸ªå­—ç¬¦åˆ°å­—ç¬¦æ•°ç»„ä¸­ï¼Œcharreadä¸ºä¸€æ¬¡è¯»å–å­—ç¬¦æ•° while ((charread = reader.read(tempchars)) != -1) &#123; // åŒæ ·å±è”½æ‰\\rä¸æ˜¾ç¤º if ((charread == tempchars.length) &amp;&amp; (tempchars[tempchars.length - 1]) != '\\r') &#123; System.out.print(tempchars); &#125; else &#123; for (int i = 0; i &lt; charread; i++ ) &#123; if (tempchars[i] == '\\r') &#123; continue; &#125; else &#123; System.out.print(tempchars[i]); &#125; &#125; &#125; &#125; &#125; catch (FileNotFoundException e) &#123; e.printStackTrace(); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125;finally &#123; if (reader != null) &#123; try &#123; reader.close(); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125; &#125; &#125; /** * ä»¥è¡Œä¸ºå•ä½è¯»å–æ–‡ä»¶ï¼Œå¸¸ç”¨äºè¯»é¢å‘è¡Œçš„æ ¼å¼åŒ–æ–‡ä»¶ * @param fileName æ–‡ä»¶å */ public static void readFileByLines(String fileName) &#123; File file = new File(fileName); BufferedReader reader =null; try &#123; System.out.println(\"ä»¥è¡Œä¸ºå•ä½è¯»å–æ–‡ä»¶å†…å®¹ï¼Œä¸€æ¬¡è¯»ä¸€æ•´è¡Œï¼š\"); reader = new BufferedReader(new FileReader(file)); String tempString = null; int line = 1; // ä¸€æ¬¡è¯»å…¥ä¸€è¡Œï¼Œç›´åˆ°è¯»å…¥nullä¸ºæ–‡ä»¶ç»“æŸ while ((tempString = reader.readLine()) != null) &#123; // æ˜¾ç¤ºè¡Œå· System.out.println(\"line \"+line+\": \"+tempString); line++; &#125; &#125; catch (FileNotFoundException e) &#123; e.printStackTrace(); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125;finally &#123; if (reader != null) &#123; try &#123; reader.close(); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125; &#125; &#125; /** * éšæœºè¯»å–æ–‡ä»¶å†…å®¹ * @param fileName æ–‡ä»¶å */ public static void readFileBRandomAccess(String fileName) &#123; RandomAccessFile randomFile = null; try &#123; System.out.println(\"éšæœºè¯»å–ä¸€æ®µæ–‡ä»¶å†…å®¹ï¼š\"); // æ‰“å¼€ä¸€ä¸ªéšæœºè®¿é—®æ–‡ä»¶æµï¼ŒæŒ‰åªè¯»æ–¹å¼ randomFile = new RandomAccessFile(fileName, \"r\"); // æ–‡ä»¶é•¿åº¦ï¼Œå­—èŠ‚æ•° long fileLength = randomFile.length(); // è¯»æ–‡ä»¶çš„èµ·å§‹ä½ç½® int beginIndex = (fileLength &gt; 4) ? 4 : 0; // å°†è¯»æ–‡ä»¶çš„å¼€å§‹ä½ç½®ç§»åˆ°beginIndexä½ç½® randomFile.seek(beginIndex); byte[] bytes = new byte[10]; int byteread = 0; // ä¸€æ¬¡è¯»10ä¸ªå­—èŠ‚ï¼Œå¦‚æœæ–‡ä»¶å†…å®¹ä¸è¶³10ä¸ªå­—èŠ‚ï¼Œåˆ™è¯»å‰©ä¸‹çš„å­—èŠ‚ã€‚ // å°†ä¸€æ¬¡è¯»å–çš„å­—èŠ‚æ•°èµ‹ç»™byteread while ((byteread = randomFile.read(bytes)) != -1) &#123; System.out.write(bytes, 0, byteread); &#125; &#125; catch (FileNotFoundException e) &#123; e.printStackTrace(); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125;finally &#123; if (randomFile != null) try &#123; randomFile.close(); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125; &#125; /** * æ˜¾ç¤ºè¾“å…¥æµä¸­å‰©ä½™çš„å­—èŠ‚æ•° * @param in */ public static void showAvailableBytes(InputStream in) &#123; try &#123; System.out.println(\"å½“å‰å­—èŠ‚æµè¾“å…¥æµä¸­å‰©ä½™çš„å­—èŠ‚æ•°ä¸º:\"+in.available()); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125; public static void main(String[] args) &#123; String fileName = \"C:\\\\Users\\\\10412\\\\Desktop\\\\1.txt\"; //æ–‡æœ¬æ–‡ä»¶ //String fileName = \"C:\\\\Users\\\\10412\\\\Desktop\\\\sp20161227_204413.png\"; //å›¾ç‰‡æ–‡ä»¶ //readFileByBytes(fileName); //readFileByChars(fileName); //readFileByLines(fileName); readFileBRandomAccess(fileName); &#125;&#125; æ–‡ä»¶è¿½åŠ å†…å®¹AppendToFile.java12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576package cn.zhisheng.io;import java.io.FileNotFoundException;import java.io.FileWriter;import java.io.IOException;import java.io.RandomAccessFile;/** * è¿½åŠ å†…å®¹åˆ°æ–‡ä»¶å°¾éƒ¨ * Created by 10412 on 2016/12/29. */public class AppendToFile&#123; /** * ç¬¬ä¸€ç§æ–¹æ³•è¿½åŠ æ–‡ä»¶ï¼šä½¿ç”¨RandomAccessFile * @param fileName æ–‡ä»¶å * @param content è¿½åŠ å†…å®¹ */ public static void appendMethod1(String fileName, String content) &#123; try &#123; // æ‰“å¼€ä¸€ä¸ªéšæœºè®¿é—®æ–‡ä»¶æµï¼ŒæŒ‰è¯»å†™æ–¹å¼ RandomAccessFile randomFile = new RandomAccessFile(fileName, \"rw\"); // æ–‡ä»¶é•¿åº¦ï¼Œå­—èŠ‚æ•° long fileLength = randomFile.length(); //å°†å†™æ–‡ä»¶æŒ‡é’ˆç§»åˆ°æ–‡ä»¶å°¾ randomFile.seek(fileLength); randomFile.writeBytes(content); randomFile.close(); &#125; catch (FileNotFoundException e) &#123; e.printStackTrace(); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125; /** * ç¬¬äºŒç§æ–¹æ³•è¿½åŠ æ–‡ä»¶ï¼šä½¿ç”¨FileWriter * @param fileName æ–‡ä»¶å * @param content è¿½åŠ å†…å®¹ */ public static void appendMethod2(String fileName, String content) &#123; try &#123; //æ‰“å¼€ä¸€ä¸ªå†™æ–‡ä»¶å™¨ï¼Œæ„é€ å‡½æ•°ä¸­çš„ç¬¬äºŒä¸ªå‚æ•°trueè¡¨ç¤ºä»¥è¿½åŠ å½¢å¼å†™æ–‡ä»¶ FileWriter writer = new FileWriter(fileName, true); writer.write(content); writer.close(); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125; public static void main(String[] args) &#123; String fileName = \"C:\\\\Users\\\\10412\\\\Desktop\\\\1.txt\"; //æ–‡æœ¬æ–‡ä»¶ String content = \"new append!\"; //æŒ‰æ–¹æ³•1è¿½åŠ æ–‡ä»¶// AppendToFile.appendMethod1(fileName, content);// AppendToFile.appendMethod1(fileName, \"\\new append. ç¬¬ä¸€ç§æ–¹æ³•\\n\"); //æŒ‰ç…§æ–¹æ³•2è¿½åŠ æ–‡ä»¶ AppendToFile.appendMethod2(fileName, content); AppendToFile.appendMethod2(fileName, \"\\nnew append. ç¬¬äºŒç§æ–¹æ³•\\n\"); //æ˜¾ç¤ºæ–‡ä»¶å†…å®¹ ReadFromFile.readFileByLines(fileName); &#125;&#125;","tags":[{"name":"Java","slug":"Java","permalink":"http://yoursite.com/tags/Java/"},{"name":"æ–‡ä»¶","slug":"æ–‡ä»¶","permalink":"http://yoursite.com/tags/æ–‡ä»¶/"}]},{"title":"HashMapã€Hashtableã€HashSet å’Œ ConcurrentHashMap çš„æ¯”è¾ƒ","date":"2017-06-12T16:00:00.000Z","path":"2017/06/13/HashMap-Hashtable/","text":"HashMap å’Œ Hashtable çš„æ¯”è¾ƒæ˜¯ Java é¢è¯•ä¸­çš„å¸¸è§é—®é¢˜ï¼Œç”¨æ¥è€ƒéªŒç¨‹åºå‘˜æ˜¯å¦èƒ½å¤Ÿæ­£ç¡®ä½¿ç”¨é›†åˆç±»ä»¥åŠæ˜¯å¦å¯ä»¥éšæœºåº”å˜ä½¿ç”¨å¤šç§æ€è·¯è§£å†³é—®é¢˜ã€‚HashMap çš„å·¥ä½œåŸç†ã€ArrayList ä¸ Vector çš„æ¯”è¾ƒä»¥åŠè¿™ä¸ªé—®é¢˜æ˜¯æœ‰å…³ Java é›†åˆæ¡†æ¶çš„æœ€ç»å…¸çš„é—®é¢˜ã€‚Hashtable æ˜¯ä¸ªè¿‡æ—¶çš„é›†åˆç±»ï¼Œå­˜åœ¨äº Java API ä¸­å¾ˆä¹…äº†ã€‚åœ¨ Java 4 ä¸­è¢«é‡å†™äº†ï¼Œå®ç°äº† Map æ¥å£ï¼Œæ‰€ä»¥è‡ªæ­¤ä»¥åä¹Ÿæˆäº† Java é›†åˆæ¡†æ¶ä¸­çš„ä¸€éƒ¨åˆ†ã€‚Hashtable å’Œ HashMap åœ¨ Java é¢è¯•ä¸­ç›¸å½“å®¹æ˜“è¢«é—®åˆ°ï¼Œç”šè‡³æˆä¸ºäº†é›†åˆæ¡†æ¶é¢è¯•é¢˜ä¸­æœ€å¸¸è¢«è€ƒçš„é—®é¢˜ï¼Œæ‰€ä»¥åœ¨å‚åŠ ä»»ä½• Java é¢è¯•ä¹‹å‰ï¼Œéƒ½ä¸è¦å¿˜äº†å‡†å¤‡è¿™ä¸€é¢˜ã€‚è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬ä¸ä»…å°†ä¼šçœ‹åˆ° HashMap å’Œ Hashtable çš„åŒºåˆ«ï¼Œè¿˜å°†çœ‹åˆ°å®ƒä»¬ä¹‹é—´çš„ç›¸ä¼¼ä¹‹å¤„ã€‚ HashMap å’Œ Hashtable çš„åŒºåˆ«HashMap å’Œ Hashtable éƒ½å®ç°äº† Map æ¥å£ï¼Œä½†å†³å®šç”¨å“ªä¸€ä¸ªä¹‹å‰å…ˆè¦å¼„æ¸…æ¥šå®ƒä»¬ä¹‹é—´çš„åˆ†åˆ«ã€‚ä¸»è¦çš„åŒºåˆ«æœ‰ï¼šçº¿ç¨‹å®‰å…¨æ€§ï¼ŒåŒæ­¥ (synchronization)ï¼Œä»¥åŠé€Ÿåº¦ã€‚ HashMap å‡ ä¹å¯ä»¥ç­‰ä»·äº Hashtableï¼Œé™¤äº† HashMap æ˜¯é synchronized çš„ï¼Œå¹¶å¯ä»¥æ¥å— null(HashMap å¯ä»¥æ¥å—ä¸º null çš„é”®å€¼ (key) å’Œå€¼ (value)ï¼Œè€Œ Hashtable åˆ™ä¸è¡Œ)ã€‚ HashMap æ˜¯é synchronizedï¼Œè€Œ Hashtable æ˜¯ synchronizedï¼Œè¿™æ„å‘³ç€ Hashtable æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå¤šä¸ªçº¿ç¨‹å¯ä»¥å…±äº«ä¸€ä¸ª Hashtableï¼›è€Œå¦‚æœæ²¡æœ‰æ­£ç¡®çš„åŒæ­¥çš„è¯ï¼Œå¤šä¸ªçº¿ç¨‹æ˜¯ä¸èƒ½å…±äº« HashMap çš„ã€‚Java 5 æä¾›äº† ConcurrentHashMapï¼Œå®ƒæ˜¯ HashTable çš„æ›¿ä»£ï¼Œæ¯” HashTable çš„æ‰©å±•æ€§æ›´å¥½ã€‚ å¦ä¸€ä¸ªåŒºåˆ«æ˜¯ HashMap çš„è¿­ä»£å™¨ (Iterator) æ˜¯ fail-fast è¿­ä»£å™¨ï¼Œè€Œ Hashtable çš„ enumerator è¿­ä»£å™¨ä¸æ˜¯ fail-fast çš„ã€‚æ‰€ä»¥å½“æœ‰å…¶å®ƒçº¿ç¨‹æ”¹å˜äº† HashMap çš„ç»“æ„ï¼ˆå¢åŠ æˆ–è€…ç§»é™¤å…ƒç´ ï¼‰ï¼Œå°†ä¼šæŠ›å‡ºConcurrentModificationExceptionï¼Œä½†è¿­ä»£å™¨æœ¬èº«çš„ remove() æ–¹æ³•ç§»é™¤å…ƒç´ åˆ™ä¸ä¼šæŠ›å‡ºConcurrentModificationException å¼‚å¸¸ã€‚ä½†è¿™å¹¶ä¸æ˜¯ä¸€ä¸ªä¸€å®šå‘ç”Ÿçš„è¡Œä¸ºï¼Œè¦çœ‹ JVMã€‚è¿™æ¡åŒæ ·ä¹Ÿæ˜¯Enumeration å’Œ Iterato rçš„åŒºåˆ«ã€‚ ç”±äº Hashtable æ˜¯çº¿ç¨‹å®‰å…¨çš„ä¹Ÿæ˜¯ synchronizedï¼Œæ‰€ä»¥åœ¨å•çº¿ç¨‹ç¯å¢ƒä¸‹å®ƒæ¯” HashMap è¦æ…¢ã€‚å¦‚æœä½ ä¸éœ€è¦åŒæ­¥ï¼Œåªéœ€è¦å•ä¸€çº¿ç¨‹ï¼Œé‚£ä¹ˆä½¿ç”¨ HashMap æ€§èƒ½è¦å¥½è¿‡ Hashtableã€‚ HashMap ä¸èƒ½ä¿è¯éšç€æ—¶é—´çš„æ¨ç§» Map ä¸­çš„å…ƒç´ æ¬¡åºæ˜¯ä¸å˜çš„ã€‚ è¦æ³¨æ„çš„ä¸€äº›é‡è¦æœ¯è¯­ï¼š1) sychronized æ„å‘³ç€åœ¨ä¸€æ¬¡ä»…æœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½å¤Ÿæ›´æ”¹ Hashtableã€‚å°±æ˜¯è¯´ä»»ä½•çº¿ç¨‹è¦æ›´æ–° Hashtable æ—¶è¦é¦–å…ˆè·å¾—åŒæ­¥é”ï¼Œå…¶å®ƒçº¿ç¨‹è¦ç­‰åˆ°åŒæ­¥é”è¢«é‡Šæ”¾ä¹‹åæ‰èƒ½å†æ¬¡è·å¾—åŒæ­¥é”æ›´æ–° Hashtableã€‚ 2) Fail-safe å’Œ iterator è¿­ä»£å™¨ç›¸å…³ã€‚å¦‚æœæŸä¸ªé›†åˆå¯¹è±¡åˆ›å»ºäº† Iterator æˆ–è€… ListIteratorï¼Œç„¶åå…¶å®ƒçš„çº¿ç¨‹è¯•å›¾â€œç»“æ„ä¸Šâ€æ›´æ”¹é›†åˆå¯¹è±¡ï¼Œå°†ä¼šæŠ›å‡º ConcurrentModificationException å¼‚å¸¸ã€‚ä½†å…¶å®ƒçº¿ç¨‹å¯ä»¥é€šè¿‡ set() æ–¹æ³•æ›´æ”¹é›†åˆå¯¹è±¡æ˜¯å…è®¸çš„ï¼Œå› ä¸ºè¿™å¹¶æ²¡æœ‰ä»â€œç»“æ„ä¸Šâ€æ›´æ”¹é›†åˆã€‚ä½†æ˜¯å‡å¦‚å·²ç»ä»ç»“æ„ä¸Šè¿›è¡Œäº†æ›´æ”¹ï¼Œå†è°ƒç”¨ set() æ–¹æ³•ï¼Œå°†ä¼šæŠ›å‡º IllegalArgumentException å¼‚å¸¸ã€‚ 3) ç»“æ„ä¸Šçš„æ›´æ”¹æŒ‡çš„æ˜¯åˆ é™¤æˆ–è€…æ’å…¥ä¸€ä¸ªå…ƒç´ ï¼Œè¿™æ ·ä¼šå½±å“åˆ° map çš„ç»“æ„ã€‚ æˆ‘ä»¬èƒ½å¦è®© HashMap åŒæ­¥ï¼ŸHashMap å¯ä»¥é€šè¿‡ä¸‹é¢çš„è¯­å¥è¿›è¡ŒåŒæ­¥ï¼šMap m = Collections.synchronizeMap(hashMap); ç»“è®ºHashtable å’Œ HashMap æœ‰å‡ ä¸ªä¸»è¦çš„ä¸åŒï¼šçº¿ç¨‹å®‰å…¨ä»¥åŠé€Ÿåº¦ã€‚ä»…åœ¨ä½ éœ€è¦å®Œå…¨çš„çº¿ç¨‹å®‰å…¨çš„æ—¶å€™ä½¿ç”¨Hashtableï¼Œè€Œå¦‚æœä½ ä½¿ç”¨ Java 5 æˆ–ä»¥ä¸Šçš„è¯ï¼Œè¯·ä½¿ç”¨ ConcurrentHashMap å§ã€‚ è½¬è½½è‡ªï¼šHashMapå’ŒHashtableçš„åŒºåˆ« å…³äº HashMap çº¿ç¨‹ä¸å®‰å…¨è¿™ä¸€ç‚¹ï¼Œã€ŠJavaå¹¶å‘ç¼–ç¨‹çš„è‰ºæœ¯ã€‹ä¸€ä¹¦ä¸­æ˜¯è¿™æ ·è¯´çš„ï¼š HashMap åœ¨å¹¶å‘æ‰§è¡Œ put æ“ä½œæ—¶ä¼šå¼•èµ·æ­»å¾ªç¯ï¼Œå¯¼è‡´ CPU åˆ©ç”¨ç‡æ¥è¿‘ 100%ã€‚å› ä¸ºå¤šçº¿ç¨‹ä¼šå¯¼è‡´ HashMap çš„ Node é“¾è¡¨å½¢æˆç¯å½¢æ•°æ®ç»“æ„ï¼Œä¸€æ—¦å½¢æˆç¯å½¢æ•°æ®ç»“æ„ï¼ŒNode çš„ next èŠ‚ç‚¹æ°¸è¿œä¸ä¸ºç©ºï¼Œå°±ä¼šåœ¨è·å– Node æ—¶äº§ç”Ÿæ­»å¾ªç¯ã€‚ åŸå› ï¼š ç–«è‹—ï¼šJAVA HASHMAPçš„æ­»å¾ªç¯ â€”â€” é…·å£³ HashMapåœ¨javaå¹¶å‘ä¸­å¦‚ä½•å‘ç”Ÿæ­»å¾ªç¯ How does a HashMap work in JAVA ä¸‹é¢çš„æ˜¯è‡ªå·±æœ‰é“äº‘ç¬”è®°ä¸­è®°å½•çš„ï¼š HashMap ï¼Œ HashTable å’Œ HashSet åŒºåˆ« å…³äº HashMap çš„ä¸€äº›è¯´æ³•ï¼š a) HashMap å®é™…ä¸Šæ˜¯ä¸€ä¸ªâ€œé“¾è¡¨æ•£åˆ—â€çš„æ•°æ®ç»“æ„ï¼Œå³æ•°ç»„å’Œé“¾è¡¨çš„ç»“åˆä½“ã€‚HashMap çš„åº•å±‚ç»“æ„æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„ä¸­çš„æ¯ä¸€é¡¹æ˜¯ä¸€æ¡é“¾è¡¨ã€‚ b) HashMap çš„å®ä¾‹æœ‰ä¿©ä¸ªå‚æ•°å½±å“å…¶æ€§èƒ½ï¼š â€œåˆå§‹å®¹é‡â€ å’Œ è£…å¡«å› å­ã€‚ c) HashMap å®ç°ä¸åŒæ­¥ï¼Œçº¿ç¨‹ä¸å®‰å…¨ã€‚ HashTable çº¿ç¨‹å®‰å…¨ d) HashMap ä¸­çš„ key-value éƒ½æ˜¯å­˜å‚¨åœ¨ Entry ä¸­çš„ã€‚ e) HashMap å¯ä»¥å­˜ null é”®å’Œ null å€¼ï¼Œä¸ä¿è¯å…ƒç´ çš„é¡ºåºæ’ä¹…ä¸å˜ï¼Œå®ƒçš„åº•å±‚ä½¿ç”¨çš„æ˜¯æ•°ç»„å’Œé“¾è¡¨ï¼Œé€šè¿‡hashCode() æ–¹æ³•å’Œ equals æ–¹æ³•ä¿è¯é”®çš„å”¯ä¸€æ€§ f) è§£å†³å†²çªä¸»è¦æœ‰ä¸‰ç§æ–¹æ³•ï¼šå®šå€æ³•ï¼Œæ‹‰é“¾æ³•ï¼Œå†æ•£åˆ—æ³•ã€‚HashMap æ˜¯é‡‡ç”¨æ‹‰é“¾æ³•è§£å†³å“ˆå¸Œå†²çªçš„ã€‚ æ³¨ï¼š é“¾è¡¨æ³•æ˜¯å°†ç›¸åŒ hash å€¼çš„å¯¹è±¡ç»„æˆä¸€ä¸ªé“¾è¡¨æ”¾åœ¨ hash å€¼å¯¹åº”çš„æ§½ä½ï¼› ç”¨å¼€æ”¾å®šå€æ³•è§£å†³å†²çªçš„åšæ³•æ˜¯ï¼šå½“å†²çªå‘ç”Ÿæ—¶ï¼Œä½¿ç”¨æŸç§æ¢æŸ¥(äº¦ç§°æ¢æµ‹)æŠ€æœ¯åœ¨æ•£åˆ—è¡¨ä¸­å½¢æˆä¸€ä¸ªæ¢æŸ¥(æµ‹)åºåˆ—ã€‚ æ²¿æ­¤åºåˆ—é€ä¸ªå•å…ƒåœ°æŸ¥æ‰¾ï¼Œç›´åˆ°æ‰¾åˆ°ç»™å®š çš„å…³é”®å­—ï¼Œæˆ–è€…ç¢°åˆ°ä¸€ä¸ªå¼€æ”¾çš„åœ°å€(å³è¯¥åœ°å€å•å…ƒä¸ºç©º)ä¸ºæ­¢ï¼ˆè‹¥è¦æ’å…¥ï¼Œåœ¨æ¢æŸ¥åˆ°å¼€æ”¾çš„åœ°å€ï¼Œåˆ™å¯å°†å¾…æ’å…¥çš„æ–°ç»“ç‚¹å­˜äººè¯¥åœ°å€å•å…ƒï¼‰ã€‚ æ‹‰é“¾æ³•è§£å†³å†²çªçš„åšæ³•æ˜¯ï¼š å°†æ‰€æœ‰å…³é”®å­—ä¸ºåŒä¹‰è¯çš„ç»“ç‚¹é“¾æ¥åœ¨åŒä¸€ä¸ªå•é“¾è¡¨ä¸­ ã€‚è‹¥é€‰å®šçš„æ•£åˆ—è¡¨é•¿åº¦ä¸ºmï¼Œåˆ™å¯å°†æ•£åˆ—è¡¨å®šä¹‰ä¸ºä¸€ä¸ªç”±mä¸ªå¤´æŒ‡é’ˆç»„æˆçš„æŒ‡é’ˆæ•° ç»„T[0..m-1]ã€‚å‡¡æ˜¯æ•£åˆ—åœ°å€ä¸ºiçš„ç»“ç‚¹ï¼Œå‡æ’å…¥åˆ°ä»¥T[i]ä¸ºå¤´æŒ‡é’ˆçš„å•é“¾è¡¨ä¸­ã€‚Tä¸­å„åˆ†é‡çš„åˆå€¼å‡åº”ä¸ºç©ºæŒ‡é’ˆã€‚åœ¨æ‹‰é“¾æ³•ä¸­ï¼Œè£…å¡«å› å­Î±å¯ä»¥å¤§äº1ï¼Œä½†ä¸€èˆ¬å‡å–Î±â‰¤1ã€‚æ‹‰é“¾æ³•é€‚åˆæœªè§„å®šå…ƒç´ çš„å¤§å°ã€‚ Hashtable å’Œ HashMap çš„åŒºåˆ«ï¼š a) ç»§æ‰¿ä¸åŒã€‚ public class Hashtable extends Dictionary implements Map public class HashMap extends AbstractMap implements Map b) Hashtable ä¸­çš„æ–¹æ³•æ˜¯åŒæ­¥çš„ï¼Œè€Œ HashMap ä¸­çš„æ–¹æ³•åœ¨ç¼ºçœæƒ…å†µä¸‹æ˜¯éåŒæ­¥çš„ã€‚åœ¨å¤šçº¿ç¨‹å¹¶å‘çš„ç¯å¢ƒä¸‹ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ Hashtableï¼Œä½†æ˜¯è¦ä½¿ç”¨ HashMap çš„è¯å°±è¦è‡ªå·±å¢åŠ åŒæ­¥å¤„ç†äº†ã€‚ c) Hashtable ä¸­ï¼Œ key å’Œ value éƒ½ä¸å…è®¸å‡ºç° null å€¼ã€‚ åœ¨ HashMap ä¸­ï¼Œ null å¯ä»¥ä½œä¸ºé”®ï¼Œè¿™æ ·çš„é”®åªæœ‰ä¸€ä¸ªï¼›å¯ä»¥æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªé”®æ‰€å¯¹åº”çš„å€¼ä¸º null ã€‚å½“ get() æ–¹æ³•è¿”å› null å€¼æ—¶ï¼Œå³å¯ä»¥è¡¨ç¤º HashMap ä¸­æ²¡æœ‰è¯¥é”®ï¼Œä¹Ÿå¯ä»¥è¡¨ç¤ºè¯¥é”®æ‰€å¯¹åº”çš„å€¼ä¸º null ã€‚å› æ­¤ï¼Œåœ¨ HashMap ä¸­ä¸èƒ½ç”± get() æ–¹æ³•æ¥åˆ¤æ–­ HashMap ä¸­æ˜¯å¦å­˜åœ¨æŸä¸ªé”®ï¼Œ è€Œåº”è¯¥ç”¨ containsKey() æ–¹æ³•æ¥åˆ¤æ–­ã€‚ d) ä¸¤ä¸ªéå†æ–¹å¼çš„å†…éƒ¨å®ç°ä¸Šä¸åŒã€‚Hashtableã€HashMap éƒ½ä½¿ç”¨äº†Iteratorã€‚è€Œç”±äºå†å²åŸå› ï¼ŒHashtableè¿˜ä½¿ç”¨äº† Enumeration çš„æ–¹å¼ ã€‚ e) å“ˆå¸Œå€¼çš„ä½¿ç”¨ä¸åŒï¼ŒHashTable ç›´æ¥ä½¿ç”¨å¯¹è±¡çš„ hashCodeã€‚è€Œ HashMap é‡æ–°è®¡ç®— hash å€¼ã€‚ f) Hashtable å’Œ HashMap å®ƒä»¬ä¸¤ä¸ªå†…éƒ¨å®ç°æ–¹å¼çš„æ•°ç»„çš„åˆå§‹å¤§å°å’Œæ‰©å®¹çš„æ–¹å¼ã€‚HashTable ä¸­ hash æ•°ç»„é»˜è®¤å¤§å°æ˜¯11ï¼Œå¢åŠ çš„æ–¹å¼æ˜¯ old*2+1ã€‚HashMap ä¸­ hash æ•°ç»„çš„é»˜è®¤å¤§å°æ˜¯ 16ï¼Œè€Œä¸”ä¸€å®šæ˜¯2çš„æŒ‡æ•°ã€‚ æ³¨ï¼š HashSet å­ç±»ä¾é  hashCode() å’Œ equal() æ–¹æ³•æ¥åŒºåˆ†é‡å¤å…ƒç´ ã€‚ HashSet å†…éƒ¨ä½¿ç”¨ Map ä¿å­˜æ•°æ®ï¼Œå³å°† HashSet çš„æ•°æ®ä½œä¸º Map çš„ key å€¼ä¿å­˜ï¼Œè¿™ä¹Ÿæ˜¯ HashSet ä¸­å…ƒç´ ä¸èƒ½é‡å¤çš„åŸå› ã€‚è€Œ Map ä¸­ä¿å­˜ key å€¼çš„,ä¼šå»åˆ¤æ–­å½“å‰ Map ä¸­æ˜¯å¦å«æœ‰è¯¥ Key å¯¹è±¡ï¼Œå†…éƒ¨æ˜¯å…ˆé€šè¿‡ key çš„hashCode, ç¡®å®šæœ‰ç›¸åŒçš„ hashCode ä¹‹åï¼Œå†é€šè¿‡ equals æ–¹æ³•åˆ¤æ–­æ˜¯å¦ç›¸åŒã€‚ ã€ŠHashMap çš„å·¥ä½œåŸç†ã€‹ HashMapçš„å·¥ä½œåŸç†æ˜¯è¿‘å¹´æ¥å¸¸è§çš„Javaé¢è¯•é¢˜ã€‚å‡ ä¹æ¯ä¸ªJavaç¨‹åºå‘˜éƒ½çŸ¥é“HashMapï¼Œéƒ½çŸ¥é“å“ªé‡Œè¦ç”¨HashMapï¼ŒçŸ¥é“ Hashtableå’ŒHashMapä¹‹é—´çš„åŒºåˆ«ï¼Œé‚£ä¹ˆä¸ºä½•è¿™é“é¢è¯•é¢˜å¦‚æ­¤ç‰¹æ®Šå‘¢ï¼Ÿæ˜¯å› ä¸ºè¿™é“é¢˜è€ƒå¯Ÿçš„æ·±åº¦å¾ˆæ·±ã€‚è¿™é¢˜ç»å¸¸å‡ºç°åœ¨é«˜çº§æˆ–ä¸­é«˜çº§é¢è¯•ä¸­ã€‚æŠ•èµ„é“¶è¡Œæ›´å–œæ¬¢é—®è¿™ä¸ªé—®é¢˜ï¼Œç”šè‡³ä¼šè¦æ±‚ä½ å®ç°HashMapæ¥è€ƒå¯Ÿä½ çš„ç¼–ç¨‹èƒ½åŠ›ã€‚ConcurrentHashMapå’Œå…¶å®ƒåŒæ­¥é›†åˆçš„å¼•å…¥è®©è¿™é“é¢˜å˜å¾—æ›´åŠ å¤æ‚ã€‚è®©æˆ‘ä»¬å¼€å§‹æ¢ç´¢çš„æ—…ç¨‹å§ï¼ å…ˆæ¥äº›ç®€å•çš„é—®é¢˜â€œä½ ç”¨è¿‡HashMapå—ï¼Ÿâ€ â€œä»€ä¹ˆæ˜¯HashMapï¼Ÿä½ ä¸ºä»€ä¹ˆç”¨åˆ°å®ƒï¼Ÿâ€ å‡ ä¹æ¯ä¸ªäººéƒ½ä¼šå›ç­”â€œæ˜¯çš„â€ï¼Œç„¶åå›ç­”HashMapçš„ä¸€äº›ç‰¹æ€§ï¼Œè­¬å¦‚HashMapå¯ä»¥æ¥å—nullé”®å€¼å’Œå€¼ï¼Œè€ŒHashtableåˆ™ä¸èƒ½ï¼›HashMapæ˜¯ésynchronized;HashMapå¾ˆå¿«ï¼›ä»¥åŠHashMapå‚¨å­˜çš„æ˜¯é”®å€¼å¯¹ç­‰ç­‰ã€‚è¿™æ˜¾ç¤ºå‡ºä½ å·²ç»ç”¨è¿‡HashMapï¼Œè€Œä¸”å¯¹å®ƒç›¸å½“çš„ç†Ÿæ‚‰ã€‚ä½†æ˜¯é¢è¯•å®˜æ¥ä¸ªæ€¥è½¬ç›´ä¸‹ï¼Œä»æ­¤åˆ»å¼€å§‹é—®å‡ºä¸€äº›åˆé’»çš„é—®é¢˜ï¼Œå…³äºHashMapçš„æ›´å¤šåŸºç¡€çš„ç»†èŠ‚ã€‚é¢è¯•å®˜å¯èƒ½ä¼šé—®å‡ºä¸‹é¢çš„é—®é¢˜ï¼š â€œä½ çŸ¥é“HashMapçš„å·¥ä½œåŸç†å—ï¼Ÿâ€ â€œä½ çŸ¥é“HashMapçš„get()æ–¹æ³•çš„å·¥ä½œåŸç†å—ï¼Ÿâ€ ä½ ä¹Ÿè®¸ä¼šå›ç­”â€œæˆ‘æ²¡æœ‰è¯¦æŸ¥æ ‡å‡†çš„Java APIï¼Œä½ å¯ä»¥çœ‹çœ‹Javaæºä»£ç æˆ–è€…Open JDKã€‚â€â€œæˆ‘å¯ä»¥ç”¨Googleæ‰¾åˆ°ç­”æ¡ˆã€‚â€ ä½†ä¸€äº›é¢è¯•è€…å¯èƒ½å¯ä»¥ç»™å‡ºç­”æ¡ˆï¼Œâ€œHashMapæ˜¯åŸºäºhashingçš„åŸç†ï¼Œæˆ‘ä»¬ä½¿ç”¨put(key, value)å­˜å‚¨å¯¹è±¡åˆ°HashMapä¸­ï¼Œä½¿ç”¨get(key)ä»HashMapä¸­è·å–å¯¹è±¡ã€‚å½“æˆ‘ä»¬ç»™put()æ–¹æ³•ä¼ é€’é”®å’Œå€¼æ—¶ï¼Œæˆ‘ä»¬å…ˆå¯¹é”®è°ƒç”¨hashCode()æ–¹æ³•ï¼Œè¿”å›çš„hashCodeç”¨äºæ‰¾åˆ°bucketä½ç½®æ¥å‚¨å­˜Entryå¯¹è±¡ã€‚â€è¿™é‡Œå…³é”®ç‚¹åœ¨äºæŒ‡å‡ºï¼ŒHashMapæ˜¯åœ¨bucketä¸­å‚¨å­˜é”®å¯¹è±¡å’Œå€¼å¯¹è±¡ï¼Œä½œä¸ºMap.Entryã€‚è¿™ä¸€ç‚¹æœ‰åŠ©äºç†è§£è·å–å¯¹è±¡çš„é€»è¾‘ã€‚å¦‚æœä½ æ²¡æœ‰æ„è¯†åˆ°è¿™ä¸€ç‚¹ï¼Œæˆ–è€…é”™è¯¯çš„è®¤ä¸ºä»…ä»…åªåœ¨bucketä¸­å­˜å‚¨å€¼çš„è¯ï¼Œä½ å°†ä¸ä¼šå›ç­”å¦‚ä½•ä»HashMapä¸­è·å–å¯¹è±¡çš„é€»è¾‘ã€‚è¿™ä¸ªç­”æ¡ˆç›¸å½“çš„æ­£ç¡®ï¼Œä¹Ÿæ˜¾ç¤ºå‡ºé¢è¯•è€…ç¡®å®çŸ¥é“hashingä»¥åŠHashMapçš„å·¥ä½œåŸç†ã€‚ä½†æ˜¯è¿™ä»…ä»…æ˜¯æ•…äº‹çš„å¼€å§‹ï¼Œå½“é¢è¯•å®˜åŠ å…¥ä¸€äº›Javaç¨‹åºå‘˜æ¯å¤©è¦ç¢°åˆ°çš„å®é™…åœºæ™¯çš„æ—¶å€™ï¼Œé”™è¯¯çš„ç­”æ¡ˆé¢‘ç°ã€‚ä¸‹ä¸ªé—®é¢˜å¯èƒ½æ˜¯å…³äºHashMapä¸­çš„ç¢°æ’æ¢æµ‹(collision detection)ä»¥åŠç¢°æ’çš„è§£å†³æ–¹æ³•ï¼š â€œå½“ä¸¤ä¸ªå¯¹è±¡çš„hashcodeç›¸åŒä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿâ€ ä»è¿™é‡Œå¼€å§‹ï¼ŒçœŸæ­£çš„å›°æƒ‘å¼€å§‹äº†ï¼Œä¸€äº›é¢è¯•è€…ä¼šå›ç­”å› ä¸ºhashcodeç›¸åŒï¼Œæ‰€ä»¥ä¸¤ä¸ªå¯¹è±¡æ˜¯ç›¸ç­‰çš„ï¼ŒHashMapå°†ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œæˆ–è€…ä¸ä¼šå­˜å‚¨å®ƒä»¬ã€‚ç„¶åé¢è¯•å®˜å¯èƒ½ä¼šæé†’ä»–ä»¬æœ‰equals()å’ŒhashCode()ä¸¤ä¸ªæ–¹æ³•ï¼Œå¹¶å‘Šè¯‰ä»–ä»¬ä¸¤ä¸ªå¯¹è±¡å°±ç®—hashcodeç›¸åŒï¼Œä½†æ˜¯å®ƒä»¬å¯èƒ½å¹¶ä¸ç›¸ç­‰ã€‚ä¸€äº›é¢è¯•è€…å¯èƒ½å°±æ­¤æ”¾å¼ƒï¼Œè€Œå¦å¤–ä¸€äº›è¿˜èƒ½ç»§ç»­æŒºè¿›ï¼Œä»–ä»¬å›ç­”â€œå› ä¸ºhashcodeç›¸åŒï¼Œæ‰€ä»¥å®ƒä»¬çš„bucketä½ç½®ç›¸åŒï¼Œâ€˜ç¢°æ’â€™ä¼šå‘ç”Ÿã€‚å› ä¸ºHashMapä½¿ç”¨é“¾è¡¨å­˜å‚¨å¯¹è±¡ï¼Œè¿™ä¸ªEntry(åŒ…å«æœ‰é”®å€¼å¯¹çš„Map.Entryå¯¹è±¡)ä¼šå­˜å‚¨åœ¨é“¾è¡¨ä¸­ã€‚â€è¿™ä¸ªç­”æ¡ˆéå¸¸çš„åˆç†ï¼Œè™½ç„¶æœ‰å¾ˆå¤šç§å¤„ç†ç¢°æ’çš„æ–¹æ³•ï¼Œè¿™ç§æ–¹æ³•æ˜¯æœ€ç®€å•çš„ï¼Œä¹Ÿæ­£æ˜¯HashMapçš„å¤„ç†æ–¹æ³•ã€‚ä½†æ•…äº‹è¿˜æ²¡æœ‰å®Œç»“ï¼Œé¢è¯•å®˜ä¼šç»§ç»­é—®ï¼š â€œå¦‚æœä¸¤ä¸ªé”®çš„hashcodeç›¸åŒï¼Œä½ å¦‚ä½•è·å–å€¼å¯¹è±¡ï¼Ÿâ€ é¢è¯•è€…ä¼šå›ç­”ï¼šå½“æˆ‘ä»¬è°ƒç”¨get()æ–¹æ³•ï¼ŒHashMapä¼šä½¿ç”¨é”®å¯¹è±¡çš„hashcodeæ‰¾åˆ°bucketä½ç½®ï¼Œç„¶åè·å–å€¼å¯¹è±¡ã€‚é¢è¯•å®˜æé†’ä»–å¦‚æœæœ‰ä¸¤ä¸ªå€¼å¯¹è±¡å‚¨å­˜åœ¨åŒä¸€ä¸ªbucketï¼Œä»–ç»™å‡ºç­”æ¡ˆ:å°†ä¼šéå†é“¾è¡¨ç›´åˆ°æ‰¾åˆ°å€¼å¯¹è±¡ã€‚é¢è¯•å®˜ä¼šé—®å› ä¸ºä½ å¹¶æ²¡æœ‰å€¼å¯¹è±¡å»æ¯”è¾ƒï¼Œä½ æ˜¯å¦‚ä½•ç¡®å®šç¡®å®šæ‰¾åˆ°å€¼å¯¹è±¡çš„ï¼Ÿé™¤éé¢è¯•è€…ç›´åˆ°HashMapåœ¨é“¾è¡¨ä¸­å­˜å‚¨çš„æ˜¯é”®å€¼å¯¹ï¼Œå¦åˆ™ä»–ä»¬ä¸å¯èƒ½å›ç­”å‡ºè¿™ä¸€é¢˜ã€‚ å…¶ä¸­ä¸€äº›è®°å¾—è¿™ä¸ªé‡è¦çŸ¥è¯†ç‚¹çš„é¢è¯•è€…ä¼šè¯´ï¼Œæ‰¾åˆ°bucketä½ç½®ä¹‹åï¼Œä¼šè°ƒç”¨keys.equals()æ–¹æ³•å»æ‰¾åˆ°é“¾è¡¨ä¸­æ­£ç¡®çš„èŠ‚ç‚¹ï¼Œæœ€ç»ˆæ‰¾åˆ°è¦æ‰¾çš„å€¼å¯¹è±¡ã€‚å®Œç¾çš„ç­”æ¡ˆï¼ è®¸å¤šæƒ…å†µä¸‹ï¼Œé¢è¯•è€…ä¼šåœ¨è¿™ä¸ªç¯èŠ‚ä¸­å‡ºé”™ï¼Œå› ä¸ºä»–ä»¬æ··æ·†äº†hashCode()å’Œequals()æ–¹æ³•ã€‚å› ä¸ºåœ¨æ­¤ä¹‹å‰hashCode()å±¡å±¡å‡ºç°ï¼Œè€Œequals()æ–¹æ³•ä»…ä»…åœ¨è·å–å€¼å¯¹è±¡çš„æ—¶å€™æ‰å‡ºç°ã€‚ä¸€äº›ä¼˜ç§€çš„å¼€å‘è€…ä¼šæŒ‡å‡ºä½¿ç”¨ä¸å¯å˜çš„ã€å£°æ˜ä½œfinalçš„å¯¹è±¡ï¼Œå¹¶ä¸”é‡‡ç”¨åˆé€‚çš„equals()å’ŒhashCode()æ–¹æ³•çš„è¯ï¼Œå°†ä¼šå‡å°‘ç¢°æ’çš„å‘ç”Ÿï¼Œæé«˜æ•ˆç‡ã€‚ä¸å¯å˜æ€§ä½¿å¾—èƒ½å¤Ÿç¼“å­˜ä¸åŒé”®çš„hashcodeï¼Œè¿™å°†æé«˜æ•´ä¸ªè·å–å¯¹è±¡çš„é€Ÿåº¦ï¼Œä½¿ç”¨Stringï¼ŒIntergerè¿™æ ·çš„wrapperç±»ä½œä¸ºé”®æ˜¯éå¸¸å¥½çš„é€‰æ‹©ã€‚ å¦‚æœä½ è®¤ä¸ºåˆ°è¿™é‡Œå·²ç»å®Œç»“äº†ï¼Œé‚£ä¹ˆå¬åˆ°ä¸‹é¢è¿™ä¸ªé—®é¢˜çš„æ—¶å€™ï¼Œä½ ä¼šå¤§åƒä¸€æƒŠã€‚ â€œå¦‚æœHashMapçš„å¤§å°è¶…è¿‡äº†è´Ÿè½½å› å­(load factor)å®šä¹‰çš„å®¹é‡ï¼Œæ€ä¹ˆåŠï¼Ÿâ€ é™¤éä½ çœŸæ­£çŸ¥é“HashMapçš„å·¥ä½œåŸç†ï¼Œå¦åˆ™ä½ å°†å›ç­”ä¸å‡ºè¿™é“é¢˜ã€‚é»˜è®¤çš„è´Ÿè½½å› å­å¤§å°ä¸º0.75ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå½“ä¸€ä¸ªmapå¡«æ»¡äº†75%çš„bucketæ—¶å€™ï¼Œå’Œå…¶å®ƒé›†åˆç±»(å¦‚ArrayListç­‰)ä¸€æ ·ï¼Œå°†ä¼šåˆ›å»ºåŸæ¥HashMapå¤§å°çš„ä¸¤å€çš„bucketæ•°ç»„ï¼Œæ¥é‡æ–°è°ƒæ•´mapçš„å¤§å°ï¼Œå¹¶å°†åŸæ¥çš„å¯¹è±¡æ”¾å…¥æ–°çš„bucketæ•°ç»„ä¸­ã€‚è¿™ä¸ªè¿‡ç¨‹å«ä½œrehashingï¼Œå› ä¸ºå®ƒè°ƒç”¨hashæ–¹æ³•æ‰¾åˆ°æ–°çš„bucketä½ç½®ã€‚ å¦‚æœä½ èƒ½å¤Ÿå›ç­”è¿™é“é—®é¢˜ï¼Œä¸‹é¢çš„é—®é¢˜æ¥äº†ï¼š â€œä½ äº†è§£é‡æ–°è°ƒæ•´HashMapå¤§å°å­˜åœ¨ä»€ä¹ˆé—®é¢˜å—ï¼Ÿâ€ ä½ å¯èƒ½å›ç­”ä¸ä¸Šæ¥ï¼Œè¿™æ—¶é¢è¯•å®˜ä¼šæé†’ä½ å½“å¤šçº¿ç¨‹çš„æƒ…å†µä¸‹ï¼Œå¯èƒ½äº§ç”Ÿæ¡ä»¶ç«äº‰(race condition)ã€‚ å½“é‡æ–°è°ƒæ•´HashMapå¤§å°çš„æ—¶å€™ï¼Œç¡®å®å­˜åœ¨æ¡ä»¶ç«äº‰ï¼Œå› ä¸ºå¦‚æœä¸¤ä¸ªçº¿ç¨‹éƒ½å‘ç°HashMapéœ€è¦é‡æ–°è°ƒæ•´å¤§å°äº†ï¼Œå®ƒä»¬ä¼šåŒæ—¶è¯•ç€è°ƒæ•´å¤§å°ã€‚åœ¨è°ƒæ•´å¤§å°çš„è¿‡ç¨‹ä¸­ï¼Œå­˜å‚¨åœ¨é“¾è¡¨ä¸­çš„å…ƒç´ çš„æ¬¡åºä¼šåè¿‡æ¥ï¼Œå› ä¸ºç§»åŠ¨åˆ°æ–°çš„bucketä½ç½®çš„æ—¶å€™ï¼ŒHashMapå¹¶ä¸ä¼šå°†å…ƒç´ æ”¾åœ¨é“¾è¡¨çš„å°¾éƒ¨ï¼Œè€Œæ˜¯æ”¾åœ¨å¤´éƒ¨ï¼Œè¿™æ˜¯ä¸ºäº†é¿å…å°¾éƒ¨éå†(tail traversing)ã€‚å¦‚æœæ¡ä»¶ç«äº‰å‘ç”Ÿäº†ï¼Œé‚£ä¹ˆå°±æ­»å¾ªç¯äº†ã€‚è¿™ä¸ªæ—¶å€™ï¼Œä½ å¯ä»¥è´¨é—®é¢è¯•å®˜ï¼Œä¸ºä»€ä¹ˆè¿™ä¹ˆå¥‡æ€ªï¼Œè¦åœ¨å¤šçº¿ç¨‹çš„ç¯å¢ƒä¸‹ä½¿ç”¨HashMapå‘¢ï¼Ÿï¼šï¼‰ çƒ­å¿ƒçš„è¯»è€…è´¡çŒ®äº†æ›´å¤šçš„å…³äºHashMapçš„é—®é¢˜ï¼š ä¸ºä»€ä¹ˆString, Intergerè¿™æ ·çš„wrapperç±»é€‚åˆä½œä¸ºé”®ï¼Ÿ String, Intergerè¿™æ ·çš„wrapperç±»ä½œä¸ºHashMapçš„é”®æ˜¯å†é€‚åˆä¸è¿‡äº†ï¼Œè€Œä¸”Stringæœ€ä¸ºå¸¸ç”¨ã€‚å› ä¸ºStringæ˜¯ä¸å¯å˜çš„ï¼Œä¹Ÿæ˜¯finalçš„ï¼Œè€Œä¸”å·²ç»é‡å†™äº†equals()å’ŒhashCode()æ–¹æ³•äº†ã€‚å…¶ä»–çš„wrapperç±»ä¹Ÿæœ‰è¿™ä¸ªç‰¹ç‚¹ã€‚ä¸å¯å˜æ€§æ˜¯å¿…è¦çš„ï¼Œå› ä¸ºä¸ºäº†è¦è®¡ç®—hashCode()ï¼Œå°±è¦é˜²æ­¢é”®å€¼æ”¹å˜ï¼Œå¦‚æœé”®å€¼åœ¨æ”¾å…¥æ—¶å’Œè·å–æ—¶è¿”å›ä¸åŒçš„hashcodeçš„è¯ï¼Œé‚£ä¹ˆå°±ä¸èƒ½ä»HashMapä¸­æ‰¾åˆ°ä½ æƒ³è¦çš„å¯¹è±¡ã€‚ä¸å¯å˜æ€§è¿˜æœ‰å…¶ä»–çš„ä¼˜ç‚¹å¦‚çº¿ç¨‹å®‰å…¨ã€‚å¦‚æœä½ å¯ä»¥ä»…ä»…é€šè¿‡å°†æŸä¸ªfieldå£°æ˜æˆfinalå°±èƒ½ä¿è¯hashCodeæ˜¯ä¸å˜çš„ï¼Œé‚£ä¹ˆè¯·è¿™ä¹ˆåšå§ã€‚å› ä¸ºè·å–å¯¹è±¡çš„æ—¶å€™è¦ç”¨åˆ°equals()å’ŒhashCode()æ–¹æ³•ï¼Œé‚£ä¹ˆé”®å¯¹è±¡æ­£ç¡®çš„é‡å†™è¿™ä¸¤ä¸ªæ–¹æ³•æ˜¯éå¸¸é‡è¦çš„ã€‚å¦‚æœä¸¤ä¸ªä¸ç›¸ç­‰çš„å¯¹è±¡è¿”å›ä¸åŒçš„hashcodeçš„è¯ï¼Œé‚£ä¹ˆç¢°æ’çš„å‡ ç‡å°±ä¼šå°äº›ï¼Œè¿™æ ·å°±èƒ½æé«˜HashMapçš„æ€§èƒ½ã€‚ æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰çš„å¯¹è±¡ä½œä¸ºé”®å—ï¼Ÿ è¿™æ˜¯å‰ä¸€ä¸ªé—®é¢˜çš„å»¶ä¼¸ã€‚å½“ç„¶ä½ å¯èƒ½ä½¿ç”¨ä»»ä½•å¯¹è±¡ä½œä¸ºé”®ï¼Œåªè¦å®ƒéµå®ˆäº†equals()å’ŒhashCode()æ–¹æ³•çš„å®šä¹‰è§„åˆ™ï¼Œå¹¶ä¸”å½“å¯¹è±¡æ’å…¥åˆ°Mapä¸­ä¹‹åå°†ä¸ä¼šå†æ”¹å˜äº†ã€‚å¦‚æœè¿™ä¸ªè‡ªå®šä¹‰å¯¹è±¡æ—¶ä¸å¯å˜çš„ï¼Œé‚£ä¹ˆå®ƒå·²ç»æ»¡è¶³äº†ä½œä¸ºé”®çš„æ¡ä»¶ï¼Œå› ä¸ºå½“å®ƒåˆ›å»ºä¹‹åå°±å·²ç»ä¸èƒ½æ”¹å˜äº†ã€‚ æˆ‘ä»¬å¯ä»¥ä½¿ç”¨CocurrentHashMapæ¥ä»£æ›¿Hashtableå—ï¼Ÿ è¿™æ˜¯å¦å¤–ä¸€ä¸ªå¾ˆçƒ­é—¨çš„é¢è¯•é¢˜ï¼Œå› ä¸ºConcurrentHashMapè¶Šæ¥è¶Šå¤šäººç”¨äº†ã€‚æˆ‘ä»¬çŸ¥é“Hashtableæ˜¯synchronizedçš„ï¼Œä½†æ˜¯ConcurrentHashMapåŒæ­¥æ€§èƒ½æ›´å¥½ï¼Œå› ä¸ºå®ƒä»…ä»…æ ¹æ®åŒæ­¥çº§åˆ«å¯¹mapçš„ä¸€éƒ¨åˆ†è¿›è¡Œä¸Šé”ã€‚ConcurrentHashMapå½“ç„¶å¯ä»¥ä»£æ›¿HashTableï¼Œä½†æ˜¯HashTableæä¾›æ›´å¼ºçš„çº¿ç¨‹å®‰å…¨æ€§ã€‚çœ‹çœ‹ è¿™ç¯‡åšå®¢ æŸ¥çœ‹Hashtableå’ŒConcurrentHashMapçš„åŒºåˆ«ã€‚ æˆ‘ä¸ªäººå¾ˆå–œæ¬¢è¿™ä¸ªé—®é¢˜ï¼Œå› ä¸ºè¿™ä¸ªé—®é¢˜çš„æ·±åº¦å’Œå¹¿åº¦ï¼Œä¹Ÿä¸ç›´æ¥çš„æ¶‰åŠåˆ°ä¸åŒçš„æ¦‚å¿µã€‚è®©æˆ‘ä»¬å†æ¥çœ‹çœ‹è¿™äº›é—®é¢˜è®¾è®¡å“ªäº›çŸ¥è¯†ç‚¹ï¼š hashingçš„æ¦‚å¿µ HashMapä¸­è§£å†³ç¢°æ’çš„æ–¹æ³• equals()å’ŒhashCode()çš„åº”ç”¨ï¼Œä»¥åŠå®ƒä»¬åœ¨HashMapä¸­çš„é‡è¦æ€§ ä¸å¯å˜å¯¹è±¡çš„å¥½å¤„ HashMapå¤šçº¿ç¨‹çš„æ¡ä»¶ç«äº‰ é‡æ–°è°ƒæ•´HashMapçš„å¤§å° æ€»ç»“HashMapçš„å·¥ä½œåŸç†HashMapåŸºäºhashingåŸç†ï¼Œæˆ‘ä»¬é€šè¿‡put()å’Œget()æ–¹æ³•å‚¨å­˜å’Œè·å–å¯¹è±¡ã€‚å½“æˆ‘ä»¬å°†é”®å€¼å¯¹ä¼ é€’ç»™put()æ–¹æ³•æ—¶ï¼Œå®ƒè°ƒç”¨é”®å¯¹è±¡çš„hashCode()æ–¹æ³•æ¥è®¡ç®—hashcodeï¼Œè®©åæ‰¾åˆ°bucketä½ç½®æ¥å‚¨å­˜å€¼å¯¹è±¡ã€‚å½“è·å–å¯¹è±¡æ—¶ï¼Œé€šè¿‡é”®å¯¹è±¡çš„equals()æ–¹æ³•æ‰¾åˆ°æ­£ç¡®çš„é”®å€¼å¯¹ï¼Œç„¶åè¿”å›å€¼å¯¹è±¡ã€‚HashMapä½¿ç”¨é“¾è¡¨æ¥è§£å†³ç¢°æ’é—®é¢˜ï¼Œå½“å‘ç”Ÿç¢°æ’äº†ï¼Œå¯¹è±¡å°†ä¼šå‚¨å­˜åœ¨é“¾è¡¨çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ä¸­ã€‚ HashMapåœ¨æ¯ä¸ªé“¾è¡¨èŠ‚ç‚¹ä¸­å‚¨å­˜é”®å€¼å¯¹å¯¹è±¡ã€‚ å½“ä¸¤ä¸ªä¸åŒçš„é”®å¯¹è±¡çš„hashcodeç›¸åŒæ—¶ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ å®ƒä»¬ä¼šå‚¨å­˜åœ¨åŒä¸€ä¸ªbucketä½ç½®çš„é“¾è¡¨ä¸­ã€‚é”®å¯¹è±¡çš„equals()æ–¹æ³•ç”¨æ¥æ‰¾åˆ°é”®å€¼å¯¹ã€‚ å› ä¸ºHashMapçš„å¥½å¤„éå¸¸å¤šï¼Œæˆ‘æ›¾ç»åœ¨ç”µå­å•†åŠ¡çš„åº”ç”¨ä¸­ä½¿ç”¨HashMapä½œä¸ºç¼“å­˜ã€‚å› ä¸ºé‡‘èé¢†åŸŸéå¸¸å¤šçš„è¿ç”¨Javaï¼Œä¹Ÿå‡ºäºæ€§èƒ½çš„è€ƒè™‘ï¼Œæˆ‘ä»¬ä¼šç»å¸¸ç”¨åˆ°HashMapå’ŒConcurrentHashMapã€‚ä½ å¯ä»¥æŸ¥çœ‹æ›´å¤šçš„å…³äºHashMapçš„æ–‡ç« : HashMapå’ŒHashtableçš„åŒºåˆ« HashMapå’ŒHashSetçš„åŒºåˆ« è½¬è½½è‡ªï¼šHashMapçš„å·¥ä½œåŸç† å…¶ä»–çš„ HashMap å­¦ä¹ èµ„æ–™ï¼š jdk7ä¸­HashMapçŸ¥è¯†ç‚¹æ•´ç† HashMapæºç åˆ†æï¼ˆå››ï¼‰put-jdk8-çº¢é»‘æ ‘çš„å¼•å…¥ JDK7ä¸JDK8ä¸­HashMapçš„å®ç° JDK1.8HashMapåŸç†å’Œæºç åˆ†æ(javaé¢è¯•æ”¶è—) è°ˆè°ˆConcurrentHashMap1.7å’Œ1.8çš„ä¸åŒå®ç° jdk1.8çš„HashMapå’ŒConcurrentHashMap ConcurrentHashMapæºç åˆ†æï¼ˆJDK8ç‰ˆæœ¬ï¼‰ æœ€åè°¢è°¢é˜…è¯»ï¼Œå¦‚æœå¯ä»¥çš„è¯æ¬¢è¿å¤§å®¶è½¬å‘å’Œç‚¹èµã€‚å¦‚éœ€è½¬è½½æ³¨æ˜åŸåœ°å€å°±è¡Œã€‚ ç¾¤ 528776268 æ¬¢è¿å„ä½å¤§ç‰›è¿›ç¾¤ä¸€èµ·è®¨è®ºã€‚","tags":[{"name":"Java","slug":"Java","permalink":"http://yoursite.com/tags/Java/"}]},{"title":"JVMæ€§èƒ½è°ƒä¼˜ç›‘æ§å·¥å…·jpsã€jstackã€jmapã€jhatã€jstatç­‰ä½¿ç”¨è¯¦è§£","date":"2017-06-12T16:00:00.000Z","path":"2017/06/13/JVMæ€§èƒ½è°ƒä¼˜ç›‘æ§å·¥å…·jpsã€jstackã€jmapã€jhatã€jstatç­‰ä½¿ç”¨è¯¦è§£/","text":"javap å’Œ javac javac -verbose ç±»å.java java -verbose ç±»å javap -c ç±»å javap -verbose ç±»å javap -helpç”¨æ³•: javap å…¶ä¸­, å¯èƒ½çš„é€‰é¡¹åŒ…æ‹¬: -help â€“help -? è¾“å‡ºæ­¤ç”¨æ³•æ¶ˆæ¯ -version ç‰ˆæœ¬ä¿¡æ¯ -v -verbose è¾“å‡ºé™„åŠ ä¿¡æ¯ -l è¾“å‡ºè¡Œå·å’Œæœ¬åœ°å˜é‡è¡¨ -public ä»…æ˜¾ç¤ºå…¬å…±ç±»å’Œæˆå‘˜ -protected æ˜¾ç¤ºå—ä¿æŠ¤çš„/å…¬å…±ç±»å’Œæˆå‘˜ -package æ˜¾ç¤ºç¨‹åºåŒ…/å—ä¿æŠ¤çš„/å…¬å…±ç±» å’Œæˆå‘˜ (é»˜è®¤) -p -private æ˜¾ç¤ºæ‰€æœ‰ç±»å’Œæˆå‘˜ -c å¯¹ä»£ç è¿›è¡Œåæ±‡ç¼– -s è¾“å‡ºå†…éƒ¨ç±»å‹ç­¾å -sysinfo æ˜¾ç¤ºæ­£åœ¨å¤„ç†çš„ç±»çš„ ç³»ç»Ÿä¿¡æ¯ (è·¯å¾„, å¤§å°, æ—¥æœŸ, MD5 æ•£åˆ—) -constants æ˜¾ç¤ºæœ€ç»ˆå¸¸é‡ -classpath æŒ‡å®šæŸ¥æ‰¾ç”¨æˆ·ç±»æ–‡ä»¶çš„ä½ç½® -cp æŒ‡å®šæŸ¥æ‰¾ç”¨æˆ·ç±»æ–‡ä»¶çš„ä½ç½® -bootclasspath è¦†ç›–å¼•å¯¼ç±»æ–‡ä»¶çš„ä½ç½® javac -helpç”¨æ³•: javac å…¶ä¸­, å¯èƒ½çš„é€‰é¡¹åŒ…æ‹¬: -g ç”Ÿæˆæ‰€æœ‰è°ƒè¯•ä¿¡æ¯ -g:none ä¸ç”Ÿæˆä»»ä½•è°ƒè¯•ä¿¡æ¯ -g:{lines,vars,source} åªç”ŸæˆæŸäº›è°ƒè¯•ä¿¡æ¯ -nowarn ä¸ç”Ÿæˆä»»ä½•è­¦å‘Š -verbose è¾“å‡ºæœ‰å…³ç¼–è¯‘å™¨æ­£åœ¨æ‰§è¡Œçš„æ“ä½œçš„æ¶ˆæ¯ -deprecation è¾“å‡ºä½¿ç”¨å·²è¿‡æ—¶çš„ API çš„æºä½ç½® -classpath &lt;è·¯å¾„&gt; æŒ‡å®šæŸ¥æ‰¾ç”¨æˆ·ç±»æ–‡ä»¶å’Œæ³¨é‡Šå¤„ç†ç¨‹åºçš„ä½ç½® -cp &lt;è·¯å¾„&gt; æŒ‡å®šæŸ¥æ‰¾ç”¨æˆ·ç±»æ–‡ä»¶å’Œæ³¨é‡Šå¤„ç†ç¨‹åºçš„ä½ç½® -sourcepath &lt;è·¯å¾„&gt; æŒ‡å®šæŸ¥æ‰¾è¾“å…¥æºæ–‡ä»¶çš„ä½ç½® -bootclasspath &lt;è·¯å¾„&gt; è¦†ç›–å¼•å¯¼ç±»æ–‡ä»¶çš„ä½ç½® -extdirs &lt;ç›®å½•&gt; è¦†ç›–æ‰€å®‰è£…æ‰©å±•çš„ä½ç½® -endorseddirs &lt;ç›®å½•&gt; è¦†ç›–ç­¾åçš„æ ‡å‡†è·¯å¾„çš„ä½ç½® -proc:{none,only} æ§åˆ¶æ˜¯å¦æ‰§è¡Œæ³¨é‡Šå¤„ç†å’Œ/æˆ–ç¼–è¯‘ã€‚ -processor [,,â€¦] è¦è¿è¡Œçš„æ³¨é‡Šå¤„ç†ç¨‹åºçš„åç§°; ç»•è¿‡é»˜è®¤çš„æœç´¢è¿›ç¨‹ -processorpath &lt;è·¯å¾„&gt; æŒ‡å®šæŸ¥æ‰¾æ³¨é‡Šå¤„ç†ç¨‹åºçš„ä½ç½® -parameters ç”Ÿæˆå…ƒæ•°æ®ä»¥ç”¨äºæ–¹æ³•å‚æ•°çš„åå°„ -d &lt;ç›®å½•&gt; æŒ‡å®šæ”¾ç½®ç”Ÿæˆçš„ç±»æ–‡ä»¶çš„ä½ç½® -s &lt;ç›®å½•&gt; æŒ‡å®šæ”¾ç½®ç”Ÿæˆçš„æºæ–‡ä»¶çš„ä½ç½® -h &lt;ç›®å½•&gt; æŒ‡å®šæ”¾ç½®ç”Ÿæˆçš„æœ¬æœºæ ‡å¤´æ–‡ä»¶çš„ä½ç½® -implicit:{none,class} æŒ‡å®šæ˜¯å¦ä¸ºéšå¼å¼•ç”¨æ–‡ä»¶ç”Ÿæˆç±»æ–‡ä»¶ -encoding &lt;ç¼–ç &gt; æŒ‡å®šæºæ–‡ä»¶ä½¿ç”¨çš„å­—ç¬¦ç¼–ç  -source &lt;å‘è¡Œç‰ˆ&gt; æä¾›ä¸æŒ‡å®šå‘è¡Œç‰ˆçš„æºå…¼å®¹æ€§ -target &lt;å‘è¡Œç‰ˆ&gt; ç”Ÿæˆç‰¹å®š VM ç‰ˆæœ¬çš„ç±»æ–‡ä»¶ -profile &lt;é…ç½®æ–‡ä»¶&gt; è¯·ç¡®ä¿ä½¿ç”¨çš„ API åœ¨æŒ‡å®šçš„é…ç½®æ–‡ä»¶ä¸­å¯ç”¨ -version ç‰ˆæœ¬ä¿¡æ¯ -help è¾“å‡ºæ ‡å‡†é€‰é¡¹çš„æè¦ -Aå…³é”®å­—[=å€¼] ä¼ é€’ç»™æ³¨é‡Šå¤„ç†ç¨‹åºçš„é€‰é¡¹ -X è¾“å‡ºéæ ‡å‡†é€‰é¡¹çš„æè¦ -J&lt;æ ‡è®°&gt; ç›´æ¥å°† &lt;æ ‡è®°&gt; ä¼ é€’ç»™è¿è¡Œæ—¶ç³»ç»Ÿ -Werror å‡ºç°è­¦å‘Šæ—¶ç»ˆæ­¢ç¼–è¯‘ @&lt;æ–‡ä»¶å&gt; ä»æ–‡ä»¶è¯»å–é€‰é¡¹å’Œæ–‡ä»¶å jpsç”¨æ¥æŸ¥çœ‹åŸºäºHotSpotçš„JVMé‡Œé¢ä¸­ï¼Œæ‰€æœ‰å…·æœ‰è®¿é—®æƒé™çš„Javaè¿›ç¨‹çš„å…·ä½“çŠ¶æ€, åŒ…æ‹¬è¿›ç¨‹IDï¼Œè¿›ç¨‹å¯åŠ¨çš„è·¯å¾„åŠå¯åŠ¨å‚æ•°ç­‰ç­‰ï¼Œä¸unixä¸Šçš„psç±»ä¼¼ï¼Œåªä¸è¿‡jpsæ˜¯ç”¨æ¥æ˜¾ç¤ºjavaè¿›ç¨‹ï¼Œå¯ä»¥æŠŠjpsç†è§£ä¸ºpsçš„ä¸€ä¸ªå­é›†ã€‚ ä½¿ç”¨jpsæ—¶ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šhostidï¼Œå®ƒåªä¼šæ˜¾ç¤ºæœ¬åœ°ç¯å¢ƒä¸­æ‰€æœ‰çš„Javaè¿›ç¨‹ï¼›å¦‚æœæŒ‡å®šäº†hostidï¼Œå®ƒå°±ä¼šæ˜¾ç¤ºæŒ‡å®šhostidä¸Šé¢çš„javaè¿›ç¨‹ï¼Œä¸è¿‡è¿™éœ€è¦è¿œç¨‹æœåŠ¡ä¸Šå¼€å¯äº†jstatdæœåŠ¡ã€‚ jps -helpusage: jps [-help] jps [-q] [-mlvV] [&lt;hostid&gt;] Definitions: &lt;hostid&gt;: &lt;hostname&gt;[:&lt;port&gt;] -qï¼šå¿½ç•¥è¾“å‡ºçš„ç±»åã€Jaråä»¥åŠä¼ é€’ç»™mainæ–¹æ³•çš„å‚æ•°ï¼Œåªè¾“å‡ºpidã€‚ -mï¼šè¾“å‡ºä¼ é€’ç»™mainæ–¹æ³•çš„å‚æ•°ï¼Œå¦‚æœæ˜¯å†…åµŒçš„JVMåˆ™è¾“å‡ºä¸ºnullã€‚ -lï¼šè¾“å‡ºå®Œå…¨çš„åŒ…åï¼Œåº”ç”¨ä¸»ç±»åï¼Œjarçš„å®Œå…¨è·¯å¾„å -vï¼šè¾“å‡ºä¼ ç»™jvmçš„å‚æ•° -Vï¼šè¾“å‡ºé€šè¿‡æ ‡è®°çš„æ–‡ä»¶ä¼ é€’ç»™JVMçš„å‚æ•°ï¼ˆ.hotspotrcæ–‡ä»¶ï¼Œæˆ–è€…æ˜¯é€šè¿‡å‚æ•°-XX:Flags=æŒ‡å®šçš„æ–‡ä»¶ï¼‰ã€‚ -J ç”¨äºä¼ é€’jvmé€‰é¡¹åˆ°ç”±javacè°ƒç”¨çš„javaåŠ è½½å™¨ä¸­ï¼Œä¾‹å¦‚ï¼Œâ€œ-J-Xms48mâ€å°†æŠŠå¯åŠ¨å†…å­˜è®¾ç½®ä¸º48Mï¼Œä½¿ç”¨-Jé€‰é¡¹å¯ä»¥éå¸¸æ–¹ä¾¿çš„å‘åŸºäºJavaçš„å¼€å‘çš„åº•å±‚è™šæ‹Ÿæœºåº”ç”¨ç¨‹åºä¼ é€’å‚æ•°ã€‚ jstackjstackç”¨äºæ‰“å°å‡ºç»™å®šçš„javaè¿›ç¨‹IDæˆ–core fileæˆ–è¿œç¨‹è°ƒè¯•æœåŠ¡çš„Javaå †æ ˆä¿¡æ¯ï¼Œå¦‚æœæ˜¯åœ¨64ä½æœºå™¨ä¸Šï¼Œéœ€è¦æŒ‡å®šé€‰é¡¹â€-J-d64â€ï¼ŒWindowsçš„jstackä½¿ç”¨æ–¹å¼åªæ”¯æŒä»¥ä¸‹çš„è¿™ç§æ–¹å¼ï¼š jstack [-l] pid å¦‚æœjavaç¨‹åºå´©æºƒç”Ÿæˆcoreæ–‡ä»¶ï¼Œjstackå·¥å…·å¯ä»¥ç”¨æ¥è·å¾—coreæ–‡ä»¶çš„java stackå’Œnative stackçš„ä¿¡æ¯ï¼Œä»è€Œå¯ä»¥è½»æ¾åœ°çŸ¥é“javaç¨‹åºæ˜¯å¦‚ä½•å´©æºƒå’Œåœ¨ç¨‹åºä½•å¤„å‘ç”Ÿé—®é¢˜ã€‚å¦å¤–ï¼Œjstackå·¥å…·è¿˜å¯ä»¥é™„å±åˆ°æ­£åœ¨è¿è¡Œçš„javaç¨‹åºä¸­ï¼Œçœ‹åˆ°å½“æ—¶è¿è¡Œçš„javaç¨‹åºçš„java stackå’Œnative stackçš„ä¿¡æ¯, å¦‚æœç°åœ¨è¿è¡Œçš„javaç¨‹åºå‘ˆç°hungçš„çŠ¶æ€ï¼Œjstackæ˜¯éå¸¸æœ‰ç”¨çš„ã€‚ jstack -helpUsage: jstack [-l] &lt;pid&gt; (to connect to running process) jstack -F [-m] [-l] &lt;pid&gt; (to connect to a hung process) jstack [-m] [-l] &lt;executable&gt; &lt;core&gt; (to connect to a core file) jstack [-m] [-l] [server_id@]&lt;remote server IP or hostname&gt; (to connect to a remote debug server) Options: -F to force a thread dump. Use when jstack &lt;pid&gt; does not respond (process is hung)(å½“â€™jstack [-l] pidâ€™æ²¡æœ‰ç›¸åº”çš„æ—¶å€™å¼ºåˆ¶æ‰“å°æ ˆä¿¡æ¯) -m to print both java and native frames (mixed mode)(æ‰“å°javaå’Œnative c/c++æ¡†æ¶çš„æ‰€æœ‰æ ˆä¿¡æ¯.) -l long listing. Prints additional information about locks (é•¿åˆ—è¡¨. æ‰“å°å…³äºé”çš„é™„åŠ ä¿¡æ¯,ä¾‹å¦‚å±äºjava.util.concurrentçš„ownable synchronizersåˆ—è¡¨.) -h or -help to print this help message (æ‰“å°å¸®åŠ©ä¿¡æ¯) jstatJstat ç”¨äºç›‘æ§åŸºäºHotSpotçš„JVMï¼Œå¯¹å…¶å †çš„ä½¿ç”¨æƒ…å†µè¿›è¡Œå®æ—¶çš„å‘½ä»¤è¡Œçš„ç»Ÿè®¡ï¼Œä½¿ç”¨jstatæˆ‘ä»¬å¯ä»¥å¯¹æŒ‡å®šçš„JVMåšå¦‚ä¸‹ç›‘æ§ï¼š ç±»çš„åŠ è½½åŠå¸è½½æƒ…å†µ æŸ¥çœ‹æ–°ç”Ÿä»£ã€è€ç”Ÿä»£åŠæŒä¹…ä»£çš„å®¹é‡åŠä½¿ç”¨æƒ…å†µ æŸ¥çœ‹æ–°ç”Ÿä»£ã€è€ç”Ÿä»£åŠæŒä¹…ä»£çš„åƒåœ¾æ”¶é›†æƒ…å†µï¼ŒåŒ…æ‹¬åƒåœ¾å›æ”¶çš„æ¬¡æ•°åŠåƒåœ¾å›æ”¶æ‰€å ç”¨çš„æ—¶é—´ æŸ¥çœ‹æ–°ç”Ÿä»£ä¸­EdenåŒºåŠSurvioråŒºä¸­å®¹é‡åŠåˆ†é…æƒ…å†µç­‰ jstat -help Usage: jstat -help|-options jstat -&lt;option&gt; [-t] [-h&lt;lines&gt;] &lt;vmid&gt; [&lt;interval&gt; [&lt;count&gt;]] Definitions:&gt; An option reported by the -options option Virtual Machine Identifier. A vmid takes the following form: [@[:]] Where is the local vm identifier for the target Java virtual machine, typically a process id; is the name of the host running the target Java virtual machine; and is the port number for the rmiregistry on the target host. See the jvmstat documentation for a more complete description of the Virtual Machine Identifier. Number of samples between header lines. Sampling interval. The following forms are allowed: [â€œmsâ€|â€sâ€] Where is an integer and the suffix specifies the units as milliseconds(â€œmsâ€) or seconds(â€œsâ€). The default units are â€œmsâ€. Number of samples to take before terminating. -J Pass directly to the runtime system. å‚è€ƒæ–‡ç« 1ã€jstatå‘½ä»¤è¯¦è§£ 2ã€jstatå‘½ä»¤(Java Virtual Machine Statistics Monitoring Tool) 3ã€http://docs.oracle.com/javase/1.5.0/docs/tooldocs/share/jstat.html#class_option jmapæ‰“å°å‡ºæŸä¸ªjavaè¿›ç¨‹ï¼ˆä½¿ç”¨pidï¼‰å†…å­˜å†…çš„ï¼Œæ‰€æœ‰â€˜å¯¹è±¡â€™çš„æƒ…å†µï¼ˆå¦‚ï¼šäº§ç”Ÿé‚£äº›å¯¹è±¡ï¼ŒåŠå…¶æ•°é‡ï¼‰ã€‚ å¯ä»¥è¾“å‡ºæ‰€æœ‰å†…å­˜ä¸­å¯¹è±¡çš„å·¥å…·ï¼Œç”šè‡³å¯ä»¥å°†VM ä¸­çš„heapï¼Œä»¥äºŒè¿›åˆ¶è¾“å‡ºæˆæ–‡æœ¬ã€‚ä½¿ç”¨æ–¹æ³• jmap -histo pid å¦‚æœè¿ç”¨SHELL jmap -histo pid&gt;a.log å¯ä»¥å°†å…¶ä¿å­˜åˆ°æ–‡æœ¬ä¸­å»ï¼Œåœ¨ä¸€æ®µæ—¶é—´åï¼Œä½¿ç”¨æ–‡æœ¬å¯¹æ¯”å·¥å…·ï¼Œå¯ä»¥å¯¹æ¯”å‡ºGCå›æ”¶äº†å“ªäº›å¯¹è±¡ã€‚ jmap -dump:format=b,file=outfile 3024 å¯ä»¥å°†3024è¿›ç¨‹çš„å†…å­˜heapè¾“å‡ºå‡ºæ¥åˆ°outfileæ–‡ä»¶é‡Œï¼Œå†é…åˆMATï¼ˆå†…å­˜åˆ†æå·¥å…·(Memory Analysis Toolï¼‰ï¼Œä½¿ç”¨å‚è§ï¼šhttp://blog.csdn.net/fenglibing/archive/2011/04/02/6298326.aspxï¼‰æˆ–ä¸jhat (Java Heap Analysis Tool)ä¸€èµ·ä½¿ç”¨ï¼Œèƒ½å¤Ÿä»¥å›¾åƒçš„å½¢å¼ç›´è§‚çš„å±•ç¤ºå½“å‰å†…å­˜æ˜¯å¦æœ‰é—®é¢˜ã€‚ 64ä½æœºä¸Šä½¿ç”¨éœ€è¦ä½¿ç”¨å¦‚ä¸‹æ–¹å¼ï¼š jmap -J-d64 -heap pid jmap -helpUsage: jmap [option] &lt;pid&gt; (to connect to running process) jmap [option] &lt;executable &lt;core&gt; (to connect to a core file) jmap [option] [server_id@]&lt;remote server IP or hostname&gt; (to connect to remote debug server) where is one of: &lt;none&gt; to print same info as Solaris pmap -heap to print java heap summary -histo[:live] to print histogram of java object heap; if the &quot;live&quot; suboption is specified, only count live objects -clstats to print class loader statistics -finalizerinfo to print information on objects awaiting finalization -dump:&lt;dump-options&gt; to dump java heap in hprof binary format dump-options: live dump only live objects; if not specified, all objects in the heap are dumped. format=b binary format file=&lt;file&gt; dump heap to &lt;file&gt; Example: jmap -dump:live,format=b,file=heap.bin &lt;pid&gt; -F force. Use with -dump:&lt;dump-options&gt; &lt;pid&gt; or -histo to force a heap dump or histogram when &lt;pid&gt; does not respond. The &quot;live&quot; suboption is not supported in this mode. -h | -help to print this help message -J&lt;flag&gt; to pass &lt;flag&gt; directly to the runtime system å‚æ•°è¯´æ˜ 1)ã€optionsï¼š executable Java executable from which the core dump was produced.(å¯èƒ½æ˜¯äº§ç”Ÿcore dumpçš„javaå¯æ‰§è¡Œç¨‹åº) core å°†è¢«æ‰“å°ä¿¡æ¯çš„core dumpæ–‡ä»¶ remote-hostname-or-IP è¿œç¨‹debugæœåŠ¡çš„ä¸»æœºåæˆ–ip server-id å”¯ä¸€id,å‡å¦‚ä¸€å°ä¸»æœºä¸Šå¤šä¸ªè¿œç¨‹debugæœåŠ¡ 2ï¼‰ã€åŸºæœ¬å‚æ•°ï¼š -dump:[live,]format=b,file= ä½¿ç”¨hprofäºŒè¿›åˆ¶å½¢å¼,è¾“å‡ºjvmçš„heapå†…å®¹åˆ°æ–‡ä»¶=. liveå­é€‰é¡¹æ˜¯å¯é€‰çš„ï¼Œå‡å¦‚æŒ‡å®šliveé€‰é¡¹,é‚£ä¹ˆåªè¾“å‡ºæ´»çš„å¯¹è±¡åˆ°æ–‡ä»¶. -finalizerinfo æ‰“å°æ­£ç­‰å€™å›æ”¶çš„å¯¹è±¡çš„ä¿¡æ¯. -heap æ‰“å°heapçš„æ¦‚è¦ä¿¡æ¯ï¼ŒGCä½¿ç”¨çš„ç®—æ³•ï¼Œheapçš„é…ç½®åŠwise heapçš„ä½¿ç”¨æƒ…å†µ. -histo[:live] æ‰“å°æ¯ä¸ªclassçš„å®ä¾‹æ•°ç›®,å†…å­˜å ç”¨,ç±»å…¨åä¿¡æ¯. VMçš„å†…éƒ¨ç±»åå­—å¼€å¤´ä¼šåŠ ä¸Šå‰ç¼€â€*â€. å¦‚æœliveå­å‚æ•°åŠ ä¸Šå,åªç»Ÿè®¡æ´»çš„å¯¹è±¡æ•°é‡. -permstat æ‰“å°classloadå’Œjvm heapé•¿ä¹…å±‚çš„ä¿¡æ¯. åŒ…å«æ¯ä¸ªclassloaderçš„åå­—,æ´»æ³¼æ€§,åœ°å€,çˆ¶classloaderå’ŒåŠ è½½çš„classæ•°é‡. å¦å¤–,å†…éƒ¨Stringçš„æ•°é‡å’Œå ç”¨å†…å­˜æ•°ä¹Ÿä¼šæ‰“å°å‡ºæ¥. -F å¼ºè¿«.åœ¨pidæ²¡æœ‰ç›¸åº”çš„æ—¶å€™ä½¿ç”¨-dumpæˆ–è€…-histoå‚æ•°. åœ¨è¿™ä¸ªæ¨¡å¼ä¸‹,liveå­å‚æ•°æ— æ•ˆ. -h | -help æ‰“å°è¾…åŠ©ä¿¡æ¯ -J ä¼ é€’å‚æ•°ç»™jmapå¯åŠ¨çš„jvm. pid éœ€è¦è¢«æ‰“å°é…ç›¸ä¿¡æ¯çš„javaè¿›ç¨‹id,åˆ›ä¸šä¸æ‰“å·¥çš„åŒºåˆ« - åšæ–‡é¢„è§ˆ,å¯ä»¥ç”¨jpsæŸ¥é—®. jinfojinfo å¯ä»¥è¾“å‡ºå¹¶ä¿®æ”¹è¿è¡Œæ—¶çš„java è¿›ç¨‹çš„optsã€‚ ç”¨å¤„æ¯”è¾ƒç®€å•ï¼Œç”¨äºè¾“å‡ºJAVAç³»ç»Ÿå‚æ•°åŠå‘½ä»¤è¡Œå‚æ•°ã€‚ ç”¨æ³•æ˜¯ jinfo -opt pid å¦‚ï¼šæŸ¥çœ‹2788çš„MaxPermå¤§å°å¯ä»¥ç”¨ jinfo -flag MaxPermSize 2788ã€‚ jinfo -help Usage: jinfo [option] &lt;pid&gt; (to connect to running process) jinfo [option] &lt;executable &lt;core&gt; (to connect to a core file) jinfo [option] [server_id@]&lt;remote server IP or hostname&gt; (to connect to remote debug server) where is one of: -flag &lt;name&gt; to print the value of the named VM flag -flag [+|-]&lt;name&gt; to enable or disable the named VM flag -flag &lt;name&gt;=&lt;value&gt; to set the named VM flag to the given value -flags to print VM flags -sysprops to print Java system properties &lt;no option&gt; to print both of the above -h | -help to print this help message jconsoleä¸€ä¸ªjava GUIç›‘è§†å·¥å…·ï¼Œå¯ä»¥ä»¥å›¾è¡¨åŒ–çš„å½¢å¼æ˜¾ç¤ºå„ç§æ•°æ®ã€‚å¹¶å¯é€šè¿‡è¿œç¨‹è¿æ¥ç›‘è§†è¿œç¨‹çš„æœåŠ¡å™¨VMã€‚ç”¨javaå†™çš„GUIç¨‹åºï¼Œç”¨æ¥ç›‘æ§VMï¼Œå¹¶å¯ç›‘æ§è¿œç¨‹çš„VMï¼Œéå¸¸æ˜“ç”¨ï¼Œè€Œä¸”åŠŸèƒ½éå¸¸å¼ºã€‚å‘½ä»¤è¡Œé‡Œæ‰“ jconsoleï¼Œé€‰åˆ™è¿›ç¨‹å°±å¯ä»¥äº†ã€‚ éœ€è¦æ³¨æ„çš„å°±æ˜¯åœ¨è¿è¡Œjconsoleä¹‹å‰ï¼Œå¿…é¡»è¦å…ˆè®¾ç½®ç¯å¢ƒå˜é‡DISPLAYï¼Œå¦åˆ™ä¼šæŠ¥é”™è¯¯ï¼ŒLinuxä¸‹è®¾ç½®ç¯å¢ƒå˜é‡å¦‚ä¸‹ï¼š export DISPLAY=:0.0 å¯ä»¥è¿™é‡Œé€‰æ‹©æŸ¥çœ‹æœ¬åœ°è¿›ç¨‹çš„çŠ¶å†µï¼Œè¿˜æ˜¯è¿œç¨‹è¿›ç¨‹çš„çŠ¶å†µ é€šè¿‡è¿™å¼ å›¾å¯ä»¥çœ‹åˆ°å†…å­˜ã€çº¿ç¨‹ã€ç±»åŠCPUä½¿ç”¨çš„ä¸€äº›æƒ…å†µã€‚ jvisualvmå‚è€ƒæ–‡ç« ï¼š ç¨‹åºå‘˜å¿…å¤‡åˆ©å™¨â€”Javaç¨‹åºæ€§èƒ½åˆ†æå·¥å…·Java VisualVMï¼ˆVisual GCï¼‰ jhatç”¨äºå¯¹JAVA heapè¿›è¡Œç¦»çº¿åˆ†æçš„å·¥å…·ï¼Œä»–å¯ä»¥å¯¹ä¸åŒè™šæ‹Ÿæœºä¸­å¯¼å‡ºçš„heapä¿¡æ¯æ–‡ä»¶è¿›è¡Œåˆ†æï¼Œå¦‚Linuxä¸Šå¯¼å‡ºçš„æ–‡ä»¶å¯ä»¥æ‹¿åˆ°WINDOWSä¸Šè¿›è¡Œåˆ†æï¼Œå¯ä»¥æŸ¥æ‰¾è¯¸å¦‚å†…å­˜æ–¹é¢çš„é—®é¢˜ï¼Œä½¿ç”¨æ–¹å¼å¯ä»¥æŸ¥çœ‹è¿™ç¯‡æ–‡ç« ï¼š jhatå‘½ä»¤ ä¸è¿‡jhatå’ŒMATæ¯”è¾ƒèµ·æ¥ï¼Œå°±æ²¡æœ‰MATé‚£ä¹ˆç›´è§‚äº†ï¼ŒMATæ˜¯ä»¥å›¾å½¢ç•Œé¢çš„æ–¹å¼å±•ç°ç»“æœï¼ŒMATçš„ä½¿ç”¨æ–¹å¼å¯ä»¥å‚çœ‹æ–‡ç« ï¼š MAT(Memory Analyzer Tool)å·¥å…·å…¥é—¨ä»‹ç» Usage:jhat [-stack ] [-refs ] [-port ] [-baseline ] [-debug ] [-version] [-h|-help] -J&lt;flag&gt; Pass &lt;flag&gt; directly to the runtime system. For example, -J-mx512m to use a maximum heap size of 512MB -stack false: Turn off tracking object allocation call stack. -refs false: Turn off tracking of references to objects -port &lt;port&gt;: Set the port for the HTTP server. Defaults to 7000 -exclude &lt;file&gt;: Specify a file that lists data members that should be excluded from the reachableFrom query. -baseline &lt;file&gt;: Specify a baseline object dump. Objects in both heap dumps with the same ID and same class will be marked as not being &quot;new&quot;. -debug &lt;int&gt;: Set debug level. 0: No debug output 1: Debug hprof file parsing 2: Debug hprof file parsing, no server -version Report version number -h|-help Print this help and exit &lt;file&gt; The file to read jdbç”¨æ¥å¯¹coreæ–‡ä»¶å’Œæ­£åœ¨è¿è¡Œçš„Javaè¿›ç¨‹è¿›è¡Œå®æ—¶åœ°è°ƒè¯•ï¼Œé‡Œé¢åŒ…å«äº†ä¸°å¯Œçš„å‘½ä»¤å¸®åŠ©æ‚¨è¿›è¡Œè°ƒè¯•ï¼Œå®ƒçš„åŠŸèƒ½å’ŒSun studioé‡Œé¢æ‰€å¸¦çš„dbxéå¸¸ç›¸ä¼¼ï¼Œä½† jdbæ˜¯ä¸“é—¨ç”¨æ¥é’ˆå¯¹Javaåº”ç”¨ç¨‹åºçš„ã€‚ jstatdjstatdæ˜¯ä¸€ä¸ªåŸºäºRMIï¼ˆRemove Method Invocationï¼‰çš„æœåŠ¡ç¨‹åºï¼Œå®ƒç”¨äºç›‘æ§åŸºäºHotSpotçš„JVMä¸­èµ„æºçš„åˆ›å»ºåŠé”€æ¯ï¼Œå¹¶ä¸”æä¾›äº†ä¸€ä¸ªè¿œç¨‹æ¥å£å…è®¸è¿œç¨‹çš„ç›‘æ§å·¥å…·è¿æ¥åˆ°æœ¬åœ°çš„JVMæ‰§è¡Œå‘½ä»¤ã€‚ jstatdæ˜¯åŸºäºRMIçš„ï¼Œæ‰€ä»¥åœ¨è¿è¡Œjstatdçš„æœåŠ¡å™¨ä¸Šå¿…é¡»å­˜åœ¨RMIæ³¨å†Œä¸­å¿ƒï¼Œå¦‚æœæ²¡æœ‰é€šè¿‡é€‰é¡¹â€-p portâ€æŒ‡å®šè¦è¿æ¥çš„ç«¯å£ï¼Œjstatdä¼šå°è¯•è¿æ¥RMIæ³¨å†Œä¸­å¿ƒçš„é»˜è®¤ç«¯å£ã€‚ ç”¨æ³•ï¼š jstatd [-nr] [-p port] [-n rminame] -nr å¦‚æœRMIæ³¨å†Œä¸­å¿ƒæ²¡æœ‰æ‰¾åˆ°ï¼Œä¸ä¼šåˆ›å»ºä¸€ä¸ªå†…éƒ¨çš„RMIæ³¨å†Œä¸­å¿ƒã€‚ -p port RMIæ³¨å†Œä¸­å¿ƒçš„ç«¯å£å·ï¼Œé»˜è®¤ä¸º1099ã€‚ -n rminame é»˜è®¤ä¸ºJStatRemoteHostï¼›å¦‚æœåŒä¸€å°ä¸»æœºä¸ŠåŒæ—¶è¿è¡Œäº†å¤šä¸ªjstatdæœåŠ¡ï¼Œrminameå¯ä»¥ç”¨äºå”¯ä¸€ç¡®å®šä¸€ä¸ªjstatdæœåŠ¡ï¼›è¿™é‡Œéœ€è¦æ³¨æ„ä¸€ä¸‹ï¼Œå¦‚æœå¼€å¯äº†è¿™ä¸ªé€‰é¡¹ï¼Œé‚£ä¹ˆç›‘æ§å®¢æˆ·ç«¯è¿œç¨‹è¿æ¥æ—¶ï¼Œå¿…é¡»åŒæ—¶æŒ‡å®šhostidåŠvmidï¼Œæ‰å¯ä»¥å”¯ä¸€ç¡®å®šè¦è¿æ¥çš„æœåŠ¡ï¼Œè¿™ä¸ªå¯ä»¥å‚çœ‹jpsç« èŠ‚ä¸­åˆ—å‡ºè¿œç¨‹æœåŠ¡å™¨ä¸ŠJavaè¿›ç¨‹çš„ç¤ºä¾‹ã€‚ -J ç”¨äºä¼ é€’jvmé€‰é¡¹åˆ°ç”±javacè°ƒç”¨çš„javaåŠ è½½å™¨ä¸­ï¼Œä¾‹å¦‚ï¼Œâ€œ-J-Xms48mâ€å°†æŠŠå¯åŠ¨å†…å­˜è®¾ç½®ä¸º48Mï¼Œä½¿ç”¨-Jé€‰é¡¹å¯ä»¥éå¸¸æ–¹ä¾¿çš„å‘åŸºäºJavaçš„å¼€å‘çš„åº•å±‚è™šæ‹Ÿæœºåº”ç”¨ç¨‹åºä¼ é€’å‚æ•°ã€‚ å‚è€ƒæ–‡ç«  JDKå†…ç½®å·¥å…·ä½¿ç”¨","tags":[{"name":"JVM","slug":"JVM","permalink":"http://yoursite.com/tags/JVM/"},{"name":"æ€§èƒ½è°ƒä¼˜å·¥å…·","slug":"æ€§èƒ½è°ƒä¼˜å·¥å…·","permalink":"http://yoursite.com/tags/æ€§èƒ½è°ƒä¼˜å·¥å…·/"}]},{"title":"å¥‡æ€ªçš„Javaé¢˜ï¼šä¸ºä»€ä¹ˆ128 == 128è¿”å›ä¸ºFalseï¼Œè€Œ127 == 127ä¼šè¿”å›ä¸ºTrue?","date":"2017-06-12T16:00:00.000Z","path":"2017/06/13/å¥‡æ€ªçš„Javaé¢˜ï¼šä¸ºä»€ä¹ˆ128 == 128è¿”å›ä¸ºFalseï¼Œè€Œ127 == 127ä¼šè¿”å›ä¸ºTrue-/","text":"è¿™æ˜¯æˆ‘ä»¬ä»Šå¤©è¦è®¨è®ºçš„è¯é¢˜ï¼Œå› ä¸ºæˆ‘è§‰å¾—å®ƒéå¸¸çš„æœ‰è¶£ã€‚ å¦‚æœä½ è¿è¡Œå¦‚ä¸‹ä»£ç ï¼š 12345678910class A&#123; public static void main(String[] args) &#123; Integer a = 128, b = 128; System.out.println(a == b); Integer c = 127, d = 127; System.out.println(c == d); &#125;&#125; ä½ ä¼šå¾—åˆ°å¦‚ä¸‹ç»“æœï¼š 12falsetrue æˆ‘ä»¬çŸ¥é“ï¼Œå¦‚æœä¸¤ä¸ªå¼•ç”¨æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆ==å°±æˆç«‹ï¼›åä¹‹ï¼Œå¦‚æœä¸¤ä¸ªå¼•ç”¨æŒ‡å‘çš„ä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆ==å°±ä¸æˆç«‹ï¼Œå³ä¾¿ä¸¤ä¸ªå¼•ç”¨çš„å†…å®¹æ˜¯ä¸€æ ·çš„ã€‚å› æ­¤ï¼Œç»“æœå°±ä¼šå‡ºç°falseã€‚ è¿™æ˜¯éå¸¸æœ‰è¶£çš„åœ°æ–¹ã€‚å¦‚æœä½ æŸ¥çœ‹Integer.javaç±»ï¼Œä½ ä¼šæ‰¾åˆ°IntegerCache.javaè¿™ä¸ªå†…éƒ¨ç§æœ‰ç±»ï¼Œå®ƒä¸º-128åˆ°127ä¹‹é—´çš„æ‰€æœ‰æ•´æ•°å¯¹è±¡æä¾›ç¼“å­˜ã€‚ è¿™ä¸ªä¸œè¥¿ä¸ºé‚£äº›æ•°å€¼æ¯”è¾ƒå°çš„æ•´æ•°æä¾›å†…éƒ¨ç¼“å­˜ï¼Œå½“è¿›è¡Œå¦‚æ­¤å£°æ˜æ—¶ï¼š 1Integer c = 127 å®ƒçš„å†…éƒ¨å°±æ˜¯è¿™æ ·çš„ï¼š 1Integer var3 = Integer.valueOf(127); å…¶å®æˆ‘é€šè¿‡å°†A.classæ–‡ä»¶åç¼–è¯‘åï¼Œä»£ç å¦‚ä¸‹å›¾ï¼š å¦‚æœæˆ‘ä»¬è§‚å¯ŸvalueOf()ç±»å‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼š 12345public static Integer valueOf(int i) &#123; if (i &gt;= IntegerCache.low &amp;&amp; i &lt;= IntegerCache.high) return IntegerCache.cache[i + (-IntegerCache.low)]; return new Integer(i); &#125; é€šè¿‡çœ‹æºç èƒ½å¤ŸçŸ¥é“ï¼Œæ•´æ•°ç±»å‹åœ¨-128ï½127ä¹‹é—´æ—¶ï¼Œä¼šä½¿ç”¨ç¼“å­˜ï¼Œé€ æˆçš„æ•ˆæœå°±æ˜¯ï¼Œå¦‚æœå·²ç»åˆ›å»ºäº†ä¸€ä¸ªç›¸åŒçš„æ•´æ•°ï¼Œä½¿ç”¨valueOfåˆ›å»ºç¬¬äºŒæ¬¡æ—¶ï¼Œä¸ä¼šä½¿ç”¨newå…³é”®å­—ï¼Œè€Œç”¨å·²ç»ç¼“å­˜çš„å¯¹è±¡ã€‚æ‰€ä»¥ä½¿ç”¨valueOfæ–¹æ³•åˆ›å»ºä¸¤æ¬¡å¯¹è±¡ï¼Œè‹¥å¯¹åº”çš„æ•°å€¼ç›¸åŒï¼Œä¸”æ•°å€¼åœ¨-128ï½127ä¹‹é—´æ—¶ï¼Œä¸¤ä¸ªå¯¹è±¡éƒ½æŒ‡å‘åŒä¸€ä¸ªåœ°å€ã€‚ å› æ­¤ã€‚ã€‚ã€‚ 1Integer c = 127, d = 127; ä¸¤è€…æŒ‡å‘åŒæ ·çš„å¯¹è±¡ã€‚ è¿™å°±æ˜¯ä¸ºä»€ä¹ˆä¸‹é¢è¿™æ®µä»£ç çš„ç»“æœä¸ºtrueäº†ï¼š 1System.out.println(c == d); ç°åœ¨ä½ å¯èƒ½ä¼šé—®ï¼Œä¸ºä»€ä¹ˆä¼šä¸º-128åˆ°127ä¹‹é—´çš„æ‰€æœ‰æ•´æ•°è®¾ç½®ç¼“å­˜ï¼Ÿ è¿™æ˜¯å› ä¸ºåœ¨è¿™ä¸ªèŒƒå›´å†…çš„å°æ•°å€¼æ•´æ•°åœ¨æ—¥å¸¸ç”Ÿæ´»ä¸­çš„ä½¿ç”¨é¢‘ç‡è¦æ¯”å…¶å®ƒçš„å¤§å¾—å¤šï¼Œå¤šæ¬¡ä½¿ç”¨ç›¸åŒçš„åº•å±‚å¯¹è±¡è¿™ä¸€ç‰¹æ€§å¯ä»¥é€šè¿‡è¯¥è®¾ç½®è¿›è¡Œæœ‰æ•ˆçš„å†…å­˜ä¼˜åŒ–ã€‚ä½ å¯ä»¥ä½¿ç”¨reflection APIä»»æ„ä½¿ç”¨è¿™ä¸ªåŠŸèƒ½ã€‚ è¿è¡Œä¸‹é¢çš„è¿™æ®µä»£ç ï¼Œä½ å°±ä¼šæ˜ç™½å®ƒçš„ç¥å¥‡æ‰€åœ¨äº†ã€‚ 12345678910111213public static void main(String[] args) throws NoSuchFieldException, IllegalAccessException &#123; Class cache = Integer.class.getDeclaredClasses()[0]; Field myCache = cache.getDeclaredField(&quot;cache&quot;); myCache.setAccessible(true); Integer[] newCache = (Integer[]) myCache.get(cache); newCache[132] = newCache[133]; int a = 2; int b = a + a; System.out.printf(&quot;%d + %d = %d&quot;, a, a, b); // &#125; æ‰“å°ç»“æœç«Ÿç„¶æ˜¯ï¼š 12 + 2 = 5 æˆ‘ä»¬å†æ¬¡çœ‹ä¸€ä¸‹åæ±‡ç¼–ä»£ç ï¼š æ˜¯ä¸æ˜¯åˆå’Œä¸Šé¢çš„æ˜¯åŒä¸€ä¸ªé—®é¢˜å‘¢ï¼Ÿ ä½†æ˜¯ç»“æœä¸ºä»€ä¹ˆæ˜¯ 2 + 2 = 5 å‘¢ï¼Ÿ æˆ‘ä»¬ç»§ç»­å»çœ‹ä¸€ä¸‹ Integer æºç ï¼Œå»æ·±å…¥äº†è§£ Integer ç¼“å­˜æœºåˆ¶ï¼Œä¸‹é¢æˆªä¸ªå›¾ï¼š æ ¹æ®æºç å¯ä»¥å‘ç°æœ€åä¿®æ”¹ Integer ç¼“å­˜ä¸Šé™æ—¶å€™çš„æ–¹æ³•æœ‰ç‚¹å°ç‘•ç–µã€‚æˆ‘ä»¬çœ‹çœ‹Apiç»™æˆ‘ä»¬æ€ä¹ˆå»ºè®®çš„ä¸€æ®µè¯ï¼š1the size of the cache may be controlled by the &#123;@code -XX:AutoBoxCacheMax=&lt;size&gt;&#125; option. åŸæ¥æˆ‘ä»¬åªéœ€è¦ï¼šè¿è¡Œæ—¶è®¾ç½® -XX:AutoBoxCacheMax=133 å°±OKã€‚ å‚è€ƒæ–‡ç« ï¼š å¥‡æ€ªçš„Javaé¢˜ï¼šä¸ºä»€ä¹ˆ1000 == 1000è¿”å›ä¸ºFalseï¼Œè€Œ100 == 100ä¼šè¿”å›ä¸ºTrue?","tags":[{"name":"Java","slug":"Java","permalink":"http://yoursite.com/tags/Java/"}]},{"title":"åˆ©ç”¨Github Page æ­å»ºä¸ªäººåšå®¢ç½‘ç«™","date":"2017-06-12T16:00:00.000Z","path":"2017/06/13/åˆ©ç”¨Github Page æ­å»ºä¸ªäººåšå®¢ç½‘ç«™/","text":"å‰è¨€æœ€è¿‘è¿™å‡ å¤©ï¼Œæ²¡äº‹å¹²ï¼Œæƒ³æ‰¾ç‚¹äº‹æŠ˜è…¾ä¸‹ï¼Œäºæ˜¯è‡ªå·±ä¾¿æƒ³åˆ°äº†è‡ªå·±ä¸€ç›´æƒ³å¹²çš„ä¸€ä»¶äº‹ï¼šæ­å»ºä¸€ä¸ªå±äºè‡ªå·±çš„åšå®¢ç½‘ç«™ã€‚ç›®å‰æ­å»ºä¸ªäºº blog ç½‘ç«™æœ€å¥½çš„æ˜¯ç”¨ wordpress ï¼Œä½†æ˜¯é‚£ä¸ªæŠ˜è…¾èµ·æ¥å¥½åƒè¿˜æŒºéº»çƒ¦çš„ï¼Œå†åŠ ä¸Šè¿˜éœ€è¦è‡ªå·±ä¿®æ”¹äº›å‰ç«¯ä»£ç å’Œç”¨ PHP åšï¼ˆè™½ç„¶æˆ‘å­¦äº†å‡ å¤©æ‹é»„ç‰‡ï¼Œä½†æ˜¯æ—©å·²å¿˜äº†ï¼‰ï¼Œç„¶åå°±æ˜¯ç”¨ Github Page å§ï¼Œè‡ªå·±ä¹Ÿä¸€ç›´åœ¨è¿™ä¸ªæœ€å¤§çš„äº¤å‹ç½‘ç«™è£… X ã€‚æƒ³æƒ³å°±ç”¨è¿™ä¸ªå§ï¼ˆåæ¥å¥½åƒè§‰å¾—è¿™ä¸ªè¿˜æŒºçœäº‹çš„ï¼‰ å†è¯´è¯´æ‹¥æœ‰ä¸ªäººåšå®¢ç½‘ç«™çš„å¥½å¤„å§ï¼š è£… Xï¼ˆå¦‚æœç½‘ç«™å¤Ÿç‚«ï¼‰ å¾ˆå¥½çš„ç”¨æ¥æ€»ç»“è‡ªå·±æ‰€å­¦çš„çŸ¥è¯† é¢è¯•åŠ åˆ†ï¼ˆåœ¨ç®€å†ä¸Šæ”¾ä¸Šè‡ªå·±çš„ä¸ªäººç½‘ç«™é“¾æ¥ï¼Œé¢è¯•å®˜å°±å¯ä»¥æ›´å¥½çš„äº†è§£ä½ ï¼ŒçŸ¥é“ä½ æ‰€å­¦çŸ¥è¯†çš„æ·±åº¦å’Œå¹¿åº¦ï¼‰ ä¸å†å—å…¶ä»–åšå®¢å¹³å°çš„è§„åˆ™æ‰€æŸç¼š å¦‚æœä½ ç°åœ¨è¿˜æ²¡æœ‰è‡ªå·±ä¸ªäººåšå®¢ç½‘ç«™çš„è¯ï¼Œé‚£ä¹ˆæˆ‘è§‰å¾—ä½ çœ‹å®Œæœ¬ç¯‡åšå®¢åï¼Œå¼ºçƒˆçš„å»ºè®®ä½ å»æŠ˜è…¾æŠ˜è…¾ä¸‹ï¼Œæä¸ªè‡ªå·±çš„ï¼Œè®©è‡ªå·±ä¹Ÿèƒ½å¤Ÿä½“éªŒè£… X çš„æ„Ÿè§‰ã€‚ è¦æƒ³ç”¨æ­å»ºä¸€ä¸ªä¸ªäººåšå®¢ç½‘ç«™ï¼Œé¦–å…ˆä½ å¾—æœ‰ä¸€ä¸ªåŸŸåï¼Œè¿™æ ·åˆ«äººæ‰å¯ä»¥é€šè¿‡åŸŸåè®¿é—®ï¼Œå…¶æ¬¡ä½ è¿˜è¦ä¸€ä¸ªç©ºé—´æ¥å­˜æ”¾ä½ çš„é¡µé¢ã€‚ åŸŸå åŸŸåçš„è¯ï¼Œä½ å¯ä»¥åœ¨ä¸‡ç½‘ã€é˜¿é‡Œäº‘ã€è…¾è®¯äº‘ç­‰æ³¨å†Œï¼Œæˆ‘çš„åŸŸå www.54tianzhisheng.cn å°±æ˜¯åœ¨è…¾è®¯äº‘æ³¨å†Œçš„ï¼Œè®°å¾—æ˜¯è…¾è®¯äº‘ä¸€å…ƒé’±ï¼ˆä¸€ä¸ªåŸŸå+ä¸»æœºï¼‰æçš„ï¼Œè¿™æ˜¯è…¾è®¯äº‘å¯¹å­¦ç”Ÿæ‰æœ‰è¿™ä¼˜æƒ ã€‚ .cn çš„åŸŸåéœ€è¦å¤‡æ¡ˆï¼Œå¤‡æ¡ˆçš„å®¡æ ¸é€Ÿåº¦æˆ‘è§‰å¾—è¿˜æ˜¯æŒºå¿«çš„ï¼Œè¿˜éœ€è¦ä¸Šä¼ è¯ä»¶ã€‚å½“ç„¶ä½ ä¹Ÿå¯ä»¥ä¹°å…¶ä»–çš„é‚£äº›ä¸éœ€è¦å¤‡æ¡ˆçš„åŸŸåï¼Œçœå¾—éº»çƒ¦äº‹ã€‚ ç©ºé—´ ç©ºé—´æœ‰å…è´¹çš„ç©ºé—´ï¼Œä¹Ÿæœ‰æ”¶è´¹çš„ç©ºé—´ã€‚å…è´¹çš„å½“ç„¶å°±ä¸å¤Ÿç¨³å®šäº†ï¼Œæ”¶è´¹çš„å°±å¾ˆè´µäº†ï¼Œç»ˆç©¶æ˜¯å¾ˆä¸çˆ½ï¼Œæœ‰æ²¡æœ‰ä»€ä¹ˆåœ°æ–¹æ˜¯æ—¢å…è´¹åˆç¨³å®šçš„ç©ºé—´å‘¢ï¼Ÿæœ‰ï¼ŒGithub ã€‚å®ƒå…è®¸ä¸Šä¼ ä¸ªäººç½‘ç«™é¡¹ç›®å¹¶è‡ªå®šä¹‰ä½ çš„åŸŸåï¼Œè€Œä¸”åˆæœ‰ç¨³å®šçš„æœåŠ¡ï¼Œå®åœ¨æ˜¯ä¸èƒ½å¤Ÿåœ¨å¥½äº†ã€‚ ä¸‹é¢å°±ä¸€èµ·è·Ÿç€æˆ‘æ¥ä¸€æ­¥ä¸€æ­¥çš„åˆ©ç”¨ Github æ­å»ºä¸ªäººåšå®¢ç½‘ç«™å§ï¼ 1. æ‹¥æœ‰ä¸€ä¸ªåŸŸåè¿™ä¸ªæ­¥éª¤æˆ‘å°±ä¸è¯¦è¿°äº†ã€‚ ä¸¾ä¾‹ï¼š æ‰“å¼€è…¾è®¯äº‘å®˜ç½‘ æœç´¢ä½ æƒ³è¦çš„åŸŸåï¼Œä¸‹å•ä¹°ä¸€ä¸ª 2. æ‹¥æœ‰ä¸€ä¸ª Githubè´¦å·äº’è”ç½‘å´‡å°šè‡ªç”±ä¸åˆ†äº«ã€‚Github æ˜¯ä¸€ä¸ªå…¨ä¸–ç•Œç¨‹åºå‘˜èšé›†çš„åœ°æ–¹ï¼Œå¤§å®¶ç›¸äº’åˆ†äº«è‡ªå·±å†™çš„ä»£ç ï¼Œæå‡åˆ«äººï¼Œä¹Ÿæå‡è‡ªå·±ã€‚å¤§å®¶éƒ½åœ¨ä¸ºç€å¼€æºç¤¾åŒºåŠªåŠ›ç€ã€‚å› ä¸ºæˆ‘ä»å¼€æºé¡¹ç›®ä¸­å­¦åˆ°å¾ˆå¤šçŸ¥è¯†ï¼Œæ‰€ä»¥æˆ‘ä¹Ÿéå¸¸æ„¿æ„åˆ†äº«æˆ‘çš„æ‰€è§æ‰€å­¦æ‰€å¾—ï¼Œæˆ‘çš„ Github ä¸»é¡µï¼šhttps://github.com/zhisheng17 ï¼ˆæ¬¢è¿ follow å’Œå¯¹æˆ‘çš„é¡¹ç›®ç»™ä¸ª star æˆ–è€… fork æˆ‘çš„é¡¹ç›®ä¸€èµ·æ¥å’Œæˆ‘å®Œå–„é¡¹ç›®ï¼‰ å¦‚æœè¿˜æ²¡æœ‰ Github è´¦å·çš„è¯ä½ å°±å…ˆå»æ³¨å†Œä¸€ä¸ªå§ï¼Œæœ‰çš„è¯ï¼Œç›´æ¥ç™»å½•å°±è¡Œï¼Œåé¢çš„æ“ä½œéƒ½è¦ç”¨åˆ° Github çš„ã€‚ 3. Github ä¸Šæ–°å»ºä¸ªäººç½‘ç«™é¡¹ç›®ç™»å½• GitHub ä¹‹åï¼Œåœ¨é¡µé¢å³ä¸Šè§’ç‚¹å‡» + åŠ å·æŒ‰é’®ï¼Œç‚¹å‡» New repositoryã€‚ ç”±äºæˆ‘ä»¬æ˜¯æ–°å»ºä¸€ä¸ªä¸ªäººç½‘ç«™é¡¹ç›®ï¼Œæ‰€æœ‰ä»“åº“çš„åç§°éœ€è¦å®‰è£… GitHub ä¸ªäººç½‘ç«™é¡¹ç›®çš„è§„å®šæ¥å†™ã€‚ è§„åˆ™å°±æ˜¯ï¼š YOUR-GITHUB-USERNAME.github.io æ¯”å¦‚æˆ‘çš„ GitHub ç”¨æˆ·åæ˜¯ zhisheng17ï¼Œé‚£æˆ‘å°±è¦å¡«å†™ zhisheng17.github.ioã€‚ç„¶åé€‰æ‹©å…¬å¼€æ¨¡å¼ï¼Œæ¥ç€ç‚¹å‡»åˆ›å»ºä»“åº“æŒ‰é’®ã€‚ åˆ›å»ºæˆåŠŸä¹‹åï¼Œè¿›å…¥äº†é¡¹ç›®ä¸»é¡µé¢ã€‚ç‚¹å‡»è®¾ç½®æŒ‰é’®ã€‚ è¿›å…¥ä¹‹åï¼Œæ»šåŠ¨é¡µé¢åˆ°ä¸‹æ–¹ã€‚ç‚¹å‡»é¡µé¢è‡ªåŠ¨ç”Ÿæˆå™¨æŒ‰é’®ã€‚ ç‚¹å‡»å³ä¸‹æ–¹ç»§ç»­å»å¸ƒå±€æŒ‰é’®ã€‚ é€‰æ‹©ä¸€ä¸ªæ¨¡æ¿ï¼Œç‚¹å‡»å‘å¸ƒé¡µé¢æŒ‰é’®ã€‚ è¿™ä¸ªæ—¶å€™ï¼Œä½ å°±å¯ä»¥é€šè¿‡YOUR-GITHUB-USERNAME.github.ioæ¥è®¿é—®æ­¤é¡µé¢äº†ã€‚ 4. ä¸Šä¼ ä¸ªäººç½‘é¡µåˆ° Githubè‡ªåŠ¨ç”Ÿæˆé¡µé¢ï¼Œè‚¯å®šä¸ç¬¦åˆæˆ‘ä»¬çš„è¦æ±‚ï¼Œæˆ‘ä»¬å¸Œæœ›èƒ½å¤Ÿè‡ªå·±è®¾è®¡è‡ªå·±çš„ä¸ªäººç½‘ç«™ã€‚æˆ‘ä»¬å¯ä»¥è‡ªå·±ç¼–å†™ä¸€ä¸ªç½‘é¡µæ–‡ä»¶ï¼Œå‘½åä¸º index.htmlã€‚ç„¶åä¸Šä¼ åˆ° GitHubä¸ªäººç½‘ç«™é¡¹ç›®ä¸Šã€‚è¿™é‡Œä¸ºäº†èŠ‚çº¦æ—¶é—´ï¼Œå¯ä»¥å…ˆä¸‹è½½æˆ‘çš„ä¸ªäººç½‘ç«™é¡¹ç›®ä»£ç ï¼Œç„¶åä¿®æ”¹ä¸ºä½ çš„ç½‘é¡µä¸Šä¼ åˆ° GitHubã€‚ ä¸‹é¢ä»‹ç»è¯¦ç»†æ­¥éª¤ã€‚ è¿›å…¥æ­¤é¡¹ç›®https://github.com/zhisheng17/zhisheng17.github.ioï¼Œç„¶åä¸‹è½½æºç ã€‚è§£å‹ä¹‹åï¼Œæ‹¿åˆ°é‡Œé¢çš„index.htmlæ–‡ä»¶ã€‚ ç„¶åè¿›å…¥è‡ªå·±çš„ä¸ªäººç½‘ç«™é¡¹ç›®ä¸»é¡µ YOUR-GITHUB-USERNAME/YOUR-GITHUB-USERNAME.github.ioã€‚ç‚¹å‡»ä¸Šä¼ æ–‡ä»¶æŒ‰é’®ï¼Œè¿›å…¥ä¸Šä¼ æ–‡ä»¶é¡µé¢ï¼Œå°† index.html æ–‡ä»¶æ‹–å…¥è“è‰²å¤§åœˆåœˆåŒºåŸŸï¼Œç‚¹å‡»æäº¤æŒ‰é’®å³å¯æäº¤æˆåŠŸã€‚æ­¤æ—¶æ‰“å¼€ç½‘å€ YOUR-GITHUB-USERNAME.github.io å°±å¯ä»¥çœ‹åˆ°ä¸»é¡µå·²ç»æ”¹å˜ä¸ºæˆ‘ä»¬è‡ªå·±çš„ç½‘é¡µäº†ã€‚ é€šè¿‡ zhisheng17.github.io æŸ¥çœ‹æ•ˆæœï¼š 5. åŸŸåCNAMEåˆ°ä¸ªäººç½‘ç«™é¡¹ç›®ç½‘é¡µä¸Šä¼ æˆåŠŸäº†ï¼Œæˆ‘ä»¬ä¸æƒ³ä¸€ç›´é€šè¿‡YOUR-GITHUB-USERNAME.github.ioæ¥è®¿é—®æˆ‘ä»¬çš„ä¸ªäººç½‘ç«™ï¼Œè€Œæ˜¯å¸Œæœ›é€šè¿‡è‡ªå·±çš„åŸŸåæ¥è®¿é—®ã€‚ ä¸‹é¢è®²è¿°è¯¦ç»†æ­¥éª¤ã€‚ ç‚¹å‡»æˆ‘ä»¬çš„ä¸ªäººç½‘ç«™é¡¹ç›®è®¾ç½®é€‰é¡¹å¡ï¼Œæ»šåŠ¨åˆ°ä¸‹é¢ï¼Œå°±ä¼šå‘ç°ä¸€ä¸ªè‡ªå®šä¹‰åŸŸåå¡ç‰‡ã€‚è¾“å…¥æˆ‘ä»¬ä¹°çš„åŸŸåï¼Œç„¶åç‚¹å‡»ä¿å­˜ã€‚ æ¥ç€æˆ‘ä»¬è¿˜è¦å°†æˆ‘ä»¬çš„åŸŸåè§£æåˆ°è¿™ä¸ªä¸ªäººç½‘ç«™é¡¹ç›®ä¸Šã€‚å› ä¸ºæˆ‘çš„åŸŸåæ˜¯åœ¨è…¾è®¯äº‘ä¸Šé¢ä¹°çš„ï¼Œæ‰€ä»¥æˆ‘æ‰“å¼€è…¾è®¯äº‘åŸŸåç®¡ç†é¡µé¢ï¼Œè¿›è¡Œç›¸å…³çš„è®¾ç½®ã€‚ æ¥ç€ï¼Œç‚¹å‡»æ·»åŠ ä¸€æ¡åŸŸåè§£æè®°å½•ï¼Œä¸»æœºå¡«å†™wwwï¼Œä»£è¡¨ä½ æ˜¯ä¸€çº§åŸŸåæ¥è®¿é—®ï¼ŒæŒ‡å‘å¡«å†™YOUR-GITHUB-USERNAME.github.ioï¼Œç„¶åç‚¹å‡»ä¿å­˜æŒ‰é’®ã€‚åº”è¯¥è¦ç­‰ä¼šï¼ŒåŸŸåçš„è§£ææ—¶é—´å¯èƒ½ä¸ä¸€æ ·ï¼Œæˆ‘çš„è…¾è®¯äº‘å°±æ˜¯å¾ˆæ…¢çš„ 6. è®¿é—®ä½ çš„åŸŸåæ‰€æœ‰è¿™äº›æ­¥éª¤åšå®Œä¹‹åï¼Œåœ¨æµè§ˆå™¨é‡Œè¾“å…¥è‡ªå·±çš„åŸŸåï¼Œå›è½¦é”®ä¸€æŒ‰ï¼Œå°±ä¼šè¿”å›æˆ‘ä»¬åˆšåˆšä¸Šä¼ åˆ° GitHub çš„index.html é¡µé¢äº†ã€‚ è¿™é‡Œåªæ˜¯å…¥é—¨äº† GitHub æ­å»ºä¸ªäººç½‘ç«™çš„åŠŸèƒ½ï¼ŒGitHub å®˜æ–¹æ¨è Jekyll åšå®¢ç³»ç»Ÿæ¥å‘å¸ƒè‡ªå·±çš„é¡µé¢ã€‚ä»¥åæœ‰æ•°æ®æ›´æ–°ï¼Œéƒ½å¯ä»¥é€šè¿‡ Jekyll æ¥é‡æ–°ç¼–è¯‘æ•´ä¸ªç½‘ç«™ã€‚ï¼ˆæœŸå¾…åç»­æˆ‘çš„ä½¿ç”¨ Jekyll åšå®¢ç³»ç»Ÿå‘å¸ƒè‡ªå·±åšå®¢çš„æ–‡ç« å§ï¼‰ 7. æ³¨æ„äº‹é¡¹å°½ç®¡GitHubä¸ªäººç½‘ç«™é¡¹ç›®æ˜¯å…è´¹çš„ï¼Œä½†æ˜¯å´æœ‰ä¸€äº›é™åˆ¶ã€‚æ€»ä½“æ¥è¯´ï¼Œå®Œå…¨å¤Ÿç”¨ï¼Œç”šè‡³å¤ªå¤šäº†ã€‚ å•ä¸ªä»“åº“å¤§å°ä¸è¶…è¿‡1GBï¼Œä¸Šä¼ å•ä¸ªæ–‡ä»¶å¤§å°ä¸èƒ½è¶…è¿‡100MBï¼Œå¦‚æœé€šè¿‡æµè§ˆå™¨ä¸Šä¼ ä¸èƒ½è¶…è¿‡25MB ä¸ªäººç½‘ç«™é¡¹ç›®ä¹Ÿä¸ä¾‹å¤–ï¼Œæœ€å¤§ç©ºé—´1GB ä¸ªäººç½‘ç«™é¡¹ç›®æ¯ä¸ªæœˆè®¿é—®è¯·æ±‚æ•°ä¸èƒ½è¶…è¿‡10ä¸‡æ¬¡ï¼Œæ€»æµé‡ä¸èƒ½è¶…è¿‡100GB ä¸ªäººç½‘ç«™é¡¹ç›®ä¸€å°æ—¶åˆ›å»ºæ•°é‡ä¸èƒ½è¶…è¿‡10ä¸ª å½“ç„¶äº†ï¼Œè¿™äº›æ”¿ç­–å¯èƒ½éšæ—¶æ”¹å˜ï¼Œå¯ä»¥é€šè¿‡æ­¤ç½‘é¡µæŸ¥çœ‹æœ€æ–°æ”¿ç­–ã€‚ https://help.github.com/articles/what-is-github-pages/#recommended-limits æ–°å¢ç”±äºé—®é¢˜å¤ªå¤šäº†ï¼Œæ‰€ä»¥æ–°å†™äº†ç¯‡æ–‡ç« ï¼šGithub page + Hexo + yilia æ­å»ºåšå®¢å¯èƒ½ä¼šé‡åˆ°çš„æ‰€æœ‰ç–‘é—®","tags":[{"name":"Github Page","slug":"Github-Page","permalink":"http://yoursite.com/tags/Github-Page/"},{"name":"åšå®¢ç½‘ç«™","slug":"åšå®¢ç½‘ç«™","permalink":"http://yoursite.com/tags/åšå®¢ç½‘ç«™/"}]},{"title":"Hexo + yilia ä¸»é¢˜å®ç°æ–‡ç« ç›®å½•","date":"2017-06-12T16:00:00.000Z","path":"2017/06/13/Hexo-yilia-toc/","text":"å‰æä¸ºäº†æ–¹ä¾¿æŸ¥çœ‹æ¯ç¯‡æ–‡ç« çš„ç›®å½•ç»“æ„ï¼Œå¯ä»¥å®šä½åˆ°æƒ³çœ‹çš„åœ°æ–¹ï¼Œç‰¹åœ°æ‰¾äº†ä¸‹å¦‚ä½•å®ç°è¿™ä¸ªåŠŸèƒ½ã€‚ æ·»åŠ  CSS æ ·å¼æ‰“å¼€ themes\\yilia\\source ä¸‹çš„ main.234bc0.css æ–‡ä»¶ï¼Œç›´æ¥åœ¨åé¢æ·»åŠ å¦‚ä¸‹ä»£ç ï¼š123456789/* æ–°æ·»åŠ çš„ */#container .show-toc-btn,#container .toc-article&#123;display:block&#125;.toc-article&#123;z-index:100;background:#fff;border:1px solid #ccc;max-width:250px;min-width:150px;max-height:500px;overflow-y:auto;-webkit-box-shadow:5px 5px 2px #ccc;box-shadow:5px 5px 2px #ccc;font-size:12px;padding:10px;position:fixed;right:35px;top:129px&#125;.toc-article .toc-close&#123;font-weight:700;font-size:20px;cursor:pointer;float:right;color:#ccc&#125;.toc-article .toc-close:hover&#123;color:#000&#125;.toc-article .toc&#123;font-size:12px;padding:0;line-height:20px&#125;.toc-article .toc .toc-number&#123;color:#333&#125;.toc-article .toc .toc-text:hover&#123;text-decoration:underline;color:#2a6496&#125;.toc-article li&#123;list-style-type:none&#125;.toc-article .toc-level-1&#123;margin:4px 0&#125;.toc-article .toc-child&#123;&#125;@-moz-keyframes cd-bounce-1&#123;0%&#123;opacity:0;-o-transform:scale(1);-webkit-transform:scale(1);-moz-transform:scale(1);-ms-transform:scale(1);transform:scale(1)&#125;60%&#123;opacity:1;-o-transform:scale(1.01);-webkit-transform:scale(1.01);-moz-transform:scale(1.01);-ms-transform:scale(1.01);transform:scale(1.01)&#125;100%&#123;-o-transform:scale(1);-webkit-transform:scale(1);-moz-transform:scale(1);-ms-transform:scale(1);transform:scale(1)&#125;&#125;@-webkit-keyframes cd-bounce-1&#123;0%&#123;opacity:0;-o-transform:scale(1);-webkit-transform:scale(1);-moz-transform:scale(1);-ms-transform:scale(1);transform:scale(1)&#125;60%&#123;opacity:1;-o-transform:scale(1.01);-webkit-transform:scale(1.01);-moz-transform:scale(1.01);-ms-transform:scale(1.01);transform:scale(1.01)&#125;100%&#123;-o-transform:scale(1);-webkit-transform:scale(1);-moz-transform:scale(1);-ms-transform:scale(1);transform:scale(1)&#125;&#125;@-o-keyframes cd-bounce-1&#123;0%&#123;opacity:0;-o-transform:scale(1);-webkit-transform:scale(1);-moz-transform:scale(1);-ms-transform:scale(1);transform:scale(1)&#125;60%&#123;opacity:1;-o-transform:scale(1.01);-webkit-transform:scale(1.01);-moz-transform:scale(1.01);-ms-transform:scale(1.01);transform:scale(1.01)&#125;100%&#123;-o-transform:scale(1);-webkit-transform:scale(1);-moz-transform:scale(1);-ms-transform:scale(1);transform:scale(1)&#125;&#125;@keyframes cd-bounce-1&#123;0%&#123;opacity:0;-o-transform:scale(1);-webkit-transform:scale(1);-moz-transform:scale(1);-ms-transform:scale(1);transform:scale(1)&#125;60%&#123;opacity:1;-o-transform:scale(1.01);-webkit-transform:scale(1.01);-moz-transform:scale(1.01);-ms-transform:scale(1.01);transform:scale(1.01)&#125;100%&#123;-o-transform:scale(1);-webkit-transform:scale(1);-moz-transform:scale(1);-ms-transform:scale(1);transform:scale(1)&#125;&#125;.show-toc-btn&#123;display:none;z-index:10;width:30px;min-height:14px;overflow:hidden;padding:4px 6px 8px 5px;border:1px solid #ddd;border-right:none;position:fixed;right:40px;text-align:center;background-color:#f9f9f9&#125;.show-toc-btn .btn-bg&#123;margin-top:2px;display:block;width:16px;height:14px;background:url(http://7xtawy.com1.z0.glb.clouddn.com/show.png) no-repeat;-webkit-background-size:100%;-moz-background-size:100%;background-size:100%&#125;.show-toc-btn .btn-text&#123;color:#999;font-size:12px&#125;.show-toc-btn:hover&#123;cursor:pointer&#125;.show-toc-btn:hover .btn-bg&#123;background-position:0 -16px&#125;.show-toc-btn:hover .btn-text&#123;font-size:12px;color:#ea8010&#125;.toc-article li ol, .toc-article li ul &#123; margin-left: 30px;&#125;.toc-article ol, .toc-article ul &#123; margin: 10px 0;&#125; ä¿®æ”¹ article.ejs æ–‡ä»¶æ‰“å¼€ themes\\yilia\\layout\\_partial æ–‡ä»¶å¤¹ä¸‹çš„ article.ejs æ–‡ä»¶, åœ¨ &lt;/header&gt; &lt;% } %&gt; ä¸‹é¢åŠ å…¥å¦‚ä¸‹å†…å®¹ï¼ˆæ³¨æ„ä½ç½®ï¼‰ 123456789101112131415161718192021222324252627&lt;!-- ç›®å½•å†…å®¹ --&gt;&lt;% if (!index &amp;&amp; post.toc)&#123; %&gt; &lt;p class=&quot;show-toc-btn&quot; id=&quot;show-toc-btn&quot; onclick=&quot;showToc();&quot; style=&quot;display:none&quot;&gt; &lt;span class=&quot;btn-bg&quot;&gt;&lt;/span&gt; &lt;span class=&quot;btn-text&quot;&gt;æ–‡ç« å¯¼èˆª&lt;/span&gt; &lt;/p&gt; &lt;div id=&quot;toc-article&quot; class=&quot;toc-article&quot;&gt; &lt;span id=&quot;toc-close&quot; class=&quot;toc-close&quot; title=&quot;éšè—å¯¼èˆª&quot; onclick=&quot;showBtn();&quot;&gt;Ã—&lt;/span&gt; &lt;strong class=&quot;toc-title&quot;&gt;æ–‡ç« ç›®å½•&lt;/strong&gt; &lt;%- toc(post.content) %&gt; &lt;/div&gt; &lt;script type=&quot;text/javascript&quot;&gt; function showToc()&#123; var toc_article = document.getElementById(&quot;toc-article&quot;); var show_toc_btn = document.getElementById(&quot;show-toc-btn&quot;); toc_article.setAttribute(&quot;style&quot;,&quot;display:block&quot;); show_toc_btn.setAttribute(&quot;style&quot;,&quot;display:none&quot;); &#125;; function showBtn()&#123; var toc_article = document.getElementById(&quot;toc-article&quot;); var show_toc_btn = document.getElementById(&quot;show-toc-btn&quot;); toc_article.setAttribute(&quot;style&quot;,&quot;display:none&quot;); show_toc_btn.setAttribute(&quot;style&quot;,&quot;display:block&quot;); &#125;; &lt;/script&gt; &lt;% &#125; %&gt;&lt;!-- ç›®å½•å†…å®¹ç»“æŸ --&gt; ç„¶åè‹¥æƒ³è¦æ–‡ç« æ˜¾ç¤ºç›®å½•ï¼Œåœ¨æ¯ç¯‡æ–‡ç« å¼€å¤´åŠ å…¥ï¼štoc: true å³å¯ã€‚ å‚è€ƒæ–‡ç« ï¼šHexo+yiliaä¸»é¢˜å®ç°æ–‡ç« ç›®å½•å’Œæ·»åŠ è§†é¢‘ æ–°å¢ç”±äºé—®é¢˜å¤ªå¤šäº†ï¼Œæ‰€ä»¥æ–°å†™äº†ç¯‡æ–‡ç« ï¼šGithub page + Hexo + yilia æ­å»ºåšå®¢å¯èƒ½ä¼šé‡åˆ°çš„æ‰€æœ‰ç–‘é—®","tags":[{"name":"hexo","slug":"hexo","permalink":"http://yoursite.com/tags/hexo/"}]},{"title":"æ·±å…¥åˆ†æ Java Web ä¸­çš„ä¸­æ–‡ç¼–ç é—®é¢˜","date":"2017-06-12T16:00:00.000Z","path":"2017/06/13/æ·±å…¥åˆ†æ Java Web ä¸­çš„ä¸­æ–‡ç¼–ç é—®é¢˜/","text":"èƒŒæ™¯ï¼š ç¼–ç é—®é¢˜ä¸€ç›´å›°æ‰°ç€ç¨‹åºå¼€å‘äººå‘˜ï¼Œå°¤å…¶æ˜¯åœ¨ Java ä¸­æ›´åŠ æ˜æ˜¾ï¼Œå› ä¸º Java æ˜¯è·¨å¹³å°çš„è¯­è¨€ï¼Œåœ¨ä¸åŒå¹³å°çš„ç¼–ç ä¹‹é—´çš„åˆ‡æ¢è¾ƒå¤šã€‚æ¥ä¸‹æ¥å°†ä»‹ç» Java ç¼–ç é—®é¢˜å‡ºç°çš„æ ¹æœ¬åŸå› ï¼›åœ¨ Java ä¸­ç»å¸¸é‡åˆ°çš„å‡ ç§ç¼–ç æ ¼å¼çš„åŒºåˆ«ï¼›åœ¨ Java ä¸­ç»å¸¸éœ€è¦ç¼–ç çš„åœºæ™¯ï¼›å‡ºç°ä¸­æ–‡é—®é¢˜çš„åŸå› åˆ†æï¼›åœ¨å¼€å‘ Java Web ä¸­å¯èƒ½å­˜åœ¨ç¼–ç çš„å‡ ä¸ªåœ°æ–¹ï¼›ä¸€ä¸ª HTTP è¯·æ±‚æ€ä¹ˆæ§åˆ¶ç¼–ç æ ¼å¼ï¼›å¦‚ä½•é¿å…å‡ºç°ä¸­æ–‡ç¼–ç é—®é¢˜ç­‰ã€‚ 1ã€å‡ ç§å¸¸è§çš„ç¼–ç æ ¼å¼1.1 ä¸ºä»€ä¹ˆè¦ç¼–ç  åœ¨è®¡ç®—æœºä¸­å­˜å‚¨ä¿¡æ¯çš„æœ€å°å•å…ƒæ˜¯ 1 ä¸ªå­—èŠ‚ï¼Œå³ 8 ä¸ª bitï¼Œ æ‰€ä»¥èƒ½è¡¨ç¤ºçš„å­—ç¬¦èŒƒå›´æ˜¯ 0 ~ 255 ä¸ªã€‚ è¦è¡¨ç¤ºçš„ç¬¦å·å¤ªå¤šï¼Œæ— æ³•ç”¨ 1 ä¸ªå­—èŠ‚æ¥å®Œå…¨è¡¨ç¤ºã€‚ 1.2 å¦‚ä½•ç¿»è¯‘è®¡ç®—æœºä¸­æä¾›å¤šç§ç¿»è¯‘æ–¹å¼ï¼Œå¸¸è§çš„æœ‰ ASCIIã€ISO-8859-1ã€GB2312ã€GBKã€UTF-8ã€UTF-16ç­‰ã€‚è¿™äº›éƒ½è§„å®šäº†è½¬åŒ–çš„è§„åˆ™ï¼ŒæŒ‰ç…§è¿™ä¸ªè§„åˆ™å°±å¯ä»¥è®©è®¡ç®—æœºæ­£ç¡®çš„è¡¨ç¤ºæˆ‘ä»¬çš„å­—ç¬¦ã€‚ä¸‹é¢ä»‹ç»è¿™å‡ ç§ç¼–ç æ ¼å¼ï¼š ASCII ç  æ€»å…±æœ‰ 128 ä¸ªï¼Œç”¨ 1 ä¸ªå­—èŠ‚çš„ä½ 7 ä½è¡¨ç¤ºï¼Œ 0 ~ 31 æ˜¯æ§åˆ¶å­—ç¬¦å¦‚æ¢è¡Œã€å›è½¦ã€åˆ é™¤ç­‰ï¼Œ32 ~ 126 æ˜¯æ‰“å°å­—ç¬¦ï¼Œå¯ä»¥é€šè¿‡é”®ç›˜è¾“å…¥å¹¶ä¸”èƒ½å¤Ÿæ˜¾ç¤ºå‡ºæ¥ã€‚ ISO-8859-1 128 ä¸ªå­—ç¬¦æ˜¾ç„¶æ˜¯ä¸å¤Ÿç”¨çš„ï¼Œæ‰€ä»¥ ISO ç»„ç»‡åœ¨ ASCII çš„åŸºç¡€ä¸Šæ‰©å±•ï¼Œä»–ä»¬æ˜¯ ISO-8859-1 è‡³ ISO-8859-15ï¼Œå‰è€…æ¶µç›–å¤§å¤šæ•°å­—ç¬¦ï¼Œåº”ç”¨æœ€å¹¿ã€‚ISO-8859-1 ä»æ˜¯å•å­—èŠ‚ç¼–ç ï¼Œå®ƒæ€»å½’èƒ½è¡¨ç¤º 256 ä¸ªå­—ç¬¦ã€‚ GB2312 å®ƒæ˜¯åŒå­—èŠ‚ç¼–ç ï¼Œæ€»çš„ç¼–ç èŒƒå›´æ˜¯ A1 ~ F7ï¼Œå…¶ä¸­ A1 ~ A9 æ˜¯ç¬¦å·åŒºï¼Œæ€»å…±åŒ…å« 682 ä¸ªç¬¦å·ï¼›B0 ~ F7 æ˜¯æ±‰å­—åŒºï¼ŒåŒ…å« 6763 ä¸ªæ±‰å­—ã€‚ GBk GBK ä¸ºã€Šæ±‰å­—å†…ç æ‰©å±•è§„èŒƒã€‹ï¼Œä¸º GB2312 çš„æ‰©å±•ï¼Œå®ƒçš„ç¼–ç èŒƒå›´æ˜¯ 8140 ~ FEFEï¼ˆå»æ‰XX7Fï¼‰ï¼Œæ€»å…±æœ‰ 23940 ä¸ªç ä½ï¼Œèƒ½è¡¨ç¤º 21003 ä¸ªæ±‰å­—ï¼Œå’Œ GB2312çš„ç¼–ç å…¼å®¹ï¼Œä¸ä¼šæœ‰ä¹±ç ã€‚ UTF-16 å®ƒå…·ä½“å®šä¹‰äº† Unicode å­—ç¬¦åœ¨è®¡ç®—æœºä¸­çš„å­˜å–æ–¹æ³•ã€‚UTF-16 ç”¨ä¸¤ä¸ªå­—èŠ‚æ¥è¡¨ç¤º Unicode çš„è½¬åŒ–æ ¼å¼ï¼Œå®ƒé‡‡ç”¨å®šé•¿çš„è¡¨ç¤ºæ–¹æ³•ï¼Œå³ä¸è®ºä»€ä¹ˆå­—ç¬¦ç”¨ä¸¤ä¸ªå­—èŠ‚è¡¨ç¤ºã€‚ä¸¤ä¸ªå­—èŠ‚æ˜¯ 16 ä¸ª bitï¼Œæ‰€ä»¥å« UTF-16ã€‚å®ƒè¡¨ç¤ºå­—ç¬¦éå¸¸æ–¹ä¾¿ï¼Œæ²¡ä¸¤ä¸ªå­—èŠ‚è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ï¼Œè¿™å°±å¤§å¤§ç®€åŒ–äº†å­—ç¬¦ä¸²æ“ä½œã€‚ UTF-8 è™½è¯´ UTF-16 ç»Ÿä¸€é‡‡ç”¨ä¸¤ä¸ªå­—èŠ‚è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦å¾ˆç®€å•æ–¹ä¾¿ï¼Œä½†æ˜¯å¾ˆå¤§ä¸€éƒ¨åˆ†å­—ç¬¦ç”¨ä¸€ä¸ªå­—èŠ‚å°±å¯ä»¥è¡¨ç¤ºï¼Œå¦‚æœç”¨ä¸¤ä¸ªå­—èŠ‚è¡¨ç¤ºï¼Œå­˜å‚¨ç©ºé—´æ”¾å¤§äº†ä¸€å€ï¼Œåœ¨ç½‘ç»œå¸¦å®½æœ‰é™çš„æƒ…å†µä¸‹ä¼šå¢åŠ ç½‘ç»œä¼ è¾“çš„æµé‡ã€‚UTF-8 é‡‡ç”¨äº†ä¸€ç§å˜é•¿æŠ€æœ¯ï¼Œæ¯ä¸ªç¼–ç åŒºåŸŸæœ‰ä¸åŒçš„å­—ç é•¿åº¦ä¸åŒç±»å‹çš„å­—ç¬¦å¯ä»¥ç”± 1 ~ 6 ä¸ªå­—èŠ‚ç»„æˆã€‚ UTF-8 æœ‰ä»¥ä¸‹ç¼–ç è§„åˆ™ï¼š å¦‚æœæ˜¯ 1 ä¸ªå­—èŠ‚ï¼Œæœ€é«˜ä½ï¼ˆç¬¬ 8 ä½ï¼‰ä¸º 0ï¼Œåˆ™è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ª ASCII å­—ç¬¦ï¼ˆ00 ~ 7Fï¼‰ å¦‚æœæ˜¯ 1 ä¸ªå­—èŠ‚ï¼Œä»¥ 11 å¼€å¤´ï¼Œåˆ™è¿ç»­çš„ 1 çš„ä¸ªæ•°æš—ç¤ºè¿™ä¸ªå­—ç¬¦çš„å­—èŠ‚æ•° å¦‚æœæ˜¯ 1 ä¸ªå­—èŠ‚ï¼Œä»¥ 10 å¼€å¤´ï¼Œè¡¨ç¤ºå®ƒä¸æ˜¯é¦–å­—èŠ‚ï¼Œåˆ™éœ€è¦å‘å‰æŸ¥æ‰¾æ‰èƒ½å¾—åˆ°å½“å‰å­—ç¬¦çš„é¦–å­—èŠ‚ â€‹ 2ã€åœ¨ Java ä¸­éœ€è¦ç¼–ç çš„åœºæ™¯2.1 åœ¨ I/O æ“ä½œä¸­å­˜åœ¨çš„ç¼–ç  å¦‚ä¸Šå›¾ï¼šReader ç±»æ˜¯åœ¨ Java çš„ I/O ä¸­è¯»å–ç¬¦çš„çˆ¶ç±»ï¼Œè€Œ InputStream ç±»æ˜¯è¯»å­—èŠ‚çš„çˆ¶ç±»ï¼Œ InputStreamReader ç±»å°±æ˜¯å…³è”å­—èŠ‚åˆ°å­—ç¬¦çš„æ¡¥æ¢ï¼Œå®ƒè´Ÿè´£åœ¨ I/O è¿‡ç¨‹ä¸­å¤„ç†è¯»å–å­—èŠ‚åˆ°å­—ç¬¦çš„è½¬æ¢ï¼Œè€Œå¯¹å…·ä½“å­—èŠ‚åˆ°å­—ç¬¦çš„è§£ç å®ç°ï¼Œå®ƒåˆå§”æ‰˜ StreamDecoder å»åšï¼Œåœ¨ StreamDecoder è§£ç è¿‡ç¨‹ä¸­å¿…é¡»ç”±ç”¨æˆ·æŒ‡å®š Charset ç¼–ç æ ¼å¼ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœä½ æ²¡æœ‰æŒ‡å®š Charsetï¼Œåˆ™å°†ä½¿ç”¨æœ¬åœ°ç¯å¢ƒä¸­é»˜è®¤çš„å­—ç¬¦é›†ï¼Œå¦‚åœ¨ä¸­æ–‡ç¯å¢ƒä¸­å°†ä½¿ç”¨ GBK ç¼–ç ã€‚ å¦‚ä¸‹é¢ä¸€æ®µä»£ç ï¼Œå®ç°äº†æ–‡ä»¶çš„è¯»å†™åŠŸèƒ½ï¼š 12345678910111213141516171819202122232425String file = \"c:/stream.txt\";String charset = \"UTF-8\";// å†™å­—ç¬¦æ¢è½¬æˆå­—èŠ‚æµFileOutputStream outputStream = new FileOutputStream(file);OutputStreamWriter writer = new OutputStreamWriter(outputStream, charset);try &#123; writer.write(\"è¿™æ˜¯è¦ä¿å­˜çš„ä¸­æ–‡å­—ç¬¦\");&#125; finally &#123; writer.close();&#125;// è¯»å–å­—èŠ‚è½¬æ¢æˆå­—ç¬¦FileInputStream inputStream = new FileInputStream(file);InputStreamReader reader = new InputStreamReader(inputStream, charset);StringBuffer buffer = new StringBuffer();char[] buf = new char[64];int count = 0;try &#123; while ((count = reader.read(buf)) != -1) &#123; buffer.append(buffer, 0, count); &#125;&#125; finally &#123; reader.close();&#125; åœ¨æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºä¸­æ¶‰åŠ I/O æ“ä½œæ—¶ï¼Œåªè¦æ³¨æ„æŒ‡å®šç»Ÿä¸€çš„ç¼–è§£ç  Charset å­—ç¬¦é›†ï¼Œä¸€èˆ¬ä¸ä¼šå‡ºç°ä¹±ç é—®é¢˜ã€‚ 2.2 åœ¨å†…å­˜æ“ä½œä¸­çš„ç¼–ç åœ¨å†…å­˜ä¸­è¿›è¡Œä»å­—ç¬¦åˆ°å­—èŠ‚çš„æ•°æ®ç±»å‹è½¬æ¢ã€‚ 1ã€String ç±»æä¾›å­—ç¬¦ä¸²è½¬æ¢åˆ°å­—èŠ‚çš„æ–¹æ³•ï¼Œä¹Ÿæ”¯æŒå°†å­—èŠ‚è½¬æ¢æˆå­—ç¬¦ä¸²çš„æ„é€ å‡½æ•°ã€‚ 123String s = \"å­—ç¬¦ä¸²\"ï¼›byte[] b = s.getBytes(\"UTF-8\");String n = new String(b, \"UTF-8\"); 2ã€Charset æä¾› encode ä¸ decodeï¼Œåˆ†åˆ«å¯¹åº” char[] åˆ° byte[] çš„ç¼–ç  å’Œ byte[] åˆ° char[] çš„è§£ç ã€‚ 123Charset charset = Charset.forName(\"UTF-8\");ByteBuffer byteBuffer = charset.encode(string);CharBuffer charBuffer = charset.decode(byteBuffer); â€¦ 3ã€åœ¨ Java ä¸­å¦‚ä½•ç¼–è§£ç Java ç¼–ç ç±»å›¾ é¦–å…ˆæ ¹æ®æŒ‡å®šçš„ charsetName é€šè¿‡ Charset.forName(charsetName) è®¾ç½® Charset ç±»ï¼Œç„¶åæ ¹æ® Charset åˆ›å»º CharsetEncoder å¯¹è±¡ï¼Œå†è°ƒç”¨ CharsetEncoder.encode å¯¹å­—ç¬¦ä¸²è¿›è¡Œç¼–ç ï¼Œä¸åŒçš„ç¼–ç ç±»å‹éƒ½ä¼šå¯¹åº”åˆ°ä¸€ä¸ªç±»ä¸­ï¼Œå®é™…çš„ç¼–ç è¿‡ç¨‹æ˜¯åœ¨è¿™äº›ç±»ä¸­å®Œæˆçš„ã€‚ä¸‹é¢æ˜¯ String. getBytes(charsetName) ç¼–ç è¿‡ç¨‹çš„æ—¶åºå›¾ Java ç¼–ç æ—¶åºå›¾ ä»ä¸Šå›¾å¯ä»¥çœ‹å‡ºæ ¹æ® charsetName æ‰¾åˆ° Charset ç±»ï¼Œç„¶åæ ¹æ®è¿™ä¸ªå­—ç¬¦é›†ç¼–ç ç”Ÿæˆ CharsetEncoderï¼Œè¿™ä¸ªç±»æ˜¯æ‰€æœ‰å­—ç¬¦ç¼–ç çš„çˆ¶ç±»ï¼Œé’ˆå¯¹ä¸åŒçš„å­—ç¬¦ç¼–ç é›†åœ¨å…¶å­ç±»ä¸­å®šä¹‰äº†å¦‚ä½•å®ç°ç¼–ç ï¼Œæœ‰äº† CharsetEncoder å¯¹è±¡åå°±å¯ä»¥è°ƒç”¨ encode æ–¹æ³•å»å®ç°ç¼–ç äº†ã€‚è¿™ä¸ªæ˜¯ String.getBytes ç¼–ç æ–¹æ³•ï¼Œå…¶å®ƒçš„å¦‚ StreamEncoder ä¸­ä¹Ÿæ˜¯ç±»ä¼¼çš„æ–¹å¼ã€‚ ç»å¸¸ä¼šå‡ºç°ä¸­æ–‡å˜æˆâ€œï¼Ÿâ€å¾ˆå¯èƒ½å°±æ˜¯é”™è¯¯çš„ä½¿ç”¨äº† ISO-8859-1 è¿™ä¸ªç¼–ç å¯¼è‡´çš„ã€‚ä¸­æ–‡å­—ç¬¦ç»è¿‡ ISO-8859-1 ç¼–ç ä¼šä¸¢å¤±ä¿¡æ¯ï¼Œé€šå¸¸æˆ‘ä»¬ç§°ä¹‹ä¸ºâ€œé»‘æ´â€ï¼Œå®ƒä¼šæŠŠä¸è®¤è¯†çš„å­—ç¬¦å¸æ”¶æ‰ã€‚ç”±äºç°åœ¨å¤§éƒ¨åˆ†åŸºç¡€çš„ Java æ¡†æ¶æˆ–ç³»ç»Ÿé»˜è®¤çš„å­—ç¬¦é›†ç¼–ç éƒ½æ˜¯ ISO-8859-1ï¼Œæ‰€ä»¥å¾ˆå®¹æ˜“å‡ºç°ä¹±ç é—®é¢˜ï¼Œåé¢å°†ä¼šåˆ†æä¸åŒçš„ä¹±ç å½¢å¼æ˜¯æ€ä¹ˆå‡ºç°çš„ã€‚ å‡ ç§ç¼–ç æ ¼å¼çš„æ¯”è¾ƒå¯¹ä¸­æ–‡å­—ç¬¦åé¢å››ç§ç¼–ç æ ¼å¼éƒ½èƒ½å¤„ç†ï¼ŒGB2312 ä¸ GBK ç¼–ç è§„åˆ™ç±»ä¼¼ï¼Œä½†æ˜¯ GBK èŒƒå›´æ›´å¤§ï¼Œå®ƒèƒ½å¤„ç†æ‰€æœ‰æ±‰å­—å­—ç¬¦ï¼Œæ‰€ä»¥ GB2312 ä¸ GBK æ¯”è¾ƒåº”è¯¥é€‰æ‹© GBKã€‚UTF-16 ä¸ UTF-8 éƒ½æ˜¯å¤„ç† Unicode ç¼–ç ï¼Œå®ƒä»¬çš„ç¼–ç è§„åˆ™ä¸å¤ªç›¸åŒï¼Œç›¸å¯¹æ¥è¯´ UTF-16 ç¼–ç æ•ˆç‡æœ€é«˜ï¼Œå­—ç¬¦åˆ°å­—èŠ‚ç›¸äº’è½¬æ¢æ›´ç®€å•ï¼Œè¿›è¡Œå­—ç¬¦ä¸²æ“ä½œä¹Ÿæ›´å¥½ã€‚å®ƒé€‚åˆåœ¨æœ¬åœ°ç£ç›˜å’Œå†…å­˜ä¹‹é—´ä½¿ç”¨ï¼Œå¯ä»¥è¿›è¡Œå­—ç¬¦å’Œå­—èŠ‚ä¹‹é—´å¿«é€Ÿåˆ‡æ¢ï¼Œå¦‚ Java çš„å†…å­˜ç¼–ç å°±æ˜¯é‡‡ç”¨ UTF-16 ç¼–ç ã€‚ä½†æ˜¯å®ƒä¸é€‚åˆåœ¨ç½‘ç»œä¹‹é—´ä¼ è¾“ï¼Œå› ä¸ºç½‘ç»œä¼ è¾“å®¹æ˜“æŸåå­—èŠ‚æµï¼Œä¸€æ—¦å­—èŠ‚æµæŸåå°†å¾ˆéš¾æ¢å¤ï¼Œæƒ³æ¯”è¾ƒè€Œè¨€ UTF-8 æ›´é€‚åˆç½‘ç»œä¼ è¾“ï¼Œå¯¹ ASCII å­—ç¬¦é‡‡ç”¨å•å­—èŠ‚å­˜å‚¨ï¼Œå¦å¤–å•ä¸ªå­—ç¬¦æŸåä¹Ÿä¸ä¼šå½±å“åé¢å…¶å®ƒå­—ç¬¦ï¼Œåœ¨ç¼–ç æ•ˆç‡ä¸Šä»‹äº GBK å’Œ UTF-16 ä¹‹é—´ï¼Œæ‰€ä»¥ UTF-8 åœ¨ç¼–ç æ•ˆç‡ä¸Šå’Œç¼–ç å®‰å…¨æ€§ä¸Šåšäº†å¹³è¡¡ï¼Œæ˜¯ç†æƒ³çš„ä¸­æ–‡ç¼–ç æ–¹å¼ã€‚ 4ã€åœ¨ Java Web ä¸­æ¶‰åŠçš„ç¼–è§£ç å¯¹äºä½¿ç”¨ä¸­æ–‡æ¥è¯´ï¼Œæœ‰ I/O çš„åœ°æ–¹å°±ä¼šæ¶‰åŠåˆ°ç¼–ç ï¼Œå‰é¢å·²ç»æåˆ°äº† I/O æ“ä½œä¼šå¼•èµ·ç¼–ç ï¼Œè€Œå¤§éƒ¨åˆ† I/O å¼•èµ·çš„ä¹±ç éƒ½æ˜¯ç½‘ç»œ I/Oï¼Œå› ä¸ºç°åœ¨å‡ ä¹æ‰€æœ‰çš„åº”ç”¨ç¨‹åºéƒ½æ¶‰åŠåˆ°ç½‘ç»œæ“ä½œï¼Œè€Œæ•°æ®ç»è¿‡ç½‘ç»œä¼ è¾“éƒ½æ˜¯ä»¥å­—èŠ‚ä¸ºå•ä½çš„ï¼Œæ‰€ä»¥æ‰€æœ‰çš„æ•°æ®éƒ½å¿…é¡»èƒ½å¤Ÿè¢«åºåˆ—åŒ–ä¸ºå­—èŠ‚ã€‚åœ¨ Java ä¸­æ•°æ®è¢«åºåˆ—åŒ–å¿…é¡»ç»§æ‰¿ Serializable æ¥å£ã€‚ ä¸€æ®µæ–‡æœ¬å®ƒçš„å®é™…å¤§å°åº”è¯¥æ€ä¹ˆè®¡ç®—ï¼Œæˆ‘æ›¾ç»ç¢°åˆ°è¿‡ä¸€ä¸ªé—®é¢˜ï¼šå°±æ˜¯è¦æƒ³åŠæ³•å‹ç¼© Cookie å¤§å°ï¼Œå‡å°‘ç½‘ç»œä¼ è¾“é‡ï¼Œå½“æ—¶æœ‰é€‰æ‹©ä¸åŒçš„å‹ç¼©ç®—æ³•ï¼Œå‘ç°å‹ç¼©åå­—ç¬¦æ•°æ˜¯å‡å°‘äº†ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰å‡å°‘å­—èŠ‚æ•°ã€‚æ‰€è°“çš„å‹ç¼©åªæ˜¯å°†å¤šä¸ªå•å­—èŠ‚å­—ç¬¦é€šè¿‡ç¼–ç è½¬å˜æˆä¸€ä¸ªå¤šå­—èŠ‚å­—ç¬¦ã€‚å‡å°‘çš„æ˜¯ String.length()ï¼Œè€Œå¹¶æ²¡æœ‰å‡å°‘æœ€ç»ˆçš„å­—èŠ‚æ•°ã€‚ä¾‹å¦‚å°†â€œabâ€ä¸¤ä¸ªå­—ç¬¦é€šè¿‡æŸç§ç¼–ç è½¬å˜æˆä¸€ä¸ªå¥‡æ€ªçš„å­—ç¬¦ï¼Œè™½ç„¶å­—ç¬¦æ•°ä»ä¸¤ä¸ªå˜æˆä¸€ä¸ªï¼Œä½†æ˜¯å¦‚æœé‡‡ç”¨ UTF-8 ç¼–ç è¿™ä¸ªå¥‡æ€ªçš„å­—ç¬¦æœ€åç»è¿‡ç¼–ç å¯èƒ½åˆä¼šå˜æˆä¸‰ä¸ªæˆ–æ›´å¤šçš„å­—èŠ‚ã€‚åŒæ ·çš„é“ç†æ¯”å¦‚æ•´å‹æ•°å­— 1234567 å¦‚æœå½“æˆå­—ç¬¦æ¥å­˜å‚¨ï¼Œé‡‡ç”¨ UTF-8 æ¥ç¼–ç å ç”¨ 7 ä¸ª byteï¼Œé‡‡ç”¨ UTF-16 ç¼–ç å°†ä¼šå ç”¨ 14 ä¸ª byteï¼Œä½†æ˜¯æŠŠå®ƒå½“æˆ int å‹æ•°å­—æ¥å­˜å‚¨åªéœ€è¦ 4 ä¸ª byte æ¥å­˜å‚¨ã€‚æ‰€ä»¥çœ‹ä¸€æ®µæ–‡æœ¬çš„å¤§å°ï¼Œçœ‹å­—ç¬¦æœ¬èº«çš„é•¿åº¦æ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼Œå³ä½¿æ˜¯ä¸€æ ·çš„å­—ç¬¦é‡‡ç”¨ä¸åŒçš„ç¼–ç æœ€ç»ˆå­˜å‚¨çš„å¤§å°ä¹Ÿä¼šä¸åŒï¼Œæ‰€ä»¥ä»å­—ç¬¦åˆ°å­—èŠ‚ä¸€å®šè¦çœ‹ç¼–ç ç±»å‹ã€‚ æˆ‘ä»¬èƒ½å¤Ÿçœ‹åˆ°çš„æ±‰å­—éƒ½æ˜¯ä»¥å­—ç¬¦å½¢å¼å‡ºç°çš„ï¼Œä¾‹å¦‚åœ¨ Java ä¸­â€œæ·˜å®â€ä¸¤ä¸ªå­—ç¬¦ï¼Œå®ƒåœ¨è®¡ç®—æœºä¸­çš„æ•°å€¼ 10 è¿›åˆ¶æ˜¯ 28120 å’Œ 23453ï¼Œ16 è¿›åˆ¶æ˜¯ 6bd8 å’Œ 5d9dï¼Œä¹Ÿå°±æ˜¯è¿™ä¸¤ä¸ªå­—ç¬¦æ˜¯ç”±è¿™ä¸¤ä¸ªæ•°å­—å”¯ä¸€è¡¨ç¤ºçš„ã€‚Java ä¸­ä¸€ä¸ª char æ˜¯ 16 ä¸ª bit ç›¸å½“äºä¸¤ä¸ªå­—èŠ‚ï¼Œæ‰€ä»¥ä¸¤ä¸ªæ±‰å­—ç”¨ char è¡¨ç¤ºåœ¨å†…å­˜ä¸­å ç”¨ç›¸å½“äºå››ä¸ªå­—èŠ‚çš„ç©ºé—´ã€‚ è¿™ä¸¤ä¸ªé—®é¢˜ææ¸…æ¥šåï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸‹ Java Web ä¸­é‚£äº›åœ°æ–¹å¯èƒ½ä¼šå­˜åœ¨ç¼–ç è½¬æ¢ï¼Ÿ ç”¨æˆ·ä»æµè§ˆå™¨ç«¯å‘èµ·ä¸€ä¸ª HTTP è¯·æ±‚ï¼Œéœ€è¦å­˜åœ¨ç¼–ç çš„åœ°æ–¹æ˜¯ URLã€Cookieã€Parameterã€‚æœåŠ¡å™¨ç«¯æ¥å—åˆ° HTTP è¯·æ±‚åè¦è§£æ HTTP åè®®ï¼Œå…¶ä¸­ URIã€Cookie å’Œ POST è¡¨å•å‚æ•°éœ€è¦è§£ç ï¼ŒæœåŠ¡å™¨ç«¯å¯èƒ½è¿˜éœ€è¦è¯»å–æ•°æ®åº“ä¸­çš„æ•°æ®ï¼Œæœ¬åœ°æˆ–ç½‘ç»œä¸­å…¶å®ƒåœ°æ–¹çš„æ–‡æœ¬æ–‡ä»¶ï¼Œè¿™äº›æ•°æ®éƒ½å¯èƒ½å­˜åœ¨ç¼–ç é—®é¢˜ï¼Œå½“ Servlet å¤„ç†å®Œæ‰€æœ‰è¯·æ±‚çš„æ•°æ®åï¼Œéœ€è¦å°†è¿™äº›æ•°æ®å†ç¼–ç é€šè¿‡ Socket å‘é€åˆ°ç”¨æˆ·è¯·æ±‚çš„æµè§ˆå™¨é‡Œï¼Œå†ç»è¿‡æµè§ˆå™¨è§£ç æˆä¸ºæ–‡æœ¬ã€‚è¿™äº›è¿‡ç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ä¸€æ¬¡ HTTP è¯·æ±‚çš„ç¼–ç ç¤ºä¾‹ 4.1 URL çš„ç¼–è§£ç ç”¨æˆ·æäº¤ä¸€ä¸ª URLï¼Œè¿™ä¸ª URL ä¸­å¯èƒ½å­˜åœ¨ä¸­æ–‡ï¼Œå› æ­¤éœ€è¦ç¼–ç ï¼Œå¦‚ä½•å¯¹è¿™ä¸ª URL è¿›è¡Œç¼–ç ï¼Ÿæ ¹æ®ä»€ä¹ˆè§„åˆ™æ¥ç¼–ç ï¼Ÿæœ‰å¦‚ä½•æ¥è§£ç ï¼Ÿå¦‚ä¸‹å›¾ä¸€ä¸ª URLï¼š ä¸Šå›¾ä¸­ä»¥ Tomcat ä½œä¸º Servlet Engine ä¸ºä¾‹ï¼Œå®ƒä»¬åˆ†åˆ«å¯¹åº”åˆ°ä¸‹é¢è¿™äº›é…ç½®æ–‡ä»¶ä¸­ï¼šPort å¯¹åº”åœ¨ Tomcat çš„ ä¸­é…ç½®ï¼Œè€Œ Context Path åœ¨ ä¸­é…ç½®ï¼ŒServlet Path åœ¨ Web åº”ç”¨çš„ web.xml ä¸­çš„ 1234&lt;servlet-mapping&gt; &lt;servlet-name&gt;junshanExample&lt;/servlet-name&gt; &lt;url-pattern&gt;/servlets/servlet/*&lt;/url-pattern&gt; &lt;/servlet-mapping&gt; ä¸­é…ç½®ï¼ŒPathInfo æ˜¯æˆ‘ä»¬è¯·æ±‚çš„å…·ä½“çš„ Servletï¼ŒQueryString æ˜¯è¦ä¼ é€’çš„å‚æ•°ï¼Œæ³¨æ„è¿™é‡Œæ˜¯åœ¨æµè§ˆå™¨é‡Œç›´æ¥è¾“å…¥ URL æ‰€ä»¥æ˜¯é€šè¿‡ Get æ–¹æ³•è¯·æ±‚çš„ï¼Œå¦‚æœæ˜¯ POST æ–¹æ³•è¯·æ±‚çš„è¯ï¼ŒQueryString å°†é€šè¿‡è¡¨å•æ–¹å¼æäº¤åˆ°æœåŠ¡å™¨ç«¯ã€‚ ä¸Šå›¾ä¸­ PathInfo å’Œ QueryString å‡ºç°äº†ä¸­æ–‡ï¼Œå½“æˆ‘ä»¬åœ¨æµè§ˆå™¨ä¸­ç›´æ¥è¾“å…¥è¿™ä¸ª URL æ—¶ï¼Œåœ¨æµè§ˆå™¨ç«¯å’ŒæœåŠ¡ç«¯ä¼šå¦‚ä½•ç¼–ç å’Œè§£æè¿™ä¸ª URL å‘¢ï¼Ÿä¸ºäº†éªŒè¯æµè§ˆå™¨æ˜¯æ€ä¹ˆç¼–ç  URL çš„æˆ‘é€‰æ‹©çš„æ˜¯360æé€Ÿæµè§ˆå™¨å¹¶é€šè¿‡ Postman æ’ä»¶è§‚å¯Ÿæˆ‘ä»¬è¯·æ±‚çš„ URL çš„å®é™…çš„å†…å®¹ï¼Œä»¥ä¸‹æ˜¯ URLï¼š HTTP://localhost:8080/examples/servlets/servlet/å›å±±?author=å›å±± å›å±±çš„ç¼–ç ç»“æœæ˜¯ï¼še5 90 9b e5 b1 b1ï¼Œå’Œã€Šæ·±å…¥åˆ†æ Java Web æŠ€æœ¯å†…å¹•ã€‹ä¸­çš„ç»“æœä¸ä¸€æ ·ï¼Œè¿™æ˜¯å› ä¸ºæˆ‘ä½¿ç”¨çš„æµè§ˆå™¨å’Œæ’ä»¶å’ŒåŸä½œè€…æ˜¯æœ‰åŒºåˆ«çš„ï¼Œé‚£ä¹ˆè¿™äº›æµè§ˆå™¨ä¹‹é—´çš„é»˜è®¤ç¼–ç æ˜¯ä¸ä¸€æ ·çš„ï¼ŒåŸæ–‡ä¸­çš„ç»“æœæ˜¯ï¼š å›å±±çš„ç¼–ç ç»“æœåˆ†åˆ«æ˜¯ï¼še5 90 9b e5 b1 b1ï¼Œbe fd c9 bdï¼ŒæŸ¥é˜…ä¸Šä¸€å±Šçš„ç¼–ç å¯çŸ¥ï¼ŒPathInfo æ˜¯ UTF-8 ç¼–ç è€Œ QueryString æ˜¯ç»è¿‡ GBK ç¼–ç ï¼Œè‡³äºä¸ºä»€ä¹ˆä¼šæœ‰â€œ%â€ï¼ŸæŸ¥é˜… URL çš„ç¼–ç è§„èŒƒ RFC3986 å¯çŸ¥æµè§ˆå™¨ç¼–ç  URL æ˜¯å°†é ASCII å­—ç¬¦æŒ‰ç…§æŸç§ç¼–ç æ ¼å¼ç¼–ç æˆ 16 è¿›åˆ¶æ•°å­—ç„¶åå°†æ¯ä¸ª 16 è¿›åˆ¶è¡¨ç¤ºçš„å­—èŠ‚å‰åŠ ä¸Šâ€œ%â€ï¼Œæ‰€ä»¥æœ€ç»ˆçš„ URL å°±æˆäº†ä¸Šå›¾çš„æ ¼å¼äº†ã€‚ ä»ä¸Šé¢æµ‹è¯•ç»“æœå¯çŸ¥æµè§ˆå™¨å¯¹ PathInfo å’Œ QueryString çš„ç¼–ç æ˜¯ä¸ä¸€æ ·çš„ï¼Œä¸åŒæµè§ˆå™¨å¯¹ PathInfo ä¹Ÿå¯èƒ½ä¸ä¸€æ ·ï¼Œè¿™å°±å¯¹æœåŠ¡å™¨çš„è§£ç é€ æˆå¾ˆå¤§çš„å›°éš¾ï¼Œä¸‹é¢æˆ‘ä»¬ä»¥ Tomcat ä¸ºä¾‹çœ‹ä¸€ä¸‹ï¼ŒTomcat æ¥å—åˆ°è¿™ä¸ª URL æ˜¯å¦‚ä½•è§£ç çš„ã€‚ è§£æè¯·æ±‚çš„ URL æ˜¯åœ¨ org.apache.coyote.HTTP11.InternalInputBuffer çš„ parseRequestLine æ–¹æ³•ä¸­ï¼Œè¿™ä¸ªæ–¹æ³•æŠŠä¼ è¿‡æ¥çš„ URL çš„ byte[] è®¾ç½®åˆ° org.apache.coyote.Request çš„ç›¸åº”çš„å±æ€§ä¸­ã€‚è¿™é‡Œçš„ URL ä»ç„¶æ˜¯ byte æ ¼å¼ï¼Œè½¬æˆ char æ˜¯åœ¨ org.apache.catalina.connector.CoyoteAdapter çš„ convertURI æ–¹æ³•ä¸­å®Œæˆçš„ï¼š 12345678910111213141516171819202122232425262728293031323334protected void convertURI(MessageBytes uri, Request request) throws Exception &#123; ByteChunk bc = uri.getByteChunk(); int length = bc.getLength(); CharChunk cc = uri.getCharChunk(); cc.allocate(length, -1); String enc = connector.getURIEncoding(); if (enc != null) &#123; B2CConverter conv = request.getURIConverter(); try &#123; if (conv == null) &#123; conv = new B2CConverter(enc); request.setURIConverter(conv); &#125; &#125; catch (IOException e) &#123;...&#125; if (conv != null) &#123; try &#123; conv.convert(bc, cc, cc.getBuffer().length - cc.getEnd()); uri.setChars(cc.getBuffer(), cc.getStart(), cc.getLength()); return; &#125; catch (IOException e) &#123;...&#125; &#125; &#125; // Default encoding: fast conversion byte[] bbuf = bc.getBuffer(); char[] cbuf = cc.getBuffer(); int start = bc.getStart(); for (int i = 0; i &lt; length; i++) &#123; cbuf[i] = (char) (bbuf[i + start] &amp; 0xff); &#125; uri.setChars(cbuf, 0, length); &#125; ä»ä¸Šé¢çš„ä»£ç ä¸­å¯ä»¥çŸ¥é“å¯¹ URL çš„ URI éƒ¨åˆ†è¿›è¡Œè§£ç çš„å­—ç¬¦é›†æ˜¯åœ¨ connector çš„ ä¸­å®šä¹‰çš„ï¼Œå¦‚æœæ²¡æœ‰å®šä¹‰ï¼Œé‚£ä¹ˆå°†ä»¥é»˜è®¤ç¼–ç  ISO-8859-1 è§£æã€‚æ‰€ä»¥å¦‚æœæœ‰ä¸­æ–‡ URL æ—¶æœ€å¥½æŠŠ URIEncoding è®¾ç½®æˆ UTF-8 ç¼–ç ã€‚ QueryString åˆå¦‚ä½•è§£æï¼Ÿ GET æ–¹å¼ HTTP è¯·æ±‚çš„ QueryString ä¸ POST æ–¹å¼ HTTP è¯·æ±‚çš„è¡¨å•å‚æ•°éƒ½æ˜¯ä½œä¸º Parameters ä¿å­˜ï¼Œéƒ½æ˜¯é€šè¿‡ request.getParameter è·å–å‚æ•°å€¼ã€‚å¯¹å®ƒä»¬çš„è§£ç æ˜¯åœ¨ request.getParameter æ–¹æ³•ç¬¬ä¸€æ¬¡è¢«è°ƒç”¨æ—¶è¿›è¡Œçš„ã€‚request.getParameter æ–¹æ³•è¢«è°ƒç”¨æ—¶å°†ä¼šè°ƒç”¨ org.apache.catalina.connector.Request çš„ parseParameters æ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•å°†ä¼šå¯¹ GET å’Œ POST æ–¹å¼ä¼ é€’çš„å‚æ•°è¿›è¡Œè§£ç ï¼Œä½†æ˜¯å®ƒä»¬çš„è§£ç å­—ç¬¦é›†æœ‰å¯èƒ½ä¸ä¸€æ ·ã€‚POST è¡¨å•çš„è§£ç å°†åœ¨åé¢ä»‹ç»ï¼ŒQueryString çš„è§£ç å­—ç¬¦é›†æ˜¯åœ¨å“ªå®šä¹‰çš„å‘¢ï¼Ÿå®ƒæœ¬èº«æ˜¯é€šè¿‡ HTTP çš„ Header ä¼ åˆ°æœåŠ¡ç«¯çš„ï¼Œå¹¶ä¸”ä¹Ÿåœ¨ URL ä¸­ï¼Œæ˜¯å¦å’Œ URI çš„è§£ç å­—ç¬¦é›†ä¸€æ ·å‘¢ï¼Ÿä»å‰é¢æµè§ˆå™¨å¯¹ PathInfo å’Œ QueryString çš„ç¼–ç é‡‡å–ä¸åŒçš„ç¼–ç æ ¼å¼ä¸åŒå¯ä»¥çŒœæµ‹åˆ°è§£ç å­—ç¬¦é›†è‚¯å®šä¹Ÿä¸ä¼šæ˜¯ä¸€è‡´çš„ã€‚çš„ç¡®æ˜¯è¿™æ · QueryString çš„è§£ç å­—ç¬¦é›†è¦ä¹ˆæ˜¯ Header ä¸­ ContentType ä¸­å®šä¹‰çš„ Charset è¦ä¹ˆå°±æ˜¯é»˜è®¤çš„ ISO-8859-1ï¼Œè¦ä½¿ç”¨ ContentType ä¸­å®šä¹‰çš„ç¼–ç å°±è¦è®¾ç½® connector çš„ ä¸­çš„ useBodyEncodingForURI è®¾ç½®ä¸º trueã€‚è¿™ä¸ªé…ç½®é¡¹çš„åå­—æœ‰ç‚¹è®©äººäº§ç”Ÿæ··æ·†ï¼Œå®ƒå¹¶ä¸æ˜¯å¯¹æ•´ä¸ª URI éƒ½é‡‡ç”¨ BodyEncoding è¿›è¡Œè§£ç è€Œä»…ä»…æ˜¯å¯¹ QueryString ä½¿ç”¨ BodyEncoding è§£ç ï¼Œè¿™ä¸€ç‚¹è¿˜è¦ç‰¹åˆ«æ³¨æ„ã€‚ ä»ä¸Šé¢çš„ URL ç¼–ç å’Œè§£ç è¿‡ç¨‹æ¥çœ‹ï¼Œæ¯”è¾ƒå¤æ‚ï¼Œè€Œä¸”ç¼–ç å’Œè§£ç å¹¶ä¸æ˜¯æˆ‘ä»¬åœ¨åº”ç”¨ç¨‹åºä¸­èƒ½å®Œå…¨æ§åˆ¶çš„ï¼Œæ‰€ä»¥åœ¨æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºä¸­åº”è¯¥å°½é‡é¿å…åœ¨ URL ä¸­ä½¿ç”¨é ASCII å­—ç¬¦ï¼Œä¸ç„¶å¾ˆå¯èƒ½ä¼šç¢°åˆ°ä¹±ç é—®é¢˜ï¼Œå½“ç„¶åœ¨æˆ‘ä»¬çš„æœåŠ¡å™¨ç«¯æœ€å¥½è®¾ç½® ä¸­çš„ URIEncoding å’Œ useBodyEncodingForURI ä¸¤ä¸ªå‚æ•°ã€‚ 4.2 HTTP Header çš„ç¼–è§£ç å½“å®¢æˆ·ç«¯å‘èµ·ä¸€ä¸ª HTTP è¯·æ±‚é™¤äº†ä¸Šé¢çš„ URL å¤–è¿˜å¯èƒ½ä¼šåœ¨ Header ä¸­ä¼ é€’å…¶å®ƒå‚æ•°å¦‚ Cookieã€redirectPath ç­‰ï¼Œè¿™äº›ç”¨æˆ·è®¾ç½®çš„å€¼å¾ˆå¯èƒ½ä¹Ÿä¼šå­˜åœ¨ç¼–ç é—®é¢˜ï¼ŒTomcat å¯¹å®ƒä»¬åˆæ˜¯æ€ä¹ˆè§£ç çš„å‘¢ï¼Ÿ å¯¹ Header ä¸­çš„é¡¹è¿›è¡Œè§£ç ä¹Ÿæ˜¯åœ¨è°ƒç”¨ request.getHeader æ˜¯è¿›è¡Œçš„ï¼Œå¦‚æœè¯·æ±‚çš„ Header é¡¹æ²¡æœ‰è§£ç åˆ™è°ƒç”¨ MessageBytes çš„ toString æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•å°†ä» byte åˆ° char çš„è½¬åŒ–ä½¿ç”¨çš„é»˜è®¤ç¼–ç ä¹Ÿæ˜¯ ISO-8859-1ï¼Œè€Œæˆ‘ä»¬ä¹Ÿä¸èƒ½è®¾ç½® Header çš„å…¶å®ƒè§£ç æ ¼å¼ï¼Œæ‰€ä»¥å¦‚æœä½ è®¾ç½® Header ä¸­æœ‰é ASCII å­—ç¬¦è§£ç è‚¯å®šä¼šæœ‰ä¹±ç ã€‚ æˆ‘ä»¬åœ¨æ·»åŠ  Header æ—¶ä¹Ÿæ˜¯åŒæ ·çš„é“ç†ï¼Œä¸è¦åœ¨ Header ä¸­ä¼ é€’é ASCII å­—ç¬¦ï¼Œå¦‚æœä¸€å®šè¦ä¼ é€’çš„è¯ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆå°†è¿™äº›å­—ç¬¦ç”¨ org.apache.catalina.util.URLEncoder ç¼–ç ç„¶åå†æ·»åŠ åˆ° Header ä¸­ï¼Œè¿™æ ·åœ¨æµè§ˆå™¨åˆ°æœåŠ¡å™¨çš„ä¼ é€’è¿‡ç¨‹ä¸­å°±ä¸ä¼šä¸¢å¤±ä¿¡æ¯äº†ï¼Œå¦‚æœæˆ‘ä»¬è¦è®¿é—®è¿™äº›é¡¹æ—¶å†æŒ‰ç…§ç›¸åº”çš„å­—ç¬¦é›†è§£ç å°±å¥½äº†ã€‚ 4.3 POST è¡¨å•çš„ç¼–è§£ç åœ¨å‰é¢æåˆ°äº† POST è¡¨å•æäº¤çš„å‚æ•°çš„è§£ç æ˜¯åœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨ request.getParameter å‘ç”Ÿçš„ï¼ŒPOST è¡¨å•å‚æ•°ä¼ é€’æ–¹å¼ä¸ QueryString ä¸åŒï¼Œå®ƒæ˜¯é€šè¿‡ HTTP çš„ BODY ä¼ é€’åˆ°æœåŠ¡ç«¯çš„ã€‚å½“æˆ‘ä»¬åœ¨é¡µé¢ä¸Šç‚¹å‡» submit æŒ‰é’®æ—¶æµè§ˆå™¨é¦–å…ˆå°†æ ¹æ® ContentType çš„ Charset ç¼–ç æ ¼å¼å¯¹è¡¨å•å¡«çš„å‚æ•°è¿›è¡Œç¼–ç ç„¶åæäº¤åˆ°æœåŠ¡å™¨ç«¯ï¼Œåœ¨æœåŠ¡å™¨ç«¯åŒæ ·ä¹Ÿæ˜¯ç”¨ ContentType ä¸­å­—ç¬¦é›†è¿›è¡Œè§£ç ã€‚æ‰€ä»¥é€šè¿‡ POST è¡¨å•æäº¤çš„å‚æ•°ä¸€èˆ¬ä¸ä¼šå‡ºç°é—®é¢˜ï¼Œè€Œä¸”è¿™ä¸ªå­—ç¬¦é›†ç¼–ç æ˜¯æˆ‘ä»¬è‡ªå·±è®¾ç½®çš„ï¼Œå¯ä»¥é€šè¿‡ request.setCharacterEncoding(charset) æ¥è®¾ç½®ã€‚ å¦å¤–é’ˆå¯¹ multipart/form-data ç±»å‹çš„å‚æ•°ï¼Œä¹Ÿå°±æ˜¯ä¸Šä¼ çš„æ–‡ä»¶ç¼–ç åŒæ ·ä¹Ÿæ˜¯ä½¿ç”¨ ContentType å®šä¹‰çš„å­—ç¬¦é›†ç¼–ç ï¼Œå€¼å¾—æ³¨æ„çš„åœ°æ–¹æ˜¯ä¸Šä¼ æ–‡ä»¶æ˜¯ç”¨å­—èŠ‚æµçš„æ–¹å¼ä¼ è¾“åˆ°æœåŠ¡å™¨çš„æœ¬åœ°ä¸´æ—¶ç›®å½•ï¼Œè¿™ä¸ªè¿‡ç¨‹å¹¶æ²¡æœ‰æ¶‰åŠåˆ°å­—ç¬¦ç¼–ç ï¼Œè€ŒçœŸæ­£ç¼–ç æ˜¯åœ¨å°†æ–‡ä»¶å†…å®¹æ·»åŠ åˆ° parameters ä¸­ï¼Œå¦‚æœç”¨è¿™ä¸ªç¼–ç ä¸èƒ½ç¼–ç æ—¶å°†ä¼šç”¨é»˜è®¤ç¼–ç  ISO-8859-1 æ¥ç¼–ç ã€‚ 4.4 HTTP BODY çš„ç¼–è§£ç å½“ç”¨æˆ·è¯·æ±‚çš„èµ„æºå·²ç»æˆåŠŸè·å–åï¼Œè¿™äº›å†…å®¹å°†é€šè¿‡ Response è¿”å›ç»™å®¢æˆ·ç«¯æµè§ˆå™¨ï¼Œè¿™ä¸ªè¿‡ç¨‹å…ˆè¦ç»è¿‡ç¼–ç å†åˆ°æµè§ˆå™¨è¿›è¡Œè§£ç ã€‚è¿™ä¸ªè¿‡ç¨‹çš„ç¼–è§£ç å­—ç¬¦é›†å¯ä»¥é€šè¿‡ response.setCharacterEncoding æ¥è®¾ç½®ï¼Œå®ƒå°†ä¼šè¦†ç›– request.getCharacterEncoding çš„å€¼ï¼Œå¹¶ä¸”é€šè¿‡ Header çš„ Content-Type è¿”å›å®¢æˆ·ç«¯ï¼Œæµè§ˆå™¨æ¥å—åˆ°è¿”å›çš„ socket æµæ—¶å°†é€šè¿‡ Content-Type çš„ charset æ¥è§£ç ï¼Œå¦‚æœè¿”å›çš„ HTTP Header ä¸­ Content-Type æ²¡æœ‰è®¾ç½® charsetï¼Œé‚£ä¹ˆæµè§ˆå™¨å°†æ ¹æ® Html çš„ ä¸­çš„ charset æ¥è§£ç ã€‚å¦‚æœä¹Ÿæ²¡æœ‰å®šä¹‰çš„è¯ï¼Œé‚£ä¹ˆæµè§ˆå™¨å°†ä½¿ç”¨é»˜è®¤çš„ç¼–ç æ¥è§£ç ã€‚ 4.5 å…¶å®ƒéœ€è¦ç¼–ç çš„åœ°æ–¹é™¤äº† URL å’Œå‚æ•°ç¼–ç é—®é¢˜å¤–ï¼Œåœ¨æœåŠ¡ç«¯è¿˜æœ‰å¾ˆå¤šåœ°æ–¹å¯èƒ½å­˜åœ¨ç¼–ç ï¼Œå¦‚å¯èƒ½éœ€è¦è¯»å– xmlã€velocity æ¨¡ç‰ˆå¼•æ“ã€JSP æˆ–è€…ä»æ•°æ®åº“è¯»å–æ•°æ®ç­‰ã€‚xml æ–‡ä»¶å¯ä»¥é€šè¿‡è®¾ç½®å¤´æ¥åˆ¶å®šç¼–ç æ ¼å¼ 1&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt; Velocity æ¨¡ç‰ˆè®¾ç½®ç¼–ç æ ¼å¼ï¼š 1services.VelocityService.input.encoding=UTF-8 JSP è®¾ç½®ç¼–ç æ ¼å¼ï¼š 1&lt;%@page contentType=&quot;text/html; charset=UTF-8&quot;%&gt; è®¿é—®æ•°æ®åº“éƒ½æ˜¯é€šè¿‡å®¢æˆ·ç«¯ JDBC é©±åŠ¨æ¥å®Œæˆï¼Œç”¨ JDBC æ¥å­˜å–æ•°æ®è¦å’Œæ•°æ®çš„å†…ç½®ç¼–ç ä¿æŒä¸€è‡´ï¼Œå¯ä»¥é€šè¿‡è®¾ç½® JDBC URL æ¥åˆ¶å®šå¦‚ MySQLï¼šurl=â€jdbc:mysql://localhost:3306/DB?useUnicode=true&amp;characterEncoding=GBKâ€ã€‚ 5ã€å¸¸è§é—®é¢˜åˆ†æä¸‹é¢çœ‹ä¸€ä¸‹ï¼Œå½“æˆ‘ä»¬ç¢°åˆ°ä¸€äº›ä¹±ç æ—¶ï¼Œåº”è¯¥æ€ä¹ˆå¤„ç†è¿™äº›é—®é¢˜ï¼Ÿå‡ºç°ä¹±ç é—®é¢˜å”¯ä¸€çš„åŸå› éƒ½æ˜¯åœ¨ char åˆ° byte æˆ– byte åˆ° char è½¬æ¢ä¸­ç¼–ç å’Œè§£ç çš„å­—ç¬¦é›†ä¸ä¸€è‡´å¯¼è‡´çš„ï¼Œç”±äºå¾€å¾€ä¸€æ¬¡æ“ä½œæ¶‰åŠåˆ°å¤šæ¬¡ç¼–è§£ç ï¼Œæ‰€ä»¥å‡ºç°ä¹±ç æ—¶å¾ˆéš¾æŸ¥æ‰¾åˆ°åº•æ˜¯å“ªä¸ªç¯èŠ‚å‡ºç°äº†é—®é¢˜ï¼Œä¸‹é¢å°±å‡ ç§å¸¸è§çš„ç°è±¡è¿›è¡Œåˆ†æã€‚ 5.1 ä¸­æ–‡å˜æˆäº†çœ‹ä¸æ‡‚çš„å­—ç¬¦ä¾‹å¦‚ï¼Œå­—ç¬¦ä¸²â€œæ·˜ï¼æˆ‘å–œæ¬¢ï¼â€å˜æˆäº†â€œÃŒ Ã” Â£ Â¡Ã Ã’ ÃÂ²Â»Â¶ Â£ Â¡â€ç¼–ç è¿‡ç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å­—ç¬¦ä¸²åœ¨è§£ç æ—¶æ‰€ç”¨çš„å­—ç¬¦é›†ä¸ç¼–ç å­—ç¬¦é›†ä¸ä¸€è‡´å¯¼è‡´æ±‰å­—å˜æˆäº†çœ‹ä¸æ‡‚çš„ä¹±ç ï¼Œè€Œä¸”æ˜¯ä¸€ä¸ªæ±‰å­—å­—ç¬¦å˜æˆä¸¤ä¸ªä¹±ç å­—ç¬¦ã€‚ 5.2 ä¸€ä¸ªæ±‰å­—å˜æˆä¸€ä¸ªé—®å·ä¾‹å¦‚ï¼Œå­—ç¬¦ä¸²â€œæ·˜ï¼æˆ‘å–œæ¬¢ï¼â€å˜æˆäº†â€œï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿâ€ç¼–ç è¿‡ç¨‹å¦‚ä¸‹å›¾æ‰€ç¤º: å°†ä¸­æ–‡å’Œä¸­æ–‡ç¬¦å·ç»è¿‡ä¸æ”¯æŒä¸­æ–‡çš„ ISO-8859-1 ç¼–ç åï¼Œæ‰€æœ‰å­—ç¬¦å˜æˆäº†â€œï¼Ÿâ€ï¼Œè¿™æ˜¯å› ä¸ºç”¨ ISO-8859-1 è¿›è¡Œç¼–è§£ç æ—¶é‡åˆ°ä¸åœ¨ç å€¼èŒƒå›´å†…çš„å­—ç¬¦æ—¶ç»Ÿä¸€ç”¨ 3f è¡¨ç¤ºï¼Œè¿™ä¹Ÿå°±æ˜¯é€šå¸¸æ‰€è¯´çš„â€œé»‘æ´â€ï¼Œæ‰€æœ‰ ISO-8859-1 ä¸è®¤è¯†çš„å­—ç¬¦éƒ½å˜æˆäº†â€œï¼Ÿâ€ã€‚ 5.3 ä¸€ä¸ªæ±‰å­—å˜æˆä¸¤ä¸ªé—®å·ä¾‹å¦‚ï¼Œå­—ç¬¦ä¸²â€œæ·˜ï¼æˆ‘å–œæ¬¢ï¼â€å˜æˆäº†â€œï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿâ€ç¼–ç è¿‡ç¨‹å¦‚ä¸‹å›¾æ‰€ç¤º: è¿™ç§æƒ…å†µæ¯”è¾ƒå¤æ‚ï¼Œä¸­æ–‡ç»è¿‡å¤šæ¬¡ç¼–ç ï¼Œä½†æ˜¯å…¶ä¸­æœ‰ä¸€æ¬¡ç¼–ç æˆ–è€…è§£ç ä¸å¯¹ä»ç„¶ä¼šå‡ºç°ä¸­æ–‡å­—ç¬¦å˜æˆâ€œï¼Ÿâ€ç°è±¡ï¼Œå‡ºç°è¿™ç§æƒ…å†µè¦ä»”ç»†æŸ¥çœ‹ä¸­é—´çš„ç¼–ç ç¯èŠ‚ï¼Œæ‰¾å‡ºå‡ºç°ç¼–ç é”™è¯¯çš„åœ°æ–¹ã€‚ 5.4 ä¸€ç§ä¸æ­£å¸¸çš„æ­£ç¡®ç¼–ç è¿˜æœ‰ä¸€ç§æƒ…å†µæ˜¯åœ¨æˆ‘ä»¬é€šè¿‡ request.getParameter è·å–å‚æ•°å€¼æ—¶ï¼Œå½“æˆ‘ä»¬ç›´æ¥è°ƒç”¨ String value = request.getParameter(name); ä¼šå‡ºç°ä¹±ç ï¼Œä½†æ˜¯å¦‚æœç”¨ä¸‹é¢çš„æ–¹å¼ String value = String(request.getParameter(name).getBytes(&quot; ISO-8859-1&quot;), &quot;GBK&quot;); è§£ææ—¶å–å¾—çš„ value ä¼šæ˜¯æ­£ç¡®çš„æ±‰å­—å­—ç¬¦ï¼Œè¿™ç§æƒ…å†µæ˜¯æ€ä¹ˆé€ æˆçš„å‘¢ï¼Ÿ çœ‹ä¸‹å¦‚æ‰€ç¤ºï¼š è¿™ç§æƒ…å†µæ˜¯è¿™æ ·çš„ï¼ŒISO-8859-1 å­—ç¬¦é›†çš„ç¼–ç èŒƒå›´æ˜¯ 0000-00FFï¼Œæ­£å¥½å’Œä¸€ä¸ªå­—èŠ‚çš„ç¼–ç èŒƒå›´ç›¸å¯¹åº”ã€‚è¿™ç§ç‰¹æ€§ä¿è¯äº†ä½¿ç”¨ ISO-8859-1 è¿›è¡Œç¼–ç å’Œè§£ç å¯ä»¥ä¿æŒç¼–ç æ•°å€¼â€œä¸å˜â€ã€‚è™½ç„¶ä¸­æ–‡å­—ç¬¦åœ¨ç»è¿‡ç½‘ç»œä¼ è¾“æ—¶ï¼Œè¢«é”™è¯¯åœ°â€œæ‹†â€æˆäº†ä¸¤ä¸ªæ¬§æ´²å­—ç¬¦ï¼Œä½†ç”±äºè¾“å‡ºæ—¶ä¹Ÿæ˜¯ç”¨ ISO-8859-1ï¼Œç»“æœè¢«â€œæ‹†â€å¼€çš„ä¸­æ–‡å­—çš„ä¸¤åŠåˆè¢«åˆå¹¶åœ¨ä¸€èµ·ï¼Œä»è€Œåˆåˆšå¥½ç»„æˆäº†ä¸€ä¸ªæ­£ç¡®çš„æ±‰å­—ã€‚è™½ç„¶æœ€ç»ˆèƒ½å–å¾—æ­£ç¡®çš„æ±‰å­—ï¼Œä½†æ˜¯è¿˜æ˜¯ä¸å»ºè®®ç”¨è¿™ç§ä¸æ­£å¸¸çš„æ–¹å¼å–å¾—å‚æ•°å€¼ï¼Œå› ä¸ºè¿™ä¸­é—´å¢åŠ äº†ä¸€æ¬¡é¢å¤–çš„ç¼–ç ä¸è§£ç ï¼Œè¿™ç§æƒ…å†µå‡ºç°ä¹±ç æ—¶å› ä¸º Tomcat çš„é…ç½®æ–‡ä»¶ä¸­ useBodyEncodingForURI é…ç½®é¡¹æ²¡æœ‰è®¾ç½®ä¸ºâ€trueâ€ï¼Œä»è€Œé€ æˆç¬¬ä¸€æ¬¡è§£æå¼ç”¨ ISO-8859-1 æ¥è§£ææ‰é€ æˆä¹±ç çš„ã€‚ 6ã€æ€»ç»“æœ¬æ–‡é¦–å…ˆæ€»ç»“äº†å‡ ç§å¸¸è§ç¼–ç æ ¼å¼çš„åŒºåˆ«ï¼Œç„¶åä»‹ç»äº†æ”¯æŒä¸­æ–‡çš„å‡ ç§ç¼–ç æ ¼å¼ï¼Œå¹¶æ¯”è¾ƒäº†å®ƒä»¬çš„ä½¿ç”¨åœºæ™¯ã€‚æ¥ç€ä»‹ç»äº† Java é‚£äº›åœ°æ–¹ä¼šæ¶‰åŠåˆ°ç¼–ç é—®é¢˜ï¼Œå·²ç» Java ä¸­å¦‚ä½•å¯¹ç¼–ç çš„æ”¯æŒã€‚å¹¶ä»¥ç½‘ç»œ I/O ä¸ºä¾‹é‡ç‚¹ä»‹ç»äº† HTTP è¯·æ±‚ä¸­çš„å­˜åœ¨ç¼–ç çš„åœ°æ–¹ï¼Œä»¥åŠ Tomcat å¯¹ HTTP åè®®çš„è§£æï¼Œæœ€ååˆ†æäº†æˆ‘ä»¬å¹³å¸¸é‡åˆ°çš„ä¹±ç é—®é¢˜å‡ºç°çš„åŸå› ã€‚ ç»¼ä¸Šæ‰€è¿°ï¼Œè¦è§£å†³ä¸­æ–‡é—®é¢˜ï¼Œé¦–å…ˆè¦ææ¸…æ¥šå“ªäº›åœ°æ–¹ä¼šå¼•èµ·å­—ç¬¦åˆ°å­—èŠ‚çš„ç¼–ç ä»¥åŠå­—èŠ‚åˆ°å­—ç¬¦çš„è§£ç ï¼Œæœ€å¸¸è§çš„åœ°æ–¹å°±æ˜¯è¯»å–ä¼šå­˜å‚¨æ•°æ®åˆ°ç£ç›˜ï¼Œæˆ–è€…æ•°æ®è¦ç»è¿‡ç½‘ç»œä¼ è¾“ã€‚ç„¶åé’ˆå¯¹è¿™äº›åœ°æ–¹ææ¸…æ¥šæ“ä½œè¿™äº›æ•°æ®çš„æ¡†æ¶çš„æˆ–ç³»ç»Ÿæ˜¯å¦‚ä½•æ§åˆ¶ç¼–ç çš„ï¼Œæ­£ç¡®è®¾ç½®ç¼–ç æ ¼å¼ï¼Œé¿å…ä½¿ç”¨è½¯ä»¶é»˜è®¤çš„æˆ–è€…æ˜¯æ“ä½œç³»ç»Ÿå¹³å°é»˜è®¤çš„ç¼–ç æ ¼å¼ã€‚ æ³¨æ˜ï¼šæ–‡ç« å¤§éƒ¨åˆ†å‚è€ƒä¹¦ç±ã€Šæ·±å…¥ Java Web æŠ€æœ¯å†…å¹•ã€‹ç¬¬ä¸‰ç« ï¼Œè‡ªå·±æœ‰åˆ å‡ï¼ŒäºŒæ¬¡è½¬è½½è¯·ä¹ŸåŠ¡å¿…æ³¨æ˜æ­¤å‡ºå¤„ã€‚","tags":[{"name":"Java","slug":"Java","permalink":"http://yoursite.com/tags/Java/"},{"name":"ç¼–ç ","slug":"ç¼–ç ","permalink":"http://yoursite.com/tags/ç¼–ç /"}]},{"title":"ç¨‹åºè®¿é—®æ–‡ä»¶çš„å‡ ç§æ–¹å¼","date":"2017-06-12T16:00:00.000Z","path":"2017/06/13/ç¨‹åºè®¿é—®æ–‡ä»¶çš„å‡ ç§æ–¹å¼/","text":"IOç¨‹åºè®¿é—®æ–‡ä»¶çš„å‡ ç§æ–¹å¼ è¯»å–å’Œå†™å…¥æ–‡ä»¶ I/O æ“ä½œéƒ½è°ƒç”¨æ“ä½œç³»ç»Ÿæä¾›çš„æ¥å£ã€‚å› ä¸ºç£ç›˜è®¾å¤‡æ˜¯ç”±æ“ä½œç³»ç»Ÿç®¡ç†çš„ï¼Œåº”ç”¨ç¨‹åºè¦è®¿é—®ç‰©ç†è®¾å¤‡åªèƒ½é€šè¿‡ç³»ç»Ÿè°ƒç”¨çš„æ–¹å¼æ¥å·¥ä½œã€‚è¯»å’Œå†™åˆ†åˆ«å¯¹åº” read() å’Œ write() ä¸¤ä¸ªç³»ç»Ÿè°ƒç”¨ã€‚è€Œåªè¦æ˜¯ç³»ç»Ÿè°ƒç”¨å°±å¯èƒ½å­˜åœ¨å†…æ ¸ç©ºé—´åœ°å€å’Œç”¨æˆ·ç©ºé—´åœ°å€åˆ‡æ¢çš„é—®é¢˜ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæ“ä½œç³»ç»Ÿä¸ºäº†ä¿æŠ¤ç³»ç»Ÿæœ¬èº«çš„è¿è¡Œå®‰å…¨è€Œå°†å†…æ ¸ç¨‹åºè¿è¡Œä½¿ç”¨çš„å†…å­˜ç©ºé—´å’Œç”¨æˆ·ç¨‹åºè¿è¡Œçš„å†…å­˜ç©ºé—´è¿›è¡Œéš”ç¦»é€ æˆçš„ã€‚è™½ç„¶è¿™æ ·å¯ä»¥ä¿è¯å†…æ ¸ç¨‹åºè¿è¡Œçš„å®‰å…¨æ€§ï¼Œä½†æ˜¯ä¹Ÿå­˜åœ¨æ•°æ®å¯èƒ½éœ€è¦ä»å†…æ ¸ç©ºé—´å‘ç”¨æˆ·ç©ºé—´å¤åˆ¶çš„é—®é¢˜ã€‚ å¦‚æœé‡åˆ°éå¸¸è€—æ—¶çš„æ“ä½œï¼Œå¦‚ç£ç›˜ I/Oï¼Œ æ•°æ®ä»ç£ç›˜å¤åˆ¶åˆ°å†…æ ¸ç©ºé—´ï¼Œç„¶ååˆä»å†…æ ¸ç©ºé—´å¤åˆ¶åˆ°ç”¨æˆ·ç©ºé—´ï¼Œå°†ä¼šéå¸¸ç¼“æ…¢ã€‚è¿™æ—¶æ“ä½œç³»ç»Ÿä¸ºäº†åŠ é€Ÿ I/O è®¿é—®ï¼Œåœ¨å†…æ ¸ç©ºé—´ä½¿ç”¨ç¼“å­˜æœºåˆ¶ï¼Œä¹Ÿå°±æ˜¯å°†ä»ç£ç›˜è¯»å–çš„æ–‡ä»¶æŒ‰ç…§ä¸€å®šçš„ç»„ç»‡æ–¹å¼è¿›è¡Œç¼“å­˜ï¼Œå¦‚æœç”¨æˆ·ç¨‹åºè®¿é—®çš„æ˜¯åŒä¸€æ®µç£ç›˜åœ°å€çš„ç©ºé—´æ•°æ®ï¼Œé‚£ä¹ˆæ“ä½œç³»ç»Ÿå°†ä»å†…æ ¸ç¼“å­˜ä¸­ç›´æ¥å–å‡ºè¿”å›ç»™ç”¨æˆ·ç¨‹åºï¼Œè¿™æ ·å°±å¯ä»¥å‡å° I/O çš„å“åº”æ—¶é—´ã€‚ 1. æ ‡å‡†è®¿é—®æ–‡ä»¶çš„æ–¹å¼æ ‡å‡†è®¿é—®æ–‡ä»¶çš„æ–¹å¼å°±æ˜¯å½“åº”ç”¨ç¨‹åºè°ƒç”¨ read() æ¥å£æ—¶ï¼Œæ“ä½œç³»ç»Ÿæ£€æŸ¥åœ¨å†…æ ¸çš„é«˜é€Ÿç¼“å­˜ä¸­æœ‰æ²¡æœ‰éœ€è¦çš„æ•°æ®ï¼Œå¦‚æœå·²ç»ç¼“å­˜äº†ï¼Œé‚£ä¹ˆå°±ç›´æ¥ä»ç¼“å­˜ä¸­è¿”å›ï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™ä»ç£ç›˜ä¸­è¯»å–ï¼Œç„¶åç¼“å­˜åœ¨æ“ä½œç³»ç»Ÿçš„ç¼“å­˜ä¸­ã€‚ å†™å…¥çš„æ–¹å¼æ˜¯ï¼Œç”¨æˆ·çš„åº”ç”¨ç¨‹åºè°ƒç”¨ write() æ¥å£å°†æ•°æ®ä»ç”¨æˆ·åœ°å€ç©ºé—´å¤åˆ¶åˆ°å†…æ ¸åœ°å€ç©ºé—´çš„ç¼“å­˜ä¸­ã€‚è¿™æ—¶å¯¹ç”¨æˆ·ç¨‹åºæ¥è¯´å†™æ“ä½œå°±å·²ç»å®Œæˆäº†ï¼Œè‡³äºä»€ä¹ˆæ—¶å€™å†å†™åˆ°ç£ç›˜ä¸­ç”±æ“ä½œç³»ç»Ÿå†³å®šï¼Œé™¤éæ˜¾ç¤ºåœ°è°ƒç”¨ sync åŒæ­¥å‘½ä»¤ã€‚ æ ‡å‡†è®¿é—®æ–‡ä»¶çš„æ–¹å¼å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š 2. ç›´æ¥ I/O çš„æ–¹å¼ç›´æ¥ I/O æ–¹å¼å°±æ˜¯åº”ç”¨ç¨‹åºç›´æ¥è®¿é—®ç£ç›˜æ•°æ®ï¼Œè€Œä¸ç»è¿‡æ“ä½œç³»ç»Ÿå†…æ ¸æ•°æ®ç¼“å†²åŒºï¼Œè¿™æ ·åšçš„ç›®çš„å°±æ˜¯å‡å°‘ä¸€æ¬¡ä»å†…æ ¸ç¼“å†²åŒºåˆ°ç”¨æˆ·ç¨‹åºç¼“å­˜çš„æ•°æ®å¤åˆ¶ã€‚æ­¤ç§æ–¹å¼é€šå¸¸æ˜¯åœ¨å¯¹æ•°æ®çš„ç¼“å­˜ç®¡ç†ç”±åº”ç”¨ç¨‹åºå®ç°çš„æ•°æ®åº“ç®¡ç†ç³»ç»Ÿä¸­ã€‚å¦‚åœ¨æ•°æ®åº“ç®¡ç†ç³»ç»Ÿä¸­ï¼Œç³»ç»Ÿæ˜ç¡®çš„çŸ¥é“åº”è¯¥ç¼“å­˜å“ªäº›æ•°æ®ï¼Œåº”è¯¥å¤±æ•ˆå“ªäº›æ•°æ®ï¼Œè¿˜å¯ä»¥å¯¹ä¸€äº›çƒ­ç‚¹çš„æ•°æ®è¿›è¡Œé¢„åŠ è½½ï¼Œæå‰å°†çƒ­ç‚¹æ•°æ®åŠ è½½åˆ°å†…å­˜ï¼Œå¯ä»¥åŠ é€Ÿæ•°æ®çš„è®¿é—®æ•ˆç‡ã€‚åœ¨è¿™äº›æƒ…å†µä¸‹ï¼Œå¦‚æœæ˜¯ç”±æ“ä½œç³»ç»Ÿè¿›è¡Œç¼“å­˜ï¼Œåˆ™å¾ˆéš¾åšåˆ°ï¼Œå› ä¸ºæ“ä½œç³»ç»Ÿå¹¶ä¸çŸ¥é“å“ªäº›æ˜¯çƒ­ç‚¹æ•°æ®ï¼Œå“ªäº›æ•°æ®æ˜¯è®¿é—®ä¸€æ¬¡åå†ä¹Ÿä¸ä¼šè®¿é—®äº†ï¼Œæ“ä½œç³»ç»Ÿå°±æ˜¯ç®€å•çš„ç¼“å­˜æœ€è¿‘ä¸€æ¬¡ä»ç£ç›˜è¯»å–çš„æ•°æ®ã€‚ ä½†æ˜¯ç›´æ¥ I/O ä¹Ÿæœ‰è´Ÿé¢çš„å½±å“ï¼Œå¦‚æœè®¿é—®çš„æ•°æ®ä¸å†åº”ç”¨ç¨‹åºç¼“å­˜ä¸­ï¼Œåˆ™æ¯æ¬¡æ•°æ®çš„åŠ è½½éƒ½éœ€è¦ä»ç£ç›˜è¯»å–ï¼Œæ ·åŠ è½½çš„è¯é€Ÿåº¦éå¸¸çš„æ…¢ï¼Œé€šå¸¸æ˜¯ç›´æ¥ I/O ä¸ å¼‚æ­¥ I/O ç»“åˆä½¿ç”¨ï¼Œä¼šå¾—åˆ°è¾ƒå¥½çš„æ€§èƒ½ã€‚ ç›´æ¥ I/O çš„æ–¹å¼å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š 3. åŒæ­¥è®¿é—®æ–‡ä»¶çš„æ–¹å¼åŒæ­¥è®¿é—®æ–‡ä»¶çš„æ–¹å¼å°±æ˜¯æ•°æ®çš„è¯»å–å’Œå†™å…¥éƒ½æ˜¯åŒæ­¥æ“ä½œçš„ï¼Œå®ƒä¸æ ‡å‡†è®¿é—®æ–‡ä»¶çš„æ–¹å¼ä¸åŒçš„æ˜¯ï¼Œåªæœ‰å½“æ•°æ®è¢«æˆåŠŸå†™åˆ°ç£ç›˜æ—¶æ‰è¿”å›ç»™åº”ç”¨ç¨‹åºæˆåŠŸçš„æ ‡å¿—ã€‚ è¿™ç§è®¿é—®æ–‡ä»¶çš„æ–¹å¼æ€§èƒ½æ¯”è¾ƒå·®ï¼Œåªæœ‰åœ¨ä¸€äº›æ•°æ®å®‰å…¨æ€§è¦æ±‚æ¯”è¾ƒé«˜çš„åœºæ™¯ä¸­æ‰ä¼šä½¿ç”¨ï¼Œè€Œä¸”é€šå¸¸è¿™ç§æ–¹å¼çš„ç¡¬ä»¶éƒ½æ˜¯å®šåˆ¶çš„ã€‚ åŒæ­¥è®¿é—®æ–‡ä»¶çš„æ–¹å¼å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š 4. å¼‚æ­¥è®¿é—®æ–‡ä»¶çš„æ–¹å¼å¼‚æ­¥è®¿é—®æ–‡ä»¶çš„æ–¹å¼å°±æ˜¯å½“è®¿é—®æ•°æ®çš„çº¿ç¨‹å‘å‡ºè¯·æ±‚ä¹‹åï¼Œçº¿ç¨‹ä¼šæ¥ç€å»å¤„ç†å…¶ä»–äº‹æƒ…ï¼Œè€Œä¸æ˜¯é˜»å¡ç­‰å¾…ï¼Œå½“è¯·æ±‚çš„æ•°æ®è¿”å›åç»§ç»­å¤„ç†ä¸‹é¢çš„æ“ä½œã€‚è¿™ç§æ–¹å¼å¯ä»¥æ˜æ˜¾çš„æé«˜åº”ç”¨ç¨‹åºçš„æ•ˆç‡ï¼Œä½†æ˜¯ä¸ä¼šæ”¹å˜è®¿é—®æ–‡ä»¶çš„æ•ˆç‡ã€‚ å¼‚æ­¥è®¿é—®æ–‡ä»¶çš„æ–¹å¼å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š 5. å†…å­˜æ˜ å°„çš„æ–¹å¼å†…å­˜æ˜ å°„çš„æ–¹å¼æ˜¯æŒ‡æ“ä½œç³»ç»Ÿå°†å†…å­˜ä¸­çš„æŸä¸€å—åŒºåŸŸä¸ç£ç›˜ä¸­çš„æ–‡ä»¶å…³è”èµ·æ¥ï¼Œå½“è¦è®¿é—®å†…å­˜ä¸­çš„ä¸€æ®µæ•°æ®æ—¶ï¼Œè½¬æ¢ä¸ºè®¿é—®æ–‡ä»¶çš„æŸä¸€æ®µæ•°æ®ã€‚è¿™ç§æ–¹å¼çš„ç›®çš„åŒæ ·æ˜¯å‡å°‘æ•°æ®ä»å†…æ ¸ç©ºé—´ç¼“å­˜åˆ°ç”¨æˆ·ç©ºé—´ç¼“å­˜çš„æ•°æ®å¤åˆ¶æ“ä½œï¼Œå› ä¸ºè¿™ä¸¤ä¸ªç©ºé—´çš„æ•°æ®æ˜¯å…±äº«çš„ã€‚ å†…å­˜æ˜ å°„çš„æ–¹å¼å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š æ³¨ï¼šä»¥ä¸Šå‚è€ƒä¹¦ç±ã€Šæ·±å…¥åˆ†æJava Web æŠ€æœ¯å†…å¹•ä¿®è®¢ç‰ˆã€‹è®¸ä»¤æ³¢ï¼Œæ›´å¤šç²¾å½©çŸ¥è¯†è¿˜è¯·çœ‹åŸä¹¦ã€‚","tags":[{"name":"IO","slug":"IO","permalink":"http://yoursite.com/tags/IO/"}]},{"title":"æ·±åº¦æ¢ç©¶Java ä¸­ finally è¯­å¥å—","date":"2017-06-12T16:00:00.000Z","path":"2017/06/13/æ·±åº¦æ¢ç©¶Java ä¸­ finally è¯­å¥å—/","text":"ä¹çœ‹è¿™ä¸ªé¢˜ç›®ï¼Œæ˜¯ä¸æ˜¯æœ‰äººä¼šé—®ï¼Œè¿™ä¸ªè°ä¸çŸ¥é“å•Šï¼Œå¤§å‡¡ç†Ÿæ‚‰ Java ç¼–ç¨‹çš„äººéƒ½çŸ¥é“ finally è¯­å¥å—çš„ä½œç”¨å’Œç”¨æ³•ã€‚æœ‰ä»€ä¹ˆå¯æ·±åº¦è¾¨æçš„å‘¢ï¼Ÿäº‹å®å¹¶éå¦‚æ­¤ï¼Œæˆ‘å‘ç°å³ä½¿å†™äº†å¾ˆå¤šå¹´ Java ç¨‹åºçš„äººï¼Œä¹Ÿä¸ä¸€å®šèƒ½å¤Ÿé€å½»çš„ç†è§£ finally è¯­å¥å—ã€‚æœ¬ç¯‡å°†ä»¥ç”ŸåŠ¨å½¢è±¡çš„æ¡ˆä¾‹æ¥å¸¦æ‚¨ç”±æµ…å…¥æ·±çš„æ¥åˆ†æä¸€ä¸‹è¿™ä¸ªå°å°çš„ finallyï¼Œå¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¤Ÿè®©æ‚¨çœŸæ­£çš„ç†è§£ finally è¯­å¥å—çš„æœ¬è´¨ï¼Œè‡³å°‘é˜…è¯»å®Œæœ¬ç¯‡æ–‡ç« åï¼Œæ²¡æœ‰è§‰å¾—æµªè´¹äº†æ—¶é—´ã€‚ å¯ä¸èƒ½å°çœ‹è¿™ä¸ªç®€å•çš„ finallyï¼Œçœ‹ä¼¼ç®€å•çš„é—®é¢˜èƒŒåï¼Œå´éšè—äº†æ— æ•°çš„ç„æœºã€‚æ¥ä¸‹æ¥æˆ‘å°±å¸¦æ‚¨ä¸€æ­¥ä¸€æ­¥çš„æ­å¼€è¿™ä¸ª finally çš„ç¥ç§˜é¢çº±ã€‚ é—®é¢˜åˆ†æé¦–å…ˆæ¥é—®å¤§å®¶ä¸€ä¸ªé—®é¢˜ï¼šfinally è¯­å¥å—ä¸€å®šä¼šæ‰§è¡Œå—ï¼Ÿå¾ˆå¤šäººéƒ½è®¤ä¸º finally è¯­å¥å—æ˜¯è‚¯å®šè¦æ‰§è¡Œçš„ï¼Œå…¶ä¸­ä¹ŸåŒ…æ‹¬ä¸€äº›å¾ˆæœ‰ç»éªŒçš„ Java ç¨‹åºå‘˜ã€‚å¯æƒœå¹¶ä¸åƒå¤§å¤šäººæ‰€è®¤ä¸ºçš„é‚£æ ·ï¼Œå¯¹äºè¿™ä¸ªé—®é¢˜ï¼Œç­”æ¡ˆå½“ç„¶æ˜¯å¦å®šçš„ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹é¢è¿™ä¸ªä¾‹å­ã€‚ æ¸…å• 1.12345678910111213141516171819public class Test &#123;public static void main(String[] args) &#123;System.out.println(\"return value of test(): \" + test()); &#125;public static int test() &#123;int i = 1;// if(i == 1)// return 0;System.out.println(\"the previous statement of try block\");i = i / 0;try &#123; System.out.println(\"try block\"); return i; &#125;finally &#123; System.out.println(\"finally block\"); &#125; &#125;&#125; æ¸…å• 1 çš„æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š 1234the previous statement of try block Exception in thread &quot;main&quot; java.lang.ArithmeticException: / by zero at com.bj.charlie.Test.test(Test.java:15) at com.bj.charlie.Test.main(Test.java:6) å¦å¤–ï¼Œå¦‚æœå»æ‰ä¸Šä¾‹ä¸­è¢«æ³¨é‡Šçš„ä¸¤æ¡è¯­å¥å‰çš„æ³¨é‡Šç¬¦ï¼Œæ‰§è¡Œç»“æœåˆ™æ˜¯ï¼š 1return value of test(): 0 åœ¨ä»¥ä¸Šä¸¤ç§æƒ…å†µä¸‹ï¼Œfinally è¯­å¥å—éƒ½æ²¡æœ‰æ‰§è¡Œï¼Œè¯´æ˜ä»€ä¹ˆé—®é¢˜å‘¢ï¼Ÿåªæœ‰ä¸ finally ç›¸å¯¹åº”çš„ try è¯­å¥å—å¾—åˆ°æ‰§è¡Œçš„æƒ…å†µä¸‹ï¼Œfinally è¯­å¥å—æ‰ä¼šæ‰§è¡Œã€‚ä»¥ä¸Šä¸¤ç§æƒ…å†µï¼Œéƒ½æ˜¯åœ¨ try è¯­å¥å—ä¹‹å‰è¿”å›ï¼ˆreturnï¼‰æˆ–è€…æŠ›å‡ºå¼‚å¸¸ï¼Œæ‰€ä»¥ try å¯¹åº”çš„ finally è¯­å¥å—æ²¡æœ‰æ‰§è¡Œã€‚ é‚£å¥½ï¼Œå³ä½¿ä¸ finally ç›¸å¯¹åº”çš„ try è¯­å¥å—å¾—åˆ°æ‰§è¡Œçš„æƒ…å†µä¸‹ï¼Œfinally è¯­å¥å—ä¸€å®šä¼šæ‰§è¡Œå—ï¼Ÿä¸å¥½æ„æ€ï¼Œè¿™æ¬¡å¯èƒ½åˆè®©å¤§å®¶å¤±æœ›äº†ï¼Œç­”æ¡ˆä»ç„¶æ˜¯å¦å®šçš„ã€‚è¯·çœ‹ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼ˆæ¸…å• 2ï¼‰ã€‚ æ¸…å• 2.12345678910111213141516public class Test &#123;public static void main(String[] args) &#123;System.out.println(\"return value of test(): \" + test()); &#125;public static int test() &#123;int i = 1;try &#123;System.out.println(\"try block\");System.exit(0);return i;&#125;finally &#123;System.out.println(\"finally block\"); &#125; &#125;&#125; æ¸…å• 2 çš„æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š 1try block finally è¯­å¥å—è¿˜æ˜¯æ²¡æœ‰æ‰§è¡Œï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿå› ä¸ºæˆ‘ä»¬åœ¨ try è¯­å¥å—ä¸­æ‰§è¡Œäº† System.exit (0) è¯­å¥ï¼Œç»ˆæ­¢äº† Java è™šæ‹Ÿæœºçš„è¿è¡Œã€‚é‚£æœ‰äººè¯´äº†ï¼Œåœ¨ä¸€èˆ¬çš„ Java åº”ç”¨ä¸­åŸºæœ¬ä¸Šæ˜¯ä¸ä¼šè°ƒç”¨è¿™ä¸ª System.exit(0) æ–¹æ³•çš„ã€‚OK ï¼æ²¡æœ‰é—®é¢˜ï¼Œæˆ‘ä»¬ä¸è°ƒç”¨ System.exit(0) è¿™ä¸ªæ–¹æ³•ï¼Œé‚£ä¹ˆ finally è¯­å¥å—å°±ä¸€å®šä¼šæ‰§è¡Œå—ï¼Ÿ å†ä¸€æ¬¡è®©å¤§å®¶å¤±æœ›äº†ï¼Œç­”æ¡ˆè¿˜æ˜¯å¦å®šçš„ã€‚å½“ä¸€ä¸ªçº¿ç¨‹åœ¨æ‰§è¡Œ try è¯­å¥å—æˆ–è€… catch è¯­å¥å—æ—¶è¢«æ‰“æ–­ï¼ˆinterruptedï¼‰æˆ–è€…è¢«ç»ˆæ­¢ï¼ˆkilledï¼‰ï¼Œä¸å…¶ç›¸å¯¹åº”çš„ finally è¯­å¥å—å¯èƒ½ä¸ä¼šæ‰§è¡Œã€‚è¿˜æœ‰æ›´æç«¯çš„æƒ…å†µï¼Œå°±æ˜¯åœ¨çº¿ç¨‹è¿è¡Œ try è¯­å¥å—æˆ–è€… catch è¯­å¥å—æ—¶ï¼Œçªç„¶æ­»æœºæˆ–è€…æ–­ç”µï¼Œfinally è¯­å¥å—è‚¯å®šä¸ä¼šæ‰§è¡Œäº†ã€‚å¯èƒ½æœ‰äººè®¤ä¸ºæ­»æœºã€æ–­ç”µè¿™äº›ç†ç”±æœ‰äº›å¼ºè¯å¤ºç†ï¼Œæ²¡æœ‰å…³ç³»ï¼Œæˆ‘ä»¬åªæ˜¯ä¸ºäº†è¯´æ˜è¿™ä¸ªé—®é¢˜ã€‚ finally è¯­å¥å‰–æè¯´äº†è¿™ä¹ˆå¤šï¼Œè¿˜æ˜¯è®©æˆ‘ä»¬æ‹¿å‡ºäº›æœ‰è¯´æœåŠ›çš„è¯æ®å§ï¼è¿˜æœ‰ä»€ä¹ˆè¯æ®æ¯”å®˜æ–¹çš„æ–‡æ¡£æ›´å…·è¯´æœåŠ›å‘¢ï¼Ÿè®©æˆ‘ä»¬æ¥çœ‹çœ‹å®˜æ–¹ç½‘ç«™ä¸Šçš„ã€ŠThe Java Tutorialsã€‹ä¸­æ˜¯æ€æ ·æ¥æè¿° finally è¯­å¥å—çš„å§ï¼ä»¥ä¸‹å†…å®¹åŸå°ä¸åŠ¨çš„æ‘˜è‡ªäºã€Š The Java Tutorials ã€‹æ–‡æ¡£ã€‚ The finally BlockThe finally block always executes when the try block exits. This ensures that the finally block is executed even if an unexpected exception occurs. But finally is useful for more than just exception handling â€” it allows the programmer to avoid having cleanup code accidentally bypassed by a return,continue, or break. Putting cleanup code in a finally block is always a good practice, even when no exceptions are anticipated.Note: If the JVM exits while the try or catch code is being executed, then the finally block may not execute. Likewise, if the thread executing the try or catch code is interrupted or killed, the finally block may not execute even though the application as a whole continues. è¯·ä»”ç»†é˜…è¯»å¹¶è®¤çœŸä½“ä¼šä¸€ä¸‹ä»¥ä¸Šä¸¤æ®µè‹±æ–‡ï¼Œå½“ä½ çœŸæ­£çš„ç†è§£äº†è¿™ä¸¤æ®µè‹±æ–‡çš„ç¡®åˆ‡å«ä¹‰ï¼Œä½ å°±å¯ä»¥éå¸¸è‡ªä¿¡çš„æ¥å›ç­”â€œfinally è¯­å¥å—æ˜¯å¦ä¸€å®šä¼šæ‰§è¡Œï¼Ÿâ€è¿™æ ·çš„é—®é¢˜ã€‚çœ‹æ¥ï¼Œå¤§å¤šæ—¶å€™ï¼Œå¹¶ä¸æ˜¯ Java è¯­è¨€æœ¬èº«æœ‰å¤šä¹ˆé«˜æ·±ï¼Œè€Œæ˜¯æˆ‘ä»¬å¿½ç•¥äº†å¯¹åŸºç¡€çŸ¥è¯†çš„æ·±å…¥ç†è§£ã€‚ æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸‹ finally è¯­å¥å—æ˜¯æ€æ ·æ‰§è¡Œçš„ã€‚åœ¨æ’é™¤äº†ä»¥ä¸Š finally è¯­å¥å—ä¸æ‰§è¡Œçš„æƒ…å†µåï¼Œfinally è¯­å¥å—å°±å¾—ä¿è¯è¦æ‰§è¡Œï¼Œæ—¢ç„¶ finally è¯­å¥å—ä¸€å®šè¦æ‰§è¡Œï¼Œé‚£ä¹ˆå®ƒå’Œ try è¯­å¥å—ä¸ catch è¯­å¥å—çš„æ‰§è¡Œé¡ºåºåˆæ˜¯æ€æ ·çš„å‘¢ï¼Ÿè¿˜æœ‰ï¼Œå¦‚æœ try è¯­å¥å—ä¸­æœ‰ return è¯­å¥ï¼Œé‚£ä¹ˆ finally è¯­å¥å—æ˜¯åœ¨ return ä¹‹å‰æ‰§è¡Œï¼Œè¿˜æ˜¯åœ¨ return ä¹‹åæ‰§è¡Œå‘¢ï¼Ÿå¸¦ç€è¿™æ ·ä¸€äº›é—®é¢˜ï¼Œæˆ‘ä»¬è¿˜æ˜¯ä»¥å…·ä½“çš„æ¡ˆä¾‹æ¥è®²è§£ã€‚ å…³äº tryã€catchã€finally çš„æ‰§è¡Œé¡ºåºé—®é¢˜ï¼Œæˆ‘ä»¬è¿˜æ˜¯æ¥çœ‹çœ‹æƒå¨çš„è®ºè¿°å§ï¼ä»¥ä¸‹å†…å®¹æ‘˜è‡ª Java è¯­è¨€è§„èŒƒç¬¬å››ç‰ˆï¼ˆã€ŠThe Javaâ„¢ Programming Language, Fourth Editionã€‹ï¼‰ä¸­å¯¹äº tryï¼Œcatchï¼Œå’Œ finally çš„æè¿°ã€‚ 12.4. Try, catch, and finallyYou catch exceptions by enclosing code in Try blocks. The basic syntax for a Try block is:try {statements} catch (exception_type1 identifier1) {statements} catch (exception_type2 identifier2) {statementsâ€¦} finally {statements} where either at least one catch clause, or the finally clause, must be present. The body of the try statement is executed until either an exception is thrown or the body finishes successfully. If an exception is thrown, each catch clause is examined in turn, from first to last, to see whether the type of the exception object is assignable to the type declared in the catch. When an assignable catch clause is found, its block is executed with its identifier set to reference the exception object. No other catch clause will be executed. Any number of catch clauses, including zero, can be associated with a particular TRy as long as each clause catches a different type of exception. If no appropriate catch is found, the exception percolates out of the try statement into any outer try that might have a catch clause to handle it. If a finally clause is present with a try, its code is executed after all other processing in the try is complete. This happens no matter how completion was achieved, whether normally, through an exception, or through a control flow statement such as return or break. ä¸Šé¢è¿™æ®µæ–‡å­—çš„å¤§ä½“æ„æ€æ˜¯è¯´ï¼Œä¸ç®¡ try è¯­å¥å—æ­£å¸¸ç»“æŸè¿˜æ˜¯å¼‚å¸¸ç»“æŸï¼Œfinally è¯­å¥å—æ˜¯ä¿è¯è¦æ‰§è¡Œçš„ã€‚å¦‚æœ try è¯­å¥å—æ­£å¸¸ç»“æŸï¼Œé‚£ä¹ˆåœ¨ try è¯­å¥å—ä¸­çš„è¯­å¥éƒ½æ‰§è¡Œå®Œä¹‹åï¼Œå†æ‰§è¡Œ finally è¯­å¥å—ã€‚å¦‚æœ try ä¸­æœ‰æ§åˆ¶è½¬ç§»è¯­å¥ï¼ˆreturnã€breakã€continueï¼‰å‘¢ï¼Ÿé‚£ finally è¯­å¥å—æ˜¯åœ¨æ§åˆ¶è½¬ç§»è¯­å¥ä¹‹å‰æ‰§è¡Œï¼Œè¿˜æ˜¯ä¹‹åæ‰§è¡Œå‘¢ï¼Ÿä¼¼ä¹ä»ä¸Šé¢çš„æè¿°ä¸­æˆ‘ä»¬è¿˜çœ‹ä¸å‡ºä»»ä½•ç«¯å€ªï¼Œä¸è¦ç€æ€¥ï¼Œåé¢çš„è®²è§£ä¸­æˆ‘ä»¬ä¼šåˆ†æè¿™ä¸ªé—®é¢˜ã€‚å¦‚æœ try è¯­å¥å—å¼‚å¸¸ç»“æŸï¼Œåº”è¯¥å…ˆå»ç›¸åº”çš„ catch å—åšå¼‚å¸¸å¤„ç†ï¼Œç„¶åæ‰§è¡Œ finally è¯­å¥å—ã€‚åŒæ ·çš„é—®é¢˜ï¼Œå¦‚æœ catch è¯­å¥å—ä¸­åŒ…å«æ§åˆ¶è½¬ç§»è¯­å¥å‘¢ï¼Ÿ finally è¯­å¥å—æ˜¯åœ¨è¿™äº›æ§åˆ¶è½¬ç§»è¯­å¥ä¹‹å‰ï¼Œè¿˜æ˜¯ä¹‹åæ‰§è¡Œå‘¢ï¼Ÿæˆ‘ä»¬ä¹Ÿä¼šåœ¨åç»­è®¨è®ºä¸­æåˆ°ã€‚ å…¶å®ï¼Œå…³äº tryï¼Œcatchï¼Œfinally çš„æ‰§è¡Œæµç¨‹è¿œéè¿™ä¹ˆç®€å•ï¼Œæœ‰å…´è¶£çš„è¯»è€…å¯ä»¥å‚è€ƒ Java è¯­è¨€è§„èŒƒç¬¬ä¸‰ç‰ˆï¼ˆã€ŠThe Javaâ„¢ Language Specification, Third Editionã€‹ï¼‰ä¸­å¯¹äº Execution of try-catch-finally çš„æè¿°ï¼Œéå¸¸å¤æ‚çš„ä¸€ä¸ªæµç¨‹ã€‚é™äºç¯‡å¹…çš„åŸå› ï¼Œæœ¬æ–‡ä¸åšæ‘˜å½•ï¼Œè¯·æ„Ÿå…´è¶£çš„è¯»è€…è‡ªè¡Œé˜…è¯»ã€‚ finally è¯­å¥ç¤ºä¾‹è¯´æ˜ä¸‹é¢ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼ˆæ¸…å• 3ï¼‰ã€‚ æ¸…å• 3.12345678910public class Test &#123;public static void main(String[] args) &#123;try &#123;System.out.println(\"try block\");return ;&#125; finally &#123;System.out.println(\"finally block\"); &#125; &#125;&#125; æ¸…å• 3 çš„æ‰§è¡Œç»“æœä¸ºï¼š12try blockfinally block æ¸…å• 3 è¯´æ˜ finally è¯­å¥å—åœ¨ try è¯­å¥å—ä¸­çš„ return è¯­å¥ä¹‹å‰æ‰§è¡Œã€‚æˆ‘ä»¬å†æ¥çœ‹å¦ä¸€ä¸ªä¾‹å­ï¼ˆæ¸…å• 4ï¼‰ã€‚ æ¸…å• 4.123456789101112131415161718public class Test &#123;public static void main(String[] args) &#123;System.out.println(\"reture value of test() : \" + test()); &#125;public static int test()&#123;int i = 1;try &#123; System.out.println(\"try block\"); i = 1 / 0; return 1;&#125;catch (Exception e)&#123;System.out.println(\"exception block\");return 2;&#125;finally &#123;System.out.println(\"finally block\"); &#125; &#125;&#125; æ¸…å• 4 çš„æ‰§è¡Œç»“æœä¸ºï¼š1234try blockexception blockfinally blockreture value of test() : 2 æ¸…å• 4 è¯´æ˜äº† finally è¯­å¥å—åœ¨ catch è¯­å¥å—ä¸­çš„ return è¯­å¥ä¹‹å‰æ‰§è¡Œã€‚ ä»ä¸Šé¢çš„æ¸…å• 3 å’Œæ¸…å• 4ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œå…¶å® finally è¯­å¥å—æ˜¯åœ¨ try æˆ–è€… catch ä¸­çš„ return è¯­å¥ä¹‹å‰æ‰§è¡Œçš„ã€‚æ›´åŠ ä¸€èˆ¬çš„è¯´æ³•æ˜¯ï¼Œfinally è¯­å¥å—åº”è¯¥æ˜¯åœ¨æ§åˆ¶è½¬ç§»è¯­å¥ä¹‹å‰æ‰§è¡Œï¼Œæ§åˆ¶è½¬ç§»è¯­å¥é™¤äº† return å¤–ï¼Œè¿˜æœ‰ break å’Œ continueã€‚å¦å¤–ï¼Œthrow è¯­å¥ä¹Ÿå±äºæ§åˆ¶è½¬ç§»è¯­å¥ã€‚è™½ç„¶ returnã€throwã€break å’Œ continue éƒ½æ˜¯æ§åˆ¶è½¬ç§»è¯­å¥ï¼Œä½†æ˜¯å®ƒä»¬ä¹‹é—´æ˜¯æœ‰åŒºåˆ«çš„ã€‚å…¶ä¸­ return å’Œ throw æŠŠç¨‹åºæ§åˆ¶æƒè½¬äº¤ç»™å®ƒä»¬çš„è°ƒç”¨è€…ï¼ˆinvokerï¼‰ï¼Œè€Œ break å’Œ continue çš„æ§åˆ¶æƒæ˜¯åœ¨å½“å‰æ–¹æ³•å†…è½¬ç§»ã€‚è¯·å¤§å®¶å…ˆè®°ä½å®ƒä»¬çš„åŒºåˆ«ï¼Œåœ¨åç»­çš„åˆ†æä¸­æˆ‘ä»¬è¿˜ä¼šè°ˆåˆ°ã€‚ è¿˜æ˜¯å¾—æ¥ç‚¹æœ‰è¯´æœåŠ›çš„è¯æ®ï¼Œä¸‹é¢è¿™æ®µæ‘˜è‡ª Java è¯­è¨€è§„èŒƒç¬¬å››ç‰ˆï¼ˆã€ŠThe Javaâ„¢ Programming Language, Fourth Editionã€‹ï¼‰ï¼Œè¯·è¯»è€…è‡ªå·±ä½“ä¼šä¸€ä¸‹å…¶å«ä¹‰ã€‚ Afinallyclause can also be used to clean up forbreak,continue, andreturn, which is one reason you will sometimes see atryclause with nocatchclauses. When any control transfer statement is executed, all relevantfinallyclauses are executed. There is no way to leave atryblock without executing itsfinallyclause. å¥½äº†ï¼Œçœ‹åˆ°è¿™é‡Œï¼Œæ˜¯ä¸æ˜¯æœ‰äººè®¤ä¸ºè‡ªå·±å·²ç»æŒæ¡äº† finally çš„ç”¨æ³•äº†ï¼Ÿå…ˆåˆ«å¿™ç€ä¸‹ç»“è®ºï¼Œæˆ‘ä»¬å†æ¥çœ‹ä¸¤ä¸ªä¾‹å­ â€“ æ¸…å• 5 å’Œæ¸…å• 6ã€‚ æ¸…å• 5.123456789101112public class Test &#123; public static void main(String[] args) &#123; System.out.println(\"return value of getValue(): \" + getValue()); &#125; public static int getValue() &#123; try &#123; return 0; &#125; finally &#123; return 1; &#125; &#125; &#125; æ¸…å• 5 çš„æ‰§è¡Œç»“æœï¼š1return value of getValue(): 1 æ¸…å• 6.12345678910111213public class Test &#123;public static void main(String[] args) &#123; System.out.println(\"return value of getValue(): \" + getValue()); &#125;public static int getValue() &#123; int i = 1; try &#123; return i; &#125; finally &#123; i++; &#125; &#125;&#125; æ¸…å• 6 çš„æ‰§è¡Œç»“æœï¼š1return value of getValue(): 1 åˆ©ç”¨æˆ‘ä»¬ä¸Šé¢åˆ†æå¾—å‡ºçš„ç»“è®ºï¼šfinally è¯­å¥å—æ˜¯åœ¨ try æˆ–è€… catch ä¸­çš„ return è¯­å¥ä¹‹å‰æ‰§è¡Œçš„ã€‚ ç”±æ­¤ï¼Œå¯ä»¥è½»æ¾çš„ç†è§£æ¸…å• 5 çš„æ‰§è¡Œç»“æœæ˜¯ 1ã€‚å› ä¸º finally ä¸­çš„ return 1ï¼›è¯­å¥è¦åœ¨ try ä¸­çš„ return 0ï¼›è¯­å¥ä¹‹å‰æ‰§è¡Œï¼Œé‚£ä¹ˆ finally ä¸­çš„ return 1ï¼›è¯­å¥æ‰§è¡Œåï¼ŒæŠŠç¨‹åºçš„æ§åˆ¶æƒè½¬äº¤ç»™äº†å®ƒçš„è°ƒç”¨è€… mainï¼ˆï¼‰å‡½æ•°ï¼Œå¹¶ä¸”è¿”å›å€¼ä¸º 1ã€‚é‚£ä¸ºä»€ä¹ˆæ¸…å• 6 çš„è¿”å›å€¼ä¸æ˜¯ 2ï¼Œè€Œæ˜¯ 1 å‘¢ï¼ŸæŒ‰ç…§æ¸…å• 5 çš„åˆ†æé€»è¾‘ï¼Œfinally ä¸­çš„ i++ï¼›è¯­å¥åº”è¯¥åœ¨ try ä¸­çš„ return iï¼›ä¹‹å‰æ‰§è¡Œå•Šï¼Ÿ i çš„åˆå§‹å€¼ä¸º 1ï¼Œé‚£ä¹ˆæ‰§è¡Œ i++ï¼›ä¹‹åä¸º 2ï¼Œå†æ‰§è¡Œ return iï¼›é‚£ä¸å°±åº”è¯¥æ˜¯ 2 å—ï¼Ÿæ€ä¹ˆå˜æˆ 1 äº†å‘¢ï¼Ÿ å…³äº Java è™šæ‹Ÿæœºæ˜¯å¦‚ä½•ç¼–è¯‘ finally è¯­å¥å—çš„é—®é¢˜ï¼Œæœ‰å…´è¶£çš„è¯»è€…å¯ä»¥å‚è€ƒã€Š The JavaTM Virtual Machine Specification, Second Edition ã€‹ä¸­ 7.13 èŠ‚ Compiling finallyã€‚é‚£é‡Œè¯¦ç»†ä»‹ç»äº† Java è™šæ‹Ÿæœºæ˜¯å¦‚ä½•ç¼–è¯‘ finally è¯­å¥å—ã€‚å®é™…ä¸Šï¼ŒJava è™šæ‹Ÿæœºä¼šæŠŠ finally è¯­å¥å—ä½œä¸º subroutineï¼ˆå¯¹äºè¿™ä¸ª subroutine ä¸çŸ¥è¯¥å¦‚ä½•ç¿»è¯‘ä¸ºå¥½ï¼Œå¹²è„†å°±ä¸ç¿»è¯‘äº†ï¼Œå…å¾—äº§ç”Ÿæ­§ä¹‰å’Œè¯¯è§£ã€‚ï¼‰ç›´æ¥æ’å…¥åˆ° try è¯­å¥å—æˆ–è€… catch è¯­å¥å—çš„æ§åˆ¶è½¬ç§»è¯­å¥ä¹‹å‰ã€‚ä½†æ˜¯ï¼Œè¿˜æœ‰å¦å¤–ä¸€ä¸ªä¸å¯å¿½è§†çš„å› ç´ ï¼Œé‚£å°±æ˜¯åœ¨æ‰§è¡Œ subroutineï¼ˆä¹Ÿå°±æ˜¯ finally è¯­å¥å—ï¼‰ä¹‹å‰ï¼Œtry æˆ–è€… catch è¯­å¥å—ä¼šä¿ç•™å…¶è¿”å›å€¼åˆ°æœ¬åœ°å˜é‡è¡¨ï¼ˆLocal Variable Tableï¼‰ä¸­ã€‚å¾… subroutine æ‰§è¡Œå®Œæ¯•ä¹‹åï¼Œå†æ¢å¤ä¿ç•™çš„è¿”å›å€¼åˆ°æ“ä½œæ•°æ ˆä¸­ï¼Œç„¶åé€šè¿‡ return æˆ–è€… throw è¯­å¥å°†å…¶è¿”å›ç»™è¯¥æ–¹æ³•çš„è°ƒç”¨è€…ï¼ˆinvokerï¼‰ã€‚è¯·æ³¨æ„ï¼Œå‰æ–‡ä¸­æˆ‘ä»¬æ›¾ç»æåˆ°è¿‡ returnã€throw å’Œ breakã€continue çš„åŒºåˆ«ï¼Œå¯¹äºè¿™æ¡è§„åˆ™ï¼ˆä¿ç•™è¿”å›å€¼ï¼‰ï¼Œåªé€‚ç”¨äº return å’Œ throw è¯­å¥ï¼Œä¸é€‚ç”¨äº break å’Œ continue è¯­å¥ï¼Œå› ä¸ºå®ƒä»¬æ ¹æœ¬å°±æ²¡æœ‰è¿”å›å€¼ã€‚ æ˜¯ä¸æ˜¯ä¸å¤ªå¥½ç†è§£ï¼Œé‚£æˆ‘ä»¬å°±ç”¨å…·ä½“çš„ä¾‹å­æ¥åšå½¢è±¡çš„è¯´æ˜å§ï¼ ä¸ºäº†èƒ½å¤Ÿè§£é‡Šæ¸…å• 6 çš„æ‰§è¡Œç»“æœï¼Œæˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹æ¸…å• 6 çš„å­—èŠ‚ç ï¼ˆbyte-codeï¼‰ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647Compiled from &quot;Test.java&quot; public class Test extends java.lang.Object&#123; public Test(); Code: 0: aload_0 1:invokespecial#1; //Method java/lang/Object.&quot;&lt;init&gt;&quot;:()V 4: return LineNumberTable: line 1: 0 public static void main(java.lang.String[]); Code: 0: getstatic #2; //Field java/lang/System.out:Ljava/io/PrintStream; 3: new #3; //class java/lang/StringBuilder 6: dup 7: invokespecial #4; //Method java/lang/StringBuilder.&quot;&lt;init&gt;&quot;:()V 10: ldc #5; //String return value of getValue(): 12: invokevirtual #6; //Method java/lang/StringBuilder.append:( Ljava/lang/String;)Ljava/lang/StringBuilder; 15: invokestatic #7; //Method getValue:()I 18: invokevirtual #8; //Method java/lang/StringBuilder.append:(I)Ljava/lang/StringBuilder; 21: invokevirtual #9; //Method java/lang/StringBuilder.toString:()Ljava/lang/String; 24: invokevirtual #10; //Method java/io/PrintStream.println:(Ljava/lang/String;)V 27: return public static int getValue(); Code: 0: iconst_1 1: istore_0 2: iload_0 3: istore_1 4: iinc 0, 1 7: iload_1 8: ireturn 9: astore_2 10: iinc 0, 1 13: aload_2 14: athrow Exception table: from to target type 2 4 9 any 9 10 9 any &#125; å¯¹äº Testï¼ˆï¼‰æ„é€ æ–¹æ³•ä¸ mainï¼ˆï¼‰æ–¹æ³•ï¼Œåœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä¸åšè¿‡å¤šè§£é‡Šã€‚è®©æˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹ getValueï¼ˆï¼‰æ–¹æ³•çš„æ‰§è¡Œã€‚åœ¨è¿™ä¹‹å‰ï¼Œå…ˆè®©æˆ‘æŠŠ getValueï¼ˆï¼‰ä¸­ç”¨åˆ°çš„è™šæ‹ŸæœºæŒ‡ä»¤è§£é‡Šä¸€ä¸‹ï¼Œä»¥ä¾¿è¯»è€…èƒ½å¤Ÿæ­£ç¡®çš„ç†è§£è¯¥å‡½æ•°çš„æ‰§è¡Œã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445461. iconst_Description: Push the int constant (-1, 0, 1, 2, 3, 4 or 5) onto the operand stack.Forms: iconst_m1 = 2 (0x2) iconst_0 = 3 (0x3) iconst_1 = 4 (0x4)iconst_2 = 5 (0x5) iconst_3 = 6 (0x6) iconst_4 = 7 (0x7) iconst_5 = 8 (0x8)2. istore_Description: Store int into local variable. The must be an index into thelocal variable array of the current frame.Forms: istore_0 = 59 (0x3b) istore_1 = 60 (0x3c) istore_2 = 61 (0x3d)istore_3 = 62 (0x3e)3. iload_Description: Load int from local variable. The must be an index into thelocal variable array of the current frame.Forms: iload_0 = 26 (0x1a) iload_1 = 27 (0x1b) iload_2 = 28 (0x1c) iload_3 = 29 (0x1d)4. iinc index, constDescription: Increment local variable by constant. The index is an unsigned byte thatmust be an index into the local variable array of the current frame. The const is animmediate signed byte. The local variable at index must contain an int. The valueconst is first sign-extended to an int, and then the local variable at index isincremented by that amount.Forms: iinc = 132 (0x84)Format:iincindexconst5. ireturnDescription: Return int from method.Forms: ireturn = 172 (0xac)6. astore_Description: Store reference into local variable. The must be an index into thelocal variable array of the current frame.Forms: astore_0 = 75 (0x4b) astore_1 = 76 (0x4c) astore_2 =77 (0x4d) astore_3 =78 (0x4e)7. aload_Description: Load reference from local variable. The must be an index into thelocal variable array of the current frame.Forms: aload_0 = 42 (0x2a) aload_1 = 43 (0x2b) aload_2 = 44 (0x2c) aload_3 = 45 (0x2d)8. athrowDescription: Throw exception or error.Forms: athrow = 191 (0xbf) æœ‰äº†ä»¥ä¸Šçš„ Java è™šæ‹ŸæœºæŒ‡ä»¤ï¼Œæˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹å…¶æ‰§è¡Œé¡ºåºï¼šåˆ†ä¸ºæ­£å¸¸æ‰§è¡Œï¼ˆæ²¡æœ‰ exceptionï¼‰å’Œå¼‚å¸¸æ‰§è¡Œï¼ˆæœ‰ exceptionï¼‰ä¸¤ç§æƒ…å†µã€‚æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹æ­£å¸¸æ‰§è¡Œçš„æƒ…å†µï¼Œå¦‚å›¾ 1 æ‰€ç¤ºï¼š ###å›¾ 1. getValueï¼ˆï¼‰å‡½æ•°æ­£å¸¸æ‰§è¡Œçš„æƒ…å†µ ç”±ä¸Šå›¾ï¼Œæˆ‘ä»¬å¯ä»¥æ¸…æ™°çš„çœ‹å‡ºï¼Œåœ¨ finally è¯­å¥å—ï¼ˆiinc 0, 1ï¼‰æ‰§è¡Œä¹‹å‰ï¼ŒgetValueï¼ˆï¼‰æ–¹æ³•ä¿å­˜äº†å…¶è¿”å›å€¼ï¼ˆ1ï¼‰åˆ°æœ¬åœ°è¡¨é‡è¡¨ä¸­ 1 çš„ä½ç½®ï¼Œå®Œæˆè¿™ä¸ªä»»åŠ¡çš„æŒ‡ä»¤æ˜¯ istore_1ï¼›ç„¶åæ‰§è¡Œ finally è¯­å¥å—ï¼ˆiinc 0, 1ï¼‰ï¼Œfinally è¯­å¥å—æŠŠä½äº 0 è¿™ä¸ªä½ç½®çš„æœ¬åœ°å˜é‡è¡¨ä¸­çš„å€¼åŠ  1ï¼Œå˜æˆ 2ï¼›å¾… finally è¯­å¥å—æ‰§è¡Œå®Œæ¯•ä¹‹åï¼ŒæŠŠæœ¬åœ°è¡¨é‡è¡¨ä¸­ 1 çš„ä½ç½®ä¸Šå€¼æ¢å¤åˆ°æ“ä½œæ•°æ ˆï¼ˆiload _1ï¼‰ï¼Œæœ€åæ‰§è¡Œ ireturn æŒ‡ä»¤æŠŠå½“å‰æ“ä½œæ•°æ ˆä¸­çš„å€¼ï¼ˆ1ï¼‰è¿”å›ç»™å…¶è°ƒç”¨è€…ï¼ˆmainï¼‰ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæ¸…å• 6 çš„æ‰§è¡Œç»“æœæ˜¯ 1ï¼Œè€Œä¸æ˜¯ 2 çš„åŸå› ã€‚ å†è®©æˆ‘ä»¬æ¥çœ‹çœ‹å¼‚å¸¸æ‰§è¡Œçš„æƒ…å†µã€‚æ˜¯ä¸æ˜¯æœ‰äººä¼šé—®ï¼Œä½ çš„æ¸…å• 6 ä¸­éƒ½æ²¡æœ‰ catch è¯­å¥ï¼Œå“ªæ¥çš„å¼‚å¸¸å¤„ç†å‘¢ï¼Ÿæˆ‘è§‰å¾—è¿™æ˜¯ä¸€ä¸ªå¥½é—®é¢˜ï¼Œå…¶å®ï¼Œå³ä½¿æ²¡æœ‰ catch è¯­å¥ï¼ŒJava ç¼–è¯‘å™¨ç¼–è¯‘å‡ºçš„å­—èŠ‚ç ä¸­è¿˜æ˜¯æœ‰é»˜è®¤çš„å¼‚å¸¸å¤„ç†çš„ï¼Œåˆ«å¿˜äº†ï¼Œé™¤äº†éœ€è¦æ•è·çš„å¼‚å¸¸ï¼Œè¿˜å¯èƒ½æœ‰ä¸éœ€æ•è·çš„å¼‚å¸¸ï¼ˆå¦‚ï¼šRunTimeException å’Œ Errorï¼‰ã€‚ ä» getValueï¼ˆï¼‰æ–¹æ³•çš„å­—èŠ‚ç ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å®ƒçš„å¼‚å¸¸å¤„ç†è¡¨ï¼ˆexception tableï¼‰ï¼Œ å¦‚ä¸‹ï¼š123Exception table:from to target type2 4 9 any å®ƒçš„æ„æ€æ˜¯è¯´ï¼šå¦‚æœä» 2 åˆ° 4 è¿™æ®µæŒ‡ä»¤å‡ºç°å¼‚å¸¸ï¼Œåˆ™ç”±ä» 9 å¼€å§‹çš„æŒ‡ä»¤æ¥å¤„ç†ã€‚ å›¾ 2. getValueï¼ˆï¼‰å‡½æ•°å¼‚å¸¸æ‰§è¡Œçš„æƒ…å†µ å…ˆè¯´æ˜ä¸€ç‚¹ï¼Œä¸Šå›¾ä¸­çš„ exception å…¶å®åº”è¯¥æ˜¯ exception å¯¹è±¡çš„å¼•ç”¨ï¼Œä¸ºäº†æ–¹ä¾¿è¯´æ˜ï¼Œæˆ‘ç›´æ¥æŠŠå®ƒå†™æˆ exception äº†ã€‚ ç”±ä¸Šå›¾ï¼ˆå›¾ 2ï¼‰å¯çŸ¥ï¼Œå½“ä» 2 åˆ° 4 è¿™æ®µæŒ‡ä»¤å‡ºç°å¼‚å¸¸æ—¶ï¼Œå°†ä¼šäº§ç”Ÿä¸€ä¸ª exception å¯¹è±¡ï¼Œå¹¶ä¸”æŠŠå®ƒå‹å…¥å½“å‰æ“ä½œæ•°æ ˆçš„æ ˆé¡¶ã€‚æ¥ä¸‹æ¥æ˜¯ astore_2 è¿™æ¡æŒ‡ä»¤ï¼Œå®ƒè´Ÿè´£æŠŠ exception å¯¹è±¡ä¿å­˜åˆ°æœ¬åœ°å˜é‡è¡¨ä¸­ 2 çš„ä½ç½®ï¼Œç„¶åæ‰§è¡Œ finally è¯­å¥å—ï¼Œå¾… finally è¯­å¥å—æ‰§è¡Œå®Œæ¯•åï¼Œå†ç”± aload _2 è¿™æ¡æŒ‡ä»¤æŠŠé¢„å…ˆå­˜å‚¨çš„ exception å¯¹è±¡æ¢å¤åˆ°æ“ä½œæ•°æ ˆä¸­ï¼Œæœ€åç”± athrow æŒ‡ä»¤å°†å…¶è¿”å›ç»™è¯¥æ–¹æ³•çš„è°ƒç”¨è€…ï¼ˆmainï¼‰ã€‚ é€šè¿‡ä»¥ä¸Šçš„åˆ†æï¼Œå¤§å®¶åº”è¯¥å·²ç»æ¸…æ¥š try-catch-finally è¯­å¥å—çš„æ‰§è¡Œæµç¨‹äº†å§ï¼ä¸ºäº†æ›´å…·è¯´æœåŠ›ï¼Œæˆ‘ä»¬è¿˜æ˜¯æ¥å¼•ç»æ®å…¸å§ï¼ä¸‹é¢è¿™æ®µä»ç„¶æ‘˜è‡ª Java è¯­è¨€è§„èŒƒç¬¬å››ç‰ˆ ã€ŠThe Javaâ„¢ Programming Language, Fourth Editionã€‹ï¼Œè¯·è¯»è€…è‡ªå·±ä½“ä¼šå§ï¼ a finally clause is always entered with a reason. That reason may be that the try code finished normally, that it executed a control flow statement such as return, or that an exception was thrown in code executed in the Try block. The reason is remembered when the finally clause exits by falling out the bottom. However, if the finally block creates its own reason to leave by executing a control flow statement (such as break or return) or by throwing an exception, that reason supersedes the original one, and the original reason is forgotten. For example, consider the following code:try {// â€¦ do something â€¦return 1;} finally {return 2;}When the Try block executes its return, the finally block is entered with the â€œreasonâ€ of returning the value 1. However, inside the finally block the value 2 is returned, so the initial intention is forgotten. In fact, if any of the other code in the try block had thrown an exception, the result would still be to return 2. If the finally block did not return a value but simply fell out the bottom, the â€œreturn the value 1 â€³ reason would be remembered and carried out. å¥½äº†ï¼Œæœ‰äº†ä»¥ä¸Šçš„çŸ¥è¯†ï¼Œè®©æˆ‘ä»¬å†æ¥çœ‹ä»¥ä¸‹ 3 ä¸ªä¾‹å­ã€‚ æ¸…å• 7.123456789101112131415public class Test &#123; public static void main(String[] args) &#123; System.out.println(\"return value of getValue(): \" + getValue()); &#125; @SuppressWarnings(\"finally\") public static int getValue() &#123; int i = 1; try &#123; i = 4; &#125; finally &#123; i++; return i; &#125; &#125; &#125; æ¸…å• 7 çš„æ‰§è¡Œç»“æœï¼š1return value of getValue(): 5 æ¸…å• 8.1234567891011121314public class Test &#123;public static void main(String[] args) &#123; System.out.println(\"return value of getValue(): \" + getValue()); &#125;public static int getValue() &#123; int i = 1; try &#123; i = 4; &#125; finally &#123; i++; &#125; return i; &#125;&#125; æ¸…å• 8 çš„æ‰§è¡Œç»“æœï¼š1return value of getValue(): 5 æ¸…å• 7 å’Œæ¸…å• 8 åº”è¯¥è¿˜æ¯”è¾ƒç®€å•å§ï¼åˆ©ç”¨æˆ‘ä»¬ä¸Šé¢è®²è§£çš„çŸ¥è¯†ï¼Œå¾ˆå®¹æ˜“åˆ†æå‡ºå…¶ç»“æœã€‚è®©æˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸ªç¨å¾®å¤æ‚ä¸€ç‚¹çš„ä¾‹å­ â€“ æ¸…å• 9ã€‚æˆ‘å»ºè®®å¤§å®¶æœ€å¥½å…ˆä¸è¦çœ‹æ‰§è¡Œç»“æœï¼Œè¿ç”¨å­¦è¿‡çš„çŸ¥è¯†æ¥åˆ†æä¸€ä¸‹ï¼Œçœ‹æ˜¯å¦èƒ½æ¨æ–­å‡ºæ­£ç¡®çš„ç»“æœã€‚ æ¸…å• 9.1234567891011121314151617public class Test &#123;public static void main(String[] args) &#123;System.out.println(test()); &#125;public static String test() &#123;try &#123;System.out.println(\"try block\");return test1();&#125; finally &#123;System.out.println(\"finally block\"); &#125; &#125;public static String test1() &#123;System.out.println(\"return statement\");return \"after return\"; &#125;&#125; æ¸…å• 9 çš„ç»“æœï¼š1234try blockreturn statementfinally blockafter return ä½ åˆ†æå¯¹äº†å—ï¼Ÿå…¶å®è¿™ä¸ªæ¡ˆä¾‹ä¹Ÿä¸ç®—å¾ˆéš¾ï¼Œreturn test1();è¿™æ¡è¯­å¥ç­‰åŒäº : 12String tmp = test1();return tmp; è¿™æ ·ï¼Œå°±åº”è¯¥æ¸…æ¥šä¸ºä»€ä¹ˆæ˜¯ä¸Šé¢æ‰€ç¤ºçš„æ‰§è¡Œç»“æœäº†å§ï¼ å¦‚æœè¿˜æ˜¯ä¸æ€ä¹ˆæ¸…æ¥šå¯ä»¥åœ¨ IDE ä¸‹è¯•ç”¨ä¸‹ Debugï¼Œç„¶åæŸ¥çœ‹å…·ä½“çš„è¿è¡Œæ­¥éª¤ã€‚ å¥½äº†ï¼Œå°±å†™åˆ°è¿™å§ï¼å¸Œæœ›å¤§å®¶çœ‹å®Œè¿™ç¯‡æ–‡ç« èƒ½å¤Ÿæœ‰æ‰€æ”¶è·ï¼ æ€»ç»“æ²¡æƒ³åˆ°å§ï¼ä¸€ä¸ªå°å°çš„ã€çœ‹ä¼¼ç®€å•çš„ finally è¯­å¥å—èƒŒåå±…ç„¶éšè—äº†è¿™ä¹ˆå¤šç„æœºã€‚çœ‹æ¥ï¼Œæˆ‘ä»¬å¹³æ—¶è¿˜æ˜¯åº”è¯¥è®¤çœŸçš„é˜…è¯» Java ç›¸å…³çš„åŸºç¡€æ–‡æ¡£ï¼Œæ¯”å¦‚ï¼šJava è¯­è¨€è§„èŒƒã€Java è™šæ‹Ÿæœºè§„èŒƒç­‰ï¼Œå¾ˆå¤šæ£˜æ‰‹çš„é—®é¢˜éƒ½å¯ä»¥ä»ä¸­å¾—åˆ°ç­”æ¡ˆã€‚åªæœ‰çœŸæ­£çš„åƒé€äº†åŸºç¡€çŸ¥è¯†ï¼Œæ‰èƒ½è¾¾åˆ°è¿ç”¨è‡ªå¦‚çš„å¢ƒç•Œï¼ å‚è€ƒèµ„æ–™å‚è€ƒ The Java Tutorialsï¼ŒæŸ¥çœ‹å¯¹ finally è¯­å¥å—çš„æè¿°ã€‚ å‚è€ƒ ã€ŠThe Java Programming Language, Fourth Editionã€‹ï¼ŒæŸ¥çœ‹ Java è¯­è¨€è§„èŒƒç¬¬å››ç‰ˆä¸­å¯¹ finally è¯­å¥å—çš„è§£é‡Šã€‚ å‚è€ƒ ã€ŠThe Java Language Specification, Third Editionã€‹ï¼ŒæŸ¥çœ‹ Java è¯­è¨€è§„èŒƒç¬¬ä¸‰ç‰ˆä¸­å¯¹ finally è¯­å¥å—æ‰§è¡Œæµç¨‹çš„å…·ä½“æè¿°ã€‚ å‚è€ƒ ã€ŠThe Java Virtual Machine Specification, Second Editionã€‹ï¼ŒæŸ¥çœ‹ Java è™šæ‹Ÿæœºæ˜¯å¦‚ä½•æ¥ç¼–è¯‘ finally è¯­å¥å—çš„çŸ¥è¯†ã€‚ æŸ¥çœ‹æ–‡ç«  ã€ŠJava çš„å¼‚å¸¸å¤„ç†æœºåˆ¶(try â€¦ catch â€¦ finally)ã€‹ï¼Œäº†è§£æ›´å¤šå…³äº Java ä¸­ finally è¯­å¥å—çš„åˆ†æã€‚ æŸ¥çœ‹æ–‡ç«  ã€ŠJava ä¸­ finally çš„è¾¨æã€‹ï¼Œäº†è§£æ›´å¤šå…³äº Java ä¸­ finally è¯­å¥å—çš„åˆ†æã€‚ æŸ¥çœ‹æ–‡ç« ã€Šå…³äº Java ä¸­ finally è¯­å¥å—çš„æ·±åº¦è¾¨æã€‹","tags":[{"name":"Java","slug":"Java","permalink":"http://yoursite.com/tags/Java/"},{"name":"finally","slug":"finally","permalink":"http://yoursite.com/tags/finally/"}]},{"title":"è§£å†³jdk1.8ä¸­å‘é€é‚®ä»¶å¤±è´¥ï¼ˆhandshake_failureï¼‰é—®é¢˜","date":"2017-06-12T16:00:00.000Z","path":"2017/06/13/è§£å†³jdk1.8ä¸­å‘é€é‚®ä»¶å¤±è´¥ï¼ˆhandshake_failureï¼‰é—®é¢˜/","text":"æš‘å‡åœ¨å®¶åšä¸€ä¸ªç±»ä¼¼çŸ¥ä¹çš„é—®ç­”å‹ç½‘ç«™ï¼ˆä»£ç å¯è§ï¼šGithub/wenda å–œæ¬¢çš„å¯ä»¥ç»™ä¸ªstaræˆ–è€…è‡ªå·±forkç„¶åä¿®æ”¹ï¼Œç›®å‰åŠŸèƒ½è¿˜æœªå¾ˆå®Œå–„ï¼‰ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªç«™å†…é‚®ä»¶é€šçŸ¥ç³»ç»Ÿï¼ˆè¿™é‡Œç®€å•çš„è®²ä¸€ä¸ªä¾‹å­ï¼šå¦‚æœç”¨æˆ·ç™»å½•çš„æ—¶å€™å‡ºç°å¼‚å¸¸ï¼Œé‚£ä¹ˆå°±ä¼šé€šè¿‡é‚®ä»¶å‘é€é€šçŸ¥ç”¨æˆ·ï¼‰ã€‚ç„¶è€Œå´ç¢°åˆ°ä¸€ä¸ªé—®é¢˜ã€‚é—®é¢˜é”™è¯¯ä¿¡æ¯å¦‚ä¸‹ï¼š å‘é€é‚®ä»¶å¤±è´¥Mail server connection failed; nested exception is javax.mail.MessagingException: Could not connect to SMTP host: smtp.qq.com, port: 465;nested exception is: javax.net.ssl.SSLHandshakeException: Received fatal alert: handshake_failure. Failed messages: javax.mail. MessagingException: Could not connect to SMTP host: smtp.qq.com, port: 465;nested exception is: javax.net.ssl.SSLHandshakeException: Received fatal alert: handshake_failure è‡ªå·±åœ¨å°†é”™è¯¯ä¿¡æ¯ä»£ç googleäº†ä¸€ä¸‹ï¼Œæ‰¾äº†å¾ˆä¹…å‘ç°å¾ˆå¤šè§£å†³æ–¹æ¡ˆï¼ŒåŒ…æ‹¬stackoverflowä¸Šçš„ä¸€äº›è§£å†³æ–¹æ¡ˆï¼Œä½†è¿˜æ˜¯æ²¡ç”¨ã€‚ç„¶åå‘¢ç”¨ç™¾åº¦è¯•äº†ä¸‹ï¼Œç»“æœåœ¨ç¬¬ä¸€æ¡æ˜¯å¼€æºä¸­å›½çš„ä¸€ç¯‡åšå®¢:javax.net.ssl.SSLHandshakeException: Received fatal alert: handshake_failureã€‚ ç‚¹è¿›å»æ˜¯è¿™æ ·çš„ï¼šï¼ˆå¦‚ä¸‹å›¾ï¼‰ ç»“æœå°±æ˜¯ï¼šè¿™ä¸ªé—®é¢˜æ˜¯jdkå¯¼è‡´çš„ï¼Œjdk1.8é‡Œé¢æœ‰ä¸€ä¸ªjceçš„åŒ…ï¼Œå®‰å…¨æ€§æœºåˆ¶å¯¼è‡´çš„è®¿é—®httpsä¼šæŠ¥é”™ï¼Œå®˜ç½‘ä¸Šæœ‰æ›¿ä»£çš„jaråŒ…ï¼Œå¦‚æœæ›¿æ¢æ‰å°±å¯ä»¥äº†ã€‚é—®é¢˜çš„è§£å†³æ–¹æ³•è¿˜å¯ä»¥å°±æ˜¯åœ¨æ•´ä¸ªé¡¹ç›®ä¸­æŠŠä½ çš„jdkæ¢æˆæ˜¯1.7å»ï¼ŒåŒæ ·ä¹Ÿå¯ä»¥è§£å†³è¿™ä¸ªæˆ‘é—®é¢˜ã€‚ è¿™ä¸¤ä¸ªjaråŒ…çš„ä¸‹è½½åœ°å€ï¼šhttp://www.oracle.com/technetwork/java/javase/downloads/jce-7-download-432124.html ç„¶åä¸‹è½½ä¹‹åï¼ŒæŠŠè¿™ä¸ªå‹ç¼©æ–‡ä»¶è§£å‹ï¼Œå¾—åˆ°ä¸¤ä¸ªjaråŒ…å»è¦†ç›–jdkå®‰è£…ç›®å½•ä¸‹çš„jre\\lib\\security\\ä¸‹ç›¸åŒçš„jaråŒ…å°±èƒ½è§£å†³java8çš„é‚®ä»¶å‘é€é—®é¢˜ã€‚ æ¥ç€ç”¨QQé‚®ç®±æˆ‘äº²æµ‹æœ‰ç”¨ï¼Œä½†æ˜¯è¦æ³¨æ„ä¸€ç‚¹å°±æ˜¯ï¼šå¼€å¯SMTPæœåŠ¡åè¦è®°å¾—å°†ä½ çš„16ä½æˆæƒç ä½œä¸ºä½ çš„qqé‚®ç®±ç™»å½•å¯†ç ã€‚ MailSender.javaä¸­mailSender.setPassword(â€œ16ä½æˆæƒç â€); mailSender.setHost(â€œsmtp.qq.comâ€);mailSender.setPort(465); ä¸‹é¢æŠŠå®Œæ•´ä»£ç å‘å¸ƒå‡ºæ¥ï¼š 1. LoginExceptionHandler.java 12345678910111213141516171819202122232425262728293031323334package com.nowcoder.async.handler;import com.nowcoder.async.EventHandler;import com.nowcoder.async.EventModel;import com.nowcoder.async.EventType;import com.nowcoder.util.MailSender;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.stereotype.Component;import java.util.Arrays;import java.util.HashMap;import java.util.List;import java.util.Map;/** * Created by 10412 on 2016/8/10. */@Componentpublic class LoginExceptionHandler implements EventHandler&#123; @Autowired MailSender mailSender; @Override public void doHandle(EventModel model) &#123; // xxxxåˆ¤æ–­å‘ç°è¿™ä¸ªç”¨æˆ·ç™»é™†å¼‚å¸¸ Map&lt;String, Object&gt; map = new HashMap&lt;String, Object&gt;(); map.put(\"username\", model.getExt(\"username\")); mailSender.sendWithHTMLTemplate(model.getExt(\"email\"), \"ç™»é™†IPå¼‚å¸¸\", \"mails/login_exception.html\", map); &#125; @Override public List&lt;EventType&gt; getSupportEventTypes() &#123; return Arrays.asList(EventType.LOGIN); &#125;&#125; 2. LoginController.java123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114package com.nowcoder.controller;import com.nowcoder.async.EventModel;import com.nowcoder.async.EventProducer;import com.nowcoder.async.EventType;import com.nowcoder.service.UserService;import org.apache.commons.lang.StringUtils;import org.slf4j.Logger;import org.slf4j.LoggerFactory;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.stereotype.Controller;import org.springframework.ui.Model;import org.springframework.web.bind.annotation.CookieValue;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.RequestMethod;import org.springframework.web.bind.annotation.RequestParam;import javax.servlet.http.Cookie;import javax.servlet.http.HttpServletResponse;import java.util.Map;/** * Created by 10412 on 2016/7/2. */@Controllerpublic class LoginController &#123; private static final Logger logger = LoggerFactory.getLogger(LoginController.class); @Autowired UserService userService; @Autowired EventProducer eventProducer; @RequestMapping(path = &#123;&quot;/reg/&quot;&#125;, method = &#123;RequestMethod.POST&#125;) public String reg(Model model, @RequestParam(&quot;username&quot;) String username, @RequestParam(&quot;password&quot;) String password, @RequestParam(&quot;next&quot;) String next, @RequestParam(value=&quot;rememberme&quot;, defaultValue = &quot;false&quot;) boolean rememberme, HttpServletResponse response) &#123; try &#123; Map&lt;String, Object&gt; map = userService.register(username, password); if (map.containsKey(&quot;ticket&quot;)) &#123; Cookie cookie = new Cookie(&quot;ticket&quot;, map.get(&quot;ticket&quot;).toString()); cookie.setPath(&quot;/&quot;); if (rememberme) &#123; cookie.setMaxAge(3600*24*5); &#125; response.addCookie(cookie); if (StringUtils.isNotBlank(next)) &#123; return &quot;redirect:&quot; + next; &#125; return &quot;redirect:/&quot;; &#125; else &#123; model.addAttribute(&quot;msg&quot;, map.get(&quot;msg&quot;)); return &quot;login&quot;; &#125; &#125; catch (Exception e) &#123; logger.error(&quot;æ³¨å†Œå¼‚å¸¸&quot; + e.getMessage()); model.addAttribute(&quot;msg&quot;, &quot;æœåŠ¡å™¨é”™è¯¯&quot;); return &quot;login&quot;; &#125; &#125; @RequestMapping(path = &#123;&quot;/reglogin&quot;&#125;, method = &#123;RequestMethod.GET&#125;) public String regloginPage(Model model, @RequestParam(value = &quot;next&quot;, required = false) String next) &#123; model.addAttribute(&quot;next&quot;, next); return &quot;login&quot;; &#125; @RequestMapping(path = &#123;&quot;/login/&quot;&#125;, method = &#123;RequestMethod.POST&#125;) public String login(Model model, @RequestParam(&quot;username&quot;) String username, @RequestParam(&quot;password&quot;) String password, @RequestParam(value=&quot;next&quot;, required = false) String next, @RequestParam(value=&quot;rememberme&quot;, defaultValue = &quot;false&quot;) boolean rememberme, HttpServletResponse response) &#123; try &#123; Map&lt;String, Object&gt; map = userService.login(username, password); if (map.containsKey(&quot;ticket&quot;)) &#123; Cookie cookie = new Cookie(&quot;ticket&quot;, map.get(&quot;ticket&quot;).toString()); cookie.setPath(&quot;/&quot;); if (rememberme) &#123; cookie.setMaxAge(3600*24*5); &#125; response.addCookie(cookie); eventProducer.fireEvent(new EventModel(EventType.LOGIN) .setExt(&quot;username&quot;, username).setExt(&quot;email&quot;, &quot;****@qq.com&quot;) .setActorId((int)map.get(&quot;userId&quot;))); if (StringUtils.isNotBlank(next)) &#123; return &quot;redirect:&quot; + next; &#125; return &quot;redirect:/&quot;; &#125; else &#123; model.addAttribute(&quot;msg&quot;, map.get(&quot;msg&quot;)); return &quot;login&quot;; &#125; &#125; catch (Exception e) &#123; logger.error(&quot;ç™»é™†å¼‚å¸¸&quot; + e.getMessage()); return &quot;login&quot;; &#125; &#125; @RequestMapping(path = &#123;&quot;/logout&quot;&#125;, method = &#123;RequestMethod.GET, RequestMethod.POST&#125;) public String logout(@CookieValue(&quot;ticket&quot;) String ticket) &#123; userService.logout(ticket); return &quot;redirect:/&quot;; &#125;&#125; 3. EventHandler.java1234567891011121314package com.nowcoder.async;import java.util.List;/** * Created by 10412 on 2016/8/10. */public interface EventHandler&#123; void doHandle(EventModel model); List&lt;EventType&gt; getSupportEventTypes();&#125; 4. MailSender.java 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970package com.nowcoder.util;import org.apache.velocity.app.VelocityEngine;import org.slf4j.Logger;import org.slf4j.LoggerFactory;import org.springframework.beans.factory.InitializingBean;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.mail.javamail.JavaMailSenderImpl;import org.springframework.mail.javamail.MimeMessageHelper;import org.springframework.stereotype.Service;import org.springframework.ui.velocity.VelocityEngineUtils;import javax.mail.internet.InternetAddress;import javax.mail.internet.MimeMessage;import javax.mail.internet.MimeUtility;import java.util.Map;import java.util.Properties;/** * Created by 10412 on 2016/8/10. // ***@qq.com wnppafhsbrcgbfbhï¼ˆ16ä½æˆæƒç ï¼‰ */@Servicepublic class MailSender implements InitializingBean &#123; private static final Logger logger = LoggerFactory.getLogger(MailSender.class); private JavaMailSenderImpl mailSender; @Autowired private VelocityEngine velocityEngine; public boolean sendWithHTMLTemplate(String to, String subject, String template, Map&lt;String, Object&gt; model) &#123; try &#123; String nick = MimeUtility.encodeText(\"***\"); InternetAddress from = new InternetAddress(nick + \"&lt;****@qq.com&gt;\"); MimeMessage mimeMessage = mailSender.createMimeMessage(); MimeMessageHelper mimeMessageHelper = new MimeMessageHelper(mimeMessage); String result = VelocityEngineUtils .mergeTemplateIntoString(velocityEngine, template, \"UTF-8\", model); mimeMessageHelper.setTo(to); mimeMessageHelper.setFrom(from); mimeMessageHelper.setSubject(subject); mimeMessageHelper.setText(result, true); mailSender.send(mimeMessage); return true; &#125; catch (Exception e) &#123; logger.error(\"å‘é€é‚®ä»¶å¤±è´¥\" + e.getMessage()); return false; &#125; &#125; @Override public void afterPropertiesSet() throws Exception &#123; mailSender = new JavaMailSenderImpl(); mailSender.setUsername(\"***@qq.com\"); mailSender.setPassword(\"wnppafhsbrcgbfbh\"); //qqé‚®ç®±å¼€å¯smtpæœåŠ¡åä½¿ç”¨16ä½æˆæƒç åœ¨ç¬¬ä¸‰æ–¹ç™»å½•// mailSender.setHost(\"smtp.exmail.qq.com\"); mailSender.setHost(\"smtp.qq.com\"); mailSender.setPort(465);// mailSender.setHost(\"smtp.163.com\"); //163é‚®ç®±// mailSender.setPort(25); mailSender.setProtocol(\"smtps\"); mailSender.setDefaultEncoding(\"utf8\"); Properties javaMailProperties = new Properties(); javaMailProperties.put(\"mail.smtp.ssl.enable\", true); //javaMailProperties.put(\"mail.smtp.auth\", true); //javaMailProperties.put(\"mail.smtp.starttls.enable\", true); mailSender.setJavaMailProperties(javaMailProperties); &#125;&#125; 5. login_exception.html å‘é€æ¶ˆæ¯æ¨¡æ¿ï¼ˆå¯è‡ªå®šä¹‰ï¼‰ 1ä½ å¥½$usernameï¼Œä½ çš„ç™»é™†æœ‰é—®é¢˜! ä¸€åˆ‡éƒ½å¥½äº†ï¼Œè¿è¡Œã€‚ ç™»å½•ã€‚ å‘é€é‚®ä»¶è¿‡æ¥äº†ã€‚ æ€»ç»“æ¥è¯´ï¼šè¿™ä¸ªé”™è¯¯å°±æ˜¯jdk1.8ä¸­çš„ä¸€ä¸ªjceçš„åŒ…ï¼Œå®‰å…¨æ€§æœºåˆ¶å¯¼è‡´è®¿é—®httpsä¼šæŠ¥é”™ã€‚","tags":[{"name":"Java","slug":"Java","permalink":"http://yoursite.com/tags/Java/"},{"name":"é‚®ä»¶å‘é€","slug":"é‚®ä»¶å‘é€","permalink":"http://yoursite.com/tags/é‚®ä»¶å‘é€/"}]},{"title":"ã€Šç–¯ç‹‚ Java çªç ´ç¨‹åºå‘˜åŸºæœ¬åŠŸçš„ 16 è¯¾ã€‹è¯»ä¹¦ç¬”è®°","date":"2017-06-12T16:00:00.000Z","path":"2017/06/13/Java-16-lession/","text":"ç¬¬ 1 è¯¾ â€”â€” æ•°ç»„ä¸å†…å­˜æ§åˆ¶æ•°ç»„åˆå§‹åŒ–æ•°ç»„åˆå§‹åŒ–ä¹‹åï¼Œè¯¥æ•°ç»„çš„é•¿åº¦æ˜¯ä¸å¯å˜çš„ï¼ˆå¯é€šè¿‡æ•°ç»„çš„ length å±æ€§è®¿é—®æ•°ç»„çš„é•¿åº¦ï¼‰ã€‚Java ä¸­çš„æ•°ç»„å¿…é¡»ç»è¿‡åˆå§‹åŒ–ï¼ˆä¸ºæ•°ç»„å¯¹è±¡çš„å…ƒç´ åˆ†é…å†…å­˜ç©ºé—´ï¼Œå¹¶ä¸ºæ¯ä¸ªæ•°ç»„å…ƒç´ æŒ‡å®šåˆå§‹å€¼ï¼‰æ‰å¯ä½¿ç”¨ã€‚ æ•°ç»„åˆå§‹åŒ–çš„å½¢å¼ï¼š é™æ€åˆå§‹åŒ–ï¼šåˆå§‹åŒ–æ—¶ç”±ç¨‹åºå‘˜æ˜¾ç¤ºçš„æŒ‡å®šæ¯ä¸ªæ•°ç»„çš„åˆå§‹å€¼ï¼Œç³»ç»Ÿå†³å®šæ•°ç»„é•¿åº¦ã€‚ åŠ¨æ€åˆå§‹åŒ–ï¼šåˆå§‹åŒ–æ—¶ç¨‹åºå‘˜åªæŒ‡å®šæ•°ç»„çš„é•¿åº¦ï¼Œç³»ç»Ÿä¸ºæ•°ç»„å…ƒç´ åˆ†é…åˆå§‹å€¼ã€‚ ä½¿ç”¨æ•°ç»„æ•°ç»„å…ƒç´ å°±æ˜¯å˜é‡ï¼šä¾‹å¦‚ int[] æ•°ç»„å…ƒç´ ç›¸å½“äº int ç±»å‹çš„å˜é‡ å½“é€šè¿‡ç´¢å¼•æ¥ä½¿ç”¨æ•°ç»„å…ƒç´ æ—¶ï¼ˆè®¿é—®æ•°ç»„å…ƒç´ çš„å€¼ã€ä¸ºæ•°ç»„å…ƒç´ èµ‹å€¼ï¼‰ï¼Œå°†è¯¥æ•°ç»„å…ƒç´ å½“æˆæ™®é€šå˜é‡ä½¿ç”¨å³å¯ã€‚ ç¬¬ 2 è¯¾ â€”â€” å¯¹è±¡ä¸å†…å­˜çš„æ§åˆ¶Java å†…å­˜ç®¡ç†åˆ†ä¸ºï¼šå†…å­˜åˆ†é…å’Œå†…å­˜å›æ”¶ã€‚ å†…å­˜åˆ†é…ï¼šåˆ›å»º Java å¯¹è±¡æ—¶ JVM ä¸ºè¯¥å¯¹è±¡åœ¨å †å†…å­˜ä¸­æ‰€åˆ†é…çš„å†…å­˜ç©ºé—´ã€‚ å†…å­˜å›æ”¶ï¼šå½“ Java å¯¹è±¡å¤±å»å¼•ç”¨ï¼Œå˜æˆåƒåœ¾ï¼ŒJVM çš„åƒåœ¾å›æ”¶æœºåˆ¶è‡ªåŠ¨æ¸…ç†è¯¥å¯¹è±¡ï¼Œå¹¶å›æ”¶å†…å­˜ å®ä¾‹å˜é‡ å’Œ ç±»å˜é‡å±€éƒ¨å˜é‡ç‰¹ç‚¹ï¼šä½œç”¨æ—¶é—´çŸ­ï¼Œå­˜å‚¨åœ¨æ–¹æ³•çš„æ ˆå†…å­˜ä¸­ ç§ç±»ï¼š å½¢å‚ï¼šæ–¹æ³•ç­¾åä¸­å®šä¹‰çš„å±€éƒ¨å˜é‡ï¼Œç”±æ–¹æ³•è°ƒç”¨è€…è´Ÿè´£ä¸ºå…¶èµ‹å€¼ï¼Œéšæ–¹æ³•ç»“æŸè€Œæ¶ˆäº¡ æ–¹æ³•å†…çš„å±€éƒ¨å˜é‡ï¼šæ–¹æ³•å†…å®šä¹‰çš„å±€éƒ¨å˜é‡ï¼Œå¿…é¡»åœ¨æ–¹æ³•å†…å¯¹å…¶è¿›è¡Œæ˜¾ç¤ºåˆå§‹åŒ–ï¼Œä»åˆå§‹åŒ–åå¼€å§‹ç”Ÿæ•ˆï¼Œéšæ–¹æ³•ç»“æŸè€Œæ¶ˆäº¡ ä»£ç å—å†…çš„å±€éƒ¨å˜é‡ï¼šåœ¨ä»£ç å—ä¸­å®šä¹‰çš„å±€éƒ¨å˜é‡ï¼Œå¿…é¡»åœ¨ä»£ç å—ä¸­è¿›è¡Œæ˜¾ç¤ºåˆå§‹åŒ–ï¼Œä»åˆå§‹åŒ–åå¼€å§‹ç”Ÿæ•ˆï¼Œéšä»£ç å—ç»“æŸè€Œæ¶ˆäº¡ æˆå‘˜å˜é‡ç±»ä½“å†…å®šä¹‰çš„å˜é‡ï¼Œå¦‚æœè¯¥æˆå‘˜å˜é‡æ²¡æœ‰ä½¿ç”¨ static ä¿®é¥°ï¼Œé‚£è¯¥æˆå‘˜å˜é‡åˆè¢«ç§°ä¸ºéé™æ€å˜é‡æˆ–å®ä¾‹å˜é‡ï¼Œå¦‚æœä½¿ç”¨ static ä¿®é¥°ï¼Œåˆ™è¯¥æˆå‘˜å˜é‡åˆå¯è¢«ç§°ä¸ºé™æ€å˜é‡æˆ–ç±»å˜é‡ã€‚ å®ä¾‹å˜é‡å’Œç±»å˜é‡çš„å±æ€§ä½¿ç”¨ static ä¿®é¥°çš„æˆå‘˜å˜é‡æ˜¯ç±»å˜é‡ï¼Œå±äºè¯¥ç±»æœ¬èº«ï¼Œæ²¡æœ‰ä½¿ç”¨ static ä¿®é¥°çš„æˆå‘˜å˜é‡æ˜¯å®ä¾‹å˜é‡ï¼Œå±äºè¯¥ç±»çš„å®ä¾‹ï¼Œåœ¨åŒä¸€ä¸ªç±»ä¸­ï¼Œæ¯ä¸€ä¸ªç±»åªå¯¹åº”ä¸€ä¸ª Class å¯¹è±¡ï¼Œä½†æ¯ä¸ªç±»å¯ä»¥åˆ›å»ºå¤šä¸ªå¯¹è±¡ã€‚ ç”±äºåŒä¸€ä¸ª JVM å†…çš„æ¯ä¸ªç±»åªå¯¹åº”ä¸€ä¸ª CLass å¯¹è±¡ï¼Œå› æ­¤åŒä¸€ä¸ª JVM å†…çš„ä¸€ä¸ªç±»çš„ç±»å˜é‡åªéœ€è¦ä¸€å—å†…å­˜ç©ºé—´ï¼›ä½†å¯¹äºå®ä¾‹å˜é‡è€Œè¨€ï¼Œè¯¥ç±»æ¯åˆ›å»ºä¸€æ¬¡å®ä¾‹ï¼Œå°±éœ€è¦ä¸ºè¯¥å®ä¾‹å˜é‡åˆ†é…ä¸€å—å†…å­˜ç©ºé—´ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œç¨‹åºä¸­åˆ›å»ºäº†å‡ ä¸ªå®ä¾‹ï¼Œå®ä¾‹å˜é‡å°±éœ€è¦å‡ å—å†…å­˜ç©ºé—´ã€‚ è¿™é‡Œæˆ‘æƒ³åˆ°ä¸€é“é¢è¯•é¢˜ç›®ï¼š 123456789101112public class A&#123; &#123; System.out.println(\"æˆ‘æ˜¯ä»£ç å—\"); &#125; static&#123; System.out.println(\"æˆ‘æ˜¯é™æ€ä»£ç å—\"); &#125; public static void main(String[] args) &#123; A a = new A(); A a1 = new A(); &#125;&#125; ç»“æœï¼š 123æˆ‘æ˜¯é™æ€ä»£ç å—æˆ‘æ˜¯ä»£ç å—æˆ‘æ˜¯ä»£ç å— é™æ€ä»£ç å—åªæ‰§è¡Œä¸€æ¬¡ï¼Œè€Œä»£ç å—æ¯åˆ›å»ºä¸€ä¸ªå®ä¾‹ï¼Œå°±ä¼šæ‰“å°ä¸€æ¬¡ã€‚ å®ä¾‹å˜é‡çš„åˆå§‹åŒ–æ—¶æœºç¨‹åºå¯åœ¨3ä¸ªåœ°æ–¹å¯¹å®ä¾‹å˜é‡æ‰§è¡Œåˆå§‹åŒ–ï¼š å®šä¹‰å®ä¾‹å˜é‡æ—¶æŒ‡å®šåˆå§‹å€¼ éé™æ€åˆå§‹åŒ–å—ä¸­å¯¹å®ä¾‹å˜é‡æŒ‡å®šåˆå§‹å€¼ æ„é€ å™¨ä¸­å¯¹å®ä¾‹å˜é‡æŒ‡å®šåˆå§‹å€¼ ä¸Šé¢ç¬¬ä¸€ç§å’Œç¬¬äºŒç§æ–¹å¼æ¯”ç¬¬ä¸‰ç§æ–¹å¼æ›´æ—©æ‰§è¡Œï¼Œä½†ç¬¬ä¸€ã€äºŒç§æ–¹å¼çš„æ‰§è¡Œé¡ºåºä¸ä»–ä»¬åœ¨æºç¨‹åºä¸­çš„æ’åˆ—é¡ºåºç›¸åŒã€‚ åŒæ ·åœ¨ä¸Šé¢é‚£ä¸ªä»£ç ä¸ŠåŠ ä¸Šä¸€ä¸ªå˜é‡ weight çš„æˆå‘˜å˜é‡ï¼Œæˆ‘ä»¬æ¥éªŒè¯ä¸‹ä¸Šé¢çš„åˆå§‹åŒ–é¡ºåºï¼š 1ã€å®šä¹‰å®ä¾‹å˜é‡æŒ‡å®šåˆå§‹å€¼ åœ¨ éé™æ€åˆå§‹åŒ–å—å¯¹å®ä¾‹å˜é‡æŒ‡å®šåˆå§‹å€¼ ä¹‹å: 123456789101112131415public class A&#123; &#123; weight = 2.1; System.out.println(\"æˆ‘æ˜¯ä»£ç å—\"); &#125; double weight = 2.0; static&#123; System.out.println(\"æˆ‘æ˜¯é™æ€ä»£ç å—\"); &#125; public static void main(String[] args) &#123; A a = new A(); A a1 = new A(); System.out.println(a.weight); &#125;&#125; ç»“æœæ˜¯ï¼š 1234æˆ‘æ˜¯é™æ€ä»£ç å—æˆ‘æ˜¯ä»£ç å—æˆ‘æ˜¯ä»£ç å—2.0 2ã€å®šä¹‰å®ä¾‹å˜é‡æŒ‡å®šåˆå§‹å€¼ åœ¨ éé™æ€åˆå§‹åŒ–å—å¯¹å®ä¾‹å˜é‡æŒ‡å®šåˆå§‹å€¼ ä¹‹å‰: 123456789101112131415public class A&#123; double weight = 2.0; &#123; weight = 2.1; System.out.println(\"æˆ‘æ˜¯ä»£ç å—\"); &#125; static&#123; System.out.println(\"æˆ‘æ˜¯é™æ€ä»£ç å—\"); &#125; public static void main(String[] args) &#123; A a = new A(); A a1 = new A(); System.out.println(a.weight); &#125;&#125; ç»“æœä¸ºï¼š 1234æˆ‘æ˜¯é™æ€ä»£ç å—æˆ‘æ˜¯ä»£ç å—æˆ‘æ˜¯ä»£ç å—2.1 å¤§å®¶æœ‰æ²¡æœ‰è§‰å¾—å¾ˆå¥‡æ€ªï¼Ÿ æˆ‘æ¥å¥½å¥½è¯´æ¸…æ¥šä¸‹ï¼š å®šä¹‰å®ä¾‹å˜é‡æ—¶æŒ‡å®šçš„åˆå§‹å€¼ã€åˆå§‹ä»£ç å—ä¸­ä¸ºå®ä¾‹å˜é‡æŒ‡å®šåˆå§‹å€¼çš„è¯­å¥çš„åœ°ä½æ˜¯å¹³ç­‰çš„ï¼Œå½“ç»è¿‡ç¼–è¯‘å™¨å¤„ç†åï¼Œä»–ä»¬éƒ½å°†ä¼šè¢«æå–åˆ°æ„é€ å™¨ä¸­ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™æ¡è¯­å¥ double weight = 2.0; å®é™…ä¸Šä¼šè¢«åˆ†æˆå¦‚ä¸‹ 2 æ¬¡æ‰§è¡Œï¼š double weight; : åˆ›å»º Java å¯¹è±¡æ—¶ç³»ç»Ÿæ ¹æ®è¯¥è¯­å¥ä¸ºè¯¥å¯¹è±¡åˆ†é…å†…å­˜ã€‚ weight = 2.1; : è¿™æ¡è¯­å¥å°†ä¼šè¢«æå–åˆ° Java ç±»çš„æ„é€ å™¨ä¸­æ‰§è¡Œã€‚ åªè¯´åŸç†ï¼Œå¤§å®¶è‚¯å®šä¸æ€ä¹ˆä¿¡ï¼Œé‚£ä¹ˆè¿˜æœ‰æ‹¿å‡ºæºç æ¥ï¼Œè¿™æ ·æ‰æœ‰ä¿¡æœèƒ½åŠ›çš„å—ï¼Ÿæ˜¯ä¸ï¼Ÿ è¿™é‡Œæˆ‘ç›´æ¥ä½¿ç”¨è½¯ä»¶å°†ä»£ç çš„å­—èŠ‚ç æ–‡ä»¶åç¼–è¯‘è¿‡æ¥ï¼Œçœ‹çœ‹é‡Œé¢æ˜¯æ€æ ·çš„ç»„æˆï¼Ÿ ç¬¬ä¸€ä¸ªä»£ç çš„åç¼–è¯‘æºç å¦‚ä¸‹ï¼š 1234567891011121314151617181920public class A&#123; double weight; public A() &#123; this.weight = 2.1D; System.out.println(\"æˆ‘æ˜¯ä»£ç å—\"); this.weight = 2.0D; &#125; static &#123; System.out.println(\"æˆ‘æ˜¯é™æ€ä»£ç å—\"); &#125; public static void main(String[] args) &#123; A a = new A(); A a1 = new A(); System.out.println(a.weight); &#125;&#125; ç¬¬äºŒä¸ªä»£ç åç¼–è¯‘æºç å¦‚ä¸‹ï¼š 1234567891011121314151617181920public class A&#123; double weight; public A() &#123; this.weight = 2.0D; this.weight = 2.1D; System.out.println(\"æˆ‘æ˜¯ä»£ç å—\"); &#125; static &#123; System.out.println(\"æˆ‘æ˜¯é™æ€ä»£ç å—\"); &#125; public static void main(String[] args) &#123; A a = new A(); A a1 = new A(); System.out.println(a.weight); &#125;&#125; è¿™ä¸‹å­æ»¡æ„äº†å§ï¼ é€šè¿‡åç¼–è¯‘çš„æºç å¯ä»¥çœ‹åˆ°è¯¥ç±»å®šä¹‰çš„ weight å®ä¾‹å˜é‡æ—¶ä¸å†æœ‰åˆå§‹å€¼ï¼Œä¸º weight æŒ‡å®šåˆå§‹å€¼çš„ä»£ç ä¹Ÿè¢«æåˆ°äº†æ„é€ å™¨ä¸­å»äº†ï¼Œä½†æ˜¯æˆ‘ä»¬ä¹Ÿå¯ä»¥å‘ç°ä¹‹å‰è§„åˆ™ä¹Ÿæ˜¯æ»¡è¶³çš„ã€‚ ä»–ä»¬çš„èµ‹å€¼è¯­å¥éƒ½è¢«åˆå¹¶åˆ°æ„é€ å™¨ä¸­ï¼Œåœ¨åˆå¹¶è¿‡ç¨‹ä¸­ï¼Œå®šä¹‰çš„å˜é‡è¯­å¥è½¬æ¢å¾—åˆ°çš„èµ‹å€¼è¯­å¥ï¼Œåˆå§‹ä»£ç å—ä¸­çš„è¯­å¥éƒ½è½¬æ¢å¾—åˆ°çš„èµ‹å€¼è¯­å¥ï¼Œæ€»æ˜¯ä½äºæ„é€ å™¨çš„æ‰€æœ‰è¯­å¥ä¹‹å‰ï¼Œåˆå¹¶åï¼Œä¸¤ç§èµ‹å€¼è¯­å¥çš„é¡ºåºä¹Ÿä¿æŒäº†å®ƒä»¬åœ¨ Java æºä»£ç ä¸­çš„é¡ºåºã€‚ å¤§è‡´è¿‡ç¨‹åº”è¯¥äº†è§£äº†å§ï¼Ÿå¦‚æœè¿˜ä¸æ€ä¹ˆæ¸…æ¥šçš„ï¼Œå»ºè®®è¿˜æ˜¯è‡ªå·±å°†æ€ä¸ªè¿‡ç¨‹åœ¨è‡ªå·±çš„ç”µè„‘ä¸Šæ“ä½œä¸€éï¼Œæ¯•ç«Ÿå…‰çœ‹ä¸ç»ƒå‡æŠŠå¼ã€‚ ç±»å˜é‡çš„åˆå§‹åŒ–æ—¶æœºJVM å¯¹æ¯ä¸€ä¸ª Java ç±»åªåˆå§‹åŒ–ä¸€æ¬¡ï¼Œå› æ­¤ Java ç¨‹åºæ¯è¿è¡Œä¸€æ¬¡ï¼Œç³»ç»Ÿåªä¸ºç±»å˜é‡åˆ†é…ä¸€æ¬¡å†…å­˜ç©ºé—´ï¼Œæ‰§è¡Œä¸€æ¬¡åˆå§‹åŒ–ã€‚ç¨‹åºå¯åœ¨ä¸¤ä¸ªåœ°æ–¹å¯¹ç±»å˜é‡æ‰§è¡Œåˆå§‹åŒ–ï¼š å®šä¹‰ç±»å˜é‡æ—¶æŒ‡å®šåˆå§‹å€¼ é™æ€åˆå§‹åŒ–ä»£ç å—ä¸­å¯¹ç±»å˜é‡æŒ‡å®šåˆå§‹å€¼ è¿™ä¸¤ç§æ–¹å¼çš„æ‰§è¡Œé¡ºåºä¸å®ƒä»¬åœ¨æºä»£ç ä¸­çš„æ’åˆ—é¡ºåºç›¸åŒã€‚ è¿˜æ˜¯ç”¨ä¸Šé¢é‚£ä¸ªç¤ºä¾‹ï¼Œæˆ‘ä»¬åœ¨å…¶åŸºç¡€ä¸ŠåŠ ä¸ªè¢« static ä¿®é¥°çš„å˜é‡ heightï¼š 1ã€å®šä¹‰ç±»å˜é‡æ—¶æŒ‡å®šåˆå§‹å€¼ åœ¨ é™æ€åˆå§‹åŒ–ä»£ç å—ä¸­å¯¹ç±»å˜é‡æŒ‡å®šåˆå§‹å€¼ ä¹‹åï¼š 123456789101112131415161718public class A&#123; double weight = 2.0; &#123; weight = 2.1; System.out.println(\"æˆ‘æ˜¯ä»£ç å—\"); &#125; static&#123; height = 10.1; System.out.println(\"æˆ‘æ˜¯é™æ€ä»£ç å—\"); &#125; static double height = 10.0; public static void main(String[] args) &#123; A a = new A(); A a1 = new A(); System.out.println(a.weight); System.out.println(height); &#125;&#125; è¿è¡Œç»“æœï¼š 12345æˆ‘æ˜¯é™æ€ä»£ç å—æˆ‘æ˜¯ä»£ç å—æˆ‘æ˜¯ä»£ç å—2.110.0 2ã€å®šä¹‰ç±»å˜é‡æ—¶æŒ‡å®šåˆå§‹å€¼ åœ¨ é™æ€åˆå§‹åŒ–ä»£ç å—ä¸­å¯¹ç±»å˜é‡æŒ‡å®šåˆå§‹å€¼ ä¹‹å‰ï¼š 123456789101112131415161718public class A&#123; static double height = 10.0; double weight = 2.0; &#123; weight = 2.1; System.out.println(\"æˆ‘æ˜¯ä»£ç å—\"); &#125; static&#123; height = 10.1; System.out.println(\"æˆ‘æ˜¯é™æ€ä»£ç å—\"); &#125; public static void main(String[] args) &#123; A a = new A(); A a1 = new A(); System.out.println(a.weight); System.out.println(height); &#125;&#125; è¿è¡Œç»“æœï¼š 12345æˆ‘æ˜¯é™æ€ä»£ç å—æˆ‘æ˜¯ä»£ç å—æˆ‘æ˜¯ä»£ç å—2.110.1 å…¶è¿è¡Œç»“æœæ­£å¦‚æˆ‘ä»¬é¢„æ–™ï¼Œä½†æ˜¯æˆ‘ä»¬è¿˜æ˜¯çœ‹çœ‹åç¼–è¯‘åçš„ä»£ç å§ï¼ ç¬¬ä¸€ç§æƒ…å†µä¸‹åç¼–è¯‘çš„ä»£ç ï¼š 1234567891011121314151617181920212223public class A&#123; double weight; public A() &#123; this.weight = 2.0D; this.weight = 2.1D; System.out.println(\"æˆ‘æ˜¯ä»£ç å—\"); &#125; static &#123; System.out.println(\"æˆ‘æ˜¯é™æ€ä»£ç å—\"); &#125; static double height = 10.0D; public static void main(String[] args) &#123; A a = new A(); A a1 = new A(); System.out.println(a.weight); System.out.println(height); &#125;&#125; ç¬¬äºŒç§æƒ…å†µä¸‹åç¼–è¯‘çš„ä»£ç ï¼š 123456789101112131415161718192021222324public class A&#123; static double height = 10.0D; double weight; public A() &#123; this.weight = 2.0D; this.weight = 2.1D; System.out.println(\"æˆ‘æ˜¯ä»£ç å—\"); &#125; static &#123; height = 10.1D; System.out.println(\"æˆ‘æ˜¯é™æ€ä»£ç å—\"); &#125; public static void main(String[] args) &#123; A a = new A(); A a1 = new A(); System.out.println(a.weight); System.out.println(height); &#125;&#125; é€šè¿‡åç¼–è¯‘æºç ï¼Œå¯ä»¥çœ‹åˆ°ç¬¬ä¸€ç§æƒ…å†µä¸‹(å®šä¹‰ç±»å˜é‡æ—¶æŒ‡å®šåˆå§‹å€¼ åœ¨ é™æ€åˆå§‹åŒ–ä»£ç å—ä¸­å¯¹ç±»å˜é‡æŒ‡å®šåˆå§‹å€¼ ä¹‹å): æˆ‘ä»¬åœ¨ é™æ€åˆå§‹åŒ–ä»£ç å—ä¸­å¯¹ç±»å˜é‡æŒ‡å®šåˆå§‹å€¼ å·²ç»ä¸å­˜åœ¨äº†ï¼Œåªæœ‰ä¸€ä¸ªç±»å˜é‡æŒ‡å®šçš„åˆå§‹å€¼ static double height = 10.0D; , è€Œåœ¨ç¬¬äºŒç§æƒ…å†µä¸‹ï¼ˆå®šä¹‰ç±»å˜é‡æ—¶æŒ‡å®šåˆå§‹å€¼ åœ¨ é™æ€åˆå§‹åŒ–ä»£ç å—ä¸­å¯¹ç±»å˜é‡æŒ‡å®šåˆå§‹å€¼ ä¹‹å‰ï¼‰å’Œä¹‹å‰çš„æºä»£ç é¡ºåºæ˜¯ä¸€æ ·çš„ï¼Œæ²¡å•¥åŒºåˆ«ã€‚ ä¸Šé¢çš„ä»£ç ä¸­å……åˆ†çš„å±•ç¤ºäº†ç±»å˜é‡çš„ä¸¤ç§åˆå§‹åŒ–æ–¹å¼ ï¼šæ¯æ¬¡è¿è¡Œè¯¥ç¨‹åºæ—¶ï¼Œç³»ç»Ÿä¼šä¸º A ç±»æ‰§è¡Œåˆå§‹åŒ–ï¼Œå…ˆä¸ºæ‰€æœ‰ç±»å˜é‡åˆ†é…å†…å­˜ç©ºé—´ï¼Œå†æŒ‰ç…§æºä»£ç ä¸­çš„æ’åˆ—é¡ºåºæ‰§è¡Œé™æ€åˆå§‹ä»£ç å—ä¸­æ‰€æŒ‡å®šçš„åˆå§‹å€¼å’Œå®šä¹‰ç±»å˜é‡æ—¶æ‰€æŒ‡å®šçš„åˆå§‹å€¼ã€‚ çˆ¶ç±»æ„é€ å™¨å½“åˆ›å»ºä»»ä½• Java å¯¹è±¡æ—¶ï¼Œç¨‹åºæ€»ä¼šå…ˆä¾æ¬¡è°ƒç”¨æ¯ä¸ªçˆ¶ç±»éé™æ€åˆå§‹åŒ–ä»£ç å—ã€çˆ¶ç±»æ„é€ å™¨ï¼ˆæ€»æ˜¯ä» Object å¼€å§‹ï¼‰æ‰§è¡Œåˆå§‹åŒ–ï¼Œæœ€åæ‰è°ƒç”¨æœ¬ç±»çš„éé™æ€åˆå§‹åŒ–ä»£ç å—ã€æ„é€ å™¨æ‰§è¡Œåˆå§‹åŒ–ã€‚ éšå¼è°ƒç”¨å’Œæ˜¾ç¤ºè°ƒç”¨å½“è°ƒç”¨æŸä¸ªç±»çš„æ„é€ å™¨æ¥åˆ›å»º Java å¯¹è±¡æ—¶ï¼Œç³»ç»Ÿæ€»ä¼šå…ˆè°ƒç”¨çˆ¶ç±»çš„éé™æ€åˆå§‹åŒ–ä»£ç å—è¿›è¡Œåˆå§‹åŒ–ã€‚è¿™ä¸ªè°ƒç”¨æ˜¯éšå¼æ‰§è¡Œçš„ï¼Œè€Œä¸”çˆ¶ç±»çš„é™æ€åˆå§‹åŒ–ä»£ç å—æ€»æ˜¯ä¼šè¢«æ‰§è¡Œã€‚æ¥ç€ä¼šè°ƒç”¨çˆ¶ç±»çš„ä¸€ä¸ªæˆ–å¤šä¸ªæ„é€ å™¨æ‰§è¡Œåˆå§‹åŒ–ï¼Œè¿™ä¸ªè°ƒç”¨æ—¢å¯ä»¥æ˜¯é€šè¿‡ super è¿›è¡Œæ˜¾ç¤ºè°ƒç”¨ï¼Œä¹Ÿå¯ä»¥æ˜¯éšå¼è°ƒç”¨ã€‚ å½“æ‰€æœ‰çˆ¶ç±»çš„éé™æ€åˆå§‹ä»£ç å—ã€æ„é€ å™¨ä¾æ¬¡è°ƒç”¨å®Œæˆåï¼Œç³»ç»Ÿè°ƒç”¨æœ¬ç±»çš„éé™æ€ä»£ç å—ã€æ„é€ å™¨æ‰§è¡Œåˆå§‹åŒ–ï¼Œæœ€åè¿”å›æœ¬ç±»çš„å®ä¾‹ã€‚è‡³äºè°ƒç”¨çˆ¶ç±»çš„å“ªä¸ªæ„é€ å™¨æ‰§è¡Œåˆå§‹åŒ–ï¼Œåˆ†ä»¥ä¸‹å‡ ç§æƒ…å†µï¼š å­ç±»æ„é€ å™¨æ‰§è¡Œä½“çš„ç¬¬ä¸€è¡Œä»£ç ä½¿ç”¨ super æ˜¾å¼è°ƒç”¨çˆ¶ç±»æ„é€ å™¨ï¼Œç³»ç»Ÿå°†æ ¹æ® super è°ƒç”¨é‡Œä¼ å…¥çš„å®å‚åˆ—è¡¨æ¥ç¡®å®šè°ƒç”¨çˆ¶ç±»çš„å“ªä¸ªæ„é€ å™¨ï¼› å­ç±»æ„é€ å™¨æ‰§è¡Œä½“çš„ç¬¬ä¸€è¡Œä»£ç ä½¿ç”¨ this æ˜¾å¼è°ƒç”¨æœ¬ç±»ä¸­çš„é‡è½½æ„é€ å™¨ï¼Œç³»ç»Ÿå°†æ ¹æ® this è°ƒç”¨é‡Œä¼ å…¥çš„å®å‚åˆ—è¡¨æ¥ç¡®å®šå¥”é›·çš„å¦ä¸€ä¸ªæ„é€ å™¨ï¼ˆæ‰§è¡Œæœ¬ç±»ä¸­å¦ä¸€ä¸ªæ„é€ å™¨æ—¶å³è¿›å…¥ç¬¬ä¸€ç§æƒ…å†µï¼‰ï¼› å­ç±»æ„é€ å™¨ä¸­æ—¢æ²¡æœ‰ super è°ƒç”¨ï¼Œä¹Ÿæ²¡æœ‰ this è°ƒç”¨ï¼Œç³»ç»Ÿå°†ä¼šåœ¨æ‰§è¡Œå­ç±»æ„é€ å™¨ä¹‹å‰ï¼Œéšå¼è°ƒç”¨çˆ¶ç±»æ— å‚æ„é€ å™¨ã€‚ æ³¨ï¼šsuper å’Œ this å¿…é¡»åœ¨æ„é€ å™¨çš„ç¬¬ä¸€è¡Œï¼Œä¸”ä¸èƒ½åŒæ—¶å­˜åœ¨ã€‚ æ¨èä¸€ç¯‡åšå®¢ï¼šJavaåˆå§‹åŒ–é¡ºåº æ–‡ç« ä»æ— ç»§æ‰¿å’Œç»§æ‰¿ä¸¤ç§æƒ…å†µä¸‹åˆ†æäº† Java åˆå§‹åŒ–çš„é¡ºåºã€‚ Javaåˆå§‹åŒ–é¡ºåºå¦‚å›¾ï¼š è®¿é—®å­ç±»å¯¹è±¡çš„å®ä¾‹å˜é‡è°ƒç”¨è¢«å­ç±»é‡å†™çš„æ–¹æ³•çˆ¶å­å®ä¾‹çš„å†…å­˜æ§åˆ¶ç»§æ‰¿æˆå‘˜å˜é‡å’Œç»§æ‰¿æ–¹æ³•çš„åŒºåˆ«æ–¹æ³•çš„è¡Œä¸ºæ€»æ˜¯è¡¨ç°å‡ºå®ƒä»¬å®é™…ç±»å‹çš„è¡Œä¸ºï¼›å®ä¾‹å˜é‡çš„å€¼æ€»æ˜¯è¡¨ç°å‡ºå£°æ˜è¿™äº›å˜é‡æ‰€ç”¨ç±»å‹çš„è¡Œä¸ºã€‚ å†…å­˜ä¸­çš„å­ç±»å®ä¾‹çˆ¶ã€å­ç±»çš„ç±»å˜é‡final ä¿®é¥°ç¬¦final å¯ä»¥ä¿®é¥°å˜é‡ã€æ–¹æ³•ã€ç±»ã€‚ ä¿®é¥°å˜é‡ï¼Œå˜é‡è¢«èµ‹åˆå§‹å€¼ä¹‹åï¼Œä¸èƒ½å¤Ÿå¯¹ä»–åœ¨è¿›è¡Œä¿®æ”¹ ä¿®é¥°æ–¹æ³•ï¼Œä¸èƒ½å¤Ÿè¢«é‡å†™ ä¿®é¥°ç±»ï¼Œä¸èƒ½å¤Ÿè¢«ç»§æ‰¿ final ä¿®é¥°çš„å®ä¾‹å˜é‡åªèƒ½åœ¨å¦‚ä¸‹ä½ç½®æŒ‡å®šåˆå§‹å€¼ï¼š å®šä¹‰ final å®ä¾‹å˜é‡æ—¶æŒ‡å®šåˆå§‹å€¼ åœ¨éé™æ€ä»£ç å—ä¸­ä¸º final å®ä¾‹å˜é‡æŒ‡å®šåˆå§‹å€¼ åœ¨æ„é€ å™¨ä¸­ä¸º final å®ä¾‹å˜é‡æŒ‡å®šåˆå§‹å€¼ final ä¿®é¥°çš„ç±»å˜é‡åªèƒ½åœ¨å¦‚ä¸‹ä½ç½®æŒ‡å®šåˆå§‹å€¼ï¼š å®šä¹‰ final ç±»å˜é‡æ—¶æŒ‡å®šåˆå§‹å€¼ åœ¨é™æ€ä»£ç å—ä¸­ä¸º final ç±»å˜é‡æŒ‡å®šåˆå§‹å€¼ ç¬¬ 3 è¯¾ â€”â€” å¸¸è§ Java é›†åˆçš„å®ç°ç»†èŠ‚Java é›†åˆæ¡†æ¶ç±»å›¾ï¼š Set å’Œ MapSet ä»£è¡¨ä¸€ç§é›†åˆå…ƒç´ æ— åºã€é›†åˆå…ƒç´ ä¸å¯é‡å¤çš„é›†åˆï¼ŒMap åˆ™ä»£è¡¨ä¸€ç§ç”±å¤šä¸ª key-value å¯¹ç»„åˆçš„é›†åˆï¼ŒMap é›†åˆç±»ä¼¼äºä¼ ç»Ÿçš„å…³è”æ•°ç»„ã€‚ Set å’Œ Map çš„å…³ç³»1ã€Map é›†åˆä¸­çš„ key ä¸èƒ½é‡å¤ä¸”æ²¡æœ‰é¡ºåºã€‚å°†è¿™äº› key ç»„åˆèµ·æ¥å°±æ˜¯ä¸€ä¸ª Set é›†åˆã€‚æ‰€ä»¥æœ‰ä¸€ä¸ª Set&lt;k&gt; keySet() æ–¹æ³•æ¥è¿”å›æ‰€æœ‰ key ç»„æˆçš„ Set é›†åˆã€‚ 2ã€Set ä¹Ÿå¯ä»¥è½¬æ¢æˆ Mapã€‚ï¼ˆåœ¨ Set ä¸­å°† æ¯ä¸€å¯¹ key å’Œ value å­˜æ”¾åœ¨ä¸€èµ·ï¼‰ HashMap å’Œ HashSetHashSetï¼šç³»ç»Ÿé‡‡ç”¨ Hash ç®—æ³•å†³å®šé›†åˆå…ƒç´ çš„å­˜å‚¨ä½ç½®ã€‚ï¼ˆåŸºäº HashMap å®ç°çš„ï¼‰ HashMapï¼šç³»ç»Ÿå°† value å½“æˆ key çš„é™„å±ï¼Œç³»ç»Ÿæ ¹æ® Hash ç®—æ³•å†³å®š key çš„å­˜å‚¨ä½ç½®ã€‚ HashSet çš„ç»å¤§éƒ¨åˆ†æ–¹æ³•éƒ½æ˜¯é€šè¿‡è°ƒç”¨ HashMap çš„æ–¹æ³•å®ç°çš„ï¼Œå› æ­¤ HashSet å’Œ HashMap ä¸¤ä¸ªé›†åˆåœ¨å®ç°æœ¬è´¨ä¸Šæ˜¯ç›¸åŒçš„ã€‚ TreeMap å’Œ TreeSetTreeSet åº•å±‚ä½¿ç”¨ TreeMap æ¥åŒ…å« Set é›†åˆä¸­çš„æ‰€æœ‰å…ƒç´ ã€‚ TreeMap é‡‡ç”¨çš„æ˜¯ä¸€ç§â€œçº¢é»‘æ ‘â€çš„æ’åºäºŒå‰æ ‘æ¥ä¿å­˜ Map ä¸­æ¯ä¸ª Entry â€”â€” æ¯ä¸ª Entry éƒ½è¢«å½“æˆ â€œçº¢é»‘æ ‘â€ çš„ä¸€ä¸ªèŠ‚ç‚¹å¯¹å¾…ã€‚ Map å’Œ ListMap çš„ values() æ–¹æ³•ä¸ç®¡æ˜¯ HashMap è¿˜æ˜¯ TreeMap ï¼Œå®ƒä»¬çš„ values() æ–¹æ³•éƒ½å¯ä»¥è¿”å›å…¶æ‰€æœ‰ value ç»„æˆçš„ Collection é›†åˆï¼Œå…¶å®æ˜¯ä¸€ä¸ªä¸å­˜å‚¨å…ƒç´ çš„ Collection é›†åˆï¼Œå½“ç¨‹åºéå† Collection é›†åˆæ—¶ï¼Œå®é™…ä¸Šå°±æ˜¯éå† Map å¯¹è±¡çš„ valueã€‚ HashMap å’Œ TreeMap çš„ values() æ–¹æ³•å¹¶æœªæŠŠ Map ä¸­çš„ values é‡æ–°ç»„åˆæˆä¸€ä¸ªåŒ…å«å…ƒç´ çš„é›†åˆå¯¹è±¡ï¼Œè¿™æ ·å°±å¯ä»¥é™ä½ç³»ç»Ÿå†…å­˜å¼€é”€ã€‚ Map å’Œ List çš„å…³ç³»åº•å±‚å®ç°å¾ˆç›¸ä¼¼ï¼›ç”¨æ³•ä¸Šå¾ˆç›¸ä¼¼ã€‚ Map æ¥å£æä¾› get(K key) æ–¹æ³•å…è®¸ Map å¯¹è±¡æ ¹æ® key æ¥å–å¾— valueï¼› List æ¥å£æä¾›äº† get(int index) æ–¹æ³•å…è®¸ List å¯¹è±¡æ ¹æ®å…ƒç´ ç´¢å¼•æ¥å–å¾— valueï¼› ArrayList å’Œ LinkedListList é›†åˆçš„å®ç°ç±»ï¼Œä¸»è¦æœ‰ ArrayList ã€Vector å’Œ LinkedListã€‚ ArrayList æ˜¯ä¸€ä¸ªå¯æ”¹å˜å¤§å°çš„æ•°ç»„.å½“æ›´å¤šçš„å…ƒç´ åŠ å…¥åˆ° ArrayList ä¸­æ—¶, å…¶å¤§å°å°†ä¼šåŠ¨æ€åœ°å¢é•¿. å†…éƒ¨çš„å…ƒç´ å¯ä»¥ç›´æ¥é€šè¿‡ get ä¸ set æ–¹æ³•è¿›è¡Œè®¿é—®, å› ä¸º ArrayList æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªæ•°ç»„. LinkedList æ˜¯ä¸€ä¸ªåŒé“¾è¡¨, åœ¨æ·»åŠ å’Œåˆ é™¤å…ƒç´ æ—¶å…·æœ‰æ¯” ArrayList æ›´å¥½çš„æ€§èƒ½. ä½†åœ¨ get ä¸ set æ–¹é¢å¼±äºArrayList. å½“ç„¶, è¿™äº›å¯¹æ¯”éƒ½æ˜¯æŒ‡æ•°æ®é‡å¾ˆå¤§æˆ–è€…æ“ä½œå¾ˆé¢‘ç¹çš„æƒ…å†µä¸‹çš„å¯¹æ¯”, å¦‚æœæ•°æ®å’Œè¿ç®—é‡å¾ˆå°,é‚£ä¹ˆå¯¹æ¯”å°†å¤±å»æ„ä¹‰. Vector å’Œ ArrayList ç±»ä¼¼, ä½†å±äºå¼ºåŒæ­¥ç±»ã€‚å¦‚æœä½ çš„ç¨‹åºæœ¬èº«æ˜¯çº¿ç¨‹å®‰å…¨çš„(thread-safe,æ²¡æœ‰åœ¨å¤šä¸ªçº¿ç¨‹ä¹‹é—´å…±äº«åŒä¸€ä¸ªé›†åˆ/å¯¹è±¡),é‚£ä¹ˆä½¿ç”¨ ArrayList æ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚ Vector å’Œ ArrayList åœ¨æ›´å¤šå…ƒç´ æ·»åŠ è¿›æ¥æ—¶ä¼šè¯·æ±‚æ›´å¤§çš„ç©ºé—´ã€‚Vector æ¯æ¬¡è¯·æ±‚å…¶å¤§å°çš„åŒå€ç©ºé—´ï¼Œè€Œ ArrayListæ¯æ¬¡å¯¹ size å¢é•¿ 50%. è€Œ LinkedList è¿˜å®ç°äº† Queue æ¥å£, è¯¥æ¥å£æ¯” List æä¾›äº†æ›´å¤šçš„æ–¹æ³•,åŒ…æ‹¬ offer(), peek(), poll()ç­‰. æ³¨æ„: é»˜è®¤æƒ…å†µä¸‹ ArrayList çš„åˆå§‹å®¹é‡éå¸¸å°, æ‰€ä»¥å¦‚æœå¯ä»¥é¢„ä¼°æ•°æ®é‡çš„è¯, åˆ†é…ä¸€ä¸ªè¾ƒå¤§çš„åˆå§‹å€¼å±äºæœ€ä½³å®è·µ, è¿™æ ·å¯ä»¥å‡å°‘è°ƒæ•´å¤§å°çš„å¼€é”€ã€‚ ArrayListä¸LinkedListæ€§èƒ½å¯¹æ¯” æ—¶é—´å¤æ‚åº¦å¯¹æ¯”å¦‚ä¸‹: LinkedList æ›´é€‚ç”¨äº: æ²¡æœ‰å¤§è§„æ¨¡çš„éšæœºè¯»å– å¤§é‡çš„å¢åŠ /åˆ é™¤æ“ä½œ Iterator è¿­ä»£å™¨æ˜¯ä¸€ä¸ªè¿­ä»£å™¨æ¥å£ï¼Œä¸“é—¨ç”¨äºè¿­ä»£å„ç§ Collection é›†åˆï¼ŒåŒ…æ‹¬ Set é›†åˆå’Œ List é›†åˆã€‚ ç¬¬ 4 è¯¾ â€”â€” Java çš„å†…å­˜å›æ”¶Java å¼•ç”¨çš„ç§ç±»å¯¹è±¡åœ¨å†…å­˜ä¸­çš„çŠ¶æ€JVM åƒåœ¾å›æ”¶æœºåˆ¶ï¼Œæ˜¯å¦å›æ”¶ä¸€ä¸ªå¯¹è±¡çš„æ ‡å‡†åœ¨äºï¼šæ˜¯å¦è¿˜æœ‰å¼•ç”¨å˜é‡å¼•ç”¨è¯¥å¯¹è±¡ï¼Ÿåªè¦æœ‰å¼•ç”¨å˜é‡å¼•ç”¨è¯¥å¯¹è±¡ï¼Œåƒåœ¾å›æ”¶æœºåˆ¶å°±ä¸ä¼šå›æ”¶å®ƒã€‚ Java è¯­è¨€å¯¹å¯¹è±¡çš„å¼•ç”¨æœ‰ï¼š å¼ºå¼•ç”¨ è½¯å¼•ç”¨ å¼±å¼•ç”¨ è™šå¼•ç”¨ å¼ºå¼•ç”¨ç¨‹åºåˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶æŠŠè¿™ä¸ªå¯¹è±¡èµ‹ç»™ä¸€ä¸ªå¼•ç”¨å˜é‡ï¼Œè¿™ä¸ªå¼•ç”¨å˜é‡å°±æ˜¯å¼ºå¼•ç”¨ã€‚å½“ä¸€ä¸ªå¯¹è±¡è¢«ä¸€ä¸ªæˆ–è€…ä¸€ä¸ªä»¥ä¸Šçš„å¼ºå¼•ç”¨å˜é‡æ‰€å¼•ç”¨æ—¶ï¼Œå®ƒå¤„äºå¯è¾¾çŠ¶æ€ï¼Œå®ƒæ˜¯ä¸ä¼šè¢«ç³»ç»Ÿçš„åƒåœ¾å›æ”¶æœºåˆ¶å›æ”¶ã€‚ è½¯å¼•ç”¨è½¯å¼•ç”¨éœ€è¦é€šè¿‡ SoftReference ç±»æ¥å®ç°ï¼Œå½“ä¸€ä¸ªå¯¹è±¡åªå…·æœ‰è½¯å¼•ç”¨æ—¶ï¼Œå®ƒæœ‰å¯èƒ½ä¼šè¢«åƒåœ¾å›æ”¶æœºåˆ¶å›æ”¶ã€‚å¯¹äºåªæœ‰è½¯å¼•ç”¨çš„å¯¹è±¡è€Œè¨€ï¼Œå½“ç³»ç»Ÿå†…å­˜ç©ºé—´è¶³å¤Ÿæ—¶ï¼Œå®ƒä¸ä¼šè¢«ç³»ç»Ÿå›æ”¶ï¼Œç¨‹åºä¹Ÿå¯ä½¿ç”¨è¯¥å¯¹è±¡ï¼›å½“ç³»ç»Ÿå†…å­˜ç©ºé—´ä¸è¶³æ—¶ï¼Œç³»ç»Ÿå°†ä¼šå›æ”¶å®ƒã€‚ å¼±å¼•ç”¨å¼±å¼•ç”¨å’Œè½¯å¼•ç”¨æœ‰ç‚¹ç›¸ä¼¼ï¼ŒåŒºåˆ«åœ¨äºå¼±å¼•ç”¨æ‰€å¼•ç”¨å¯¹è±¡çš„ç”Ÿå­˜æœŸæ›´çŸ­ã€‚ è™šå¼•ç”¨è™šå¼•ç”¨ä¸»è¦ç”¨äºè·Ÿè¸ªå¯¹è±¡è¢«åƒåœ¾å›æ”¶çš„çŠ¶æ€ï¼Œè™šå¼•ç”¨ä¸èƒ½å•ç‹¬ä½¿ç”¨ï¼Œè™šå¼•ç”¨å¿…é¡»å’Œå¼•ç”¨é˜Ÿåˆ—è”åˆä½¿ç”¨ã€‚ Java çš„å†…å­˜æ³„æ¼ArrayList.java ä¸­çš„ remove æ–¹æ³• 1234567891011public E remove(int index) &#123; rangeCheck(index); modCount++; E oldValue = elementData(index); int numMoved = size - index - 1; if (numMoved &gt; 0) System.arraycopy(elementData, index+1, elementData, index, numMoved); elementData[--size] = null; // clear to let GC do its work return oldValue; &#125; å…¶ä¸­ elementData[--size] = null; // clear to let GC do its work è¯­å¥æ˜¯æ¸…é™¤æ•°ç»„å…ƒç´ çš„å¼•ç”¨ï¼Œé¿å…å†…å­˜çš„æ³„æ¼ï¼Œå¦‚æœæ²¡æœ‰è¿™å¥çš„è¯ï¼Œé‚£ä¹ˆå°±æ˜¯åªæœ‰ä¸¤ä¸ªä½œç”¨ï¼š ä¿®é¥° Stack çš„å±æ€§ï¼Œä¹Ÿå°±æ˜¯å°†å€¼å‡ 1ï¼› è¿”å›ç´¢å¼•ä¸º size -1 çš„å€¼ã€‚ åƒåœ¾å›æ”¶æœºåˆ¶ è·Ÿè¸ªå¹¶ç›‘æ§æ¯ä¸ª Java å¯¹è±¡ï¼Œå½“æŸä¸ªå¯¹è±¡å¤„äºä¸å¯è¾¾çŠ¶æ€æ—¶ï¼Œå›æ”¶è¯¥å¯¹è±¡æ‰€å ç”¨çš„å†…å­˜ã€‚ æ¸…ç†å†…å­˜åˆ†é…ï¼Œå›æ”¶è¿‡ç¨‹ä¸­äº§ç”Ÿçš„å†…å­˜ç¢ç‰‡ã€‚ åƒåœ¾å›æ”¶çš„åŸºæœ¬ç®—æ³•å¯¹äºä¸€ä¸ªåƒåœ¾å›æ”¶å™¨çš„è®¾è®¡ç®—æ³•æ¥è¯´ï¼Œå¤§æ¦‚æœ‰å¦‚ä¸‹å‡ ä¸ªè®¾è®¡ï¼š ä¸²è¡Œå›æ”¶ å’Œ å¹¶è¡Œå›æ”¶ ä¸²è¡Œå›æ”¶ï¼šä¸ç®¡ç³»ç»Ÿæœ‰å¤šå°‘ä¸ª CPUï¼Œå§‹ç»ˆä½¿ç”¨ä¸€ä¸ª CPU æ¥æ‰§è¡Œåƒåœ¾å›æ”¶æ“ä½œ å¹¶è¡Œå›æ”¶ï¼šæŠŠæ•´ä¸ªå›æ”¶å·¥ä½œæ‹†åˆ†æˆå¤šéƒ¨åˆ†ï¼Œæ¯ä¸ªéƒ¨åˆ†ç”±ä¸€ä¸ª CPU è´Ÿè´£ï¼Œä»è€Œè®©å¤šä¸ª CPU å¹¶è¡Œå›æ”¶ å¹¶å‘æ‰§è¡Œ å’Œ åº”ç”¨ç¨‹åºåœæ­¢ å‹ç¼© å’Œ ä¸å‹ç¼© å’Œ å¤åˆ¶ å¤åˆ¶ï¼šå°†å †å†…åˆ†æˆä¸¤ä¸ªç›¸åŒçš„ç©ºé—´ï¼Œä»æ ¹å¼€å§‹è®¿é—®æ¯ä¸€ä¸ªå…³è”çš„å¯è¾¾å¯¹è±¡ï¼Œå°†ç©ºé—´Açš„å¯è¾¾å¯¹è±¡å…¨éƒ¨å¤åˆ¶åˆ°ç©ºé—´Bï¼Œç„¶åä¸€æ¬¡æ€§å›æ”¶æ•´ä¸ªç©ºé—´Aã€‚ æ ‡è®°æ¸…é™¤ï¼šä¹Ÿå°±æ˜¯ ä¸å‹ç¼© çš„å›æ”¶æ–¹å¼ã€‚åƒåœ¾å›æ”¶å™¨å…ˆä»æ ¹å¼€å§‹è®¿é—®æ‰€æœ‰å¯è¾¾å¯¹è±¡ï¼Œå°†å®ƒä»¬æ ‡è®°ä¸ºå¯è¾¾çŠ¶æ€ï¼Œç„¶åå†éå†ä¸€æ¬¡æ•´ä¸ªå†…å­˜åŒºåŸŸï¼ŒæŠŠæ‰€æœ‰æ²¡æœ‰æ ‡è®°ä¸ºå¯è¾¾çš„å¯¹è±¡è¿›è¡Œå›æ”¶å¤„ç†ã€‚ æ ‡è®°å‹ç¼©ï¼šè¿™æ˜¯å‹ç¼©æ–¹å¼ï¼Œè¿™ç§æ–¹å¼å……åˆ†åˆ©ç”¨ä¸Šè¿°ä¸¤ç§ç®—æ³•çš„ä¼˜ç‚¹ï¼Œåƒåœ¾å›æ”¶å™¨å…ˆä»æ ¹å¼€å§‹è®¿é—®æ‰€æœ‰å¯è¾¾å¯¹è±¡ï¼Œå°†ä»–ä»¬æ ‡è®°ä¸ºå¯è¾¾çŠ¶æ€ï¼Œæ¥ä¸‹æ¥åƒåœ¾å›æ”¶å™¨ä¼šå°†è¿™äº›æ´»åŠ¨å¯¹è±¡æ¬è¿åœ¨ä¸€èµ·ï¼Œè¿™ä¸ªè¿‡ç¨‹å«åšå†…å­˜å‹ç¼©ï¼Œç„¶ååƒåœ¾å›æ”¶æœºåˆ¶å†æ¬¡å›æ”¶é‚£äº›ä¸å¯è¾¾å¯¹è±¡æ‰€å ç”¨çš„å†…å­˜ç©ºé—´ï¼Œè¿™æ ·å°±é¿å…äº†å›æ”¶äº§ç”Ÿçš„å†…å­˜ç¢ç‰‡ã€‚ å †å†…å­˜çš„åˆ†ä»£å›æ”¶1ã€Young ä»£ 2ã€Old ä»£ 3ã€Permanent ä»£ å†…å­˜ç®¡ç†å°æŠ€å·§ å°½é‡ä½¿ç”¨ç›´æ¥é‡ ä½¿ç”¨ StringBuilder å’Œ StringBuffer è¿›è¡Œå­—ç¬¦ä¸²æ‹¼æ¥ å°½æ—©é‡Šæ”¾æ— ç”¨å¯¹è±¡çš„å¼•ç”¨ å°½é‡å°‘ç”¨é™æ€å˜é‡ é¿å…åœ¨ç»å¸¸è°ƒç”¨çš„æ–¹æ³•ã€å¾ªç¯ä¸­åˆ›å»º Java å¯¹è±¡ ç¼“å­˜ç»å¸¸ä½¿ç”¨çš„å¯¹è±¡ å°½é‡ä¸è¦ä½¿ç”¨ finalize æ–¹æ³• è€ƒè™‘ä½¿ç”¨ SoftReference ç¬¬ 5 è¯¾ â€”â€” è¡¨è¾¾å¼ä¸­çš„é™·é˜±å…³äºå­—ç¬¦ä¸²çš„é™·é˜±JVM å¯¹å­—ç¬¦ä¸²çš„å¤„ç†String java = new String(&quot;Java&quot;) è¿™å¥åˆ›å»ºäº†ä¸¤ä¸ªå­—ç¬¦ä¸²å¯¹è±¡ï¼Œä¸€ä¸ªæ˜¯ â€œJavaâ€ è¿™ä¸ªç›´æ¥é‡å¯¹åº”çš„å­—ç¬¦ä¸²å¯¹è±¡ï¼Œå¦å¤–ä¸€ä¸ªæ˜¯ new String() æ„é€ å™¨è¿”å›çš„å­—ç¬¦ä¸²å¯¹è±¡ã€‚ Java ç¨‹åºä¸­åˆ›å»ºå¯¹è±¡çš„æ–¹æ³•ï¼š é€šè¿‡ new è°ƒç”¨æ„é€ å™¨åˆ›å»º Java å¯¹è±¡ é€šè¿‡ Class å¯¹è±¡çš„ newInstance() æ–¹æ³•è°ƒç”¨æ„é€ å™¨åˆ›å»º Java å¯¹è±¡ é€šè¿‡ Java çš„ååºåˆ—åŒ–æœºåˆ¶ä» IO æµä¸­æ¢å¤ Java å¯¹è±¡ é€šè¿‡ Java å¯¹è±¡æä¾›çš„ clone() æ–¹æ³•å¤åˆ¶ä¸€ä¸ªæ–°çš„ Java å¯¹è±¡ å¯¹äºå­—ç¬¦ä¸²ä»¥åŠ Byteã€Shortã€Intã€Longã€Characterã€Floatã€Double å’Œ Boolean è¿™äº›åŸºæœ¬ç±»å‹çš„åŒ…è£…ç±» ç›´æ¥é‡çš„æ–¹å¼æ¥åˆ›å»º Java å¯¹è±¡ Integer in = 5ï¼› é€šè¿‡ç®€å•çš„ç®—æ³•è¡¨è¾¾å¼ï¼Œè¿æ¥è¿ç®—æ¥åˆ›å»º Java å¯¹è±¡ String str = â€œaâ€ + â€œbâ€; ï¼ˆå¦‚æœè¿™ä¸ªå­—ç¬¦ä¸²è¡¨è¾¾å¼çš„å€¼åœ¨ç¼–è¯‘æ—¶ç¡®å®šä¸‹æ¥ï¼Œé‚£ä¹ˆ JVM ä¼šåœ¨ç¼–è¯‘æ—¶è®¡ç®—è¯¥å­—ç¬¦ä¸²å˜é‡çš„å€¼ï¼Œå¹¶è®©å®ƒæŒ‡å‘å­—ç¬¦ä¸²æ± ä¸­å¯¹åº”çš„å­—ç¬¦ä¸²ã€‚å¦‚æœè¿™äº›ç®—æ³•è¡¨è¾¾å¼éƒ½æ˜¯å­—ç¬¦ä¸²ç›´æ¥é‡ã€æ•´æ•°ç›´æ¥é‡ï¼Œæ²¡æœ‰å˜é‡å’Œæ–¹æ³•å‚ä¸ï¼Œé‚£ä¹ˆå°±å¯ä»¥åœ¨ç¼–è¯‘æœŸå°±å¯ä»¥ç¡®å®šå­—ç¬¦ä¸²çš„å€¼ï¼›å¦‚æœä½¿ç”¨äº†å˜é‡ã€è°ƒç”¨äº†æ–¹æ³•ï¼Œé‚£ä¹ˆåªæœ‰ç­‰åˆ°è¿è¡Œæ—¶æ‰èƒ½ç¡®å®šå­—ç¬¦ä¸²è¡¨è¾¾å¼çš„å€¼ï¼›å¦‚æœå­—ç¬¦ä¸²è¿æ¥è¿ç®—æ‰€æœ‰çš„å˜é‡éƒ½å¯æ‰§è¡Œ â€œå®æ›¿æ¢â€ï¼ˆä½¿ç”¨ final ä¿®é¥°çš„å˜é‡ï¼‰ï¼Œé‚£åœ¨ç¼–è¯‘æ—¶æœŸä¹Ÿèƒ½ç¡®å®šå­—ç¬¦ä¸²è¿æ¥è¡¨è¾¾å¼çš„å€¼ï¼‰ å¯¹äº Java ç¨‹åºçš„å­—ç¬¦ç›´æ¥é‡ï¼ŒJVM ä¼šä½¿ç”¨ä¸€ä¸ªå­—ç¬¦ä¸²æ± æ¥ä¿æŠ¤å®ƒä»¬ï¼›å½“ç¬¬ä¸€æ¬¡ä½¿ç”¨æŸä¸ªå­—ç¬¦ä¸²ç›´æ¥é‡æ—¶ï¼ŒJVM ä¼šå°†å®ƒæ”¾å…¥å­—ç¬¦ä¸²æ± è¿›è¡Œç¼“å­˜ã€‚åœ¨ä¸€èˆ¬çš„æƒ…å†µä¸‹ï¼Œå­—ç¬¦ä¸²æ± ä¸­çš„å­—ç¬¦ä¸²å¯¹è±¡ä¸ä¼šè¢«åƒåœ¾å›æ”¶å™¨å›æ”¶ï¼Œå½“ç¨‹åºå†æ¬¡éœ€è¦ä½¿ç”¨è¯¥å­—ç¬¦ä¸²æ—¶ï¼Œæ— éœ€é‡æ–°åˆ›å»ºä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ï¼Œè€Œæ˜¯ç›´æ¥è®©å¼•ç”¨å˜é‡æŒ‡å‘å­—ç¬¦ä¸²æ± ä¸­å·²æœ‰çš„å­—ç¬¦ä¸²ã€‚ ä¸å¯å˜çš„å­—ç¬¦ä¸²String ç±»æ˜¯ä¸€ä¸ªä¸å¯å˜ç±»ï¼Œå½“ä¸€ä¸ª String å¯¹è±¡åˆ›å»ºå®Œæˆåï¼Œè¯¥ String ç±»é‡ŒåŒ…å«çš„å­—ç¬¦åºåˆ—å°±è¢«å›ºå®šä¸‹æ¥ï¼Œä»¥åæ°¸è¿œä¸èƒ½ä¿®æ”¹ã€‚ å¦‚æœç¨‹åºéœ€è¦ä¸€ä¸ªå­—ç¬¦åºåˆ—ä¼šå‘ç”Ÿæ”¹å˜çš„å­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆå»ºè®®ä½¿ç”¨ StringBuilder ï¼ˆæ•ˆç‡æ¯” StringBuffer é«˜ï¼‰ å­—ç¬¦ä¸²æ¯”è¾ƒå¦‚æœè¦æ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²æ˜¯å¦ç›¸åŒï¼Œç”¨ == è¿›è¡Œåˆ¤æ–­å°±è¡Œï¼Œä½†å¦‚æœè¦åˆ¤æ–­ä¸¤ä¸ªå­—ç¬¦ä¸²æ‰€åŒ…å«çš„å­—ç¬¦åºåˆ—æ˜¯å¦ç›¸åŒï¼Œåˆ™åº”è¯¥ç”¨ String é‡å†™è¿‡çš„ equals() æ–¹æ³•è¿›è¡Œæ¯”è¾ƒã€‚ 123456789101112131415161718192021222324252627public boolean equals(Object anObject) &#123; //å¦‚æœä¸¤ä¸ªå­—ç¬¦ä¸²ç›¸åŒ if (this == anObject) &#123; return true; &#125; //å¦‚æœanObjectæ˜¯Stringç±»å‹ if (anObject instanceof String) &#123; String anotherString = (String)anObject; //nä»£è¡¨å­—ç¬¦ä¸²çš„é•¿åº¦ int n = value.length; //å¦‚æœä¸¤ä¸ªå­—ç¬¦ä¸²é•¿åº¦ç›¸ç­‰ if (n == anotherString.value.length) &#123; //è·å–å½“å‰å­—ç¬¦ä¸²ã€anotherStringåº•å±‚å°è£…çš„å­—ç¬¦æ•°ç»„ char v1[] = value; char v2[] = anotherString.value; int i = 0; //é€ä¸€æ¯”è¾ƒv1 å’Œ v2æ•°ç»„ä¸­çš„æ¯ä¸ªå­—ç¬¦ while (n-- != 0) &#123; if (v1[i] != v2[i]) return false; i++; &#125; return true; &#125; &#125; return false; &#125; è¿˜å¯ä»¥ä½¿ç”¨ String æä¾›çš„ compareTo() æ–¹æ³•è¿”å›ä¸¤ä¸ªå­—ç¬¦ä¸²çš„å¤§å° 123456789101112131415161718public int compareTo(String anotherString) &#123; int len1 = value.length; int len2 = anotherString.value.length; int lim = Math.min(len1, len2); char v1[] = value; char v2[] = anotherString.value; int k = 0; while (k &lt; lim) &#123; char c1 = v1[k]; char c2 = v2[k]; if (c1 != c2) &#123; return c1 - c2; &#125; k++; &#125; return len1 - len2; &#125; è¡¨è¾¾å¼ç±»å‹çš„é™·é˜±è¡¨è¾¾å¼ç±»å‹çš„è‡ªåŠ¨æå‡ æ‰€æœ‰ byteã€shortã€charç±»å‹å°†è¢«æå‡åˆ° int ç±»å‹å‚ä¸è¿ç®— æ•´ä¸ªç®—æœ¯è¡¨è¾¾å¼çš„æ•°æ®ç±»å‹è‡ªåŠ¨æå‡åˆ°ä¸è¡¨è¾¾å¼ä¸­æœ€é«˜ç­‰çº§æ“ä½œæ•°åŒæ ·çš„ç±»å‹ï¼Œæ“ä½œæ•°çš„ç­‰çº§æ’åˆ—å¦‚ä¸‹ï¼šchar -&gt; int -&gt; long -&gt;float -&gt; double byte -&gt; short -&gt; int -&gt; long -&gt;float -&gt; double å¤åˆèµ‹å€¼è¿ç®—ç¬¦çš„é™·é˜±Java è¯­è¨€å…è®¸æ‰€æœ‰çš„åŒç›®è¿ç®—ç¬¦å’Œ = ä¸€èµ·ç»“åˆç»„æˆå¤åˆèµ‹å€¼è¿ç®—ç¬¦ï¼Œå¦‚ +=ã€-=ã€*=ã€/=ã€%= ã€&amp;= ç­‰ï¼Œå¤åˆèµ‹å€¼è¿ç®—ç¬¦åŒ…å«äº†ä¸€ä¸ªéšå¼çš„ç±»å‹è½¬æ¢ã€‚ 123//ä¸‹é¢è¿™ä¸¤æ¡è¯­å¥ä¸ç­‰ä»·a = a + 5; //a += 5; //å®é™…ä¸Šç­‰ä»·äº a = (açš„ç±»å‹) (a + 5); å¤åˆèµ‹å€¼è¿ç®—ç¬¦ä¼šè‡ªåŠ¨çš„å°†å®ƒè®¡ç®—çš„ç»“æœå€¼å¼ºåˆ¶è½¬æ¢ä¸ºå…¶å·¦ä¾§å˜é‡çš„ç±»å‹ã€‚ è¾“å…¥æ³•å¯¼è‡´çš„é™·é˜±æ³¨é‡Šçš„å­—ç¬¦å¿…é¡»åˆæ³•è½¬ä¹‰å­—ç¬¦çš„é™·é˜± æ…ç”¨å­—ç¬¦çš„ Unicode è½¬ä¹‰å½¢å¼ ä¸­æ­¢è¡Œæ³¨é‡Šçš„è½¬ä¹‰å­—ç¬¦ æ³›å‹å¯èƒ½å¼•èµ·çš„é”™è¯¯åŸå§‹ç±»å‹å˜é‡çš„èµ‹å€¼ å½“ç¨‹åºæŠŠä¸€ä¸ªåŸå§‹ç±»å‹çš„å˜é‡èµ‹ç»™ä¸€ä¸ªå¸¦æœ‰æ³›å‹ä¿¡æ¯çš„å˜é‡æ—¶ï¼Œæ€»æ˜¯å¯ä»¥é€šè¿‡ç¼–è¯‘ï¼ˆåªæ˜¯ä¼šæç¤ºè­¦å‘Šä¿¡æ¯ï¼‰ å½“ç¨‹åºè¯•å›¾è®¿é—®å¸¦æ³›å‹å£°æ˜çš„é›†åˆçš„é›†åˆå…ƒç´ æ—¶ï¼Œç¼–è¯‘å™¨æ€»æ˜¯æŠŠé›†åˆå…ƒç´ å½“æˆæ³›å‹ç±»å‹å¤„ç†ï¼ˆå®ƒå¹¶ä¸å…³å¿ƒé›†åˆé‡Œé›†åˆå…ƒç´ çš„å®é™…ç±»å‹ï¼‰ å½“ç¨‹åºè¯•å›¾è®¿é—®å¸¦æ³›å‹å£°æ˜çš„é›†åˆçš„é›†åˆå…ƒç´ æ—¶ï¼ŒJVMä¼šéå†æ¯ä¸ªé›†åˆå…ƒç´ è‡ªåŠ¨æ‰§è¡Œå¼ºåˆ¶è½¬å‹ï¼Œå¦‚æœé›†åˆå…ƒç´ çš„å®é™…ç±»å‹ä¸é›†åˆæ‰€å¸¦çš„æ³›å‹ä¿¡æ¯ä¸åŒ¹é…ï¼Œè¿è¡Œæ—¶å°†å¼•å‘ ClassCastException åŸå§‹ç±»å‹å¸¦æ¥çš„æ“¦é™¤å½“æŠŠä¸€ä¸ªå…·æœ‰æ³›å‹ä¿¡æ¯çš„å¯¹è±¡èµ‹ç»™å¦ä¸€ä¸ªæ²¡æœ‰æ³›å‹ä¿¡æ¯çš„å˜é‡æ—¶ï¼Œæ‰€æœ‰åœ¨å°–æ‹¬å·ä¹‹é—´çš„ç±»å‹ä¿¡æ¯éƒ½ä¼šä¸¢å¼ƒã€‚ åˆ›å»ºæ³›å‹æ•°ç»„çš„é™·é˜±Java ä¸­ä¸å…è®¸åˆ›å»ºæ³›å‹æ•°ç»„ æ­£åˆ™è¡¨è¾¾å¼çš„é™·é˜±æœ‰äº›ç¬¦å·æœ¬èº«å°±æ˜¯æ­£åˆ™è¡¨è¾¾å¼ï¼Œæˆ‘ä»¬éœ€è¦å¯¹ç¬¦å·åšè½¬ä¹‰è¿ç®—ã€‚ å¤šçº¿ç¨‹çš„é™·é˜±ä¸è¦è°ƒç”¨ run æ–¹æ³•å¼€å¯çº¿ç¨‹æ˜¯ç”¨ start() æ–¹æ³•ï¼Œè€Œä¸æ˜¯ run() æ–¹æ³•ã€‚ é™æ€çš„åŒæ­¥æ–¹æ³•å¯¹äºåŒæ­¥ä»£ç å—è€Œè¨€ï¼Œç¨‹åºå¿…é¡»æ˜¾å¼ä¸ºå®ƒæŒ‡å®šåŒæ­¥ç›‘è§†å™¨ï¼›å¯¹äºåŒæ­¥éé™æ€æ–¹æ³•è€Œè¨€ï¼Œè¯¥æ–¹æ³•çš„åŒæ­¥ç›‘è§†å™¨æ˜¯ this â€”â€” å³è°ƒç”¨è¯¥æ–¹æ³•çš„ Java å¯¹è±¡ï¼›å¯¹äºé™æ€çš„åŒæ­¥æ–¹æ³•è€Œè¨€ï¼Œè¯¥æ–¹æ³•çš„åŒæ­¥ç›‘è§†å™¨ä¸æ˜¯ thisï¼Œè€Œæ˜¯è¯¥ç±»æœ¬èº«ã€‚ ç¬¬ 6 è¯¾ â€”â€” æµç¨‹æ§åˆ¶çš„é™·é˜±switch è¯­å¥é™·é˜±break è¯­å¥ä¸è¦å¿˜è®°å†™ switch çš„è¡¨è¾¾å¼ç±»å‹ï¼š byte short int char enum String ï¼ˆJdk 1.7 ä»¥åæœ‰ Stringï¼‰ æ ‡ç­¾å¼•èµ·çš„é™·é˜±Java ä¸­çš„æ ‡ç­¾é€šå¸¸æ˜¯å’Œå¾ªç¯ä¸­çš„ break å’Œ continue ç»“åˆä½¿ç”¨ï¼Œè®© break ç›´æ¥ç»ˆæ­¢æ ‡ç­¾æ‰€æ ‡è¯†çš„å¾ªç¯ï¼Œè®© continue è¯­å¥å¿½ç•¥æ ‡ç­¾æ‰€æ ‡è¯†çš„å¾ªç¯çš„å‰©ä¸‹è¯­å¥ã€‚ ã€‚ã€‚ ç¬¬ 7 è¯¾ â€”â€” é¢å‘å¯¹è±¡çš„é™·é˜±instanceof è¿ç®—ç¬¦çš„é™·é˜±instanceof å®ƒç”¨äºåˆ¤æ–­å‰é¢çš„å¯¹è±¡æ˜¯å¦æ˜¯åé¢çš„ç±»æˆ–å…¶å­ç±»ã€å®ç°ç±»çš„å®ä¾‹ã€‚å¦‚æœæ˜¯è¿”å› trueï¼Œå¦åˆ™è¿”å› falseã€‚ instanceof è¿ç®—ç¬¦å‰é¢æ“ä½œæ•°çš„ç¼–è¯‘æ—¶ç±»å‹å¿…é¡»æ˜¯ï¼š è¦ä¹ˆä¸åé¢çš„ç±»ç›¸åŒ è¦ä¹ˆæ˜¯åé¢ç±»çš„çˆ¶ç±» è¦ä¹ˆæ˜¯åé¢ç±»å‹çš„å­ç±» æ„é€ å™¨é™·é˜±æ„é€ å™¨æ˜¯ Java ä¸­æ¯ä¸ªç±»éƒ½ä¼šæä¾›çš„ä¸€ä¸ªâ€œç‰¹æ®Šæ–¹æ³•â€ã€‚æ„é€ å™¨è´Ÿè´£å¯¹ Java å¯¹è±¡æ‰§è¡Œåˆå§‹åŒ–æ“ä½œï¼Œä¸ç®¡æ˜¯å®šä¹‰å®ä¾‹å˜é‡æ—¶æŒ‡å®šçš„åˆå§‹å€¼ï¼Œè¿˜æ˜¯åœ¨éé™æ€åˆå§‹åŒ–ä»£ç å—ä¸­æ‰€åšçš„æ“ä½œï¼Œå®é™…ä¸Šéƒ½ä¼šè¢«æå–åˆ°æ„é€ å™¨ä¸­æ‰§è¡Œã€‚ æ„é€ å™¨ä¸èƒ½å£°æ˜è¿”å›å€¼ç±»å‹ï¼Œä¹Ÿä¸èƒ½ä½¿ç”¨voidå£°æ˜æ„é€ å™¨æ²¡æœ‰è¿”å›å€¼ã€‚ æ„é€ å™¨åˆ›å»ºå¯¹è±¡å—æ„é€ å™¨å¹¶ä¸ä¼šåˆ›å»º Java å¯¹è±¡ï¼Œæ„é€ å™¨åªæ˜¯è´Ÿè´£æ‰§è¡Œåˆå§‹åŒ–ï¼Œåœ¨æ„é€ å™¨æ‰§è¡Œä¹‹å‰ï¼ŒJava å¯¹è±¡æ‰€éœ€è¦çš„å†…å­˜ç©ºé—´ï¼Œæ˜¯ç”± new å…³é”®å­—ç”³è¯·å‡ºæ¥çš„ã€‚ç»å¤§éƒ¨åˆ†æ—¶å€™ï¼Œç¨‹åºä½¿ç”¨ new å…³é”®å­—ä¸ºä¸€ä¸ª Java å¯¹è±¡ç”³è¯·ç©ºé—´ä¹‹åï¼Œéƒ½éœ€è¦ä½¿ç”¨æ„é€ å™¨ä¸ºè¿™ä¸ªå¯¹è±¡æ‰§è¡Œåˆå§‹åŒ–ï¼Œä½†åœ¨æŸäº›æ—¶å€™ï¼Œç¨‹åºåˆ›å»º Java å¯¹è±¡æ— éœ€è°ƒç”¨æ„é€ å™¨ï¼Œå¦‚ä¸‹ï¼š ä½¿ç”¨ååºåˆ—åŒ–çš„æ–¹å¼æ¢å¤ Java å¯¹è±¡ ä½¿ç”¨ clone æ–¹æ³•å¤åˆ¶ Java å¯¹è±¡ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778package com.zhisheng.test;import java.io.*;/** * Created by 10412 on 2017/5/31. */class Wolf implements Serializable&#123; private String name; public Wolf(String name) &#123; System.out.println(\"è°ƒç”¨äº†æœ‰å‚æ„é€ æ–¹æ³•\"); this.name = name; &#125; @Override public boolean equals(Object o) &#123; if (this == o) return true; if (o == null || getClass() != o.getClass()) return false; Wolf wolf = (Wolf) o; return name != null ? name.equals(wolf.name) : wolf.name == null; &#125; @Override public int hashCode() &#123; return name != null ? name.hashCode() : 0; &#125;&#125;public class SerializableTest&#123; public static void main(String[] args) &#123; Wolf w = new Wolf(\"ç°å¤ªç‹¼\"); System.out.println(\"å¯¹è±¡åˆ›å»ºå®Œæˆ\"); Wolf w2 = null; ObjectInputStream ois = null; ObjectOutputStream oos = null; try &#123; //åˆ›å»ºè¾“å‡ºå¯¹è±¡æµ oos = new ObjectOutputStream(new FileOutputStream(\"a.bin\")); //åˆ›å»ºè¾“å…¥å¯¹è±¡æµ ois = new ObjectInputStream(new FileInputStream(\"a.bin\")); //åºåˆ—è¾“å‡ºjava å¯¹è±¡ oos.writeObject(w); oos.flush(); //ååºåˆ—åŒ–æ¢å¤javaå¯¹è±¡ w2 = (Wolf) ois.readObject(); System.out.println(w); System.out.println(w2); //ä¸¤ä¸ªå¯¹è±¡çš„å®ä¾‹å˜é‡å€¼å®Œå…¨ç›¸ç­‰ï¼Œè¾“å‡ºtrue System.out.println(w.equals(w2)); //ä¸¤ä¸ªå¯¹è±¡ä¸åŒï¼Œè¾“å‡ºfalse System.out.println(w == w2); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; catch (ClassNotFoundException e) &#123; e.printStackTrace(); &#125;finally &#123; if (ois!=null) try &#123; ois.close(); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; if (oos!=null) try &#123; oos.close(); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125; &#125;&#125; ç¨‹åºè¿è¡Œç»“æœï¼š 123456è°ƒç”¨äº†æœ‰å‚æ„é€ æ–¹æ³•å¯¹è±¡åˆ›å»ºå®Œæˆcom.zhisheng.test.Wolf@1b15382com.zhisheng.test.Wolf@1b15382truefalse æ­£å¦‚ç»“æœæ‰€ç¤ºï¼šåˆ›å»º Wolf å¯¹è±¡æ—¶ï¼Œç¨‹åºè°ƒç”¨äº†ç›¸åº”çš„æ„é€ å™¨æ¥å¯¹è¯¥å¯¹è±¡æ‰§è¡Œåˆå§‹åŒ–ï¼›å½“ç¨‹åºé€šè¿‡ååºåˆ—åŒ–æœºåˆ¶æ¢å¤ Java å¯¹è±¡æ—¶ï¼Œç³»ç»Ÿæ— éœ€åœ¨è°ƒç”¨æ„é€ å™¨æ¥è¿›è¡Œåˆå§‹åŒ–ã€‚é€šè¿‡ååºåˆ—åŒ–æ¢å¤å‡ºæ¥çš„ Wolf å¯¹è±¡å’ŒåŸæ¥çš„ Wolf å¯¹è±¡å…·æœ‰å®Œå…¨ç›¸åŒçš„å®ä¾‹å˜é‡å€¼ï¼Œä½†ç³»ç»Ÿä¼šäº§ç”Ÿä¸¤ä¸ªå¯¹è±¡ã€‚ æ— é™é€’å½’æ„é€ å™¨12345678910111213public class ConstrutionTest&#123; ConstrutionTest ct; &#123; ct = new ConstrutionTest(); &#125; public ConstrutionTest() &#123; System.out.println(\"æ— å‚æ„é€ å™¨\"); &#125; public static void main(String[] args) &#123; ConstrutionTest ct = new ConstrutionTest(); &#125;&#125; è¿è¡Œç»“æœæŠ›å‡ºå¼‚å¸¸ java.lang.StackOverflowError å› ä¸ºä¸ç®¡å®šä¹‰å®ä¾‹å˜é‡æ—¶æŒ‡å®šçš„åˆå§‹å€¼ï¼Œè¿˜æ˜¯åœ¨éé™æ€åˆå§‹åŒ–ä»£ç å—ä¸­æ‰§è¡Œçš„åˆå§‹åŒ–æ“ä½œï¼Œæœ€ç»ˆéƒ½å°†æå–åˆ°æ„é€ å™¨ä¸­æ‰§è¡Œï¼Œå› ä¸ºä»£ç ä¸­é€’å½’è°ƒç”¨äº†ç±»çš„æ„é€ å™¨ï¼Œæœ€ç»ˆå¯¼è‡´å‡ºç° java.lang.StackOverflowError å¼‚å¸¸ã€‚ åˆ°åº•è°ƒç”¨å“ªä¸ªé‡è½½æ–¹æ³•1ã€ç¬¬ä¸€é˜¶æ®µ JVM å°†ä¼šé€‰å–æ‰€æœ‰å¯è·å¾—å¹¶åŒ¹é…è°ƒç”¨çš„æ–¹æ³•æˆ–è€…æ„é€ å™¨ 2ã€ç¬¬äºŒä¸ªé˜¶æ®µå†³å®šåˆ°åº•è¦è°ƒç”¨å“ªä¸ªæ–¹æ³•ï¼Œæ­¤æ—¶ JVM ä¼šåœ¨ç¬¬ä¸€é˜¶æ®µæ‰€é€‰å–çš„æ–¹æ³•æˆ–è€…æ„é€ å™¨ä¸­å†æ¬¡é€‰å–æœ€ç²¾ç¡®åŒ¹é…çš„é‚£ä¸€ä¸ªã€‚ 1234567891011121314151617public class OverrideTest&#123; public void info(Object obj, int a) &#123; System.out.println(\"obj å‚æ•°\" + obj); System.out.println(\"æ•´å‹å‚æ•° \" + a); &#125; public void info(Object[] obj, double a) &#123; System.out.println(\"obj å‚æ•°\" + obj); System.out.println(\"æ•´å‹å‚æ•° \" + a); &#125; public static void main(String[] args) &#123; OverrideTest o = new OverrideTest(); o.info(null, 5); &#125;&#125; æŠ¥é”™å¦‚ä¸‹ï¼š 12Error:(20, 10) java: å¯¹infoçš„å¼•ç”¨ä¸æ˜ç¡® com.zhisheng.test.OverrideTest ä¸­çš„æ–¹æ³• info(java.lang.Object,int) å’Œ com.zhisheng.test.OverrideTest ä¸­çš„æ–¹æ³• info(java.lang.Object[],double) éƒ½åŒ¹é… åœ¨è¿™ç§å¤æ‚çš„æ¡ä»¶ä¸‹ï¼ŒJVM æ— æ³•åˆ¤æ–­å“ªä¸ªæ–¹æ³•æ›´åŒ¹é…å®é™…è°ƒç”¨ï¼Œå°†ä¼šå¯¼è‡´ç¨‹åºç¼–è¯‘é”™è¯¯ã€‚ æ–¹æ³•é‡å†™çš„é™·é˜±æ— æ³•é‡å†™çˆ¶ç±» private æ–¹æ³•ã€‚å¦‚æœå­ç±»æœ‰ä¸€ä¸ªä¸çˆ¶ç±» private æ–¹æ³•å…·æœ‰ç›¸åŒæ–¹æ³•åã€ç›¸åŒå½¢å‚åˆ—è¡¨ã€ç›¸åŒè¿”å›å€¼ç±»å‹çš„æ–¹æ³•ï¼Œä¾ç„¶ä¸æ˜¯é‡å†™ï¼Œåªæ˜¯å­ç±»å®šä¹‰äº†ä¸€ä¸ªä¸çˆ¶ç±»ç›¸åŒçš„æ–¹æ³•ã€‚ static å…³é”®å­—static å¯ä»¥ä¿®é¥°ç±»ä¸­å®šä¹‰çš„æˆå‘˜ï¼šfieldã€æ–¹æ³•ã€å†…éƒ¨ç±»ã€åˆå§‹åŒ–ä»£ç å—ã€å†…éƒ¨æšä¸¾ç±» é™æ€æ–¹æ³•å±äºç±»è¢« static ä¿®é¥°çš„æˆå‘˜ï¼ˆfieldã€æ–¹æ³•ã€å†…éƒ¨ç±»ã€åˆå§‹åŒ–å—ã€å†…éƒ¨æšä¸¾ç±»ï¼‰å±äºç±»æœ¬èº«ï¼Œè€Œä¸æ˜¯å•ä¸ªçš„ Java å¯¹è±¡ã€‚é™æ€æ–¹æ³•ä¹Ÿæ˜¯å±äºç±»ã€‚ ç¬¬ 8 è¯¾ â€”â€” å¼‚å¸¸æ•æ‰çš„é™·é˜±æ­£ç¡®å…³é—­èµ„æºçš„æ–¹å¼ ä½¿ç”¨ finally å—æ¥ä¿è¯å›æ”¶ï¼Œä¿è¯å…³é—­æ“ä½œæ€»æ˜¯ä¼šè¢«æ‰§è¡Œ å…³é—­æ¯ä¸ªèµ„æºä¹‹å‰é¦–å…ˆä¿è¯å¼•ç”¨è¯¥èµ„æºçš„å¼•ç”¨å˜é‡ä¸ä¸º null ä¸ºæ¯ä¸ªç‰©ç†èµ„æºå•ç‹¬ä½¿ç”¨ try .. catch å—å…³é—­èµ„æºï¼Œä¿è¯å…³é—­èµ„æºæ—¶å¼•å‘çš„å¼‚å¸¸ä¸ä¼šå½±å“å…¶ä»–èµ„æºçš„å…³é—­ã€‚ finally å—é™·é˜±finally æ‰§è¡Œé¡ºåºï¼Œçœ‹æˆ‘ä»¥å‰å†™çš„ä¸€ç¯‡æ–‡ç« ã€Šæ·±åº¦æ¢ç©¶Java ä¸­ finally è¯­å¥å—ã€‹ã€‚ catch å—ç”¨æ³•åœ¨ try å—åä½¿ç”¨ catch å—æ¥æ•è·å¤šä¸ªå¼‚å¸¸æ—¶ï¼Œç¨‹åºåº”è¯¥å°å¿ƒå¤šä¸ª catch å—ä¹‹é—´çš„é¡ºåºï¼šæ•è·çˆ¶ç±»å¼‚å¸¸çš„ catch å—éƒ½åº”è¯¥æ’åœ¨æ•è·å­ç±»å¼‚å¸¸çš„ catch å—ä¹‹åï¼ˆå…ˆå¤„ç†å°å¼‚å¸¸ï¼Œå†å¤„ç†å¤§å¼‚å¸¸ï¼‰ï¼Œå¦åˆ™å‡ºç°ç¼–è¯‘é”™è¯¯ã€‚ ç»§æ‰¿å¾—åˆ°çš„å¼‚å¸¸å­ç±»é‡å†™çˆ¶ç±»æ–¹æ³•æ—¶ï¼Œä¸èƒ½å£°æ˜æŠ›å‡ºæ¯”çˆ¶ç±»æ–¹æ³•ç±»å‹æ›´å¤šã€èŒƒå›´æ›´å¤§çš„å¼‚å¸¸ã€‚ äºŒå‰æ ‘æ€§è´¨ï¼š äºŒå‰æ ‘ç¬¬ i å±‚ä¸Šçš„èŠ‚ç‚¹æ•°ç›®è‡³å¤šä¸º 2 ^(i - 1) (i &gt;= 1) æ·±åº¦ä¸º k çš„äºŒå‰æ ‘è‡³å¤šæœ‰ 2 ^ k - 1 ä¸ªèŠ‚ç‚¹ åœ¨ä»»ä½•ä¸€é¢—äºŒå‰æ ‘ä¸­ï¼Œå¦‚æœå…¶å¶å­ç»“ç‚¹çš„æ•°é‡ä¸º n0ï¼Œåº¦ä¸º 2 çš„å­èŠ‚ç‚¹æ•°é‡ä¸º n2ï¼Œåˆ™ n0 = n2 + 1 å…·æœ‰ n ä¸ªèŠ‚ç‚¹çš„å®Œå…¨äºŒå‰æ ‘çš„æ·±åº¦ä¸º log n + 1 (log çš„åº•ä¸º 2) å¯¹äºä¸€æ£µæœ‰ n ä¸ªèŠ‚ç‚¹çš„å®Œå…¨äºŒå‰æ ‘çš„èŠ‚ç‚¹æŒ‰å±‚è‡ªå·¦å‘å³ç¼–å·ï¼Œåˆ™å¯¹ä»»ä¸€ç¼–å·ä¸º i çš„èŠ‚ç‚¹æœ‰å¦‚ä¸‹æ€§è´¨ï¼š å½“ i == 1 æ—¶ï¼ŒèŠ‚ç‚¹ i æ˜¯äºŒå‰æ ‘çš„æ ¹ï¼›è‹¥ i &gt; 1 æ—¶ï¼Œåˆ™èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹æ˜¯ i/2 å½“ 2i &lt;= nï¼Œåˆ™èŠ‚ç‚¹ i æœ‰å·¦å­©å­ï¼Œå·¦å­©å­çš„ç¼–å·æ˜¯ 2iï¼Œå¦åˆ™ï¼ŒèŠ‚ç‚¹æ— å·¦å­©å­ï¼Œå¹¶ä¸”æ˜¯å¶å­ç»“ç‚¹ è‹¥ 2i + 1 &lt;= n ï¼Œåˆ™èŠ‚ç‚¹ i æœ‰å³å­©å­ï¼Œå³å­©å­çš„ç¼–å·æ˜¯ 2i + 1ï¼›å¦åˆ™ï¼ŒèŠ‚ç‚¹æ— å³å­©å­ã€‚ å¯¹äºä¸€é¢— n ä¸ªèŠ‚ç‚¹çš„å®Œå…¨äºŒå‰æ ‘çš„èŠ‚ç‚¹æŒ‰å±‚è‡ªå·¦å‘å³ç¼–å·ï¼Œ1 ~ n/2 èŒƒå›´çš„èŠ‚ç‚¹éƒ½æ˜¯æœ‰å­©å­èŠ‚ç‚¹çš„éå¶å­ç»“ç‚¹ï¼Œå…¶ä½™çš„èŠ‚ç‚¹å…¨éƒ¨éƒ½æ˜¯å¶å­ç»“ç‚¹ã€‚ç¼–å·ä¸º n/2 çš„èŠ‚ç‚¹æœ‰å¯èƒ½åªæœ‰å·¦èŠ‚ç‚¹ï¼Œä¹Ÿå¯èƒ½æ—¢æœ‰å·¦èŠ‚ç‚¹ï¼Œåˆæœ‰å³èŠ‚ç‚¹ã€‚ é€‰æ‹©æ’åºç›´æ¥é€‰æ‹©æ’åºéœ€è¦ç»è¿‡ n - 1 è¶Ÿæ¯”è¾ƒ ç¬¬ä¸€è¶Ÿæ¯”è¾ƒï¼šç¨‹åºå°†è®°å½•å®šä½åœ¨ç¬¬ä¸€ä¸ªæ•°æ®ä¸Šï¼Œæ‹¿ç¬¬ä¸€ä¸ªæ•°æ®ä¾æ¬¡å’Œå®ƒåé¢çš„æ¯ä¸ªæ•°æ®è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœç¬¬ä¸€ä¸ªæ•°æ®å¤§äºåé¢æŸä¸ªæ•°æ®ï¼Œäº¤æ¢å®ƒä»¬ã€‚ã€‚ä¾æ­¤ç±»æ¨ï¼Œç»è¿‡ç¬¬ä¸€è¶Ÿæ¯”è¾ƒï¼Œè¿™ç»„æ•°æ®ä¸­æœ€å°çš„æ•°æ®è¢«é€‰å‡ºæ¥ï¼Œå®ƒè¢«æ’åœ¨ç¬¬ä¸€ä½ã€‚ ç¬¬äºŒè¶Ÿæ¯”è¾ƒï¼šç¨‹åºå°†è®°å½•å®šä½åœ¨ç¬¬äºŒä¸ªæ•°æ®ä¸Šï¼Œæ‹¿ç¬¬äºŒä¸ªæ•°æ®ä¾æ¬¡å’Œå®ƒåé¢æ¯ä¸ªæ•°æ®è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœç¬¬äºŒä¸ªæ•°æ®å¤§äºåé¢æŸä¸ªæ•°æ®ï¼Œäº¤æ¢å®ƒä»¬ã€‚ã€‚ä¾æ¬¡ç±»æ¨ï¼Œç»è¿‡ç¬¬äºŒè¶Ÿæ¯”è¾ƒï¼Œè¿™ç»„æ•°æ®ä¸­ç¬¬äºŒå°çš„æ•°æ®è¢«é€‰å‡ºï¼Œå®ƒæ’åœ¨ç¬¬äºŒä½ ã€‚ã€‚ æŒ‰æ­¤è§„åˆ™ä¸€å…±è¿›è¡Œ n-1 è¶Ÿæ¯”è¾ƒï¼Œè¿™ç»„æ•°æ®ä¸­ç¬¬ n - 1å°ï¼ˆç¬¬äºŒå¤§ï¼‰çš„æ•°æ®è¢«é€‰å‡ºï¼Œè¢«æ’åœ¨ç¬¬ n -1 ä½ï¼ˆå€’æ•°ç¬¬ä¸€ä½ï¼‰ï¼›å‰©ä¸‹çš„å°±æ˜¯æœ€å¤§çš„æ•°æ®ï¼Œå®ƒæ’åœ¨æœ€åã€‚ ç›´æ¥é€‰æ‹©æ’åºçš„ä¼˜ç‚¹å°±æ˜¯ç®—æ³•ç®€å•ï¼Œå®¹æ˜“å®ç°ï¼Œç¼ºç‚¹å°±æ˜¯æ¯è¶Ÿåªèƒ½ç¡®å®šä¸€ä¸ªå…ƒç´ ï¼Œnä¸ªæ•°ç»„éœ€è¦è¿›è¡Œ n-1 è¶Ÿæ¯”è¾ƒã€‚ å †æ’åº å»ºå † æ‹¿å †çš„æ ¹èŠ‚ç‚¹å’Œæœ€åä¸€ä¸ªèŠ‚ç‚¹äº¤æ¢ äº¤æ¢æ’åºå†’æ³¡æ’åºç¬¬ä¸€è¶Ÿï¼šä¾æ¬¡æ¯”è¾ƒ0å’Œ1ï¼Œ1å’Œ2ï¼Œ2å’Œ3 â€¦ n-2 å’Œ n - 1 ç´¢å¼•çš„å…ƒç´ ï¼Œå¦‚æœå‘ç°ç¬¬ä¸€ä¸ªæ•°æ®å¤§äºåä¸€ä¸ªæ•°æ®ï¼Œäº¤æ¢å®ƒä»¬ï¼Œç»è¿‡ç¬¬ä¸€è¶Ÿï¼Œæœ€å¤§çš„å…ƒç´ æ’åˆ°äº†æœ€åã€‚ ç¬¬äºŒè¶Ÿï¼šä¾æ¬¡æ¯”è¾ƒ0å’Œ1ï¼Œ1å’Œ2ï¼Œ2å’Œ3 â€¦ n-3 å’Œ n - 2 ç´¢å¼•çš„å…ƒç´ ï¼Œå¦‚æœå‘ç°ç¬¬ä¸€ä¸ªæ•°æ®å¤§äºåä¸€ä¸ªæ•°æ®ï¼Œäº¤æ¢å®ƒä»¬ï¼Œç»è¿‡ç¬¬äºŒè¶Ÿï¼Œç¬¬äºŒå¤§çš„å…ƒç´ æ’åˆ°äº†å€’æ•°ç¬¬äºŒä½ ã€‚ã€‚ ç¬¬ n -1 è¶Ÿï¼šä¾æ¬¡æ¯”è¾ƒ0å’Œ1å…ƒç´ ï¼Œå¦‚æœå‘ç°ç¬¬ä¸€ä¸ªæ•°æ®å¤§äºåä¸€ä¸ªæ•°æ®ï¼Œäº¤æ¢å®ƒä»¬ï¼Œç»è¿‡ç¬¬ n - 1 è¶Ÿï¼Œç¬¬äºŒå°çš„å…ƒç´ æ’åˆ°äº†ç¬¬äºŒä½ã€‚ å¿«é€Ÿæ’åºä»å¾…æ’çš„æ•°æ®åºåˆ—ä¸­ä»»å–ä¸€ä¸ªæ•°æ®ä½œä¸ºåˆ†ç•Œå€¼ï¼Œæ‰€æœ‰æ¯”å®ƒå°çš„æ•°æ®å…ƒç´ ä¸€å¾‹æ”¾åœ¨å·¦è¾¹ï¼Œæ‰€æœ‰æ¯”ä»–å¤§çš„å…ƒç´ ä¸€å¾‹æ”¾åœ¨å³è¾¹ï¼Œè¿™æ ·ä¸€è¶Ÿä¸‹æ¥ï¼Œè¯¥åºåˆ—å°±åˆ†æˆäº†ä¸¤ä¸ªå­åºåˆ—ï¼Œæ¥ä¸‹æ¥å¯¹ä¸¤ä¸ªå­åºåˆ—è¿›è¡Œé€’å½’ï¼Œç›´åˆ°æ¯ä¸ªå­åºåˆ—åªå‰©ä¸€ä¸ªï¼Œæ’åºå®Œæˆã€‚ æ’å…¥æ’åºç›´æ¥æ’å…¥æ’åºä¾æ¬¡å°†å¾…æ’åºçš„æ•°æ®å…ƒç´ æŒ‰å…¶å…³é”®å­—å€¼çš„å¤§å°æ’å…¥å‰é¢çš„æœ‰åºåºåˆ—ã€‚ æŠ˜åŠæ’å…¥æ’åºå½“ç¬¬ i - 1 è¶Ÿéœ€è¦å°†ç¬¬ i ä¸ªå…ƒç´ æ’å…¥å‰é¢çš„ 0 ~ i -1 ä¸ªå…ƒç´ åºåˆ—ä¸­æ—¶ï¼š è®¡ç®— 0 ~ i - 1 ç´¢å¼•çš„ä¸­é—´ç‚¹ï¼Œä¹Ÿå°±æ˜¯ç”¨ i ç´¢å¼•å¤„çš„å…ƒç´ å’Œ ï¼ˆ0 + i - 1ï¼‰/2 ç´¢å¼•å¤„çš„å…ƒç´ è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœ i ç´¢å¼•å¤„çš„å…ƒç´ å¤§ï¼Œå°±ç›´æ¥åœ¨ ï¼ˆï¼ˆ0 + i - 1ï¼‰/2 ï¼‰ ~ ï¼ˆi - 1ï¼‰ååŠä¸ªèŒƒå›´å†…è¿›è¡Œæœç´¢ï¼Œåä¹‹åœ¨å‰åŠä¸ªèŒƒå›´æœç´¢ã€‚ é‡å¤ä¸Šé¢æ­¥éª¤ ç¡®å®šç¬¬ i ä¸ªå…ƒç´ çš„æ’å…¥ä½ç½®ï¼Œå°±å°†è¯¥ä½ç½®çš„åé¢æ‰€æœ‰å…ƒç´ æ•´ä½“åç§»ä¸€ä½ï¼Œç„¶åå°†ç¬¬ i ä¸ªå…ƒç´ æ”¾å…¥è¯¥ä½ç½®ã€‚","tags":[{"name":"Java","slug":"Java","permalink":"http://yoursite.com/tags/Java/"}]},{"title":"ä»å¯¹è±¡æ·±å…¥åˆ†æ Java ä¸­å®ä¾‹å˜é‡å’Œç±»å˜é‡çš„åŒºåˆ«","date":"2017-06-12T16:00:00.000Z","path":"2017/06/13/java-var/","text":"å®ä¾‹å˜é‡ å’Œ ç±»å˜é‡å±€éƒ¨å˜é‡ç‰¹ç‚¹ï¼šä½œç”¨æ—¶é—´çŸ­ï¼Œå­˜å‚¨åœ¨æ–¹æ³•çš„æ ˆå†…å­˜ä¸­ ç§ç±»ï¼š å½¢å‚ï¼šæ–¹æ³•ç­¾åä¸­å®šä¹‰çš„å±€éƒ¨å˜é‡ï¼Œç”±æ–¹æ³•è°ƒç”¨è€…è´Ÿè´£ä¸ºå…¶èµ‹å€¼ï¼Œéšæ–¹æ³•ç»“æŸè€Œæ¶ˆäº¡ æ–¹æ³•å†…çš„å±€éƒ¨å˜é‡ï¼šæ–¹æ³•å†…å®šä¹‰çš„å±€éƒ¨å˜é‡ï¼Œå¿…é¡»åœ¨æ–¹æ³•å†…å¯¹å…¶è¿›è¡Œæ˜¾ç¤ºåˆå§‹åŒ–ï¼Œä»åˆå§‹åŒ–åå¼€å§‹ç”Ÿæ•ˆï¼Œéšæ–¹æ³•ç»“æŸè€Œæ¶ˆäº¡ ä»£ç å—å†…çš„å±€éƒ¨å˜é‡ï¼šåœ¨ä»£ç å—ä¸­å®šä¹‰çš„å±€éƒ¨å˜é‡ï¼Œå¿…é¡»åœ¨ä»£ç å—ä¸­è¿›è¡Œæ˜¾ç¤ºåˆå§‹åŒ–ï¼Œä»åˆå§‹åŒ–åå¼€å§‹ç”Ÿæ•ˆï¼Œéšä»£ç å—ç»“æŸè€Œæ¶ˆäº¡ æˆå‘˜å˜é‡ç±»ä½“å†…å®šä¹‰çš„å˜é‡ï¼Œå¦‚æœè¯¥æˆå‘˜å˜é‡æ²¡æœ‰ä½¿ç”¨ static ä¿®é¥°ï¼Œé‚£è¯¥æˆå‘˜å˜é‡åˆè¢«ç§°ä¸ºéé™æ€å˜é‡æˆ–å®ä¾‹å˜é‡ï¼Œå¦‚æœä½¿ç”¨ static ä¿®é¥°ï¼Œåˆ™è¯¥æˆå‘˜å˜é‡åˆå¯è¢«ç§°ä¸ºé™æ€å˜é‡æˆ–ç±»å˜é‡ã€‚ å®ä¾‹å˜é‡å’Œç±»å˜é‡çš„å±æ€§ä½¿ç”¨ static ä¿®é¥°çš„æˆå‘˜å˜é‡æ˜¯ç±»å˜é‡ï¼Œå±äºè¯¥ç±»æœ¬èº«ï¼Œæ²¡æœ‰ä½¿ç”¨ static ä¿®é¥°çš„æˆå‘˜å˜é‡æ˜¯å®ä¾‹å˜é‡ï¼Œå±äºè¯¥ç±»çš„å®ä¾‹ï¼Œåœ¨åŒä¸€ä¸ªç±»ä¸­ï¼Œæ¯ä¸€ä¸ªç±»åªå¯¹åº”ä¸€ä¸ª Class å¯¹è±¡ï¼Œä½†æ¯ä¸ªç±»å¯ä»¥åˆ›å»ºå¤šä¸ªå¯¹è±¡ã€‚ ç”±äºåŒä¸€ä¸ª JVM å†…çš„æ¯ä¸ªç±»åªå¯¹åº”ä¸€ä¸ª CLass å¯¹è±¡ï¼Œå› æ­¤åŒä¸€ä¸ª JVM å†…çš„ä¸€ä¸ªç±»çš„ç±»å˜é‡åªéœ€è¦ä¸€å—å†…å­˜ç©ºé—´ï¼›ä½†å¯¹äºå®ä¾‹å˜é‡è€Œè¨€ï¼Œè¯¥ç±»æ¯åˆ›å»ºä¸€æ¬¡å®ä¾‹ï¼Œå°±éœ€è¦ä¸ºè¯¥å®ä¾‹å˜é‡åˆ†é…ä¸€å—å†…å­˜ç©ºé—´ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œç¨‹åºä¸­åˆ›å»ºäº†å‡ ä¸ªå®ä¾‹ï¼Œå®ä¾‹å˜é‡å°±éœ€è¦å‡ å—å†…å­˜ç©ºé—´ã€‚ è¿™é‡Œæˆ‘æƒ³åˆ°ä¸€é“é¢è¯•é¢˜ç›®ï¼š 123456789101112public class A&#123; &#123; System.out.println(\"æˆ‘æ˜¯ä»£ç å—\"); &#125; static&#123; System.out.println(\"æˆ‘æ˜¯é™æ€ä»£ç å—\"); &#125; public static void main(String[] args) &#123; A a = new A(); A a1 = new A(); &#125;&#125; ç»“æœï¼š 123æˆ‘æ˜¯é™æ€ä»£ç å—æˆ‘æ˜¯ä»£ç å—æˆ‘æ˜¯ä»£ç å— é™æ€ä»£ç å—åªæ‰§è¡Œä¸€æ¬¡ï¼Œè€Œä»£ç å—æ¯åˆ›å»ºä¸€ä¸ªå®ä¾‹ï¼Œå°±ä¼šæ‰“å°ä¸€æ¬¡ã€‚ å®ä¾‹å˜é‡çš„åˆå§‹åŒ–æ—¶æœºç¨‹åºå¯åœ¨3ä¸ªåœ°æ–¹å¯¹å®ä¾‹å˜é‡æ‰§è¡Œåˆå§‹åŒ–ï¼š å®šä¹‰å®ä¾‹å˜é‡æ—¶æŒ‡å®šåˆå§‹å€¼ éé™æ€åˆå§‹åŒ–å—ä¸­å¯¹å®ä¾‹å˜é‡æŒ‡å®šåˆå§‹å€¼ æ„é€ å™¨ä¸­å¯¹å®ä¾‹å˜é‡æŒ‡å®šåˆå§‹å€¼ ä¸Šé¢ç¬¬ä¸€ç§å’Œç¬¬äºŒç§æ–¹å¼æ¯”ç¬¬ä¸‰ç§æ–¹å¼æ›´æ—©æ‰§è¡Œï¼Œä½†ç¬¬ä¸€ã€äºŒç§æ–¹å¼çš„æ‰§è¡Œé¡ºåºä¸ä»–ä»¬åœ¨æºç¨‹åºä¸­çš„æ’åˆ—é¡ºåºç›¸åŒã€‚ åŒæ ·åœ¨ä¸Šé¢é‚£ä¸ªä»£ç ä¸ŠåŠ ä¸Šä¸€ä¸ªå˜é‡ weight çš„æˆå‘˜å˜é‡ï¼Œæˆ‘ä»¬æ¥éªŒè¯ä¸‹ä¸Šé¢çš„åˆå§‹åŒ–é¡ºåºï¼š 1ã€å®šä¹‰å®ä¾‹å˜é‡æŒ‡å®šåˆå§‹å€¼ åœ¨ éé™æ€åˆå§‹åŒ–å—å¯¹å®ä¾‹å˜é‡æŒ‡å®šåˆå§‹å€¼ ä¹‹å: 123456789101112131415public class A&#123; &#123; weight = 2.1; System.out.println(\"æˆ‘æ˜¯ä»£ç å—\"); &#125; double weight = 2.0; static&#123; System.out.println(\"æˆ‘æ˜¯é™æ€ä»£ç å—\"); &#125; public static void main(String[] args) &#123; A a = new A(); A a1 = new A(); System.out.println(a.weight); &#125;&#125; ç»“æœæ˜¯ï¼š 1234æˆ‘æ˜¯é™æ€ä»£ç å—æˆ‘æ˜¯ä»£ç å—æˆ‘æ˜¯ä»£ç å—2.0 2ã€å®šä¹‰å®ä¾‹å˜é‡æŒ‡å®šåˆå§‹å€¼ åœ¨ éé™æ€åˆå§‹åŒ–å—å¯¹å®ä¾‹å˜é‡æŒ‡å®šåˆå§‹å€¼ ä¹‹å‰: 123456789101112131415public class A&#123; double weight = 2.0; &#123; weight = 2.1; System.out.println(\"æˆ‘æ˜¯ä»£ç å—\"); &#125; static&#123; System.out.println(\"æˆ‘æ˜¯é™æ€ä»£ç å—\"); &#125; public static void main(String[] args) &#123; A a = new A(); A a1 = new A(); System.out.println(a.weight); &#125;&#125; ç»“æœä¸ºï¼š 1234æˆ‘æ˜¯é™æ€ä»£ç å—æˆ‘æ˜¯ä»£ç å—æˆ‘æ˜¯ä»£ç å—2.1 å¤§å®¶æœ‰æ²¡æœ‰è§‰å¾—å¾ˆå¥‡æ€ªï¼Ÿ æˆ‘æ¥å¥½å¥½è¯´æ¸…æ¥šä¸‹ï¼š å®šä¹‰å®ä¾‹å˜é‡æ—¶æŒ‡å®šçš„åˆå§‹å€¼ã€åˆå§‹ä»£ç å—ä¸­ä¸ºå®ä¾‹å˜é‡æŒ‡å®šåˆå§‹å€¼çš„è¯­å¥çš„åœ°ä½æ˜¯å¹³ç­‰çš„ï¼Œå½“ç»è¿‡ç¼–è¯‘å™¨å¤„ç†åï¼Œä»–ä»¬éƒ½å°†ä¼šè¢«æå–åˆ°æ„é€ å™¨ä¸­ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™æ¡è¯­å¥ double weight = 2.0; å®é™…ä¸Šä¼šè¢«åˆ†æˆå¦‚ä¸‹ 2 æ¬¡æ‰§è¡Œï¼š double weight; : åˆ›å»º Java å¯¹è±¡æ—¶ç³»ç»Ÿæ ¹æ®è¯¥è¯­å¥ä¸ºè¯¥å¯¹è±¡åˆ†é…å†…å­˜ã€‚ weight = 2.1; : è¿™æ¡è¯­å¥å°†ä¼šè¢«æå–åˆ° Java ç±»çš„æ„é€ å™¨ä¸­æ‰§è¡Œã€‚ åªè¯´åŸç†ï¼Œå¤§å®¶è‚¯å®šä¸æ€ä¹ˆä¿¡ï¼Œé‚£ä¹ˆè¿˜æœ‰æ‹¿å‡ºæºç æ¥ï¼Œè¿™æ ·æ‰æœ‰ä¿¡æœèƒ½åŠ›çš„å—ï¼Ÿæ˜¯ä¸ï¼Ÿ è¿™é‡Œæˆ‘ç›´æ¥ä½¿ç”¨è½¯ä»¶å°†ä»£ç çš„å­—èŠ‚ç æ–‡ä»¶åç¼–è¯‘è¿‡æ¥ï¼Œçœ‹çœ‹é‡Œé¢æ˜¯æ€æ ·çš„ç»„æˆï¼Ÿ ç¬¬ä¸€ä¸ªä»£ç çš„åç¼–è¯‘æºç å¦‚ä¸‹ï¼š 1234567891011121314151617181920public class A&#123; double weight; public A() &#123; this.weight = 2.1D; System.out.println(\"æˆ‘æ˜¯ä»£ç å—\"); this.weight = 2.0D; &#125; static &#123; System.out.println(\"æˆ‘æ˜¯é™æ€ä»£ç å—\"); &#125; public static void main(String[] args) &#123; A a = new A(); A a1 = new A(); System.out.println(a.weight); &#125;&#125; ç¬¬äºŒä¸ªä»£ç åç¼–è¯‘æºç å¦‚ä¸‹ï¼š 1234567891011121314151617181920public class A&#123; double weight; public A() &#123; this.weight = 2.0D; this.weight = 2.1D; System.out.println(\"æˆ‘æ˜¯ä»£ç å—\"); &#125; static &#123; System.out.println(\"æˆ‘æ˜¯é™æ€ä»£ç å—\"); &#125; public static void main(String[] args) &#123; A a = new A(); A a1 = new A(); System.out.println(a.weight); &#125;&#125; è¿™ä¸‹å­æ»¡æ„äº†å§ï¼ é€šè¿‡åç¼–è¯‘çš„æºç å¯ä»¥çœ‹åˆ°è¯¥ç±»å®šä¹‰çš„ weight å®ä¾‹å˜é‡æ—¶ä¸å†æœ‰åˆå§‹å€¼ï¼Œä¸º weight æŒ‡å®šåˆå§‹å€¼çš„ä»£ç ä¹Ÿè¢«æåˆ°äº†æ„é€ å™¨ä¸­å»äº†ï¼Œä½†æ˜¯æˆ‘ä»¬ä¹Ÿå¯ä»¥å‘ç°ä¹‹å‰è§„åˆ™ä¹Ÿæ˜¯æ»¡è¶³çš„ã€‚ ä»–ä»¬çš„èµ‹å€¼è¯­å¥éƒ½è¢«åˆå¹¶åˆ°æ„é€ å™¨ä¸­ï¼Œåœ¨åˆå¹¶è¿‡ç¨‹ä¸­ï¼Œå®šä¹‰çš„å˜é‡è¯­å¥è½¬æ¢å¾—åˆ°çš„èµ‹å€¼è¯­å¥ï¼Œåˆå§‹ä»£ç å—ä¸­çš„è¯­å¥éƒ½è½¬æ¢å¾—åˆ°çš„èµ‹å€¼è¯­å¥ï¼Œæ€»æ˜¯ä½äºæ„é€ å™¨çš„æ‰€æœ‰è¯­å¥ä¹‹å‰ï¼Œåˆå¹¶åï¼Œä¸¤ç§èµ‹å€¼è¯­å¥çš„é¡ºåºä¹Ÿä¿æŒäº†å®ƒä»¬åœ¨ Java æºä»£ç ä¸­çš„é¡ºåºã€‚ å¤§è‡´è¿‡ç¨‹åº”è¯¥äº†è§£äº†å§ï¼Ÿå¦‚æœè¿˜ä¸æ€ä¹ˆæ¸…æ¥šçš„ï¼Œå»ºè®®è¿˜æ˜¯è‡ªå·±å°†æ€ä¸ªè¿‡ç¨‹åœ¨è‡ªå·±çš„ç”µè„‘ä¸Šæ“ä½œä¸€éï¼Œæ¯•ç«Ÿå…‰çœ‹ä¸ç»ƒå‡æŠŠå¼ã€‚ ç±»å˜é‡çš„åˆå§‹åŒ–æ—¶æœºJVM å¯¹æ¯ä¸€ä¸ª Java ç±»åªåˆå§‹åŒ–ä¸€æ¬¡ï¼Œå› æ­¤ Java ç¨‹åºæ¯è¿è¡Œä¸€æ¬¡ï¼Œç³»ç»Ÿåªä¸ºç±»å˜é‡åˆ†é…ä¸€æ¬¡å†…å­˜ç©ºé—´ï¼Œæ‰§è¡Œä¸€æ¬¡åˆå§‹åŒ–ã€‚ç¨‹åºå¯åœ¨ä¸¤ä¸ªåœ°æ–¹å¯¹ç±»å˜é‡æ‰§è¡Œåˆå§‹åŒ–ï¼š å®šä¹‰ç±»å˜é‡æ—¶æŒ‡å®šåˆå§‹å€¼ é™æ€åˆå§‹åŒ–ä»£ç å—ä¸­å¯¹ç±»å˜é‡æŒ‡å®šåˆå§‹å€¼ è¿™ä¸¤ç§æ–¹å¼çš„æ‰§è¡Œé¡ºåºä¸å®ƒä»¬åœ¨æºä»£ç ä¸­çš„æ’åˆ—é¡ºåºç›¸åŒã€‚ è¿˜æ˜¯ç”¨ä¸Šé¢é‚£ä¸ªç¤ºä¾‹ï¼Œæˆ‘ä»¬åœ¨å…¶åŸºç¡€ä¸ŠåŠ ä¸ªè¢« static ä¿®é¥°çš„å˜é‡ heightï¼š 1ã€å®šä¹‰ç±»å˜é‡æ—¶æŒ‡å®šåˆå§‹å€¼ åœ¨ é™æ€åˆå§‹åŒ–ä»£ç å—ä¸­å¯¹ç±»å˜é‡æŒ‡å®šåˆå§‹å€¼ ä¹‹åï¼š 123456789101112131415161718public class A&#123; double weight = 2.0; &#123; weight = 2.1; System.out.println(\"æˆ‘æ˜¯ä»£ç å—\"); &#125; static&#123; height = 10.1; System.out.println(\"æˆ‘æ˜¯é™æ€ä»£ç å—\"); &#125; static double height = 10.0; public static void main(String[] args) &#123; A a = new A(); A a1 = new A(); System.out.println(a.weight); System.out.println(height); &#125;&#125; è¿è¡Œç»“æœï¼š 12345æˆ‘æ˜¯é™æ€ä»£ç å—æˆ‘æ˜¯ä»£ç å—æˆ‘æ˜¯ä»£ç å—2.110.0 2ã€å®šä¹‰ç±»å˜é‡æ—¶æŒ‡å®šåˆå§‹å€¼ åœ¨ é™æ€åˆå§‹åŒ–ä»£ç å—ä¸­å¯¹ç±»å˜é‡æŒ‡å®šåˆå§‹å€¼ ä¹‹å‰ï¼š 123456789101112131415161718public class A&#123; static double height = 10.0; double weight = 2.0; &#123; weight = 2.1; System.out.println(\"æˆ‘æ˜¯ä»£ç å—\"); &#125; static&#123; height = 10.1; System.out.println(\"æˆ‘æ˜¯é™æ€ä»£ç å—\"); &#125; public static void main(String[] args) &#123; A a = new A(); A a1 = new A(); System.out.println(a.weight); System.out.println(height); &#125;&#125; è¿è¡Œç»“æœï¼š 12345æˆ‘æ˜¯é™æ€ä»£ç å—æˆ‘æ˜¯ä»£ç å—æˆ‘æ˜¯ä»£ç å—2.110.1 å…¶è¿è¡Œç»“æœæ­£å¦‚æˆ‘ä»¬é¢„æ–™ï¼Œä½†æ˜¯æˆ‘ä»¬è¿˜æ˜¯çœ‹çœ‹åç¼–è¯‘åçš„ä»£ç å§ï¼ ç¬¬ä¸€ç§æƒ…å†µä¸‹åç¼–è¯‘çš„ä»£ç ï¼š 1234567891011121314151617181920212223public class A&#123; double weight; public A() &#123; this.weight = 2.0D; this.weight = 2.1D; System.out.println(\"æˆ‘æ˜¯ä»£ç å—\"); &#125; static &#123; System.out.println(\"æˆ‘æ˜¯é™æ€ä»£ç å—\"); &#125; static double height = 10.0D; public static void main(String[] args) &#123; A a = new A(); A a1 = new A(); System.out.println(a.weight); System.out.println(height); &#125;&#125; ç¬¬äºŒç§æƒ…å†µä¸‹åç¼–è¯‘çš„ä»£ç ï¼š 123456789101112131415161718192021222324public class A&#123; static double height = 10.0D; double weight; public A() &#123; this.weight = 2.0D; this.weight = 2.1D; System.out.println(\"æˆ‘æ˜¯ä»£ç å—\"); &#125; static &#123; height = 10.1D; System.out.println(\"æˆ‘æ˜¯é™æ€ä»£ç å—\"); &#125; public static void main(String[] args) &#123; A a = new A(); A a1 = new A(); System.out.println(a.weight); System.out.println(height); &#125;&#125; é€šè¿‡åç¼–è¯‘æºç ï¼Œå¯ä»¥çœ‹åˆ°ç¬¬ä¸€ç§æƒ…å†µä¸‹(å®šä¹‰ç±»å˜é‡æ—¶æŒ‡å®šåˆå§‹å€¼ åœ¨ é™æ€åˆå§‹åŒ–ä»£ç å—ä¸­å¯¹ç±»å˜é‡æŒ‡å®šåˆå§‹å€¼ ä¹‹å): æˆ‘ä»¬åœ¨ é™æ€åˆå§‹åŒ–ä»£ç å—ä¸­å¯¹ç±»å˜é‡æŒ‡å®šåˆå§‹å€¼ å·²ç»ä¸å­˜åœ¨äº†ï¼Œåªæœ‰ä¸€ä¸ªç±»å˜é‡æŒ‡å®šçš„åˆå§‹å€¼ static double height = 10.0D; , è€Œåœ¨ç¬¬äºŒç§æƒ…å†µä¸‹ï¼ˆå®šä¹‰ç±»å˜é‡æ—¶æŒ‡å®šåˆå§‹å€¼ åœ¨ é™æ€åˆå§‹åŒ–ä»£ç å—ä¸­å¯¹ç±»å˜é‡æŒ‡å®šåˆå§‹å€¼ ä¹‹å‰ï¼‰å’Œä¹‹å‰çš„æºä»£ç é¡ºåºæ˜¯ä¸€æ ·çš„ï¼Œæ²¡å•¥åŒºåˆ«ã€‚ ä¸Šé¢çš„ä»£ç ä¸­å……åˆ†çš„å±•ç¤ºäº†ç±»å˜é‡çš„ä¸¤ç§åˆå§‹åŒ–æ–¹å¼ ï¼šæ¯æ¬¡è¿è¡Œè¯¥ç¨‹åºæ—¶ï¼Œç³»ç»Ÿä¼šä¸º A ç±»æ‰§è¡Œåˆå§‹åŒ–ï¼Œå…ˆä¸ºæ‰€æœ‰ç±»å˜é‡åˆ†é…å†…å­˜ç©ºé—´ï¼Œå†æŒ‰ç…§æºä»£ç ä¸­çš„æ’åˆ—é¡ºåºæ‰§è¡Œé™æ€åˆå§‹ä»£ç å—ä¸­æ‰€æŒ‡å®šçš„åˆå§‹å€¼å’Œå®šä¹‰ç±»å˜é‡æ—¶æ‰€æŒ‡å®šçš„åˆå§‹å€¼ã€‚","tags":[{"name":"Java","slug":"Java","permalink":"http://yoursite.com/tags/Java/"}]},{"title":"è®°å½•ä¸‹è‡ªå·±ç¬¬ä¸€æ¬¡åé£æœºçš„æ„Ÿå—","date":"2017-06-12T16:00:00.000Z","path":"2017/06/13/feiji/","text":"å‰æå› ä¸ºå­¦æ ¡çš„åŸå› ï¼Œéœ€è¦åœ¨å¤§ä¸‰çš„æ—¶å€™å‡ºå»å®è®­å‡ ä¸ªæœˆï¼Œç„¶åé€‰æ‹©çš„æ˜¯åœ¨æ˜†å±±ï¼Œå…¬å¸è§„å®šè¦åœ¨ 2017 å¹´ 4 æœˆ 19 å·ä¹‹å‰èµ¶åˆ°ï¼Œæ‰€ä»¥æˆ‘æå‰è®¢çš„æœºç¥¨æ˜¯ 17 å·ï¼Œä¹‹æ‰€ä»¥ä¼šè®¢æœºç¥¨ï¼Œå…¶å®å¾ˆå¤§ä¸€éƒ¨åˆ†åŸå› æ˜¯ç”±äºè‡ªå·±ä¹‹å‰æ²¡æœ‰åè¿‡é£æœºï¼Œæ‰€ä»¥æƒ³ä½“éªŒä¸€ä¸‹åé£æœºçš„æ„Ÿè„šï¼ˆå˜¿å˜¿ï¼‰ï¼Œå†åŠ ä¸Šè¿™æ˜¯æœºç¥¨çš„æ·¡å­£ï¼Œæ‰€ä»¥åé£æœºçš„ä»·é’±æ¯”åšé«˜é“è¿˜ä¾¿å®œã€‚æ•´ä¸ªè¡Œç¨‹ï¼šå­¦æ ¡ â€”â€”&gt; å—æ˜Œæœºåœº â€”â€”&gt; ä¸Šæµ·è™¹æ¡¥æœºåœº â€”â€”&gt; å…¬å¸ å­¦æ ¡å‡ºå‘10 ç‚¹å·¦å³å»é£Ÿå ‚åƒäº†ä¸ªæ—©é¤ï¼Œç„¶åæ‰“åŒ…å¥½è‡ªå·±çš„è¡Œæï¼Œç”±äºç¬¬ä¸€æ¬¡åé£æœºï¼Œæ‰€ä»¥æ‰“ç®—æå‰æ—¶é—´å»æœºåœºï¼Œç„¶ååœ¨æœºåœºç†Ÿæ‚‰ç†Ÿæ‚‰ç¯å¢ƒï¼Œä¸ç„¶çš„è¯é”™è¿‡é£æœºï¼Œé‚£å°± gg äº†ã€‚å¤§æ¦‚ 11ï¼š30 äº†ï¼Œå°±æ‹–ç€è¡Œæå‡ºé—¨ï¼Œåœ¨å­¦æ ¡é—¨å£å«äº†è¾† æ»´æ»´è½¦ å»æœºåœºï¼ˆå› ä¸ºå…¬äº¤è½¦è¦åå¥½ä¹…å¹¶ä¸”å»æœºåœºçš„è·¯å¥½çƒ‚ï¼‰ï¼Œå«çš„æ»´æ»´è½¦ä»–èµ°çš„æ˜¯é«˜é€Ÿï¼Œå¾ˆå¿«ã€‚ å—æ˜Œæœºåœºä¸åˆ°åŠå°æ—¶å°±åˆ°äº†æœºåœºï¼Œé¦–å…ˆå¹²çš„äº‹å°±æ˜¯å–ç¥¨ã€‚ ç„¶åå°†è¡Œæç®±å…è´¹æ‰˜è¿ï¼ˆå°äº20å…¬æ–¤å¯å…è´¹æ‰˜è¿ï¼Œè¶…è¿‡çš„è¯é‚£å°±å‡†å¤‡å¥½ Money å§ï¼‰ï¼Œä¸€ä¸ªåŒè¡Œçš„åŒå­¦å°±è¶…é‡äº†ã€‚å¹²å®Œäº†è¿™äº›äº‹å°±æ²¡å•¥äº‹äº†ï¼Œç„¶åå°±ååœ¨å‡³å­ä¸Šçœ‹èµ·äº†æœ€è¿‘å¾ˆç«çš„ç”µè§†å‰§ã€Šäººæ°‘çš„åä¹‰ã€‹ï¼Œçš„ç¡®å¾ˆå¥½çœ‹çš„ï¼Œæ²¡çœ‹è¿‡çš„è¯ï¼Œå¯ä»¥å»çœ‹çœ‹ã€‚ å¤§æ¦‚ 13ï¼š40 æ—¶ï¼Œå‡†å¤‡è¿›ç«™äº†ï¼Œè¿™é‡Œè¦è¯´çš„å°±æ¯”è¾ƒæœ‰è¶£äº†ã€‚æˆ‘å°±å…·ä½“çš„è¯´ä¸‹ï¼š ä¸€å¼€å§‹æ’é˜Ÿï¼ˆäººä¸å¤šï¼‰ï¼Œè½®åˆ°æˆ‘ï¼ŒæŠŠæœºç¥¨å’Œèº«ä»½è¯ç»™å¥¹ï¼Œç„¶åå¯¹ç€æ‘„åƒå¤´æ‹äº†ä¸ªç…§å°±è¿›å»æ£€æŸ¥éšèº«æºå¸¦çš„ç‰©å“äº†ã€‚ è¿™é‡Œä¹‹å‰æˆ‘å°±å¬è¯´äº†ï¼šè¯´æ˜¯é£æœºä¸Šä¸èƒ½æºå¸¦æ¶²ä½“ï¼Œä¸çŸ¥é“æˆ‘ä¹¦åŒ…å¸¦çš„æ´—å‘æ¶²èƒ½ä¸èƒ½è¿‡å…³ï¼ŸåŒå­¦å’Œæˆ‘ä¹‹å‰è¿˜åœ¨ä¸€èµ·å¼€ç©ç¬‘è¯´ï¼š1ã€å¦‚æœä¸èƒ½å¸¦ï¼Œæˆ‘å°±å½“åœºä¸€å£é—·äº†å®ƒã€‚ï¼ˆè¿™ä¹Ÿè¡Œï¼Œä¸‹å›¾éšæ„æ‰¾äº†ä¸ªè¡¨æƒ…åŒ…ï¼‰ 2ã€æˆ‘å…è´¹è¯·å¤§å®¶æ´—ä¸ªå¤´ ç”µè„‘å’Œé›¨ä¼è€Œå¤–æ£€æŸ¥ ä¹¦åŒ…å’Œéšèº«æºå¸¦ç‰©å“éƒ½æ‹¿å‡ºæ¥è¿‡å®‰æ£€ äººæ‰«æï¼ˆæ£€æŸ¥çš„æŒºç»†è‡´çš„ï¼Œæ¯”ç«è½¦ä¸¥å¤šäº†ï¼‰ ç»“æœæ£€æŸ¥äººå‘˜å‘ŠçŸ¥æˆ‘ï¼šæŠŠ æ´—å‘æ¶² å’Œ ä¸¤ä¸ªèºä¸åˆ€ æ‹¿å‡ºæ¥ã€‚ï¼ˆæˆ‘å½“åœºå°±éœ‡æƒŠäº†ï¼Œæˆ‘é‚£ä¹ˆå°çš„èºä¸åˆ€éƒ½è¢«æ£€æŸ¥åˆ°äº†ï¼Œè¿™å‡ ä¹æŠŠæˆ‘çš„ä¹¦åŒ…ç»™é€è§†äº†ä¸€ä¸ªéï¼‰ ç„¶åå‘¢ï¼Œè‡ªå·±åªå¥½å°†è¿ç¦ç‰©å“éƒ½æ‹¿å‡ºæ¥ï¼Œå†æ¬¡æ£€æŸ¥å°±å¯ä»¥é€šè¿‡äº†ã€‚ èµ°è¿›å»çš„æ—¶å€™æ‹çš„ä¸€å¼ ç…§ç‰‡, ï¼ˆç”µæ¢¯å¥½é•¿ï¼Œä¸è¿‡åæ¥åœ¨ä¸Šæµ·æœºåœºä¸‹è½¦æ‰å‘ç°é‚£ä¸ªä¹Ÿè¿˜å¥½äº†ï¼‰ è¿›å»åï¼Œåˆæœ‰ä¸€ä¸ªå°çš„è¿›ç«™å®¤ï¼Œåˆåœ¨é‚£é‡Œç­‰å¾…äº†ä¼šã€‚ åˆå¼€å§‹æ£€ç¥¨ï¼Œæ£€å®Œç¥¨ååå…¬äº¤è½¦å»é£æœºä¸‹é¢ï¼ˆå› ä¸ºé£æœºåœºå¤ªå¤§ï¼Œæˆ‘åçš„é‚£æ¶é£æœºä¸æ˜¯é è¿‘ç«™å°çš„ï¼‰ ä¸Šé£æœºåä»çª—å£æ‹çš„ä¸€å¼ ç…§ç‰‡ é£æœºä¸Šçœ‹è§é£æœºçš„ç©ºå§å’Œç©ºå°‘äº†ã€‚ã€‚ï¼ˆç©ºå§å¾ˆæ¼‚äº®ï¼Œå˜»å˜»ï¼Œæ²¡æ‹ç…§ç‰‡ï¼‰ é£æœºèµ·é£çš„æ—¶å€™ï¼Œæœºèˆ±é‡Œæœ‰è¯­éŸ³æ’­æ”¾å«æˆ‘ä»¬ç³»ä¸Šå®‰å…¨å¸¦ï¼Œå¹¶ä¸”å…³é—­æ‰‹æœºï¼Œæ‰€ä»¥åé¢å°±æ²¡ç…§ç‰‡äº†ã€‚ èµ·é£æ„Ÿè§‰èµ°äº†å¥½è¿œï¼Œç„¶åçªç„¶ä¸€åŠ é€Ÿï¼Œé£æœºå°±æ…¢æ…¢çš„å‘ä¸Šé£èµ·ï¼Œæ•´ä¸ªäººé‡å¿ƒéƒ½æ˜¯å¾€åå€’çš„ã€‚ ä¸ä¸€ä¼šï¼Œé£æœºå°±é£çš„å¥½é«˜äº†ï¼Œä»çª—å£æœ›ä¸‹å»ï¼Œä¸‹é¢çš„æ„Ÿè§‰å¥½ç¾ï¼Œä¸€è·¯ä¸Šçš„é£æ™¯æ„Ÿè§‰éƒ½æŒºæ¼‚äº®çš„ï¼Œæœ‰æ—¶è¿˜å¯ä»¥çœ‹åˆ°ç™½äº‘ã€‚ å¤§æ¦‚ä¸€ä¸ªå°æ—¶åï¼Œç©ºå§æ¨ç€ä¸ªè½¦ï¼Œæä¾›ç»™æˆ‘ä»¬ç‚¹é›¶é£Ÿï¼ˆé¢åŒ…ã€é¥¼å¹²ã€æ¦¨èœï¼‰å’Œé¥®æ–™ï¼ˆæ©™æ±ã€è‹¹æœé†‹ã€çŸ¿æ³‰æ°´ã€å’–å•¡ï¼Œå¯è‡ªé€‰ä¸€æ ·ï¼Œå¯å†åŠ ä¸€æ¯ï¼‰ï¼ŒæœåŠ¡è¿˜æ˜¯æŒºè´´å¿ƒçš„ï¼Œæˆ‘åœ¨è¿™é‡Œç»™ä¸­å›½ä¸œæ–¹èˆªç©ºç‚¹ä¸ªèµã€‚ é£æœºä¸­é€”æœ‰æ—¶ä¼šé¢ ç°¸ï¼Œæœºèˆ±é‡Œè¯­éŸ³è¯´æ˜¯é‡åˆ°ç©ºæ°”æ°”æµçš„å½±å“ã€‚ï¼ˆå¤§éƒ¨åˆ†æ—¶é—´è¿˜æ˜¯å¾ˆå¥½çš„ï¼‰ è¯´è¯´é£æœºä¸‹é™çš„æ—¶å€™å§ï¼ŒåŒæ ·ï¼Œæ„Ÿè§‰å£°éŸ³å¾ˆå¤§ï¼Œè€³æœµæœ‰ç‚¹å—ä¸äº†ã€‚ä¸çŸ¥é“ç©ºå§ã€ç©ºå°‘ä»¬æ€ä¹ˆé•¿æœŸå—å¾—äº†è¿™è¿™å£°éŸ³ï¼Œé•¿æœŸä¸‹å»ï¼Œé‚£ä¼°è®¡è€³æœµéƒ½è¦å‡ºæ¯›ç—…çš„å§ï¼Ÿ ä¸Šæµ·è™¹æ¡¥æœºåœºæœºåœºç»™äººçš„æ„Ÿè§‰å¾ˆå¤§ï¼Œèµ°äº†é‚£ä¸ªç”µæ¢¯éƒ½èµ°äº†å¾ˆè¿œã€‚ å°±åªæœ‰ä¸€å¼ ç…§ç‰‡ã€‚ ç„¶åå†å»å–æˆ‘çš„è¡Œæç®±ï¼Œæœ‰ä¸ªä¸“é—¨æ¥è‡ªå—æ˜Œçš„å–è¡Œæå¤„ï¼Œè¡Œæç®±ä¸€ä¸ªçš„æ”¾åœ¨ä¼ é€å¸¦ä¸Šï¼Œè‡ªå·±æ‹¿è‡ªå·±çš„è¡Œæå‡ºå»ã€‚è¿™é‡Œæœ‰ä¸ªç–‘é—®ï¼Œå¦‚æœè¡Œæè¢«åˆ«äººæèµ°çš„è¯ï¼Œé‚£è¯¥å’‹åŠï¼Œæˆ‘çœ‹å‡ºå£éƒ½æ²¡è®¾ç½®æ£€æŸ¥è¡Œææ˜¯å¦å’Œæœ¬äººçš„åŒ¹é…ï¼Ÿ å…¬å¸å…¬å¸æå‰æœ‰å¤§å·´æ¥æ¥æˆ‘ä»¬ï¼Œåä¸Šå¤§å·´ï¼Œç„¶ååœ¨è½¦ä¸Šèººäº†ä¸‹ï¼Œå°±ç¡ç€äº†ï¼Œç›´åˆ°åˆ°è¾¾å…¬å¸ã€‚ ä½å®¿åœ°å€å’Œå…¬å¸æœ‰ç‚¹è¿œï¼Œæ‰€ä»¥ä¹°äº†è¾† æ­»é£è‡ªè¡Œè½¦ï¼Œæ–¹ä¾¿å‡ºè¡Œï¼Œè‡ªå·±å‘¨æœ«ä¹Ÿå¯ä»¥å‡ºå»ç©ç©ã€‚ æ€»ç»“ç¬¬ä¸€æ¬¡åé£æœºï¼Œæ„Ÿè§‰è¿˜æ˜¯æŒºå¥½çš„ã€‚æµç¨‹ä¹Ÿä¸å¤æ‚ï¼Œæ‰€ä»¥ä¸éº»çƒ¦ã€‚ ä¸è¿‡è‡ªå·±è¦æ³¨æ„ä¸€äº›ä¸œè¥¿ï¼š ä¸è¦æºå¸¦é£æœºä¸Šè¿ç¦ç‰©å“ï¼ˆæ¶²ä½“ã€è¶…è¿‡å¤šå¤§çš„å……ç”µå®ã€åˆ€æªç­‰ï¼‰ ä¸€å®šè¦æå‰åŠ¨èº«ï¼Œä»¥é˜²å‘ç”Ÿçªå‘äº‹ä»¶ æ³¨æ„ä¿ç®¡å¥½è‡ªå·±çš„èº«ä»½è¯ æœ€åè¿™æ˜¯æˆ‘åœ¨æˆ‘åšå®¢ä¸Šå†™çš„ç¬¬ä¸€ç¯‡éšç¬”æ–‡ç« ï¼Œä¸çŸ¥é“å’‹å†™ï¼Œå°±éšä¾¿å†™ã€‚ å› ä¸ºæ˜ŸæœŸå…­ï¼ˆæ˜¨å¤©ï¼‰å‡ºå»ç©äº†ï¼Œæ‰€ä»¥ä»Šå¤©æ—©ä¸Šèµ·æ¥å†™ä¸‹æ¥è¿™ç¯‡ï¼Œæœ‰äº›äº‹è¿˜æ˜¯å¾—èµ¶ç´§åšæ‰å»ï¼Œä¸ç„¶ä¸€ç›´æ‹–ï¼Œæ‹–ç€æ‹–ç€å°±æ²¡æœ‰æƒ³åšçš„æ¬²æœ›äº†ã€‚ å…¬å¸å‘¨å›´ç¯å¢ƒæŒºå¥½çš„ï¼Œæ°´ä¹¡ä¹‹åœ°ï¼Œæœ‰ä¸ªé˜³æ¾„æ¹–ï¼Œç››äº§å¤§é—¸èŸ¹ï¼Œå‘¨å›´çš„å¤§é—¸èŸ¹åº„ï¼Œé‚£å«ä¸€ä¸ªå­—ï¼šå¤šã€‚æœ‰ç©ºçš„æ—¶å€™æˆ‘å°½é‡å¤šå»é€›é€›ï¼Œæ‹ç‚¹ç…§ç‰‡å›æ¥ã€‚ ä»Šåä¹Ÿä¼šå¤šå†™ç‚¹éšç¬”ï¼Œè®°å½•ç”Ÿæ´»ä¸­ä¸€äº›æœ‰è¶£ä¸”å€¼å¾—çºªå¿µçš„ç‚¹æ»´ã€‚ æ„Ÿè°¢é˜…è¯»ï¼ï¼ï¼","tags":[{"name":"éšç¬”","slug":"éšç¬”","permalink":"http://yoursite.com/tags/éšç¬”/"}]},{"title":"é€šè¿‡é¡¹ç›®é€æ­¥æ·±å…¥äº†è§£Mybatisï¼ˆäºŒï¼‰","date":"2017-06-12T16:00:00.000Z","path":"2017/06/13/é€šè¿‡é¡¹ç›®é€æ­¥æ·±å…¥äº†è§£Mybatis(äºŒ)/","text":"è½¬è½½è¯·åŠ¡å¿…æ³¨æ˜å‡ºå¤„ï¼ŒåŸåˆ›ä¸æ˜“ï¼ ç›¸å…³æ–‡ç« ï¼šé€šè¿‡é¡¹ç›®é€æ­¥æ·±å…¥äº†è§£Mybatis&lt;ä¸€&gt;æœ¬é¡¹ç›®å…¨éƒ¨ä»£ç åœ°å€ï¼šGithub-Mybatis Mybatis è§£å†³ jdbc ç¼–ç¨‹çš„é—®é¢˜1ã€ æ•°æ®åº“é“¾æ¥åˆ›å»ºã€é‡Šæ”¾é¢‘ç¹é€ æˆç³»ç»Ÿèµ„æºæµªè´¹ä»è€Œå½±å“ç³»ç»Ÿæ€§èƒ½ï¼Œå¦‚æœä½¿ç”¨æ•°æ®åº“é“¾æ¥æ± å¯è§£å†³æ­¤é—®é¢˜ã€‚ è§£å†³ï¼šåœ¨SqlMapConfig.xmlä¸­é…ç½®æ•°æ®é“¾æ¥æ± ï¼Œä½¿ç”¨è¿æ¥æ± ç®¡ç†æ•°æ®åº“é“¾æ¥ã€‚ 2ã€ Sqlè¯­å¥å†™åœ¨ä»£ç ä¸­é€ æˆä»£ç ä¸æ˜“ç»´æŠ¤ï¼Œå®é™…åº”ç”¨sqlå˜åŒ–çš„å¯èƒ½è¾ƒå¤§ï¼Œsqlå˜åŠ¨éœ€è¦æ”¹å˜javaä»£ç ã€‚ è§£å†³ï¼šå°†Sqlè¯­å¥é…ç½®åœ¨XXXXmapper.xmlæ–‡ä»¶ä¸­ä¸javaä»£ç åˆ†ç¦»ã€‚ 3ã€ å‘sqlè¯­å¥ä¼ å‚æ•°éº»çƒ¦ï¼Œå› ä¸ºsqlè¯­å¥çš„whereæ¡ä»¶ä¸ä¸€å®šï¼Œå¯èƒ½å¤šä¹Ÿå¯èƒ½å°‘ï¼Œå ä½ç¬¦éœ€è¦å’Œå‚æ•°ä¸€ä¸€å¯¹åº”ã€‚ è§£å†³ï¼šMybatisè‡ªåŠ¨å°†javaå¯¹è±¡æ˜ å°„è‡³sqlè¯­å¥ï¼Œé€šè¿‡statementä¸­çš„parameterTypeå®šä¹‰è¾“å…¥å‚æ•°çš„ç±»å‹ã€‚ 4ã€ å¯¹ç»“æœé›†è§£æéº»çƒ¦ï¼Œsqlå˜åŒ–å¯¼è‡´è§£æä»£ç å˜åŒ–ï¼Œä¸”è§£æå‰éœ€è¦éå†ï¼Œå¦‚æœèƒ½å°†æ•°æ®åº“è®°å½•å°è£…æˆpojoå¯¹è±¡è§£ææ¯”è¾ƒæ–¹ä¾¿ã€‚ è§£å†³ï¼šMybatisè‡ªåŠ¨å°†sqlæ‰§è¡Œç»“æœæ˜ å°„è‡³javaå¯¹è±¡ï¼Œé€šè¿‡statementä¸­çš„resultTypeå®šä¹‰è¾“å‡ºç»“æœçš„ç±»å‹ã€‚ Mybatis ä¸ Hibernate ä¸åŒMybatiså’Œhibernateä¸åŒï¼Œå®ƒä¸å®Œå…¨æ˜¯ä¸€ä¸ªORMæ¡†æ¶ï¼Œå› ä¸ºMyBatiséœ€è¦ç¨‹åºå‘˜è‡ªå·±ç¼–å†™Sqlè¯­å¥ï¼Œä¸è¿‡mybatiså¯ä»¥é€šè¿‡XMLæˆ–æ³¨è§£æ–¹å¼çµæ´»é…ç½®è¦è¿è¡Œçš„sqlè¯­å¥ï¼Œå¹¶å°†javaå¯¹è±¡å’Œsqlè¯­å¥æ˜ å°„ç”Ÿæˆæœ€ç»ˆæ‰§è¡Œçš„sqlï¼Œæœ€åå°†sqlæ‰§è¡Œçš„ç»“æœå†æ˜ å°„ç”Ÿæˆjavaå¯¹è±¡ã€‚ Mybatiså­¦ä¹ é—¨æ§›ä½ï¼Œç®€å•æ˜“å­¦ï¼Œç¨‹åºå‘˜ç›´æ¥ç¼–å†™åŸç”Ÿæ€sqlï¼Œå¯ä¸¥æ ¼æ§åˆ¶sqlæ‰§è¡Œæ€§èƒ½ï¼Œçµæ´»åº¦é«˜ï¼Œéå¸¸é€‚åˆå¯¹å…³ç³»æ•°æ®æ¨¡å‹è¦æ±‚ä¸é«˜çš„è½¯ä»¶å¼€å‘ï¼Œä¾‹å¦‚äº’è”ç½‘è½¯ä»¶ã€ä¼ä¸šè¿è¥ç±»è½¯ä»¶ç­‰ï¼Œå› ä¸ºè¿™ç±»è½¯ä»¶éœ€æ±‚å˜åŒ–é¢‘ç¹ï¼Œä¸€ä½†éœ€æ±‚å˜åŒ–è¦æ±‚æˆæœè¾“å‡ºè¿…é€Ÿã€‚ä½†æ˜¯çµæ´»çš„å‰ææ˜¯mybatisæ— æ³•åšåˆ°æ•°æ®åº“æ— å…³æ€§ï¼Œå¦‚æœéœ€è¦å®ç°æ”¯æŒå¤šç§æ•°æ®åº“çš„è½¯ä»¶åˆ™éœ€è¦è‡ªå®šä¹‰å¤šå¥—sqlæ˜ å°„æ–‡ä»¶ï¼Œå·¥ä½œé‡å¤§ã€‚ Hibernateå¯¹è±¡/å…³ç³»æ˜ å°„èƒ½åŠ›å¼ºï¼Œæ•°æ®åº“æ— å…³æ€§å¥½ï¼Œå¯¹äºå…³ç³»æ¨¡å‹è¦æ±‚é«˜çš„è½¯ä»¶ï¼ˆä¾‹å¦‚éœ€æ±‚å›ºå®šçš„å®šåˆ¶åŒ–è½¯ä»¶ï¼‰å¦‚æœç”¨hibernateå¼€å‘å¯ä»¥èŠ‚çœå¾ˆå¤šä»£ç ï¼Œæé«˜æ•ˆç‡ã€‚ä½†æ˜¯Hibernateçš„å­¦ä¹ é—¨æ§›é«˜ï¼Œè¦ç²¾é€šé—¨æ§›æ›´é«˜ï¼Œè€Œä¸”æ€ä¹ˆè®¾è®¡O/Ræ˜ å°„ï¼Œåœ¨æ€§èƒ½å’Œå¯¹è±¡æ¨¡å‹ä¹‹é—´å¦‚ä½•æƒè¡¡ï¼Œä»¥åŠæ€æ ·ç”¨å¥½Hibernateéœ€è¦å…·æœ‰å¾ˆå¼ºçš„ç»éªŒå’Œèƒ½åŠ›æ‰è¡Œã€‚ æ€»ä¹‹ï¼ŒæŒ‰ç…§ç”¨æˆ·çš„éœ€æ±‚åœ¨æœ‰é™çš„èµ„æºç¯å¢ƒä¸‹åªè¦èƒ½åšå‡ºç»´æŠ¤æ€§ã€æ‰©å±•æ€§è‰¯å¥½çš„è½¯ä»¶æ¶æ„éƒ½æ˜¯å¥½æ¶æ„ï¼Œæ‰€ä»¥æ¡†æ¶åªæœ‰é€‚åˆæ‰æ˜¯æœ€å¥½ã€‚ Mybatis å¼€å‘ daoä¸¤ç§æ–¹æ³• åŸå§‹ dao å¼€å‘æ–¹æ³•ï¼ˆç¨‹åºéœ€è¦ç¼–å†™ dao æ¥å£å’Œ dao å®ç°ç±»ï¼‰ï¼ˆæŒæ¡ï¼‰ Mybatis çš„ mapper æ¥å£ï¼ˆç›¸å½“äº dao æ¥å£ï¼‰ä»£ç†å¼€å‘æ–¹æ³•ï¼ˆæŒæ¡ï¼‰ éœ€æ±‚å°†ä¸‹è¾¹çš„åŠŸèƒ½å®ç°Daoï¼š æ ¹æ®ç”¨æˆ·idæŸ¥è¯¢ä¸€ä¸ªç”¨æˆ·ä¿¡æ¯ æ ¹æ®ç”¨æˆ·åç§°æ¨¡ç³ŠæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯åˆ—è¡¨ æ·»åŠ ç”¨æˆ·ä¿¡æ¯ Mybatis é…ç½®æ–‡ä»¶ SqlMapConfig.xml Sqlsession çš„ä½¿ç”¨èŒƒå›´SqlSession ä¸­å°è£…äº†å¯¹æ•°æ®åº“çš„æ“ä½œï¼Œå¦‚ï¼šæŸ¥è¯¢ã€æ’å…¥ã€æ›´æ–°ã€åˆ é™¤ç­‰ã€‚ é€šè¿‡ SqlSessionFactory åˆ›å»º SqlSessionï¼Œè€Œ SqlSessionFactory æ˜¯é€šè¿‡ SqlSessionFactoryBuilder è¿›è¡Œåˆ›å»ºã€‚ 1ã€SqlSessionFactoryBuilderSqlSessionFactoryBuilder ç”¨äºåˆ›å»º SqlSessionFacotyï¼ŒSqlSessionFacoty ä¸€æ—¦åˆ›å»ºå®Œæˆå°±ä¸éœ€è¦SqlSessionFactoryBuilder äº†ï¼Œå› ä¸º SqlSession æ˜¯é€šè¿‡ SqlSessionFactory ç”Ÿäº§ï¼Œæ‰€ä»¥å¯ä»¥å°†SqlSessionFactoryBuilder å½“æˆä¸€ä¸ªå·¥å…·ç±»ä½¿ç”¨ï¼Œæœ€ä½³ä½¿ç”¨èŒƒå›´æ˜¯æ–¹æ³•èŒƒå›´å³æ–¹æ³•ä½“å†…å±€éƒ¨å˜é‡ã€‚ 2ã€SqlSessionFactorySqlSessionFactory æ˜¯ä¸€ä¸ªæ¥å£ï¼Œæ¥å£ä¸­å®šä¹‰äº† openSession çš„ä¸åŒé‡è½½æ–¹æ³•ï¼ŒSqlSessionFactory çš„æœ€ä½³ä½¿ç”¨èŒƒå›´æ˜¯æ•´ä¸ªåº”ç”¨è¿è¡ŒæœŸé—´ï¼Œä¸€æ—¦åˆ›å»ºåå¯ä»¥é‡å¤ä½¿ç”¨ï¼Œé€šå¸¸ä»¥å•ä¾‹æ¨¡å¼ç®¡ç† SqlSessionFactoryã€‚ 3ã€SqlSessionSqlSession æ˜¯ä¸€ä¸ªé¢å‘ç”¨æˆ·çš„æ¥å£ï¼Œ sqlSession ä¸­å®šä¹‰äº†æ•°æ®åº“æ“ä½œï¼Œé»˜è®¤ä½¿ç”¨ DefaultSqlSession å®ç°ç±»ã€‚ æ‰§è¡Œè¿‡ç¨‹å¦‚ä¸‹ï¼š 1ï¼‰ã€ åŠ è½½æ•°æ®æºç­‰é…ç½®ä¿¡æ¯ Environment environment = configuration.getEnvironment(); 2ï¼‰ã€ åˆ›å»ºæ•°æ®åº“é“¾æ¥ 3ï¼‰ã€ åˆ›å»ºäº‹åŠ¡å¯¹è±¡ 4ï¼‰ã€ åˆ›å»ºExecutorï¼ŒSqlSession æ‰€æœ‰æ“ä½œéƒ½æ˜¯é€šè¿‡ Executor å®Œæˆï¼Œmybatis æºç å¦‚ä¸‹ï¼š 12345678910if (ExecutorType.BATCH == executorType) &#123; executor = newBatchExecutor(this, transaction); &#125; elseif (ExecutorType.REUSE == executorType) &#123; executor = new ReuseExecutor(this, transaction); &#125; else &#123; executor = new SimpleExecutor(this, transaction); &#125;if (cacheEnabled) &#123; executor = new CachingExecutor(executor, autoCommit); &#125; 5ï¼‰ã€ SqlSessionçš„å®ç°ç±»å³ DefaultSqlSessionï¼Œæ­¤å¯¹è±¡ä¸­å¯¹æ“ä½œæ•°æ®åº“å®è´¨ä¸Šç”¨çš„æ˜¯ Executor ç»“è®ºï¼šæ¯ä¸ªçº¿ç¨‹éƒ½åº”è¯¥æœ‰å®ƒè‡ªå·±çš„SqlSessionå®ä¾‹ã€‚SqlSessionçš„å®ä¾‹ä¸èƒ½å…±äº«ä½¿ç”¨ï¼Œå®ƒä¹Ÿæ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ã€‚å› æ­¤æœ€ä½³çš„èŒƒå›´æ˜¯è¯·æ±‚æˆ–æ–¹æ³•èŒƒå›´(å®šä¹‰å±€éƒ¨å˜é‡ä½¿ç”¨)ã€‚ç»å¯¹ä¸èƒ½å°†SqlSessionå®ä¾‹çš„å¼•ç”¨æ”¾åœ¨ä¸€ä¸ªç±»çš„é™æ€å­—æ®µæˆ–å®ä¾‹å­—æ®µä¸­ã€‚ æ‰“å¼€ä¸€ä¸ªSqlSessionï¼›ä½¿ç”¨å®Œæ¯•å°±è¦å…³é—­å®ƒã€‚é€šå¸¸æŠŠè¿™ä¸ªå…³é—­æ“ä½œæ”¾åˆ° finally å—ä¸­ä»¥ç¡®ä¿æ¯æ¬¡éƒ½èƒ½æ‰§è¡Œå…³é—­ã€‚å¦‚ä¸‹ï¼š 123456SqlSession session = sqlSessionFactory.openSession(); try &#123; // do work &#125; finally &#123; session.close();&#125; åŸå§‹ Dao å¼€å‘æ–¹æ³•æ€è·¯ï¼šéœ€è¦ç¨‹åºå‘˜ç¼–å†™ Dao æ¥å£å’Œ Dao å®ç°ç±»ï¼› éœ€è¦åœ¨ Dao å®ç°ç±»ä¸­æ³¨å…¥ SqlsessionFactory ï¼Œåœ¨æ–¹æ³•ä½“å†…é€šè¿‡ SqlsessionFactory åˆ›å»º Sqlsessionã€‚ Daoæ¥å£1234567891011public interface UserDao //daoæ¥å£ï¼Œç”¨æˆ·ç®¡ç†&#123; //æ ¹æ®idæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯ public User findUserById(int id) throws Exception; //æ·»åŠ ç”¨æˆ·ä¿¡æ¯ public void addUser(User user) throws Exception; //åˆ é™¤ç”¨æˆ·ä¿¡æ¯ public void deleteUser(int id) throws Exception;&#125; Dao å®ç°ç±»1234567891011121314151617181920212223242526272829303132333435363738394041public class UserDaoImpl implements UserDao //daoæ¥å£å®ç°ç±»&#123; //éœ€è¦åœ¨ Dao å®ç°ç±»ä¸­æ³¨å…¥ SqlsessionFactory //è¿™é‡Œé€šè¿‡æ„é€ æ–¹æ³•æ³¨å…¥ private SqlSessionFactory sqlSessionFactory; public UserDaoImpl(SqlSessionFactory sqlSessionFactory) &#123; this.sqlSessionFactory = sqlSessionFactory; &#125; @Override public User findUserById(int id) throws Exception &#123; //åœ¨æ–¹æ³•ä½“å†…é€šè¿‡ SqlsessionFactory åˆ›å»º Sqlsession SqlSession sqlSession = sqlSessionFactory.openSession(); User user = sqlSession.selectOne(\"test.findUserById\", id); sqlSession.close(); return user; &#125; @Override public void insertUser(User user) throws Exception &#123; //åœ¨æ–¹æ³•ä½“å†…é€šè¿‡ SqlsessionFactory åˆ›å»º Sqlsession SqlSession sqlSession = sqlSessionFactory.openSession(); //æ‰§è¡Œæ’å…¥çš„æ“ä½œ sqlSession.insert(\"test.insetrUser\", user); //æäº¤äº‹åŠ¡ sqlSession.commit(); //é‡Šæ”¾èµ„æº sqlSession.close(); &#125; @Override public void deleteUser(int id) throws Exception &#123; //åœ¨æ–¹æ³•ä½“å†…é€šè¿‡ SqlsessionFactory åˆ›å»º Sqlsession SqlSession sqlSession = sqlSessionFactory.openSession(); sqlSession.delete(\"test.deleteUserById\", id); //æäº¤äº‹åŠ¡ sqlSession.commit(); sqlSession.close(); &#125;&#125; æµ‹è¯•12345678910111213141516171819202122232425public class UserDaoImplTest&#123; private SqlSessionFactory sqlSessionFactory; //æ­¤æ–¹æ³•æ˜¯åœ¨ testFindUserById æ–¹æ³•ä¹‹å‰æ‰§è¡Œçš„ @Before public void setup() throws Exception &#123; //åˆ›å»ºsqlSessionFactory //Mybatis é…ç½®æ–‡ä»¶ String resource = \"SqlMapConfig.xml\"; //å¾—åˆ°é…ç½®æ–‡ä»¶æµ InputStream inputStream = Resources.getResourceAsStream(resource); //åˆ›å»ºä¼šè¯å·¥å‚,ä¼ å…¥Mybatisçš„é…ç½®æ–‡ä»¶ä¿¡æ¯ sqlSessionFactory = new SqlSessionFactoryBuilder().build(inputStream); &#125; @Test public void testFindUserById() throws Exception &#123; //åˆ›å»ºUserDaoçš„å¯¹è±¡ UserDao userDao = new UserDaoImpl(sqlSessionFactory); //è°ƒç”¨UserDaoæ–¹æ³• User user = userDao.findUserById(1); System.out.println(user); &#125;&#125; é€šè¿‡idæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯æµ‹è¯•ç»“æœå¦‚ä¸‹ï¼šï¼ˆå…¶ä»–çš„å¯ä»¥è‡ªå·±åœ¨å†™æµ‹è¯•ä»£ç ï¼ŒåŸç†ç±»ä¼¼ï¼‰ é—®é¢˜åŸå§‹Daoå¼€å‘ä¸­å­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š Daoæ–¹æ³•ä½“å­˜åœ¨é‡å¤ä»£ç ï¼šé€šè¿‡ SqlSessionFactory åˆ›å»º SqlSessionï¼Œè°ƒç”¨ SqlSession çš„æ•°æ®åº“æ“ä½œæ–¹æ³• è°ƒç”¨ sqlSession çš„æ•°æ®åº“æ“ä½œæ–¹æ³•éœ€è¦æŒ‡å®š statement çš„i dï¼Œè¿™é‡Œå­˜åœ¨ç¡¬ç¼–ç ï¼Œä¸å¾—äºå¼€å‘ç»´æŠ¤ã€‚ è°ƒç”¨ sqlSession çš„æ•°æ®åº“æ“ä½œæ–¹æ³•æ—¶ä¼ å…¥çš„å˜é‡ï¼Œç”±äº sqlsession æ–¹æ³•ä½¿ç”¨æ³›å‹ï¼Œå³ä½¿å˜é‡ç±»å‹ä¼ å…¥é”™è¯¯ï¼Œåœ¨ç¼–è¯‘é˜¶æ®µä¹Ÿä¸æŠ¥é”™ï¼Œä¸åˆ©äºç¨‹åºå‘˜å¼€å‘ã€‚ Mybatis çš„ mapper æ¥å£æ€è·¯ç¨‹åºå‘˜éœ€è¦ç¼–å†™ mapper.xml æ˜ å°„æ–‡ä»¶ åªéœ€è¦ç¨‹åºå‘˜ç¼–å†™Mapperæ¥å£ï¼ˆç›¸å½“äºDaoæ¥å£ï¼‰ï¼Œéœ€éµå¾ªä¸€äº›å¼€å‘è§„èŒƒï¼Œmybatis å¯ä»¥è‡ªåŠ¨ç”Ÿæˆ mapper æ¥å£ç±»ä»£ç†å¯¹è±¡ã€‚ å¼€å‘è§„èŒƒï¼š åœ¨ mapper.xml ä¸­ namespace ç­‰äº mapper æ¥å£åœ°å€ 1&lt;mapper namespace=\"cn.zhisheng.mybatis.mapper.UserMapper\"&gt;&lt;/mapper&gt; åœ¨ xxxmapper.java æ¥å£ä¸­çš„æ–¹æ³•åè¦ä¸ xxxMapper.xml ä¸­ statement çš„ id ä¸€è‡´ã€‚ åœ¨ xxxmapper.java æ¥å£ä¸­çš„è¾“å…¥å‚æ•°ç±»å‹è¦ä¸ xxxMapper.xml ä¸­ statement çš„ parameterType æŒ‡å®šçš„å‚æ•°ç±»å‹ä¸€è‡´ã€‚ åœ¨ xxxmapper.java æ¥å£ä¸­çš„è¿”å›å€¼ç±»å‹è¦ä¸ xxxMapper.xml ä¸­ statement çš„ resultType æŒ‡å®šçš„ç±»å‹ä¸€è‡´ã€‚ UserMapper.java 12//æ ¹æ®idæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯ public User findUserById(int id) throws Exception; UserMapper.xml 123&lt;select id=\"findUserById\" parameterType=\"int\" resultType=\"cn.zhisheng.mybatis.po.User\"&gt; select * from user where id = #&#123;1&#125;&lt;/select&gt; æ€»ç»“ï¼šä»¥ä¸Šçš„å¼€å‘è§„èŒƒä¸»è¦æ˜¯å¯¹ä¸‹è¾¹çš„ä»£ç è¿›è¡Œç»Ÿä¸€çš„ç”Ÿæˆï¼š 1234User user = sqlSession.selectOne(\"test.findUserById\", id);sqlSession.insert(\"test.insetrUser\", user);sqlSession.delete(\"test.deleteUserById\", id);List&lt;User&gt; list = sqlSession.selectList(\"test.findUserByName\", username); æµ‹è¯•æµ‹è¯•ä¹‹å‰è®°å¾—åœ¨ SqlMapConfig.xml æ–‡ä»¶ä¸­æ·»åŠ åŠ è½½æ˜ å°„æ–‡ä»¶ UserMapper.xmlï¼š 1&lt;mapper resource=\"mapper/UserMapper.xml\"/&gt; æµ‹è¯•ä»£ç ï¼š 1234567891011121314151617181920212223242526public class UserMapperTest&#123; private SqlSessionFactory sqlSessionFactory; //æ­¤æ–¹æ³•æ˜¯åœ¨ testFindUserById æ–¹æ³•ä¹‹å‰æ‰§è¡Œçš„ @Before public void setup() throws Exception &#123; //åˆ›å»ºsqlSessionFactory //Mybatis é…ç½®æ–‡ä»¶ String resource = \"SqlMapConfig.xml\"; //å¾—åˆ°é…ç½®æ–‡ä»¶æµ InputStream inputStream = Resources.getResourceAsStream(resource); //åˆ›å»ºä¼šè¯å·¥å‚,ä¼ å…¥Mybatisçš„é…ç½®æ–‡ä»¶ä¿¡æ¯ sqlSessionFactory = new SqlSessionFactoryBuilder().build(inputStream); &#125; @Test public void testFindUserById() throws Exception &#123; SqlSession sqlSession = sqlSessionFactory.openSession(); //åˆ›å»ºusermapperå¯¹è±¡,mybatisè‡ªåŠ¨ç”Ÿæˆä»£ç†å¯¹è±¡ UserMapper userMapper = sqlSession.getMapper(UserMapper.class); //è°ƒç”¨UserMapperçš„æ–¹æ³• User user = userMapper.findUserById(1); System.out.println(user); &#125;&#125; é€šè¿‡idæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯æµ‹è¯•ç»“æœå¦‚ä¸‹ï¼šï¼ˆå…¶ä»–çš„è¯·è‡ªå·±æ ¹æ®ä¸Šä¸‹æ–‡å†™æµ‹è¯•ä»£ç ï¼Œæˆ–è€…å»çœ‹æˆ‘ Github-Mybatiså­¦ä¹ ç¬”è®° ä¸Šçœ‹æˆ‘è¿™ä¸ªé¡¹ç›®çš„å…¨éƒ¨ä»£ç ï¼‰ é€šè¿‡å§“åæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯ï¼š ä»£ç†å¯¹è±¡å†…éƒ¨è°ƒç”¨ selectOne æˆ–è€… selectList å¦‚æœ mapper æ–¹æ³•è¿”å›å•ä¸ª pojo å¯¹è±¡ï¼ˆéé›†åˆå¯¹è±¡ï¼‰ï¼Œä»£ç†å¯¹è±¡å†…éƒ¨é€šè¿‡ selectOne æŸ¥è¯¢æ•°æ®åº“ å¦‚æœ mapper æ–¹æ³•è¿”å›é›†åˆå¯¹è±¡ï¼Œä»£ç†å¯¹è±¡å†…éƒ¨é€šè¿‡ selectList æŸ¥è¯¢æ•°æ®åº“ mapperæ¥å£æ–¹æ³•å‚æ•°åªèƒ½æœ‰ä¸€ä¸ªæ˜¯å¦å½±å“ç³»ç»Ÿå¼€å‘ mapper æ¥å£æ–¹æ³•å‚æ•°åªèƒ½æœ‰ä¸€ä¸ªï¼Œç³»ç»Ÿæ˜¯å¦ä¸åˆ©äºç»´æŠ¤ï¼Ÿ ç³»ç»Ÿæ¡†æ¶ä¸­ï¼Œdaoå±‚çš„ä»£ç æ˜¯è¢«ä¸šåŠ¡å±‚å…¬ç”¨çš„ã€‚ å³ä½¿ mapper æ¥å£åªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œå¯ä»¥ä½¿ç”¨åŒ…è£…ç±»å‹çš„ pojo æ»¡è¶³ä¸åŒçš„ä¸šåŠ¡æ–¹æ³•çš„éœ€æ±‚ã€‚ æ³¨æ„ï¼šæŒä¹…å±‚æ–¹æ³•çš„å‚æ•°å¯ä»¥åŒ…è£…ç±»å‹ã€mapâ€¦. ï¼Œserviceæ–¹æ³•ä¸­ä¸å»ºè®®ä½¿ç”¨åŒ…è£…ç±»å‹ã€‚ï¼ˆä¸åˆ©äºä¸šåŠ¡å±‚çš„å¯æ‰©å±•æ€§ï¼‰ SqlMapConfig.xml æ–‡ä»¶Mybatis çš„å…¨å±€é…ç½®å˜é‡ï¼Œé…ç½®å†…å®¹å’Œé¡ºåºå¦‚ä¸‹ï¼š propertiesï¼ˆå±æ€§ï¼‰ settingsï¼ˆå…¨å±€é…ç½®å‚æ•°ï¼‰ typeAliasesï¼ˆç±»å‹åˆ«åï¼‰ typeHandlersï¼ˆç±»å‹å¤„ç†å™¨ï¼‰ objectFactoryï¼ˆå¯¹è±¡å·¥å‚ï¼‰ pluginsï¼ˆæ’ä»¶ï¼‰ environmentsï¼ˆç¯å¢ƒé›†åˆå±æ€§å¯¹è±¡ï¼‰ â€‹ environmentï¼ˆç¯å¢ƒå­å±æ€§å¯¹è±¡ï¼‰ â€‹ transactionManagerï¼ˆäº‹åŠ¡ç®¡ç†ï¼‰ â€‹ dataSourceï¼ˆæ•°æ®æºï¼‰ mappersï¼ˆæ˜ å°„å™¨ï¼‰ properties å±æ€§éœ€æ±‚ï¼šå°†æ•°æ®åº“è¿æ¥å‚æ•°å•ç‹¬é…ç½®åœ¨ db.properties ä¸­ï¼Œåªéœ€è¦åœ¨ SqlMapConfig.xml ä¸­åŠ è½½è¯¥é…ç½®æ–‡ä»¶ db.properties çš„å±æ€§å€¼ã€‚åœ¨ SqlMapConfig.xml ä¸­å°±ä¸éœ€è¦ç›´æ¥å¯¹æ•°æ®åº“çš„è¿æ¥å‚æ•°è¿›è¡Œç¡¬ç¼–ç äº†ã€‚æ–¹ä¾¿ä»¥åå¯¹å‚æ•°è¿›è¡Œç»Ÿä¸€çš„ç®¡ç†ï¼Œå…¶ä»–çš„xmlæ–‡ä»¶å¯ä»¥å¼•ç”¨è¯¥ db.properties ã€‚ db.properties 1234jdbc.driver=com.mysql.jdbc.Driverjdbc.url=jdbc:mysql://localhost:3306/mybatis_test?characterEncoding=utf-8jdbc.username=rootjdbc.password=root é‚£ä¹ˆ SqlMapConfig.xml ä¸­çš„é…ç½®å˜æˆå¦‚ä¸‹ï¼š 12345678910111213141516&lt;!--åŠ è½½é…ç½®æ–‡ä»¶--&gt; &lt;properties resource=\"db.properties\"&gt;&lt;/properties&gt; &lt;!-- å’Œspringæ•´åˆå environmentsé…ç½®å°†åºŸé™¤--&gt; &lt;environments default=\"development\"&gt; &lt;environment id=\"development\"&gt; &lt;!-- ä½¿ç”¨jdbcäº‹åŠ¡ç®¡ç†,äº‹åŠ¡ç”± Mybatis æ§åˆ¶--&gt; &lt;transactionManager type=\"JDBC\" /&gt; &lt;!-- æ•°æ®åº“è¿æ¥æ± --&gt; &lt;dataSource type=\"POOLED\"&gt; &lt;property name=\"driver\" value=\"$&#123;jdbc.driver&#125;\" /&gt; &lt;property name=\"url\" value=\"$&#123;jdbc.url&#125;\" /&gt; &lt;property name=\"username\" value=\"$&#123;jdbc.username&#125;\" /&gt; &lt;property name=\"password\" value=\"$&#123;jdbc.password&#125;\" /&gt; &lt;/dataSource&gt; &lt;/environment&gt; &lt;/environments&gt; é…ç½®å®Œæˆåæˆ‘ä»¬æµ‹è¯•ä¸€ä¸‹æ˜¯å¦èƒ½å¤Ÿå’Œåˆšæ‰ä¸€æ ·çš„èƒ½å¤ŸæˆåŠŸå‘¢ï¼Ÿé‚£ä¹ˆæˆ‘å°±å…ˆåœ¨db.propertiesä¸­æŠŠæ•°æ®åº“å¯†ç æ•…æ„æ”¹é”™ï¼Œçœ‹æ˜¯å¦æ˜¯æ­£ç¡®çš„ï¼Ÿä¸å‡ºæ„å¤–çš„è¯æ˜¯ä¼šæŠ¥é”™çš„ã€‚ æ³¨æ„ï¼š MyBatis å°†æŒ‰ç…§ä¸‹é¢çš„é¡ºåºæ¥åŠ è½½å±æ€§ï¼š åœ¨ properties å…ƒç´ ä½“å†…å®šä¹‰çš„å±æ€§é¦–å…ˆè¢«è¯»å–ã€‚ ç„¶åä¼šè¯»å– properties å…ƒç´ ä¸­ resource æˆ– url åŠ è½½çš„å±æ€§ï¼Œå®ƒä¼šè¦†ç›–å·²è¯»å–çš„åŒåå±æ€§ã€‚ æœ€åè¯»å– parameterType ä¼ é€’çš„å±æ€§ï¼Œå®ƒä¼šè¦†ç›–å·²è¯»å–çš„åŒåå±æ€§ã€‚ å› æ­¤ï¼Œé€šè¿‡parameterTypeä¼ é€’çš„å±æ€§å…·æœ‰æœ€é«˜ä¼˜å…ˆçº§ï¼Œresourceæˆ– url åŠ è½½çš„å±æ€§æ¬¡ä¹‹ï¼Œæœ€ä½ä¼˜å…ˆçº§çš„æ˜¯ properties å…ƒç´ ä½“å†…å®šä¹‰çš„å±æ€§ã€‚ å»ºè®®ï¼š ä¸è¦åœ¨ properties å…ƒç´ ä½“å†…æ·»åŠ ä»»ä½•å±æ€§å€¼ï¼Œåªå°†å±æ€§å€¼å®šä¹‰åœ¨ db.properties æ–‡ä»¶ä¹‹ä¸­ã€‚ åœ¨ db.properties æ–‡ä»¶ä¹‹ä¸­å®šä¹‰çš„å±æ€§åè¦æœ‰ä¸€å®šçš„ç‰¹æ®Šæ€§ã€‚å¦‚ xxx.xxx.xxx settingsï¼ˆå…¨å±€é…ç½®å‚æ•°ï¼‰Mybatis æ¡†æ¶åœ¨è¿è¡Œæ—¶å¯ä»¥è°ƒæ•´ä¸€äº›è¿è¡Œå‚æ•° æ¯”å¦‚ï¼šå¼€å¯äºŒçº§ç¼“å­˜ã€å¼€å¯å»¶è¿ŸåŠ è½½ã€‚ã€‚ã€‚ typeAliasesï¼ˆç±»å‹åˆ«åï¼‰éœ€æ±‚ï¼š åœ¨mapper.xmlä¸­ï¼Œå®šä¹‰å¾ˆå¤šçš„statementï¼Œstatementéœ€è¦parameterTypeæŒ‡å®šè¾“å…¥å‚æ•°çš„ç±»å‹ã€éœ€è¦resultTypeæŒ‡å®šè¾“å‡ºç»“æœçš„æ˜ å°„ç±»å‹ã€‚ å¦‚æœåœ¨æŒ‡å®šç±»å‹æ—¶è¾“å…¥ç±»å‹å…¨è·¯å¾„ï¼Œä¸æ–¹ä¾¿è¿›è¡Œå¼€å‘ï¼Œå¯ä»¥é’ˆå¯¹parameterTypeæˆ–resultTypeæŒ‡å®šçš„ç±»å‹å®šä¹‰ä¸€äº›åˆ«åï¼Œåœ¨mapper.xmlä¸­é€šè¿‡åˆ«åå®šä¹‰ï¼Œæ–¹ä¾¿å¼€å‘ã€‚ Mybatisæ”¯æŒçš„åˆ«åï¼š åˆ«å æ˜ å°„çš„ç±»å‹ _byte byte _long long _short short _int int _integer int _double double _float float _boolean boolean string String byte Byte long Long short Short int Integer integer Integer double Double float Float boolean Boolean date Date decimal BigDecimal bigdecimal BigDecimal è‡ªå®šä¹‰åˆ«åï¼š åœ¨ SqlMapConfig.xml ä¸­é…ç½®ï¼š(è®¾ç½®åˆ«å) 1234567&lt;typeAliases&gt; &lt;!-- å•ä¸ªåˆ«åå®šä¹‰ --&gt; &lt;typeAlias alias=\"user\" type=\"cn.zhisheng.mybatis.po.User\"/&gt; &lt;!-- æ‰¹é‡åˆ«åå®šä¹‰ï¼Œæ‰«ææ•´ä¸ªåŒ…ä¸‹çš„ç±»ï¼Œåˆ«åä¸ºç±»åï¼ˆé¦–å­—æ¯å¤§å†™æˆ–å°å†™éƒ½å¯ä»¥ï¼‰ --&gt; &lt;package name=\"cn.zhisheng.mybatis.po\"/&gt; &lt;package name=\"å…¶å®ƒåŒ…\"/&gt;&lt;/typeAliases&gt; åœ¨ UserMapper.xml ä¸­å¼•ç”¨åˆ«åï¼š( resultType ä¸º user ) 123&lt;select id=\"findUserById\" parameterType=\"int\" resultType=\"user\"&gt; select * from user where id = #&#123;id&#125;&lt;/select&gt; æµ‹è¯•ç»“æœï¼š typeHandlersï¼ˆç±»å‹å¤„ç†å™¨ï¼‰mybatisä¸­é€šè¿‡typeHandlerså®Œæˆjdbcç±»å‹å’Œjavaç±»å‹çš„è½¬æ¢ã€‚ é€šå¸¸æƒ…å†µä¸‹ï¼Œmybatisæä¾›çš„ç±»å‹å¤„ç†å™¨æ»¡è¶³æ—¥å¸¸éœ€è¦ï¼Œä¸éœ€è¦è‡ªå®šä¹‰. mybatisæ”¯æŒç±»å‹å¤„ç†å™¨ï¼š ç±»å‹å¤„ç†å™¨ Javaç±»å‹ JDBCç±»å‹ BooleanTypeHandler Booleanï¼Œboolean ä»»ä½•å…¼å®¹çš„å¸ƒå°”å€¼ ByteTypeHandler Byteï¼Œbyte ä»»ä½•å…¼å®¹çš„æ•°å­—æˆ–å­—èŠ‚ç±»å‹ ShortTypeHandler Shortï¼Œshort ä»»ä½•å…¼å®¹çš„æ•°å­—æˆ–çŸ­æ•´å‹ IntegerTypeHandler Integerï¼Œint ä»»ä½•å…¼å®¹çš„æ•°å­—å’Œæ•´å‹ LongTypeHandler Longï¼Œlong ä»»ä½•å…¼å®¹çš„æ•°å­—æˆ–é•¿æ•´å‹ FloatTypeHandler Floatï¼Œfloat ä»»ä½•å…¼å®¹çš„æ•°å­—æˆ–å•ç²¾åº¦æµ®ç‚¹å‹ DoubleTypeHandler Doubleï¼Œdouble ä»»ä½•å…¼å®¹çš„æ•°å­—æˆ–åŒç²¾åº¦æµ®ç‚¹å‹ BigDecimalTypeHandler BigDecimal ä»»ä½•å…¼å®¹çš„æ•°å­—æˆ–åè¿›åˆ¶å°æ•°ç±»å‹ StringTypeHandler String CHARå’ŒVARCHARç±»å‹ ClobTypeHandler String CLOBå’ŒLONGVARCHARç±»å‹ NStringTypeHandler String NVARCHARå’ŒNCHARç±»å‹ NClobTypeHandler String NCLOBç±»å‹ ByteArrayTypeHandler byte[] ä»»ä½•å…¼å®¹çš„å­—èŠ‚æµç±»å‹ BlobTypeHandler byte[] BLOBå’ŒLONGVARBINARYç±»å‹ DateTypeHandler Dateï¼ˆjava.utilï¼‰ TIMESTAMPç±»å‹ DateOnlyTypeHandler Dateï¼ˆjava.utilï¼‰ DATEç±»å‹ TimeOnlyTypeHandler Dateï¼ˆjava.utilï¼‰ TIMEç±»å‹ SqlTimestampTypeHandler Timestampï¼ˆjava.sqlï¼‰ TIMESTAMPç±»å‹ SqlDateTypeHandler Dateï¼ˆjava.sqlï¼‰ DATEç±»å‹ SqlTimeTypeHandler Timeï¼ˆjava.sqlï¼‰ TIMEç±»å‹ ObjectTypeHandler ä»»æ„ å…¶ä»–æˆ–æœªæŒ‡å®šç±»å‹ EnumTypeHandler Enumerationç±»å‹ VARCHAR-ä»»ä½•å…¼å®¹çš„å­—ç¬¦ä¸²ç±»å‹ï¼Œä½œä¸ºä»£ç å­˜å‚¨ï¼ˆè€Œä¸æ˜¯ç´¢å¼•ï¼‰ã€‚ mappersï¼ˆæ˜ å°„å™¨ï¼‰ ä½¿ç”¨ç›¸å¯¹äºç±»è·¯å¾„çš„èµ„æºï¼Œå¦‚ï¼š ä½¿ç”¨å®Œå…¨é™å®šè·¯å¾„å¦‚ï¼š ä½¿ç”¨ mapper æ¥å£ç±»è·¯å¾„ å¦‚ï¼š æ³¨æ„ï¼šæ­¤ç§æ–¹æ³•è¦æ±‚ mapper æ¥å£åç§°å’Œ mapper æ˜ å°„æ–‡ä»¶åç§°ç›¸åŒï¼Œä¸”æ”¾åœ¨åŒä¸€ä¸ªç›®å½•ä¸­ã€‚ æ³¨å†ŒæŒ‡å®šåŒ…ä¸‹çš„æ‰€æœ‰mapperæ¥å£å¦‚ï¼šæ³¨æ„ï¼šæ­¤ç§æ–¹æ³•è¦æ±‚ mapper æ¥å£åç§°å’Œ mapper æ˜ å°„æ–‡ä»¶åç§°ç›¸åŒï¼Œä¸”æ”¾åœ¨åŒä¸€ä¸ªç›®å½•ä¸­ã€‚ Mapper.xml æ˜ å°„æ–‡ä»¶Mapper.xmlæ˜ å°„æ–‡ä»¶ä¸­å®šä¹‰äº†æ“ä½œæ•°æ®åº“çš„sqlï¼Œæ¯ä¸ªsqlæ˜¯ä¸€ä¸ªstatementï¼Œæ˜ å°„æ–‡ä»¶æ˜¯mybatisçš„æ ¸å¿ƒã€‚ è¾“å…¥æ˜ å°„é€šè¿‡ parameterType æŒ‡å®šè¾“å…¥å‚æ•°çš„ç±»å‹ï¼Œç±»å‹å¯ä»¥æ˜¯ç®€å•ç±»å‹ã€hashmapã€pojoçš„åŒ…è£…ç±»å‹ã€‚ ä¼ é€’ pojo åŒ…è£…å¯¹è±¡ ï¼ˆé‡ç‚¹ï¼‰ å¼€å‘ä¸­é€šè¿‡pojoä¼ é€’æŸ¥è¯¢æ¡ä»¶ ï¼ŒæŸ¥è¯¢æ¡ä»¶æ˜¯ç»¼åˆçš„æŸ¥è¯¢æ¡ä»¶ï¼Œä¸ä»…åŒ…æ‹¬ç”¨æˆ·æŸ¥è¯¢æ¡ä»¶è¿˜åŒ…æ‹¬å…¶å®ƒçš„æŸ¥è¯¢æ¡ä»¶ï¼ˆæ¯”å¦‚å°†ç”¨æˆ·è´­ä¹°å•†å“ä¿¡æ¯ä¹Ÿä½œä¸ºæŸ¥è¯¢æ¡ä»¶ï¼‰ï¼Œè¿™æ—¶å¯ä»¥ä½¿ç”¨åŒ…è£…å¯¹è±¡ä¼ é€’è¾“å…¥å‚æ•°ã€‚ å®šä¹‰åŒ…è£…å¯¹è±¡ å®šä¹‰åŒ…è£…å¯¹è±¡å°†æŸ¥è¯¢æ¡ä»¶(pojo)ä»¥ç±»ç»„åˆçš„æ–¹å¼åŒ…è£…èµ·æ¥ã€‚ UserQueryVo.java 123456789101112131415public class UserQueryVo //ç”¨æˆ·åŒ…è£…ç±»å‹&#123; //åœ¨è¿™é‡ŒåŒ…è£…æ‰€éœ€è¦çš„æŸ¥è¯¢æ¡ä»¶ //ç”¨æˆ·æŸ¥è¯¢æ¡ä»¶ private UserCustom userCustom; public UserCustom getUserCustom() &#123; return userCustom; &#125; public void setUserCustom(UserCustom userCustom) &#123; this.userCustom = userCustom; &#125; //è¿˜å¯ä»¥åŒ…è£…å…¶ä»–çš„æŸ¥è¯¢æ¡ä»¶ï¼Œæ¯”å¦‚è®¢å•ã€å•†å“&#125; UserCustomer.java 1234public class UserCustom extends User //ç”¨æˆ·çš„æ‰©å±•ç±»&#123; //å¯ä»¥æ‰©å±•ç”¨æˆ·çš„ä¿¡æ¯&#125; UserMapper.xml æ–‡ä»¶ 1234567&lt;!--ç”¨æˆ·ä¿¡æ¯ç»¼åˆæŸ¥è¯¢ #&#123;userCustom.sex&#125; :å–å‡ºpojoåŒ…è£…å¯¹è±¡ä¸­çš„æ€§åˆ«å€¼ #&#123;userCustom.username&#125; :å–å‡ºpojoåŒ…è£…å¯¹è±¡ä¸­çš„ç”¨æˆ·åç§° --&gt; &lt;select id=\"findUserList\" parameterType=\"cn.zhisheng.mybatis.po.UserQueryVo\" resultType=\"cn.zhisheng.mybatis.po.UserCustom\"&gt; select * from user where user.sex = #&#123;userCustom.sex&#125; and user.username like '%$&#123;userCustom.username&#125;%' &lt;/select&gt; UserMapper.java 12//ç”¨æˆ·ä¿¡æ¯ç»¼åˆæŸ¥è¯¢public List&lt;UserCustom&gt; findUserList(UserQueryVo userQueryVo) throws Exception; æµ‹è¯•ä»£ç  1234567891011121314151617//æµ‹è¯•ç”¨æˆ·ä¿¡æ¯ç»¼åˆæŸ¥è¯¢ @Test public void testFindUserList() throws Exception &#123; SqlSession sqlSession = sqlSessionFactory.openSession(); //åˆ›å»ºusermapperå¯¹è±¡,mybatisè‡ªåŠ¨ç”Ÿæˆä»£ç†å¯¹è±¡ UserMapper userMapper = sqlSession.getMapper(UserMapper.class); //åˆ›å»ºåŒ…è£…å¯¹è±¡ï¼Œè®¾ç½®æŸ¥è¯¢æ¡ä»¶ UserQueryVo userQueryVo = new UserQueryVo(); UserCustom userCustom = new UserCustom(); userCustom.setSex(\"ç”·\"); userCustom.setUsername(\"å¼ å°æ˜\"); userQueryVo.setUserCustom(userCustom); //è°ƒç”¨UserMapperçš„æ–¹æ³• List&lt;UserCustom&gt; list = userMapper.findUserList(userQueryVo); System.out.println(list); &#125; æµ‹è¯•ç»“æœ è¾“å‡ºæ˜ å°„ resultType ä½¿ç”¨ resultType è¿›è¡Œè¾“å‡ºæ˜ å°„ï¼Œåªæœ‰æŸ¥è¯¢å‡ºæ¥çš„åˆ—åå’Œ pojo ä¸­çš„å±æ€§åä¸€è‡´ï¼Œè¯¥åˆ—æ‰å¯ä»¥æ˜ å°„æˆåŠŸã€‚ å¦‚æœæŸ¥è¯¢å‡ºæ¥çš„åˆ—åå’Œ pojo ä¸­çš„å±æ€§åå…¨éƒ¨ä¸ä¸€è‡´ï¼Œæ²¡æœ‰åˆ›å»º pojo å¯¹è±¡ã€‚ åªè¦æŸ¥è¯¢å‡ºæ¥çš„åˆ—åå’Œ pojo ä¸­çš„å±æ€§æœ‰ä¸€ä¸ªä¸€è‡´ï¼Œå°±ä¼šåˆ›å»º pojo å¯¹è±¡ã€‚ è¾“å‡ºç®€å•ç±»å‹éœ€æ±‚ï¼šç”¨æˆ·ä¿¡æ¯ç»¼åˆæŸ¥è¯¢åˆ—è¡¨æ€»æ•°ï¼Œé€šè¿‡æŸ¥è¯¢æ€»æ•°å’Œä¸Šè¾¹ç”¨æˆ·ç»¼åˆæŸ¥è¯¢åˆ—è¡¨æ‰å¯ä»¥å®ç°åˆ†é¡µ å®ç°ï¼š 1234567&lt;!--ç”¨æˆ·ä¿¡æ¯ç»¼åˆæŸ¥è¯¢æ€»æ•° parameterType:æŒ‡å®šè¾“å…¥çš„ç±»å‹å’ŒfindUserListä¸€æ · resultType:è¾“å‡ºç»“æœç±»å‹ä¸º int --&gt; &lt;select id=\"findUserCount\" parameterType=\"cn.zhisheng.mybatis.po.UserQueryVo\" resultType=\"int\"&gt; select count(*) from user where user.sex = #&#123;userCustom.sex&#125; and user.username like '%$&#123;userCustom.username&#125;%' &lt;/select&gt; 12//ç”¨æˆ·ä¿¡æ¯ç»¼åˆæŸ¥è¯¢æ€»æ•° public int findUserCount(UserQueryVo userQueryVo) throws Exception; 12345678910111213141516//æµ‹è¯•ç”¨æˆ·ä¿¡æ¯ç»¼åˆæŸ¥è¯¢æ€»æ•° @Test public void testFindUserCount() throws Exception &#123; SqlSession sqlSession = sqlSessionFactory.openSession(); //åˆ›å»ºusermapperå¯¹è±¡,mybatisè‡ªåŠ¨ç”Ÿæˆä»£ç†å¯¹è±¡ UserMapper userMapper = sqlSession.getMapper(UserMapper.class); //åˆ›å»ºåŒ…è£…å¯¹è±¡ï¼Œè®¾ç½®æŸ¥è¯¢æ¡ä»¶ UserQueryVo userQueryVo = new UserQueryVo(); UserCustom userCustom = new UserCustom(); userCustom.setSex(\"ç”·\"); userCustom.setUsername(\"å¼ å°æ˜\"); userQueryVo.setUserCustom(userCustom); //è°ƒç”¨UserMapperçš„æ–¹æ³• System.out.println(userMapper.findUserCount(userQueryVo)); &#125; æ³¨æ„ï¼šæŸ¥è¯¢å‡ºæ¥çš„ç»“æœé›†åªæœ‰ä¸€è¡Œä¸”ä¸€åˆ—ï¼Œå¯ä»¥ä½¿ç”¨ç®€å•ç±»å‹è¿›è¡Œè¾“å‡ºæ˜ å°„ã€‚ è¾“å‡ºpojoå¯¹è±¡å’Œpojoåˆ—è¡¨ ä¸ç®¡æ˜¯è¾“å‡ºçš„pojoå•ä¸ªå¯¹è±¡è¿˜æ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼ˆlistä¸­åŒ…æ‹¬pojoï¼‰ï¼Œåœ¨mapper.xmlä¸­resultTypeæŒ‡å®šçš„ç±»å‹æ˜¯ä¸€æ ·çš„ã€‚ åœ¨mapper.javaæŒ‡å®šçš„æ–¹æ³•è¿”å›å€¼ç±»å‹ä¸ä¸€æ ·ï¼š 1ã€è¾“å‡ºå•ä¸ªpojoå¯¹è±¡ï¼Œæ–¹æ³•è¿”å›å€¼æ˜¯å•ä¸ªå¯¹è±¡ç±»å‹ 12//æ ¹æ®idæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯ public User findUserById(int id) throws Exception; 2ã€è¾“å‡ºpojoå¯¹è±¡listï¼Œæ–¹æ³•è¿”å›å€¼æ˜¯List 12//æ ¹æ®ç”¨æˆ·åæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯ public List&lt;User&gt; findUserByUsername(String userName) throws Exception; resultTypeæ€»ç»“ï¼š è¾“å‡ºpojoå¯¹è±¡å’Œè¾“å‡ºpojoåˆ—è¡¨åœ¨sqlä¸­å®šä¹‰çš„resultTypeæ˜¯ä¸€æ ·çš„ã€‚ è¿”å›å•ä¸ªpojoå¯¹è±¡è¦ä¿è¯sqlæŸ¥è¯¢å‡ºæ¥çš„ç»“æœé›†ä¸ºå•æ¡ï¼Œå†…éƒ¨ä½¿ç”¨session.selectOneæ–¹æ³•è°ƒç”¨ï¼Œmapperæ¥å£ä½¿ç”¨pojoå¯¹è±¡ä½œä¸ºæ–¹æ³•è¿”å›å€¼ã€‚ è¿”å›pojoåˆ—è¡¨è¡¨ç¤ºæŸ¥è¯¢å‡ºæ¥çš„ç»“æœé›†å¯èƒ½ä¸ºå¤šæ¡ï¼Œå†…éƒ¨ä½¿ç”¨session.selectListæ–¹æ³•ï¼Œmapperæ¥å£ä½¿ç”¨Listå¯¹è±¡ä½œä¸ºæ–¹æ³•è¿”å›å€¼ã€‚ resultMap resultType å¯ä»¥æŒ‡å®š pojo å°†æŸ¥è¯¢ç»“æœæ˜ å°„ä¸º pojoï¼Œä½†éœ€è¦ pojo çš„å±æ€§åå’Œ sql æŸ¥è¯¢çš„åˆ—åä¸€è‡´æ–¹å¯æ˜ å°„æˆåŠŸã€‚ å¦‚æœsqlæŸ¥è¯¢å­—æ®µåå’Œpojoçš„å±æ€§åä¸ä¸€è‡´ï¼Œå¯ä»¥é€šè¿‡resultMapå°†å­—æ®µåå’Œå±æ€§åä½œä¸€ä¸ªå¯¹åº”å…³ç³» ï¼ŒresultMapå®è´¨ä¸Šè¿˜éœ€è¦å°†æŸ¥è¯¢ç»“æœæ˜ å°„åˆ°pojoå¯¹è±¡ä¸­ã€‚ resultMapå¯ä»¥å®ç°å°†æŸ¥è¯¢ç»“æœæ˜ å°„ä¸ºå¤æ‚ç±»å‹çš„pojoï¼Œæ¯”å¦‚åœ¨æŸ¥è¯¢ç»“æœæ˜ å°„å¯¹è±¡ä¸­åŒ…æ‹¬pojoå’Œlistå®ç°ä¸€å¯¹ä¸€æŸ¥è¯¢å’Œä¸€å¯¹å¤šæŸ¥è¯¢ã€‚ ä½¿ç”¨æ–¹æ³•ï¼š 1ã€å®šä¹‰ resultMap 2ã€ä½¿ç”¨ resultMap ä½œä¸º statement çš„è¾“å‡ºæ˜ å°„ç±»å‹ å°†ä¸‹é¢çš„ sql ä½¿ç”¨ User å®Œæˆæ˜ å°„ 1select id id_, username username_ from user where id = #&#123;value&#125; User ç±»ä¸­å±æ€§åå’Œä¸Šè¾¹æŸ¥è¯¢çš„åˆ—åä¸ä¸€è‡´ã€‚ æ‰€ä»¥éœ€è¦ï¼š 1ã€å®šä¹‰ resultMap 1234567891011121314151617181920&lt;!--å®šä¹‰ resultMap å°†select id id_, username username_ from user where id = #&#123;value&#125; å’ŒUserç±»ä¸­çš„å±æ€§åšä¸€ä¸ªæ˜ å°„å…³ç³» type: resultMapæœ€ç»ˆæ˜ å°„çš„javaå¯¹è±¡ç±»å‹ id:å¯¹resultMapçš„å”¯ä¸€æ ‡è¯† --&gt; &lt;resultMap id=\"userResultMap\" type=\"user\"&gt; &lt;!--idè¡¨ç¤ºæŸ¥è¯¢ç»“æœä¸­çš„å”¯ä¸€æ ‡è¯† columnï¼šæŸ¥è¯¢å‡ºæ¥çš„åˆ—å propertyï¼štypeæŒ‡å®špojoçš„å±æ€§å æœ€ç»ˆresultMapå¯¹columnå’Œpropertyåšä¸€ä¸ªæ˜ å°„å…³ç³»ï¼ˆå¯¹åº”å…³ç³»ï¼‰ --&gt; &lt;id column=\"id_\" property=\"id\"/&gt; &lt;!--result: å¯¹æ™®é€šç»“æœæ˜ å°„å®šä¹‰ columnï¼šæŸ¥è¯¢å‡ºæ¥çš„åˆ—å propertyï¼štypeæŒ‡å®špojoçš„å±æ€§å æœ€ç»ˆresultMapå¯¹columnå’Œpropertyåšä¸€ä¸ªæ˜ å°„å…³ç³»ï¼ˆå¯¹åº”å…³ç³»ï¼‰ --&gt; &lt;result column=\"username_\" property=\"username\"/&gt; &lt;/resultMap&gt; 2ã€ä½¿ç”¨ resultMap ä½œä¸º statement çš„è¾“å‡ºæ˜ å°„ç±»å‹ 12345&lt;!--ä½¿ç”¨ resultMap ä½œä¸ºè¾“å‡ºæ˜ å°„ç±»å‹ resultMap=\"userResultMap\":å…¶ä¸­çš„userResultMapå°±æ˜¯æˆ‘ä»¬åˆšæ‰å®šä¹‰çš„ resultMap çš„idå€¼,å¦‚æœè¿™ä¸ªresultMapåœ¨å…¶ä»–çš„mapperæ–‡ä»¶ä¸­ï¼Œå‰è¾¹é¡»åŠ ä¸Šnamespace --&gt; &lt;select id=\"findUserByIdResultMap\" parameterType=\"int\" resultMap=\"userResultMap\"&gt; select id id_, username username_ from user where id = #&#123;value&#125; &lt;/select&gt; 3ã€UserMapper.java 12//æ ¹æ®idæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯ï¼Œä½¿ç”¨ resultMap è¾“å‡ºpublic User findUserByIdResultMap(int id) throws Exception; 4ã€æµ‹è¯• 1234567891011//æµ‹è¯•æ ¹æ®idæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯ï¼Œä½¿ç”¨ resultMap è¾“å‡º @Test public void testFindUserByIdResultMap() throws Exception &#123; SqlSession sqlSession = sqlSessionFactory.openSession(); //åˆ›å»ºusermapperå¯¹è±¡,mybatisè‡ªåŠ¨ç”Ÿæˆä»£ç†å¯¹è±¡ UserMapper userMapper = sqlSession.getMapper(UserMapper.class); //è°ƒç”¨UserMapperçš„æ–¹æ³• User user = userMapper.findUserByIdResultMap(1); System.out.println(user); &#125; 5ã€æµ‹è¯•ç»“æœ åŠ¨æ€ SQLé€šè¿‡mybatisæä¾›çš„å„ç§æ ‡ç­¾æ–¹æ³•å®ç°åŠ¨æ€æ‹¼æ¥sqlã€‚ éœ€æ±‚ï¼š ç”¨æˆ·ä¿¡æ¯ç»¼åˆæŸ¥è¯¢åˆ—è¡¨å’Œç”¨æˆ·ä¿¡æ¯æŸ¥è¯¢åˆ—è¡¨æ€»æ•°è¿™ä¸¤ä¸ª statementçš„å®šä¹‰ä½¿ç”¨åŠ¨æ€sqlã€‚ å¯¹æŸ¥è¯¢æ¡ä»¶è¿›è¡Œåˆ¤æ–­ï¼Œå¦‚æœè¾“å…¥çš„å‚æ•°ä¸ä¸ºç©ºæ‰è¿›è¡ŒæŸ¥è¯¢æ¡ä»¶æ‹¼æ¥ã€‚ UserMapper.xml (findUserListçš„é…ç½®å¦‚ä¸‹ï¼Œé‚£ä¹ˆfindUserCountçš„ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œè¿™é‡Œå°±ä¸å…¨éƒ¨å†™å‡ºæ¥äº†) 1234567891011121314&lt;select id=\"findUserList\" parameterType=\"cn.zhisheng.mybatis.po.UserQueryVo\" resultType=\"cn.zhisheng.mybatis.po.UserCustom\"&gt; select * from user &lt;!--whereå¯ä»¥è‡ªåŠ¨çš„å»æ‰æ¡ä»¶ä¸­çš„ç¬¬ä¸€ä¸ªand--&gt; &lt;where&gt; &lt;if test=\"userCustom != null\"&gt; &lt;if test=\"userCustom.sex != null and userCustom.sex != ''\"&gt; and user.sex = #&#123;userCustom.sex&#125; &lt;/if&gt; &lt;if test=\"userCustom.username != null\"&gt; and user.username like '%$&#123;userCustom.username&#125;%' &lt;/if&gt; &lt;/if&gt; &lt;/where&gt; &lt;/select&gt; æµ‹è¯•ä»£ç ï¼šå› ä¸ºè®¾ç½®äº†åŠ¨æ€çš„sqlï¼Œå¦‚æœä¸è®¾ç½®æŸä¸ªå€¼ï¼Œé‚£ä¹ˆæ¡ä»¶å°±ä¸ä¼šæ‹¼æ¥åœ¨sqlä¸Š æ‰€ä»¥æˆ‘ä»¬å°±æ³¨é‡Šæ‰è®¾ç½®usernameçš„è¯­å¥ 1//userCustom.setUsername(\"å¼ å°æ˜\"); æµ‹è¯•ç»“æœï¼š Sql ç‰‡æ®µé€šè¿‡ä¸Šé¢çš„å…¶å®çœ‹åˆ°åœ¨ where sqlè¯­å¥ä¸­æœ‰å¾ˆå¤šé‡å¤ä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶æŠ½å–å‡ºæ¥ï¼Œç»„æˆä¸€ä¸ªsqlç‰‡æ®µï¼Œå…¶ä»–çš„statementå°±å¯ä»¥å¼•ç”¨è¿™ä¸ªsqlç‰‡æ®µï¼Œåˆ©äºç³»ç»Ÿçš„å¼€å‘ã€‚ è¿™é‡Œæˆ‘ä»¬å°±æ‹¿ä¸Šè¾¹sql ä¸­çš„whereå®šä¹‰ä¸€ä¸ªsqç‰‡æ®µå¦‚ä¸‹ï¼š 123456789101112131415&lt;!--sqlç‰‡æ®µ id:å”¯ä¸€æ ‡è¯† ç»éªŒï¼šæ˜¯åŸºäºå•è¡¨æ¥å®šä¹‰sqlç‰‡æ®µï¼Œè¿™æ ·çš„è¯sqlç‰‡æ®µçš„å¯é‡ç”¨æ€§æ‰é«˜ ä¸€èˆ¬ä¸åŒ…å«where --&gt; &lt;sql id=\"query_user_where\"&gt; &lt;if test=\"userCustom != null\"&gt; &lt;if test=\"userCustom.sex != null and userCustom.sex != ''\"&gt; and user.sex = #&#123;userCustom.sex&#125; &lt;/if&gt; &lt;if test=\"userCustom.username != null\"&gt; and user.username like '%$&#123;userCustom.username&#125;%' &lt;/if&gt; &lt;/if&gt; &lt;/sql&gt; é‚£ä¹ˆæˆ‘ä»¬è¯¥æ€æ ·å¼•ç”¨è¿™ä¸ªsqlç‰‡æ®µå‘¢ï¼Ÿå¦‚ä¸‹ï¼š 12345select * from user &lt;where&gt; &lt;!--refid: æŒ‡å®šsqlç‰‡æ®µçš„idï¼Œå¦‚æœæ˜¯å†™åœ¨å…¶ä»–çš„mapperæ–‡ä»¶ä¸­ï¼Œåˆ™éœ€è¦åœ¨å‰é¢åŠ ä¸Šnamespace--&gt; &lt;include refid=\"query_user_where\"/&gt; &lt;/where&gt; æµ‹è¯•çš„è¯è¿˜æ˜¯é‚£æ ·äº†ï¼Œå°±ä¸ç»§ç»­è¯´äº†ï¼Œå‰é¢å·²ç»è¯´äº†å¾ˆå¤šäº†ã€‚ foreachå‘sqlä¼ é€’æ•°ç»„æˆ–Listï¼Œmybatisä½¿ç”¨foreachè§£æ éœ€æ±‚ï¼š åœ¨ç”¨æˆ·æŸ¥è¯¢åˆ—è¡¨å’ŒæŸ¥è¯¢æ€»æ•°çš„statementä¸­å¢åŠ å¤šä¸ªidè¾“å…¥æŸ¥è¯¢ã€‚ sqlè¯­å¥å¦‚ä¸‹ï¼š 123SELECT * FROM USER WHERE id=1 OR id=10 ORid=16æˆ–è€…SELECT * FROM USER WHERE id IN(1,10,16) åœ¨è¾“å…¥å‚æ•°ç±»å‹ä¸­æ·»åŠ  List ids ä¼ å…¥å¤šä¸ª id 12345public class UserQueryVo //ç”¨æˆ·åŒ…è£…ç±»å‹&#123; //ä¼ å…¥å¤šä¸ªid private List&lt;Integer&gt; ids;&#125; ä¿®æ”¹ UserMapper.xmlæ–‡ä»¶ WHERE id=1 OR id=10 OR id=16 åœ¨æŸ¥è¯¢æ¡ä»¶ä¸­ï¼ŒæŸ¥è¯¢æ¡ä»¶å®šä¹‰æˆä¸€ä¸ªsqlç‰‡æ®µï¼Œéœ€è¦ä¿®æ”¹sqlç‰‡æ®µã€‚ 12345678910111213141516171819202122&lt;if test=\"ids!=null\"&gt; &lt;!-- ä½¿ç”¨ foreachéå†ä¼ å…¥ids collectionï¼šæŒ‡å®šè¾“å…¥ å¯¹è±¡ä¸­é›†åˆå±æ€§ itemï¼šæ¯ä¸ªéå†ç”Ÿæˆå¯¹è±¡ä¸­ openï¼šå¼€å§‹éå†æ—¶æ‹¼æ¥çš„ä¸² closeï¼šç»“æŸéå†æ—¶æ‹¼æ¥çš„ä¸² separatorï¼šéå†çš„ä¸¤ä¸ªå¯¹è±¡ä¸­éœ€è¦æ‹¼æ¥çš„ä¸² --&gt; &lt;!-- ä½¿ç”¨å®ç°ä¸‹è¾¹çš„sqlæ‹¼æ¥ï¼š AND (id=1 OR id=10 OR id=16) --&gt; &lt;foreach collection=\"ids\" item=\"user_id\" open=\"AND (\" close=\")\" separator=\"or\"&gt; &lt;!-- æ¯ä¸ªéå†éœ€è¦æ‹¼æ¥çš„ä¸² --&gt; id=#&#123;user_id&#125; &lt;/foreach&gt; &lt;!-- å®ç° â€œ and id IN(1,10,16)â€æ‹¼æ¥ --&gt; &lt;!-- &lt;foreach collection=\"ids\" item=\"user_id\" open=\"and id IN(\" close=\")\" separator=\",\"&gt; æ¯ä¸ªéå†éœ€è¦æ‹¼æ¥çš„ä¸² #&#123;user_id&#125; &lt;/foreach&gt; --&gt; &lt;/if&gt; æµ‹è¯•ä»£ç ï¼š 1234567 //ä¼ å…¥å¤šä¸ªidList&lt;Integer&gt; ids = new ArrayList&lt;&gt;();ids.add(1);ids.add(10);ids.add(16);//å°†idsä¼ å…¥statementä¸­userQueryVo.setIds(ids); æœŸå¾…åç»­çš„æ–‡ç« å§ï¼","tags":[{"name":"Mybatis","slug":"Mybatis","permalink":"http://yoursite.com/tags/Mybatis/"},{"name":"SpringMVC","slug":"SpringMVC","permalink":"http://yoursite.com/tags/SpringMVC/"}]},{"title":"å…³äºString s = new String(\"xyz\"); åˆ›å»ºå‡ ä¸ªå¯¹è±¡çš„é—®é¢˜","date":"2017-06-12T16:00:00.000Z","path":"2017/06/13/String-new/","text":"ä½ çŸ¥é“åœ¨ java ä¸­é™¤äº† 8 ç§åŸºæœ¬ç±»å‹å¤–ï¼Œå…¶ä»–çš„éƒ½æ˜¯ç±»å¯¹è±¡ä»¥åŠå…¶å¼•ç”¨ã€‚æ‰€ä»¥ &quot;xyz &quot;åœ¨ java ä¸­å®ƒæ˜¯ä¸€ä¸ªString å¯¹è±¡.å¯¹äº string ç±»å¯¹è±¡æ¥è¯´ä»–çš„å¯¹è±¡å€¼æ˜¯ä¸èƒ½ä¿®æ”¹çš„ï¼Œä¹Ÿå°±æ˜¯å…·æœ‰ä¸å˜æ€§ã€‚ çœ‹ï¼š1234String s= &quot;hello &quot;; s= &quot;Java &quot;; String s1= &quot;hello &quot;; String s2=new String( &quot;hello &quot;); ç»“æœå¦‚ä¸‹å›¾ï¼š å•Šï¼Œs æ‰€å¼•ç”¨çš„ string å¯¹è±¡ä¸æ˜¯è¢«ä¿®æ”¹äº†å—ï¼Ÿä¹‹å‰æ‰€è¯´çš„ä¸å˜æ€§ï¼Œå»é‚£é‡Œäº†å•Šï¼Ÿä½ åˆ«ç€æ€¥ï¼Œè®©æˆ‘å‘Šè¯‰ä½ è¯´å‘ç”Ÿäº†ä»€ä¹ˆäº‹æƒ…ï¼šåœ¨ jvm çš„å·¥ä½œè¿‡ç¨‹ä¸­ï¼Œä¼šåˆ›å»ºä¸€ç‰‡çš„å†…å­˜ç©ºé—´ä¸“é—¨å­˜å…¥ string å¯¹è±¡ã€‚æˆ‘ä»¬æŠŠè¿™ç‰‡å†…å­˜ç©ºé—´å«åš string æ± ã€‚ String s = â€œhello â€œ; å½“ jvm çœ‹åˆ° â€œhelloâ€ï¼Œåœ¨ string æ± åˆ›å»º string å¯¹è±¡å­˜å‚¨å®ƒï¼Œå¹¶å°†ä»–çš„å¼•ç”¨è¿”å›ç»™sã€‚s = â€œjava â€œï¼Œå½“ jvm çœ‹åˆ° â€œjava â€œï¼Œåœ¨ string æ± åˆ›å»ºæ–°çš„ string å¯¹è±¡å­˜å‚¨å®ƒï¼Œå†æŠŠæ–°å»ºçš„ string å¯¹è±¡çš„å¼•ç”¨è¿”å›ç»™sã€‚è€ŒåŸå…ˆçš„ â€œhelloâ€ä»ç„¶åœ¨ string æ± å†…ã€‚æ²¡æœ‰æ¶ˆå¤±ï¼Œä»–æ˜¯ä¸èƒ½è¢«ä¿®æ”¹çš„ã€‚ æ‰€ä»¥æˆ‘ä»¬ä»…ä»…æ˜¯æ”¹å˜äº†sçš„å¼•ç”¨ï¼Œè€Œæ²¡æœ‰æ”¹å˜ä»–æ‰€å¼•ç”¨çš„å¯¹è±¡ï¼Œå› ä¸º string å¯¹è±¡çš„å€¼æ˜¯ä¸èƒ½è¢«ä¿®æ”¹çš„ã€‚ String s1 = â€œhelloâ€ ; jvm é¦–å…ˆåœ¨ string æ± å†…é‡Œé¢çœ‹æ‰¾ä¸æ‰¾å¾—åˆ°å­—ç¬¦ä¸² â€œhelloâ€, å¦‚æœæ‰¾å¾—åˆ°,è¿”å›ä»–çš„å¼•ç”¨ç»™ s1ï¼Œå¦åˆ™çš„è¯å°±ä¼šåˆ›å»ºæ–°çš„ string å¯¹è±¡ï¼Œæ”¾åˆ° string æ± é‡Œã€‚è¿™é‡Œç”±äº s = â€œhelloâ€äº†,å¯¹è±¡å·²ç»è¢«å¼•ç”¨ï¼Œæ‰€ä»¥ä¾æ®è§„åˆ™ s å’Œ s1 éƒ½æ˜¯å¼•ç”¨åŒä¸€ä¸ªå¯¹è±¡ã€‚æ‰€ä»¥ s == s1 å°†è¿”å› trueã€‚( == å¯¹äºéåŸºæœ¬ç±»å‹ï¼Œæ˜¯æ¯”è¾ƒä¸¤å¼•ç”¨æ˜¯å¦å¼•ç”¨å†…å­˜ä¸­çš„åŒä¸€ä¸ªå¯¹è±¡ï¼Œè¿™é‡Œå…ˆä¸åŒºåˆ† == å’Œ equals çš„åŒºåˆ« ) String s2 = new String( â€œhelloâ€); jvm é¦–å…ˆåœ¨ string æ± å†…é‡Œé¢çœ‹æ‰¾ä¸æ‰¾å¾—åˆ°å­—ç¬¦ä¸² â€œhelloâ€, å¦‚æœæ‰¾å¾—åˆ°, ä¸åšä»»ä½•äº‹æƒ…ï¼Œå¦åˆ™çš„è¯å°±ä¼šåˆ›å»ºæ–°çš„ string å¯¹è±¡ï¼Œæ”¾åˆ° string æ± é‡Œé¢ã€‚ç”±äºé‡åˆ°äº† newï¼Œè¿˜ä¼šåœ¨å†…å­˜ä¸Šï¼ˆä¸æ˜¯ string æ± é‡Œé¢ï¼‰åˆ›å»º string å¯¹è±¡å­˜å‚¨ â€œhelloâ€ï¼Œå¹¶å°†å†…å­˜ä¸Šçš„ï¼ˆä¸æ˜¯ string æ± å†…çš„ï¼‰string å¯¹è±¡è¿”å›ç»™ s2ã€‚æ‰€ä»¥ s == s2 å°†è¿”å› falseï¼Œä¸æ˜¯å¼•ç”¨åŒä¸€ä¸ªå¯¹è±¡ã€‚ å¥½ç°åœ¨æˆ‘ä»¬çœ‹é¢˜ç›®ï¼šString s = new String( â€œxyz â€œ);é¦–å…ˆåœ¨ string æ± å†…æ‰¾ï¼Œæ‰¾åˆ°ï¼Ÿä¸åˆ›å»º string å¯¹è±¡ï¼Œå¦åˆ™åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œé‡åˆ° new è¿ç®—ç¬¦å·äº†ï¼Œåœ¨å†…å­˜ä¸Šåˆ›å»º string å¯¹è±¡ï¼Œå¹¶å°†å…¶è¿”å›ç»™ sï¼Œåˆä¸€ä¸ªå¯¹è±¡ æ‰€ä»¥æ€»å…±æ˜¯ 1ä¸ª æˆ–è€… 2ä¸ªå¯¹è±¡ ã€‚ è€Œä¸ºä»€ä¹ˆåœ¨ç½‘ä¸Šéƒ½è¯´ String s=new String(â€œhelloâ€); åˆ›å»ºäº†2ä¸ªå¯¹è±¡ï¼Ÿé‚£å¯èƒ½å› ä¸ºå®ƒå°±å†™è¿™ä¹ˆä¸€å¥ä»£ç ï¼Œè¯¯è®©äººé»˜è®¤çš„è®¤ä¸ºæ‰§è¡Œä»£ç ä¹‹å‰å¹¶ä¸å®ä¾‹ä»»ä½•ä¸€ä¸ª String å¯¹è±¡è¿‡ï¼ˆä¹Ÿè®¸ å¾ˆå¤šäººä¸ä¼šè¿™ä¹ˆæƒ³ï¼Œï¼‰ï¼Œè·Ÿç€åˆ«äººæˆ–è€…ä¸ç»æ€è€ƒçš„å°±è¯´2ä¸ªï¼Œæ–Ÿæ˜¯è¯´å­˜æ”¾åœ¨æ ˆå†…å­˜ä¸­ä¸“é—¨å­˜æ”¾ String å¯¹è±¡å¼•ç”¨çš„ s å˜é‡æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼","tags":[{"name":"Java","slug":"Java","permalink":"http://yoursite.com/tags/Java/"},{"name":"String","slug":"String","permalink":"http://yoursite.com/tags/String/"}]},{"title":"é€šè¿‡é¡¹ç›®é€æ­¥æ·±å…¥äº†è§£Mybatisï¼ˆä¸€ï¼‰","date":"2017-06-11T16:00:00.000Z","path":"2017/06/12/é€šè¿‡é¡¹ç›®é€æ­¥æ·±å…¥äº†è§£Mybatis(ä¸€)/","text":"Mybatis å’Œ SpringMVC é€šè¿‡è®¢å•å•†å“æ¡ˆä¾‹é©±åŠ¨ å®˜æ–¹ä¸­æ–‡åœ°å€ï¼šhttp://www.mybatis.org/mybatis-3/zh/ å®˜æ–¹æ‰˜ç®¡åœ°å€ï¼šhttps://github.com/mybatis/mybatis-3 æœ¬é¡¹ç›®å…¨éƒ¨ä»£ç åœ°å€ï¼šhttps://github.com/zhisheng17/mybatis å¦‚æœè§‰å¾—ä¸é”™çš„è¯ï¼Œæ¬¢è¿ç»™ä¸ª star ï¼Œ å¦‚æœä½ æƒ³å®Œå–„è¿™ä¸ªé¡¹ç›®çš„è¯ï¼Œä½ ä¹Ÿå¯ä»¥ fork åä¿®æ”¹ç„¶åæ¨é€ç»™æˆ‘ã€‚ åŸºç¡€çŸ¥è¯†ï¼šå¯¹åŸç”Ÿæ€ jdbc ç¨‹åºï¼ˆå•ç‹¬ä½¿ç”¨ jdbc å¼€å‘ï¼‰é—®é¢˜æ€»ç»“1ã€ç¯å¢ƒâ€‹ java ç¯å¢ƒ ï¼šjdk1.8.0_77 â€‹ å¼€å‘å·¥å…· ï¼š IDEA 2016.1 â€‹ æ•°æ®åº“ ï¼š MySQL 5.7 2ã€åˆ›å»ºæ•°æ®åº“â€‹ mybatis_test.sql â€‹ Tables ï¼šitemsã€orderdetailã€ordersã€user 3ã€JDBC ç¨‹åºâ€‹ ä½¿ç”¨ JDBC æŸ¥è¯¢ MySQL æ•°æ®åº“ä¸­ç”¨æˆ·è¡¨çš„è®°å½• â€‹ ä»£ç ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980package cn.zhisheng.mybatis.jdbc;/** * Created by 10412 on 2016/11/27. */import java.sql.*;/** *é€šè¿‡å•ç‹¬çš„jdbcç¨‹åºæ¥æ€»ç»“é—®é¢˜ */public class JdbcTest&#123; public static void main(String[] args) &#123; //æ•°æ®åº“è¿æ¥ Connection connection = null; //é¢„ç¼–è¯‘çš„Statementï¼Œä½¿ç”¨é¢„ç¼–è¯‘çš„Statementå¯ä»¥æé«˜æ•°æ®åº“æ€§èƒ½ PreparedStatement preparedStatement = null; //ç»“æœé›† ResultSet resultSet = null; try &#123; //åŠ è½½æ•°æ®åº“é©±åŠ¨ Class.forName(\"com.mysql.jdbc.Driver\"); //é€šè¿‡é©±åŠ¨ç®¡ç†ç±»è·å–æ•°æ®åº“é“¾æ¥ connection = DriverManager.getConnection(\"jdbc:mysql://localhost:3306/mybatis_test?characterEncoding=utf-8\", \"root\", \"root\"); //å®šä¹‰sqlè¯­å¥ ?è¡¨ç¤ºå ä½ç¬¦ï¼ˆåœ¨è¿™é‡Œè¡¨ç¤ºusernameï¼‰ String sql = \"select * from user where username = ?\"; //è·å–é¢„å¤„ç†statement preparedStatement = connection.prepareStatement(sql); //è®¾ç½®å‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¸ºsqlè¯­å¥ä¸­å‚æ•°çš„åºå·ï¼ˆä»1å¼€å§‹ï¼‰ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºè®¾ç½®çš„å‚æ•°å€¼ preparedStatement.setString(1, \"ç‹äº”\"); //å‘æ•°æ®åº“å‘å‡ºsqlæ‰§è¡ŒæŸ¥è¯¢ï¼ŒæŸ¥è¯¢å‡ºç»“æœé›† resultSet = preparedStatement.executeQuery(); //éå†æŸ¥è¯¢ç»“æœé›† while(resultSet.next()) &#123; System.out.println(resultSet.getString(\"id\")+\" \"+resultSet.getString(\"username\")); &#125; &#125; catch (Exception e) &#123; e.printStackTrace(); &#125;finally&#123; //é‡Šæ”¾èµ„æº if(resultSet!=null) &#123; try &#123; resultSet.close(); &#125; catch (SQLException e) &#123; // TODO Auto-generated catch block e.printStackTrace(); &#125; &#125; if(preparedStatement!=null) &#123; try &#123; preparedStatement.close(); &#125; catch (SQLException e) &#123; // TODO Auto-generated catch block e.printStackTrace(); &#125; &#125; if(connection!=null) &#123; try &#123; connection.close(); &#125; catch (SQLException e) &#123; // TODO Auto-generated catch block e.printStackTrace(); &#125; &#125; &#125; &#125;&#125; 4ã€é—®é¢˜æ€»ç»“ æ•°æ®åº“è¿æ¥ï¼Œä½¿ç”¨æ—¶å°±åˆ›å»ºï¼Œä¸ä½¿ç”¨ç«‹å³é‡Šæ”¾ï¼Œå¯¹æ•°æ®åº“é¢‘ç¹è¿æ¥å¼€å¯å’Œå…³é—­ï¼Œé€ æˆæ•°æ®åº“èµ„æºçš„æµªè´¹ï¼Œå½±å“æ•°æ®åº“æ€§èƒ½ã€‚ è§£å†³æ–¹æ³•ï¼šä½¿ç”¨æ•°æ®åº“è¿æ¥æ± ç®¡ç†æ•°æ®åº“è¿æ¥ã€‚ å°† sql è¯­å¥ç¡¬ç¼–ç åˆ° java ä»£ç ä¸­ï¼Œå¦‚æœ sql è¯­å¥éœ€è¦ä¿®æ”¹ï¼Œé‚£ä¹ˆå°±éœ€è¦é‡æ–°ç¼–è¯‘ java ä»£ç ï¼Œä¸åˆ©äºç³»ç»Ÿçš„ç»´æŠ¤ã€‚ è®¾æƒ³ï¼šå°† sql è¯­å¥é…ç½®åœ¨ xml é…ç½®æ–‡ä»¶ä¸­ï¼Œå³ä½¿ sql è¯­å¥å‘ç”Ÿå˜åŒ–ï¼Œä¹Ÿä¸éœ€è¦é‡æ–°ç¼–è¯‘ java ä»£ç ã€‚ å‘ preparedStatement ä¸­è®¾ç½®å‚æ•°ï¼Œå¯¹å ä½ç¬¦å·ä½ç½®å’Œè®¾ç½®å‚æ•°å€¼ï¼Œç¡¬ç¼–ç åœ¨ java ä»£ç ä¸­ï¼ŒåŒæ ·ä¹Ÿä¸åˆ©äºç³»ç»Ÿçš„ç»´æŠ¤ã€‚ è®¾æƒ³ï¼šå°† sql è¯­å¥ã€å ä½ç¬¦ã€å‚æ•°å€¼é…ç½®åœ¨ xml é…ç½®æ–‡ä»¶ä¸­ã€‚ ä» resultSet ä¸­éå†ç»“æœé›†æ•°æ®æ—¶ï¼Œå­˜åœ¨ç¡¬ç¼–ç ï¼Œå°†è·å–è¡¨çš„å­—æ®µè¿›è¡Œç¡¬ç¼–ç ï¼Œä¸åˆ©äºç³»ç»Ÿç»´æŠ¤ã€‚ è®¾æƒ³ï¼šå°†æŸ¥è¯¢çš„ç»“æœé›†è‡ªåŠ¨æ˜ å°„æˆ java å¯¹è±¡ã€‚ Mybatisæ¡†æ¶åŸç†ï¼ˆæŒæ¡ï¼‰1ã€Mybatis æ˜¯ä»€ä¹ˆï¼Ÿâ€‹ Mybatis æ˜¯ä¸€ä¸ªæŒä¹…å±‚çš„æ¶æ„ï¼Œæ˜¯ appach ä¸‹çš„é¡¶çº§é¡¹ç›®ã€‚ â€‹ Mybatis åŸå…ˆæ˜¯æ‰˜ç®¡åœ¨ googlecode ä¸‹ï¼Œå†åæ¥æ˜¯æ‰˜ç®¡åœ¨ Github ä¸Šã€‚ â€‹ Mybatis è®©ç¨‹åºå‘˜å°†ä¸»è¦çš„ç²¾åŠ›æ”¾åœ¨ sql ä¸Šï¼Œé€šè¿‡ Mybatis æä¾›çš„æ˜ å°„æ–¹å¼ï¼Œè‡ªç”±çµæ´»ç”Ÿæˆï¼ˆåŠè‡ªåŠ¨ï¼Œå¤§éƒ¨åˆ†éœ€è¦ç¨‹åºå‘˜ç¼–å†™ sql ï¼‰æ»¡è¶³éœ€è¦ sql è¯­å¥ã€‚ â€‹ Mybatis å¯ä»¥å°†å‘ preparedStatement ä¸­çš„è¾“å…¥å‚æ•°è‡ªåŠ¨è¿›è¡Œè¾“å…¥æ˜ å°„ï¼Œå°†æŸ¥è¯¢ç»“æœé›†çµæ´»çš„æ˜ å°„æˆ java å¯¹è±¡ã€‚ï¼ˆè¾“å‡ºæ˜ å°„ï¼‰ 2ã€Mybatis æ¡†æ¶ æ³¨è§£ï¼š SqlMapConfig.xml ï¼ˆMybatisçš„å…¨å±€é…ç½®æ–‡ä»¶ï¼Œåç§°ä¸å®šï¼‰é…ç½®äº†æ•°æ®æºã€äº‹åŠ¡ç­‰ Mybatis è¿è¡Œç¯å¢ƒ Mapper.xml æ˜ å°„æ–‡ä»¶ï¼ˆé…ç½® sql è¯­å¥ï¼‰ SqlSessionFactory ï¼ˆä¼šè¯å·¥å‚ï¼‰æ ¹æ®é…ç½®æ–‡ä»¶é…ç½®å·¥å‚ã€åˆ›å»º SqlSession SqlSession ï¼ˆä¼šè¯ï¼‰é¢å‘ç”¨æˆ·çš„æ¥å£ã€æ“ä½œæ•°æ®åº“ï¼ˆå‘å‡º sql å¢åˆ æ”¹æŸ¥ï¼‰ Executor ï¼ˆæ‰§è¡Œå™¨ï¼‰æ˜¯ä¸€ä¸ªæ¥å£ï¼ˆåŸºæœ¬æ‰§è¡Œå™¨ã€ç¼“å­˜æ‰§è¡Œå™¨ï¼‰ã€SqlSession å†…éƒ¨é€šè¿‡æ‰§è¡Œå™¨æ“ä½œæ•°æ®åº“ Mapped Statement ï¼ˆåº•å±‚å°è£…å¯¹è±¡ï¼‰å¯¹æ“ä½œæ•°æ®åº“å­˜å‚¨å°è£…ï¼ŒåŒ…æ‹¬ sql è¯­å¥ã€è¾“å…¥å‚æ•°ã€è¾“å‡ºç»“æœç±»å‹ â€‹ Mybatiså…¥é—¨ç¨‹åº1ã€éœ€æ±‚å®ç°ä»¥ä¸‹åŠŸèƒ½ï¼š æ ¹æ®ç”¨æˆ·idæŸ¥è¯¢ä¸€ä¸ªç”¨æˆ·ä¿¡æ¯ æ ¹æ®ç”¨æˆ·åç§°æ¨¡ç³ŠæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯åˆ—è¡¨ æ·»åŠ ç”¨æˆ· æ›´æ–°ç”¨æˆ· åˆ é™¤ç”¨æˆ· 2ã€ç¯å¢ƒjava ç¯å¢ƒ ï¼šjdk1.8.0_77 å¼€å‘å·¥å…· ï¼š IDEA 2016.1 æ•°æ®åº“ ï¼š MySQL 5.7 Mybatis è¿è¡Œç¯å¢ƒï¼ˆ jar åŒ…ï¼‰ MySQL é©±åŠ¨åŒ… å…¶ä»–ä¾èµ–åŒ… 3ã€ log4j.propertiesåœ¨classpathä¸‹åˆ›å»ºlog4j.propertieså¦‚ä¸‹ï¼š 1234567# Global logging configuration#åœ¨å¼€å‘ç¯å¢ƒæ—¥å¿—çº§åˆ«è¦è®¾ç½®ä¸ºDEBUGã€ç”Ÿäº§ç¯å¢ƒè¦è®¾ç½®ä¸ºINFOæˆ–è€…ERRORlog4j.rootLogger=DEBUG, stdout# Console output...log4j.appender.stdout=org.apache.log4j.ConsoleAppenderlog4j.appender.stdout.layout=org.apache.log4j.PatternLayoutlog4j.appender.stdout.layout.ConversionPattern=%5p [%t] - %m%n Mybatisé»˜è®¤ä½¿ç”¨log4jä½œä¸ºè¾“å‡ºæ—¥å¿—ä¿¡æ¯ã€‚ 4ã€å·¥ç¨‹ç»“æ„ 5ã€SqlMapConfig.xmlé…ç½® Mybatis çš„è¿è¡Œç¯å¢ƒã€æ•°æ®æºã€äº‹åŠ¡ç­‰ 1234567891011121314151617181920&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;&lt;!DOCTYPE configuration PUBLIC \"-//mybatis.org//DTD Config 3.0//EN\" \"http://mybatis.org/dtd/mybatis-3-config.dtd\"&gt;&lt;configuration&gt; &lt;!-- å’Œspringæ•´åˆå environmentsé…ç½®å°†åºŸé™¤--&gt; &lt;environments default=\"development\"&gt; &lt;environment id=\"development\"&gt; &lt;!-- ä½¿ç”¨jdbcäº‹åŠ¡ç®¡ç†,äº‹åŠ¡ç”± Mybatis æ§åˆ¶--&gt; &lt;transactionManager type=\"JDBC\" /&gt; &lt;!-- æ•°æ®åº“è¿æ¥æ± ,ç”±Mybatisç®¡ç†ï¼Œæ•°æ®åº“åæ˜¯mybatis_testï¼ŒMysqlç”¨æˆ·årootï¼Œå¯†ç root --&gt; &lt;dataSource type=\"POOLED\"&gt; &lt;property name=\"driver\" value=\"com.mysql.jdbc.Driver\" /&gt; &lt;property name=\"url\" value=\"jdbc:mysql://localhost:3306/mybatis_test?characterEncoding=utf-8\" /&gt; &lt;property name=\"username\" value=\"root\" /&gt; &lt;property name=\"password\" value=\"root\" /&gt; &lt;/dataSource&gt; &lt;/environment&gt; &lt;/environments&gt;&lt;/configuration&gt; 6ã€åˆ›å»º po ç±»Po ç±»ä½œä¸º mybatis è¿›è¡Œ sql æ˜ å°„ä½¿ç”¨ï¼Œpo ç±»é€šå¸¸ä¸æ•°æ®åº“è¡¨å¯¹åº”ï¼ŒUser.java å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657package cn.zhisheng.mybatis.po;import java.util.Date;/** * Created by 10412 on 2016/11/28. */public class User&#123; private int id; private String username; // ç”¨æˆ·å§“å private String sex; // æ€§åˆ« private Date birthday; // ç”Ÿæ—¥ private String address; // åœ°å€ //getter and setter public int getId() &#123; return id; &#125; public void setId(int id) &#123; this.id = id; &#125; public String getUsername() &#123; return username; &#125; public void setUsername(String username) &#123; this.username = username; &#125; public Date getBirthday() &#123; return birthday; &#125; public void setBirthday(Date birthday) &#123; this.birthday = birthday; &#125; public String getSex() &#123; return sex; &#125; public void setSex(String sex) &#123; this.sex = sex; &#125; public String getAddress() &#123; return address; &#125; public void setAddress(String address) &#123; this.address = address; &#125;&#125; 7ã€æ ¹æ®ç”¨æˆ· idï¼ˆä¸»é”®ï¼‰æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯ æ˜ å°„æ–‡ä»¶ User.xmlï¼ˆåŸåœ¨ Ibatis ä¸­å‘½åï¼‰åœ¨ Mybatis ä¸­å‘½åè§„åˆ™ä¸º xxxmapper.xml åœ¨æ˜ å°„æ–‡ä»¶ä¸­é…ç½® sql è¯­å¥ User.xml 123456&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;&lt;!DOCTYPE mapperPUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\"http://mybatis.org/dtd/mybatis-3-mapper.dtd\"&gt;&lt;mapper namespace=\"test\"&gt;&lt;/mapper&gt; namespace ï¼šå‘½åç©ºé—´ï¼Œå¯¹ sql è¿›è¡Œåˆ†ç±»åŒ–ç®¡ç†ï¼Œç”¨äºéš”ç¦» sql è¯­å¥ï¼Œåé¢ä¼šè®²å¦ä¸€å±‚éå¸¸é‡è¦çš„ä½œç”¨ã€‚ â€‹ åœ¨ User.xml ä¸­åŠ å…¥ 123456789101112&lt;!--é€šè¿‡selectæ‰§è¡Œæ•°æ®åº“æŸ¥è¯¢ id:æ ‡è¯†æ˜ å°„æ–‡ä»¶ä¸­çš„sql å°†sqlè¯­å¥å°è£…åˆ°mappedStatementå¯¹è±¡ä¸­ï¼Œæ‰€ä»¥idç§°ä¸ºStatementçš„id #&#123;&#125;ï¼šè¡¨ç¤ºå ä½ç¬¦ #&#123;id&#125;ï¼šå…¶ä¸­çš„idè¡¨ç¤ºæ¥æ”¶è¾“å…¥çš„å‚æ•°ï¼Œå‚æ•°åç§°å°±æ˜¯idï¼Œå¦‚æœè¾“å…¥å‚æ•°æ˜¯ç®€å•ç±»å‹ï¼Œé‚£ä¹ˆ#&#123;&#125;ä¸­çš„å‚æ•°åå¯ä»¥ä»»æ„ï¼Œå¯ä»¥æ˜¯valueæˆ–è€…å…¶ä»–åç§° parameterTypeï¼šè¡¨ç¤ºæŒ‡å®šè¾“å…¥å‚æ•°çš„ç±»å‹ resultTypeï¼šè¡¨ç¤ºæŒ‡å®šsqlè¾“å‡ºç»“æœçš„æ‰€æ˜ å°„çš„javaå¯¹è±¡ç±»å‹ --&gt;&lt;!-- æ ¹æ®idè·å–ç”¨æˆ·ä¿¡æ¯ --&gt; &lt;select id=\"findUserById\" parameterType=\"int\" resultType=\"cn.zhisheng.mybatis.po.User\"&gt; select * from user where id = #&#123;id&#125; &lt;/select&gt; User.xml æ˜ å°„æ–‡ä»¶å·²ç»å®Œå…¨å†™å¥½äº†ï¼Œé‚£æ¥ä¸‹æ¥å°±éœ€è¦åœ¨ SqlMapConfig.xmlä¸­åŠ è½½æ˜ å°„æ–‡ä»¶ User.xml 1234&lt;!--åŠ è½½æ˜ å°„æ–‡ä»¶--&gt; &lt;mappers&gt; &lt;mapper resource=\"sqlmap/User.xml\"/&gt; &lt;/mappers&gt; â€‹ ç¼–å†™ç¨‹åº `MybatisFirst.java` â€‹ 123456789101112131415161718192021222324252627282930313233343536373839404142434445package cn.zhisheng.mybatis.first;import cn.zhisheng.mybatis.po.User;import org.apache.ibatis.io.Resources;import org.apache.ibatis.session.SqlSession;import org.apache.ibatis.session.SqlSessionFactory;import org.apache.ibatis.session.SqlSessionFactoryBuilder;import org.junit.Test;import java.io.IOException;import java.io.InputStream; /*** Created by 10412 on 2016/11/28.*/public class MybatisFirst&#123; //æ ¹æ®idæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯ï¼Œå¾—åˆ°ç”¨æˆ·çš„ä¸€æ¡è®°å½• @Test public void findUserByIdTest() throws IOException &#123; //Mybatis é…ç½®æ–‡ä»¶ String resource = \"SqlMapConfig.xml\"; //å¾—åˆ°é…ç½®æ–‡ä»¶æµ InputStream inputStream = Resources.getResourceAsStream(resource); //åˆ›å»ºä¼šè¯å·¥å‚,ä¼ å…¥Mybatisçš„é…ç½®æ–‡ä»¶ä¿¡æ¯ SqlSessionFactory sqlSessionFactory = new SqlSessionFactoryBuilder().build(inputStream); //é€šè¿‡å·¥å‚å¾—åˆ°SqlSession SqlSession sqlSession = sqlSessionFactory.openSession(); //é€šè¿‡SqlSessionæ“ä½œæ•°æ®åº“ //ç¬¬ä¸€ä¸ªå‚æ•°ï¼šæ˜ å°„æ–‡ä»¶ä¸­Statementçš„idï¼Œç­‰äº = namespace + \".\" + Statementçš„id //ç¬¬äºŒä¸ªå‚æ•°ï¼šæŒ‡å®šå’Œæ˜ å°„æ–‡ä»¶ä¸­æ‰€åŒ¹é…çš„parameterTypeç±»å‹çš„å‚æ•° //sqlSession.selectOne ç»“æœä¸æ˜ å°„æ–‡ä»¶ä¸­æ‰€åŒ¹é…çš„resultTypeç±»å‹çš„å¯¹è±¡ User user = sqlSession.selectOne(\"test.findUserById\", 1); System.out.println(user); //é‡Šæ”¾èµ„æº sqlSession.close(); &#125;&#125; ç„¶åè¿è¡Œä¸€ä¸‹è¿™ä¸ªæµ‹è¯•ï¼Œå‘ç°ç»“æœå¦‚ä¸‹å°±ä»£è¡¨å¯ä»¥äº†ï¼š 8ã€æ ¹æ®ç”¨æˆ·åç§°æ¨¡ç³ŠæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯åˆ—è¡¨ æ˜ å°„æ–‡ä»¶ ä¾æ—§ä½¿ç”¨ User.xml æ–‡ä»¶ï¼Œåªä¸è¿‡è¦åœ¨åŸæ¥çš„æ–‡ä»¶ä¸­åŠ å…¥ 123456789&lt;!-- è‡ªå®šä¹‰æ¡ä»¶æŸ¥è¯¢ç”¨æˆ·åˆ—è¡¨ resultTypeï¼šæŒ‡å®šå°±æ˜¯å•æ¡è®°å½•æ‰€æ˜ å°„çš„javaå¯¹è±¡ç±»å‹ $&#123;&#125;:è¡¨ç¤ºæ‹¼æ¥sqlä¸²ï¼Œå°†æ¥æ”¶åˆ°çš„å‚æ•°å†…å®¹ä¸åŠ ä¿®é¥°çš„æ‹¼æ¥åœ¨sqlä¸­ ä½¿ç”¨$&#123;&#125;æ‹¼æ¥sqlï¼Œä¼šå¼•èµ·sqlæ³¨å…¥ $&#123;value&#125;ï¼šæ¥æ”¶è¾“å…¥å‚æ•°çš„å†…å®¹ï¼Œå¦‚æœä¼ å…¥ç±»å‹æ˜¯ç®€å•ç±»å‹ï¼Œ$&#123;&#125;ä¸­åªèƒ½å¤Ÿä½¿ç”¨value--&gt; &lt;select id=\"findUserByUsername\" parameterType=\"java.lang.String\" resultType=\"cn.zhisheng.mybatis.po.User\"&gt; select * from user where username like '%$&#123;value&#125;%' &lt;/select&gt; ç¼–å†™ç¨‹åº ä¾æ—§ç›´æ¥åœ¨åˆšæ‰é‚£ä¸ª MybatisFirst.java ä¸­åŠ å…¥æµ‹è¯•ä»£ç ï¼š 12345678910111213141516171819202122232425262728//æ ¹æ®ç”¨æˆ·åç§°æ¨¡ç³ŠæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯åˆ—è¡¨ @Test public void findUserByUsernameTest() throws IOException &#123; //Mybatis é…ç½®æ–‡ä»¶ String resource = \"SqlMapConfig.xml\"; //å¾—åˆ°é…ç½®æ–‡ä»¶æµ InputStream inputStream = Resources.getResourceAsStream(resource); //åˆ›å»ºä¼šè¯å·¥å‚,ä¼ å…¥Mybatisçš„é…ç½®æ–‡ä»¶ä¿¡æ¯ SqlSessionFactory sqlSessionFactory = new SqlSessionFactoryBuilder().build(inputStream); //é€šè¿‡å·¥å‚å¾—åˆ°SqlSession SqlSession sqlSession = sqlSessionFactory.openSession(); //é€šè¿‡SqlSessionæ“ä½œæ•°æ®åº“ //ç¬¬ä¸€ä¸ªå‚æ•°ï¼šæ˜ å°„æ–‡ä»¶ä¸­Statementçš„idï¼Œç­‰äº = namespace + \".\" + Statementçš„id //ç¬¬äºŒä¸ªå‚æ•°ï¼šæŒ‡å®šå’Œæ˜ å°„æ–‡ä»¶ä¸­æ‰€åŒ¹é…çš„parameterTypeç±»å‹çš„å‚æ•° //selectList æŸ¥è¯¢ç»“æœå¯èƒ½å¤šæ¡ //listä¸­çš„userå’Œæ˜ å°„æ–‡ä»¶ä¸­resultTypeæ‰€æŒ‡å®šçš„ç±»å‹ä¸€è‡´ List&lt;User&gt; list = sqlSession.selectList(\"test.findUserByUsername\", \"å°æ˜\"); System.out.println(list); //é‡Šæ”¾èµ„æº sqlSession.close(); &#125; åŒæ ·æµ‹è¯•ä¸€ä¸‹findUserByUsernameTest ï¼Œå¦‚æœè¿è¡Œç»“æœå¦‚ä¸‹å°±ä»£è¡¨æ²¡é—®é¢˜ï¼š æç¤ºï¼šé€šè¿‡è¿™ä¸ªä»£ç å¯ä»¥å‘ç°ï¼Œå…¶ä¸­æœ‰ä¸€éƒ¨åˆ†ä»£ç æ˜¯å†—ä½™çš„ï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶å°è£…æˆä¸€ä¸ªå‡½æ•°ã€‚ 1234567public void createSqlSessionFactory() throws IOException &#123; // é…ç½®æ–‡ä»¶ String resource = \"SqlMapConfig.xml\"; InputStream inputStream = Resources.getResourceAsStream(resource); // ä½¿ç”¨SqlSessionFactoryBuilderä»xmlé…ç½®æ–‡ä»¶ä¸­åˆ›å»ºSqlSessionFactory sqlSessionFactory = new SqlSessionFactoryBuilder().build(inputStream); &#125; æ³¨æ„ï¼š1ã€#{ } å’Œ ${ } çš„åŒºåˆ« #{ }è¡¨ç¤ºä¸€ä¸ªå ä½ç¬¦å·ï¼Œé€šè¿‡#{ }å¯ä»¥å®ç° preparedStatement å‘å ä½ç¬¦ä¸­è®¾ç½®å€¼ï¼Œè‡ªåŠ¨è¿›è¡Œjava ç±»å‹å’Œ jdbc ç±»å‹è½¬æ¢ï¼Œ#{ } å¯ä»¥æœ‰æ•ˆé˜²æ­¢sqlæ³¨å…¥ã€‚#{ } å¯ä»¥æ¥æ”¶ç®€å•ç±»å‹å€¼æˆ– pojo å±æ€§å€¼ï¼ˆé€šè¿‡ OGNL è¯»å–å¯¹è±¡ä¸­çš„å€¼ï¼Œå±æ€§.å±æ€§.å±æ€§..æ–¹å¼è·å–å¯¹è±¡å±æ€§å€¼ï¼‰ã€‚ å¦‚æœ parameterType ä¼ è¾“å•ä¸ªç®€å•ç±»å‹å€¼ï¼Œ#{ }æ‹¬å·ä¸­å¯ä»¥æ˜¯ value æˆ–å…¶å®ƒåç§°ã€‚ ${ } è¡¨ç¤ºæ‹¼æ¥ sql ä¸²ï¼Œé€šè¿‡${ }å¯ä»¥å°† parameterType ä¼ å…¥çš„å†…å®¹æ‹¼æ¥åœ¨ sql ä¸­ä¸”ä¸è¿›è¡Œ jdbc ç±»å‹è½¬æ¢ï¼Œ ${ }å¯ä»¥æ¥æ”¶ç®€å•ç±»å‹å€¼æˆ– pojo å±æ€§å€¼ï¼ˆï¼ˆé€šè¿‡ OGNL è¯»å–å¯¹è±¡ä¸­çš„å€¼ï¼Œå±æ€§.å±æ€§.å±æ€§..æ–¹å¼è·å–å¯¹è±¡å±æ€§å€¼ï¼‰ï¼‰ï¼Œå¦‚æœ parameterType ä¼ è¾“å•ä¸ªç®€å•ç±»å‹å€¼ï¼Œ${}æ‹¬å·ä¸­åªèƒ½æ˜¯ valueã€‚ 2ã€parameterType å’Œ resultType åŒºåˆ« parameterTypeï¼šæŒ‡å®šè¾“å…¥å‚æ•°ç±»å‹ï¼Œmybatis é€šè¿‡ ognl ä»è¾“å…¥å¯¹è±¡ä¸­è·å–å‚æ•°å€¼æ‹¼æ¥åœ¨ sql ä¸­ã€‚ resultTypeï¼šæŒ‡å®šè¾“å‡ºç»“æœç±»å‹ï¼Œmybatis å°† sql æŸ¥è¯¢ç»“æœçš„ä¸€è¡Œè®°å½•æ•°æ®æ˜ å°„ä¸º resultType æŒ‡å®šç±»å‹çš„å¯¹è±¡ã€‚ 3ã€selectOne å’Œ selectList åŒºåˆ« selectOne æŸ¥è¯¢ä¸€æ¡è®°å½•æ¥è¿›è¡Œæ˜ å°„ï¼Œå¦‚æœä½¿ç”¨selectOneæŸ¥è¯¢å¤šæ¡è®°å½•åˆ™æŠ›å‡ºå¼‚å¸¸ï¼š org.apache.ibatis.exceptions.TooManyResultsException: Expected one result (or null) to bereturned by selectOne(), but found: 3 at selectList å¯ä»¥æŸ¥è¯¢ä¸€æ¡æˆ–å¤šæ¡è®°å½•æ¥è¿›è¡Œæ˜ å°„ã€‚ 9ã€æ·»åŠ ç”¨æˆ· æ˜ å°„æ–‡ä»¶ åœ¨ User.xml ä¸­åŠ å…¥ï¼š 12345678&lt;!-- æ·»åŠ ç”¨æˆ· --&gt; &lt;insert id=\"insetrUser\" parameterType=\"cn.zhisheng.mybatis.po.User\" &gt; &lt;selectKey keyProperty=\"id\" order=\"AFTER\" resultType=\"java.lang.Integer\"&gt; select LAST_INSERT_ID() &lt;/selectKey&gt; insert into user(username, birthday, sex, address) values(#&#123;username&#125;, #&#123;birthday&#125;, #&#123;sex&#125;, #&#123;address&#125;) &lt;/insert&gt; æ³¨æ„: selectKeyå°†ä¸»é”®è¿”å›ï¼Œéœ€è¦å†è¿”å› æ·»åŠ selectKeyå®ç°å°†ä¸»é”®è¿”å› keyProperty:è¿”å›çš„ä¸»é”®å­˜å‚¨åœ¨pojoä¸­çš„å“ªä¸ªå±æ€§ orderï¼šselectKeyçš„æ‰§è¡Œé¡ºåºï¼Œæ˜¯ç›¸å¯¹ä¸insertè¯­å¥æ¥è¯´ï¼Œç”±äºmysqlçš„è‡ªå¢åŸç†æ‰§è¡Œå®Œinsertè¯­å¥ä¹‹åæ‰å°†ä¸»é”®ç”Ÿæˆï¼Œæ‰€ä»¥è¿™é‡ŒselectKeyçš„æ‰§è¡Œé¡ºåºä¸ºafter resultType:è¿”å›çš„ä¸»é”®æ˜¯ä»€ä¹ˆç±»å‹ LAST_INSERT_ID():æ˜¯mysqlçš„å‡½æ•°ï¼Œè¿”å›auto_incrementè‡ªå¢åˆ—æ–°è®°å½•idå€¼ã€‚ ç„¶ååœ¨ MybatisFirst.java ä¸­å†™ä¸€ä¸ªæµ‹è¯•å‡½æ•°ï¼Œä»£ç å¦‚ä¸‹ 123456789101112131415161718192021@Test public void insetrUser() throws IOException, ParseException &#123; //Mybatis é…ç½®æ–‡ä»¶ String resource = \"SqlMapConfig.xml\"; //å¾—åˆ°é…ç½®æ–‡ä»¶æµ InputStream inputStream = Resources.getResourceAsStream(resource); //åˆ›å»ºä¼šè¯å·¥å‚,ä¼ å…¥Mybatisçš„é…ç½®æ–‡ä»¶ä¿¡æ¯ SqlSessionFactory sqlSessionFactory = new SqlSessionFactoryBuilder().build(inputStream); //é€šè¿‡å·¥å‚å¾—åˆ°SqlSession SqlSession sqlSession = sqlSessionFactory.openSession(); User user = new User(); SimpleDateFormat sdf = new SimpleDateFormat (\"yyyy-MM-dd\"); user.setUsername(\"ç”°å¿—å£°\"); user.setSex(\"ç”·\"); user.setBirthday(sdf.parse(\"2016-11-29\")); user.setAddress(\"æ±Ÿè¥¿å—æ˜Œ\"); sqlSession.insert(\"test.insetrUser\", user); sqlSession.commit(); //é‡Šæ”¾èµ„æº sqlSession.close(); &#125; ç„¶å run ä¸€ä¸‹ï¼Œå¦‚æœå‡ºç°çš„ç»“æœå¦‚ä¸‹ï¼Œé‚£ä¹ˆå°±æ˜¯æˆåŠŸäº†ã€‚ åŒæ—¶æ•°æ®åº“ä¹Ÿèƒ½æŸ¥è¯¢åˆ°åˆšæ’å…¥çš„ç”¨æˆ·ä¿¡æ¯ï¼š 10ã€è‡ªå¢ä¸»é”®è¿”å› ä¸ éè‡ªå¢ä¸»é”®è¿”å› MySQL è‡ªå¢ä¸»é”®ï¼šæ‰§è¡Œ insert æäº¤ä¹‹å‰è‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªè‡ªå¢ä¸»é”®ï¼Œé€šè¿‡ MySQL å‡½æ•°è·å–åˆ°åˆšæ’å…¥è®°å½•çš„è‡ªå¢ä¸»é”®ï¼š LAST_INSERT_ID() ï¼Œæ˜¯åœ¨ insert å‡½æ•°ä¹‹åè°ƒç”¨ã€‚ éè‡ªå¢ä¸»é”®è¿”å›ï¼šä½¿ç”¨ MySQL çš„ uuid() å‡½æ•°ç”Ÿæˆä¸»é”®ï¼Œéœ€è¦ä¿®æ”¹è¡¨ä¸­ id å­—æ®µç±»å‹ä¸º String ï¼Œé•¿åº¦è®¾ç½®ä¸º 35 ä½ï¼Œæ‰§è¡Œæ€è·¯ï¼šå…ˆé€šè¿‡ uuid() æŸ¥è¯¢åˆ°ä¸»é”®ï¼Œå°†ä¸»é”®è¾“å…¥åˆ° sql è¯­å¥ä¸­ï¼›æ‰§è¡Œ uuid() è¯­å¥é¡ºåºç›¸å¯¹äº insert è¯­å¥ä¹‹å‰æ‰§è¡Œã€‚ åˆšæ‰é‚£ä¸ªæ’å…¥ç”¨æˆ·çš„åœ°æ–¹ï¼Œå…¶å®ä¹Ÿå¯ä»¥é€šè¿‡ uuid() æ¥ç”Ÿæˆä¸»é”®ï¼Œå¦‚æœæ˜¯è¿™æ ·çš„è¯ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦åœ¨ User.xml ä¸­åŠ å…¥å¦‚ä¸‹ä»£ç ï¼š 123456789&lt;!--ä½¿ç”¨ MySQL çš„ uuid()ç”Ÿæˆä¸»é”® æ‰§è¡Œè¿‡ç¨‹ï¼š é¦–å…ˆé€šè¿‡uuid()å¾—åˆ°ä¸»é”®ï¼Œå°†ä¸»é”®è®¾ç½®åˆ°userå¯¹è±¡çš„idå±æ€§ä¸­ å…¶æ¬¡æ‰§è¡Œinsertæ—¶ï¼Œä»userå¯¹è±¡ä¸­å–å‡ºidå±æ€§å€¼ --&gt;&lt;selectKey keyProperty=\"id\" order=\"BEFORE\" resultType=\"java.lang.String\"&gt; select uuid()&lt;/selectKey&gt;insert into user(id, username, birthday, sex, address) values(#&#123;id&#125;, #&#123;username&#125;, #&#123;birthday&#125;, #&#123;sex&#125;, #&#123;address&#125;) Oracle ä½¿ç”¨åºåˆ—ç”Ÿæˆä¸»é”® é¦–å…ˆè‡ªå®šä¹‰ä¸€ä¸ªåºåˆ—ä¸”ç”¨äºç”Ÿæˆä¸»é”®ï¼ŒselectKeyä½¿ç”¨å¦‚ä¸‹ï¼š 12345678&lt;insert id=\"insertUser\" parameterType=\"cn.itcast.mybatis.po.User\"&gt; &lt;selectKey resultType=\"java.lang.Integer\" order=\"BEFORE\" keyProperty=\"id\"&gt; SELECT è‡ªå®šä¹‰åºåˆ—.NEXTVAL FROM DUAL &lt;/selectKey&gt;insert into user(id,username,birthday,sex,address) values(#&#123;id&#125;,#&#123;username&#125;,#&#123;birthday&#125;,#&#123;sex&#125;,#&#123;address&#125;)&lt;/insert&gt; â€‹ 11ã€åˆ é™¤ç”¨æˆ·å‰é¢è¯´äº†è¿™ä¹ˆå¤šäº†ï¼Œè¿™é‡Œå°±ç®€å•æ¥è¯´æ˜ä¸‹ï¼š åœ¨ User.xml æ–‡ä»¶ä¸­åŠ å…¥å¦‚ä¸‹ä»£ç ï¼š 1234&lt;!--åˆ é™¤ç”¨æˆ·--&gt; &lt;delete id=\"deleteUserById\" parameterType=\"int\"&gt; delete from user where user.id = #&#123;id&#125; &lt;/delete&gt; åœ¨ MybatisFirst.java æ–‡ä»¶ä¸­åŠ å…¥å¦‚ä¸‹ä»£ç ï¼š 1234567891011121314151617181920212223242526272829//åˆ é™¤ç”¨æˆ· @Test public void deleteUserByIdTest() throws IOException &#123; //Mybatis é…ç½®æ–‡ä»¶ String resource = \"SqlMapConfig.xml\"; //å¾—åˆ°é…ç½®æ–‡ä»¶æµ InputStream inputStream = Resources.getResourceAsStream(resource); //åˆ›å»ºä¼šè¯å·¥å‚,ä¼ å…¥Mybatisçš„é…ç½®æ–‡ä»¶ä¿¡æ¯ SqlSessionFactory sqlSessionFactory = new SqlSessionFactoryBuilder().build(inputStream); //é€šè¿‡å·¥å‚å¾—åˆ°SqlSession SqlSession sqlSession = sqlSessionFactory.openSession(); //é€šè¿‡SqlSessionæ“ä½œæ•°æ®åº“ //ç¬¬ä¸€ä¸ªå‚æ•°ï¼šæ˜ å°„æ–‡ä»¶ä¸­Statementçš„idï¼Œç­‰äº = namespace + \".\" + Statementçš„id //ç¬¬äºŒä¸ªå‚æ•°ï¼šæŒ‡å®šå’Œæ˜ å°„æ–‡ä»¶ä¸­æ‰€åŒ¹é…çš„parameterTypeç±»å‹çš„å‚æ•° sqlSession.delete(\"test.deleteUserById\", 26); //æäº¤äº‹åŠ¡ sqlSession.commit(); //é‡Šæ”¾èµ„æº sqlSession.close(); &#125; æµ‹è¯•ç»“æœå¦‚ä¸‹ï¼š ä¹‹å‰çš„æ•°æ®åº“ user è¡¨æŸ¥è¯¢ç»“æœï¼š æ‰§è¡Œå®Œæµ‹è¯•ä»£ç åï¼Œç»“æœå¦‚ä¸‹ï¼š 12ã€æ›´æ–°ç”¨æˆ·ä¿¡æ¯åœ¨ User.xml ä¸­åŠ å…¥å¦‚ä¸‹ä»£ç ï¼š 123456789&lt;!--æ ¹æ®idæ›´æ–°ç”¨æˆ· éœ€è¦è¾“å…¥ç”¨æˆ·çš„id ä¼ å…¥ç”¨æˆ·è¦æ›´æ–°çš„ä¿¡æ¯ parameterTypeæŒ‡å®šuserå¯¹è±¡ï¼ŒåŒ…æ‹¬idå’Œæ›´æ–°ä¿¡æ¯ï¼Œidå¿…é¡»å­˜åœ¨ #&#123;id&#125;ï¼šä»è¾“å…¥å¯¹è±¡ä¸­è·å–idå±æ€§å€¼--&gt;&lt;update id=\"updateUserById\" parameterType=\"cn.zhisheng.mybatis.po.User\"&gt; update user set username = #&#123;username&#125;, birthday = #&#123;birthday&#125;, sex = #&#123;sex&#125;, address = #&#123;address&#125; where user.id = #&#123;id&#125; &lt;/update&gt; ç„¶ååœ¨ MybatisFirst.java ä¸­åŠ å…¥ 12345678910111213141516171819202122232425262728293031323334353637//æ ¹æ®idæ›´æ–°ç”¨æˆ·ä¿¡æ¯ @Test public void updateUserByIdTest() throws IOException, ParseException &#123; //Mybatis é…ç½®æ–‡ä»¶ String resource = \"SqlMapConfig.xml\"; //å¾—åˆ°é…ç½®æ–‡ä»¶æµ InputStream inputStream = Resources.getResourceAsStream(resource); //åˆ›å»ºä¼šè¯å·¥å‚,ä¼ å…¥Mybatisçš„é…ç½®æ–‡ä»¶ä¿¡æ¯ SqlSessionFactory sqlSessionFactory = new SqlSessionFactoryBuilder().build(inputStream); //é€šè¿‡å·¥å‚å¾—åˆ°SqlSession SqlSession sqlSession = sqlSessionFactory.openSession(); //ä¸ºäº†è®¾ç½®ç”Ÿæ—¥çš„æ—¥æœŸè¾“å…¥ SimpleDateFormat sdf = new SimpleDateFormat (\"yyyy-MM-dd\"); User user = new User(); //æ ¹æ®idæ›´æ–°ç”¨æˆ·ä¿¡æ¯ user.setId(24); user.setUsername(\"å¼ å››é£\"); user.setBirthday(sdf.parse(\"2015-01-12\")); user.setSex(\"å¥³\"); user.setAddress(\"ä¸Šæµ·é»„åŸ”\"); //é€šè¿‡SqlSessionæ“ä½œæ•°æ®åº“ //ç¬¬ä¸€ä¸ªå‚æ•°ï¼šæ˜ å°„æ–‡ä»¶ä¸­Statementçš„idï¼Œç­‰äº = namespace + \".\" + Statementçš„id //ç¬¬äºŒä¸ªå‚æ•°ï¼šæŒ‡å®šå’Œæ˜ å°„æ–‡ä»¶ä¸­æ‰€åŒ¹é…çš„parameterTypeç±»å‹çš„å‚æ•° sqlSession.update(\"test.updateUserById\", user); //æäº¤äº‹åŠ¡ sqlSession.commit(); //é‡Šæ”¾èµ„æº sqlSession.close(); &#125; æµ‹è¯•ç»“æœå¦‚ä¸‹ï¼š æŸ¥çœ‹æ•°æ®åº“ï¼Œid ä¸º 24 çš„ç”¨æˆ·ä¿¡æ¯æ˜¯å¦æ›´æ–°äº†ï¼š å•Šï¼Œæ˜¯ä¸æ˜¯å¾ˆçˆ½ï¼Œæ‰€æœ‰çš„éœ€æ±‚éƒ½å®Œæˆäº†ã€‚ æ²¡é”™ï¼Œè¿™åªæ˜¯ Mybatis çš„ä¸€ä¸ªç®€å•çš„å…¥é—¨ç¨‹åºï¼Œç®€å•çš„å®ç°äº†å¯¹æ•°æ®åº“çš„å¢åˆ æ”¹æŸ¥åŠŸèƒ½ï¼Œé€šè¿‡è¿™ä¸ªæˆ‘ä»¬å¤§æ¦‚å¯ä»¥äº†è§£è¿™ä¸ªç¼–ç¨‹æ–¹å¼äº†ã€‚ æœŸå¾…æ¥ä¸‹æ¥çš„ Mybatisé«˜çº§çŸ¥è¯†æ–‡ç« å§ï¼ æ›´å¤šæ–‡ç« è¯·è§ å¾®ä¿¡å…¬ä¼—å·ï¼šçŒ¿blog","tags":[{"name":"Mybatis","slug":"Mybatis","permalink":"http://yoursite.com/tags/Mybatis/"},{"name":"SpringMVC","slug":"SpringMVC","permalink":"http://yoursite.com/tags/SpringMVC/"}]},{"title":"Â å…­æœˆ â€”â€” æ„¿ä½ åšæœ€ç¾å¥½çš„è‡ªå·±ï¼","date":"2017-06-01T16:00:00.000Z","path":"2017/06/02/poetry2/","text":"ç¾å¦™çš„å…­æœˆå·²ç»åˆ°æ¥ï¼Œé€ä½ å…«å°ä¿¡ï¼Œæ„¿æ—¶å…‰è½»ç¼“ï¼Œæ„¿å¾®é£æ­£å¥½ï¼Œæ„¿ä½ åšæœ€ç¾å¥½çš„è‡ªå·±ã€‚ ç¬¬ä¸€å° â€”â€” å…³äºå‹åŠ› é¸¡è›‹ï¼Œä»å¤–æ‰“ç ´æ˜¯é£Ÿç‰©ï¼Œä»å†…æ‰“ç ´æ˜¯ç”Ÿå‘½ã€‚äººç”Ÿäº¦æ˜¯ï¼Œä»å¤–æ‰“ç ´æ˜¯å‹åŠ›ï¼Œä»å†…æ‰“ç ´æ˜¯æˆé•¿ã€‚å¦‚æœä½ ç­‰å¾…åˆ«äººæ‰“ç ´ä½ ï¼Œé‚£ä¹ˆä½ æ³¨å®šæˆä¸ºåˆ«äººçš„é£Ÿç‰©ï¼›å¦‚æœèƒ½è®©è‡ªå·±ä»å†…æ‰“ç ´ï¼Œé‚£ä¹ˆä½ ä¼šå‘ç°è‡ªå·±çš„æˆé•¿ç›¸å½“äºä¸€ç§é‡ç”Ÿã€‚ ç¬¬äºŒå° â€”â€” å…³äºè¯»ä¹¦ è¯»ä¹¦æ˜¯ä¸€ç§å……å®äººç”Ÿçš„è‰ºæœ¯ï¼Œæ²¡æœ‰ä¹¦çš„äººç”Ÿå°±åƒç©ºå¿ƒçš„ç«¹å­ä¸€æ ·ï¼Œç©ºæ´æ— ç‰©ã€‚çŠ¹å¤ªäººè®©å­©å­ä»¬äº²å»æ¶‚æœ‰èœ‚èœœçš„ä¹¦æœ¬ï¼Œæ˜¯ä¸ºäº†è®©ä»–ä»¬è®°ä½ï¼šä¹¦æœ¬æ˜¯ç”œçš„ï¼Œè¦è®©ç”œèœœå……æ»¡äººç”Ÿå°±è¦è¯»ä¹¦ã€‚è¯»ä¹¦æ˜¯ä¸€æœ¬äººç”Ÿæœ€éš¾å¾—çš„å­˜æŠ˜ï¼Œä¸€ç‚¹ä¸€æ»´åœ°ç§¯ç´¯ï¼Œæœ€åä½ ä¼šå‘ç°ï¼šè‡ªå·±æ˜¯ä¸–ç•Œä¸Šæœ€å¯Œæœ‰çš„äººã€‚ç¬¬ä¸‰å° â€”â€” å…³äºäººé™…å…³ç³» ä½ å¯ä»¥è¦æ±‚è‡ªå·±å®ˆä¿¡ï¼Œä½†ä¸èƒ½è¦æ±‚åˆ«äººå®ˆä¿¡ï¼›ä½ å¯ä»¥è¦æ±‚è‡ªå·±å¯¹äººå¥½ï¼Œä½†ä¸èƒ½æœŸå¾…åˆ«äººå¯¹ä½ å¥½ã€‚ä½ æ€æ ·å¯¹äººï¼Œå¹¶ä¸ä»£è¡¨äººå®¶å°±ä¼šæ€ä¹ˆå¯¹ä½ ã€‚å¦‚æœçœ‹ä¸é€è¿™ä¸€ç‚¹ï¼Œä½ åªä¼šå¾’æ·»ä¸å¿…è¦çš„çƒ¦æ¼ã€‚ ç¬¬å››å° â€”â€” å…³äºå­¤ç‹¬ æ¯ä¸ªäººéƒ½è¦ç»å†ä¸€æ®µå­¤ç‹¬çš„æ—¥å­ï¼Œæ¯æ®µè·¯éƒ½æœ‰ä¸€æ®µç‹¬å­¤çš„æ—¶å…‰ã€‚çˆ¶æ¯ä¸å¯èƒ½ä¸€ç›´å¸®ç€ä½ ï¼Œæœ‹å‹ä¹Ÿä¸å¯èƒ½ä¸€ç›´å›´ç€ä½ è½¬ã€‚å­¤ç‹¬ä¸æ˜¯å­¤åƒ»ï¼Œæ›´ä¸æ˜¯å¯‚å¯ã€‚ç»å†è¿‡å­¤ç‹¬çš„äººï¼Œå†…å¿ƒæ›´åšå¼ºï¼Œä¸ç®¡å¤„äºä»€ä¹ˆæ ·çš„ç¯å¢ƒéƒ½èƒ½è®©è‡ªå·±å®‰é™ï¼Œæ›´å¥½åœ°è°ƒæ•´çŠ¶æ€ï¼Œé¢å¯¹ç¯å¢ƒã€‚ ç¬¬äº”å° â€”â€” å…³äºä¿®å…» çœ‹åˆ«äººä¸é¡ºçœ¼ï¼Œæ˜¯è‡ªå·±ä¿®å…»ä¸å¤Ÿã€‚äººæ„¤æ€’çš„é‚£ä¸€ç¬é—´ï¼Œæ™ºå•†æ˜¯é›¶ï¼Œè¿‡ä¸€åˆ†é’Ÿåæ¢å¤æ­£å¸¸ã€‚äººçš„ä¼˜é›…å…³é”®åœ¨äºæ§åˆ¶è‡ªå·±çš„æƒ°ç»ªï¼Œç”¨å˜´ä¼¤å®³äººï¼Œæ˜¯æœ€æ„šè ¢çš„ä¸€ç§è¡Œä¸ºã€‚ ç¬¬å…­å° â€”â€” å…³äºç°å® ç°å®æœ‰å¤ªå¤šçš„ä¸å¦‚æ„ï¼Œå°±ç®—ç”Ÿæ´»ç»™ä½ çš„æ˜¯åƒåœ¾ï¼Œä½ åŒæ ·èƒ½æŠŠåƒåœ¾è¸©åœ¨è„šåº•ä¸‹ç™»ä¸Šä¸–ç•Œä¹‹å·…ã€‚ä½ è¦æŠŠè‡ªå·±é€¼å‡ºæœ€å¤§çš„æ½œèƒ½ï¼Œæ²¡æœ‰äººä¼šä¸ºä½ çš„æœªæ¥ä¹°å•ï¼Œä½ è¦ä¹ˆåŠªåŠ›å‘ä¸Šçˆ¬ï¼Œè¦ä¹ˆçƒ‚åœ¨ç¤¾ä¼šæœ€åº•å±‚çš„æ³¥é‡Œï¼Œè¿™å°±æ˜¯ç”Ÿæ´»ã€‚ ç¬¬ä¸ƒå° â€”â€” å…³äºè‡ªå·± ä¸€ä¸ªäººç»è¿‡ä¸åŒç¨‹åº¦çš„é›ç‚¼ï¼Œå°±è·å¾—ä¸åŒç¨‹åº¦çš„ä¿®å…»ã€‚å¥½æ¯”é¦™æ–™ï¼Œæ£å¾—æ„ˆç¢ï¼Œç£¨å¾—æ„ˆç»†ï¼Œé¦™å¾—æ„ˆæµ“çƒˆã€‚æˆ‘ä»¬æ›¾å¦‚æ­¤æ¸´æœ›å‘½è¿çš„æ³¢æ¾œï¼Œåˆ°æœ€åæ‰å‘ç°ï¼šäººç”Ÿæœ€æ›¼å¦™çš„é£æ™¯ï¼Œç«Ÿæ˜¯å†…å¿ƒçš„æ·¡å®šä¸ä»å®¹ã€‚æˆ‘ä»¬æ›¾å¦‚æ­¤æœŸç›¼å¤–ç•Œçš„è®¤å¯ï¼Œåˆ°æœ€åæ‰çŸ¥é“ï¼šä¸–ç•Œæ˜¯è‡ªå·±çš„ï¼Œä¸ä»–äººæ¯«æ— å…³ç³»ã€‚ ç¬¬å…«å° â€”â€” å…³äºå¹¸ç¦ å¸¸æœ‰äººè¯´ï¼Œæˆ‘ç°åœ¨ä¸å¹¸ç¦ï¼Œç­‰æˆ‘ç»“äº†å©šæˆ–ä¹°äº†æˆ¿â€¦â€¦å°±å¹¸ç¦äº†ã€‚äº‹å®æ˜¯ï¼Œå¹¸ç¦çš„äººåœ¨å“ªå„¿éƒ½å¹¸ç¦ï¼Œä¸å¹¸ç¦çš„äººåœ¨å“ªå„¿éƒ½ä¸å¹¸ç¦ã€‚æ‰€ä»¥è¦å…ˆåŸ¹å…»è‡ªå·±çš„å¹¸ç¦åŠ›ï¼Œä¸è®ºå‘ç”Ÿä»€ä¹ˆï¼Œåˆ«äººéƒ½åŠ¨ä¸äº†ä½ çš„è‡ªåœ¨å¼€å¿ƒã€‚è¿™æ‰æ˜¯çœŸæ­£å¼ºå¤§çš„æ°”åœºå’Œè‡ªä¿¡ã€‚ å¹¸ç¦çš„äººç”Ÿï¼Œéœ€è¦ä¸‰ç§å§¿æ€ï¼šå¯¹è¿‡å»ï¼Œè¦æ·¡ï¼›å¯¹ç°åœ¨ï¼Œè¦æƒœï¼›å¯¹æœªæ¥ï¼Œè¦ä¿¡ã€‚æ„¿ä½ æ‹¥æœ‰å¹¸ç¦çš„èƒ½åŠ›ï¼Œåšæœ€ç¾å¥½çš„è‡ªå·±ã€‚","tags":[{"name":"éšç¬”","slug":"éšç¬”","permalink":"http://yoursite.com/tags/éšç¬”/"}]},{"title":"æœ€è¿‘å¾ˆç«çš„é¸¡æ±¤ï¼Œåˆ†äº«ç»™å¤§å®¶","date":"2017-05-11T16:00:00.000Z","path":"2017/05/12/poetry/","text":"&lt;æœ€è¿‘å¾ˆç«çš„ä¸€é¦–å°è¯—ï¼Œåˆ†äº«ç»™å¤§å®¶&gt; çº½çº¦æ—¶é—´æ¯”åŠ å·æ—¶é—´æ—©ä¸‰ä¸ªå°æ—¶ï¼Œ New York is 3 hours ahead of California, ä½†åŠ å·æ—¶é—´å¹¶æ²¡æœ‰å˜æ…¢ã€‚ but it does not make California slow. æœ‰äºº22å²å°±æ¯•ä¸šäº†ï¼Œ Someone graduated at the age of 22, ä½†ç­‰äº†äº”å¹´æ‰æ‰¾åˆ°å¥½çš„å·¥ä½œï¼ but waited 5 years before securing a good job! æœ‰äºº25å²å°±å½“ä¸ŠCEOï¼Œ Someone became a CEO at 25, å´åœ¨50å²å»ä¸–ã€‚ and died at 50. ä¹Ÿæœ‰äººè¿Ÿåˆ°50å²æ‰å½“ä¸ŠCEOï¼Œ While another became a CEO at 50, ç„¶åæ´»åˆ°90å²ã€‚ and lived to 90 years. æœ‰äººä¾ç„¶å•èº«ï¼Œ Someone is still single, åŒæ—¶ä¹Ÿæœ‰äººå·²å©šã€‚ while someone else got married. å¥¥å·´é©¬55å²å°±é€€ä¼‘ï¼Œ Obama retires at 55, å·æ™®70å²æ‰å¼€å§‹å½“æ€»ç»Ÿã€‚ but Trump starts at 70. ä¸–ä¸Šæ¯ä¸ªäººæœ¬æ¥å°±æœ‰è‡ªå·±çš„å‘å±•æ—¶åŒºã€‚ Absolutely everyone in this world works based on their Time Zone. èº«è¾¹æœ‰äº›äººçœ‹ä¼¼èµ°åœ¨ä½ å‰é¢ï¼Œ People around you might seem to go ahead of you, ä¹Ÿæœ‰äººçœ‹ä¼¼èµ°åœ¨ä½ åé¢ã€‚ some might seem to be behind you. ä½†å…¶å®æ¯ä¸ªäººåœ¨è‡ªå·±çš„æ—¶åŒºæœ‰è‡ªå·±çš„æ­¥ç¨‹ã€‚ But everyone is running their own RACE, in their own TIME. ä¸ç”¨å«‰å¦’æˆ–å˜²ç¬‘ä»–ä»¬ã€‚ Donâ€™t envy them or mock them. ä»–ä»¬éƒ½åœ¨è‡ªå·±çš„æ—¶åŒºé‡Œï¼Œä½ ä¹Ÿæ˜¯ï¼ They are in their TIME ZONE, and you are in yours! ç”Ÿå‘½å°±æ˜¯ç­‰å¾…æ­£ç¡®çš„è¡ŒåŠ¨æ—¶æœºã€‚ Life is about waiting for the right moment to act. æ‰€ä»¥ï¼Œæ”¾è½»æ¾ã€‚ So, RELAX. ä½ æ²¡æœ‰è½åã€‚ Youâ€™re not LATE. ä½ æ²¡æœ‰é¢†å…ˆã€‚ Youâ€™re not EARLY. åœ¨å‘½è¿ä¸ºä½ å®‰æ’çš„å±äºè‡ªå·±çš„æ—¶åŒºé‡Œï¼Œä¸€åˆ‡éƒ½å‡†æ—¶ã€‚ You are very much ON TIME, and in your TIME ZONE Destiny set up for you.","tags":[{"name":"éšç¬”","slug":"éšç¬”","permalink":"http://yoursite.com/tags/éšç¬”/"}]},{"title":"Github pages + Hexo åšå®¢ yilia ä¸»é¢˜ä½¿ç”¨ç•…è¨€è¯„è®ºç³»ç»Ÿ","date":"2017-04-12T16:00:00.000Z","path":"2017/04/13/Hexo-yilia-changyan/","text":"å‰è¨€Hexoçš„Yiliaä¸»é¢˜ç”±äºåŸæ¥ä½¿ç”¨çš„æ˜¯å¤šè¯´çš„ç•™è¨€æ¿ï¼Œè¿‘æœŸå¤šè¯´å…¬å‘Šè¦åœæ­¢æä¾›æœåŠ¡äº†ï¼Œæ‰€ä»¥æˆ‘å°±æŠŠå¤šè¯´æ¢æˆæœç‹çš„ç•…è¨€äº†ï¼Œä¸‹é¢å†™ä¸€ä¸ªç®€å•çš„å°æ•™ç¨‹ã€‚ æ³¨å†Œç•…è¨€è¿›å…¥ç•…è¨€å®˜ç½‘ , ç‚¹å‡»å³ä¸Šè§’ â€œå…è´¹æ³¨å†Œâ€ï¼Œå¹¶å¡«å†™æ³¨å†Œä¿¡æ¯ã€‚ï¼ˆæ³¨æ„åŸŸåéœ€è¦å¤‡æ¡ˆä¿¡æ¯ï¼‰ ç™»å½•å¹¶è¿›å…¥ç•…è¨€åå°æ³¨å†Œå®Œåï¼Œç™»å½•è¿›å…¥ç•…è¨€å®˜ç½‘ï¼Œè·å–ä½ çš„ç•…è¨€ app id å’Œ app keyã€‚ ä½¿ç”¨ç•…è¨€ç³»ç»Ÿä¸‹é¢è¯´ä¸‹ä¿®æ”¹è¯„è®ºä¸ºç•…è¨€çš„æ–¹æ³•ï¼Œå…¶å®æ–¹æ³•å’Œå¤šè¯´æ˜¯å·®ä¸å¤šçš„ã€‚ 1ã€ä¿®æ”¹ themes\\yilia\\layout\\_partial\\article.ejs æ¨¡æ¿ï¼ŒæŠŠå¦‚ä¸‹ä»£ç  1234567&lt;% if (!index &amp;&amp; post.comments &amp;&amp; config.disqus_shortname)&#123; %&gt; &lt;section id=\"comments\"&gt; &lt;div id=\"disqus_thread\"&gt; è¿™é‡Œè¿˜æœ‰å¾ˆå¤šä»£ç  &lt;/div&gt; &lt;/section&gt; &lt;% &#125; %&gt; ä¿®æ”¹ä¸ºï¼š 1234567891011121314151617181920 &lt;% if (!index &amp;&amp; post.comments)&#123; %&gt; &lt;section id=&quot;comments&quot;&gt;&lt;!--é«˜é€Ÿç‰ˆï¼ŒåŠ è½½é€Ÿåº¦å¿«ï¼Œä½¿ç”¨å‰éœ€æµ‹è¯•é¡µé¢çš„å…¼å®¹æ€§--&gt;&lt;div id=&quot;SOHUCS&quot; sid=&quot;&lt;%= page.title %&gt;&quot;&gt;&lt;/div&gt;&lt;script&gt; (function()&#123; var appid = &apos;ä½ çš„APP ID&apos;, conf = &apos;ä½ çš„APP KEY&apos;; var doc = document, s = doc.createElement(&apos;script&apos;), h = doc.getElementsByTagName(&apos;head&apos;)[0] || doc.head || doc.documentElement; s.type = &apos;text/javascript&apos;; s.charset = &apos;utf-8&apos;; s.src = &apos;http://assets.changyan.sohu.com/upload/changyan.js?conf=&apos;+ conf +&apos;&amp;appid=&apos; + appid; h.insertBefore(s,h.firstChild); window.SCS_NO_IFRAME = true; &#125;)()&lt;/script&gt; &lt;/section&gt; &lt;% &#125; %&gt; ä¸Šé¢çš„APP IDå’ŒAPP KEYæ˜¯åœ¨ç•…è¨€è®¾ç½®ä¸­å¾—åˆ°ã€‚ è¿™é‡Œéœ€è¦æ³¨æ„ä¸€ç‚¹çš„æ˜¯ï¼šsid=&quot;&lt;%= page.title %&gt;&quot;&gt; è¿™æ ·çš„è¯ç•…è¨€å°±å¯ä»¥ç›´æ¥æ ¹æ®å¯¹åº”çš„æ–‡ç« æ¥è¯†åˆ«ï¼Œä½¿å¾—æ–‡ç« æœ‰å¯¹åº”çš„è¯„è®ºï¼Œä¸ä¼šéƒ½ä¹±åœ¨ä¸€èµ·ã€‚ 2ã€åœ¨æ¯ç¯‡æ–‡ç« å¼€å¤´çš„ front-matter ä¸­æ·»åŠ ä¸€å¥comments: trueï¼Œç„¶åå›åˆ°åšå®¢æ ¹ç›®å½•æ‰§è¡Œå‘½ä»¤ hexo d -g ï¼Œé‡æ–°ç”Ÿæˆåšå®¢å¹¶éƒ¨ç½²åšå®¢ï¼Œç„¶ååˆ·æ–°ï¼Œä»»é€‰ä¸€ç¯‡æ–‡ç« è¿›å…¥ä¸‹æ‹‰ï¼Œä¼šå‘ç°è¯„è®ºåŠŸèƒ½å¯ä»¥ä½¿ç”¨äº†ã€‚ ä¿®æ”¹ BUGä½†æ˜¯ï¼Œè¿™æ˜¯ä½ ä¼šå‘ç°ä¸€ä¸ª Bugï¼Œè¡¨æƒ…æŒ‰é’®ç‚¹å‡»ä¸äº†ï¼ŒåŸå› æ˜¯è¢«å·¦ä¾§çš„ div å±‚è¦†ç›–äº†ï¼Œå›åˆ°æˆ‘ä»¬åˆšæ‰æ”¹è¿‡çš„ä»£ç ï¼Œæ‰¾åˆ° &lt;div id=&quot;SOHUCS&quot; å¼€å¤´çš„ä¸€ä¸²ä»£ç ã€‚å¹¶åšå¦‚ä¸‹æ›´æ”¹ 1&lt;div id=\"SOHUCS\" sid=\"&lt;%=title %&gt;\" style=\"padding: 0px 30px 0px 46px;\"&gt;&lt;/div&gt; åŠ ä¸Šä¸Šé¢è¿™ä¸€æ®µæ ·å¼ä»£ç ï¼Œå³å¯ä¿®å¤ã€‚ å‚è€ƒæ–‡ç« ï¼š 1ã€Hexoåšå®¢yiliaä¸»é¢˜æ›´æ¢ç•…è¨€è¯„è®ºç³»ç»Ÿ 2ã€åœ¨Hexoä¸­ä½¿ç”¨ç•…è¨€è¯„è®ºç³»ç»Ÿ æ–°å¢ç”±äºé—®é¢˜å¤ªå¤šäº†ï¼Œæ‰€ä»¥æ–°å†™äº†ç¯‡æ–‡ç« ï¼šGithub page + Hexo + yilia æ­å»ºåšå®¢å¯èƒ½ä¼šé‡åˆ°çš„æ‰€æœ‰ç–‘é—®","tags":[{"name":"hexo","slug":"hexo","permalink":"http://yoursite.com/tags/hexo/"},{"name":"yilia","slug":"yilia","permalink":"http://yoursite.com/tags/yilia/"}]}]